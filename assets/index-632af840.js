function QZ(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in e)){const s=Object.getOwnPropertyDescriptor(n,i);s&&Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=r(i);fetch(i.href,s)}})();function YZ(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var qj={exports:{}},wx={},Wj={exports:{}},lt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dv=Symbol.for("react.element"),KZ=Symbol.for("react.portal"),XZ=Symbol.for("react.fragment"),eJ=Symbol.for("react.strict_mode"),tJ=Symbol.for("react.profiler"),rJ=Symbol.for("react.provider"),nJ=Symbol.for("react.context"),iJ=Symbol.for("react.forward_ref"),sJ=Symbol.for("react.suspense"),oJ=Symbol.for("react.memo"),aJ=Symbol.for("react.lazy"),W3=Symbol.iterator;function lJ(e){return e===null||typeof e!="object"?null:(e=W3&&e[W3]||e["@@iterator"],typeof e=="function"?e:null)}var Hj={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Zj=Object.assign,Jj={};function Dm(e,t,r){this.props=e,this.context=t,this.refs=Jj,this.updater=r||Hj}Dm.prototype.isReactComponent={};Dm.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Dm.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Qj(){}Qj.prototype=Dm.prototype;function oP(e,t,r){this.props=e,this.context=t,this.refs=Jj,this.updater=r||Hj}var aP=oP.prototype=new Qj;aP.constructor=oP;Zj(aP,Dm.prototype);aP.isPureReactComponent=!0;var H3=Array.isArray,Yj=Object.prototype.hasOwnProperty,lP={current:null},Kj={key:!0,ref:!0,__self:!0,__source:!0};function Xj(e,t,r){var n,i={},s=null,o=null;if(t!=null)for(n in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(s=""+t.key),t)Yj.call(t,n)&&!Kj.hasOwnProperty(n)&&(i[n]=t[n]);var a=arguments.length-2;if(a===1)i.children=r;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(e&&e.defaultProps)for(n in a=e.defaultProps,a)i[n]===void 0&&(i[n]=a[n]);return{$$typeof:Dv,type:e,key:s,ref:o,props:i,_owner:lP.current}}function uJ(e,t){return{$$typeof:Dv,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function uP(e){return typeof e=="object"&&e!==null&&e.$$typeof===Dv}function cJ(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var Z3=/\/+/g;function G2(e,t){return typeof e=="object"&&e!==null&&e.key!=null?cJ(""+e.key):t.toString(36)}function Yw(e,t,r,n,i){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Dv:case KZ:o=!0}}if(o)return o=e,i=i(o),e=n===""?"."+G2(o,0):n,H3(i)?(r="",e!=null&&(r=e.replace(Z3,"$&/")+"/"),Yw(i,t,r,"",function(c){return c})):i!=null&&(uP(i)&&(i=uJ(i,r+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Z3,"$&/")+"/")+e)),t.push(i)),1;if(o=0,n=n===""?".":n+":",H3(e))for(var a=0;a<e.length;a++){s=e[a];var l=n+G2(s,a);o+=Yw(s,t,r,l,i)}else if(l=lJ(e),typeof l=="function")for(e=l.call(e),a=0;!(s=e.next()).done;)s=s.value,l=n+G2(s,a++),o+=Yw(s,t,r,l,i);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function E1(e,t,r){if(e==null)return e;var n=[],i=0;return Yw(e,n,"","",function(s){return t.call(r,s,i++)}),n}function dJ(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var ii={current:null},Kw={transition:null},hJ={ReactCurrentDispatcher:ii,ReactCurrentBatchConfig:Kw,ReactCurrentOwner:lP};lt.Children={map:E1,forEach:function(e,t,r){E1(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return E1(e,function(){t++}),t},toArray:function(e){return E1(e,function(t){return t})||[]},only:function(e){if(!uP(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};lt.Component=Dm;lt.Fragment=XZ;lt.Profiler=tJ;lt.PureComponent=oP;lt.StrictMode=eJ;lt.Suspense=sJ;lt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=hJ;lt.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=Zj({},e.props),i=e.key,s=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,o=lP.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(l in t)Yj.call(t,l)&&!Kj.hasOwnProperty(l)&&(n[l]=t[l]===void 0&&a!==void 0?a[l]:t[l])}var l=arguments.length-2;if(l===1)n.children=r;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];n.children=a}return{$$typeof:Dv,type:e.type,key:i,ref:s,props:n,_owner:o}};lt.createContext=function(e){return e={$$typeof:nJ,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:rJ,_context:e},e.Consumer=e};lt.createElement=Xj;lt.createFactory=function(e){var t=Xj.bind(null,e);return t.type=e,t};lt.createRef=function(){return{current:null}};lt.forwardRef=function(e){return{$$typeof:iJ,render:e}};lt.isValidElement=uP;lt.lazy=function(e){return{$$typeof:aJ,_payload:{_status:-1,_result:e},_init:dJ}};lt.memo=function(e,t){return{$$typeof:oJ,type:e,compare:t===void 0?null:t}};lt.startTransition=function(e){var t=Kw.transition;Kw.transition={};try{e()}finally{Kw.transition=t}};lt.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};lt.useCallback=function(e,t){return ii.current.useCallback(e,t)};lt.useContext=function(e){return ii.current.useContext(e)};lt.useDebugValue=function(){};lt.useDeferredValue=function(e){return ii.current.useDeferredValue(e)};lt.useEffect=function(e,t){return ii.current.useEffect(e,t)};lt.useId=function(){return ii.current.useId()};lt.useImperativeHandle=function(e,t,r){return ii.current.useImperativeHandle(e,t,r)};lt.useInsertionEffect=function(e,t){return ii.current.useInsertionEffect(e,t)};lt.useLayoutEffect=function(e,t){return ii.current.useLayoutEffect(e,t)};lt.useMemo=function(e,t){return ii.current.useMemo(e,t)};lt.useReducer=function(e,t,r){return ii.current.useReducer(e,t,r)};lt.useRef=function(e){return ii.current.useRef(e)};lt.useState=function(e){return ii.current.useState(e)};lt.useSyncExternalStore=function(e,t,r){return ii.current.useSyncExternalStore(e,t,r)};lt.useTransition=function(){return ii.current.useTransition()};lt.version="18.2.0";Wj.exports=lt;var G=Wj.exports;const cP=YZ(G),pJ=QZ({__proto__:null,default:cP},[G]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fJ=G,mJ=Symbol.for("react.element"),yJ=Symbol.for("react.fragment"),gJ=Object.prototype.hasOwnProperty,vJ=fJ.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,wJ={key:!0,ref:!0,__self:!0,__source:!0};function e5(e,t,r){var n,i={},s=null,o=null;r!==void 0&&(s=""+r),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)gJ.call(t,n)&&!wJ.hasOwnProperty(n)&&(i[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)i[n]===void 0&&(i[n]=t[n]);return{$$typeof:mJ,type:e,key:s,ref:o,props:i,_owner:vJ.current}}wx.Fragment=yJ;wx.jsx=e5;wx.jsxs=e5;qj.exports=wx;var M=qj.exports,ZT={},t5={exports:{}},Xi={},r5={exports:{}},n5={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(H,oe){var Ne=H.length;H.push(oe);e:for(;0<Ne;){var je=Ne-1>>>1,Nt=H[je];if(0<i(Nt,oe))H[je]=oe,H[Ne]=Nt,Ne=je;else break e}}function r(H){return H.length===0?null:H[0]}function n(H){if(H.length===0)return null;var oe=H[0],Ne=H.pop();if(Ne!==oe){H[0]=Ne;e:for(var je=0,Nt=H.length,pt=Nt>>>1;je<pt;){var ut=2*(je+1)-1,fn=H[ut],zn=ut+1,Ii=H[zn];if(0>i(fn,Ne))zn<Nt&&0>i(Ii,fn)?(H[je]=Ii,H[zn]=Ne,je=zn):(H[je]=fn,H[ut]=Ne,je=ut);else if(zn<Nt&&0>i(Ii,Ne))H[je]=Ii,H[zn]=Ne,je=zn;else break e}}return oe}function i(H,oe){var Ne=H.sortIndex-oe.sortIndex;return Ne!==0?Ne:H.id-oe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var l=[],c=[],h=1,f=null,m=3,y=!1,g=!1,v=!1,w=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(H){for(var oe=r(c);oe!==null;){if(oe.callback===null)n(c);else if(oe.startTime<=H)n(c),oe.sortIndex=oe.expirationTime,t(l,oe);else break;oe=r(c)}}function x(H){if(v=!1,_(H),!g)if(r(l)!==null)g=!0,it(T);else{var oe=r(c);oe!==null&&Ge(x,oe.startTime-H)}}function T(H,oe){g=!1,v&&(v=!1,b(O),O=-1),y=!0;var Ne=m;try{for(_(oe),f=r(l);f!==null&&(!(f.expirationTime>oe)||H&&!ne());){var je=f.callback;if(typeof je=="function"){f.callback=null,m=f.priorityLevel;var Nt=je(f.expirationTime<=oe);oe=e.unstable_now(),typeof Nt=="function"?f.callback=Nt:f===r(l)&&n(l),_(oe)}else n(l);f=r(l)}if(f!==null)var pt=!0;else{var ut=r(c);ut!==null&&Ge(x,ut.startTime-oe),pt=!1}return pt}finally{f=null,m=Ne,y=!1}}var I=!1,C=null,O=-1,W=5,z=-1;function ne(){return!(e.unstable_now()-z<W)}function K(){if(C!==null){var H=e.unstable_now();z=H;var oe=!0;try{oe=C(!0,H)}finally{oe?xe():(I=!1,C=null)}}else I=!1}var xe;if(typeof S=="function")xe=function(){S(K)};else if(typeof MessageChannel<"u"){var le=new MessageChannel,B=le.port2;le.port1.onmessage=K,xe=function(){B.postMessage(null)}}else xe=function(){w(K,0)};function it(H){C=H,I||(I=!0,xe())}function Ge(H,oe){O=w(function(){H(e.unstable_now())},oe)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(H){H.callback=null},e.unstable_continueExecution=function(){g||y||(g=!0,it(T))},e.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):W=0<H?Math.floor(1e3/H):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return r(l)},e.unstable_next=function(H){switch(m){case 1:case 2:case 3:var oe=3;break;default:oe=m}var Ne=m;m=oe;try{return H()}finally{m=Ne}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(H,oe){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var Ne=m;m=H;try{return oe()}finally{m=Ne}},e.unstable_scheduleCallback=function(H,oe,Ne){var je=e.unstable_now();switch(typeof Ne=="object"&&Ne!==null?(Ne=Ne.delay,Ne=typeof Ne=="number"&&0<Ne?je+Ne:je):Ne=je,H){case 1:var Nt=-1;break;case 2:Nt=250;break;case 5:Nt=1073741823;break;case 4:Nt=1e4;break;default:Nt=5e3}return Nt=Ne+Nt,H={id:h++,callback:oe,priorityLevel:H,startTime:Ne,expirationTime:Nt,sortIndex:-1},Ne>je?(H.sortIndex=Ne,t(c,H),r(l)===null&&H===r(c)&&(v?(b(O),O=-1):v=!0,Ge(x,Ne-je))):(H.sortIndex=Nt,t(l,H),g||y||(g=!0,it(T))),H},e.unstable_shouldYield=ne,e.unstable_wrapCallback=function(H){var oe=m;return function(){var Ne=m;m=oe;try{return H.apply(this,arguments)}finally{m=Ne}}}})(n5);r5.exports=n5;var _J=r5.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var i5=G,Qi=_J;function ee(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s5=new Set,C0={};function yp(e,t){hm(e,t),hm(e+"Capture",t)}function hm(e,t){for(C0[e]=t,e=0;e<t.length;e++)s5.add(t[e])}var Vl=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),JT=Object.prototype.hasOwnProperty,bJ=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,J3={},Q3={};function SJ(e){return JT.call(Q3,e)?!0:JT.call(J3,e)?!1:bJ.test(e)?Q3[e]=!0:(J3[e]=!0,!1)}function xJ(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function $J(e,t,r,n){if(t===null||typeof t>"u"||xJ(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function si(e,t,r,n,i,s,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var bn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){bn[e]=new si(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];bn[t]=new si(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){bn[e]=new si(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){bn[e]=new si(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){bn[e]=new si(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){bn[e]=new si(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){bn[e]=new si(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){bn[e]=new si(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){bn[e]=new si(e,5,!1,e.toLowerCase(),null,!1,!1)});var dP=/[\-:]([a-z])/g;function hP(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(dP,hP);bn[t]=new si(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(dP,hP);bn[t]=new si(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(dP,hP);bn[t]=new si(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){bn[e]=new si(e,1,!1,e.toLowerCase(),null,!1,!1)});bn.xlinkHref=new si("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){bn[e]=new si(e,1,!1,e.toLowerCase(),null,!0,!0)});function pP(e,t,r,n){var i=bn.hasOwnProperty(t)?bn[t]:null;(i!==null?i.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&($J(t,r,i,n)&&(r=null),n||i===null?SJ(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):i.mustUseProperty?e[i.propertyName]=r===null?i.type===3?!1:"":r:(t=i.attributeName,n=i.attributeNamespace,r===null?e.removeAttribute(t):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var nu=i5.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,M1=Symbol.for("react.element"),bf=Symbol.for("react.portal"),Sf=Symbol.for("react.fragment"),fP=Symbol.for("react.strict_mode"),QT=Symbol.for("react.profiler"),o5=Symbol.for("react.provider"),a5=Symbol.for("react.context"),mP=Symbol.for("react.forward_ref"),YT=Symbol.for("react.suspense"),KT=Symbol.for("react.suspense_list"),yP=Symbol.for("react.memo"),sc=Symbol.for("react.lazy"),l5=Symbol.for("react.offscreen"),Y3=Symbol.iterator;function py(e){return e===null||typeof e!="object"?null:(e=Y3&&e[Y3]||e["@@iterator"],typeof e=="function"?e:null)}var yr=Object.assign,B2;function Zy(e){if(B2===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);B2=t&&t[1]||""}return`
`+B2+e}var q2=!1;function W2(e,t){if(!e||q2)return"";q2=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var n=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){n=c}e.call(t.prototype)}else{try{throw Error()}catch(c){n=c}e()}}catch(c){if(c&&n&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=n.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=o&&0<=a);break}}}finally{q2=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Zy(e):""}function TJ(e){switch(e.tag){case 5:return Zy(e.type);case 16:return Zy("Lazy");case 13:return Zy("Suspense");case 19:return Zy("SuspenseList");case 0:case 2:case 15:return e=W2(e.type,!1),e;case 11:return e=W2(e.type.render,!1),e;case 1:return e=W2(e.type,!0),e;default:return""}}function XT(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Sf:return"Fragment";case bf:return"Portal";case QT:return"Profiler";case fP:return"StrictMode";case YT:return"Suspense";case KT:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case a5:return(e.displayName||"Context")+".Consumer";case o5:return(e._context.displayName||"Context")+".Provider";case mP:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case yP:return t=e.displayName||null,t!==null?t:XT(e.type)||"Memo";case sc:t=e._payload,e=e._init;try{return XT(e(t))}catch{}}return null}function EJ(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return XT(t);case 8:return t===fP?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function qc(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function u5(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function MJ(e){var t=u5(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,s=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(o){n=""+o,s.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function I1(e){e._valueTracker||(e._valueTracker=MJ(e))}function c5(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=u5(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function wb(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function eE(e,t){var r=t.checked;return yr({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function K3(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=qc(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function d5(e,t){t=t.checked,t!=null&&pP(e,"checked",t,!1)}function tE(e,t){d5(e,t);var r=qc(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?rE(e,t.type,r):t.hasOwnProperty("defaultValue")&&rE(e,t.type,qc(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function X3(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function rE(e,t,r){(t!=="number"||wb(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Jy=Array.isArray;function Bf(e,t,r,n){if(e=e.options,t){t={};for(var i=0;i<r.length;i++)t["$"+r[i]]=!0;for(r=0;r<e.length;r++)i=t.hasOwnProperty("$"+e[r].value),e[r].selected!==i&&(e[r].selected=i),i&&n&&(e[r].defaultSelected=!0)}else{for(r=""+qc(r),t=null,i=0;i<e.length;i++){if(e[i].value===r){e[i].selected=!0,n&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function nE(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(ee(91));return yr({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function eA(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(ee(92));if(Jy(r)){if(1<r.length)throw Error(ee(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:qc(r)}}function h5(e,t){var r=qc(t.value),n=qc(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function tA(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function p5(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function iE(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?p5(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var C1,f5=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,i){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(C1=C1||document.createElement("div"),C1.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=C1.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function k0(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Hg={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},IJ=["Webkit","ms","Moz","O"];Object.keys(Hg).forEach(function(e){IJ.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Hg[t]=Hg[e]})});function m5(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Hg.hasOwnProperty(e)&&Hg[e]?(""+t).trim():t+"px"}function y5(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=m5(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,i):e[r]=i}}var CJ=yr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function sE(e,t){if(t){if(CJ[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(ee(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(ee(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(ee(61))}if(t.style!=null&&typeof t.style!="object")throw Error(ee(62))}}function oE(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var aE=null;function gP(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var lE=null,qf=null,Wf=null;function rA(e){if(e=Vv(e)){if(typeof lE!="function")throw Error(ee(280));var t=e.stateNode;t&&(t=$x(t),lE(e.stateNode,e.type,t))}}function g5(e){qf?Wf?Wf.push(e):Wf=[e]:qf=e}function v5(){if(qf){var e=qf,t=Wf;if(Wf=qf=null,rA(e),t)for(e=0;e<t.length;e++)rA(t[e])}}function w5(e,t){return e(t)}function _5(){}var H2=!1;function b5(e,t,r){if(H2)return e(t,r);H2=!0;try{return w5(e,t,r)}finally{H2=!1,(qf!==null||Wf!==null)&&(_5(),v5())}}function P0(e,t){var r=e.stateNode;if(r===null)return null;var n=$x(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(ee(231,t,typeof r));return r}var uE=!1;if(Vl)try{var fy={};Object.defineProperty(fy,"passive",{get:function(){uE=!0}}),window.addEventListener("test",fy,fy),window.removeEventListener("test",fy,fy)}catch{uE=!1}function kJ(e,t,r,n,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(r,c)}catch(h){this.onError(h)}}var Zg=!1,_b=null,bb=!1,cE=null,PJ={onError:function(e){Zg=!0,_b=e}};function OJ(e,t,r,n,i,s,o,a,l){Zg=!1,_b=null,kJ.apply(PJ,arguments)}function RJ(e,t,r,n,i,s,o,a,l){if(OJ.apply(this,arguments),Zg){if(Zg){var c=_b;Zg=!1,_b=null}else throw Error(ee(198));bb||(bb=!0,cE=c)}}function gp(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function S5(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function nA(e){if(gp(e)!==e)throw Error(ee(188))}function AJ(e){var t=e.alternate;if(!t){if(t=gp(e),t===null)throw Error(ee(188));return t!==e?null:e}for(var r=e,n=t;;){var i=r.return;if(i===null)break;var s=i.alternate;if(s===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===r)return nA(i),e;if(s===n)return nA(i),t;s=s.sibling}throw Error(ee(188))}if(r.return!==n.return)r=i,n=s;else{for(var o=!1,a=i.child;a;){if(a===r){o=!0,r=i,n=s;break}if(a===n){o=!0,n=i,r=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===r){o=!0,r=s,n=i;break}if(a===n){o=!0,n=s,r=i;break}a=a.sibling}if(!o)throw Error(ee(189))}}if(r.alternate!==n)throw Error(ee(190))}if(r.tag!==3)throw Error(ee(188));return r.stateNode.current===r?e:t}function x5(e){return e=AJ(e),e!==null?$5(e):null}function $5(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=$5(e);if(t!==null)return t;e=e.sibling}return null}var T5=Qi.unstable_scheduleCallback,iA=Qi.unstable_cancelCallback,LJ=Qi.unstable_shouldYield,NJ=Qi.unstable_requestPaint,Mr=Qi.unstable_now,DJ=Qi.unstable_getCurrentPriorityLevel,vP=Qi.unstable_ImmediatePriority,E5=Qi.unstable_UserBlockingPriority,Sb=Qi.unstable_NormalPriority,FJ=Qi.unstable_LowPriority,M5=Qi.unstable_IdlePriority,_x=null,ka=null;function jJ(e){if(ka&&typeof ka.onCommitFiberRoot=="function")try{ka.onCommitFiberRoot(_x,e,void 0,(e.current.flags&128)===128)}catch{}}var ko=Math.clz32?Math.clz32:UJ,VJ=Math.log,zJ=Math.LN2;function UJ(e){return e>>>=0,e===0?32:31-(VJ(e)/zJ|0)|0}var k1=64,P1=4194304;function Qy(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function xb(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,i=e.suspendedLanes,s=e.pingedLanes,o=r&268435455;if(o!==0){var a=o&~i;a!==0?n=Qy(a):(s&=o,s!==0&&(n=Qy(s)))}else o=r&~i,o!==0?n=Qy(o):s!==0&&(n=Qy(s));if(n===0)return 0;if(t!==0&&t!==n&&!(t&i)&&(i=n&-n,s=t&-t,i>=s||i===16&&(s&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-ko(t),i=1<<r,n|=e[r],t&=~i;return n}function GJ(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function BJ(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-ko(s),a=1<<o,l=i[o];l===-1?(!(a&r)||a&n)&&(i[o]=GJ(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}}function dE(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function I5(){var e=k1;return k1<<=1,!(k1&4194240)&&(k1=64),e}function Z2(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Fv(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-ko(t),e[t]=r}function qJ(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var i=31-ko(r),s=1<<i;t[i]=0,n[i]=-1,e[i]=-1,r&=~s}}function wP(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-ko(r),i=1<<n;i&t|e[n]&t&&(e[n]|=t),r&=~i}}var Lt=0;function C5(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var k5,_P,P5,O5,R5,hE=!1,O1=[],Ac=null,Lc=null,Nc=null,O0=new Map,R0=new Map,gc=[],WJ="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function sA(e,t){switch(e){case"focusin":case"focusout":Ac=null;break;case"dragenter":case"dragleave":Lc=null;break;case"mouseover":case"mouseout":Nc=null;break;case"pointerover":case"pointerout":O0.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":R0.delete(t.pointerId)}}function my(e,t,r,n,i,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:s,targetContainers:[i]},t!==null&&(t=Vv(t),t!==null&&_P(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function HJ(e,t,r,n,i){switch(t){case"focusin":return Ac=my(Ac,e,t,r,n,i),!0;case"dragenter":return Lc=my(Lc,e,t,r,n,i),!0;case"mouseover":return Nc=my(Nc,e,t,r,n,i),!0;case"pointerover":var s=i.pointerId;return O0.set(s,my(O0.get(s)||null,e,t,r,n,i)),!0;case"gotpointercapture":return s=i.pointerId,R0.set(s,my(R0.get(s)||null,e,t,r,n,i)),!0}return!1}function A5(e){var t=Sh(e.target);if(t!==null){var r=gp(t);if(r!==null){if(t=r.tag,t===13){if(t=S5(r),t!==null){e.blockedOn=t,R5(e.priority,function(){P5(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Xw(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=pE(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);aE=n,r.target.dispatchEvent(n),aE=null}else return t=Vv(r),t!==null&&_P(t),e.blockedOn=r,!1;t.shift()}return!0}function oA(e,t,r){Xw(e)&&r.delete(t)}function ZJ(){hE=!1,Ac!==null&&Xw(Ac)&&(Ac=null),Lc!==null&&Xw(Lc)&&(Lc=null),Nc!==null&&Xw(Nc)&&(Nc=null),O0.forEach(oA),R0.forEach(oA)}function yy(e,t){e.blockedOn===t&&(e.blockedOn=null,hE||(hE=!0,Qi.unstable_scheduleCallback(Qi.unstable_NormalPriority,ZJ)))}function A0(e){function t(i){return yy(i,e)}if(0<O1.length){yy(O1[0],e);for(var r=1;r<O1.length;r++){var n=O1[r];n.blockedOn===e&&(n.blockedOn=null)}}for(Ac!==null&&yy(Ac,e),Lc!==null&&yy(Lc,e),Nc!==null&&yy(Nc,e),O0.forEach(t),R0.forEach(t),r=0;r<gc.length;r++)n=gc[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<gc.length&&(r=gc[0],r.blockedOn===null);)A5(r),r.blockedOn===null&&gc.shift()}var Hf=nu.ReactCurrentBatchConfig,$b=!0;function JJ(e,t,r,n){var i=Lt,s=Hf.transition;Hf.transition=null;try{Lt=1,bP(e,t,r,n)}finally{Lt=i,Hf.transition=s}}function QJ(e,t,r,n){var i=Lt,s=Hf.transition;Hf.transition=null;try{Lt=4,bP(e,t,r,n)}finally{Lt=i,Hf.transition=s}}function bP(e,t,r,n){if($b){var i=pE(e,t,r,n);if(i===null)i$(e,t,n,Tb,r),sA(e,n);else if(HJ(i,e,t,r,n))n.stopPropagation();else if(sA(e,n),t&4&&-1<WJ.indexOf(e)){for(;i!==null;){var s=Vv(i);if(s!==null&&k5(s),s=pE(e,t,r,n),s===null&&i$(e,t,n,Tb,r),s===i)break;i=s}i!==null&&n.stopPropagation()}else i$(e,t,n,null,r)}}var Tb=null;function pE(e,t,r,n){if(Tb=null,e=gP(n),e=Sh(e),e!==null)if(t=gp(e),t===null)e=null;else if(r=t.tag,r===13){if(e=S5(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Tb=e,null}function L5(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(DJ()){case vP:return 1;case E5:return 4;case Sb:case FJ:return 16;case M5:return 536870912;default:return 16}default:return 16}}var Sc=null,SP=null,e_=null;function N5(){if(e_)return e_;var e,t=SP,r=t.length,n,i="value"in Sc?Sc.value:Sc.textContent,s=i.length;for(e=0;e<r&&t[e]===i[e];e++);var o=r-e;for(n=1;n<=o&&t[r-n]===i[s-n];n++);return e_=i.slice(e,1<n?1-n:void 0)}function t_(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function R1(){return!0}function aA(){return!1}function es(e){function t(r,n,i,s,o){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(r=e[a],this[a]=r?r(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?R1:aA,this.isPropagationStopped=aA,this}return yr(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=R1)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=R1)},persist:function(){},isPersistent:R1}),t}var Fm={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xP=es(Fm),jv=yr({},Fm,{view:0,detail:0}),YJ=es(jv),J2,Q2,gy,bx=yr({},jv,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:$P,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==gy&&(gy&&e.type==="mousemove"?(J2=e.screenX-gy.screenX,Q2=e.screenY-gy.screenY):Q2=J2=0,gy=e),J2)},movementY:function(e){return"movementY"in e?e.movementY:Q2}}),lA=es(bx),KJ=yr({},bx,{dataTransfer:0}),XJ=es(KJ),eQ=yr({},jv,{relatedTarget:0}),Y2=es(eQ),tQ=yr({},Fm,{animationName:0,elapsedTime:0,pseudoElement:0}),rQ=es(tQ),nQ=yr({},Fm,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),iQ=es(nQ),sQ=yr({},Fm,{data:0}),uA=es(sQ),oQ={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},aQ={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},lQ={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function uQ(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=lQ[e])?!!t[e]:!1}function $P(){return uQ}var cQ=yr({},jv,{key:function(e){if(e.key){var t=oQ[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=t_(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?aQ[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:$P,charCode:function(e){return e.type==="keypress"?t_(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?t_(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),dQ=es(cQ),hQ=yr({},bx,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),cA=es(hQ),pQ=yr({},jv,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:$P}),fQ=es(pQ),mQ=yr({},Fm,{propertyName:0,elapsedTime:0,pseudoElement:0}),yQ=es(mQ),gQ=yr({},bx,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),vQ=es(gQ),wQ=[9,13,27,32],TP=Vl&&"CompositionEvent"in window,Jg=null;Vl&&"documentMode"in document&&(Jg=document.documentMode);var _Q=Vl&&"TextEvent"in window&&!Jg,D5=Vl&&(!TP||Jg&&8<Jg&&11>=Jg),dA=String.fromCharCode(32),hA=!1;function F5(e,t){switch(e){case"keyup":return wQ.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function j5(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var xf=!1;function bQ(e,t){switch(e){case"compositionend":return j5(t);case"keypress":return t.which!==32?null:(hA=!0,dA);case"textInput":return e=t.data,e===dA&&hA?null:e;default:return null}}function SQ(e,t){if(xf)return e==="compositionend"||!TP&&F5(e,t)?(e=N5(),e_=SP=Sc=null,xf=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return D5&&t.locale!=="ko"?null:t.data;default:return null}}var xQ={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function pA(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!xQ[e.type]:t==="textarea"}function V5(e,t,r,n){g5(n),t=Eb(t,"onChange"),0<t.length&&(r=new xP("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Qg=null,L0=null;function $Q(e){Y5(e,0)}function Sx(e){var t=Ef(e);if(c5(t))return e}function TQ(e,t){if(e==="change")return t}var z5=!1;if(Vl){var K2;if(Vl){var X2="oninput"in document;if(!X2){var fA=document.createElement("div");fA.setAttribute("oninput","return;"),X2=typeof fA.oninput=="function"}K2=X2}else K2=!1;z5=K2&&(!document.documentMode||9<document.documentMode)}function mA(){Qg&&(Qg.detachEvent("onpropertychange",U5),L0=Qg=null)}function U5(e){if(e.propertyName==="value"&&Sx(L0)){var t=[];V5(t,L0,e,gP(e)),b5($Q,t)}}function EQ(e,t,r){e==="focusin"?(mA(),Qg=t,L0=r,Qg.attachEvent("onpropertychange",U5)):e==="focusout"&&mA()}function MQ(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Sx(L0)}function IQ(e,t){if(e==="click")return Sx(t)}function CQ(e,t){if(e==="input"||e==="change")return Sx(t)}function kQ(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Vo=typeof Object.is=="function"?Object.is:kQ;function N0(e,t){if(Vo(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!JT.call(t,i)||!Vo(e[i],t[i]))return!1}return!0}function yA(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function gA(e,t){var r=yA(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=yA(r)}}function G5(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?G5(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function B5(){for(var e=window,t=wb();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=wb(e.document)}return t}function EP(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function PQ(e){var t=B5(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&G5(r.ownerDocument.documentElement,r)){if(n!==null&&EP(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=r.textContent.length,s=Math.min(n.start,i);n=n.end===void 0?s:Math.min(n.end,i),!e.extend&&s>n&&(i=n,n=s,s=i),i=gA(r,s);var o=gA(r,n);i&&o&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),s>n?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var OQ=Vl&&"documentMode"in document&&11>=document.documentMode,$f=null,fE=null,Yg=null,mE=!1;function vA(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;mE||$f==null||$f!==wb(n)||(n=$f,"selectionStart"in n&&EP(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Yg&&N0(Yg,n)||(Yg=n,n=Eb(fE,"onSelect"),0<n.length&&(t=new xP("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=$f)))}function A1(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Tf={animationend:A1("Animation","AnimationEnd"),animationiteration:A1("Animation","AnimationIteration"),animationstart:A1("Animation","AnimationStart"),transitionend:A1("Transition","TransitionEnd")},e$={},q5={};Vl&&(q5=document.createElement("div").style,"AnimationEvent"in window||(delete Tf.animationend.animation,delete Tf.animationiteration.animation,delete Tf.animationstart.animation),"TransitionEvent"in window||delete Tf.transitionend.transition);function xx(e){if(e$[e])return e$[e];if(!Tf[e])return e;var t=Tf[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in q5)return e$[e]=t[r];return e}var W5=xx("animationend"),H5=xx("animationiteration"),Z5=xx("animationstart"),J5=xx("transitionend"),Q5=new Map,wA="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function sd(e,t){Q5.set(e,t),yp(t,[e])}for(var t$=0;t$<wA.length;t$++){var r$=wA[t$],RQ=r$.toLowerCase(),AQ=r$[0].toUpperCase()+r$.slice(1);sd(RQ,"on"+AQ)}sd(W5,"onAnimationEnd");sd(H5,"onAnimationIteration");sd(Z5,"onAnimationStart");sd("dblclick","onDoubleClick");sd("focusin","onFocus");sd("focusout","onBlur");sd(J5,"onTransitionEnd");hm("onMouseEnter",["mouseout","mouseover"]);hm("onMouseLeave",["mouseout","mouseover"]);hm("onPointerEnter",["pointerout","pointerover"]);hm("onPointerLeave",["pointerout","pointerover"]);yp("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));yp("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));yp("onBeforeInput",["compositionend","keypress","textInput","paste"]);yp("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));yp("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));yp("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Yy="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),LQ=new Set("cancel close invalid load scroll toggle".split(" ").concat(Yy));function _A(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,RJ(n,t,void 0,e),e.currentTarget=null}function Y5(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],i=n.event;n=n.listeners;e:{var s=void 0;if(t)for(var o=n.length-1;0<=o;o--){var a=n[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;_A(i,a,c),s=l}else for(o=0;o<n.length;o++){if(a=n[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;_A(i,a,c),s=l}}}if(bb)throw e=cE,bb=!1,cE=null,e}function Qt(e,t){var r=t[_E];r===void 0&&(r=t[_E]=new Set);var n=e+"__bubble";r.has(n)||(K5(t,e,2,!1),r.add(n))}function n$(e,t,r){var n=0;t&&(n|=4),K5(r,e,n,t)}var L1="_reactListening"+Math.random().toString(36).slice(2);function D0(e){if(!e[L1]){e[L1]=!0,s5.forEach(function(r){r!=="selectionchange"&&(LQ.has(r)||n$(r,!1,e),n$(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[L1]||(t[L1]=!0,n$("selectionchange",!1,t))}}function K5(e,t,r,n){switch(L5(t)){case 1:var i=JJ;break;case 4:i=QJ;break;default:i=bP}r=i.bind(null,t,r,e),i=void 0,!uE||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),n?i!==void 0?e.addEventListener(t,r,{capture:!0,passive:i}):e.addEventListener(t,r,!0):i!==void 0?e.addEventListener(t,r,{passive:i}):e.addEventListener(t,r,!1)}function i$(e,t,r,n,i){var s=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var a=n.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=n.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Sh(a),o===null)return;if(l=o.tag,l===5||l===6){n=s=o;continue e}a=a.parentNode}}n=n.return}b5(function(){var c=s,h=gP(r),f=[];e:{var m=Q5.get(e);if(m!==void 0){var y=xP,g=e;switch(e){case"keypress":if(t_(r)===0)break e;case"keydown":case"keyup":y=dQ;break;case"focusin":g="focus",y=Y2;break;case"focusout":g="blur",y=Y2;break;case"beforeblur":case"afterblur":y=Y2;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=lA;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=XJ;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=fQ;break;case W5:case H5:case Z5:y=rQ;break;case J5:y=yQ;break;case"scroll":y=YJ;break;case"wheel":y=vQ;break;case"copy":case"cut":case"paste":y=iQ;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=cA}var v=(t&4)!==0,w=!v&&e==="scroll",b=v?m!==null?m+"Capture":null:m;v=[];for(var S=c,_;S!==null;){_=S;var x=_.stateNode;if(_.tag===5&&x!==null&&(_=x,b!==null&&(x=P0(S,b),x!=null&&v.push(F0(S,x,_)))),w)break;S=S.return}0<v.length&&(m=new y(m,g,null,r,h),f.push({event:m,listeners:v}))}}if(!(t&7)){e:{if(m=e==="mouseover"||e==="pointerover",y=e==="mouseout"||e==="pointerout",m&&r!==aE&&(g=r.relatedTarget||r.fromElement)&&(Sh(g)||g[zl]))break e;if((y||m)&&(m=h.window===h?h:(m=h.ownerDocument)?m.defaultView||m.parentWindow:window,y?(g=r.relatedTarget||r.toElement,y=c,g=g?Sh(g):null,g!==null&&(w=gp(g),g!==w||g.tag!==5&&g.tag!==6)&&(g=null)):(y=null,g=c),y!==g)){if(v=lA,x="onMouseLeave",b="onMouseEnter",S="mouse",(e==="pointerout"||e==="pointerover")&&(v=cA,x="onPointerLeave",b="onPointerEnter",S="pointer"),w=y==null?m:Ef(y),_=g==null?m:Ef(g),m=new v(x,S+"leave",y,r,h),m.target=w,m.relatedTarget=_,x=null,Sh(h)===c&&(v=new v(b,S+"enter",g,r,h),v.target=_,v.relatedTarget=w,x=v),w=x,y&&g)t:{for(v=y,b=g,S=0,_=v;_;_=Ip(_))S++;for(_=0,x=b;x;x=Ip(x))_++;for(;0<S-_;)v=Ip(v),S--;for(;0<_-S;)b=Ip(b),_--;for(;S--;){if(v===b||b!==null&&v===b.alternate)break t;v=Ip(v),b=Ip(b)}v=null}else v=null;y!==null&&bA(f,m,y,v,!1),g!==null&&w!==null&&bA(f,w,g,v,!0)}}e:{if(m=c?Ef(c):window,y=m.nodeName&&m.nodeName.toLowerCase(),y==="select"||y==="input"&&m.type==="file")var T=TQ;else if(pA(m))if(z5)T=CQ;else{T=MQ;var I=EQ}else(y=m.nodeName)&&y.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(T=IQ);if(T&&(T=T(e,c))){V5(f,T,r,h);break e}I&&I(e,m,c),e==="focusout"&&(I=m._wrapperState)&&I.controlled&&m.type==="number"&&rE(m,"number",m.value)}switch(I=c?Ef(c):window,e){case"focusin":(pA(I)||I.contentEditable==="true")&&($f=I,fE=c,Yg=null);break;case"focusout":Yg=fE=$f=null;break;case"mousedown":mE=!0;break;case"contextmenu":case"mouseup":case"dragend":mE=!1,vA(f,r,h);break;case"selectionchange":if(OQ)break;case"keydown":case"keyup":vA(f,r,h)}var C;if(TP)e:{switch(e){case"compositionstart":var O="onCompositionStart";break e;case"compositionend":O="onCompositionEnd";break e;case"compositionupdate":O="onCompositionUpdate";break e}O=void 0}else xf?F5(e,r)&&(O="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(O="onCompositionStart");O&&(D5&&r.locale!=="ko"&&(xf||O!=="onCompositionStart"?O==="onCompositionEnd"&&xf&&(C=N5()):(Sc=h,SP="value"in Sc?Sc.value:Sc.textContent,xf=!0)),I=Eb(c,O),0<I.length&&(O=new uA(O,e,null,r,h),f.push({event:O,listeners:I}),C?O.data=C:(C=j5(r),C!==null&&(O.data=C)))),(C=_Q?bQ(e,r):SQ(e,r))&&(c=Eb(c,"onBeforeInput"),0<c.length&&(h=new uA("onBeforeInput","beforeinput",null,r,h),f.push({event:h,listeners:c}),h.data=C))}Y5(f,t)})}function F0(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Eb(e,t){for(var r=t+"Capture",n=[];e!==null;){var i=e,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=P0(e,r),s!=null&&n.unshift(F0(e,s,i)),s=P0(e,t),s!=null&&n.push(F0(e,s,i))),e=e.return}return n}function Ip(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function bA(e,t,r,n,i){for(var s=t._reactName,o=[];r!==null&&r!==n;){var a=r,l=a.alternate,c=a.stateNode;if(l!==null&&l===n)break;a.tag===5&&c!==null&&(a=c,i?(l=P0(r,s),l!=null&&o.unshift(F0(r,l,a))):i||(l=P0(r,s),l!=null&&o.push(F0(r,l,a)))),r=r.return}o.length!==0&&e.push({event:t,listeners:o})}var NQ=/\r\n?/g,DQ=/\u0000|\uFFFD/g;function SA(e){return(typeof e=="string"?e:""+e).replace(NQ,`
`).replace(DQ,"")}function N1(e,t,r){if(t=SA(t),SA(e)!==t&&r)throw Error(ee(425))}function Mb(){}var yE=null,gE=null;function vE(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var wE=typeof setTimeout=="function"?setTimeout:void 0,FQ=typeof clearTimeout=="function"?clearTimeout:void 0,xA=typeof Promise=="function"?Promise:void 0,jQ=typeof queueMicrotask=="function"?queueMicrotask:typeof xA<"u"?function(e){return xA.resolve(null).then(e).catch(VQ)}:wE;function VQ(e){setTimeout(function(){throw e})}function s$(e,t){var r=t,n=0;do{var i=r.nextSibling;if(e.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(n===0){e.removeChild(i),A0(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=i}while(r);A0(t)}function Dc(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function $A(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var jm=Math.random().toString(36).slice(2),Ia="__reactFiber$"+jm,j0="__reactProps$"+jm,zl="__reactContainer$"+jm,_E="__reactEvents$"+jm,zQ="__reactListeners$"+jm,UQ="__reactHandles$"+jm;function Sh(e){var t=e[Ia];if(t)return t;for(var r=e.parentNode;r;){if(t=r[zl]||r[Ia]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=$A(e);e!==null;){if(r=e[Ia])return r;e=$A(e)}return t}e=r,r=e.parentNode}return null}function Vv(e){return e=e[Ia]||e[zl],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Ef(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(ee(33))}function $x(e){return e[j0]||null}var bE=[],Mf=-1;function od(e){return{current:e}}function er(e){0>Mf||(e.current=bE[Mf],bE[Mf]=null,Mf--)}function Bt(e,t){Mf++,bE[Mf]=e.current,e.current=t}var Wc={},Dn=od(Wc),Si=od(!1),Bh=Wc;function pm(e,t){var r=e.type.contextTypes;if(!r)return Wc;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in r)i[s]=t[s];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function xi(e){return e=e.childContextTypes,e!=null}function Ib(){er(Si),er(Dn)}function TA(e,t,r){if(Dn.current!==Wc)throw Error(ee(168));Bt(Dn,t),Bt(Si,r)}function X5(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in t))throw Error(ee(108,EJ(e)||"Unknown",i));return yr({},r,n)}function Cb(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Wc,Bh=Dn.current,Bt(Dn,e),Bt(Si,Si.current),!0}function EA(e,t,r){var n=e.stateNode;if(!n)throw Error(ee(169));r?(e=X5(e,t,Bh),n.__reactInternalMemoizedMergedChildContext=e,er(Si),er(Dn),Bt(Dn,e)):er(Si),Bt(Si,r)}var Tl=null,Tx=!1,o$=!1;function e6(e){Tl===null?Tl=[e]:Tl.push(e)}function GQ(e){Tx=!0,e6(e)}function ad(){if(!o$&&Tl!==null){o$=!0;var e=0,t=Lt;try{var r=Tl;for(Lt=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}Tl=null,Tx=!1}catch(i){throw Tl!==null&&(Tl=Tl.slice(e+1)),T5(vP,ad),i}finally{Lt=t,o$=!1}}return null}var If=[],Cf=0,kb=null,Pb=0,xs=[],$s=0,qh=null,kl=1,Pl="";function Od(e,t){If[Cf++]=Pb,If[Cf++]=kb,kb=e,Pb=t}function t6(e,t,r){xs[$s++]=kl,xs[$s++]=Pl,xs[$s++]=qh,qh=e;var n=kl;e=Pl;var i=32-ko(n)-1;n&=~(1<<i),r+=1;var s=32-ko(t)+i;if(30<s){var o=i-i%5;s=(n&(1<<o)-1).toString(32),n>>=o,i-=o,kl=1<<32-ko(t)+i|r<<i|n,Pl=s+e}else kl=1<<s|r<<i|n,Pl=e}function MP(e){e.return!==null&&(Od(e,1),t6(e,1,0))}function IP(e){for(;e===kb;)kb=If[--Cf],If[Cf]=null,Pb=If[--Cf],If[Cf]=null;for(;e===qh;)qh=xs[--$s],xs[$s]=null,Pl=xs[--$s],xs[$s]=null,kl=xs[--$s],xs[$s]=null}var Wi=null,qi=null,sr=!1,$o=null;function r6(e,t){var r=Is(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function MA(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Wi=e,qi=Dc(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Wi=e,qi=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=qh!==null?{id:kl,overflow:Pl}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Is(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Wi=e,qi=null,!0):!1;default:return!1}}function SE(e){return(e.mode&1)!==0&&(e.flags&128)===0}function xE(e){if(sr){var t=qi;if(t){var r=t;if(!MA(e,t)){if(SE(e))throw Error(ee(418));t=Dc(r.nextSibling);var n=Wi;t&&MA(e,t)?r6(n,r):(e.flags=e.flags&-4097|2,sr=!1,Wi=e)}}else{if(SE(e))throw Error(ee(418));e.flags=e.flags&-4097|2,sr=!1,Wi=e}}}function IA(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Wi=e}function D1(e){if(e!==Wi)return!1;if(!sr)return IA(e),sr=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!vE(e.type,e.memoizedProps)),t&&(t=qi)){if(SE(e))throw n6(),Error(ee(418));for(;t;)r6(e,t),t=Dc(t.nextSibling)}if(IA(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(ee(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){qi=Dc(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}qi=null}}else qi=Wi?Dc(e.stateNode.nextSibling):null;return!0}function n6(){for(var e=qi;e;)e=Dc(e.nextSibling)}function fm(){qi=Wi=null,sr=!1}function CP(e){$o===null?$o=[e]:$o.push(e)}var BQ=nu.ReactCurrentBatchConfig;function go(e,t){if(e&&e.defaultProps){t=yr({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}var Ob=od(null),Rb=null,kf=null,kP=null;function PP(){kP=kf=Rb=null}function OP(e){var t=Ob.current;er(Ob),e._currentValue=t}function $E(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Zf(e,t){Rb=e,kP=kf=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(bi=!0),e.firstContext=null)}function Ds(e){var t=e._currentValue;if(kP!==e)if(e={context:e,memoizedValue:t,next:null},kf===null){if(Rb===null)throw Error(ee(308));kf=e,Rb.dependencies={lanes:0,firstContext:e}}else kf=kf.next=e;return t}var xh=null;function RP(e){xh===null?xh=[e]:xh.push(e)}function i6(e,t,r,n){var i=t.interleaved;return i===null?(r.next=r,RP(t)):(r.next=i.next,i.next=r),t.interleaved=r,Ul(e,n)}function Ul(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var oc=!1;function AP(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function s6(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Rl(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Fc(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,yt&2){var i=n.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),n.pending=t,Ul(e,r)}return i=n.interleaved,i===null?(t.next=t,RP(n)):(t.next=i.next,i.next=t),n.interleaved=t,Ul(e,r)}function r_(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,wP(e,r)}}function CA(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,s=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};s===null?i=s=o:s=s.next=o,r=r.next}while(r!==null);s===null?i=s=t:s=s.next=t}else i=s=t;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Ab(e,t,r,n){var i=e.updateQueue;oc=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var h=e.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=c:a.next=c,h.lastBaseUpdate=l))}if(s!==null){var f=i.baseState;o=0,h=c=l=null,a=s;do{var m=a.lane,y=a.eventTime;if((n&m)===m){h!==null&&(h=h.next={eventTime:y,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var g=e,v=a;switch(m=t,y=r,v.tag){case 1:if(g=v.payload,typeof g=="function"){f=g.call(y,f,m);break e}f=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=v.payload,m=typeof g=="function"?g.call(y,f,m):g,m==null)break e;f=yr({},f,m);break e;case 2:oc=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,m=i.effects,m===null?i.effects=[a]:m.push(a))}else y={eventTime:y,lane:m,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(c=h=y,l=f):h=h.next=y,o|=m;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;m=a,a=m.next,m.next=null,i.lastBaseUpdate=m,i.shared.pending=null}}while(1);if(h===null&&(l=f),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=h,t=i.shared.interleaved,t!==null){i=t;do o|=i.lane,i=i.next;while(i!==t)}else s===null&&(i.shared.lanes=0);Hh|=o,e.lanes=o,e.memoizedState=f}}function kA(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(ee(191,i));i.call(n)}}}var o6=new i5.Component().refs;function TE(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:yr({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Ex={isMounted:function(e){return(e=e._reactInternals)?gp(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=Xn(),i=Vc(e),s=Rl(n,i);s.payload=t,r!=null&&(s.callback=r),t=Fc(e,s,i),t!==null&&(Po(t,e,i,n),r_(t,e,i))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=Xn(),i=Vc(e),s=Rl(n,i);s.tag=1,s.payload=t,r!=null&&(s.callback=r),t=Fc(e,s,i),t!==null&&(Po(t,e,i,n),r_(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Xn(),n=Vc(e),i=Rl(r,n);i.tag=2,t!=null&&(i.callback=t),t=Fc(e,i,n),t!==null&&(Po(t,e,n,r),r_(t,e,n))}};function PA(e,t,r,n,i,s,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,s,o):t.prototype&&t.prototype.isPureReactComponent?!N0(r,n)||!N0(i,s):!0}function a6(e,t,r){var n=!1,i=Wc,s=t.contextType;return typeof s=="object"&&s!==null?s=Ds(s):(i=xi(t)?Bh:Dn.current,n=t.contextTypes,s=(n=n!=null)?pm(e,i):Wc),t=new t(r,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Ex,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function OA(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&Ex.enqueueReplaceState(t,t.state,null)}function EE(e,t,r,n){var i=e.stateNode;i.props=r,i.state=e.memoizedState,i.refs=o6,AP(e);var s=t.contextType;typeof s=="object"&&s!==null?i.context=Ds(s):(s=xi(t)?Bh:Dn.current,i.context=pm(e,s)),i.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(TE(e,t,s,r),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&Ex.enqueueReplaceState(i,i.state,null),Ab(e,r,i,n),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function vy(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(ee(309));var n=r.stateNode}if(!n)throw Error(ee(147,e));var i=n,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(o){var a=i.refs;a===o6&&(a=i.refs={}),o===null?delete a[s]:a[s]=o},t._stringRef=s,t)}if(typeof e!="string")throw Error(ee(284));if(!r._owner)throw Error(ee(290,e))}return e}function F1(e,t){throw e=Object.prototype.toString.call(t),Error(ee(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function RA(e){var t=e._init;return t(e._payload)}function l6(e){function t(b,S){if(e){var _=b.deletions;_===null?(b.deletions=[S],b.flags|=16):_.push(S)}}function r(b,S){if(!e)return null;for(;S!==null;)t(b,S),S=S.sibling;return null}function n(b,S){for(b=new Map;S!==null;)S.key!==null?b.set(S.key,S):b.set(S.index,S),S=S.sibling;return b}function i(b,S){return b=zc(b,S),b.index=0,b.sibling=null,b}function s(b,S,_){return b.index=_,e?(_=b.alternate,_!==null?(_=_.index,_<S?(b.flags|=2,S):_):(b.flags|=2,S)):(b.flags|=1048576,S)}function o(b){return e&&b.alternate===null&&(b.flags|=2),b}function a(b,S,_,x){return S===null||S.tag!==6?(S=p$(_,b.mode,x),S.return=b,S):(S=i(S,_),S.return=b,S)}function l(b,S,_,x){var T=_.type;return T===Sf?h(b,S,_.props.children,x,_.key):S!==null&&(S.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===sc&&RA(T)===S.type)?(x=i(S,_.props),x.ref=vy(b,S,_),x.return=b,x):(x=l_(_.type,_.key,_.props,null,b.mode,x),x.ref=vy(b,S,_),x.return=b,x)}function c(b,S,_,x){return S===null||S.tag!==4||S.stateNode.containerInfo!==_.containerInfo||S.stateNode.implementation!==_.implementation?(S=f$(_,b.mode,x),S.return=b,S):(S=i(S,_.children||[]),S.return=b,S)}function h(b,S,_,x,T){return S===null||S.tag!==7?(S=Ah(_,b.mode,x,T),S.return=b,S):(S=i(S,_),S.return=b,S)}function f(b,S,_){if(typeof S=="string"&&S!==""||typeof S=="number")return S=p$(""+S,b.mode,_),S.return=b,S;if(typeof S=="object"&&S!==null){switch(S.$$typeof){case M1:return _=l_(S.type,S.key,S.props,null,b.mode,_),_.ref=vy(b,null,S),_.return=b,_;case bf:return S=f$(S,b.mode,_),S.return=b,S;case sc:var x=S._init;return f(b,x(S._payload),_)}if(Jy(S)||py(S))return S=Ah(S,b.mode,_,null),S.return=b,S;F1(b,S)}return null}function m(b,S,_,x){var T=S!==null?S.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return T!==null?null:a(b,S,""+_,x);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case M1:return _.key===T?l(b,S,_,x):null;case bf:return _.key===T?c(b,S,_,x):null;case sc:return T=_._init,m(b,S,T(_._payload),x)}if(Jy(_)||py(_))return T!==null?null:h(b,S,_,x,null);F1(b,_)}return null}function y(b,S,_,x,T){if(typeof x=="string"&&x!==""||typeof x=="number")return b=b.get(_)||null,a(S,b,""+x,T);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case M1:return b=b.get(x.key===null?_:x.key)||null,l(S,b,x,T);case bf:return b=b.get(x.key===null?_:x.key)||null,c(S,b,x,T);case sc:var I=x._init;return y(b,S,_,I(x._payload),T)}if(Jy(x)||py(x))return b=b.get(_)||null,h(S,b,x,T,null);F1(S,x)}return null}function g(b,S,_,x){for(var T=null,I=null,C=S,O=S=0,W=null;C!==null&&O<_.length;O++){C.index>O?(W=C,C=null):W=C.sibling;var z=m(b,C,_[O],x);if(z===null){C===null&&(C=W);break}e&&C&&z.alternate===null&&t(b,C),S=s(z,S,O),I===null?T=z:I.sibling=z,I=z,C=W}if(O===_.length)return r(b,C),sr&&Od(b,O),T;if(C===null){for(;O<_.length;O++)C=f(b,_[O],x),C!==null&&(S=s(C,S,O),I===null?T=C:I.sibling=C,I=C);return sr&&Od(b,O),T}for(C=n(b,C);O<_.length;O++)W=y(C,b,O,_[O],x),W!==null&&(e&&W.alternate!==null&&C.delete(W.key===null?O:W.key),S=s(W,S,O),I===null?T=W:I.sibling=W,I=W);return e&&C.forEach(function(ne){return t(b,ne)}),sr&&Od(b,O),T}function v(b,S,_,x){var T=py(_);if(typeof T!="function")throw Error(ee(150));if(_=T.call(_),_==null)throw Error(ee(151));for(var I=T=null,C=S,O=S=0,W=null,z=_.next();C!==null&&!z.done;O++,z=_.next()){C.index>O?(W=C,C=null):W=C.sibling;var ne=m(b,C,z.value,x);if(ne===null){C===null&&(C=W);break}e&&C&&ne.alternate===null&&t(b,C),S=s(ne,S,O),I===null?T=ne:I.sibling=ne,I=ne,C=W}if(z.done)return r(b,C),sr&&Od(b,O),T;if(C===null){for(;!z.done;O++,z=_.next())z=f(b,z.value,x),z!==null&&(S=s(z,S,O),I===null?T=z:I.sibling=z,I=z);return sr&&Od(b,O),T}for(C=n(b,C);!z.done;O++,z=_.next())z=y(C,b,O,z.value,x),z!==null&&(e&&z.alternate!==null&&C.delete(z.key===null?O:z.key),S=s(z,S,O),I===null?T=z:I.sibling=z,I=z);return e&&C.forEach(function(K){return t(b,K)}),sr&&Od(b,O),T}function w(b,S,_,x){if(typeof _=="object"&&_!==null&&_.type===Sf&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case M1:e:{for(var T=_.key,I=S;I!==null;){if(I.key===T){if(T=_.type,T===Sf){if(I.tag===7){r(b,I.sibling),S=i(I,_.props.children),S.return=b,b=S;break e}}else if(I.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===sc&&RA(T)===I.type){r(b,I.sibling),S=i(I,_.props),S.ref=vy(b,I,_),S.return=b,b=S;break e}r(b,I);break}else t(b,I);I=I.sibling}_.type===Sf?(S=Ah(_.props.children,b.mode,x,_.key),S.return=b,b=S):(x=l_(_.type,_.key,_.props,null,b.mode,x),x.ref=vy(b,S,_),x.return=b,b=x)}return o(b);case bf:e:{for(I=_.key;S!==null;){if(S.key===I)if(S.tag===4&&S.stateNode.containerInfo===_.containerInfo&&S.stateNode.implementation===_.implementation){r(b,S.sibling),S=i(S,_.children||[]),S.return=b,b=S;break e}else{r(b,S);break}else t(b,S);S=S.sibling}S=f$(_,b.mode,x),S.return=b,b=S}return o(b);case sc:return I=_._init,w(b,S,I(_._payload),x)}if(Jy(_))return g(b,S,_,x);if(py(_))return v(b,S,_,x);F1(b,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,S!==null&&S.tag===6?(r(b,S.sibling),S=i(S,_),S.return=b,b=S):(r(b,S),S=p$(_,b.mode,x),S.return=b,b=S),o(b)):r(b,S)}return w}var mm=l6(!0),u6=l6(!1),zv={},Pa=od(zv),V0=od(zv),z0=od(zv);function $h(e){if(e===zv)throw Error(ee(174));return e}function LP(e,t){switch(Bt(z0,t),Bt(V0,e),Bt(Pa,zv),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:iE(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=iE(t,e)}er(Pa),Bt(Pa,t)}function ym(){er(Pa),er(V0),er(z0)}function c6(e){$h(z0.current);var t=$h(Pa.current),r=iE(t,e.type);t!==r&&(Bt(V0,e),Bt(Pa,r))}function NP(e){V0.current===e&&(er(Pa),er(V0))}var pr=od(0);function Lb(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var a$=[];function DP(){for(var e=0;e<a$.length;e++)a$[e]._workInProgressVersionPrimary=null;a$.length=0}var n_=nu.ReactCurrentDispatcher,l$=nu.ReactCurrentBatchConfig,Wh=0,mr=null,Zr=null,un=null,Nb=!1,Kg=!1,U0=0,qQ=0;function $n(){throw Error(ee(321))}function FP(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Vo(e[r],t[r]))return!1;return!0}function jP(e,t,r,n,i,s){if(Wh=s,mr=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,n_.current=e===null||e.memoizedState===null?JQ:QQ,e=r(n,i),Kg){s=0;do{if(Kg=!1,U0=0,25<=s)throw Error(ee(301));s+=1,un=Zr=null,t.updateQueue=null,n_.current=YQ,e=r(n,i)}while(Kg)}if(n_.current=Db,t=Zr!==null&&Zr.next!==null,Wh=0,un=Zr=mr=null,Nb=!1,t)throw Error(ee(300));return e}function VP(){var e=U0!==0;return U0=0,e}function $a(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return un===null?mr.memoizedState=un=e:un=un.next=e,un}function Fs(){if(Zr===null){var e=mr.alternate;e=e!==null?e.memoizedState:null}else e=Zr.next;var t=un===null?mr.memoizedState:un.next;if(t!==null)un=t,Zr=e;else{if(e===null)throw Error(ee(310));Zr=e,e={memoizedState:Zr.memoizedState,baseState:Zr.baseState,baseQueue:Zr.baseQueue,queue:Zr.queue,next:null},un===null?mr.memoizedState=un=e:un=un.next=e}return un}function G0(e,t){return typeof t=="function"?t(e):t}function u$(e){var t=Fs(),r=t.queue;if(r===null)throw Error(ee(311));r.lastRenderedReducer=e;var n=Zr,i=n.baseQueue,s=r.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}n.baseQueue=i=s,r.pending=null}if(i!==null){s=i.next,n=n.baseState;var a=o=null,l=null,c=s;do{var h=c.lane;if((Wh&h)===h)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),n=c.hasEagerState?c.eagerState:e(n,c.action);else{var f={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=f,o=n):l=l.next=f,mr.lanes|=h,Hh|=h}c=c.next}while(c!==null&&c!==s);l===null?o=n:l.next=a,Vo(n,t.memoizedState)||(bi=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=l,r.lastRenderedState=n}if(e=r.interleaved,e!==null){i=e;do s=i.lane,mr.lanes|=s,Hh|=s,i=i.next;while(i!==e)}else i===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function c$(e){var t=Fs(),r=t.queue;if(r===null)throw Error(ee(311));r.lastRenderedReducer=e;var n=r.dispatch,i=r.pending,s=t.memoizedState;if(i!==null){r.pending=null;var o=i=i.next;do s=e(s,o.action),o=o.next;while(o!==i);Vo(s,t.memoizedState)||(bi=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),r.lastRenderedState=s}return[s,n]}function d6(){}function h6(e,t){var r=mr,n=Fs(),i=t(),s=!Vo(n.memoizedState,i);if(s&&(n.memoizedState=i,bi=!0),n=n.queue,zP(m6.bind(null,r,n,e),[e]),n.getSnapshot!==t||s||un!==null&&un.memoizedState.tag&1){if(r.flags|=2048,B0(9,f6.bind(null,r,n,i,t),void 0,null),dn===null)throw Error(ee(349));Wh&30||p6(r,t,i)}return i}function p6(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=mr.updateQueue,t===null?(t={lastEffect:null,stores:null},mr.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function f6(e,t,r,n){t.value=r,t.getSnapshot=n,y6(t)&&g6(e)}function m6(e,t,r){return r(function(){y6(t)&&g6(e)})}function y6(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Vo(e,r)}catch{return!0}}function g6(e){var t=Ul(e,1);t!==null&&Po(t,e,1,-1)}function AA(e){var t=$a();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:G0,lastRenderedState:e},t.queue=e,e=e.dispatch=ZQ.bind(null,mr,e),[t.memoizedState,e]}function B0(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=mr.updateQueue,t===null?(t={lastEffect:null,stores:null},mr.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function v6(){return Fs().memoizedState}function i_(e,t,r,n){var i=$a();mr.flags|=e,i.memoizedState=B0(1|t,r,void 0,n===void 0?null:n)}function Mx(e,t,r,n){var i=Fs();n=n===void 0?null:n;var s=void 0;if(Zr!==null){var o=Zr.memoizedState;if(s=o.destroy,n!==null&&FP(n,o.deps)){i.memoizedState=B0(t,r,s,n);return}}mr.flags|=e,i.memoizedState=B0(1|t,r,s,n)}function LA(e,t){return i_(8390656,8,e,t)}function zP(e,t){return Mx(2048,8,e,t)}function w6(e,t){return Mx(4,2,e,t)}function _6(e,t){return Mx(4,4,e,t)}function b6(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function S6(e,t,r){return r=r!=null?r.concat([e]):null,Mx(4,4,b6.bind(null,t,e),r)}function UP(){}function x6(e,t){var r=Fs();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&FP(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function $6(e,t){var r=Fs();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&FP(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function T6(e,t,r){return Wh&21?(Vo(r,t)||(r=I5(),mr.lanes|=r,Hh|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,bi=!0),e.memoizedState=r)}function WQ(e,t){var r=Lt;Lt=r!==0&&4>r?r:4,e(!0);var n=l$.transition;l$.transition={};try{e(!1),t()}finally{Lt=r,l$.transition=n}}function E6(){return Fs().memoizedState}function HQ(e,t,r){var n=Vc(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},M6(e))I6(t,r);else if(r=i6(e,t,r,n),r!==null){var i=Xn();Po(r,e,n,i),C6(r,t,n)}}function ZQ(e,t,r){var n=Vc(e),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(M6(e))I6(t,i);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var o=t.lastRenderedState,a=s(o,r);if(i.hasEagerState=!0,i.eagerState=a,Vo(a,o)){var l=t.interleaved;l===null?(i.next=i,RP(t)):(i.next=l.next,l.next=i),t.interleaved=i;return}}catch{}finally{}r=i6(e,t,i,n),r!==null&&(i=Xn(),Po(r,e,n,i),C6(r,t,n))}}function M6(e){var t=e.alternate;return e===mr||t!==null&&t===mr}function I6(e,t){Kg=Nb=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function C6(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,wP(e,r)}}var Db={readContext:Ds,useCallback:$n,useContext:$n,useEffect:$n,useImperativeHandle:$n,useInsertionEffect:$n,useLayoutEffect:$n,useMemo:$n,useReducer:$n,useRef:$n,useState:$n,useDebugValue:$n,useDeferredValue:$n,useTransition:$n,useMutableSource:$n,useSyncExternalStore:$n,useId:$n,unstable_isNewReconciler:!1},JQ={readContext:Ds,useCallback:function(e,t){return $a().memoizedState=[e,t===void 0?null:t],e},useContext:Ds,useEffect:LA,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,i_(4194308,4,b6.bind(null,t,e),r)},useLayoutEffect:function(e,t){return i_(4194308,4,e,t)},useInsertionEffect:function(e,t){return i_(4,2,e,t)},useMemo:function(e,t){var r=$a();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=$a();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=HQ.bind(null,mr,e),[n.memoizedState,e]},useRef:function(e){var t=$a();return e={current:e},t.memoizedState=e},useState:AA,useDebugValue:UP,useDeferredValue:function(e){return $a().memoizedState=e},useTransition:function(){var e=AA(!1),t=e[0];return e=WQ.bind(null,e[1]),$a().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=mr,i=$a();if(sr){if(r===void 0)throw Error(ee(407));r=r()}else{if(r=t(),dn===null)throw Error(ee(349));Wh&30||p6(n,t,r)}i.memoizedState=r;var s={value:r,getSnapshot:t};return i.queue=s,LA(m6.bind(null,n,s,e),[e]),n.flags|=2048,B0(9,f6.bind(null,n,s,r,t),void 0,null),r},useId:function(){var e=$a(),t=dn.identifierPrefix;if(sr){var r=Pl,n=kl;r=(n&~(1<<32-ko(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=U0++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=qQ++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},QQ={readContext:Ds,useCallback:x6,useContext:Ds,useEffect:zP,useImperativeHandle:S6,useInsertionEffect:w6,useLayoutEffect:_6,useMemo:$6,useReducer:u$,useRef:v6,useState:function(){return u$(G0)},useDebugValue:UP,useDeferredValue:function(e){var t=Fs();return T6(t,Zr.memoizedState,e)},useTransition:function(){var e=u$(G0)[0],t=Fs().memoizedState;return[e,t]},useMutableSource:d6,useSyncExternalStore:h6,useId:E6,unstable_isNewReconciler:!1},YQ={readContext:Ds,useCallback:x6,useContext:Ds,useEffect:zP,useImperativeHandle:S6,useInsertionEffect:w6,useLayoutEffect:_6,useMemo:$6,useReducer:c$,useRef:v6,useState:function(){return c$(G0)},useDebugValue:UP,useDeferredValue:function(e){var t=Fs();return Zr===null?t.memoizedState=e:T6(t,Zr.memoizedState,e)},useTransition:function(){var e=c$(G0)[0],t=Fs().memoizedState;return[e,t]},useMutableSource:d6,useSyncExternalStore:h6,useId:E6,unstable_isNewReconciler:!1};function gm(e,t){try{var r="",n=t;do r+=TJ(n),n=n.return;while(n);var i=r}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:i,digest:null}}function d$(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function ME(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var KQ=typeof WeakMap=="function"?WeakMap:Map;function k6(e,t,r){r=Rl(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){jb||(jb=!0,DE=n),ME(e,t)},r}function P6(e,t,r){r=Rl(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var i=t.value;r.payload=function(){return n(i)},r.callback=function(){ME(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(r.callback=function(){ME(e,t),typeof n!="function"&&(jc===null?jc=new Set([this]):jc.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function NA(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new KQ;var i=new Set;n.set(t,i)}else i=n.get(t),i===void 0&&(i=new Set,n.set(t,i));i.has(r)||(i.add(r),e=hY.bind(null,e,t,r),t.then(e,e))}function DA(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function FA(e,t,r,n,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Rl(-1,1),t.tag=2,Fc(r,t,1))),r.lanes|=1),e)}var XQ=nu.ReactCurrentOwner,bi=!1;function Qn(e,t,r,n){t.child=e===null?u6(t,null,r,n):mm(t,e.child,r,n)}function jA(e,t,r,n,i){r=r.render;var s=t.ref;return Zf(t,i),n=jP(e,t,r,n,s,i),r=VP(),e!==null&&!bi?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Gl(e,t,i)):(sr&&r&&MP(t),t.flags|=1,Qn(e,t,n,i),t.child)}function VA(e,t,r,n,i){if(e===null){var s=r.type;return typeof s=="function"&&!QP(s)&&s.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=s,O6(e,t,s,n,i)):(e=l_(r.type,null,n,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&i)){var o=s.memoizedProps;if(r=r.compare,r=r!==null?r:N0,r(o,n)&&e.ref===t.ref)return Gl(e,t,i)}return t.flags|=1,e=zc(s,n),e.ref=t.ref,e.return=t,t.child=e}function O6(e,t,r,n,i){if(e!==null){var s=e.memoizedProps;if(N0(s,n)&&e.ref===t.ref)if(bi=!1,t.pendingProps=n=s,(e.lanes&i)!==0)e.flags&131072&&(bi=!0);else return t.lanes=e.lanes,Gl(e,t,i)}return IE(e,t,r,n,i)}function R6(e,t,r){var n=t.pendingProps,i=n.children,s=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Bt(Of,Ui),Ui|=r;else{if(!(r&1073741824))return e=s!==null?s.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Bt(Of,Ui),Ui|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=s!==null?s.baseLanes:r,Bt(Of,Ui),Ui|=n}else s!==null?(n=s.baseLanes|r,t.memoizedState=null):n=r,Bt(Of,Ui),Ui|=n;return Qn(e,t,i,r),t.child}function A6(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function IE(e,t,r,n,i){var s=xi(r)?Bh:Dn.current;return s=pm(t,s),Zf(t,i),r=jP(e,t,r,n,s,i),n=VP(),e!==null&&!bi?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Gl(e,t,i)):(sr&&n&&MP(t),t.flags|=1,Qn(e,t,r,i),t.child)}function zA(e,t,r,n,i){if(xi(r)){var s=!0;Cb(t)}else s=!1;if(Zf(t,i),t.stateNode===null)s_(e,t),a6(t,r,n),EE(t,r,n,i),n=!0;else if(e===null){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,c=r.contextType;typeof c=="object"&&c!==null?c=Ds(c):(c=xi(r)?Bh:Dn.current,c=pm(t,c));var h=r.getDerivedStateFromProps,f=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==n||l!==c)&&OA(t,o,n,c),oc=!1;var m=t.memoizedState;o.state=m,Ab(t,n,o,i),l=t.memoizedState,a!==n||m!==l||Si.current||oc?(typeof h=="function"&&(TE(t,r,h,n),l=t.memoizedState),(a=oc||PA(t,r,a,n,m,l,c))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=l),o.props=n,o.state=l,o.context=c,n=a):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,s6(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:go(t.type,a),o.props=c,f=t.pendingProps,m=o.context,l=r.contextType,typeof l=="object"&&l!==null?l=Ds(l):(l=xi(r)?Bh:Dn.current,l=pm(t,l));var y=r.getDerivedStateFromProps;(h=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||m!==l)&&OA(t,o,n,l),oc=!1,m=t.memoizedState,o.state=m,Ab(t,n,o,i);var g=t.memoizedState;a!==f||m!==g||Si.current||oc?(typeof y=="function"&&(TE(t,r,y,n),g=t.memoizedState),(c=oc||PA(t,r,c,n,m,g,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,g,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,g,l)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=g),o.props=n,o.state=g,o.context=l,n=c):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),n=!1)}return CE(e,t,r,n,s,i)}function CE(e,t,r,n,i,s){A6(e,t);var o=(t.flags&128)!==0;if(!n&&!o)return i&&EA(t,r,!1),Gl(e,t,s);n=t.stateNode,XQ.current=t;var a=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&o?(t.child=mm(t,e.child,null,s),t.child=mm(t,null,a,s)):Qn(e,t,a,s),t.memoizedState=n.state,i&&EA(t,r,!0),t.child}function L6(e){var t=e.stateNode;t.pendingContext?TA(e,t.pendingContext,t.pendingContext!==t.context):t.context&&TA(e,t.context,!1),LP(e,t.containerInfo)}function UA(e,t,r,n,i){return fm(),CP(i),t.flags|=256,Qn(e,t,r,n),t.child}var kE={dehydrated:null,treeContext:null,retryLane:0};function PE(e){return{baseLanes:e,cachePool:null,transitions:null}}function N6(e,t,r){var n=t.pendingProps,i=pr.current,s=!1,o=(t.flags&128)!==0,a;if((a=o)||(a=e!==null&&e.memoizedState===null?!1:(i&2)!==0),a?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),Bt(pr,i&1),e===null)return xE(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=n.children,e=n.fallback,s?(n=t.mode,s=t.child,o={mode:"hidden",children:o},!(n&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=kx(o,n,0,null),e=Ah(e,n,r,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=PE(r),t.memoizedState=kE,e):GP(t,o));if(i=e.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return eY(e,t,o,n,a,i,r);if(s){s=n.fallback,o=t.mode,i=e.child,a=i.sibling;var l={mode:"hidden",children:n.children};return!(o&1)&&t.child!==i?(n=t.child,n.childLanes=0,n.pendingProps=l,t.deletions=null):(n=zc(i,l),n.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=zc(a,s):(s=Ah(s,o,r,null),s.flags|=2),s.return=t,n.return=t,n.sibling=s,t.child=n,n=s,s=t.child,o=e.child.memoizedState,o=o===null?PE(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=e.childLanes&~r,t.memoizedState=kE,n}return s=e.child,e=s.sibling,n=zc(s,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function GP(e,t){return t=kx({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function j1(e,t,r,n){return n!==null&&CP(n),mm(t,e.child,null,r),e=GP(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function eY(e,t,r,n,i,s,o){if(r)return t.flags&256?(t.flags&=-257,n=d$(Error(ee(422))),j1(e,t,o,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=n.fallback,i=t.mode,n=kx({mode:"visible",children:n.children},i,0,null),s=Ah(s,i,o,null),s.flags|=2,n.return=t,s.return=t,n.sibling=s,t.child=n,t.mode&1&&mm(t,e.child,null,o),t.child.memoizedState=PE(o),t.memoizedState=kE,s);if(!(t.mode&1))return j1(e,t,o,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var a=n.dgst;return n=a,s=Error(ee(419)),n=d$(s,n,void 0),j1(e,t,o,n)}if(a=(o&e.childLanes)!==0,bi||a){if(n=dn,n!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Ul(e,i),Po(n,e,i,-1))}return JP(),n=d$(Error(ee(421))),j1(e,t,o,n)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=pY.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,qi=Dc(i.nextSibling),Wi=t,sr=!0,$o=null,e!==null&&(xs[$s++]=kl,xs[$s++]=Pl,xs[$s++]=qh,kl=e.id,Pl=e.overflow,qh=t),t=GP(t,n.children),t.flags|=4096,t)}function GA(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),$E(e.return,t,r)}function h$(e,t,r,n,i){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=r,s.tailMode=i)}function D6(e,t,r){var n=t.pendingProps,i=n.revealOrder,s=n.tail;if(Qn(e,t,n.children,r),n=pr.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&GA(e,r,t);else if(e.tag===19)GA(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Bt(pr,n),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(r=t.child,i=null;r!==null;)e=r.alternate,e!==null&&Lb(e)===null&&(i=r),r=r.sibling;r=i,r===null?(i=t.child,t.child=null):(i=r.sibling,r.sibling=null),h$(t,!1,i,r,s);break;case"backwards":for(r=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&Lb(e)===null){t.child=i;break}e=i.sibling,i.sibling=r,r=i,i=e}h$(t,!0,r,null,s);break;case"together":h$(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function s_(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Gl(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Hh|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(ee(153));if(t.child!==null){for(e=t.child,r=zc(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=zc(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function tY(e,t,r){switch(t.tag){case 3:L6(t),fm();break;case 5:c6(t);break;case 1:xi(t.type)&&Cb(t);break;case 4:LP(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,i=t.memoizedProps.value;Bt(Ob,n._currentValue),n._currentValue=i;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(Bt(pr,pr.current&1),t.flags|=128,null):r&t.child.childLanes?N6(e,t,r):(Bt(pr,pr.current&1),e=Gl(e,t,r),e!==null?e.sibling:null);Bt(pr,pr.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return D6(e,t,r);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Bt(pr,pr.current),n)break;return null;case 22:case 23:return t.lanes=0,R6(e,t,r)}return Gl(e,t,r)}var F6,OE,j6,V6;F6=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};OE=function(){};j6=function(e,t,r,n){var i=e.memoizedProps;if(i!==n){e=t.stateNode,$h(Pa.current);var s=null;switch(r){case"input":i=eE(e,i),n=eE(e,n),s=[];break;case"select":i=yr({},i,{value:void 0}),n=yr({},n,{value:void 0}),s=[];break;case"textarea":i=nE(e,i),n=nE(e,n),s=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=Mb)}sE(r,n);var o;r=null;for(c in i)if(!n.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(C0.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in n){var l=n[c];if(a=i!=null?i[c]:void 0,n.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(r||(r={}),r[o]=l[o])}else r||(s||(s=[]),s.push(c,r)),r=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(C0.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Qt("scroll",e),s||a===l||(s=[])):(s=s||[]).push(c,l))}r&&(s=s||[]).push("style",r);var c=s;(t.updateQueue=c)&&(t.flags|=4)}};V6=function(e,t,r,n){r!==n&&(t.flags|=4)};function wy(e,t){if(!sr)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Tn(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var i=e.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function rY(e,t,r){var n=t.pendingProps;switch(IP(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Tn(t),null;case 1:return xi(t.type)&&Ib(),Tn(t),null;case 3:return n=t.stateNode,ym(),er(Si),er(Dn),DP(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(D1(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,$o!==null&&(VE($o),$o=null))),OE(e,t),Tn(t),null;case 5:NP(t);var i=$h(z0.current);if(r=t.type,e!==null&&t.stateNode!=null)j6(e,t,r,n,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(ee(166));return Tn(t),null}if(e=$h(Pa.current),D1(t)){n=t.stateNode,r=t.type;var s=t.memoizedProps;switch(n[Ia]=t,n[j0]=s,e=(t.mode&1)!==0,r){case"dialog":Qt("cancel",n),Qt("close",n);break;case"iframe":case"object":case"embed":Qt("load",n);break;case"video":case"audio":for(i=0;i<Yy.length;i++)Qt(Yy[i],n);break;case"source":Qt("error",n);break;case"img":case"image":case"link":Qt("error",n),Qt("load",n);break;case"details":Qt("toggle",n);break;case"input":K3(n,s),Qt("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!s.multiple},Qt("invalid",n);break;case"textarea":eA(n,s),Qt("invalid",n)}sE(r,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?n.textContent!==a&&(s.suppressHydrationWarning!==!0&&N1(n.textContent,a,e),i=["children",a]):typeof a=="number"&&n.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&N1(n.textContent,a,e),i=["children",""+a]):C0.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Qt("scroll",n)}switch(r){case"input":I1(n),X3(n,s,!0);break;case"textarea":I1(n),tA(n);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(n.onclick=Mb)}n=i,t.updateQueue=n,n!==null&&(t.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=p5(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=o.createElement(r,{is:n.is}):(e=o.createElement(r),r==="select"&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,r),e[Ia]=t,e[j0]=n,F6(e,t,!1,!1),t.stateNode=e;e:{switch(o=oE(r,n),r){case"dialog":Qt("cancel",e),Qt("close",e),i=n;break;case"iframe":case"object":case"embed":Qt("load",e),i=n;break;case"video":case"audio":for(i=0;i<Yy.length;i++)Qt(Yy[i],e);i=n;break;case"source":Qt("error",e),i=n;break;case"img":case"image":case"link":Qt("error",e),Qt("load",e),i=n;break;case"details":Qt("toggle",e),i=n;break;case"input":K3(e,n),i=eE(e,n),Qt("invalid",e);break;case"option":i=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},i=yr({},n,{value:void 0}),Qt("invalid",e);break;case"textarea":eA(e,n),i=nE(e,n),Qt("invalid",e);break;default:i=n}sE(r,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?y5(e,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&f5(e,l)):s==="children"?typeof l=="string"?(r!=="textarea"||l!=="")&&k0(e,l):typeof l=="number"&&k0(e,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(C0.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Qt("scroll",e):l!=null&&pP(e,s,l,o))}switch(r){case"input":I1(e),X3(e,n,!1);break;case"textarea":I1(e),tA(e);break;case"option":n.value!=null&&e.setAttribute("value",""+qc(n.value));break;case"select":e.multiple=!!n.multiple,s=n.value,s!=null?Bf(e,!!n.multiple,s,!1):n.defaultValue!=null&&Bf(e,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=Mb)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Tn(t),null;case 6:if(e&&t.stateNode!=null)V6(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(ee(166));if(r=$h(z0.current),$h(Pa.current),D1(t)){if(n=t.stateNode,r=t.memoizedProps,n[Ia]=t,(s=n.nodeValue!==r)&&(e=Wi,e!==null))switch(e.tag){case 3:N1(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&N1(n.nodeValue,r,(e.mode&1)!==0)}s&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Ia]=t,t.stateNode=n}return Tn(t),null;case 13:if(er(pr),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(sr&&qi!==null&&t.mode&1&&!(t.flags&128))n6(),fm(),t.flags|=98560,s=!1;else if(s=D1(t),n!==null&&n.dehydrated!==null){if(e===null){if(!s)throw Error(ee(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(ee(317));s[Ia]=t}else fm(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Tn(t),s=!1}else $o!==null&&(VE($o),$o=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||pr.current&1?Qr===0&&(Qr=3):JP())),t.updateQueue!==null&&(t.flags|=4),Tn(t),null);case 4:return ym(),OE(e,t),e===null&&D0(t.stateNode.containerInfo),Tn(t),null;case 10:return OP(t.type._context),Tn(t),null;case 17:return xi(t.type)&&Ib(),Tn(t),null;case 19:if(er(pr),s=t.memoizedState,s===null)return Tn(t),null;if(n=(t.flags&128)!==0,o=s.rendering,o===null)if(n)wy(s,!1);else{if(Qr!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Lb(e),o!==null){for(t.flags|=128,wy(s,!1),n=o.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)s=r,e=n,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,e=o.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Bt(pr,pr.current&1|2),t.child}e=e.sibling}s.tail!==null&&Mr()>vm&&(t.flags|=128,n=!0,wy(s,!1),t.lanes=4194304)}else{if(!n)if(e=Lb(o),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),wy(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!sr)return Tn(t),null}else 2*Mr()-s.renderingStartTime>vm&&r!==1073741824&&(t.flags|=128,n=!0,wy(s,!1),t.lanes=4194304);s.isBackwards?(o.sibling=t.child,t.child=o):(r=s.last,r!==null?r.sibling=o:t.child=o,s.last=o)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Mr(),t.sibling=null,r=pr.current,Bt(pr,n?r&1|2:r&1),t):(Tn(t),null);case 22:case 23:return ZP(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?Ui&1073741824&&(Tn(t),t.subtreeFlags&6&&(t.flags|=8192)):Tn(t),null;case 24:return null;case 25:return null}throw Error(ee(156,t.tag))}function nY(e,t){switch(IP(t),t.tag){case 1:return xi(t.type)&&Ib(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ym(),er(Si),er(Dn),DP(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return NP(t),null;case 13:if(er(pr),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(ee(340));fm()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return er(pr),null;case 4:return ym(),null;case 10:return OP(t.type._context),null;case 22:case 23:return ZP(),null;case 24:return null;default:return null}}var V1=!1,Rn=!1,iY=typeof WeakSet=="function"?WeakSet:Set,ve=null;function Pf(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){xr(e,t,n)}else r.current=null}function RE(e,t,r){try{r()}catch(n){xr(e,t,n)}}var BA=!1;function sY(e,t){if(yE=$b,e=B5(),EP(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,s=n.focusNode;n=n.focusOffset;try{r.nodeType,s.nodeType}catch{r=null;break e}var o=0,a=-1,l=-1,c=0,h=0,f=e,m=null;t:for(;;){for(var y;f!==r||i!==0&&f.nodeType!==3||(a=o+i),f!==s||n!==0&&f.nodeType!==3||(l=o+n),f.nodeType===3&&(o+=f.nodeValue.length),(y=f.firstChild)!==null;)m=f,f=y;for(;;){if(f===e)break t;if(m===r&&++c===i&&(a=o),m===s&&++h===n&&(l=o),(y=f.nextSibling)!==null)break;f=m,m=f.parentNode}f=y}r=a===-1||l===-1?null:{start:a,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for(gE={focusedElem:e,selectionRange:r},$b=!1,ve=t;ve!==null;)if(t=ve,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ve=e;else for(;ve!==null;){t=ve;try{var g=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var v=g.memoizedProps,w=g.memoizedState,b=t.stateNode,S=b.getSnapshotBeforeUpdate(t.elementType===t.type?v:go(t.type,v),w);b.__reactInternalSnapshotBeforeUpdate=S}break;case 3:var _=t.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ee(163))}}catch(x){xr(t,t.return,x)}if(e=t.sibling,e!==null){e.return=t.return,ve=e;break}ve=t.return}return g=BA,BA=!1,g}function Xg(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,s!==void 0&&RE(t,r,s)}i=i.next}while(i!==n)}}function Ix(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function AE(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function z6(e){var t=e.alternate;t!==null&&(e.alternate=null,z6(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Ia],delete t[j0],delete t[_E],delete t[zQ],delete t[UQ])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function U6(e){return e.tag===5||e.tag===3||e.tag===4}function qA(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||U6(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function LE(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Mb));else if(n!==4&&(e=e.child,e!==null))for(LE(e,t,r),e=e.sibling;e!==null;)LE(e,t,r),e=e.sibling}function NE(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(NE(e,t,r),e=e.sibling;e!==null;)NE(e,t,r),e=e.sibling}var wn=null,_o=!1;function mu(e,t,r){for(r=r.child;r!==null;)G6(e,t,r),r=r.sibling}function G6(e,t,r){if(ka&&typeof ka.onCommitFiberUnmount=="function")try{ka.onCommitFiberUnmount(_x,r)}catch{}switch(r.tag){case 5:Rn||Pf(r,t);case 6:var n=wn,i=_o;wn=null,mu(e,t,r),wn=n,_o=i,wn!==null&&(_o?(e=wn,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):wn.removeChild(r.stateNode));break;case 18:wn!==null&&(_o?(e=wn,r=r.stateNode,e.nodeType===8?s$(e.parentNode,r):e.nodeType===1&&s$(e,r),A0(e)):s$(wn,r.stateNode));break;case 4:n=wn,i=_o,wn=r.stateNode.containerInfo,_o=!0,mu(e,t,r),wn=n,_o=i;break;case 0:case 11:case 14:case 15:if(!Rn&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&RE(r,t,o),i=i.next}while(i!==n)}mu(e,t,r);break;case 1:if(!Rn&&(Pf(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(a){xr(r,t,a)}mu(e,t,r);break;case 21:mu(e,t,r);break;case 22:r.mode&1?(Rn=(n=Rn)||r.memoizedState!==null,mu(e,t,r),Rn=n):mu(e,t,r);break;default:mu(e,t,r)}}function WA(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new iY),t.forEach(function(n){var i=fY.bind(null,e,n);r.has(n)||(r.add(n),n.then(i,i))})}}function Hs(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n];try{var s=e,o=t,a=o;e:for(;a!==null;){switch(a.tag){case 5:wn=a.stateNode,_o=!1;break e;case 3:wn=a.stateNode.containerInfo,_o=!0;break e;case 4:wn=a.stateNode.containerInfo,_o=!0;break e}a=a.return}if(wn===null)throw Error(ee(160));G6(s,o,i),wn=null,_o=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){xr(i,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)B6(t,e),t=t.sibling}function B6(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Hs(t,e),ia(e),n&4){try{Xg(3,e,e.return),Ix(3,e)}catch(v){xr(e,e.return,v)}try{Xg(5,e,e.return)}catch(v){xr(e,e.return,v)}}break;case 1:Hs(t,e),ia(e),n&512&&r!==null&&Pf(r,r.return);break;case 5:if(Hs(t,e),ia(e),n&512&&r!==null&&Pf(r,r.return),e.flags&32){var i=e.stateNode;try{k0(i,"")}catch(v){xr(e,e.return,v)}}if(n&4&&(i=e.stateNode,i!=null)){var s=e.memoizedProps,o=r!==null?r.memoizedProps:s,a=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&d5(i,s),oE(a,o);var c=oE(a,s);for(o=0;o<l.length;o+=2){var h=l[o],f=l[o+1];h==="style"?y5(i,f):h==="dangerouslySetInnerHTML"?f5(i,f):h==="children"?k0(i,f):pP(i,h,f,c)}switch(a){case"input":tE(i,s);break;case"textarea":h5(i,s);break;case"select":var m=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var y=s.value;y!=null?Bf(i,!!s.multiple,y,!1):m!==!!s.multiple&&(s.defaultValue!=null?Bf(i,!!s.multiple,s.defaultValue,!0):Bf(i,!!s.multiple,s.multiple?[]:"",!1))}i[j0]=s}catch(v){xr(e,e.return,v)}}break;case 6:if(Hs(t,e),ia(e),n&4){if(e.stateNode===null)throw Error(ee(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(v){xr(e,e.return,v)}}break;case 3:if(Hs(t,e),ia(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{A0(t.containerInfo)}catch(v){xr(e,e.return,v)}break;case 4:Hs(t,e),ia(e);break;case 13:Hs(t,e),ia(e),i=e.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(WP=Mr())),n&4&&WA(e);break;case 22:if(h=r!==null&&r.memoizedState!==null,e.mode&1?(Rn=(c=Rn)||h,Hs(t,e),Rn=c):Hs(t,e),ia(e),n&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!h&&e.mode&1)for(ve=e,h=e.child;h!==null;){for(f=ve=h;ve!==null;){switch(m=ve,y=m.child,m.tag){case 0:case 11:case 14:case 15:Xg(4,m,m.return);break;case 1:Pf(m,m.return);var g=m.stateNode;if(typeof g.componentWillUnmount=="function"){n=m,r=m.return;try{t=n,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(v){xr(n,r,v)}}break;case 5:Pf(m,m.return);break;case 22:if(m.memoizedState!==null){ZA(f);continue}}y!==null?(y.return=m,ve=y):ZA(f)}h=h.sibling}e:for(h=null,f=e;;){if(f.tag===5){if(h===null){h=f;try{i=f.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=m5("display",o))}catch(v){xr(e,e.return,v)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(v){xr(e,e.return,v)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Hs(t,e),ia(e),n&4&&WA(e);break;case 21:break;default:Hs(t,e),ia(e)}}function ia(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(U6(r)){var n=r;break e}r=r.return}throw Error(ee(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(k0(i,""),n.flags&=-33);var s=qA(e);NE(e,s,i);break;case 3:case 4:var o=n.stateNode.containerInfo,a=qA(e);LE(e,a,o);break;default:throw Error(ee(161))}}catch(l){xr(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function oY(e,t,r){ve=e,q6(e)}function q6(e,t,r){for(var n=(e.mode&1)!==0;ve!==null;){var i=ve,s=i.child;if(i.tag===22&&n){var o=i.memoizedState!==null||V1;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Rn;a=V1;var c=Rn;if(V1=o,(Rn=l)&&!c)for(ve=i;ve!==null;)o=ve,l=o.child,o.tag===22&&o.memoizedState!==null?JA(i):l!==null?(l.return=o,ve=l):JA(i);for(;s!==null;)ve=s,q6(s),s=s.sibling;ve=i,V1=a,Rn=c}HA(e)}else i.subtreeFlags&8772&&s!==null?(s.return=i,ve=s):HA(e)}}function HA(e){for(;ve!==null;){var t=ve;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Rn||Ix(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!Rn)if(r===null)n.componentDidMount();else{var i=t.elementType===t.type?r.memoizedProps:go(t.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&kA(t,s,n);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}kA(t,o,r)}break;case 5:var a=t.stateNode;if(r===null&&t.flags&4){r=a;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&A0(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ee(163))}Rn||t.flags&512&&AE(t)}catch(m){xr(t,t.return,m)}}if(t===e){ve=null;break}if(r=t.sibling,r!==null){r.return=t.return,ve=r;break}ve=t.return}}function ZA(e){for(;ve!==null;){var t=ve;if(t===e){ve=null;break}var r=t.sibling;if(r!==null){r.return=t.return,ve=r;break}ve=t.return}}function JA(e){for(;ve!==null;){var t=ve;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Ix(4,t)}catch(l){xr(t,r,l)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var i=t.return;try{n.componentDidMount()}catch(l){xr(t,i,l)}}var s=t.return;try{AE(t)}catch(l){xr(t,s,l)}break;case 5:var o=t.return;try{AE(t)}catch(l){xr(t,o,l)}}}catch(l){xr(t,t.return,l)}if(t===e){ve=null;break}var a=t.sibling;if(a!==null){a.return=t.return,ve=a;break}ve=t.return}}var aY=Math.ceil,Fb=nu.ReactCurrentDispatcher,BP=nu.ReactCurrentOwner,Rs=nu.ReactCurrentBatchConfig,yt=0,dn=null,Vr=null,_n=0,Ui=0,Of=od(0),Qr=0,q0=null,Hh=0,Cx=0,qP=0,e0=null,_i=null,WP=0,vm=1/0,$l=null,jb=!1,DE=null,jc=null,z1=!1,xc=null,Vb=0,t0=0,FE=null,o_=-1,a_=0;function Xn(){return yt&6?Mr():o_!==-1?o_:o_=Mr()}function Vc(e){return e.mode&1?yt&2&&_n!==0?_n&-_n:BQ.transition!==null?(a_===0&&(a_=I5()),a_):(e=Lt,e!==0||(e=window.event,e=e===void 0?16:L5(e.type)),e):1}function Po(e,t,r,n){if(50<t0)throw t0=0,FE=null,Error(ee(185));Fv(e,r,n),(!(yt&2)||e!==dn)&&(e===dn&&(!(yt&2)&&(Cx|=r),Qr===4&&vc(e,_n)),$i(e,n),r===1&&yt===0&&!(t.mode&1)&&(vm=Mr()+500,Tx&&ad()))}function $i(e,t){var r=e.callbackNode;BJ(e,t);var n=xb(e,e===dn?_n:0);if(n===0)r!==null&&iA(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&iA(r),t===1)e.tag===0?GQ(QA.bind(null,e)):e6(QA.bind(null,e)),jQ(function(){!(yt&6)&&ad()}),r=null;else{switch(C5(n)){case 1:r=vP;break;case 4:r=E5;break;case 16:r=Sb;break;case 536870912:r=M5;break;default:r=Sb}r=X6(r,W6.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function W6(e,t){if(o_=-1,a_=0,yt&6)throw Error(ee(327));var r=e.callbackNode;if(Jf()&&e.callbackNode!==r)return null;var n=xb(e,e===dn?_n:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=zb(e,n);else{t=n;var i=yt;yt|=2;var s=Z6();(dn!==e||_n!==t)&&($l=null,vm=Mr()+500,Rh(e,t));do try{cY();break}catch(a){H6(e,a)}while(1);PP(),Fb.current=s,yt=i,Vr!==null?t=0:(dn=null,_n=0,t=Qr)}if(t!==0){if(t===2&&(i=dE(e),i!==0&&(n=i,t=jE(e,i))),t===1)throw r=q0,Rh(e,0),vc(e,n),$i(e,Mr()),r;if(t===6)vc(e,n);else{if(i=e.current.alternate,!(n&30)&&!lY(i)&&(t=zb(e,n),t===2&&(s=dE(e),s!==0&&(n=s,t=jE(e,s))),t===1))throw r=q0,Rh(e,0),vc(e,n),$i(e,Mr()),r;switch(e.finishedWork=i,e.finishedLanes=n,t){case 0:case 1:throw Error(ee(345));case 2:Rd(e,_i,$l);break;case 3:if(vc(e,n),(n&130023424)===n&&(t=WP+500-Mr(),10<t)){if(xb(e,0)!==0)break;if(i=e.suspendedLanes,(i&n)!==n){Xn(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=wE(Rd.bind(null,e,_i,$l),t);break}Rd(e,_i,$l);break;case 4:if(vc(e,n),(n&4194240)===n)break;for(t=e.eventTimes,i=-1;0<n;){var o=31-ko(n);s=1<<o,o=t[o],o>i&&(i=o),n&=~s}if(n=i,n=Mr()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*aY(n/1960))-n,10<n){e.timeoutHandle=wE(Rd.bind(null,e,_i,$l),n);break}Rd(e,_i,$l);break;case 5:Rd(e,_i,$l);break;default:throw Error(ee(329))}}}return $i(e,Mr()),e.callbackNode===r?W6.bind(null,e):null}function jE(e,t){var r=e0;return e.current.memoizedState.isDehydrated&&(Rh(e,t).flags|=256),e=zb(e,t),e!==2&&(t=_i,_i=r,t!==null&&VE(t)),e}function VE(e){_i===null?_i=e:_i.push.apply(_i,e)}function lY(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var i=r[n],s=i.getSnapshot;i=i.value;try{if(!Vo(s(),i))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function vc(e,t){for(t&=~qP,t&=~Cx,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-ko(t),n=1<<r;e[r]=-1,t&=~n}}function QA(e){if(yt&6)throw Error(ee(327));Jf();var t=xb(e,0);if(!(t&1))return $i(e,Mr()),null;var r=zb(e,t);if(e.tag!==0&&r===2){var n=dE(e);n!==0&&(t=n,r=jE(e,n))}if(r===1)throw r=q0,Rh(e,0),vc(e,t),$i(e,Mr()),r;if(r===6)throw Error(ee(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Rd(e,_i,$l),$i(e,Mr()),null}function HP(e,t){var r=yt;yt|=1;try{return e(t)}finally{yt=r,yt===0&&(vm=Mr()+500,Tx&&ad())}}function Zh(e){xc!==null&&xc.tag===0&&!(yt&6)&&Jf();var t=yt;yt|=1;var r=Rs.transition,n=Lt;try{if(Rs.transition=null,Lt=1,e)return e()}finally{Lt=n,Rs.transition=r,yt=t,!(yt&6)&&ad()}}function ZP(){Ui=Of.current,er(Of)}function Rh(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,FQ(r)),Vr!==null)for(r=Vr.return;r!==null;){var n=r;switch(IP(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Ib();break;case 3:ym(),er(Si),er(Dn),DP();break;case 5:NP(n);break;case 4:ym();break;case 13:er(pr);break;case 19:er(pr);break;case 10:OP(n.type._context);break;case 22:case 23:ZP()}r=r.return}if(dn=e,Vr=e=zc(e.current,null),_n=Ui=t,Qr=0,q0=null,qP=Cx=Hh=0,_i=e0=null,xh!==null){for(t=0;t<xh.length;t++)if(r=xh[t],n=r.interleaved,n!==null){r.interleaved=null;var i=n.next,s=r.pending;if(s!==null){var o=s.next;s.next=i,n.next=o}r.pending=n}xh=null}return e}function H6(e,t){do{var r=Vr;try{if(PP(),n_.current=Db,Nb){for(var n=mr.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}Nb=!1}if(Wh=0,un=Zr=mr=null,Kg=!1,U0=0,BP.current=null,r===null||r.return===null){Qr=1,q0=t,Vr=null;break}e:{var s=e,o=r.return,a=r,l=t;if(t=_n,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,h=a,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var m=h.alternate;m?(h.updateQueue=m.updateQueue,h.memoizedState=m.memoizedState,h.lanes=m.lanes):(h.updateQueue=null,h.memoizedState=null)}var y=DA(o);if(y!==null){y.flags&=-257,FA(y,o,a,s,t),y.mode&1&&NA(s,c,t),t=y,l=c;var g=t.updateQueue;if(g===null){var v=new Set;v.add(l),t.updateQueue=v}else g.add(l);break e}else{if(!(t&1)){NA(s,c,t),JP();break e}l=Error(ee(426))}}else if(sr&&a.mode&1){var w=DA(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),FA(w,o,a,s,t),CP(gm(l,a));break e}}s=l=gm(l,a),Qr!==4&&(Qr=2),e0===null?e0=[s]:e0.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var b=k6(s,l,t);CA(s,b);break e;case 1:a=l;var S=s.type,_=s.stateNode;if(!(s.flags&128)&&(typeof S.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(jc===null||!jc.has(_)))){s.flags|=65536,t&=-t,s.lanes|=t;var x=P6(s,a,t);CA(s,x);break e}}s=s.return}while(s!==null)}Q6(r)}catch(T){t=T,Vr===r&&r!==null&&(Vr=r=r.return);continue}break}while(1)}function Z6(){var e=Fb.current;return Fb.current=Db,e===null?Db:e}function JP(){(Qr===0||Qr===3||Qr===2)&&(Qr=4),dn===null||!(Hh&268435455)&&!(Cx&268435455)||vc(dn,_n)}function zb(e,t){var r=yt;yt|=2;var n=Z6();(dn!==e||_n!==t)&&($l=null,Rh(e,t));do try{uY();break}catch(i){H6(e,i)}while(1);if(PP(),yt=r,Fb.current=n,Vr!==null)throw Error(ee(261));return dn=null,_n=0,Qr}function uY(){for(;Vr!==null;)J6(Vr)}function cY(){for(;Vr!==null&&!LJ();)J6(Vr)}function J6(e){var t=K6(e.alternate,e,Ui);e.memoizedProps=e.pendingProps,t===null?Q6(e):Vr=t,BP.current=null}function Q6(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=nY(r,t),r!==null){r.flags&=32767,Vr=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Qr=6,Vr=null;return}}else if(r=rY(r,t,Ui),r!==null){Vr=r;return}if(t=t.sibling,t!==null){Vr=t;return}Vr=t=e}while(t!==null);Qr===0&&(Qr=5)}function Rd(e,t,r){var n=Lt,i=Rs.transition;try{Rs.transition=null,Lt=1,dY(e,t,r,n)}finally{Rs.transition=i,Lt=n}return null}function dY(e,t,r,n){do Jf();while(xc!==null);if(yt&6)throw Error(ee(327));r=e.finishedWork;var i=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(ee(177));e.callbackNode=null,e.callbackPriority=0;var s=r.lanes|r.childLanes;if(qJ(e,s),e===dn&&(Vr=dn=null,_n=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||z1||(z1=!0,X6(Sb,function(){return Jf(),null})),s=(r.flags&15990)!==0,r.subtreeFlags&15990||s){s=Rs.transition,Rs.transition=null;var o=Lt;Lt=1;var a=yt;yt|=4,BP.current=null,sY(e,r),B6(r,e),PQ(gE),$b=!!yE,gE=yE=null,e.current=r,oY(r),NJ(),yt=a,Lt=o,Rs.transition=s}else e.current=r;if(z1&&(z1=!1,xc=e,Vb=i),s=e.pendingLanes,s===0&&(jc=null),jJ(r.stateNode),$i(e,Mr()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)i=t[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(jb)throw jb=!1,e=DE,DE=null,e;return Vb&1&&e.tag!==0&&Jf(),s=e.pendingLanes,s&1?e===FE?t0++:(t0=0,FE=e):t0=0,ad(),null}function Jf(){if(xc!==null){var e=C5(Vb),t=Rs.transition,r=Lt;try{if(Rs.transition=null,Lt=16>e?16:e,xc===null)var n=!1;else{if(e=xc,xc=null,Vb=0,yt&6)throw Error(ee(331));var i=yt;for(yt|=4,ve=e.current;ve!==null;){var s=ve,o=s.child;if(ve.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(ve=c;ve!==null;){var h=ve;switch(h.tag){case 0:case 11:case 15:Xg(8,h,s)}var f=h.child;if(f!==null)f.return=h,ve=f;else for(;ve!==null;){h=ve;var m=h.sibling,y=h.return;if(z6(h),h===c){ve=null;break}if(m!==null){m.return=y,ve=m;break}ve=y}}}var g=s.alternate;if(g!==null){var v=g.child;if(v!==null){g.child=null;do{var w=v.sibling;v.sibling=null,v=w}while(v!==null)}}ve=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,ve=o;else e:for(;ve!==null;){if(s=ve,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Xg(9,s,s.return)}var b=s.sibling;if(b!==null){b.return=s.return,ve=b;break e}ve=s.return}}var S=e.current;for(ve=S;ve!==null;){o=ve;var _=o.child;if(o.subtreeFlags&2064&&_!==null)_.return=o,ve=_;else e:for(o=S;ve!==null;){if(a=ve,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Ix(9,a)}}catch(T){xr(a,a.return,T)}if(a===o){ve=null;break e}var x=a.sibling;if(x!==null){x.return=a.return,ve=x;break e}ve=a.return}}if(yt=i,ad(),ka&&typeof ka.onPostCommitFiberRoot=="function")try{ka.onPostCommitFiberRoot(_x,e)}catch{}n=!0}return n}finally{Lt=r,Rs.transition=t}}return!1}function YA(e,t,r){t=gm(r,t),t=k6(e,t,1),e=Fc(e,t,1),t=Xn(),e!==null&&(Fv(e,1,t),$i(e,t))}function xr(e,t,r){if(e.tag===3)YA(e,e,r);else for(;t!==null;){if(t.tag===3){YA(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(jc===null||!jc.has(n))){e=gm(r,e),e=P6(t,e,1),t=Fc(t,e,1),e=Xn(),t!==null&&(Fv(t,1,e),$i(t,e));break}}t=t.return}}function hY(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=Xn(),e.pingedLanes|=e.suspendedLanes&r,dn===e&&(_n&r)===r&&(Qr===4||Qr===3&&(_n&130023424)===_n&&500>Mr()-WP?Rh(e,0):qP|=r),$i(e,t)}function Y6(e,t){t===0&&(e.mode&1?(t=P1,P1<<=1,!(P1&130023424)&&(P1=4194304)):t=1);var r=Xn();e=Ul(e,t),e!==null&&(Fv(e,t,r),$i(e,r))}function pY(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),Y6(e,r)}function fY(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,i=e.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(ee(314))}n!==null&&n.delete(t),Y6(e,r)}var K6;K6=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Si.current)bi=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return bi=!1,tY(e,t,r);bi=!!(e.flags&131072)}else bi=!1,sr&&t.flags&1048576&&t6(t,Pb,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;s_(e,t),e=t.pendingProps;var i=pm(t,Dn.current);Zf(t,r),i=jP(null,t,n,e,i,r);var s=VP();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,xi(n)?(s=!0,Cb(t)):s=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,AP(t),i.updater=Ex,t.stateNode=i,i._reactInternals=t,EE(t,n,e,r),t=CE(null,t,n,!0,s,r)):(t.tag=0,sr&&s&&MP(t),Qn(null,t,i,r),t=t.child),t;case 16:n=t.elementType;e:{switch(s_(e,t),e=t.pendingProps,i=n._init,n=i(n._payload),t.type=n,i=t.tag=yY(n),e=go(n,e),i){case 0:t=IE(null,t,n,e,r);break e;case 1:t=zA(null,t,n,e,r);break e;case 11:t=jA(null,t,n,e,r);break e;case 14:t=VA(null,t,n,go(n.type,e),r);break e}throw Error(ee(306,n,""))}return t;case 0:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:go(n,i),IE(e,t,n,i,r);case 1:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:go(n,i),zA(e,t,n,i,r);case 3:e:{if(L6(t),e===null)throw Error(ee(387));n=t.pendingProps,s=t.memoizedState,i=s.element,s6(e,t),Ab(t,n,null,r);var o=t.memoizedState;if(n=o.element,s.isDehydrated)if(s={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){i=gm(Error(ee(423)),t),t=UA(e,t,n,r,i);break e}else if(n!==i){i=gm(Error(ee(424)),t),t=UA(e,t,n,r,i);break e}else for(qi=Dc(t.stateNode.containerInfo.firstChild),Wi=t,sr=!0,$o=null,r=u6(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(fm(),n===i){t=Gl(e,t,r);break e}Qn(e,t,n,r)}t=t.child}return t;case 5:return c6(t),e===null&&xE(t),n=t.type,i=t.pendingProps,s=e!==null?e.memoizedProps:null,o=i.children,vE(n,i)?o=null:s!==null&&vE(n,s)&&(t.flags|=32),A6(e,t),Qn(e,t,o,r),t.child;case 6:return e===null&&xE(t),null;case 13:return N6(e,t,r);case 4:return LP(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=mm(t,null,n,r):Qn(e,t,n,r),t.child;case 11:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:go(n,i),jA(e,t,n,i,r);case 7:return Qn(e,t,t.pendingProps,r),t.child;case 8:return Qn(e,t,t.pendingProps.children,r),t.child;case 12:return Qn(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,i=t.pendingProps,s=t.memoizedProps,o=i.value,Bt(Ob,n._currentValue),n._currentValue=o,s!==null)if(Vo(s.value,o)){if(s.children===i.children&&!Si.current){t=Gl(e,t,r);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===n){if(s.tag===1){l=Rl(-1,r&-r),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?l.next=l:(l.next=h.next,h.next=l),c.pending=l}}s.lanes|=r,l=s.alternate,l!==null&&(l.lanes|=r),$E(s.return,r,t),a.lanes|=r;break}l=l.next}}else if(s.tag===10)o=s.type===t.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(ee(341));o.lanes|=r,a=o.alternate,a!==null&&(a.lanes|=r),$E(o,r,t),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===t){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Qn(e,t,i.children,r),t=t.child}return t;case 9:return i=t.type,n=t.pendingProps.children,Zf(t,r),i=Ds(i),n=n(i),t.flags|=1,Qn(e,t,n,r),t.child;case 14:return n=t.type,i=go(n,t.pendingProps),i=go(n.type,i),VA(e,t,n,i,r);case 15:return O6(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:go(n,i),s_(e,t),t.tag=1,xi(n)?(e=!0,Cb(t)):e=!1,Zf(t,r),a6(t,n,i),EE(t,n,i,r),CE(null,t,n,!0,e,r);case 19:return D6(e,t,r);case 22:return R6(e,t,r)}throw Error(ee(156,t.tag))};function X6(e,t){return T5(e,t)}function mY(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Is(e,t,r,n){return new mY(e,t,r,n)}function QP(e){return e=e.prototype,!(!e||!e.isReactComponent)}function yY(e){if(typeof e=="function")return QP(e)?1:0;if(e!=null){if(e=e.$$typeof,e===mP)return 11;if(e===yP)return 14}return 2}function zc(e,t){var r=e.alternate;return r===null?(r=Is(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function l_(e,t,r,n,i,s){var o=2;if(n=e,typeof e=="function")QP(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Sf:return Ah(r.children,i,s,t);case fP:o=8,i|=8;break;case QT:return e=Is(12,r,t,i|2),e.elementType=QT,e.lanes=s,e;case YT:return e=Is(13,r,t,i),e.elementType=YT,e.lanes=s,e;case KT:return e=Is(19,r,t,i),e.elementType=KT,e.lanes=s,e;case l5:return kx(r,i,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case o5:o=10;break e;case a5:o=9;break e;case mP:o=11;break e;case yP:o=14;break e;case sc:o=16,n=null;break e}throw Error(ee(130,e==null?e:typeof e,""))}return t=Is(o,r,t,i),t.elementType=e,t.type=n,t.lanes=s,t}function Ah(e,t,r,n){return e=Is(7,e,n,t),e.lanes=r,e}function kx(e,t,r,n){return e=Is(22,e,n,t),e.elementType=l5,e.lanes=r,e.stateNode={isHidden:!1},e}function p$(e,t,r){return e=Is(6,e,null,t),e.lanes=r,e}function f$(e,t,r){return t=Is(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function gY(e,t,r,n,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Z2(0),this.expirationTimes=Z2(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Z2(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function YP(e,t,r,n,i,s,o,a,l){return e=new gY(e,t,r,a,l),t===1?(t=1,s===!0&&(t|=8)):t=0,s=Is(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},AP(s),e}function vY(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:bf,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function e8(e){if(!e)return Wc;e=e._reactInternals;e:{if(gp(e)!==e||e.tag!==1)throw Error(ee(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(xi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(ee(171))}if(e.tag===1){var r=e.type;if(xi(r))return X5(e,r,t)}return t}function t8(e,t,r,n,i,s,o,a,l){return e=YP(r,n,!0,e,i,s,o,a,l),e.context=e8(null),r=e.current,n=Xn(),i=Vc(r),s=Rl(n,i),s.callback=t??null,Fc(r,s,i),e.current.lanes=i,Fv(e,i,n),$i(e,n),e}function Px(e,t,r,n){var i=t.current,s=Xn(),o=Vc(i);return r=e8(r),t.context===null?t.context=r:t.pendingContext=r,t=Rl(s,o),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=Fc(i,t,o),e!==null&&(Po(e,i,o,s),r_(e,i,o)),o}function Ub(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function KA(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function KP(e,t){KA(e,t),(e=e.alternate)&&KA(e,t)}function wY(){return null}var r8=typeof reportError=="function"?reportError:function(e){console.error(e)};function XP(e){this._internalRoot=e}Ox.prototype.render=XP.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(ee(409));Px(e,t,null,null)};Ox.prototype.unmount=XP.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Zh(function(){Px(null,e,null,null)}),t[zl]=null}};function Ox(e){this._internalRoot=e}Ox.prototype.unstable_scheduleHydration=function(e){if(e){var t=O5();e={blockedOn:null,target:e,priority:t};for(var r=0;r<gc.length&&t!==0&&t<gc[r].priority;r++);gc.splice(r,0,e),r===0&&A5(e)}};function eO(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Rx(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function XA(){}function _Y(e,t,r,n,i){if(i){if(typeof n=="function"){var s=n;n=function(){var c=Ub(o);s.call(c)}}var o=t8(t,n,e,0,null,!1,!1,"",XA);return e._reactRootContainer=o,e[zl]=o.current,D0(e.nodeType===8?e.parentNode:e),Zh(),o}for(;i=e.lastChild;)e.removeChild(i);if(typeof n=="function"){var a=n;n=function(){var c=Ub(l);a.call(c)}}var l=YP(e,0,!1,null,null,!1,!1,"",XA);return e._reactRootContainer=l,e[zl]=l.current,D0(e.nodeType===8?e.parentNode:e),Zh(function(){Px(t,l,r,n)}),l}function Ax(e,t,r,n,i){var s=r._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=Ub(o);a.call(l)}}Px(t,o,e,i)}else o=_Y(r,t,e,i,n);return Ub(o)}k5=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Qy(t.pendingLanes);r!==0&&(wP(t,r|1),$i(t,Mr()),!(yt&6)&&(vm=Mr()+500,ad()))}break;case 13:Zh(function(){var n=Ul(e,1);if(n!==null){var i=Xn();Po(n,e,1,i)}}),KP(e,1)}};_P=function(e){if(e.tag===13){var t=Ul(e,134217728);if(t!==null){var r=Xn();Po(t,e,134217728,r)}KP(e,134217728)}};P5=function(e){if(e.tag===13){var t=Vc(e),r=Ul(e,t);if(r!==null){var n=Xn();Po(r,e,t,n)}KP(e,t)}};O5=function(){return Lt};R5=function(e,t){var r=Lt;try{return Lt=e,t()}finally{Lt=r}};lE=function(e,t,r){switch(t){case"input":if(tE(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var i=$x(n);if(!i)throw Error(ee(90));c5(n),tE(n,i)}}}break;case"textarea":h5(e,r);break;case"select":t=r.value,t!=null&&Bf(e,!!r.multiple,t,!1)}};w5=HP;_5=Zh;var bY={usingClientEntryPoint:!1,Events:[Vv,Ef,$x,g5,v5,HP]},_y={findFiberByHostInstance:Sh,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},SY={bundleType:_y.bundleType,version:_y.version,rendererPackageName:_y.rendererPackageName,rendererConfig:_y.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:nu.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=x5(e),e===null?null:e.stateNode},findFiberByHostInstance:_y.findFiberByHostInstance||wY,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var U1=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!U1.isDisabled&&U1.supportsFiber)try{_x=U1.inject(SY),ka=U1}catch{}}Xi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=bY;Xi.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!eO(t))throw Error(ee(200));return vY(e,t,null,r)};Xi.createRoot=function(e,t){if(!eO(e))throw Error(ee(299));var r=!1,n="",i=r8;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=YP(e,1,!1,null,null,r,!1,n,i),e[zl]=t.current,D0(e.nodeType===8?e.parentNode:e),new XP(t)};Xi.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(ee(188)):(e=Object.keys(e).join(","),Error(ee(268,e)));return e=x5(t),e=e===null?null:e.stateNode,e};Xi.flushSync=function(e){return Zh(e)};Xi.hydrate=function(e,t,r){if(!Rx(t))throw Error(ee(200));return Ax(null,e,t,!0,r)};Xi.hydrateRoot=function(e,t,r){if(!eO(e))throw Error(ee(405));var n=r!=null&&r.hydratedSources||null,i=!1,s="",o=r8;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(s=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=t8(t,null,e,1,r??null,i,!1,s,o),e[zl]=t.current,D0(e),n)for(e=0;e<n.length;e++)r=n[e],i=r._getVersion,i=i(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,i]:t.mutableSourceEagerHydrationData.push(r,i);return new Ox(t)};Xi.render=function(e,t,r){if(!Rx(t))throw Error(ee(200));return Ax(null,e,t,!1,r)};Xi.unmountComponentAtNode=function(e){if(!Rx(e))throw Error(ee(40));return e._reactRootContainer?(Zh(function(){Ax(null,null,e,!1,function(){e._reactRootContainer=null,e[zl]=null})}),!0):!1};Xi.unstable_batchedUpdates=HP;Xi.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!Rx(r))throw Error(ee(200));if(e==null||e._reactInternals===void 0)throw Error(ee(38));return Ax(e,t,r,!1,n)};Xi.version="18.2.0-next-9e3b772b8-20220608";function n8(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n8)}catch(e){console.error(e)}}n8(),t5.exports=Xi;var xY=t5.exports,eL=xY;ZT.createRoot=eL.createRoot,ZT.hydrateRoot=eL.hydrateRoot;/**
 * @remix-run/router v1.7.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ir(){return ir=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ir.apply(this,arguments)}var Nr;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Nr||(Nr={}));const tL="popstate";function $Y(e){e===void 0&&(e={});function t(n,i){let{pathname:s,search:o,hash:a}=n.location;return W0("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function r(n,i){return typeof i=="string"?i:Hc(i)}return EY(t,r,null,e)}function tt(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function wm(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function TY(){return Math.random().toString(36).substr(2,8)}function rL(e,t){return{usr:e.state,key:e.key,idx:t}}function W0(e,t,r,n){return r===void 0&&(r=null),ir({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?iu(t):t,{state:r,key:t&&t.key||n||TY()})}function Hc(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function iu(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function EY(e,t,r,n){n===void 0&&(n={});let{window:i=document.defaultView,v5Compat:s=!1}=n,o=i.history,a=Nr.Pop,l=null,c=h();c==null&&(c=0,o.replaceState(ir({},o.state,{idx:c}),""));function h(){return(o.state||{idx:null}).idx}function f(){a=Nr.Pop;let w=h(),b=w==null?null:w-c;c=w,l&&l({action:a,location:v.location,delta:b})}function m(w,b){a=Nr.Push;let S=W0(v.location,w,b);r&&r(S,w),c=h()+1;let _=rL(S,c),x=v.createHref(S);try{o.pushState(_,"",x)}catch(T){if(T instanceof DOMException&&T.name==="DataCloneError")throw T;i.location.assign(x)}s&&l&&l({action:a,location:v.location,delta:1})}function y(w,b){a=Nr.Replace;let S=W0(v.location,w,b);r&&r(S,w),c=h();let _=rL(S,c),x=v.createHref(S);o.replaceState(_,"",x),s&&l&&l({action:a,location:v.location,delta:0})}function g(w){let b=i.location.origin!=="null"?i.location.origin:i.location.href,S=typeof w=="string"?w:Hc(w);return tt(b,"No window.location.(origin|href) available to create URL for href: "+S),new URL(S,b)}let v={get action(){return a},get location(){return e(i,o)},listen(w){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(tL,f),l=w,()=>{i.removeEventListener(tL,f),l=null}},createHref(w){return t(i,w)},createURL:g,encodeLocation(w){let b=g(w);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:m,replace:y,go(w){return o.go(w)}};return v}var Hr;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Hr||(Hr={}));const MY=new Set(["lazy","caseSensitive","path","id","index","children"]);function IY(e){return e.index===!0}function zE(e,t,r,n){return r===void 0&&(r=[]),n===void 0&&(n={}),e.map((i,s)=>{let o=[...r,s],a=typeof i.id=="string"?i.id:o.join("-");if(tt(i.index!==!0||!i.children,"Cannot specify children on an index route"),tt(!n[a],'Found a route id collision on id "'+a+`".  Route id's must be globally unique within Data Router usages`),IY(i)){let l=ir({},i,t(i),{id:a});return n[a]=l,l}else{let l=ir({},i,t(i),{id:a,children:void 0});return n[a]=l,i.children&&(l.children=zE(i.children,t,o,n)),l}})}function Rf(e,t,r){r===void 0&&(r="/");let n=typeof t=="string"?iu(t):t,i=Zc(n.pathname||"/",r);if(i==null)return null;let s=i8(e);CY(s);let o=null;for(let a=0;o==null&&a<s.length;++a)o=FY(s[a],zY(i));return o}function i8(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(tt(l.relativePath.startsWith(n),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(n.length));let c=Oa([n,l.relativePath]),h=r.concat(l);s.children&&s.children.length>0&&(tt(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),i8(s.children,t,h,c)),!(s.path==null&&!s.index)&&t.push({path:c,score:NY(c,s.index),routesMeta:h})};return e.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of s8(s.path))i(s,o,l)}),t}function s8(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,i=r.endsWith("?"),s=r.replace(/\?$/,"");if(n.length===0)return i?[s,""]:[s];let o=s8(n.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>e.startsWith("/")&&l===""?"/":l)}function CY(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:DY(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const kY=/^:\w+$/,PY=3,OY=2,RY=1,AY=10,LY=-2,nL=e=>e==="*";function NY(e,t){let r=e.split("/"),n=r.length;return r.some(nL)&&(n+=LY),t&&(n+=OY),r.filter(i=>!nL(i)).reduce((i,s)=>i+(kY.test(s)?PY:s===""?RY:AY),n)}function DY(e,t){return e.length===t.length&&e.slice(0,-1).every((n,i)=>n===t[i])?e[e.length-1]-t[t.length-1]:0}function FY(e,t){let{routesMeta:r}=e,n={},i="/",s=[];for(let o=0;o<r.length;++o){let a=r[o],l=o===r.length-1,c=i==="/"?t:t.slice(i.length)||"/",h=jY({path:a.relativePath,caseSensitive:a.caseSensitive,end:l},c);if(!h)return null;Object.assign(n,h.params);let f=a.route;s.push({params:n,pathname:Oa([i,h.pathname]),pathnameBase:qY(Oa([i,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(i=Oa([i,h.pathnameBase]))}return s}function jY(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=VY(e.path,e.caseSensitive,e.end),i=t.match(r);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:n.reduce((c,h,f)=>{if(h==="*"){let m=a[f]||"";o=s.slice(0,s.length-m.length).replace(/(.)\/+$/,"$1")}return c[h]=UY(a[f]||"",h),c},{}),pathname:s,pathnameBase:o,pattern:e}}function VY(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),wm(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(o,a)=>(n.push(a),"/([^\\/]+)"));return e.endsWith("*")?(n.push("*"),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),n]}function zY(e){try{return decodeURI(e)}catch(t){return wm(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function UY(e,t){try{return decodeURIComponent(e)}catch(r){return wm(!1,'The value for the URL param "'+t+'" will not be decoded because'+(' the string "'+e+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+r+").")),e}}function Zc(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function GY(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:i=""}=typeof e=="string"?iu(e):e;return{pathname:r?r.startsWith("/")?r:BY(r,t):t,search:WY(n),hash:HY(i)}}function BY(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?r.length>1&&r.pop():i!=="."&&r.push(i)}),r.length>1?r.join("/"):"/"}function m$(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Uv(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function Lx(e,t,r,n){n===void 0&&(n=!1);let i;typeof e=="string"?i=iu(e):(i=ir({},e),tt(!i.pathname||!i.pathname.includes("?"),m$("?","pathname","search",i)),tt(!i.pathname||!i.pathname.includes("#"),m$("#","pathname","hash",i)),tt(!i.search||!i.search.includes("#"),m$("#","search","hash",i)));let s=e===""||i.pathname==="",o=s?"/":i.pathname,a;if(n||o==null)a=r;else{let f=t.length-1;if(o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),f-=1;i.pathname=m.join("/")}a=f>=0?t[f]:"/"}let l=GY(i,a),c=o&&o!=="/"&&o.endsWith("/"),h=(s||o===".")&&r.endsWith("/");return!l.pathname.endsWith("/")&&(c||h)&&(l.pathname+="/"),l}const Oa=e=>e.join("/").replace(/\/\/+/g,"/"),qY=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),WY=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,HY=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;class tO{constructor(t,r,n,i){i===void 0&&(i=!1),this.status=t,this.statusText=r||"",this.internal=i,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}}function o8(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const a8=["post","put","patch","delete"],ZY=new Set(a8),JY=["get",...a8],QY=new Set(JY),YY=new Set([301,302,303,307,308]),KY=new Set([307,308]),y$={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},XY={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},by={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},l8=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,eK=e=>({hasErrorBoundary:!!e.hasErrorBoundary});function tK(e){const t=e.window?e.window:typeof window<"u"?window:void 0,r=typeof t<"u"&&typeof t.document<"u"&&typeof t.document.createElement<"u",n=!r;tt(e.routes.length>0,"You must provide a non-empty routes array to createRouter");let i;if(e.mapRouteProperties)i=e.mapRouteProperties;else if(e.detectErrorBoundary){let j=e.detectErrorBoundary;i=U=>({hasErrorBoundary:j(U)})}else i=eK;let s={},o=zE(e.routes,i,void 0,s),a,l=e.basename||"/",c=ir({v7_normalizeFormMethod:!1,v7_prependBasename:!1},e.future),h=null,f=new Set,m=null,y=null,g=null,v=e.hydrationData!=null,w=Rf(o,e.history.location,l),b=null;if(w==null){let j=_s(404,{pathname:e.history.location.pathname}),{matches:U,route:J}=dL(o);w=U,b={[J.id]:j}}let S=!w.some(j=>j.route.lazy)&&(!w.some(j=>j.route.loader)||e.hydrationData!=null),_,x={historyAction:e.history.action,location:e.history.location,matches:w,initialized:S,navigation:y$,restoreScrollPosition:e.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:e.hydrationData&&e.hydrationData.loaderData||{},actionData:e.hydrationData&&e.hydrationData.actionData||null,errors:e.hydrationData&&e.hydrationData.errors||b,fetchers:new Map,blockers:new Map},T=Nr.Pop,I=!1,C,O=!1,W=!1,z=[],ne=[],K=new Map,xe=0,le=-1,B=new Map,it=new Set,Ge=new Map,H=new Map,oe=new Map,Ne=!1;function je(){return h=e.history.listen(j=>{let{action:U,location:J,delta:me}=j;if(Ne){Ne=!1;return}wm(oe.size===0||me!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let Ue=Un({currentLocation:x.location,nextLocation:J,historyAction:U});if(Ue&&me!=null){Ne=!0,e.history.go(me*-1),ra(Ue,{state:"blocked",location:J,proceed(){ra(Ue,{state:"proceeding",proceed:void 0,reset:void 0,location:J}),e.history.go(me)},reset(){let ge=new Map(x.blockers);ge.set(Ue,by),ut({blockers:ge})}});return}return Ci(U,J)}),x.initialized||Ci(Nr.Pop,x.location),_}function Nt(){h&&h(),f.clear(),C&&C.abort(),x.fetchers.forEach((j,U)=>_d(U)),x.blockers.forEach((j,U)=>hu(U))}function pt(j){return f.add(j),()=>f.delete(j)}function ut(j){x=ir({},x,j),f.forEach(U=>U(x))}function fn(j,U){var J,me;let Ue=x.actionData!=null&&x.navigation.formMethod!=null&&bo(x.navigation.formMethod)&&x.navigation.state==="loading"&&((J=j.state)==null?void 0:J._isRedirect)!==!0,ge;U.actionData?Object.keys(U.actionData).length>0?ge=U.actionData:ge=null:Ue?ge=x.actionData:ge=null;let Oe=U.loaderData?cL(x.loaderData,U.loaderData,U.matches||[],U.errors):x.loaderData,Pe=x.blockers;Pe.size>0&&(Pe=new Map(Pe),Pe.forEach((gt,st)=>Pe.set(st,by)));let Se=I===!0||x.navigation.formMethod!=null&&bo(x.navigation.formMethod)&&((me=j.state)==null?void 0:me._isRedirect)!==!0;a&&(o=a,a=void 0),O||T===Nr.Pop||(T===Nr.Push?e.history.push(j,j.state):T===Nr.Replace&&e.history.replace(j,j.state)),ut(ir({},U,{actionData:ge,loaderData:Oe,historyAction:T,location:j,initialized:!0,navigation:y$,revalidation:"idle",restoreScrollPosition:qs(j,U.matches||x.matches),preventScrollReset:Se,blockers:Pe})),T=Nr.Pop,I=!1,O=!1,W=!1,z=[],ne=[]}async function zn(j,U){if(typeof j=="number"){e.history.go(j);return}let J=UE(x.location,x.matches,l,c.v7_prependBasename,j,U==null?void 0:U.fromRouteId,U==null?void 0:U.relative),{path:me,submission:Ue,error:ge}=iL(c.v7_normalizeFormMethod,!1,J,U),Oe=x.location,Pe=W0(x.location,me,U&&U.state);Pe=ir({},Pe,e.history.encodeLocation(Pe));let Se=U&&U.replace!=null?U.replace:void 0,gt=Nr.Push;Se===!0?gt=Nr.Replace:Se===!1||Ue!=null&&bo(Ue.formMethod)&&Ue.formAction===x.location.pathname+x.location.search&&(gt=Nr.Replace);let st=U&&"preventScrollReset"in U?U.preventScrollReset===!0:void 0,tn=Un({currentLocation:Oe,nextLocation:Pe,historyAction:gt});if(tn){ra(tn,{state:"blocked",location:Pe,proceed(){ra(tn,{state:"proceeding",proceed:void 0,reset:void 0,location:Pe}),zn(j,U)},reset(){let wr=new Map(x.blockers);wr.set(tn,by),ut({blockers:wr})}});return}return await Ci(gt,Pe,{submission:Ue,pendingError:ge,preventScrollReset:st,replace:U&&U.replace})}function Ii(){if(du(),ut({revalidation:"loading"}),x.navigation.state!=="submitting"){if(x.navigation.state==="idle"){Ci(x.historyAction,x.location,{startUninterruptedRevalidation:!0});return}Ci(T||x.historyAction,x.navigation.location,{overrideNavigation:x.navigation})}}async function Ci(j,U,J){C&&C.abort(),C=null,T=j,O=(J&&J.startUninterruptedRevalidation)===!0,ki(x.location,x.matches),I=(J&&J.preventScrollReset)===!0;let me=a||o,Ue=J&&J.overrideNavigation,ge=Rf(me,U,l);if(!ge){let wr=_s(404,{pathname:U.pathname}),{matches:Tr,route:xn}=dL(me);pu(),fn(U,{matches:Tr,loaderData:{},errors:{[xn.id]:wr}});return}if(x.initialized&&!W&&oK(x.location,U)&&!(J&&J.submission&&bo(J.submission.formMethod))){fn(U,{matches:ge});return}C=new AbortController;let Oe=xy(e.history,U,C.signal,J&&J.submission),Pe,Se;if(J&&J.pendingError)Se={[Af(ge).route.id]:J.pendingError};else if(J&&J.submission&&bo(J.submission.formMethod)){let wr=await Ep(Oe,U,J.submission,ge,{replace:J.replace});if(wr.shortCircuited)return;Pe=wr.pendingActionData,Se=wr.pendingActionError,Ue=G1(U,J.submission),Oe=new Request(Oe.url,{signal:Oe.signal})}let{shortCircuited:gt,loaderData:st,errors:tn}=await Xo(Oe,U,ge,Ue,J&&J.submission,J&&J.fetcherSubmission,J&&J.replace,Pe,Se);gt||(C=null,fn(U,ir({matches:ge},Pe?{actionData:Pe}:{},{loaderData:st,errors:tn})))}async function Ep(j,U,J,me,Ue){Ue===void 0&&(Ue={}),du();let ge=dK(U,J);ut({navigation:ge});let Oe,Pe=BE(me,U);if(!Pe.route.action&&!Pe.route.lazy)Oe={type:Hr.error,error:_s(405,{method:j.method,pathname:U.pathname,routeId:Pe.route.id})};else if(Oe=await Sy("action",j,Pe,me,s,i,l),j.signal.aborted)return{shortCircuited:!0};if(Qf(Oe)){let Se;return Ue&&Ue.replace!=null?Se=Ue.replace:Se=Oe.location===x.location.pathname+x.location.search,await ns(x,Oe,{submission:J,replace:Se}),{shortCircuited:!0}}if(r0(Oe)){let Se=Af(me,Pe.route.id);return(Ue&&Ue.replace)!==!0&&(T=Nr.Push),{pendingActionData:{},pendingActionError:{[Se.route.id]:Oe.error}}}if(Th(Oe))throw _s(400,{type:"defer-action"});return{pendingActionData:{[Pe.route.id]:Oe.data}}}async function Xo(j,U,J,me,Ue,ge,Oe,Pe,Se){let gt=me||G1(U,Ue),st=Ue||ge||fL(gt),tn=a||o,[wr,Tr]=sL(e.history,x,J,st,U,W,z,ne,Ge,it,tn,l,Pe,Se);if(pu(te=>!(J&&J.some(Pr=>Pr.route.id===te))||wr&&wr.some(Pr=>Pr.route.id===te)),wr.length===0&&Tr.length===0){let te=Gs();return fn(U,ir({matches:J,loaderData:{},errors:Se||null},Pe?{actionData:Pe}:{},te?{fetchers:new Map(x.fetchers)}:{})),{shortCircuited:!0}}if(!O){Tr.forEach(Pr=>{let Dt=x.fetchers.get(Pr.key),Wt=$y(void 0,Dt?Dt.data:void 0);x.fetchers.set(Pr.key,Wt)});let te=Pe||x.actionData;ut(ir({navigation:gt},te?Object.keys(te).length===0?{actionData:null}:{actionData:te}:{},Tr.length>0?{fetchers:new Map(x.fetchers)}:{}))}le=++xe,Tr.forEach(te=>{K.has(te.key)&&oi(te.key),te.controller&&K.set(te.key,te.controller)});let xn=()=>Tr.forEach(te=>oi(te.key));C&&C.signal.addEventListener("abort",xn);let{results:Qa,loaderResults:Pi,fetcherResults:na}=await Ha(x.matches,J,wr,Tr,j);if(j.signal.aborted)return{shortCircuited:!0};C&&C.signal.removeEventListener("abort",xn),Tr.forEach(te=>K.delete(te.key));let ai=hL(Qa);if(ai)return await ns(x,ai,{replace:Oe}),{shortCircuited:!0};let{loaderData:L,errors:Mt}=uL(x,J,wr,Pi,Se,Tr,na,H);H.forEach((te,Pr)=>{te.subscribe(Dt=>{(Dt||te.done)&&H.delete(Pr)})});let Oi=Gs(),tr=Bs(le),Ws=Oi||tr||Tr.length>0;return ir({loaderData:L,errors:Mt},Ws?{fetchers:new Map(x.fetchers)}:{})}function rs(j){return x.fetchers.get(j)||XY}function vd(j,U,J,me){if(n)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");K.has(j)&&oi(j);let Ue=a||o,ge=UE(x.location,x.matches,l,c.v7_prependBasename,J,U,me==null?void 0:me.relative),Oe=Rf(Ue,ge,l);if(!Oe){Za(j,U,_s(404,{pathname:ge}));return}let{path:Pe,submission:Se,error:gt}=iL(c.v7_normalizeFormMethod,!0,ge,me);if(gt){Za(j,U,gt);return}let st=BE(Oe,Pe);if(I=(me&&me.preventScrollReset)===!0,Se&&bo(Se.formMethod)){wd(j,U,Pe,st,Oe,Se);return}Ge.set(j,{routeId:U,path:Pe}),ea(j,U,Pe,st,Oe,Se)}async function wd(j,U,J,me,Ue,ge){if(du(),Ge.delete(j),!me.route.action&&!me.route.lazy){let Wt=_s(405,{method:ge.formMethod,pathname:J,routeId:U});Za(j,U,Wt);return}let Oe=x.fetchers.get(j),Pe=hK(ge,Oe);x.fetchers.set(j,Pe),ut({fetchers:new Map(x.fetchers)});let Se=new AbortController,gt=xy(e.history,J,Se.signal,ge);K.set(j,Se);let st=await Sy("action",gt,me,Ue,s,i,l);if(gt.signal.aborted){K.get(j)===Se&&K.delete(j);return}if(Qf(st)){K.delete(j),it.add(j);let Wt=$y(ge);return x.fetchers.set(j,Wt),ut({fetchers:new Map(x.fetchers)}),ns(x,st,{submission:ge,isFetchActionRedirect:!0})}if(r0(st)){Za(j,U,st.error);return}if(Th(st))throw _s(400,{type:"defer-action"});let tn=x.navigation.location||x.location,wr=xy(e.history,tn,Se.signal),Tr=a||o,xn=x.navigation.state!=="idle"?Rf(Tr,x.navigation.location,l):x.matches;tt(xn,"Didn't find any matches after fetcher action");let Qa=++xe;B.set(j,Qa);let Pi=$y(ge,st.data);x.fetchers.set(j,Pi);let[na,ai]=sL(e.history,x,xn,ge,tn,W,z,ne,Ge,it,Tr,l,{[me.route.id]:st.data},void 0);ai.filter(Wt=>Wt.key!==j).forEach(Wt=>{let _e=Wt.key,R=x.fetchers.get(_e),X=$y(void 0,R?R.data:void 0);x.fetchers.set(_e,X),K.has(_e)&&oi(_e),Wt.controller&&K.set(_e,Wt.controller)}),ut({fetchers:new Map(x.fetchers)});let L=()=>ai.forEach(Wt=>oi(Wt.key));Se.signal.addEventListener("abort",L);let{results:Mt,loaderResults:Oi,fetcherResults:tr}=await Ha(x.matches,xn,na,ai,wr);if(Se.signal.aborted)return;Se.signal.removeEventListener("abort",L),B.delete(j),K.delete(j),ai.forEach(Wt=>K.delete(Wt.key));let Ws=hL(Mt);if(Ws)return ns(x,Ws);let{loaderData:te,errors:Pr}=uL(x,x.matches,na,Oi,void 0,ai,tr,H);if(x.fetchers.has(j)){let Wt=u_(st.data);x.fetchers.set(j,Wt)}let Dt=Bs(Qa);x.navigation.state==="loading"&&Qa>le?(tt(T,"Expected pending action"),C&&C.abort(),fn(x.navigation.location,{matches:xn,loaderData:te,errors:Pr,fetchers:new Map(x.fetchers)})):(ut(ir({errors:Pr,loaderData:cL(x.loaderData,te,xn,Pr)},Dt||ai.length>0?{fetchers:new Map(x.fetchers)}:{})),W=!1)}async function ea(j,U,J,me,Ue,ge){let Oe=x.fetchers.get(j),Pe=$y(ge,Oe?Oe.data:void 0);x.fetchers.set(j,Pe),ut({fetchers:new Map(x.fetchers)});let Se=new AbortController,gt=xy(e.history,J,Se.signal);K.set(j,Se);let st=await Sy("loader",gt,me,Ue,s,i,l);if(Th(st)&&(st=await d8(st,gt.signal,!0)||st),K.get(j)===Se&&K.delete(j),gt.signal.aborted)return;if(Qf(st)){it.add(j),await ns(x,st);return}if(r0(st)){let wr=Af(x.matches,U);x.fetchers.delete(j),ut({fetchers:new Map(x.fetchers),errors:{[wr.route.id]:st.error}});return}tt(!Th(st),"Unhandled fetcher deferred data");let tn=u_(st.data);x.fetchers.set(j,tn),ut({fetchers:new Map(x.fetchers)})}async function ns(j,U,J){let{submission:me,replace:Ue,isFetchActionRedirect:ge}=J===void 0?{}:J;U.revalidate&&(W=!0);let Oe=W0(j.location,U.location,ir({_isRedirect:!0},ge?{_isFetchActionRedirect:!0}:{}));if(tt(Oe,"Expected a location on the redirect navigation"),l8.test(U.location)&&r){let gt=e.history.createURL(U.location),st=Zc(gt.pathname,l)==null;if(t.location.origin!==gt.origin||st){Ue?t.location.replace(U.location):t.location.assign(U.location);return}}C=null;let Pe=Ue===!0?Nr.Replace:Nr.Push,Se=me||fL(j.navigation);if(KY.has(U.status)&&Se&&bo(Se.formMethod))await Ci(Pe,Oe,{submission:ir({},Se,{formAction:U.location}),preventScrollReset:I});else if(ge)await Ci(Pe,Oe,{overrideNavigation:G1(Oe),fetcherSubmission:Se,preventScrollReset:I});else{let gt=G1(Oe,Se);await Ci(Pe,Oe,{overrideNavigation:gt,preventScrollReset:I})}}async function Ha(j,U,J,me,Ue){let ge=await Promise.all([...J.map(Se=>Sy("loader",Ue,Se,U,s,i,l)),...me.map(Se=>Se.matches&&Se.match&&Se.controller?Sy("loader",xy(e.history,Se.path,Se.controller.signal),Se.match,Se.matches,s,i,l):{type:Hr.error,error:_s(404,{pathname:Se.path})})]),Oe=ge.slice(0,J.length),Pe=ge.slice(J.length);return await Promise.all([pL(j,J,Oe,Oe.map(()=>Ue.signal),!1,x.loaderData),pL(j,me.map(Se=>Se.match),Pe,me.map(Se=>Se.controller?Se.controller.signal:null),!0)]),{results:ge,loaderResults:Oe,fetcherResults:Pe}}function du(){W=!0,z.push(...pu()),Ge.forEach((j,U)=>{K.has(U)&&(ne.push(U),oi(U))})}function Za(j,U,J){let me=Af(x.matches,U);_d(j),ut({errors:{[me.route.id]:J},fetchers:new Map(x.fetchers)})}function _d(j){let U=x.fetchers.get(j);K.has(j)&&!(U&&U.state==="loading"&&B.has(j))&&oi(j),Ge.delete(j),B.delete(j),it.delete(j),x.fetchers.delete(j)}function oi(j){let U=K.get(j);tt(U,"Expected fetch controller: "+j),U.abort(),K.delete(j)}function ta(j){for(let U of j){let J=rs(U),me=u_(J.data);x.fetchers.set(U,me)}}function Gs(){let j=[],U=!1;for(let J of it){let me=x.fetchers.get(J);tt(me,"Expected fetcher: "+J),me.state==="loading"&&(it.delete(J),j.push(J),U=!0)}return ta(j),U}function Bs(j){let U=[];for(let[J,me]of B)if(me<j){let Ue=x.fetchers.get(J);tt(Ue,"Expected fetcher: "+J),Ue.state==="loading"&&(oi(J),B.delete(J),U.push(J))}return ta(U),U.length>0}function Mp(j,U){let J=x.blockers.get(j)||by;return oe.get(j)!==U&&oe.set(j,U),J}function hu(j){x.blockers.delete(j),oe.delete(j)}function ra(j,U){let J=x.blockers.get(j)||by;tt(J.state==="unblocked"&&U.state==="blocked"||J.state==="blocked"&&U.state==="blocked"||J.state==="blocked"&&U.state==="proceeding"||J.state==="blocked"&&U.state==="unblocked"||J.state==="proceeding"&&U.state==="unblocked","Invalid blocker state transition: "+J.state+" -> "+U.state);let me=new Map(x.blockers);me.set(j,U),ut({blockers:me})}function Un(j){let{currentLocation:U,nextLocation:J,historyAction:me}=j;if(oe.size===0)return;oe.size>1&&wm(!1,"A router only supports one blocker at a time");let Ue=Array.from(oe.entries()),[ge,Oe]=Ue[Ue.length-1],Pe=x.blockers.get(ge);if(!(Pe&&Pe.state==="proceeding")&&Oe({currentLocation:U,nextLocation:J,historyAction:me}))return ge}function pu(j){let U=[];return H.forEach((J,me)=>{(!j||j(me))&&(J.cancel(),U.push(me),H.delete(me))}),U}function fu(j,U,J){if(m=j,g=U,y=J||null,!v&&x.navigation===y$){v=!0;let me=qs(x.location,x.matches);me!=null&&ut({restoreScrollPosition:me})}return()=>{m=null,g=null,y=null}}function Ja(j,U){return y&&y(j,U.map(me=>cK(me,x.loaderData)))||j.key}function ki(j,U){if(m&&g){let J=Ja(j,U);m[J]=g()}}function qs(j,U){if(m){let J=Ja(j,U),me=m[J];if(typeof me=="number")return me}return null}function bd(j){s={},a=zE(j,i,void 0,s)}return _={get basename(){return l},get state(){return x},get routes(){return o},initialize:je,subscribe:pt,enableScrollRestoration:fu,navigate:zn,fetch:vd,revalidate:Ii,createHref:j=>e.history.createHref(j),encodeLocation:j=>e.history.encodeLocation(j),getFetcher:rs,deleteFetcher:_d,dispose:Nt,getBlocker:Mp,deleteBlocker:hu,_internalFetchControllers:K,_internalActiveDeferreds:H,_internalSetRoutes:bd},_}function rK(e){return e!=null&&("formData"in e&&e.formData!=null||"body"in e&&e.body!==void 0)}function UE(e,t,r,n,i,s,o){let a,l;if(s!=null&&o!=="path"){a=[];for(let h of t)if(a.push(h),h.route.id===s){l=h;break}}else a=t,l=t[t.length-1];let c=Lx(i||".",Uv(a).map(h=>h.pathnameBase),Zc(e.pathname,r)||e.pathname,o==="path");return i==null&&(c.search=e.search,c.hash=e.hash),(i==null||i===""||i===".")&&l&&l.route.index&&!rO(c.search)&&(c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index"),n&&r!=="/"&&(c.pathname=c.pathname==="/"?r:Oa([r,c.pathname])),Hc(c)}function iL(e,t,r,n){if(!n||!rK(n))return{path:r};if(n.formMethod&&!uK(n.formMethod))return{path:r,error:_s(405,{method:n.formMethod})};let i=()=>({path:r,error:_s(400,{type:"invalid-body"})}),s=n.formMethod||"get",o=e?s.toUpperCase():s.toLowerCase(),a=c8(r);if(n.body!==void 0){if(n.formEncType==="text/plain"){if(!bo(o))return i();let m=typeof n.body=="string"?n.body:n.body instanceof FormData||n.body instanceof URLSearchParams?Array.from(n.body.entries()).reduce((y,g)=>{let[v,w]=g;return""+y+v+"="+w+`
`},""):String(n.body);return{path:r,submission:{formMethod:o,formAction:a,formEncType:n.formEncType,formData:void 0,json:void 0,text:m}}}else if(n.formEncType==="application/json"){if(!bo(o))return i();try{let m=typeof n.body=="string"?JSON.parse(n.body):n.body;return{path:r,submission:{formMethod:o,formAction:a,formEncType:n.formEncType,formData:void 0,json:m,text:void 0}}}catch{return i()}}}tt(typeof FormData=="function","FormData is not available in this environment");let l,c;if(n.formData)l=GE(n.formData),c=n.formData;else if(n.body instanceof FormData)l=GE(n.body),c=n.body;else if(n.body instanceof URLSearchParams)l=n.body,c=lL(l);else if(n.body==null)l=new URLSearchParams,c=new FormData;else try{l=new URLSearchParams(n.body),c=lL(l)}catch{return i()}let h={formMethod:o,formAction:a,formEncType:n&&n.formEncType||"application/x-www-form-urlencoded",formData:c,json:void 0,text:void 0};if(bo(h.formMethod))return{path:r,submission:h};let f=iu(r);return t&&f.search&&rO(f.search)&&l.append("index",""),f.search="?"+l,{path:Hc(f),submission:h}}function nK(e,t){let r=e;if(t){let n=e.findIndex(i=>i.route.id===t);n>=0&&(r=e.slice(0,n))}return r}function sL(e,t,r,n,i,s,o,a,l,c,h,f,m,y){let g=y?Object.values(y)[0]:m?Object.values(m)[0]:void 0,v=e.createURL(t.location),w=e.createURL(i),b=y?Object.keys(y)[0]:void 0,_=nK(r,b).filter((T,I)=>{if(T.route.lazy)return!0;if(T.route.loader==null)return!1;if(iK(t.loaderData,t.matches[I],T)||o.some(W=>W===T.route.id))return!0;let C=t.matches[I],O=T;return oL(T,ir({currentUrl:v,currentParams:C.params,nextUrl:w,nextParams:O.params},n,{actionResult:g,defaultShouldRevalidate:s||v.pathname+v.search===w.pathname+w.search||v.search!==w.search||u8(C,O)}))}),x=[];return l.forEach((T,I)=>{if(!r.some(K=>K.route.id===T.routeId))return;let C=Rf(h,T.path,f);if(!C){x.push({key:I,routeId:T.routeId,path:T.path,matches:null,match:null,controller:null});return}let O=t.fetchers.get(I),W=O&&O.state!=="idle"&&O.data===void 0&&!c.has(I),z=BE(C,T.path);(a.includes(I)||W||oL(z,ir({currentUrl:v,currentParams:t.matches[t.matches.length-1].params,nextUrl:w,nextParams:r[r.length-1].params},n,{actionResult:g,defaultShouldRevalidate:s})))&&x.push({key:I,routeId:T.routeId,path:T.path,matches:C,match:z,controller:new AbortController})}),[_,x]}function iK(e,t,r){let n=!t||r.route.id!==t.route.id,i=e[r.route.id]===void 0;return n||i}function u8(e,t){let r=e.route.path;return e.pathname!==t.pathname||r!=null&&r.endsWith("*")&&e.params["*"]!==t.params["*"]}function oL(e,t){if(e.route.shouldRevalidate){let r=e.route.shouldRevalidate(t);if(typeof r=="boolean")return r}return t.defaultShouldRevalidate}async function aL(e,t,r){if(!e.lazy)return;let n=await e.lazy();if(!e.lazy)return;let i=r[e.id];tt(i,"No route found in manifest");let s={};for(let o in n){let l=i[o]!==void 0&&o!=="hasErrorBoundary";wm(!l,'Route "'+i.id+'" has a static property "'+o+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+o+'" will be ignored.')),!l&&!MY.has(o)&&(s[o]=n[o])}Object.assign(i,s),Object.assign(i,ir({},t(i),{lazy:void 0}))}async function Sy(e,t,r,n,i,s,o,a){a===void 0&&(a={});let l,c,h,f=g=>{let v,w=new Promise((b,S)=>v=S);return h=()=>v(),t.signal.addEventListener("abort",h),Promise.race([g({request:t,params:r.params,context:a.requestContext}),w])};try{let g=r.route[e];if(r.route.lazy)if(g)c=(await Promise.all([f(g),aL(r.route,s,i)]))[0];else if(await aL(r.route,s,i),g=r.route[e],g)c=await f(g);else if(e==="action"){let v=new URL(t.url),w=v.pathname+v.search;throw _s(405,{method:t.method,pathname:w,routeId:r.route.id})}else return{type:Hr.data,data:void 0};else if(g)c=await f(g);else{let v=new URL(t.url),w=v.pathname+v.search;throw _s(404,{pathname:w})}tt(c!==void 0,"You defined "+(e==="action"?"an action":"a loader")+" for route "+('"'+r.route.id+"\" but didn't return anything from your `"+e+"` ")+"function. Please return a value or `null`.")}catch(g){l=Hr.error,c=g}finally{h&&t.signal.removeEventListener("abort",h)}if(lK(c)){let g=c.status;if(YY.has(g)){let b=c.headers.get("Location");if(tt(b,"Redirects returned/thrown from loaders/actions must have a Location header"),!l8.test(b))b=UE(new URL(t.url),n.slice(0,n.indexOf(r)+1),o,!0,b);else if(!a.isStaticRequest){let S=new URL(t.url),_=b.startsWith("//")?new URL(S.protocol+b):new URL(b),x=Zc(_.pathname,o)!=null;_.origin===S.origin&&x&&(b=_.pathname+_.search+_.hash)}if(a.isStaticRequest)throw c.headers.set("Location",b),c;return{type:Hr.redirect,status:g,location:b,revalidate:c.headers.get("X-Remix-Revalidate")!==null}}if(a.isRouteRequest)throw{type:l||Hr.data,response:c};let v,w=c.headers.get("Content-Type");return w&&/\bapplication\/json\b/.test(w)?v=await c.json():v=await c.text(),l===Hr.error?{type:l,error:new tO(g,c.statusText,v),headers:c.headers}:{type:Hr.data,data:v,statusCode:c.status,headers:c.headers}}if(l===Hr.error)return{type:l,error:c};if(aK(c)){var m,y;return{type:Hr.deferred,deferredData:c,statusCode:(m=c.init)==null?void 0:m.status,headers:((y=c.init)==null?void 0:y.headers)&&new Headers(c.init.headers)}}return{type:Hr.data,data:c}}function xy(e,t,r,n){let i=e.createURL(c8(t)).toString(),s={signal:r};if(n&&bo(n.formMethod)){let{formMethod:o,formEncType:a}=n;s.method=o.toUpperCase(),a==="application/json"?(s.headers=new Headers({"Content-Type":a}),s.body=JSON.stringify(n.json)):a==="text/plain"?s.body=n.text:a==="application/x-www-form-urlencoded"&&n.formData?s.body=GE(n.formData):s.body=n.formData}return new Request(i,s)}function GE(e){let t=new URLSearchParams;for(let[r,n]of e.entries())t.append(r,typeof n=="string"?n:n.name);return t}function lL(e){let t=new FormData;for(let[r,n]of e.entries())t.append(r,n);return t}function sK(e,t,r,n,i){let s={},o=null,a,l=!1,c={};return r.forEach((h,f)=>{let m=t[f].route.id;if(tt(!Qf(h),"Cannot handle redirect results in processLoaderData"),r0(h)){let y=Af(e,m),g=h.error;n&&(g=Object.values(n)[0],n=void 0),o=o||{},o[y.route.id]==null&&(o[y.route.id]=g),s[m]=void 0,l||(l=!0,a=o8(h.error)?h.error.status:500),h.headers&&(c[m]=h.headers)}else Th(h)?(i.set(m,h.deferredData),s[m]=h.deferredData.data):s[m]=h.data,h.statusCode!=null&&h.statusCode!==200&&!l&&(a=h.statusCode),h.headers&&(c[m]=h.headers)}),n&&(o=n,s[Object.keys(n)[0]]=void 0),{loaderData:s,errors:o,statusCode:a||200,loaderHeaders:c}}function uL(e,t,r,n,i,s,o,a){let{loaderData:l,errors:c}=sK(t,r,n,i,a);for(let h=0;h<s.length;h++){let{key:f,match:m,controller:y}=s[h];tt(o!==void 0&&o[h]!==void 0,"Did not find corresponding fetcher result");let g=o[h];if(!(y&&y.signal.aborted))if(r0(g)){let v=Af(e.matches,m==null?void 0:m.route.id);c&&c[v.route.id]||(c=ir({},c,{[v.route.id]:g.error})),e.fetchers.delete(f)}else if(Qf(g))tt(!1,"Unhandled fetcher revalidation redirect");else if(Th(g))tt(!1,"Unhandled fetcher deferred data");else{let v=u_(g.data);e.fetchers.set(f,v)}}return{loaderData:l,errors:c}}function cL(e,t,r,n){let i=ir({},t);for(let s of r){let o=s.route.id;if(t.hasOwnProperty(o)?t[o]!==void 0&&(i[o]=t[o]):e[o]!==void 0&&s.route.loader&&(i[o]=e[o]),n&&n.hasOwnProperty(o))break}return i}function Af(e,t){return(t?e.slice(0,e.findIndex(n=>n.route.id===t)+1):[...e]).reverse().find(n=>n.route.hasErrorBoundary===!0)||e[0]}function dL(e){let t=e.find(r=>r.index||!r.path||r.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:t}],route:t}}function _s(e,t){let{pathname:r,routeId:n,method:i,type:s}=t===void 0?{}:t,o="Unknown Server Error",a="Unknown @remix-run/router error";return e===400?(o="Bad Request",i&&r&&n?a="You made a "+i+' request to "'+r+'" but '+('did not provide a `loader` for route "'+n+'", ')+"so there is no way to handle the request.":s==="defer-action"?a="defer() is not supported in actions":s==="invalid-body"&&(a="Unable to encode submission body")):e===403?(o="Forbidden",a='Route "'+n+'" does not match URL "'+r+'"'):e===404?(o="Not Found",a='No route matches URL "'+r+'"'):e===405&&(o="Method Not Allowed",i&&r&&n?a="You made a "+i.toUpperCase()+' request to "'+r+'" but '+('did not provide an `action` for route "'+n+'", ')+"so there is no way to handle the request.":i&&(a='Invalid request method "'+i.toUpperCase()+'"')),new tO(e||500,o,new Error(a),!0)}function hL(e){for(let t=e.length-1;t>=0;t--){let r=e[t];if(Qf(r))return r}}function c8(e){let t=typeof e=="string"?iu(e):e;return Hc(ir({},t,{hash:""}))}function oK(e,t){return e.pathname!==t.pathname||e.search!==t.search?!1:e.hash===""?t.hash!=="":e.hash===t.hash?!0:t.hash!==""}function Th(e){return e.type===Hr.deferred}function r0(e){return e.type===Hr.error}function Qf(e){return(e&&e.type)===Hr.redirect}function aK(e){let t=e;return t&&typeof t=="object"&&typeof t.data=="object"&&typeof t.subscribe=="function"&&typeof t.cancel=="function"&&typeof t.resolveData=="function"}function lK(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.headers=="object"&&typeof e.body<"u"}function uK(e){return QY.has(e.toLowerCase())}function bo(e){return ZY.has(e.toLowerCase())}async function pL(e,t,r,n,i,s){for(let o=0;o<r.length;o++){let a=r[o],l=t[o];if(!l)continue;let c=e.find(f=>f.route.id===l.route.id),h=c!=null&&!u8(c,l)&&(s&&s[l.route.id])!==void 0;if(Th(a)&&(i||h)){let f=n[o];tt(f,"Expected an AbortSignal for revalidating fetcher deferred result"),await d8(a,f,i).then(m=>{m&&(r[o]=m||r[o])})}}}async function d8(e,t,r){if(r===void 0&&(r=!1),!await e.deferredData.resolveData(t)){if(r)try{return{type:Hr.data,data:e.deferredData.unwrappedData}}catch(i){return{type:Hr.error,error:i}}return{type:Hr.data,data:e.deferredData.data}}}function rO(e){return new URLSearchParams(e).getAll("index").some(t=>t==="")}function cK(e,t){let{route:r,pathname:n,params:i}=e;return{id:r.id,pathname:n,params:i,data:t[r.id],handle:r.handle}}function BE(e,t){let r=typeof t=="string"?iu(t).search:t.search;if(e[e.length-1].route.index&&rO(r||""))return e[e.length-1];let n=Uv(e);return n[n.length-1]}function fL(e){let{formMethod:t,formAction:r,formEncType:n,text:i,formData:s,json:o}=e;if(!(!t||!r||!n)){if(i!=null)return{formMethod:t,formAction:r,formEncType:n,formData:void 0,json:void 0,text:i};if(s!=null)return{formMethod:t,formAction:r,formEncType:n,formData:s,json:void 0,text:void 0};if(o!==void 0)return{formMethod:t,formAction:r,formEncType:n,formData:void 0,json:o,text:void 0}}}function G1(e,t){return t?{state:"loading",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}:{state:"loading",location:e,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function dK(e,t){return{state:"submitting",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}}function $y(e,t){return e?{state:"loading",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t," _hasFetcherDoneAnything ":!0}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t," _hasFetcherDoneAnything ":!0}}function hK(e,t){return{state:"submitting",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t?t.data:void 0," _hasFetcherDoneAnything ":!0}}function u_(e){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e," _hasFetcherDoneAnything ":!0}}/**
 * React Router v6.14.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Gb(){return Gb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Gb.apply(this,arguments)}const Gv=G.createContext(null),nO=G.createContext(null),su=G.createContext(null),Nx=G.createContext(null),Qo=G.createContext({outlet:null,matches:[],isDataRoute:!1}),h8=G.createContext(null);function pK(e,t){let{relative:r}=t===void 0?{}:t;Vm()||tt(!1);let{basename:n,navigator:i}=G.useContext(su),{hash:s,pathname:o,search:a}=Fx(e,{relative:r}),l=o;return n!=="/"&&(l=o==="/"?n:Oa([n,o])),i.createHref({pathname:l,search:a,hash:s})}function Vm(){return G.useContext(Nx)!=null}function ld(){return Vm()||tt(!1),G.useContext(Nx).location}function p8(e){G.useContext(su).static||G.useLayoutEffect(e)}function Dx(){let{isDataRoute:e}=G.useContext(Qo);return e?MK():fK()}function fK(){Vm()||tt(!1);let e=G.useContext(Gv),{basename:t,navigator:r}=G.useContext(su),{matches:n}=G.useContext(Qo),{pathname:i}=ld(),s=JSON.stringify(Uv(n).map(l=>l.pathnameBase)),o=G.useRef(!1);return p8(()=>{o.current=!0}),G.useCallback(function(l,c){if(c===void 0&&(c={}),!o.current)return;if(typeof l=="number"){r.go(l);return}let h=Lx(l,JSON.parse(s),i,c.relative==="path");e==null&&t!=="/"&&(h.pathname=h.pathname==="/"?t:Oa([t,h.pathname])),(c.replace?r.replace:r.push)(h,c.state,c)},[t,r,s,i,e])}const mK=G.createContext(null);function yK(e){let t=G.useContext(Qo).outlet;return t&&G.createElement(mK.Provider,{value:e},t)}function iO(){let{matches:e}=G.useContext(Qo),t=e[e.length-1];return t?t.params:{}}function Fx(e,t){let{relative:r}=t===void 0?{}:t,{matches:n}=G.useContext(Qo),{pathname:i}=ld(),s=JSON.stringify(Uv(n).map(o=>o.pathnameBase));return G.useMemo(()=>Lx(e,JSON.parse(s),i,r==="path"),[e,s,i,r])}function gK(e,t,r){Vm()||tt(!1);let{navigator:n}=G.useContext(su),{matches:i}=G.useContext(Qo),s=i[i.length-1],o=s?s.params:{};s&&s.pathname;let a=s?s.pathnameBase:"/";s&&s.route;let l=ld(),c;if(t){var h;let v=typeof t=="string"?iu(t):t;a==="/"||(h=v.pathname)!=null&&h.startsWith(a)||tt(!1),c=v}else c=l;let f=c.pathname||"/",m=a==="/"?f:f.slice(a.length)||"/",y=Rf(e,{pathname:m}),g=SK(y&&y.map(v=>Object.assign({},v,{params:Object.assign({},o,v.params),pathname:Oa([a,n.encodeLocation?n.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?a:Oa([a,n.encodeLocation?n.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),i,r);return t&&g?G.createElement(Nx.Provider,{value:{location:Gb({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:Nr.Pop}},g):g}function vK(){let e=f8(),t=o8(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},s=null;return G.createElement(G.Fragment,null,G.createElement("h2",null,"Unexpected Application Error!"),G.createElement("h3",{style:{fontStyle:"italic"}},t),r?G.createElement("pre",{style:i},r):null,s)}const wK=G.createElement(vK,null);class _K extends G.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error||r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error?G.createElement(Qo.Provider,{value:this.props.routeContext},G.createElement(h8.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function bK(e){let{routeContext:t,match:r,children:n}=e,i=G.useContext(Gv);return i&&i.static&&i.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=r.route.id),G.createElement(Qo.Provider,{value:t},n)}function SK(e,t,r){var n;if(t===void 0&&(t=[]),r===void 0&&(r=null),e==null){var i;if((i=r)!=null&&i.errors)e=r.matches;else return null}let s=e,o=(n=r)==null?void 0:n.errors;if(o!=null){let a=s.findIndex(l=>l.route.id&&(o==null?void 0:o[l.route.id]));a>=0||tt(!1),s=s.slice(0,Math.min(s.length,a+1))}return s.reduceRight((a,l,c)=>{let h=l.route.id?o==null?void 0:o[l.route.id]:null,f=null;r&&(f=l.route.errorElement||wK);let m=t.concat(s.slice(0,c+1)),y=()=>{let g;return h?g=f:l.route.Component?g=G.createElement(l.route.Component,null):l.route.element?g=l.route.element:g=a,G.createElement(bK,{match:l,routeContext:{outlet:a,matches:m,isDataRoute:r!=null},children:g})};return r&&(l.route.ErrorBoundary||l.route.errorElement||c===0)?G.createElement(_K,{location:r.location,revalidation:r.revalidation,component:f,error:h,children:y(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):y()},null)}var qE;(function(e){e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate"})(qE||(qE={}));var Bl;(function(e){e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId"})(Bl||(Bl={}));function xK(e){let t=G.useContext(Gv);return t||tt(!1),t}function sO(e){let t=G.useContext(nO);return t||tt(!1),t}function $K(e){let t=G.useContext(Qo);return t||tt(!1),t}function jx(e){let t=$K(),r=t.matches[t.matches.length-1];return r.route.id||tt(!1),r.route.id}function TK(){return jx(Bl.UseRouteId)}function EK(){return sO(Bl.UseNavigation).navigation}function Bv(){let e=sO(Bl.UseLoaderData),t=jx(Bl.UseLoaderData);if(e.errors&&e.errors[t]!=null){console.error("You cannot `useLoaderData` in an errorElement (routeId: "+t+")");return}return e.loaderData[t]}function f8(){var e;let t=G.useContext(h8),r=sO(Bl.UseRouteError),n=jx(Bl.UseRouteError);return t||((e=r.errors)==null?void 0:e[n])}function MK(){let{router:e}=xK(qE.UseNavigateStable),t=jx(Bl.UseNavigateStable),r=G.useRef(!1);return p8(()=>{r.current=!0}),G.useCallback(function(i,s){s===void 0&&(s={}),r.current&&(typeof i=="number"?e.navigate(i):e.navigate(i,Gb({fromRouteId:t},s)))},[e,t])}const IK="startTransition",mL=pJ[IK];function CK(e){let{fallbackElement:t,router:r,future:n}=e,[i,s]=G.useState(r.state),{v7_startTransition:o}=n||{},a=G.useCallback(f=>{o&&mL?mL(()=>s(f)):s(f)},[s,o]);G.useLayoutEffect(()=>r.subscribe(a),[r,a]);let l=G.useMemo(()=>({createHref:r.createHref,encodeLocation:r.encodeLocation,go:f=>r.navigate(f),push:(f,m,y)=>r.navigate(f,{state:m,preventScrollReset:y==null?void 0:y.preventScrollReset}),replace:(f,m,y)=>r.navigate(f,{replace:!0,state:m,preventScrollReset:y==null?void 0:y.preventScrollReset})}),[r]),c=r.basename||"/",h=G.useMemo(()=>({router:r,navigator:l,static:!1,basename:c}),[r,l,c]);return G.createElement(G.Fragment,null,G.createElement(Gv.Provider,{value:h},G.createElement(nO.Provider,{value:i},G.createElement(OK,{basename:c,location:i.location,navigationType:i.historyAction,navigator:l},i.initialized?G.createElement(kK,{routes:r.routes,state:i}):t))),null)}function kK(e){let{routes:t,state:r}=e;return gK(t,void 0,r)}function PK(e){let{to:t,replace:r,state:n,relative:i}=e;Vm()||tt(!1);let{matches:s}=G.useContext(Qo),{pathname:o}=ld(),a=Dx(),l=Lx(t,Uv(s).map(h=>h.pathnameBase),o,i==="path"),c=JSON.stringify(l);return G.useEffect(()=>a(JSON.parse(c),{replace:r,state:n,relative:i}),[a,c,i,r,n]),null}function oO(e){return yK(e.context)}function OK(e){let{basename:t="/",children:r=null,location:n,navigationType:i=Nr.Pop,navigator:s,static:o=!1}=e;Vm()&&tt(!1);let a=t.replace(/^\/*/,"/"),l=G.useMemo(()=>({basename:a,navigator:s,static:o}),[a,s,o]);typeof n=="string"&&(n=iu(n));let{pathname:c="/",search:h="",hash:f="",state:m=null,key:y="default"}=n,g=G.useMemo(()=>{let v=Zc(c,a);return v==null?null:{location:{pathname:v,search:h,hash:f,state:m,key:y},navigationType:i}},[a,c,h,f,m,y,i]);return g==null?null:G.createElement(su.Provider,{value:l},G.createElement(Nx.Provider,{children:r,value:g}))}var yL;(function(e){e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error"})(yL||(yL={}));new Promise(()=>{});function RK(e){let t={hasErrorBoundary:e.ErrorBoundary!=null||e.errorElement!=null};return e.Component&&Object.assign(t,{element:G.createElement(e.Component),Component:void 0}),e.ErrorBoundary&&Object.assign(t,{errorElement:G.createElement(e.ErrorBoundary),ErrorBoundary:void 0}),t}/**
 * React Router DOM v6.14.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ql(){return ql=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ql.apply(this,arguments)}function aO(e,t){if(e==null)return{};var r={},n=Object.keys(e),i,s;for(s=0;s<n.length;s++)i=n[s],!(t.indexOf(i)>=0)&&(r[i]=e[i]);return r}const c_="get",g$="application/x-www-form-urlencoded";function Vx(e){return e!=null&&typeof e.tagName=="string"}function AK(e){return Vx(e)&&e.tagName.toLowerCase()==="button"}function LK(e){return Vx(e)&&e.tagName.toLowerCase()==="form"}function NK(e){return Vx(e)&&e.tagName.toLowerCase()==="input"}function DK(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function FK(e,t){return e.button===0&&(!t||t==="_self")&&!DK(e)}function WE(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let n=e[r];return t.concat(Array.isArray(n)?n.map(i=>[r,i]):[[r,n]])},[]))}function jK(e,t){let r=WE(e);if(t)for(let n of t.keys())r.has(n)||t.getAll(n).forEach(i=>{r.append(n,i)});return r}let B1=null;function VK(){if(B1===null)try{new FormData(document.createElement("form"),0),B1=!1}catch{B1=!0}return B1}const zK=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function v$(e){return e!=null&&!zK.has(e)?null:e}function UK(e,t){let r,n,i,s,o;if(LK(e)){let a=e.getAttribute("action");n=a?Zc(a,t):null,r=e.getAttribute("method")||c_,i=v$(e.getAttribute("enctype"))||g$,s=new FormData(e)}else if(AK(e)||NK(e)&&(e.type==="submit"||e.type==="image")){let a=e.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=e.getAttribute("formaction")||a.getAttribute("action");if(n=l?Zc(l,t):null,r=e.getAttribute("formmethod")||a.getAttribute("method")||c_,i=v$(e.getAttribute("formenctype"))||v$(a.getAttribute("enctype"))||g$,s=new FormData(a,e),!VK()){let{name:c,type:h,value:f}=e;if(h==="image"){let m=c?c+".":"";s.append(m+"x","0"),s.append(m+"y","0")}else c&&s.append(c,f)}}else{if(Vx(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=c_,n=null,i=g$,o=e}return s&&i==="text/plain"&&(o=s,s=void 0),{action:n,method:r.toLowerCase(),encType:i,formData:s,body:o}}const GK=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"],BK=["aria-current","caseSensitive","className","end","style","to","children"],qK=["reloadDocument","replace","method","action","onSubmit","submit","relative","preventScrollReset"];function WK(e,t){return tK({basename:t==null?void 0:t.basename,future:ql({},t==null?void 0:t.future,{v7_prependBasename:!0}),history:$Y({window:t==null?void 0:t.window}),hydrationData:(t==null?void 0:t.hydrationData)||HK(),routes:e,mapRouteProperties:RK}).initialize()}function HK(){var e;let t=(e=window)==null?void 0:e.__staticRouterHydrationData;return t&&t.errors&&(t=ql({},t,{errors:ZK(t.errors)})),t}function ZK(e){if(!e)return null;let t=Object.entries(e),r={};for(let[n,i]of t)if(i&&i.__type==="RouteErrorResponse")r[n]=new tO(i.status,i.statusText,i.data,i.internal===!0);else if(i&&i.__type==="Error"){let s=new Error(i.message);s.stack="",r[n]=s}else r[n]=i;return r}const JK=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",QK=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Oo=G.forwardRef(function(t,r){let{onClick:n,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:h}=t,f=aO(t,GK),{basename:m}=G.useContext(su),y,g=!1;if(typeof c=="string"&&QK.test(c)&&(y=c,JK))try{let S=new URL(window.location.href),_=c.startsWith("//")?new URL(S.protocol+c):new URL(c),x=Zc(_.pathname,m);_.origin===S.origin&&x!=null?c=x+_.search+_.hash:g=!0}catch{}let v=pK(c,{relative:i}),w=eX(c,{replace:o,state:a,target:l,preventScrollReset:h,relative:i});function b(S){n&&n(S),S.defaultPrevented||w(S)}return G.createElement("a",ql({},f,{href:y||v,onClick:g||s?n:b,ref:r,target:l}))}),w$=G.forwardRef(function(t,r){let{"aria-current":n="page",caseSensitive:i=!1,className:s="",end:o=!1,style:a,to:l,children:c}=t,h=aO(t,BK),f=Fx(l,{relative:h.relative}),m=ld(),y=G.useContext(nO),{navigator:g}=G.useContext(su),v=g.encodeLocation?g.encodeLocation(f).pathname:f.pathname,w=m.pathname,b=y&&y.navigation&&y.navigation.location?y.navigation.location.pathname:null;i||(w=w.toLowerCase(),b=b?b.toLowerCase():null,v=v.toLowerCase());let S=w===v||!o&&w.startsWith(v)&&w.charAt(v.length)==="/",_=b!=null&&(b===v||!o&&b.startsWith(v)&&b.charAt(v.length)==="/"),x=S?n:void 0,T;typeof s=="function"?T=s({isActive:S,isPending:_}):T=[s,S?"active":null,_?"pending":null].filter(Boolean).join(" ");let I=typeof a=="function"?a({isActive:S,isPending:_}):a;return G.createElement(Oo,ql({},h,{"aria-current":x,className:T,ref:r,style:I,to:l}),typeof c=="function"?c({isActive:S,isPending:_}):c)}),YK=G.forwardRef((e,t)=>{let r=y8();return G.createElement(KK,ql({},e,{submit:r,ref:t}))}),KK=G.forwardRef((e,t)=>{let{reloadDocument:r,replace:n,method:i=c_,action:s,onSubmit:o,submit:a,relative:l,preventScrollReset:c}=e,h=aO(e,qK),f=i.toLowerCase()==="get"?"get":"post",m=rX(s,{relative:l}),y=g=>{if(o&&o(g),g.defaultPrevented)return;g.preventDefault();let v=g.nativeEvent.submitter,w=(v==null?void 0:v.getAttribute("formmethod"))||i;a(v||g.currentTarget,{method:w,replace:n,relative:l,preventScrollReset:c})};return G.createElement("form",ql({ref:t,method:f,action:m,onSubmit:r?o:y},h))});var HE;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher"})(HE||(HE={}));var gL;(function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(gL||(gL={}));function XK(e){let t=G.useContext(Gv);return t||tt(!1),t}function eX(e,t){let{target:r,replace:n,state:i,preventScrollReset:s,relative:o}=t===void 0?{}:t,a=Dx(),l=ld(),c=Fx(e,{relative:o});return G.useCallback(h=>{if(FK(h,r)){h.preventDefault();let f=n!==void 0?n:Hc(l)===Hc(c);a(e,{replace:f,state:i,preventScrollReset:s,relative:o})}},[l,a,c,n,i,r,e,s,o])}function m8(e){let t=G.useRef(WE(e)),r=G.useRef(!1),n=ld(),i=G.useMemo(()=>jK(n.search,r.current?null:t.current),[n.search]),s=Dx(),o=G.useCallback((a,l)=>{const c=WE(typeof a=="function"?a(i):a);r.current=!0,s("?"+c,l)},[s,i]);return[i,o]}function tX(){if(typeof document>"u")throw new Error("You are calling submit during the server render. Try calling submit within a `useEffect` or callback instead.")}function y8(){let{router:e}=XK(HE.UseSubmit),{basename:t}=G.useContext(su),r=TK();return G.useCallback(function(n,i){i===void 0&&(i={}),tX();let{action:s,method:o,encType:a,formData:l,body:c}=UK(n,t);e.navigate(i.action||s,{preventScrollReset:i.preventScrollReset,formData:l,body:c,formMethod:i.method||o,formEncType:i.encType||a,replace:i.replace,fromRouteId:r})},[e,t,r])}function rX(e,t){let{relative:r}=t===void 0?{}:t,{basename:n}=G.useContext(su),i=G.useContext(Qo);i||tt(!1);let[s]=i.matches.slice(-1),o=ql({},Fx(e||".",{relative:r})),a=ld();if(e==null&&(o.search=a.search,o.hash=a.hash,s.route.index)){let l=new URLSearchParams(o.search);l.delete("index"),o.search=l.toString()?"?"+l.toString():""}return(!e||e===".")&&s.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(o.pathname=o.pathname==="/"?n:Oa([n,o.pathname])),Hc(o)}function zm(e){const t=new URLSearchParams;return["repository","platform","device","cruise","lake","province","igsn","min_depth","max_depth","start_date_begins_with","weathering","metamorphism","mineralogy","lithology","texture","page","imlgs","order"].forEach(n=>{const i=e.has(n)&&e.get(n)?e.get(n):"";i&&t.set(n,i)}),t}function nX(){const e=new URL(window.location.href),t=zm(e.searchParams),r={textDecoration:"none",color:"white",fontWeight:"bold",fontSize:"larger"},n={textDecoration:"underline",color:"white"};return M.jsxs("div",{className:"Header",children:[M.jsxs("header",{children:[M.jsx("a",{href:"https://www.ncei.noaa.gov/",title:"National Centers for Environmental Information, National Oceanic and Atmospheric Administration",children:M.jsx("img",{className:"Header--nceiLogo",src:"https://maps.ngdc.noaa.gov/images/imlgs/map-banner.png",alt:"National Centers for Environmental Information, National Oceanic and Atmospheric Administration"})}),M.jsx("div",{className:"Header--titleDiv",children:M.jsx("span",{className:"Header--title",children:"Index to Marine and Lacustrine Geological Samples (IMLGS)"})}),M.jsx("span",{children:M.jsx("a",{href:"https://www.nsf.gov/div/index.jsp?div=OCE",title:"external link to the National Science Foundation Ocean Sciences Division",target:"_top",children:M.jsx("img",{className:"Header--nsfLogo",src:"https://maps.ngdc.noaa.gov/images/imlgs/NSFLogo.png",alt:"US National Science Foundation Division of Ocean Sciences"})})})]}),M.jsx("nav",{style:{borderBottom:"solid 1px",display:"flex",justifyContent:"space-between",verticalAlign:"top"},className:"Nav",children:M.jsxs("div",{id:"breadcrumbs",children:[M.jsx(w$,{to:"/samples",style:({isActive:i})=>i?r:n,children:"Samples"})," | "," ",M.jsx(w$,{to:`/cruises?${t.toString()}`,style:({isActive:i})=>i?r:n,children:"Cruises"}),"  | "," ",M.jsx(w$,{to:"/repositories",style:({isActive:i})=>i?r:n,children:"Respositories"})]})})]})}const iX="3.0.0";function sX(){return M.jsx("footer",{className:"Footer",children:M.jsxs("span",{className:"Footer--appversion",children:["Version ",iX]})})}function oX(){return M.jsxs("div",{className:"Root--wrapper",children:[M.jsx(nX,{}),M.jsx(oO,{}),M.jsx(sX,{})]})}function vL(){const e=f8();return M.jsxs("div",{id:"error-page",children:[M.jsx("h1",{children:"Oops!"}),M.jsx("p",{children:"Sorry, an unexpected error has occurred."}),M.jsx("p",{children:M.jsx("i",{children:e.statusText||e.message})})]})}function aX(){return M.jsx("p",{children:"The page you requested is not found. Please check your address"})}const _$="Repositories";function lX(){const{repositories:e}=Bv();return console.log(`${e.length} repositories loaded`),M.jsxs("div",{className:`${_$}--wrapper`,children:[M.jsx("div",{className:`${_$}--sidebar`,children:e?e.map(t=>M.jsx(Oo,{style:{display:"block",margin:"1rem 0",color:"#282c34",textDecoration:"none"},to:`/repositories/${t.id}`,children:t.facility},t.id)):""}),M.jsx("div",{className:`${_$}--main`,children:M.jsx(oO,{})})]})}function uX(){return M.jsx("p",{children:"Please select a Repository to get its details"})}var _t;(function(e){e.assertEqual=i=>i;function t(i){}e.assertIs=t;function r(i){throw new Error}e.assertNever=r,e.arrayToEnum=i=>{const s={};for(const o of i)s[o]=o;return s},e.getValidEnumValues=i=>{const s=e.objectKeys(i).filter(a=>typeof i[i[a]]!="number"),o={};for(const a of s)o[a]=i[a];return e.objectValues(o)},e.objectValues=i=>e.objectKeys(i).map(function(s){return i[s]}),e.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const s=[];for(const o in i)Object.prototype.hasOwnProperty.call(i,o)&&s.push(o);return s},e.find=(i,s)=>{for(const o of i)if(s(o))return o},e.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&isFinite(i)&&Math.floor(i)===i;function n(i,s=" | "){return i.map(o=>typeof o=="string"?`'${o}'`:o).join(s)}e.joinValues=n,e.jsonStringifyReplacer=(i,s)=>typeof s=="bigint"?s.toString():s})(_t||(_t={}));var ZE;(function(e){e.mergeShapes=(t,r)=>({...t,...r})})(ZE||(ZE={}));const fe=_t.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),wc=e=>{switch(typeof e){case"undefined":return fe.undefined;case"string":return fe.string;case"number":return isNaN(e)?fe.nan:fe.number;case"boolean":return fe.boolean;case"function":return fe.function;case"bigint":return fe.bigint;case"symbol":return fe.symbol;case"object":return Array.isArray(e)?fe.array:e===null?fe.null:e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?fe.promise:typeof Map<"u"&&e instanceof Map?fe.map:typeof Set<"u"&&e instanceof Set?fe.set:typeof Date<"u"&&e instanceof Date?fe.date:fe.object;default:return fe.unknown}},se=_t.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),cX=e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:");class Ro extends Error{constructor(t){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};const r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=t}get errors(){return this.issues}format(t){const r=t||function(s){return s.message},n={_errors:[]},i=s=>{for(const o of s.issues)if(o.code==="invalid_union")o.unionErrors.map(i);else if(o.code==="invalid_return_type")i(o.returnTypeError);else if(o.code==="invalid_arguments")i(o.argumentsError);else if(o.path.length===0)n._errors.push(r(o));else{let a=n,l=0;for(;l<o.path.length;){const c=o.path[l];l===o.path.length-1?(a[c]=a[c]||{_errors:[]},a[c]._errors.push(r(o))):a[c]=a[c]||{_errors:[]},a=a[c],l++}}};return i(this),n}toString(){return this.message}get message(){return JSON.stringify(this.issues,_t.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=r=>r.message){const r={},n=[];for(const i of this.issues)i.path.length>0?(r[i.path[0]]=r[i.path[0]]||[],r[i.path[0]].push(t(i))):n.push(t(i));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}}Ro.create=e=>new Ro(e);const H0=(e,t)=>{let r;switch(e.code){case se.invalid_type:e.received===fe.undefined?r="Required":r=`Expected ${e.expected}, received ${e.received}`;break;case se.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(e.expected,_t.jsonStringifyReplacer)}`;break;case se.unrecognized_keys:r=`Unrecognized key(s) in object: ${_t.joinValues(e.keys,", ")}`;break;case se.invalid_union:r="Invalid input";break;case se.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${_t.joinValues(e.options)}`;break;case se.invalid_enum_value:r=`Invalid enum value. Expected ${_t.joinValues(e.options)}, received '${e.received}'`;break;case se.invalid_arguments:r="Invalid function arguments";break;case se.invalid_return_type:r="Invalid function return type";break;case se.invalid_date:r="Invalid date";break;case se.invalid_string:typeof e.validation=="object"?"includes"in e.validation?(r=`Invalid input: must include "${e.validation.includes}"`,typeof e.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?r=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?r=`Invalid input: must end with "${e.validation.endsWith}"`:_t.assertNever(e.validation):e.validation!=="regex"?r=`Invalid ${e.validation}`:r="Invalid";break;case se.too_small:e.type==="array"?r=`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:e.type==="string"?r=`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:e.type==="number"?r=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="date"?r=`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:r="Invalid input";break;case se.too_big:e.type==="array"?r=`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:e.type==="string"?r=`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:e.type==="number"?r=`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="bigint"?r=`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="date"?r=`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:r="Invalid input";break;case se.custom:r="Invalid input";break;case se.invalid_intersection_types:r="Intersection results could not be merged";break;case se.not_multiple_of:r=`Number must be a multiple of ${e.multipleOf}`;break;case se.not_finite:r="Number must be finite";break;default:r=t.defaultError,_t.assertNever(e)}return{message:r}};let g8=H0;function dX(e){g8=e}function Bb(){return g8}const qb=e=>{const{data:t,path:r,errorMaps:n,issueData:i}=e,s=[...r,...i.path||[]],o={...i,path:s};let a="";const l=n.filter(c=>!!c).slice().reverse();for(const c of l)a=c(o,{data:t,defaultError:a}).message;return{...i,path:s,message:i.message||a}},hX=[];function ye(e,t){const r=qb({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,Bb(),H0].filter(n=>!!n)});e.common.issues.push(r)}class Fn{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,r){const n=[];for(const i of r){if(i.status==="aborted")return He;i.status==="dirty"&&t.dirty(),n.push(i.value)}return{status:t.value,value:n}}static async mergeObjectAsync(t,r){const n=[];for(const i of r)n.push({key:await i.key,value:await i.value});return Fn.mergeObjectSync(t,n)}static mergeObjectSync(t,r){const n={};for(const i of r){const{key:s,value:o}=i;if(s.status==="aborted"||o.status==="aborted")return He;s.status==="dirty"&&t.dirty(),o.status==="dirty"&&t.dirty(),s.value!=="__proto__"&&(typeof o.value<"u"||i.alwaysSet)&&(n[s.value]=o.value)}return{status:t.value,value:n}}}const He=Object.freeze({status:"aborted"}),v8=e=>({status:"dirty",value:e}),ti=e=>({status:"valid",value:e}),JE=e=>e.status==="aborted",QE=e=>e.status==="dirty",Z0=e=>e.status==="valid",Wb=e=>typeof Promise<"u"&&e instanceof Promise;var Ae;(function(e){e.errToObj=t=>typeof t=="string"?{message:t}:t||{},e.toString=t=>typeof t=="string"?t:t==null?void 0:t.message})(Ae||(Ae={}));class Aa{constructor(t,r,n,i){this._cachedPath=[],this.parent=t,this.data=r,this._path=n,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const wL=(e,t)=>{if(Z0(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const r=new Ro(e.common.issues);return this._error=r,this._error}}};function Ye(e){if(!e)return{};const{errorMap:t,invalid_type_error:r,required_error:n,description:i}=e;if(t&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:i}:{errorMap:(o,a)=>o.code!=="invalid_type"?{message:a.defaultError}:typeof a.data>"u"?{message:n??a.defaultError}:{message:r??a.defaultError},description:i}}class rt{constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(t){return wc(t.data)}_getOrReturnCtx(t,r){return r||{common:t.parent.common,data:t.data,parsedType:wc(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new Fn,ctx:{common:t.parent.common,data:t.data,parsedType:wc(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){const r=this._parse(t);if(Wb(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(t){const r=this._parse(t);return Promise.resolve(r)}parse(t,r){const n=this.safeParse(t,r);if(n.success)return n.data;throw n.error}safeParse(t,r){var n;const i={common:{issues:[],async:(n=r==null?void 0:r.async)!==null&&n!==void 0?n:!1,contextualErrorMap:r==null?void 0:r.errorMap},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:wc(t)},s=this._parseSync({data:t,path:i.path,parent:i});return wL(i,s)}async parseAsync(t,r){const n=await this.safeParseAsync(t,r);if(n.success)return n.data;throw n.error}async safeParseAsync(t,r){const n={common:{issues:[],contextualErrorMap:r==null?void 0:r.errorMap,async:!0},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:wc(t)},i=this._parse({data:t,path:n.path,parent:n}),s=await(Wb(i)?i:Promise.resolve(i));return wL(n,s)}refine(t,r){const n=i=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(i):r;return this._refinement((i,s)=>{const o=t(i),a=()=>s.addIssue({code:se.custom,...n(i)});return typeof Promise<"u"&&o instanceof Promise?o.then(l=>l?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(t,r){return this._refinement((n,i)=>t(n)?!0:(i.addIssue(typeof r=="function"?r(n,i):r),!1))}_refinement(t){return new zo({schema:this,typeName:ze.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}optional(){return Al.create(this,this._def)}nullable(){return Yh.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Ao.create(this,this._def)}promise(){return bm.create(this,this._def)}or(t){return K0.create([this,t],this._def)}and(t){return X0.create(this,t,this._def)}transform(t){return new zo({...Ye(this._def),schema:this,typeName:ze.ZodEffects,effect:{type:"transform",transform:t}})}default(t){const r=typeof t=="function"?t:()=>t;return new iv({...Ye(this._def),innerType:this,defaultValue:r,typeName:ze.ZodDefault})}brand(){return new _8({typeName:ze.ZodBranded,type:this,...Ye(this._def)})}catch(t){const r=typeof t=="function"?t:()=>t;return new Qb({...Ye(this._def),innerType:this,catchValue:r,typeName:ze.ZodCatch})}describe(t){const r=this.constructor;return new r({...this._def,description:t})}pipe(t){return qv.create(this,t)}readonly(){return Kb.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const pX=/^c[^\s-]{8,}$/i,fX=/^[a-z][a-z0-9]*$/,mX=/[0-9A-HJKMNP-TV-Z]{26}/,yX=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,gX=/^([A-Z0-9_+-]+\.?)*[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,vX=/^(\p{Extended_Pictographic}|\p{Emoji_Component})+$/u,wX=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,_X=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,bX=e=>e.precision?e.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${e.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${e.precision}}Z$`):e.precision===0?e.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):e.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function SX(e,t){return!!((t==="v4"||!t)&&wX.test(e)||(t==="v6"||!t)&&_X.test(e))}class Eo extends rt{constructor(){super(...arguments),this._regex=(t,r,n)=>this.refinement(i=>t.test(i),{validation:r,code:se.invalid_string,...Ae.errToObj(n)}),this.nonempty=t=>this.min(1,Ae.errToObj(t)),this.trim=()=>new Eo({...this._def,checks:[...this._def.checks,{kind:"trim"}]}),this.toLowerCase=()=>new Eo({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]}),this.toUpperCase=()=>new Eo({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==fe.string){const s=this._getOrReturnCtx(t);return ye(s,{code:se.invalid_type,expected:fe.string,received:s.parsedType}),He}const n=new Fn;let i;for(const s of this._def.checks)if(s.kind==="min")t.data.length<s.value&&(i=this._getOrReturnCtx(t,i),ye(i,{code:se.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),n.dirty());else if(s.kind==="max")t.data.length>s.value&&(i=this._getOrReturnCtx(t,i),ye(i,{code:se.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),n.dirty());else if(s.kind==="length"){const o=t.data.length>s.value,a=t.data.length<s.value;(o||a)&&(i=this._getOrReturnCtx(t,i),o?ye(i,{code:se.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):a&&ye(i,{code:se.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),n.dirty())}else if(s.kind==="email")gX.test(t.data)||(i=this._getOrReturnCtx(t,i),ye(i,{validation:"email",code:se.invalid_string,message:s.message}),n.dirty());else if(s.kind==="emoji")vX.test(t.data)||(i=this._getOrReturnCtx(t,i),ye(i,{validation:"emoji",code:se.invalid_string,message:s.message}),n.dirty());else if(s.kind==="uuid")yX.test(t.data)||(i=this._getOrReturnCtx(t,i),ye(i,{validation:"uuid",code:se.invalid_string,message:s.message}),n.dirty());else if(s.kind==="cuid")pX.test(t.data)||(i=this._getOrReturnCtx(t,i),ye(i,{validation:"cuid",code:se.invalid_string,message:s.message}),n.dirty());else if(s.kind==="cuid2")fX.test(t.data)||(i=this._getOrReturnCtx(t,i),ye(i,{validation:"cuid2",code:se.invalid_string,message:s.message}),n.dirty());else if(s.kind==="ulid")mX.test(t.data)||(i=this._getOrReturnCtx(t,i),ye(i,{validation:"ulid",code:se.invalid_string,message:s.message}),n.dirty());else if(s.kind==="url")try{new URL(t.data)}catch{i=this._getOrReturnCtx(t,i),ye(i,{validation:"url",code:se.invalid_string,message:s.message}),n.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(t.data)||(i=this._getOrReturnCtx(t,i),ye(i,{validation:"regex",code:se.invalid_string,message:s.message}),n.dirty())):s.kind==="trim"?t.data=t.data.trim():s.kind==="includes"?t.data.includes(s.value,s.position)||(i=this._getOrReturnCtx(t,i),ye(i,{code:se.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),n.dirty()):s.kind==="toLowerCase"?t.data=t.data.toLowerCase():s.kind==="toUpperCase"?t.data=t.data.toUpperCase():s.kind==="startsWith"?t.data.startsWith(s.value)||(i=this._getOrReturnCtx(t,i),ye(i,{code:se.invalid_string,validation:{startsWith:s.value},message:s.message}),n.dirty()):s.kind==="endsWith"?t.data.endsWith(s.value)||(i=this._getOrReturnCtx(t,i),ye(i,{code:se.invalid_string,validation:{endsWith:s.value},message:s.message}),n.dirty()):s.kind==="datetime"?bX(s).test(t.data)||(i=this._getOrReturnCtx(t,i),ye(i,{code:se.invalid_string,validation:"datetime",message:s.message}),n.dirty()):s.kind==="ip"?SX(t.data,s.version)||(i=this._getOrReturnCtx(t,i),ye(i,{validation:"ip",code:se.invalid_string,message:s.message}),n.dirty()):_t.assertNever(s);return{status:n.value,value:t.data}}_addCheck(t){return new Eo({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...Ae.errToObj(t)})}url(t){return this._addCheck({kind:"url",...Ae.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...Ae.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...Ae.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...Ae.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...Ae.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...Ae.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...Ae.errToObj(t)})}datetime(t){var r;return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,offset:(r=t==null?void 0:t.offset)!==null&&r!==void 0?r:!1,...Ae.errToObj(t==null?void 0:t.message)})}regex(t,r){return this._addCheck({kind:"regex",regex:t,...Ae.errToObj(r)})}includes(t,r){return this._addCheck({kind:"includes",value:t,position:r==null?void 0:r.position,...Ae.errToObj(r==null?void 0:r.message)})}startsWith(t,r){return this._addCheck({kind:"startsWith",value:t,...Ae.errToObj(r)})}endsWith(t,r){return this._addCheck({kind:"endsWith",value:t,...Ae.errToObj(r)})}min(t,r){return this._addCheck({kind:"min",value:t,...Ae.errToObj(r)})}max(t,r){return this._addCheck({kind:"max",value:t,...Ae.errToObj(r)})}length(t,r){return this._addCheck({kind:"length",value:t,...Ae.errToObj(r)})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get minLength(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxLength(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}}Eo.create=e=>{var t;return new Eo({checks:[],typeName:ze.ZodString,coerce:(t=e==null?void 0:e.coerce)!==null&&t!==void 0?t:!1,...Ye(e)})};function xX(e,t){const r=(e.toString().split(".")[1]||"").length,n=(t.toString().split(".")[1]||"").length,i=r>n?r:n,s=parseInt(e.toFixed(i).replace(".","")),o=parseInt(t.toFixed(i).replace(".",""));return s%o/Math.pow(10,i)}class Jc extends rt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==fe.number){const s=this._getOrReturnCtx(t);return ye(s,{code:se.invalid_type,expected:fe.number,received:s.parsedType}),He}let n;const i=new Fn;for(const s of this._def.checks)s.kind==="int"?_t.isInteger(t.data)||(n=this._getOrReturnCtx(t,n),ye(n,{code:se.invalid_type,expected:"integer",received:"float",message:s.message}),i.dirty()):s.kind==="min"?(s.inclusive?t.data<s.value:t.data<=s.value)&&(n=this._getOrReturnCtx(t,n),ye(n,{code:se.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?t.data>s.value:t.data>=s.value)&&(n=this._getOrReturnCtx(t,n),ye(n,{code:se.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="multipleOf"?xX(t.data,s.value)!==0&&(n=this._getOrReturnCtx(t,n),ye(n,{code:se.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):s.kind==="finite"?Number.isFinite(t.data)||(n=this._getOrReturnCtx(t,n),ye(n,{code:se.not_finite,message:s.message}),i.dirty()):_t.assertNever(s);return{status:i.value,value:t.data}}gte(t,r){return this.setLimit("min",t,!0,Ae.toString(r))}gt(t,r){return this.setLimit("min",t,!1,Ae.toString(r))}lte(t,r){return this.setLimit("max",t,!0,Ae.toString(r))}lt(t,r){return this.setLimit("max",t,!1,Ae.toString(r))}setLimit(t,r,n,i){return new Jc({...this._def,checks:[...this._def.checks,{kind:t,value:r,inclusive:n,message:Ae.toString(i)}]})}_addCheck(t){return new Jc({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:Ae.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Ae.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Ae.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Ae.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Ae.toString(t)})}multipleOf(t,r){return this._addCheck({kind:"multipleOf",value:t,message:Ae.toString(r)})}finite(t){return this._addCheck({kind:"finite",message:Ae.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Ae.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Ae.toString(t)})}get minValue(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxValue(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&_t.isInteger(t.value))}get isFinite(){let t=null,r=null;for(const n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(t===null||n.value<t)&&(t=n.value)}return Number.isFinite(r)&&Number.isFinite(t)}}Jc.create=e=>new Jc({checks:[],typeName:ze.ZodNumber,coerce:(e==null?void 0:e.coerce)||!1,...Ye(e)});class Qc extends rt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce&&(t.data=BigInt(t.data)),this._getType(t)!==fe.bigint){const s=this._getOrReturnCtx(t);return ye(s,{code:se.invalid_type,expected:fe.bigint,received:s.parsedType}),He}let n;const i=new Fn;for(const s of this._def.checks)s.kind==="min"?(s.inclusive?t.data<s.value:t.data<=s.value)&&(n=this._getOrReturnCtx(t,n),ye(n,{code:se.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?t.data>s.value:t.data>=s.value)&&(n=this._getOrReturnCtx(t,n),ye(n,{code:se.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="multipleOf"?t.data%s.value!==BigInt(0)&&(n=this._getOrReturnCtx(t,n),ye(n,{code:se.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):_t.assertNever(s);return{status:i.value,value:t.data}}gte(t,r){return this.setLimit("min",t,!0,Ae.toString(r))}gt(t,r){return this.setLimit("min",t,!1,Ae.toString(r))}lte(t,r){return this.setLimit("max",t,!0,Ae.toString(r))}lt(t,r){return this.setLimit("max",t,!1,Ae.toString(r))}setLimit(t,r,n,i){return new Qc({...this._def,checks:[...this._def.checks,{kind:t,value:r,inclusive:n,message:Ae.toString(i)}]})}_addCheck(t){return new Qc({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Ae.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Ae.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Ae.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Ae.toString(t)})}multipleOf(t,r){return this._addCheck({kind:"multipleOf",value:t,message:Ae.toString(r)})}get minValue(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxValue(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}}Qc.create=e=>{var t;return new Qc({checks:[],typeName:ze.ZodBigInt,coerce:(t=e==null?void 0:e.coerce)!==null&&t!==void 0?t:!1,...Ye(e)})};class J0 extends rt{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==fe.boolean){const n=this._getOrReturnCtx(t);return ye(n,{code:se.invalid_type,expected:fe.boolean,received:n.parsedType}),He}return ti(t.data)}}J0.create=e=>new J0({typeName:ze.ZodBoolean,coerce:(e==null?void 0:e.coerce)||!1,...Ye(e)});class Jh extends rt{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==fe.date){const s=this._getOrReturnCtx(t);return ye(s,{code:se.invalid_type,expected:fe.date,received:s.parsedType}),He}if(isNaN(t.data.getTime())){const s=this._getOrReturnCtx(t);return ye(s,{code:se.invalid_date}),He}const n=new Fn;let i;for(const s of this._def.checks)s.kind==="min"?t.data.getTime()<s.value&&(i=this._getOrReturnCtx(t,i),ye(i,{code:se.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),n.dirty()):s.kind==="max"?t.data.getTime()>s.value&&(i=this._getOrReturnCtx(t,i),ye(i,{code:se.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),n.dirty()):_t.assertNever(s);return{status:n.value,value:new Date(t.data.getTime())}}_addCheck(t){return new Jh({...this._def,checks:[...this._def.checks,t]})}min(t,r){return this._addCheck({kind:"min",value:t.getTime(),message:Ae.toString(r)})}max(t,r){return this._addCheck({kind:"max",value:t.getTime(),message:Ae.toString(r)})}get minDate(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t!=null?new Date(t):null}}Jh.create=e=>new Jh({checks:[],coerce:(e==null?void 0:e.coerce)||!1,typeName:ze.ZodDate,...Ye(e)});class Hb extends rt{_parse(t){if(this._getType(t)!==fe.symbol){const n=this._getOrReturnCtx(t);return ye(n,{code:se.invalid_type,expected:fe.symbol,received:n.parsedType}),He}return ti(t.data)}}Hb.create=e=>new Hb({typeName:ze.ZodSymbol,...Ye(e)});class Q0 extends rt{_parse(t){if(this._getType(t)!==fe.undefined){const n=this._getOrReturnCtx(t);return ye(n,{code:se.invalid_type,expected:fe.undefined,received:n.parsedType}),He}return ti(t.data)}}Q0.create=e=>new Q0({typeName:ze.ZodUndefined,...Ye(e)});class Y0 extends rt{_parse(t){if(this._getType(t)!==fe.null){const n=this._getOrReturnCtx(t);return ye(n,{code:se.invalid_type,expected:fe.null,received:n.parsedType}),He}return ti(t.data)}}Y0.create=e=>new Y0({typeName:ze.ZodNull,...Ye(e)});class _m extends rt{constructor(){super(...arguments),this._any=!0}_parse(t){return ti(t.data)}}_m.create=e=>new _m({typeName:ze.ZodAny,...Ye(e)});class Lh extends rt{constructor(){super(...arguments),this._unknown=!0}_parse(t){return ti(t.data)}}Lh.create=e=>new Lh({typeName:ze.ZodUnknown,...Ye(e)});class Wl extends rt{_parse(t){const r=this._getOrReturnCtx(t);return ye(r,{code:se.invalid_type,expected:fe.never,received:r.parsedType}),He}}Wl.create=e=>new Wl({typeName:ze.ZodNever,...Ye(e)});class Zb extends rt{_parse(t){if(this._getType(t)!==fe.undefined){const n=this._getOrReturnCtx(t);return ye(n,{code:se.invalid_type,expected:fe.void,received:n.parsedType}),He}return ti(t.data)}}Zb.create=e=>new Zb({typeName:ze.ZodVoid,...Ye(e)});class Ao extends rt{_parse(t){const{ctx:r,status:n}=this._processInputParams(t),i=this._def;if(r.parsedType!==fe.array)return ye(r,{code:se.invalid_type,expected:fe.array,received:r.parsedType}),He;if(i.exactLength!==null){const o=r.data.length>i.exactLength.value,a=r.data.length<i.exactLength.value;(o||a)&&(ye(r,{code:o?se.too_big:se.too_small,minimum:a?i.exactLength.value:void 0,maximum:o?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),n.dirty())}if(i.minLength!==null&&r.data.length<i.minLength.value&&(ye(r,{code:se.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),n.dirty()),i.maxLength!==null&&r.data.length>i.maxLength.value&&(ye(r,{code:se.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((o,a)=>i.type._parseAsync(new Aa(r,o,r.path,a)))).then(o=>Fn.mergeArray(n,o));const s=[...r.data].map((o,a)=>i.type._parseSync(new Aa(r,o,r.path,a)));return Fn.mergeArray(n,s)}get element(){return this._def.type}min(t,r){return new Ao({...this._def,minLength:{value:t,message:Ae.toString(r)}})}max(t,r){return new Ao({...this._def,maxLength:{value:t,message:Ae.toString(r)}})}length(t,r){return new Ao({...this._def,exactLength:{value:t,message:Ae.toString(r)}})}nonempty(t){return this.min(1,t)}}Ao.create=(e,t)=>new Ao({type:e,minLength:null,maxLength:null,exactLength:null,typeName:ze.ZodArray,...Ye(t)});function zp(e){if(e instanceof hr){const t={};for(const r in e.shape){const n=e.shape[r];t[r]=Al.create(zp(n))}return new hr({...e._def,shape:()=>t})}else return e instanceof Ao?new Ao({...e._def,type:zp(e.element)}):e instanceof Al?Al.create(zp(e.unwrap())):e instanceof Yh?Yh.create(zp(e.unwrap())):e instanceof La?La.create(e.items.map(t=>zp(t))):e}class hr extends rt{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const t=this._def.shape(),r=_t.objectKeys(t);return this._cached={shape:t,keys:r}}_parse(t){if(this._getType(t)!==fe.object){const c=this._getOrReturnCtx(t);return ye(c,{code:se.invalid_type,expected:fe.object,received:c.parsedType}),He}const{status:n,ctx:i}=this._processInputParams(t),{shape:s,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof Wl&&this._def.unknownKeys==="strip"))for(const c in i.data)o.includes(c)||a.push(c);const l=[];for(const c of o){const h=s[c],f=i.data[c];l.push({key:{status:"valid",value:c},value:h._parse(new Aa(i,f,i.path,c)),alwaysSet:c in i.data})}if(this._def.catchall instanceof Wl){const c=this._def.unknownKeys;if(c==="passthrough")for(const h of a)l.push({key:{status:"valid",value:h},value:{status:"valid",value:i.data[h]}});else if(c==="strict")a.length>0&&(ye(i,{code:se.unrecognized_keys,keys:a}),n.dirty());else if(c!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const c=this._def.catchall;for(const h of a){const f=i.data[h];l.push({key:{status:"valid",value:h},value:c._parse(new Aa(i,f,i.path,h)),alwaysSet:h in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const c=[];for(const h of l){const f=await h.key;c.push({key:f,value:await h.value,alwaysSet:h.alwaysSet})}return c}).then(c=>Fn.mergeObjectSync(n,c)):Fn.mergeObjectSync(n,l)}get shape(){return this._def.shape()}strict(t){return Ae.errToObj,new hr({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:(r,n)=>{var i,s,o,a;const l=(o=(s=(i=this._def).errorMap)===null||s===void 0?void 0:s.call(i,r,n).message)!==null&&o!==void 0?o:n.defaultError;return r.code==="unrecognized_keys"?{message:(a=Ae.errToObj(t).message)!==null&&a!==void 0?a:l}:{message:l}}}:{}})}strip(){return new hr({...this._def,unknownKeys:"strip"})}passthrough(){return new hr({...this._def,unknownKeys:"passthrough"})}extend(t){return new hr({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new hr({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:ze.ZodObject})}setKey(t,r){return this.augment({[t]:r})}catchall(t){return new hr({...this._def,catchall:t})}pick(t){const r={};return _t.objectKeys(t).forEach(n=>{t[n]&&this.shape[n]&&(r[n]=this.shape[n])}),new hr({...this._def,shape:()=>r})}omit(t){const r={};return _t.objectKeys(this.shape).forEach(n=>{t[n]||(r[n]=this.shape[n])}),new hr({...this._def,shape:()=>r})}deepPartial(){return zp(this)}partial(t){const r={};return _t.objectKeys(this.shape).forEach(n=>{const i=this.shape[n];t&&!t[n]?r[n]=i:r[n]=i.optional()}),new hr({...this._def,shape:()=>r})}required(t){const r={};return _t.objectKeys(this.shape).forEach(n=>{if(t&&!t[n])r[n]=this.shape[n];else{let s=this.shape[n];for(;s instanceof Al;)s=s._def.innerType;r[n]=s}}),new hr({...this._def,shape:()=>r})}keyof(){return w8(_t.objectKeys(this.shape))}}hr.create=(e,t)=>new hr({shape:()=>e,unknownKeys:"strip",catchall:Wl.create(),typeName:ze.ZodObject,...Ye(t)});hr.strictCreate=(e,t)=>new hr({shape:()=>e,unknownKeys:"strict",catchall:Wl.create(),typeName:ze.ZodObject,...Ye(t)});hr.lazycreate=(e,t)=>new hr({shape:e,unknownKeys:"strip",catchall:Wl.create(),typeName:ze.ZodObject,...Ye(t)});class K0 extends rt{_parse(t){const{ctx:r}=this._processInputParams(t),n=this._def.options;function i(s){for(const a of s)if(a.result.status==="valid")return a.result;for(const a of s)if(a.result.status==="dirty")return r.common.issues.push(...a.ctx.common.issues),a.result;const o=s.map(a=>new Ro(a.ctx.common.issues));return ye(r,{code:se.invalid_union,unionErrors:o}),He}if(r.common.async)return Promise.all(n.map(async s=>{const o={...r,common:{...r.common,issues:[]},parent:null};return{result:await s._parseAsync({data:r.data,path:r.path,parent:o}),ctx:o}})).then(i);{let s;const o=[];for(const l of n){const c={...r,common:{...r.common,issues:[]},parent:null},h=l._parseSync({data:r.data,path:r.path,parent:c});if(h.status==="valid")return h;h.status==="dirty"&&!s&&(s={result:h,ctx:c}),c.common.issues.length&&o.push(c.common.issues)}if(s)return r.common.issues.push(...s.ctx.common.issues),s.result;const a=o.map(l=>new Ro(l));return ye(r,{code:se.invalid_union,unionErrors:a}),He}}get options(){return this._def.options}}K0.create=(e,t)=>new K0({options:e,typeName:ze.ZodUnion,...Ye(t)});const d_=e=>e instanceof tv?d_(e.schema):e instanceof zo?d_(e.innerType()):e instanceof rv?[e.value]:e instanceof Yc?e.options:e instanceof nv?Object.keys(e.enum):e instanceof iv?d_(e._def.innerType):e instanceof Q0?[void 0]:e instanceof Y0?[null]:null;class zx extends rt{_parse(t){const{ctx:r}=this._processInputParams(t);if(r.parsedType!==fe.object)return ye(r,{code:se.invalid_type,expected:fe.object,received:r.parsedType}),He;const n=this.discriminator,i=r.data[n],s=this.optionsMap.get(i);return s?r.common.async?s._parseAsync({data:r.data,path:r.path,parent:r}):s._parseSync({data:r.data,path:r.path,parent:r}):(ye(r,{code:se.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),He)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(t,r,n){const i=new Map;for(const s of r){const o=d_(s.shape[t]);if(!o)throw new Error(`A discriminator value for key \`${t}\` could not be extracted from all schema options`);for(const a of o){if(i.has(a))throw new Error(`Discriminator property ${String(t)} has duplicate value ${String(a)}`);i.set(a,s)}}return new zx({typeName:ze.ZodDiscriminatedUnion,discriminator:t,options:r,optionsMap:i,...Ye(n)})}}function YE(e,t){const r=wc(e),n=wc(t);if(e===t)return{valid:!0,data:e};if(r===fe.object&&n===fe.object){const i=_t.objectKeys(t),s=_t.objectKeys(e).filter(a=>i.indexOf(a)!==-1),o={...e,...t};for(const a of s){const l=YE(e[a],t[a]);if(!l.valid)return{valid:!1};o[a]=l.data}return{valid:!0,data:o}}else if(r===fe.array&&n===fe.array){if(e.length!==t.length)return{valid:!1};const i=[];for(let s=0;s<e.length;s++){const o=e[s],a=t[s],l=YE(o,a);if(!l.valid)return{valid:!1};i.push(l.data)}return{valid:!0,data:i}}else return r===fe.date&&n===fe.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}class X0 extends rt{_parse(t){const{status:r,ctx:n}=this._processInputParams(t),i=(s,o)=>{if(JE(s)||JE(o))return He;const a=YE(s.value,o.value);return a.valid?((QE(s)||QE(o))&&r.dirty(),{status:r.value,value:a.data}):(ye(n,{code:se.invalid_intersection_types}),He)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([s,o])=>i(s,o)):i(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}X0.create=(e,t,r)=>new X0({left:e,right:t,typeName:ze.ZodIntersection,...Ye(r)});class La extends rt{_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==fe.array)return ye(n,{code:se.invalid_type,expected:fe.array,received:n.parsedType}),He;if(n.data.length<this._def.items.length)return ye(n,{code:se.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),He;!this._def.rest&&n.data.length>this._def.items.length&&(ye(n,{code:se.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());const s=[...n.data].map((o,a)=>{const l=this._def.items[a]||this._def.rest;return l?l._parse(new Aa(n,o,n.path,a)):null}).filter(o=>!!o);return n.common.async?Promise.all(s).then(o=>Fn.mergeArray(r,o)):Fn.mergeArray(r,s)}get items(){return this._def.items}rest(t){return new La({...this._def,rest:t})}}La.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new La({items:e,typeName:ze.ZodTuple,rest:null,...Ye(t)})};class ev extends rt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==fe.object)return ye(n,{code:se.invalid_type,expected:fe.object,received:n.parsedType}),He;const i=[],s=this._def.keyType,o=this._def.valueType;for(const a in n.data)i.push({key:s._parse(new Aa(n,a,n.path,a)),value:o._parse(new Aa(n,n.data[a],n.path,a))});return n.common.async?Fn.mergeObjectAsync(r,i):Fn.mergeObjectSync(r,i)}get element(){return this._def.valueType}static create(t,r,n){return r instanceof rt?new ev({keyType:t,valueType:r,typeName:ze.ZodRecord,...Ye(n)}):new ev({keyType:Eo.create(),valueType:t,typeName:ze.ZodRecord,...Ye(r)})}}class Jb extends rt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==fe.map)return ye(n,{code:se.invalid_type,expected:fe.map,received:n.parsedType}),He;const i=this._def.keyType,s=this._def.valueType,o=[...n.data.entries()].map(([a,l],c)=>({key:i._parse(new Aa(n,a,n.path,[c,"key"])),value:s._parse(new Aa(n,l,n.path,[c,"value"]))}));if(n.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const l of o){const c=await l.key,h=await l.value;if(c.status==="aborted"||h.status==="aborted")return He;(c.status==="dirty"||h.status==="dirty")&&r.dirty(),a.set(c.value,h.value)}return{status:r.value,value:a}})}else{const a=new Map;for(const l of o){const c=l.key,h=l.value;if(c.status==="aborted"||h.status==="aborted")return He;(c.status==="dirty"||h.status==="dirty")&&r.dirty(),a.set(c.value,h.value)}return{status:r.value,value:a}}}}Jb.create=(e,t,r)=>new Jb({valueType:t,keyType:e,typeName:ze.ZodMap,...Ye(r)});class Qh extends rt{_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==fe.set)return ye(n,{code:se.invalid_type,expected:fe.set,received:n.parsedType}),He;const i=this._def;i.minSize!==null&&n.data.size<i.minSize.value&&(ye(n,{code:se.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),r.dirty()),i.maxSize!==null&&n.data.size>i.maxSize.value&&(ye(n,{code:se.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),r.dirty());const s=this._def.valueType;function o(l){const c=new Set;for(const h of l){if(h.status==="aborted")return He;h.status==="dirty"&&r.dirty(),c.add(h.value)}return{status:r.value,value:c}}const a=[...n.data.values()].map((l,c)=>s._parse(new Aa(n,l,n.path,c)));return n.common.async?Promise.all(a).then(l=>o(l)):o(a)}min(t,r){return new Qh({...this._def,minSize:{value:t,message:Ae.toString(r)}})}max(t,r){return new Qh({...this._def,maxSize:{value:t,message:Ae.toString(r)}})}size(t,r){return this.min(t,r).max(t,r)}nonempty(t){return this.min(1,t)}}Qh.create=(e,t)=>new Qh({valueType:e,minSize:null,maxSize:null,typeName:ze.ZodSet,...Ye(t)});class Yf extends rt{constructor(){super(...arguments),this.validate=this.implement}_parse(t){const{ctx:r}=this._processInputParams(t);if(r.parsedType!==fe.function)return ye(r,{code:se.invalid_type,expected:fe.function,received:r.parsedType}),He;function n(a,l){return qb({data:a,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,Bb(),H0].filter(c=>!!c),issueData:{code:se.invalid_arguments,argumentsError:l}})}function i(a,l){return qb({data:a,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,Bb(),H0].filter(c=>!!c),issueData:{code:se.invalid_return_type,returnTypeError:l}})}const s={errorMap:r.common.contextualErrorMap},o=r.data;if(this._def.returns instanceof bm){const a=this;return ti(async function(...l){const c=new Ro([]),h=await a._def.args.parseAsync(l,s).catch(y=>{throw c.addIssue(n(l,y)),c}),f=await Reflect.apply(o,this,h);return await a._def.returns._def.type.parseAsync(f,s).catch(y=>{throw c.addIssue(i(f,y)),c})})}else{const a=this;return ti(function(...l){const c=a._def.args.safeParse(l,s);if(!c.success)throw new Ro([n(l,c.error)]);const h=Reflect.apply(o,this,c.data),f=a._def.returns.safeParse(h,s);if(!f.success)throw new Ro([i(h,f.error)]);return f.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...t){return new Yf({...this._def,args:La.create(t).rest(Lh.create())})}returns(t){return new Yf({...this._def,returns:t})}implement(t){return this.parse(t)}strictImplement(t){return this.parse(t)}static create(t,r,n){return new Yf({args:t||La.create([]).rest(Lh.create()),returns:r||Lh.create(),typeName:ze.ZodFunction,...Ye(n)})}}class tv extends rt{get schema(){return this._def.getter()}_parse(t){const{ctx:r}=this._processInputParams(t);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}}tv.create=(e,t)=>new tv({getter:e,typeName:ze.ZodLazy,...Ye(t)});class rv extends rt{_parse(t){if(t.data!==this._def.value){const r=this._getOrReturnCtx(t);return ye(r,{received:r.data,code:se.invalid_literal,expected:this._def.value}),He}return{status:"valid",value:t.data}}get value(){return this._def.value}}rv.create=(e,t)=>new rv({value:e,typeName:ze.ZodLiteral,...Ye(t)});function w8(e,t){return new Yc({values:e,typeName:ze.ZodEnum,...Ye(t)})}class Yc extends rt{_parse(t){if(typeof t.data!="string"){const r=this._getOrReturnCtx(t),n=this._def.values;return ye(r,{expected:_t.joinValues(n),received:r.parsedType,code:se.invalid_type}),He}if(this._def.values.indexOf(t.data)===-1){const r=this._getOrReturnCtx(t),n=this._def.values;return ye(r,{received:r.data,code:se.invalid_enum_value,options:n}),He}return ti(t.data)}get options(){return this._def.values}get enum(){const t={};for(const r of this._def.values)t[r]=r;return t}get Values(){const t={};for(const r of this._def.values)t[r]=r;return t}get Enum(){const t={};for(const r of this._def.values)t[r]=r;return t}extract(t){return Yc.create(t)}exclude(t){return Yc.create(this.options.filter(r=>!t.includes(r)))}}Yc.create=w8;class nv extends rt{_parse(t){const r=_t.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(t);if(n.parsedType!==fe.string&&n.parsedType!==fe.number){const i=_t.objectValues(r);return ye(n,{expected:_t.joinValues(i),received:n.parsedType,code:se.invalid_type}),He}if(r.indexOf(t.data)===-1){const i=_t.objectValues(r);return ye(n,{received:n.data,code:se.invalid_enum_value,options:i}),He}return ti(t.data)}get enum(){return this._def.values}}nv.create=(e,t)=>new nv({values:e,typeName:ze.ZodNativeEnum,...Ye(t)});class bm extends rt{unwrap(){return this._def.type}_parse(t){const{ctx:r}=this._processInputParams(t);if(r.parsedType!==fe.promise&&r.common.async===!1)return ye(r,{code:se.invalid_type,expected:fe.promise,received:r.parsedType}),He;const n=r.parsedType===fe.promise?r.data:Promise.resolve(r.data);return ti(n.then(i=>this._def.type.parseAsync(i,{path:r.path,errorMap:r.common.contextualErrorMap})))}}bm.create=(e,t)=>new bm({type:e,typeName:ze.ZodPromise,...Ye(t)});class zo extends rt{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===ze.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){const{status:r,ctx:n}=this._processInputParams(t),i=this._def.effect||null,s={addIssue:o=>{ye(n,o),o.fatal?r.abort():r.dirty()},get path(){return n.path}};if(s.addIssue=s.addIssue.bind(s),i.type==="preprocess"){const o=i.transform(n.data,s);return n.common.issues.length?{status:"dirty",value:n.data}:n.common.async?Promise.resolve(o).then(a=>this._def.schema._parseAsync({data:a,path:n.path,parent:n})):this._def.schema._parseSync({data:o,path:n.path,parent:n})}if(i.type==="refinement"){const o=a=>{const l=i.refinement(a,s);if(n.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(n.common.async===!1){const a=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return a.status==="aborted"?He:(a.status==="dirty"&&r.dirty(),o(a.value),{status:r.value,value:a.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(a=>a.status==="aborted"?He:(a.status==="dirty"&&r.dirty(),o(a.value).then(()=>({status:r.value,value:a.value}))))}if(i.type==="transform")if(n.common.async===!1){const o=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!Z0(o))return o;const a=i.transform(o.value,s);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:a}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(o=>Z0(o)?Promise.resolve(i.transform(o.value,s)).then(a=>({status:r.value,value:a})):o);_t.assertNever(i)}}zo.create=(e,t,r)=>new zo({schema:e,typeName:ze.ZodEffects,effect:t,...Ye(r)});zo.createWithPreprocess=(e,t,r)=>new zo({schema:t,effect:{type:"preprocess",transform:e},typeName:ze.ZodEffects,...Ye(r)});class Al extends rt{_parse(t){return this._getType(t)===fe.undefined?ti(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}Al.create=(e,t)=>new Al({innerType:e,typeName:ze.ZodOptional,...Ye(t)});class Yh extends rt{_parse(t){return this._getType(t)===fe.null?ti(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}Yh.create=(e,t)=>new Yh({innerType:e,typeName:ze.ZodNullable,...Ye(t)});class iv extends rt{_parse(t){const{ctx:r}=this._processInputParams(t);let n=r.data;return r.parsedType===fe.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}}iv.create=(e,t)=>new iv({innerType:e,typeName:ze.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default,...Ye(t)});class Qb extends rt{_parse(t){const{ctx:r}=this._processInputParams(t),n={...r,common:{...r.common,issues:[]}},i=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return Wb(i)?i.then(s=>({status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Ro(n.common.issues)},input:n.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Ro(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}Qb.create=(e,t)=>new Qb({innerType:e,typeName:ze.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch,...Ye(t)});class Yb extends rt{_parse(t){if(this._getType(t)!==fe.nan){const n=this._getOrReturnCtx(t);return ye(n,{code:se.invalid_type,expected:fe.nan,received:n.parsedType}),He}return{status:"valid",value:t.data}}}Yb.create=e=>new Yb({typeName:ze.ZodNaN,...Ye(e)});const $X=Symbol("zod_brand");class _8 extends rt{_parse(t){const{ctx:r}=this._processInputParams(t),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}}class qv extends rt{_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.common.async)return(async()=>{const s=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return s.status==="aborted"?He:s.status==="dirty"?(r.dirty(),v8(s.value)):this._def.out._parseAsync({data:s.value,path:n.path,parent:n})})();{const i=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?He:i.status==="dirty"?(r.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:n.path,parent:n})}}static create(t,r){return new qv({in:t,out:r,typeName:ze.ZodPipeline})}}class Kb extends rt{_parse(t){const r=this._def.innerType._parse(t);return Z0(r)&&(r.value=Object.freeze(r.value)),r}}Kb.create=(e,t)=>new Kb({innerType:e,typeName:ze.ZodReadonly,...Ye(t)});const b8=(e,t={},r)=>e?_m.create().superRefine((n,i)=>{var s,o;if(!e(n)){const a=typeof t=="function"?t(n):typeof t=="string"?{message:t}:t,l=(o=(s=a.fatal)!==null&&s!==void 0?s:r)!==null&&o!==void 0?o:!0,c=typeof a=="string"?{message:a}:a;i.addIssue({code:"custom",...c,fatal:l})}}):_m.create(),TX={object:hr.lazycreate};var ze;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})(ze||(ze={}));const EX=(e,t={message:`Input not instance of ${e.name}`})=>b8(r=>r instanceof e,t),S8=Eo.create,x8=Jc.create,MX=Yb.create,IX=Qc.create,$8=J0.create,CX=Jh.create,kX=Hb.create,PX=Q0.create,OX=Y0.create,RX=_m.create,AX=Lh.create,LX=Wl.create,NX=Zb.create,DX=Ao.create,FX=hr.create,jX=hr.strictCreate,VX=K0.create,zX=zx.create,UX=X0.create,GX=La.create,BX=ev.create,qX=Jb.create,WX=Qh.create,HX=Yf.create,ZX=tv.create,JX=rv.create,QX=Yc.create,YX=nv.create,KX=bm.create,_L=zo.create,XX=Al.create,eee=Yh.create,tee=zo.createWithPreprocess,ree=qv.create,nee=()=>S8().optional(),iee=()=>x8().optional(),see=()=>$8().optional(),oee={string:e=>Eo.create({...e,coerce:!0}),number:e=>Jc.create({...e,coerce:!0}),boolean:e=>J0.create({...e,coerce:!0}),bigint:e=>Qc.create({...e,coerce:!0}),date:e=>Jh.create({...e,coerce:!0})},aee=He;var qe=Object.freeze({__proto__:null,defaultErrorMap:H0,setErrorMap:dX,getErrorMap:Bb,makeIssue:qb,EMPTY_PATH:hX,addIssueToContext:ye,ParseStatus:Fn,INVALID:He,DIRTY:v8,OK:ti,isAborted:JE,isDirty:QE,isValid:Z0,isAsync:Wb,get util(){return _t},get objectUtil(){return ZE},ZodParsedType:fe,getParsedType:wc,ZodType:rt,ZodString:Eo,ZodNumber:Jc,ZodBigInt:Qc,ZodBoolean:J0,ZodDate:Jh,ZodSymbol:Hb,ZodUndefined:Q0,ZodNull:Y0,ZodAny:_m,ZodUnknown:Lh,ZodNever:Wl,ZodVoid:Zb,ZodArray:Ao,ZodObject:hr,ZodUnion:K0,ZodDiscriminatedUnion:zx,ZodIntersection:X0,ZodTuple:La,ZodRecord:ev,ZodMap:Jb,ZodSet:Qh,ZodFunction:Yf,ZodLazy:tv,ZodLiteral:rv,ZodEnum:Yc,ZodNativeEnum:nv,ZodPromise:bm,ZodEffects:zo,ZodTransformer:zo,ZodOptional:Al,ZodNullable:Yh,ZodDefault:iv,ZodCatch:Qb,ZodNaN:Yb,BRAND:$X,ZodBranded:_8,ZodPipeline:qv,ZodReadonly:Kb,custom:b8,Schema:rt,ZodSchema:rt,late:TX,get ZodFirstPartyTypeKind(){return ze},coerce:oee,any:RX,array:DX,bigint:IX,boolean:$8,date:CX,discriminatedUnion:zX,effect:_L,enum:QX,function:HX,instanceof:EX,intersection:UX,lazy:ZX,literal:JX,map:qX,nan:MX,nativeEnum:YX,never:LX,null:OX,nullable:eee,number:x8,object:FX,oboolean:see,onumber:iee,optional:XX,ostring:nee,pipeline:ree,preprocess:tee,promise:KX,record:BX,set:WX,strictObject:jX,string:S8,symbol:kX,transformer:_L,tuple:GX,undefined:PX,union:VX,unknown:AX,void:NX,NEVER:aee,ZodIssueCode:se,quotelessJson:cX,ZodError:Ro});const lO="https://ccog.colorado.edu/geosamples-api/api",uO=qe.object({id:qe.number(),facility:qe.string(),facility_code:qe.string()}),lee=uO.extend({sample_count:qe.number(),facility_comment:qe.string().optional(),inst_code:qe.string().optional(),addr1:qe.string().optional(),addr2:qe.string().optional(),addr3:qe.string().optional(),addr4:qe.string().optional(),contact1:qe.string().optional(),contact2:qe.string().optional(),contact3:qe.string().optional(),email_link:qe.string().optional(),url_link:qe.string().optional(),ftp_link:qe.string().optional(),other_link:qe.string().optional()}),uee=qe.object({items:qe.array(uO),page:qe.number(),total_pages:qe.number(),total_items:qe.number(),items_per_page:qe.number()});async function T8(e){const t=new URLSearchParams(e);t.delete("repository"),t.set("items_per_page","500"),console.log("repository filters: ",t.toString());const r=await fetch(`${lO}/repositories/name?${t.toString()}`);if(!r.ok)throw new Error(r.statusText);const n=await r.json();return uee.parse(n),n.items}async function cee(e){const t=await fetch(`${lO}/repositories/detail/${e}`);if(!t.ok)throw new Error(t.statusText);const r=await t.json();return lee.parse(r),r}async function E8(e){const t=await fetch(`${lO}/repositories/name?repository=${e}`);if(t.status!==200)throw new Error(t.status.toString());const r=await t.json();if(r.items.length!==1)throw new Error("invalid facility code");return r.items[0]}const M8=e=>({queryKey:["repositories","detail",e],queryFn:async()=>cee(e)}),dee=e=>async t=>{const{repositoryId:r}=t.params;if(!r)throw new Error("repositoryId argument required");const n=parseInt(r);if(isNaN(n))throw new Error("repositoryId must be a number");const i=M8(n);return await e.ensureQueryData(i)};async function hee(){return{repositories:await T8(new URLSearchParams)}}/*! @license DOMPurify 3.0.5 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.0.5/LICENSE */const{entries:I8,setPrototypeOf:bL,isFrozen:pee,getPrototypeOf:fee,getOwnPropertyDescriptor:mee}=Object;let{freeze:ri,seal:Uo,create:yee}=Object,{apply:KE,construct:XE}=typeof Reflect<"u"&&Reflect;KE||(KE=function(t,r,n){return t.apply(r,n)});ri||(ri=function(t){return t});Uo||(Uo=function(t){return t});XE||(XE=function(t,r){return new t(...r)});const gee=js(Array.prototype.forEach),SL=js(Array.prototype.pop),Ty=js(Array.prototype.push),h_=js(String.prototype.toLowerCase),b$=js(String.prototype.toString),vee=js(String.prototype.match),Zs=js(String.prototype.replace),wee=js(String.prototype.indexOf),_ee=js(String.prototype.trim),Ri=js(RegExp.prototype.test),Ey=bee(TypeError);function js(e){return function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return KE(e,t,n)}}function bee(e){return function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return XE(e,r)}}function et(e,t,r){var n;r=(n=r)!==null&&n!==void 0?n:h_,bL&&bL(e,null);let i=t.length;for(;i--;){let s=t[i];if(typeof s=="string"){const o=r(s);o!==s&&(pee(t)||(t[i]=o),s=o)}e[s]=!0}return e}function Cp(e){const t=yee(null);for(const[r,n]of I8(e))t[r]=n;return t}function q1(e,t){for(;e!==null;){const n=mee(e,t);if(n){if(n.get)return js(n.get);if(typeof n.value=="function")return js(n.value)}e=fee(e)}function r(n){return console.warn("fallback value for",n),null}return r}const xL=ri(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),S$=ri(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),x$=ri(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),See=ri(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),$$=ri(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),xee=ri(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),$L=ri(["#text"]),TL=ri(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),T$=ri(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),EL=ri(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),W1=ri(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),$ee=Uo(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Tee=Uo(/<%[\w\W]*|[\w\W]*%>/gm),Eee=Uo(/\${[\w\W]*}/gm),Mee=Uo(/^data-[\-\w.\u00B7-\uFFFF]/),Iee=Uo(/^aria-[\-\w]+$/),C8=Uo(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Cee=Uo(/^(?:\w+script|data):/i),kee=Uo(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),k8=Uo(/^html$/i);var ML=Object.freeze({__proto__:null,MUSTACHE_EXPR:$ee,ERB_EXPR:Tee,TMPLIT_EXPR:Eee,DATA_ATTR:Mee,ARIA_ATTR:Iee,IS_ALLOWED_URI:C8,IS_SCRIPT_OR_DATA:Cee,ATTR_WHITESPACE:kee,DOCTYPE_NAME:k8});const Pee=()=>typeof window>"u"?null:window,Oee=function(t,r){if(typeof t!="object"||typeof t.createPolicy!="function")return null;let n=null;const i="data-tt-policy-suffix";r&&r.hasAttribute(i)&&(n=r.getAttribute(i));const s="dompurify"+(n?"#"+n:"");try{return t.createPolicy(s,{createHTML(o){return o},createScriptURL(o){return o}})}catch{return console.warn("TrustedTypes policy "+s+" could not be created."),null}};function P8(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Pee();const t=_e=>P8(_e);if(t.version="3.0.5",t.removed=[],!e||!e.document||e.document.nodeType!==9)return t.isSupported=!1,t;const r=e.document,n=r.currentScript;let{document:i}=e;const{DocumentFragment:s,HTMLTemplateElement:o,Node:a,Element:l,NodeFilter:c,NamedNodeMap:h=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:f,DOMParser:m,trustedTypes:y}=e,g=l.prototype,v=q1(g,"cloneNode"),w=q1(g,"nextSibling"),b=q1(g,"childNodes"),S=q1(g,"parentNode");if(typeof o=="function"){const _e=i.createElement("template");_e.content&&_e.content.ownerDocument&&(i=_e.content.ownerDocument)}let _,x="";const{implementation:T,createNodeIterator:I,createDocumentFragment:C,getElementsByTagName:O}=i,{importNode:W}=r;let z={};t.isSupported=typeof I8=="function"&&typeof S=="function"&&T&&T.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:ne,ERB_EXPR:K,TMPLIT_EXPR:xe,DATA_ATTR:le,ARIA_ATTR:B,IS_SCRIPT_OR_DATA:it,ATTR_WHITESPACE:Ge}=ML;let{IS_ALLOWED_URI:H}=ML,oe=null;const Ne=et({},[...xL,...S$,...x$,...$$,...$L]);let je=null;const Nt=et({},[...TL,...T$,...EL,...W1]);let pt=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),ut=null,fn=null,zn=!0,Ii=!0,Ci=!1,Ep=!0,Xo=!1,rs=!1,vd=!1,wd=!1,ea=!1,ns=!1,Ha=!1,du=!0,Za=!1;const _d="user-content-";let oi=!0,ta=!1,Gs={},Bs=null;const Mp=et({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let hu=null;const ra=et({},["audio","video","img","source","image","track"]);let Un=null;const pu=et({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),fu="http://www.w3.org/1998/Math/MathML",Ja="http://www.w3.org/2000/svg",ki="http://www.w3.org/1999/xhtml";let qs=ki,bd=!1,j=null;const U=et({},[fu,Ja,ki],b$);let J;const me=["application/xhtml+xml","text/html"],Ue="text/html";let ge,Oe=null;const Pe=i.createElement("form"),Se=function(R){return R instanceof RegExp||R instanceof Function},gt=function(R){if(!(Oe&&Oe===R)){if((!R||typeof R!="object")&&(R={}),R=Cp(R),J=me.indexOf(R.PARSER_MEDIA_TYPE)===-1?J=Ue:J=R.PARSER_MEDIA_TYPE,ge=J==="application/xhtml+xml"?b$:h_,oe="ALLOWED_TAGS"in R?et({},R.ALLOWED_TAGS,ge):Ne,je="ALLOWED_ATTR"in R?et({},R.ALLOWED_ATTR,ge):Nt,j="ALLOWED_NAMESPACES"in R?et({},R.ALLOWED_NAMESPACES,b$):U,Un="ADD_URI_SAFE_ATTR"in R?et(Cp(pu),R.ADD_URI_SAFE_ATTR,ge):pu,hu="ADD_DATA_URI_TAGS"in R?et(Cp(ra),R.ADD_DATA_URI_TAGS,ge):ra,Bs="FORBID_CONTENTS"in R?et({},R.FORBID_CONTENTS,ge):Mp,ut="FORBID_TAGS"in R?et({},R.FORBID_TAGS,ge):{},fn="FORBID_ATTR"in R?et({},R.FORBID_ATTR,ge):{},Gs="USE_PROFILES"in R?R.USE_PROFILES:!1,zn=R.ALLOW_ARIA_ATTR!==!1,Ii=R.ALLOW_DATA_ATTR!==!1,Ci=R.ALLOW_UNKNOWN_PROTOCOLS||!1,Ep=R.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Xo=R.SAFE_FOR_TEMPLATES||!1,rs=R.WHOLE_DOCUMENT||!1,ea=R.RETURN_DOM||!1,ns=R.RETURN_DOM_FRAGMENT||!1,Ha=R.RETURN_TRUSTED_TYPE||!1,wd=R.FORCE_BODY||!1,du=R.SANITIZE_DOM!==!1,Za=R.SANITIZE_NAMED_PROPS||!1,oi=R.KEEP_CONTENT!==!1,ta=R.IN_PLACE||!1,H=R.ALLOWED_URI_REGEXP||C8,qs=R.NAMESPACE||ki,pt=R.CUSTOM_ELEMENT_HANDLING||{},R.CUSTOM_ELEMENT_HANDLING&&Se(R.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(pt.tagNameCheck=R.CUSTOM_ELEMENT_HANDLING.tagNameCheck),R.CUSTOM_ELEMENT_HANDLING&&Se(R.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(pt.attributeNameCheck=R.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),R.CUSTOM_ELEMENT_HANDLING&&typeof R.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(pt.allowCustomizedBuiltInElements=R.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Xo&&(Ii=!1),ns&&(ea=!0),Gs&&(oe=et({},[...$L]),je=[],Gs.html===!0&&(et(oe,xL),et(je,TL)),Gs.svg===!0&&(et(oe,S$),et(je,T$),et(je,W1)),Gs.svgFilters===!0&&(et(oe,x$),et(je,T$),et(je,W1)),Gs.mathMl===!0&&(et(oe,$$),et(je,EL),et(je,W1))),R.ADD_TAGS&&(oe===Ne&&(oe=Cp(oe)),et(oe,R.ADD_TAGS,ge)),R.ADD_ATTR&&(je===Nt&&(je=Cp(je)),et(je,R.ADD_ATTR,ge)),R.ADD_URI_SAFE_ATTR&&et(Un,R.ADD_URI_SAFE_ATTR,ge),R.FORBID_CONTENTS&&(Bs===Mp&&(Bs=Cp(Bs)),et(Bs,R.FORBID_CONTENTS,ge)),oi&&(oe["#text"]=!0),rs&&et(oe,["html","head","body"]),oe.table&&(et(oe,["tbody"]),delete ut.tbody),R.TRUSTED_TYPES_POLICY){if(typeof R.TRUSTED_TYPES_POLICY.createHTML!="function")throw Ey('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof R.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Ey('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');_=R.TRUSTED_TYPES_POLICY,x=_.createHTML("")}else _===void 0&&(_=Oee(y,n)),_!==null&&typeof x=="string"&&(x=_.createHTML(""));ri&&ri(R),Oe=R}},st=et({},["mi","mo","mn","ms","mtext"]),tn=et({},["foreignobject","desc","title","annotation-xml"]),wr=et({},["title","style","font","a","script"]),Tr=et({},S$);et(Tr,x$),et(Tr,See);const xn=et({},$$);et(xn,xee);const Qa=function(R){let X=S(R);(!X||!X.tagName)&&(X={namespaceURI:qs,tagName:"template"});const de=h_(R.tagName),he=h_(X.tagName);return j[R.namespaceURI]?R.namespaceURI===Ja?X.namespaceURI===ki?de==="svg":X.namespaceURI===fu?de==="svg"&&(he==="annotation-xml"||st[he]):!!Tr[de]:R.namespaceURI===fu?X.namespaceURI===ki?de==="math":X.namespaceURI===Ja?de==="math"&&tn[he]:!!xn[de]:R.namespaceURI===ki?X.namespaceURI===Ja&&!tn[he]||X.namespaceURI===fu&&!st[he]?!1:!xn[de]&&(wr[de]||!Tr[de]):!!(J==="application/xhtml+xml"&&j[R.namespaceURI]):!1},Pi=function(R){Ty(t.removed,{element:R});try{R.parentNode.removeChild(R)}catch{R.remove()}},na=function(R,X){try{Ty(t.removed,{attribute:X.getAttributeNode(R),from:X})}catch{Ty(t.removed,{attribute:null,from:X})}if(X.removeAttribute(R),R==="is"&&!je[R])if(ea||ns)try{Pi(X)}catch{}else try{X.setAttribute(R,"")}catch{}},ai=function(R){let X,de;if(wd)R="<remove></remove>"+R;else{const Gn=vee(R,/^[\r\n\t ]+/);de=Gn&&Gn[0]}J==="application/xhtml+xml"&&qs===ki&&(R='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+R+"</body></html>");const he=_?_.createHTML(R):R;if(qs===ki)try{X=new m().parseFromString(he,J)}catch{}if(!X||!X.documentElement){X=T.createDocument(qs,"template",null);try{X.documentElement.innerHTML=bd?x:he}catch{}}const Or=X.body||X.documentElement;return R&&de&&Or.insertBefore(i.createTextNode(de),Or.childNodes[0]||null),qs===ki?O.call(X,rs?"html":"body")[0]:rs?X.documentElement:Or},L=function(R){return I.call(R.ownerDocument||R,R,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT,null,!1)},Mt=function(R){return R instanceof f&&(typeof R.nodeName!="string"||typeof R.textContent!="string"||typeof R.removeChild!="function"||!(R.attributes instanceof h)||typeof R.removeAttribute!="function"||typeof R.setAttribute!="function"||typeof R.namespaceURI!="string"||typeof R.insertBefore!="function"||typeof R.hasChildNodes!="function")},Oi=function(R){return typeof a=="object"?R instanceof a:R&&typeof R=="object"&&typeof R.nodeType=="number"&&typeof R.nodeName=="string"},tr=function(R,X,de){z[R]&&gee(z[R],he=>{he.call(t,X,de,Oe)})},Ws=function(R){let X;if(tr("beforeSanitizeElements",R,null),Mt(R))return Pi(R),!0;const de=ge(R.nodeName);if(tr("uponSanitizeElement",R,{tagName:de,allowedTags:oe}),R.hasChildNodes()&&!Oi(R.firstElementChild)&&(!Oi(R.content)||!Oi(R.content.firstElementChild))&&Ri(/<[/\w]/g,R.innerHTML)&&Ri(/<[/\w]/g,R.textContent))return Pi(R),!0;if(!oe[de]||ut[de]){if(!ut[de]&&Pr(de)&&(pt.tagNameCheck instanceof RegExp&&Ri(pt.tagNameCheck,de)||pt.tagNameCheck instanceof Function&&pt.tagNameCheck(de)))return!1;if(oi&&!Bs[de]){const he=S(R)||R.parentNode,Or=b(R)||R.childNodes;if(Or&&he){const Gn=Or.length;for(let Ht=Gn-1;Ht>=0;--Ht)he.insertBefore(v(Or[Ht],!0),w(R))}}return Pi(R),!0}return R instanceof l&&!Qa(R)||(de==="noscript"||de==="noembed"||de==="noframes")&&Ri(/<\/no(script|embed|frames)/i,R.innerHTML)?(Pi(R),!0):(Xo&&R.nodeType===3&&(X=R.textContent,X=Zs(X,ne," "),X=Zs(X,K," "),X=Zs(X,xe," "),R.textContent!==X&&(Ty(t.removed,{element:R.cloneNode()}),R.textContent=X)),tr("afterSanitizeElements",R,null),!1)},te=function(R,X,de){if(du&&(X==="id"||X==="name")&&(de in i||de in Pe))return!1;if(!(Ii&&!fn[X]&&Ri(le,X))){if(!(zn&&Ri(B,X))){if(!je[X]||fn[X]){if(!(Pr(R)&&(pt.tagNameCheck instanceof RegExp&&Ri(pt.tagNameCheck,R)||pt.tagNameCheck instanceof Function&&pt.tagNameCheck(R))&&(pt.attributeNameCheck instanceof RegExp&&Ri(pt.attributeNameCheck,X)||pt.attributeNameCheck instanceof Function&&pt.attributeNameCheck(X))||X==="is"&&pt.allowCustomizedBuiltInElements&&(pt.tagNameCheck instanceof RegExp&&Ri(pt.tagNameCheck,de)||pt.tagNameCheck instanceof Function&&pt.tagNameCheck(de))))return!1}else if(!Un[X]){if(!Ri(H,Zs(de,Ge,""))){if(!((X==="src"||X==="xlink:href"||X==="href")&&R!=="script"&&wee(de,"data:")===0&&hu[R])){if(!(Ci&&!Ri(it,Zs(de,Ge,"")))){if(de)return!1}}}}}}return!0},Pr=function(R){return R.indexOf("-")>0},Dt=function(R){let X,de,he,Or;tr("beforeSanitizeAttributes",R,null);const{attributes:Gn}=R;if(!Gn)return;const Ht={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:je};for(Or=Gn.length;Or--;){X=Gn[Or];const{name:is,namespaceURI:Sd}=X;if(de=is==="value"?X.value:_ee(X.value),he=ge(is),Ht.attrName=he,Ht.attrValue=de,Ht.keepAttr=!0,Ht.forceKeepAttr=void 0,tr("uponSanitizeAttribute",R,Ht),de=Ht.attrValue,Ht.forceKeepAttr||(na(is,R),!Ht.keepAttr))continue;if(!Ep&&Ri(/\/>/i,de)){na(is,R);continue}Xo&&(de=Zs(de,ne," "),de=Zs(de,K," "),de=Zs(de,xe," "));const x1=ge(R.nodeName);if(te(x1,he,de)){if(Za&&(he==="id"||he==="name")&&(na(is,R),de=_d+de),_&&typeof y=="object"&&typeof y.getAttributeType=="function"&&!Sd)switch(y.getAttributeType(x1,he)){case"TrustedHTML":{de=_.createHTML(de);break}case"TrustedScriptURL":{de=_.createScriptURL(de);break}}try{Sd?R.setAttributeNS(Sd,is,de):R.setAttribute(is,de),SL(t.removed)}catch{}}}tr("afterSanitizeAttributes",R,null)},Wt=function _e(R){let X;const de=L(R);for(tr("beforeSanitizeShadowDOM",R,null);X=de.nextNode();)tr("uponSanitizeShadowNode",X,null),!Ws(X)&&(X.content instanceof s&&_e(X.content),Dt(X));tr("afterSanitizeShadowDOM",R,null)};return t.sanitize=function(_e){let R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},X,de,he,Or;if(bd=!_e,bd&&(_e="<!-->"),typeof _e!="string"&&!Oi(_e))if(typeof _e.toString=="function"){if(_e=_e.toString(),typeof _e!="string")throw Ey("dirty is not a string, aborting")}else throw Ey("toString is not a function");if(!t.isSupported)return _e;if(vd||gt(R),t.removed=[],typeof _e=="string"&&(ta=!1),ta){if(_e.nodeName){const is=ge(_e.nodeName);if(!oe[is]||ut[is])throw Ey("root node is forbidden and cannot be sanitized in-place")}}else if(_e instanceof a)X=ai("<!---->"),de=X.ownerDocument.importNode(_e,!0),de.nodeType===1&&de.nodeName==="BODY"||de.nodeName==="HTML"?X=de:X.appendChild(de);else{if(!ea&&!Xo&&!rs&&_e.indexOf("<")===-1)return _&&Ha?_.createHTML(_e):_e;if(X=ai(_e),!X)return ea?null:Ha?x:""}X&&wd&&Pi(X.firstChild);const Gn=L(ta?_e:X);for(;he=Gn.nextNode();)Ws(he)||(he.content instanceof s&&Wt(he.content),Dt(he));if(ta)return _e;if(ea){if(ns)for(Or=C.call(X.ownerDocument);X.firstChild;)Or.appendChild(X.firstChild);else Or=X;return(je.shadowroot||je.shadowrootmode)&&(Or=W.call(r,Or,!0)),Or}let Ht=rs?X.outerHTML:X.innerHTML;return rs&&oe["!doctype"]&&X.ownerDocument&&X.ownerDocument.doctype&&X.ownerDocument.doctype.name&&Ri(k8,X.ownerDocument.doctype.name)&&(Ht="<!DOCTYPE "+X.ownerDocument.doctype.name+`>
`+Ht),Xo&&(Ht=Zs(Ht,ne," "),Ht=Zs(Ht,K," "),Ht=Zs(Ht,xe," ")),_&&Ha?_.createHTML(Ht):Ht},t.setConfig=function(_e){gt(_e),vd=!0},t.clearConfig=function(){Oe=null,vd=!1},t.isValidAttribute=function(_e,R,X){Oe||gt({});const de=ge(_e),he=ge(R);return te(de,he,X)},t.addHook=function(_e,R){typeof R=="function"&&(z[_e]=z[_e]||[],Ty(z[_e],R))},t.removeHook=function(_e){if(z[_e])return SL(z[_e])},t.removeHooks=function(_e){z[_e]&&(z[_e]=[])},t.removeAllHooks=function(){z={}},t}var Ree=P8();class Um{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){const r={listener:t};return this.listeners.add(r),this.onSubscribe(),()=>{this.listeners.delete(r),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}}const sv=typeof window>"u"||"Deno"in window;function bs(){}function Aee(e,t){return typeof e=="function"?e(t):e}function eM(e){return typeof e=="number"&&e>=0&&e!==1/0}function IL(e,t){return e.filter(r=>!t.includes(r))}function Lee(e,t,r){const n=e.slice(0);return n[t]=r,n}function O8(e,t){return Math.max(e+(t||0)-Date.now(),0)}function Lf(e,t,r){return Ux(e)?typeof t=="function"?{...r,queryKey:e,queryFn:t}:{...t,queryKey:e}:e}function ac(e,t,r){return Ux(e)?[{...t,queryKey:e},r]:[e||{},t]}function CL(e,t){const{type:r="all",exact:n,fetchStatus:i,predicate:s,queryKey:o,stale:a}=e;if(Ux(o)){if(n){if(t.queryHash!==cO(o,t.options))return!1}else if(!Xb(t.queryKey,o))return!1}if(r!=="all"){const l=t.isActive();if(r==="active"&&!l||r==="inactive"&&l)return!1}return!(typeof a=="boolean"&&t.isStale()!==a||typeof i<"u"&&i!==t.state.fetchStatus||s&&!s(t))}function kL(e,t){const{exact:r,fetching:n,predicate:i,mutationKey:s}=e;if(Ux(s)){if(!t.options.mutationKey)return!1;if(r){if(Eh(t.options.mutationKey)!==Eh(s))return!1}else if(!Xb(t.options.mutationKey,s))return!1}return!(typeof n=="boolean"&&t.state.status==="loading"!==n||i&&!i(t))}function cO(e,t){return((t==null?void 0:t.queryKeyHashFn)||Eh)(e)}function Eh(e){return JSON.stringify(e,(t,r)=>tM(r)?Object.keys(r).sort().reduce((n,i)=>(n[i]=r[i],n),{}):r)}function Xb(e,t){return R8(e,t)}function R8(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?!Object.keys(t).some(r=>!R8(e[r],t[r])):!1}function A8(e,t){if(e===t)return e;const r=OL(e)&&OL(t);if(r||tM(e)&&tM(t)){const n=r?e.length:Object.keys(e).length,i=r?t:Object.keys(t),s=i.length,o=r?[]:{};let a=0;for(let l=0;l<s;l++){const c=r?l:i[l];o[c]=A8(e[c],t[c]),o[c]===e[c]&&a++}return n===s&&a===n?e:o}return t}function PL(e,t){if(e&&!t||t&&!e)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}function OL(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function tM(e){if(!RL(e))return!1;const t=e.constructor;if(typeof t>"u")return!0;const r=t.prototype;return!(!RL(r)||!r.hasOwnProperty("isPrototypeOf"))}function RL(e){return Object.prototype.toString.call(e)==="[object Object]"}function Ux(e){return Array.isArray(e)}function L8(e){return new Promise(t=>{setTimeout(t,e)})}function AL(e){L8(0).then(e)}function Nee(){if(typeof AbortController=="function")return new AbortController}function rM(e,t,r){return r.isDataEqual!=null&&r.isDataEqual(e,t)?e:typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?A8(e,t):t}class Dee extends Um{constructor(){super(),this.setup=t=>{if(!sv&&window.addEventListener){const r=()=>t();return window.addEventListener("visibilitychange",r,!1),window.addEventListener("focus",r,!1),()=>{window.removeEventListener("visibilitychange",r),window.removeEventListener("focus",r)}}}}onSubscribe(){this.cleanup||this.setEventListener(this.setup)}onUnsubscribe(){if(!this.hasListeners()){var t;(t=this.cleanup)==null||t.call(this),this.cleanup=void 0}}setEventListener(t){var r;this.setup=t,(r=this.cleanup)==null||r.call(this),this.cleanup=t(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()})}setFocused(t){this.focused=t,t&&this.onFocus()}onFocus(){this.listeners.forEach(({listener:t})=>{t()})}isFocused(){return typeof this.focused=="boolean"?this.focused:typeof document>"u"?!0:[void 0,"visible","prerender"].includes(document.visibilityState)}}const eS=new Dee,LL=["online","offline"];class Fee extends Um{constructor(){super(),this.setup=t=>{if(!sv&&window.addEventListener){const r=()=>t();return LL.forEach(n=>{window.addEventListener(n,r,!1)}),()=>{LL.forEach(n=>{window.removeEventListener(n,r)})}}}}onSubscribe(){this.cleanup||this.setEventListener(this.setup)}onUnsubscribe(){if(!this.hasListeners()){var t;(t=this.cleanup)==null||t.call(this),this.cleanup=void 0}}setEventListener(t){var r;this.setup=t,(r=this.cleanup)==null||r.call(this),this.cleanup=t(n=>{typeof n=="boolean"?this.setOnline(n):this.onOnline()})}setOnline(t){this.online=t,t&&this.onOnline()}onOnline(){this.listeners.forEach(({listener:t})=>{t()})}isOnline(){return typeof this.online=="boolean"?this.online:typeof navigator>"u"||typeof navigator.onLine>"u"?!0:navigator.onLine}}const tS=new Fee;function jee(e){return Math.min(1e3*2**e,3e4)}function Gx(e){return(e??"online")==="online"?tS.isOnline():!0}class N8{constructor(t){this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}}function p_(e){return e instanceof N8}function D8(e){let t=!1,r=0,n=!1,i,s,o;const a=new Promise((w,b)=>{s=w,o=b}),l=w=>{n||(y(new N8(w)),e.abort==null||e.abort())},c=()=>{t=!0},h=()=>{t=!1},f=()=>!eS.isFocused()||e.networkMode!=="always"&&!tS.isOnline(),m=w=>{n||(n=!0,e.onSuccess==null||e.onSuccess(w),i==null||i(),s(w))},y=w=>{n||(n=!0,e.onError==null||e.onError(w),i==null||i(),o(w))},g=()=>new Promise(w=>{i=b=>{const S=n||!f();return S&&w(b),S},e.onPause==null||e.onPause()}).then(()=>{i=void 0,n||e.onContinue==null||e.onContinue()}),v=()=>{if(n)return;let w;try{w=e.fn()}catch(b){w=Promise.reject(b)}Promise.resolve(w).then(m).catch(b=>{var S,_;if(n)return;const x=(S=e.retry)!=null?S:3,T=(_=e.retryDelay)!=null?_:jee,I=typeof T=="function"?T(r,b):T,C=x===!0||typeof x=="number"&&r<x||typeof x=="function"&&x(r,b);if(t||!C){y(b);return}r++,e.onFail==null||e.onFail(r,b),L8(I).then(()=>{if(f())return g()}).then(()=>{t?y(b):v()})})};return Gx(e.networkMode)?v():g().then(v),{promise:a,cancel:l,continue:()=>(i==null?void 0:i())?a:Promise.resolve(),cancelRetry:c,continueRetry:h}}const dO=console;function Vee(){let e=[],t=0,r=h=>{h()},n=h=>{h()};const i=h=>{let f;t++;try{f=h()}finally{t--,t||a()}return f},s=h=>{t?e.push(h):AL(()=>{r(h)})},o=h=>(...f)=>{s(()=>{h(...f)})},a=()=>{const h=e;e=[],h.length&&AL(()=>{n(()=>{h.forEach(f=>{r(f)})})})};return{batch:i,batchCalls:o,schedule:s,setNotifyFunction:h=>{r=h},setBatchNotifyFunction:h=>{n=h}}}const fr=Vee();class F8{destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),eM(this.cacheTime)&&(this.gcTimeout=setTimeout(()=>{this.optionalRemove()},this.cacheTime))}updateCacheTime(t){this.cacheTime=Math.max(this.cacheTime||0,t??(sv?1/0:5*60*1e3))}clearGcTimeout(){this.gcTimeout&&(clearTimeout(this.gcTimeout),this.gcTimeout=void 0)}}class zee extends F8{constructor(t){super(),this.abortSignalConsumed=!1,this.defaultOptions=t.defaultOptions,this.setOptions(t.options),this.observers=[],this.cache=t.cache,this.logger=t.logger||dO,this.queryKey=t.queryKey,this.queryHash=t.queryHash,this.initialState=t.state||Uee(this.options),this.state=this.initialState,this.scheduleGc()}get meta(){return this.options.meta}setOptions(t){this.options={...this.defaultOptions,...t},this.updateCacheTime(this.options.cacheTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.cache.remove(this)}setData(t,r){const n=rM(this.state.data,t,this.options);return this.dispatch({data:n,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),n}setState(t,r){this.dispatch({type:"setState",state:t,setStateOptions:r})}cancel(t){var r;const n=this.promise;return(r=this.retryer)==null||r.cancel(t),n?n.then(bs).catch(bs):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.initialState)}isActive(){return this.observers.some(t=>t.options.enabled!==!1)}isDisabled(){return this.getObserversCount()>0&&!this.isActive()}isStale(){return this.state.isInvalidated||!this.state.dataUpdatedAt||this.observers.some(t=>t.getCurrentResult().isStale)}isStaleByTime(t=0){return this.state.isInvalidated||!this.state.dataUpdatedAt||!O8(this.state.dataUpdatedAt,t)}onFocus(){var t;const r=this.observers.find(n=>n.shouldFetchOnWindowFocus());r&&r.refetch({cancelRefetch:!1}),(t=this.retryer)==null||t.continue()}onOnline(){var t;const r=this.observers.find(n=>n.shouldFetchOnReconnect());r&&r.refetch({cancelRefetch:!1}),(t=this.retryer)==null||t.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),this.cache.notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||(this.retryer&&(this.abortSignalConsumed?this.retryer.cancel({revert:!0}):this.retryer.cancelRetry()),this.scheduleGc()),this.cache.notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.dispatch({type:"invalidate"})}fetch(t,r){var n,i;if(this.state.fetchStatus!=="idle"){if(this.state.dataUpdatedAt&&r!=null&&r.cancelRefetch)this.cancel({silent:!0});else if(this.promise){var s;return(s=this.retryer)==null||s.continueRetry(),this.promise}}if(t&&this.setOptions(t),!this.options.queryFn){const y=this.observers.find(g=>g.options.queryFn);y&&this.setOptions(y.options)}Array.isArray(this.options.queryKey);const o=Nee(),a={queryKey:this.queryKey,pageParam:void 0,meta:this.meta},l=y=>{Object.defineProperty(y,"signal",{enumerable:!0,get:()=>{if(o)return this.abortSignalConsumed=!0,o.signal}})};l(a);const c=()=>this.options.queryFn?(this.abortSignalConsumed=!1,this.options.queryFn(a)):Promise.reject("Missing queryFn for queryKey '"+this.options.queryHash+"'"),h={fetchOptions:r,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:c};if(l(h),(n=this.options.behavior)==null||n.onFetch(h),this.revertState=this.state,this.state.fetchStatus==="idle"||this.state.fetchMeta!==((i=h.fetchOptions)==null?void 0:i.meta)){var f;this.dispatch({type:"fetch",meta:(f=h.fetchOptions)==null?void 0:f.meta})}const m=y=>{if(p_(y)&&y.silent||this.dispatch({type:"error",error:y}),!p_(y)){var g,v,w,b;(g=(v=this.cache.config).onError)==null||g.call(v,y,this),(w=(b=this.cache.config).onSettled)==null||w.call(b,this.state.data,y,this)}this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1};return this.retryer=D8({fn:h.fetchFn,abort:o==null?void 0:o.abort.bind(o),onSuccess:y=>{var g,v,w,b;if(typeof y>"u"){m(new Error(this.queryHash+" data is undefined"));return}this.setData(y),(g=(v=this.cache.config).onSuccess)==null||g.call(v,y,this),(w=(b=this.cache.config).onSettled)==null||w.call(b,y,this.state.error,this),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1},onError:m,onFail:(y,g)=>{this.dispatch({type:"failed",failureCount:y,error:g})},onPause:()=>{this.dispatch({type:"pause"})},onContinue:()=>{this.dispatch({type:"continue"})},retry:h.options.retry,retryDelay:h.options.retryDelay,networkMode:h.options.networkMode}),this.promise=this.retryer.promise,this.promise}dispatch(t){const r=n=>{var i,s;switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:(i=t.meta)!=null?i:null,fetchStatus:Gx(this.options.networkMode)?"fetching":"paused",...!n.dataUpdatedAt&&{error:null,status:"loading"}};case"success":return{...n,data:t.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:(s=t.dataUpdatedAt)!=null?s:Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const o=t.error;return p_(o)&&o.revert&&this.revertState?{...this.revertState}:{...n,error:o,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:o,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=r(this.state),fr.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate(t)}),this.cache.notify({query:this,type:"updated",action:t})})}}function Uee(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=typeof t<"u",n=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"loading",fetchStatus:"idle"}}class Gee extends Um{constructor(t){super(),this.config=t||{},this.queries=[],this.queriesMap={}}build(t,r,n){var i;const s=r.queryKey,o=(i=r.queryHash)!=null?i:cO(s,r);let a=this.get(o);return a||(a=new zee({cache:this,logger:t.getLogger(),queryKey:s,queryHash:o,options:t.defaultQueryOptions(r),state:n,defaultOptions:t.getQueryDefaults(s)}),this.add(a)),a}add(t){this.queriesMap[t.queryHash]||(this.queriesMap[t.queryHash]=t,this.queries.push(t),this.notify({type:"added",query:t}))}remove(t){const r=this.queriesMap[t.queryHash];r&&(t.destroy(),this.queries=this.queries.filter(n=>n!==t),r===t&&delete this.queriesMap[t.queryHash],this.notify({type:"removed",query:t}))}clear(){fr.batch(()=>{this.queries.forEach(t=>{this.remove(t)})})}get(t){return this.queriesMap[t]}getAll(){return this.queries}find(t,r){const[n]=ac(t,r);return typeof n.exact>"u"&&(n.exact=!0),this.queries.find(i=>CL(n,i))}findAll(t,r){const[n]=ac(t,r);return Object.keys(n).length>0?this.queries.filter(i=>CL(n,i)):this.queries}notify(t){fr.batch(()=>{this.listeners.forEach(({listener:r})=>{r(t)})})}onFocus(){fr.batch(()=>{this.queries.forEach(t=>{t.onFocus()})})}onOnline(){fr.batch(()=>{this.queries.forEach(t=>{t.onOnline()})})}}class Bee extends F8{constructor(t){super(),this.defaultOptions=t.defaultOptions,this.mutationId=t.mutationId,this.mutationCache=t.mutationCache,this.logger=t.logger||dO,this.observers=[],this.state=t.state||qee(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options={...this.defaultOptions,...t},this.updateCacheTime(this.options.cacheTime)}get meta(){return this.options.meta}setState(t){this.dispatch({type:"setState",state:t})}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),this.mutationCache.notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){this.observers=this.observers.filter(r=>r!==t),this.scheduleGc(),this.mutationCache.notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){this.observers.length||(this.state.status==="loading"?this.scheduleGc():this.mutationCache.remove(this))}continue(){var t,r;return(t=(r=this.retryer)==null?void 0:r.continue())!=null?t:this.execute()}async execute(){const t=()=>{var C;return this.retryer=D8({fn:()=>this.options.mutationFn?this.options.mutationFn(this.state.variables):Promise.reject("No mutationFn found"),onFail:(O,W)=>{this.dispatch({type:"failed",failureCount:O,error:W})},onPause:()=>{this.dispatch({type:"pause"})},onContinue:()=>{this.dispatch({type:"continue"})},retry:(C=this.options.retry)!=null?C:0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode}),this.retryer.promise},r=this.state.status==="loading";try{var n,i,s,o,a,l,c,h;if(!r){var f,m,y,g;this.dispatch({type:"loading",variables:this.options.variables}),await((f=(m=this.mutationCache.config).onMutate)==null?void 0:f.call(m,this.state.variables,this));const O=await((y=(g=this.options).onMutate)==null?void 0:y.call(g,this.state.variables));O!==this.state.context&&this.dispatch({type:"loading",context:O,variables:this.state.variables})}const C=await t();return await((n=(i=this.mutationCache.config).onSuccess)==null?void 0:n.call(i,C,this.state.variables,this.state.context,this)),await((s=(o=this.options).onSuccess)==null?void 0:s.call(o,C,this.state.variables,this.state.context)),await((a=(l=this.mutationCache.config).onSettled)==null?void 0:a.call(l,C,null,this.state.variables,this.state.context,this)),await((c=(h=this.options).onSettled)==null?void 0:c.call(h,C,null,this.state.variables,this.state.context)),this.dispatch({type:"success",data:C}),C}catch(C){try{var v,w,b,S,_,x,T,I;throw await((v=(w=this.mutationCache.config).onError)==null?void 0:v.call(w,C,this.state.variables,this.state.context,this)),await((b=(S=this.options).onError)==null?void 0:b.call(S,C,this.state.variables,this.state.context)),await((_=(x=this.mutationCache.config).onSettled)==null?void 0:_.call(x,void 0,C,this.state.variables,this.state.context,this)),await((T=(I=this.options).onSettled)==null?void 0:T.call(I,void 0,C,this.state.variables,this.state.context)),C}finally{this.dispatch({type:"error",error:C})}}}dispatch(t){const r=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"loading":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:!Gx(this.options.networkMode),status:"loading",variables:t.variables};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"};case"setState":return{...n,...t.state}}};this.state=r(this.state),fr.batch(()=>{this.observers.forEach(n=>{n.onMutationUpdate(t)}),this.mutationCache.notify({mutation:this,type:"updated",action:t})})}}function qee(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0}}class Wee extends Um{constructor(t){super(),this.config=t||{},this.mutations=[],this.mutationId=0}build(t,r,n){const i=new Bee({mutationCache:this,logger:t.getLogger(),mutationId:++this.mutationId,options:t.defaultMutationOptions(r),state:n,defaultOptions:r.mutationKey?t.getMutationDefaults(r.mutationKey):void 0});return this.add(i),i}add(t){this.mutations.push(t),this.notify({type:"added",mutation:t})}remove(t){this.mutations=this.mutations.filter(r=>r!==t),this.notify({type:"removed",mutation:t})}clear(){fr.batch(()=>{this.mutations.forEach(t=>{this.remove(t)})})}getAll(){return this.mutations}find(t){return typeof t.exact>"u"&&(t.exact=!0),this.mutations.find(r=>kL(t,r))}findAll(t){return this.mutations.filter(r=>kL(t,r))}notify(t){fr.batch(()=>{this.listeners.forEach(({listener:r})=>{r(t)})})}resumePausedMutations(){var t;return this.resuming=((t=this.resuming)!=null?t:Promise.resolve()).then(()=>{const r=this.mutations.filter(n=>n.state.isPaused);return fr.batch(()=>r.reduce((n,i)=>n.then(()=>i.continue().catch(bs)),Promise.resolve()))}).then(()=>{this.resuming=void 0}),this.resuming}}function nM(){return{onFetch:e=>{e.fetchFn=()=>{var t,r,n,i,s,o;const a=(t=e.fetchOptions)==null||(r=t.meta)==null?void 0:r.refetchPage,l=(n=e.fetchOptions)==null||(i=n.meta)==null?void 0:i.fetchMore,c=l==null?void 0:l.pageParam,h=(l==null?void 0:l.direction)==="forward",f=(l==null?void 0:l.direction)==="backward",m=((s=e.state.data)==null?void 0:s.pages)||[],y=((o=e.state.data)==null?void 0:o.pageParams)||[];let g=y,v=!1;const w=I=>{Object.defineProperty(I,"signal",{enumerable:!0,get:()=>{var C;if((C=e.signal)!=null&&C.aborted)v=!0;else{var O;(O=e.signal)==null||O.addEventListener("abort",()=>{v=!0})}return e.signal}})},b=e.options.queryFn||(()=>Promise.reject("Missing queryFn for queryKey '"+e.options.queryHash+"'")),S=(I,C,O,W)=>(g=W?[C,...g]:[...g,C],W?[O,...I]:[...I,O]),_=(I,C,O,W)=>{if(v)return Promise.reject("Cancelled");if(typeof O>"u"&&!C&&I.length)return Promise.resolve(I);const z={queryKey:e.queryKey,pageParam:O,meta:e.options.meta};w(z);const ne=b(z);return Promise.resolve(ne).then(xe=>S(I,O,xe,W))};let x;if(!m.length)x=_([]);else if(h){const I=typeof c<"u",C=I?c:iM(e.options,m);x=_(m,I,C)}else if(f){const I=typeof c<"u",C=I?c:j8(e.options,m);x=_(m,I,C,!0)}else{g=[];const I=typeof e.options.getNextPageParam>"u";x=(a&&m[0]?a(m[0],0,m):!0)?_([],I,y[0]):Promise.resolve(S([],y[0],m[0]));for(let O=1;O<m.length;O++)x=x.then(W=>{if(a&&m[O]?a(m[O],O,m):!0){const ne=I?y[O]:iM(e.options,W);return _(W,I,ne)}return Promise.resolve(S(W,y[O],m[O]))})}return x.then(I=>({pages:I,pageParams:g}))}}}}function iM(e,t){return e.getNextPageParam==null?void 0:e.getNextPageParam(t[t.length-1],t)}function j8(e,t){return e.getPreviousPageParam==null?void 0:e.getPreviousPageParam(t[0],t)}function Hee(e,t){if(e.getNextPageParam&&Array.isArray(t)){const r=iM(e,t);return typeof r<"u"&&r!==null&&r!==!1}}function Zee(e,t){if(e.getPreviousPageParam&&Array.isArray(t)){const r=j8(e,t);return typeof r<"u"&&r!==null&&r!==!1}}class Jee{constructor(t={}){this.queryCache=t.queryCache||new Gee,this.mutationCache=t.mutationCache||new Wee,this.logger=t.logger||dO,this.defaultOptions=t.defaultOptions||{},this.queryDefaults=[],this.mutationDefaults=[],this.mountCount=0}mount(){this.mountCount++,this.mountCount===1&&(this.unsubscribeFocus=eS.subscribe(()=>{eS.isFocused()&&(this.resumePausedMutations(),this.queryCache.onFocus())}),this.unsubscribeOnline=tS.subscribe(()=>{tS.isOnline()&&(this.resumePausedMutations(),this.queryCache.onOnline())}))}unmount(){var t,r;this.mountCount--,this.mountCount===0&&((t=this.unsubscribeFocus)==null||t.call(this),this.unsubscribeFocus=void 0,(r=this.unsubscribeOnline)==null||r.call(this),this.unsubscribeOnline=void 0)}isFetching(t,r){const[n]=ac(t,r);return n.fetchStatus="fetching",this.queryCache.findAll(n).length}isMutating(t){return this.mutationCache.findAll({...t,fetching:!0}).length}getQueryData(t,r){var n;return(n=this.queryCache.find(t,r))==null?void 0:n.state.data}ensureQueryData(t,r,n){const i=Lf(t,r,n),s=this.getQueryData(i.queryKey);return s?Promise.resolve(s):this.fetchQuery(i)}getQueriesData(t){return this.getQueryCache().findAll(t).map(({queryKey:r,state:n})=>{const i=n.data;return[r,i]})}setQueryData(t,r,n){const i=this.queryCache.find(t),s=i==null?void 0:i.state.data,o=Aee(r,s);if(typeof o>"u")return;const a=Lf(t),l=this.defaultQueryOptions(a);return this.queryCache.build(this,l).setData(o,{...n,manual:!0})}setQueriesData(t,r,n){return fr.batch(()=>this.getQueryCache().findAll(t).map(({queryKey:i})=>[i,this.setQueryData(i,r,n)]))}getQueryState(t,r){var n;return(n=this.queryCache.find(t,r))==null?void 0:n.state}removeQueries(t,r){const[n]=ac(t,r),i=this.queryCache;fr.batch(()=>{i.findAll(n).forEach(s=>{i.remove(s)})})}resetQueries(t,r,n){const[i,s]=ac(t,r,n),o=this.queryCache,a={type:"active",...i};return fr.batch(()=>(o.findAll(i).forEach(l=>{l.reset()}),this.refetchQueries(a,s)))}cancelQueries(t,r,n){const[i,s={}]=ac(t,r,n);typeof s.revert>"u"&&(s.revert=!0);const o=fr.batch(()=>this.queryCache.findAll(i).map(a=>a.cancel(s)));return Promise.all(o).then(bs).catch(bs)}invalidateQueries(t,r,n){const[i,s]=ac(t,r,n);return fr.batch(()=>{var o,a;if(this.queryCache.findAll(i).forEach(c=>{c.invalidate()}),i.refetchType==="none")return Promise.resolve();const l={...i,type:(o=(a=i.refetchType)!=null?a:i.type)!=null?o:"active"};return this.refetchQueries(l,s)})}refetchQueries(t,r,n){const[i,s]=ac(t,r,n),o=fr.batch(()=>this.queryCache.findAll(i).filter(l=>!l.isDisabled()).map(l=>{var c;return l.fetch(void 0,{...s,cancelRefetch:(c=s==null?void 0:s.cancelRefetch)!=null?c:!0,meta:{refetchPage:i.refetchPage}})}));let a=Promise.all(o).then(bs);return s!=null&&s.throwOnError||(a=a.catch(bs)),a}fetchQuery(t,r,n){const i=Lf(t,r,n),s=this.defaultQueryOptions(i);typeof s.retry>"u"&&(s.retry=!1);const o=this.queryCache.build(this,s);return o.isStaleByTime(s.staleTime)?o.fetch(s):Promise.resolve(o.state.data)}prefetchQuery(t,r,n){return this.fetchQuery(t,r,n).then(bs).catch(bs)}fetchInfiniteQuery(t,r,n){const i=Lf(t,r,n);return i.behavior=nM(),this.fetchQuery(i)}prefetchInfiniteQuery(t,r,n){return this.fetchInfiniteQuery(t,r,n).then(bs).catch(bs)}resumePausedMutations(){return this.mutationCache.resumePausedMutations()}getQueryCache(){return this.queryCache}getMutationCache(){return this.mutationCache}getLogger(){return this.logger}getDefaultOptions(){return this.defaultOptions}setDefaultOptions(t){this.defaultOptions=t}setQueryDefaults(t,r){const n=this.queryDefaults.find(i=>Eh(t)===Eh(i.queryKey));n?n.defaultOptions=r:this.queryDefaults.push({queryKey:t,defaultOptions:r})}getQueryDefaults(t){if(!t)return;const r=this.queryDefaults.find(n=>Xb(t,n.queryKey));return r==null?void 0:r.defaultOptions}setMutationDefaults(t,r){const n=this.mutationDefaults.find(i=>Eh(t)===Eh(i.mutationKey));n?n.defaultOptions=r:this.mutationDefaults.push({mutationKey:t,defaultOptions:r})}getMutationDefaults(t){if(!t)return;const r=this.mutationDefaults.find(n=>Xb(t,n.mutationKey));return r==null?void 0:r.defaultOptions}defaultQueryOptions(t){if(t!=null&&t._defaulted)return t;const r={...this.defaultOptions.queries,...this.getQueryDefaults(t==null?void 0:t.queryKey),...t,_defaulted:!0};return!r.queryHash&&r.queryKey&&(r.queryHash=cO(r.queryKey,r)),typeof r.refetchOnReconnect>"u"&&(r.refetchOnReconnect=r.networkMode!=="always"),typeof r.useErrorBoundary>"u"&&(r.useErrorBoundary=!!r.suspense),r}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...this.defaultOptions.mutations,...this.getMutationDefaults(t==null?void 0:t.mutationKey),...t,_defaulted:!0}}clear(){this.queryCache.clear(),this.mutationCache.clear()}}class hO extends Um{constructor(t,r){super(),this.client=t,this.options=r,this.trackedProps=new Set,this.selectError=null,this.bindMethods(),this.setOptions(r)}bindMethods(){this.remove=this.remove.bind(this),this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.currentQuery.addObserver(this),NL(this.currentQuery,this.options)&&this.executeFetch(),this.updateTimers())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return sM(this.currentQuery,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return sM(this.currentQuery,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.clearStaleTimeout(),this.clearRefetchInterval(),this.currentQuery.removeObserver(this)}setOptions(t,r){const n=this.options,i=this.currentQuery;if(this.options=this.client.defaultQueryOptions(t),PL(n,this.options)||this.client.getQueryCache().notify({type:"observerOptionsUpdated",query:this.currentQuery,observer:this}),typeof this.options.enabled<"u"&&typeof this.options.enabled!="boolean")throw new Error("Expected enabled to be a boolean");this.options.queryKey||(this.options.queryKey=n.queryKey),this.updateQuery();const s=this.hasListeners();s&&DL(this.currentQuery,i,this.options,n)&&this.executeFetch(),this.updateResult(r),s&&(this.currentQuery!==i||this.options.enabled!==n.enabled||this.options.staleTime!==n.staleTime)&&this.updateStaleTimeout();const o=this.computeRefetchInterval();s&&(this.currentQuery!==i||this.options.enabled!==n.enabled||o!==this.currentRefetchInterval)&&this.updateRefetchInterval(o)}getOptimisticResult(t){const r=this.client.getQueryCache().build(this.client,t);return this.createResult(r,t)}getCurrentResult(){return this.currentResult}trackResult(t){const r={};return Object.keys(t).forEach(n=>{Object.defineProperty(r,n,{configurable:!1,enumerable:!0,get:()=>(this.trackedProps.add(n),t[n])})}),r}getCurrentQuery(){return this.currentQuery}remove(){this.client.getQueryCache().remove(this.currentQuery)}refetch({refetchPage:t,...r}={}){return this.fetch({...r,meta:{refetchPage:t}})}fetchOptimistic(t){const r=this.client.defaultQueryOptions(t),n=this.client.getQueryCache().build(this.client,r);return n.isFetchingOptimistic=!0,n.fetch().then(()=>this.createResult(n,r))}fetch(t){var r;return this.executeFetch({...t,cancelRefetch:(r=t.cancelRefetch)!=null?r:!0}).then(()=>(this.updateResult(),this.currentResult))}executeFetch(t){this.updateQuery();let r=this.currentQuery.fetch(this.options,t);return t!=null&&t.throwOnError||(r=r.catch(bs)),r}updateStaleTimeout(){if(this.clearStaleTimeout(),sv||this.currentResult.isStale||!eM(this.options.staleTime))return;const r=O8(this.currentResult.dataUpdatedAt,this.options.staleTime)+1;this.staleTimeoutId=setTimeout(()=>{this.currentResult.isStale||this.updateResult()},r)}computeRefetchInterval(){var t;return typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.currentResult.data,this.currentQuery):(t=this.options.refetchInterval)!=null?t:!1}updateRefetchInterval(t){this.clearRefetchInterval(),this.currentRefetchInterval=t,!(sv||this.options.enabled===!1||!eM(this.currentRefetchInterval)||this.currentRefetchInterval===0)&&(this.refetchIntervalId=setInterval(()=>{(this.options.refetchIntervalInBackground||eS.isFocused())&&this.executeFetch()},this.currentRefetchInterval))}updateTimers(){this.updateStaleTimeout(),this.updateRefetchInterval(this.computeRefetchInterval())}clearStaleTimeout(){this.staleTimeoutId&&(clearTimeout(this.staleTimeoutId),this.staleTimeoutId=void 0)}clearRefetchInterval(){this.refetchIntervalId&&(clearInterval(this.refetchIntervalId),this.refetchIntervalId=void 0)}createResult(t,r){const n=this.currentQuery,i=this.options,s=this.currentResult,o=this.currentResultState,a=this.currentResultOptions,l=t!==n,c=l?t.state:this.currentQueryInitialState,h=l?this.currentResult:this.previousQueryResult,{state:f}=t;let{dataUpdatedAt:m,error:y,errorUpdatedAt:g,fetchStatus:v,status:w}=f,b=!1,S=!1,_;if(r._optimisticResults){const O=this.hasListeners(),W=!O&&NL(t,r),z=O&&DL(t,n,r,i);(W||z)&&(v=Gx(t.options.networkMode)?"fetching":"paused",m||(w="loading")),r._optimisticResults==="isRestoring"&&(v="idle")}if(r.keepPreviousData&&!f.dataUpdatedAt&&h!=null&&h.isSuccess&&w!=="error")_=h.data,m=h.dataUpdatedAt,w=h.status,b=!0;else if(r.select&&typeof f.data<"u")if(s&&f.data===(o==null?void 0:o.data)&&r.select===this.selectFn)_=this.selectResult;else try{this.selectFn=r.select,_=r.select(f.data),_=rM(s==null?void 0:s.data,_,r),this.selectResult=_,this.selectError=null}catch(O){this.selectError=O}else _=f.data;if(typeof r.placeholderData<"u"&&typeof _>"u"&&w==="loading"){let O;if(s!=null&&s.isPlaceholderData&&r.placeholderData===(a==null?void 0:a.placeholderData))O=s.data;else if(O=typeof r.placeholderData=="function"?r.placeholderData():r.placeholderData,r.select&&typeof O<"u")try{O=r.select(O),this.selectError=null}catch(W){this.selectError=W}typeof O<"u"&&(w="success",_=rM(s==null?void 0:s.data,O,r),S=!0)}this.selectError&&(y=this.selectError,_=this.selectResult,g=Date.now(),w="error");const x=v==="fetching",T=w==="loading",I=w==="error";return{status:w,fetchStatus:v,isLoading:T,isSuccess:w==="success",isError:I,isInitialLoading:T&&x,data:_,dataUpdatedAt:m,error:y,errorUpdatedAt:g,failureCount:f.fetchFailureCount,failureReason:f.fetchFailureReason,errorUpdateCount:f.errorUpdateCount,isFetched:f.dataUpdateCount>0||f.errorUpdateCount>0,isFetchedAfterMount:f.dataUpdateCount>c.dataUpdateCount||f.errorUpdateCount>c.errorUpdateCount,isFetching:x,isRefetching:x&&!T,isLoadingError:I&&f.dataUpdatedAt===0,isPaused:v==="paused",isPlaceholderData:S,isPreviousData:b,isRefetchError:I&&f.dataUpdatedAt!==0,isStale:pO(t,r),refetch:this.refetch,remove:this.remove}}updateResult(t){const r=this.currentResult,n=this.createResult(this.currentQuery,this.options);if(this.currentResultState=this.currentQuery.state,this.currentResultOptions=this.options,PL(n,r))return;this.currentResult=n;const i={cache:!0},s=()=>{if(!r)return!0;const{notifyOnChangeProps:o}=this.options;if(o==="all"||!o&&!this.trackedProps.size)return!0;const a=new Set(o??this.trackedProps);return this.options.useErrorBoundary&&a.add("error"),Object.keys(this.currentResult).some(l=>{const c=l;return this.currentResult[c]!==r[c]&&a.has(c)})};(t==null?void 0:t.listeners)!==!1&&s()&&(i.listeners=!0),this.notify({...i,...t})}updateQuery(){const t=this.client.getQueryCache().build(this.client,this.options);if(t===this.currentQuery)return;const r=this.currentQuery;this.currentQuery=t,this.currentQueryInitialState=t.state,this.previousQueryResult=this.currentResult,this.hasListeners()&&(r==null||r.removeObserver(this),t.addObserver(this))}onQueryUpdate(t){const r={};t.type==="success"?r.onSuccess=!t.manual:t.type==="error"&&!p_(t.error)&&(r.onError=!0),this.updateResult(r),this.hasListeners()&&this.updateTimers()}notify(t){fr.batch(()=>{if(t.onSuccess){var r,n,i,s;(r=(n=this.options).onSuccess)==null||r.call(n,this.currentResult.data),(i=(s=this.options).onSettled)==null||i.call(s,this.currentResult.data,null)}else if(t.onError){var o,a,l,c;(o=(a=this.options).onError)==null||o.call(a,this.currentResult.error),(l=(c=this.options).onSettled)==null||l.call(c,void 0,this.currentResult.error)}t.listeners&&this.listeners.forEach(({listener:h})=>{h(this.currentResult)}),t.cache&&this.client.getQueryCache().notify({query:this.currentQuery,type:"observerResultsUpdated"})})}}function Qee(e,t){return t.enabled!==!1&&!e.state.dataUpdatedAt&&!(e.state.status==="error"&&t.retryOnMount===!1)}function NL(e,t){return Qee(e,t)||e.state.dataUpdatedAt>0&&sM(e,t,t.refetchOnMount)}function sM(e,t,r){if(t.enabled!==!1){const n=typeof r=="function"?r(e):r;return n==="always"||n!==!1&&pO(e,t)}return!1}function DL(e,t,r,n){return r.enabled!==!1&&(e!==t||n.enabled===!1)&&(!r.suspense||e.state.status!=="error")&&pO(e,r)}function pO(e,t){return e.isStaleByTime(t.staleTime)}class Yee extends Um{constructor(t,r){super(),this.client=t,this.queries=[],this.result=[],this.observers=[],this.observersMap={},r&&this.setQueries(r)}onSubscribe(){this.listeners.size===1&&this.observers.forEach(t=>{t.subscribe(r=>{this.onUpdate(t,r)})})}onUnsubscribe(){this.listeners.size||this.destroy()}destroy(){this.listeners=new Set,this.observers.forEach(t=>{t.destroy()})}setQueries(t,r){this.queries=t,fr.batch(()=>{const n=this.observers,i=this.findMatchingObservers(this.queries);i.forEach(c=>c.observer.setOptions(c.defaultedQueryOptions,r));const s=i.map(c=>c.observer),o=Object.fromEntries(s.map(c=>[c.options.queryHash,c])),a=s.map(c=>c.getCurrentResult()),l=s.some((c,h)=>c!==n[h]);n.length===s.length&&!l||(this.observers=s,this.observersMap=o,this.result=a,this.hasListeners()&&(IL(n,s).forEach(c=>{c.destroy()}),IL(s,n).forEach(c=>{c.subscribe(h=>{this.onUpdate(c,h)})}),this.notify()))})}getCurrentResult(){return this.result}getQueries(){return this.observers.map(t=>t.getCurrentQuery())}getObservers(){return this.observers}getOptimisticResult(t){return this.findMatchingObservers(t).map(r=>r.observer.getOptimisticResult(r.defaultedQueryOptions))}findMatchingObservers(t){const r=this.observers,n=new Map(r.map(y=>[y.options.queryHash,y])),i=t.map(y=>this.client.defaultQueryOptions(y)),s=i.flatMap(y=>{const g=n.get(y.queryHash);return g!=null?[{defaultedQueryOptions:y,observer:g}]:[]}),o=new Set(s.map(y=>y.defaultedQueryOptions.queryHash)),a=i.filter(y=>!o.has(y.queryHash)),l=new Set(s.map(y=>y.observer)),c=r.filter(y=>!l.has(y)),h=y=>{const g=this.client.defaultQueryOptions(y),v=this.observersMap[g.queryHash];return v??new hO(this.client,g)},f=a.map((y,g)=>{if(y.keepPreviousData){const v=c[g];if(v!==void 0)return{defaultedQueryOptions:y,observer:v}}return{defaultedQueryOptions:y,observer:h(y)}}),m=(y,g)=>i.indexOf(y.defaultedQueryOptions)-i.indexOf(g.defaultedQueryOptions);return s.concat(f).sort(m)}onUpdate(t,r){const n=this.observers.indexOf(t);n!==-1&&(this.result=Lee(this.result,n,r),this.notify())}notify(){fr.batch(()=>{this.listeners.forEach(({listener:t})=>{t(this.result)})})}}class Kee extends hO{constructor(t,r){super(t,r)}bindMethods(){super.bindMethods(),this.fetchNextPage=this.fetchNextPage.bind(this),this.fetchPreviousPage=this.fetchPreviousPage.bind(this)}setOptions(t,r){super.setOptions({...t,behavior:nM()},r)}getOptimisticResult(t){return t.behavior=nM(),super.getOptimisticResult(t)}fetchNextPage({pageParam:t,...r}={}){return this.fetch({...r,meta:{fetchMore:{direction:"forward",pageParam:t}}})}fetchPreviousPage({pageParam:t,...r}={}){return this.fetch({...r,meta:{fetchMore:{direction:"backward",pageParam:t}}})}createResult(t,r){var n,i,s,o,a,l;const{state:c}=t,h=super.createResult(t,r),{isFetching:f,isRefetching:m}=h,y=f&&((n=c.fetchMeta)==null||(i=n.fetchMore)==null?void 0:i.direction)==="forward",g=f&&((s=c.fetchMeta)==null||(o=s.fetchMore)==null?void 0:o.direction)==="backward";return{...h,fetchNextPage:this.fetchNextPage,fetchPreviousPage:this.fetchPreviousPage,hasNextPage:Hee(r,(a=c.data)==null?void 0:a.pages),hasPreviousPage:Zee(r,(l=c.data)==null?void 0:l.pages),isFetchingNextPage:y,isFetchingPreviousPage:g,isRefetching:m&&!y&&!g}}}var V8={exports:{}},z8={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sm=G;function Xee(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ete=typeof Object.is=="function"?Object.is:Xee,tte=Sm.useState,rte=Sm.useEffect,nte=Sm.useLayoutEffect,ite=Sm.useDebugValue;function ste(e,t){var r=t(),n=tte({inst:{value:r,getSnapshot:t}}),i=n[0].inst,s=n[1];return nte(function(){i.value=r,i.getSnapshot=t,E$(i)&&s({inst:i})},[e,r,t]),rte(function(){return E$(i)&&s({inst:i}),e(function(){E$(i)&&s({inst:i})})},[e]),ite(r),r}function E$(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!ete(e,r)}catch{return!0}}function ote(e,t){return t()}var ate=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?ote:ste;z8.useSyncExternalStore=Sm.useSyncExternalStore!==void 0?Sm.useSyncExternalStore:ate;V8.exports=z8;var lte=V8.exports;const U8=lte.useSyncExternalStore,FL=G.createContext(void 0),G8=G.createContext(!1);function B8(e,t){return e||(t&&typeof window<"u"?(window.ReactQueryClientContext||(window.ReactQueryClientContext=FL),window.ReactQueryClientContext):FL)}const fO=({context:e}={})=>{const t=G.useContext(B8(e,G.useContext(G8)));if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},ute=({client:e,children:t,context:r,contextSharing:n=!1})=>{G.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]);const i=B8(r,n);return G.createElement(G8.Provider,{value:!r&&n},G.createElement(i.Provider,{value:e},t))},q8=G.createContext(!1),W8=()=>G.useContext(q8);q8.Provider;function cte(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}const dte=G.createContext(cte()),H8=()=>G.useContext(dte);function hte(e,t){return typeof e=="function"?e(...t):!!e}const Z8=(e,t)=>{(e.suspense||e.useErrorBoundary)&&(t.isReset()||(e.retryOnMount=!1))},J8=e=>{G.useEffect(()=>{e.clearReset()},[e])},Q8=({result:e,errorResetBoundary:t,useErrorBoundary:r,query:n})=>e.isError&&!t.isReset()&&!e.isFetching&&hte(r,[e.error,n]),Y8=e=>{e.suspense&&typeof e.staleTime!="number"&&(e.staleTime=1e3)},K8=(e,t)=>e.isLoading&&e.isFetching&&!t,oM=(e,t,r)=>(e==null?void 0:e.suspense)&&K8(t,r),aM=(e,t,r)=>t.fetchOptimistic(e).then(({data:n})=>{e.onSuccess==null||e.onSuccess(n),e.onSettled==null||e.onSettled(n,null)}).catch(n=>{r.clearReset(),e.onError==null||e.onError(n),e.onSettled==null||e.onSettled(void 0,n)});function pte({queries:e,context:t}){const r=fO({context:t}),n=W8(),i=H8(),s=G.useMemo(()=>e.map(m=>{const y=r.defaultQueryOptions(m);return y._optimisticResults=n?"isRestoring":"optimistic",y}),[e,r,n]);s.forEach(m=>{Y8(m),Z8(m,i)}),J8(i);const[o]=G.useState(()=>new Yee(r,s)),a=o.getOptimisticResult(s);U8(G.useCallback(m=>n?()=>{}:o.subscribe(fr.batchCalls(m)),[o,n]),()=>o.getCurrentResult(),()=>o.getCurrentResult()),G.useEffect(()=>{o.setQueries(s,{listeners:!1})},[s,o]);const c=a.some((m,y)=>oM(s[y],m,n))?a.flatMap((m,y)=>{const g=s[y],v=o.getObservers()[y];if(g&&v){if(oM(g,m,n))return aM(g,v,i);K8(m,n)&&aM(g,v,i)}return[]}):[];if(c.length>0)throw Promise.all(c);const h=o.getQueries(),f=a.find((m,y)=>{var g,v;return Q8({result:m,errorResetBoundary:i,useErrorBoundary:(g=(v=s[y])==null?void 0:v.useErrorBoundary)!=null?g:!1,query:h[y]})});if(f!=null&&f.error)throw f.error;return a}function X8(e,t){const r=fO({context:e.context}),n=W8(),i=H8(),s=r.defaultQueryOptions(e);s._optimisticResults=n?"isRestoring":"optimistic",s.onError&&(s.onError=fr.batchCalls(s.onError)),s.onSuccess&&(s.onSuccess=fr.batchCalls(s.onSuccess)),s.onSettled&&(s.onSettled=fr.batchCalls(s.onSettled)),Y8(s),Z8(s,i),J8(i);const[o]=G.useState(()=>new t(r,s)),a=o.getOptimisticResult(s);if(U8(G.useCallback(l=>{const c=n?()=>{}:o.subscribe(fr.batchCalls(l));return o.updateResult(),c},[o,n]),()=>o.getCurrentResult(),()=>o.getCurrentResult()),G.useEffect(()=>{o.setOptions(s,{listeners:!1})},[s,o]),oM(s,a,n))throw aM(s,o,i);if(Q8({result:a,errorResetBoundary:i,useErrorBoundary:s.useErrorBoundary,query:o.getCurrentQuery()}))throw a.error;return s.notifyOnChangeProps?a:o.trackResult(a)}function ov(e,t,r){const n=Lf(e,t,r);return X8(n,hO)}function fte(e,t,r){const n=Lf(e,t,r);return X8(n,Kee)}function mte(e){return Ree.sanitize(e,{USE_PROFILES:{html:!0}})}function yte(){const e=Bv(),{repositoryId:t}=iO();if(!t)throw new Error("Repository Id must be provided");const r=parseInt(t);if(isNaN(r))throw new Error("repositoryId must be a number");const{data:n}=ov({...M8(r),initialData:e}),i="RepositoryDetail";return M.jsxs("div",{className:i,children:[M.jsxs("h2",{className:`${i}--contactInfoTitle`,children:["Contact Information for ",n.facility]}),M.jsx("div",{className:`${i}--contactInfoDiv`,dangerouslySetInnerHTML:{__html:mte(n.facility_comment)}})]})}var lM=new Map,H1=new WeakMap,jL=0,gte=void 0;function vte(e){return e?(H1.has(e)||(jL+=1,H1.set(e,jL.toString())),H1.get(e)):"0"}function wte(e){return Object.keys(e).sort().filter(t=>e[t]!==void 0).map(t=>`${t}_${t==="root"?vte(e.root):e[t]}`).toString()}function _te(e){let t=wte(e),r=lM.get(t);if(!r){const n=new Map;let i;const s=new IntersectionObserver(o=>{o.forEach(a=>{var l;const c=a.isIntersecting&&i.some(h=>a.intersectionRatio>=h);e.trackVisibility&&typeof a.isVisible>"u"&&(a.isVisible=c),(l=n.get(a.target))==null||l.forEach(h=>{h(c,a)})})},e);i=s.thresholds||(Array.isArray(e.threshold)?e.threshold:[e.threshold||0]),r={id:t,observer:s,elements:n},lM.set(t,r)}return r}function bte(e,t,r={},n=gte){if(typeof window.IntersectionObserver>"u"&&n!==void 0){const l=e.getBoundingClientRect();return t(n,{isIntersecting:n,target:e,intersectionRatio:typeof r.threshold=="number"?r.threshold:0,time:0,boundingClientRect:l,intersectionRect:l,rootBounds:l}),()=>{}}const{id:i,observer:s,elements:o}=_te(r);let a=o.get(e)||[];return o.has(e)||o.set(e,a),a.push(t),s.observe(e),function(){a.splice(a.indexOf(t),1),a.length===0&&(o.delete(e),s.unobserve(e)),o.size===0&&(s.disconnect(),lM.delete(i))}}function Ste({threshold:e,delay:t,trackVisibility:r,rootMargin:n,root:i,triggerOnce:s,skip:o,initialInView:a,fallbackInView:l,onChange:c}={}){var h;const[f,m]=G.useState(null),y=G.useRef(),[g,v]=G.useState({inView:!!a,entry:void 0});y.current=c,G.useEffect(()=>{if(o||!f)return;let _;return _=bte(f,(x,T)=>{v({inView:x,entry:T}),y.current&&y.current(x,T),T.isIntersecting&&s&&_&&(_(),_=void 0)},{root:i,rootMargin:n,threshold:e,trackVisibility:r,delay:t},l),()=>{_&&_()}},[Array.isArray(e)?e.toString():e,f,i,n,s,o,r,l,t]);const w=(h=g.entry)==null?void 0:h.target,b=G.useRef();!f&&w&&!s&&!o&&b.current!==w&&(b.current=w,v({inView:!!a,entry:void 0}));const S=[m,g.inView,g.entry];return S.ref=S[0],S.inView=S[1],S.entry=S[2],S}const xte="https://ccog.colorado.edu/geosamples-api/api";function $te(){const e=new URL(window.location.href),t=zm(e.searchParams);t.set("items_per_page","10");const{ref:r,inView:n}=Ste(),{status:i,data:s,error:o,isFetching:a,isFetchingNextPage:l,fetchNextPage:c,hasNextPage:h}=fte(["infinite cruises"],async({pageParam:m=1})=>{const y=new URLSearchParams(t);return y.set("page",m),await(await fetch(`${xte}/cruises/name?${y.toString()}`)).json()},{getNextPageParam:m=>{if(!(m.page>m.total_pages))return m.page+1}}),f=o;return G.useEffect(()=>{n&&c()},[n,c]),M.jsx("div",{children:i==="loading"?M.jsx("p",{children:"Loading..."}):i==="error"?M.jsxs("span",{children:["Error: ",f.message]}):M.jsxs(M.Fragment,{children:[s.pages.map(m=>M.jsx(cP.Fragment,{children:m.items.map(y=>M.jsx(Oo,{style:{display:"block",margin:"1rem 0",color:"#282c34",textDecoration:"none"},to:`/cruises/${y.id}`,children:y.cruise},y.id))},m.page)),M.jsx("div",{children:M.jsx("button",{ref:r,onClick:()=>c(),disabled:!h||l,children:l?"Loading more...":h?"Load Newer":"Nothing more to load"})}),M.jsx("div",{children:a&&!l?"Background Updating...":null})]})})}const M$="Cruises";function Tte(){return M.jsxs("div",{className:`${M$}--wrapper`,children:[M.jsx("div",{className:`${M$}--sidebar`,children:M.jsx($te,{})}),M.jsx("div",{className:`${M$}--main`,children:M.jsx(oO,{})})]})}function Ete(){return M.jsx("p",{children:"Please select a Cruise to get its details"})}const Mte="https://ccog.colorado.edu/geosamples-api/api";async function Ite(e){var i;const t=await fetch(`${Mte}/cruises/detail/${e}`);if(t.status!==200)throw new Error(`${t.status}`);const r=await t.json(),n=new Array;return(i=r.facility_codes)==null||i.forEach(async s=>{const o=await E8(s);n.push(o)}),r.facilities=n,r}const eV=e=>({queryKey:["cruises","detail",e],queryFn:async()=>Ite(e)}),Cte=e=>async t=>{const{cruiseId:r}=t.params;if(!r)throw new Error("cruiseId argument required");const n=parseInt(r);if(isNaN(n))throw new Error("cruiseId must be a number");const i=eV(n);return await e.ensureQueryData(i)};function kte(e){var r;return(r=e.facilities)==null?void 0:r.map(n=>M.jsx(Oo,{to:{pathname:`/repositories/${n.id}`},children:n.facility_code},n.id))}function Pte(){var s,o,a;const e=Bv(),{cruiseId:t}=iO();if(!t)throw new Error("Cruise Id must be provided");const r=parseInt(t);if(isNaN(r))throw new Error("cruiseId must be a number");const{data:n}=ov({...eV(r),initialData:e}),i="CruiseDetail";return console.log("cruise detail: ",n),M.jsxs("div",{className:i,children:[M.jsxs("h2",{className:`${i}--title`,style:{paddingLeft:"50px",paddingBottom:"50px"},children:["Cruise: ",n.cruise]}),n?M.jsxs("div",{className:`${i}--info`,children:[M.jsxs("ul",{children:[M.jsxs("li",{children:["Repository: ",kte(n)]}),M.jsxs("li",{children:["Ship/Platform: ",(s=n.platforms)==null?void 0:s.join(", ")]}),n.year?M.jsxs("li",{children:["Year: ",n.year]}):"",(o=n.legs)!=null&&o.length?M.jsxs("li",{children:["Leg: ",(a=n.legs)==null?void 0:a.join(", ")]}):""]}),n.links?M.jsx("ul",{children:n.links.map((l,c)=>M.jsx("li",{style:{listStyle:"none"},children:M.jsx("a",{href:l.link,target:"_blank",rel:"noopener",children:l.type})},c))}):"",M.jsx("hr",{style:{width:"100%"}}),"Show samples from this cruise on the ",M.jsx(Oo,{to:{pathname:"/samples",search:`cruise=${n.cruise}`},children:"map"})," or in a ",M.jsx(Oo,{to:{pathname:"/samples/table",search:`cruise=${n.cruise}`},children:"table"})]}):""]})}const za="https://ccog.colorado.edu/geosamples-api/api",Ote=async e=>{const t=new URLSearchParams(e);t.delete("platform"),console.log("platform filters: ",t.toString());const r=await fetch(`${za}/platforms?items_per_page=2000&${t.toString()}`);if(r.status===200){const n=await r.json();return console.log(`${n.items.length} platforms`),n.items}else throw new Error(`${r.status}`)},Rte=async e=>{const t=new URLSearchParams(e);t.delete("province"),console.log("province filters: ",t.toString());const r=await fetch(`${za}/physiographic_provinces?items_per_page=2000&${t.toString()}`);if(r.status===200)return(await r.json()).items;throw new Error(`${r.status}`)},Ate=async e=>{const t=new URLSearchParams(e);t.delete("cruise"),console.log("cruise filters: ",t.toString());const r=await fetch(`${za}/cruises/name?items_per_page=2000&${t.toString()}`);if(r.status===200)return(await r.json()).items.map(s=>s.cruise);throw new Error(`${r.status}`)},Lte=async e=>{const t=new URLSearchParams(e);t.delete("lake"),console.log("lake filters: ",t.toString());const r=await fetch(`${za}/lakes?items_per_page=2000&${t.toString()}`);if(r.status===200)return(await r.json()).items;throw new Error(`${r.status}`)},Nte=async e=>{const t=new URLSearchParams(e);t.delete("device"),console.log("platform filters: ",t.toString());const r=await fetch(`${za}/devices?items_per_page=2000&${t.toString()}`);if(r.status===200)return(await r.json()).items;throw new Error(`${r.status}`)},Dte=async e=>{const t=new URLSearchParams(e);t.delete("mineralogy"),console.log("platform filters: ",t.toString());const r=await fetch(`${za}/mineralogies?items_per_page=2000&${t.toString()}`);if(r.status===200)return(await r.json()).items;throw new Error(`${r.status}`)},Fte=async e=>{const t=new URLSearchParams(e);t.delete("metamorphism"),console.log("platform filters: ",t.toString());const r=await fetch(`${za}/metamorphism?items_per_page=2000&${t.toString()}`);if(r.status===200)return(await r.json()).items;throw new Error(`${r.status}`)},jte=async e=>{const t=new URLSearchParams(e);t.delete("weathering"),console.log("platform filters: ",t.toString());const r=await fetch(`${za}/weathering?items_per_page=2000&${t.toString()}`);if(r.status===200)return(await r.json()).items;throw new Error(`${r.status}`)};async function Vte(){const e=await fetch(`${za}/samples/count`);if(!e.ok)throw new Error(e.statusText);const t=await e.json();return parseInt(t.count)}const zte=async e=>["calcareous, algae","calcareous, biogenic","calcareous, coral","calcareous, foraminifera","calcareous, nannofossils","calcareous, nonbiogenic","calcareous, oolites","calcareous, ostracods","calcareous, pteropods","calcareous, shells","calcareous, spines","siliceous","siliceous, diatoms","siliceous, radiolaria","siliceous, sponge spicules","terrigenous","terrigenous clastic sedimentary rock","clay minerals","fish teeth","glauconite","iron or iron oxide","manganese","opaques","phosphate","plant debris","pyrite or marcasite","zeolites"],Ute=async e=>["gravel","gravelly mud","gravelly sand","mud or ooze","muddy gravel","muddy sand","sand","sandy gravel","sandy mud or ooze","ash","breccia","crusts","dolomite","glass shards","lapilli","nodules","slabs","volcanics"],Gte=async e=>{const t=await fetch(`${za}/samples/count?${e.toString()}`);if(t.status===200)return(await t.json()).count;throw new Error(`${t.status}`)};function Bte(){console.log("rendering SamplesCount...");const e=new URL(window.location.href),t=zm(e.searchParams);console.log("SampleCount: ",t.toString());const{data:r}=ov(["totalSampleCount"],Vte,{staleTime:1/0}),{data:n}=ov(["sampleCount",t.toString()],async()=>Gte(t));return M.jsx("div",{children:M.jsx("h3",{children:r&&n!==void 0?`${n.toLocaleString()} out of ${r.toLocaleString()} samples`:"Loading..."})})}const qte=/^\S+/;function Bn(e,t){const r=document.getElementById(e);r&&(r.value=t&&qte.test(t)?t:"")}function Wte(e){var w,b,S,_,x,T,I,C,O,W,z,ne,K,xe,le;console.log("rendering FilterPanel...");const{zoomToSelected:t,zoomToggleHandler:r}=e,n=Dx(),i="FilterPanel";EK(),fO();const s=y8(),o=new URL(window.location.href),a=zm(o.searchParams);console.log("all filters: ",a.toString());const l=pte({queries:[{queryKey:["repositories",a.toString()],queryFn:()=>T8(a)},{queryKey:["platforms",a.toString()],queryFn:()=>Ote(a)},{queryKey:["devices",a.toString()],queryFn:()=>Nte(a)},{queryKey:["cruises",a.toString()],queryFn:()=>Ate(a)},{queryKey:["lakes",a.toString()],queryFn:()=>Lte(a)},{queryKey:["provinces",a.toString()],queryFn:()=>Rte(a)},{queryKey:["weathering",a.toString()],queryFn:()=>jte(a)},{queryKey:["metamorphism",a.toString()],queryFn:()=>Fte(a)},{queryKey:["mineralogies",a.toString()],queryFn:()=>Dte(a)},{queryKey:["lithologies",a.toString()],queryFn:()=>zte()},{queryKey:["textures",a.toString()],queryFn:()=>Ute()}]});G.useEffect(()=>{Bn("repository-select",o.searchParams.get("repository")),Bn("platform-select",o.searchParams.get("platform")),Bn("device-select",o.searchParams.get("device")),Bn("cruise-select",o.searchParams.get("cruise")),Bn("lake-select",o.searchParams.get("lake")),Bn("province-select",o.searchParams.get("province")),Bn("igsn-text",o.searchParams.get("igsn")),Bn("min_depth-text",o.searchParams.get("min_depth")),Bn("max_depth-text",o.searchParams.get("max_depth")),Bn("start_date_begins_with-text",o.searchParams.get("start_date_begins_with")),Bn("weathering-select",o.searchParams.get("weathering")),Bn("metamorphism-select",o.searchParams.get("metamorphism")),Bn("mineralogy-select",o.searchParams.get("mineralogy")),Bn("lithology-select",o.searchParams.get("lithology")),Bn("texture-select",o.searchParams.get("texture"))},[o.searchParams]);function c(){const B=new FormData,it=document==null?void 0:document.getElementById("search-form");for(const Ge of it.elements){const H=Ge;H.tagName!=="FIELDSET"&&H.value!==""&&B.append(H.name,H.value)}s(B)}function h(B){B.key==="Enter"&&B.target.blur()}function f(B){B.target.blur(),!(!B.target.value&&!o.searchParams.get(B.target.name))&&B.target.value!==o.searchParams.get(B.target.name)&&c()}function m(B){c()}function y(B){document.querySelectorAll("#search-form input").forEach(H=>{H.value=""}),document.querySelectorAll("#search-form select").forEach(H=>{H.value=""}),c()}function g(B){if(B&&B.length>0&&B.length<500)return M.jsxs("select",{name:"cruise",id:"cruise-select",title:"filter samples by cruise name",onChange:m,style:{width:"80%"},children:[M.jsx("option",{value:"",children:"-- Cruise --"}),B==null?void 0:B.map((it,Ge)=>M.jsx("option",{value:it,children:it},Ge))]});if((B==null?void 0:B.length)===0)return M.jsx("select",{name:"cruise",id:"cruise-select",disabled:!0,style:{width:"80%"},title:"No cruises with this combination of filters",children:M.jsx("option",{value:"",children:"-- Cruise --"})});if((B==null?void 0:B.length)>=500)return M.jsx("select",{name:"cruise",id:"cruise-select",disabled:!0,style:{width:"80%"},title:"Too many cruises to display. Please select an additional filter(s) first",children:M.jsx("option",{value:"",children:"-- Cruise --"})})}function v(){n(`/samples/table?${a.toString()}`)}return M.jsxs("div",{className:i,children:[M.jsx("div",{className:"center-content",children:M.jsx(Bte,{})}),M.jsxs(YK,{id:"search-form",role:"search",children:[M.jsx("div",{style:{paddingTop:"10px",textAlign:"center"},children:l[0].data&&l[0].data.length?M.jsxs("select",{name:"repository",title:"filter samples by repository",id:"repository-select",onChange:m,style:{width:"80%"},children:[M.jsx("option",{value:"",children:"-- Repository --"}),(w=l[0].data)==null?void 0:w.map(B=>M.jsx("option",{value:B.facility_code,children:B.facility},B.id))]}):M.jsx("select",{name:"repository",title:"No repositories with this combination of filters",id:"repository-select",disabled:!0,style:{width:"80%"},children:M.jsx("option",{value:"",children:"-- Repository --"})})}),M.jsx("div",{style:{paddingTop:"10px",textAlign:"center"},children:l[1].data&&((b=l[1].data)!=null&&b.length)?M.jsxs("select",{name:"platform",id:"platform-select",title:"filter samples by platform name",onChange:m,style:{width:"80%"},children:[M.jsx("option",{value:"",children:"-- Platform --"}),(S=l[1].data)==null?void 0:S.map(B=>M.jsx("option",{value:B,children:B},B))]}):M.jsx("select",{name:"platform",id:"platform-select",title:"no platforms with this combination of filters",disabled:!0,style:{width:"80%"},children:M.jsx("option",{value:"",children:"-- Platform --"})})}),M.jsx("div",{style:{paddingTop:"10px",textAlign:"center"},children:l[2].data&&((_=l[2].data)!=null&&_.length)?M.jsxs("select",{name:"device",id:"device-select",title:"filter samples by device type",onChange:m,style:{width:"80%"},children:[M.jsx("option",{value:"",children:"-- Device --"}),(x=l[2].data)==null?void 0:x.map(B=>M.jsx("option",{value:B,children:B},B))]}):M.jsx("select",{name:"device",id:"device-select",title:"no devices with this combination of filters",disabled:!0,style:{width:"80%"},children:M.jsx("option",{value:"",children:"-- Device --"})})}),M.jsx("div",{style:{paddingTop:"10px",textAlign:"center"},children:l[3].data?g(l[3].data):""}),M.jsx("div",{style:{paddingTop:"10px",textAlign:"center"},children:l[4].data&&((T=l[4].data)!=null&&T.length)?M.jsxs("select",{name:"lake",id:"lake-select",title:"filter samples by lake name",onChange:m,style:{width:"80%"},children:[M.jsx("option",{value:"",children:"-- Lake --"}),(I=l[4].data)==null?void 0:I.map(B=>M.jsx("option",{value:B,children:B},B))]}):M.jsx("select",{name:"lake",id:"lake-select",title:"no lakes with this combination of filters",disabled:!0,style:{width:"80%"},children:M.jsx("option",{value:"",children:"-- Lake --"})})}),M.jsx("div",{style:{paddingTop:"10px",textAlign:"center"},children:l[5].data&&((C=l[5].data)!=null&&C.length)?M.jsxs("select",{name:"province",id:"province-select",title:"filter samples by physiographic province",onChange:m,style:{width:"80%"},children:[M.jsx("option",{value:"",children:"-- Physiographic Province --"}),(O=l[5].data)==null?void 0:O.map(B=>M.jsx("option",{value:B,children:B},B))]}):M.jsx("select",{name:"province",id:"province-select",title:"no physiographic provinces with this combination of filters",disabled:!0,style:{width:"80%"},children:M.jsx("option",{value:"",children:"-- Physiographic Province --"})})}),M.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-around",paddingTop:"10px"},children:[M.jsxs("div",{children:[M.jsx("label",{htmlFor:"igsn-text",style:{paddingRight:"5px",fontSize:"small"},children:"IGSN"}),M.jsx("input",{id:"igsn-text",title:"filter samples by IGSN","aria-label":"IGSN",type:"search",name:"igsn",maxLength:9,minLength:9,size:15,autoComplete:"off",onKeyDown:B=>h(B),onBlur:f})]}),M.jsxs("div",{children:[M.jsx("label",{htmlFor:"start_date_begins_with-text",style:{paddingRight:"5px",fontSize:"small"},children:"Date"}),M.jsx("input",{id:"start_date_begins_with-text",title:"filter samples by date string","aria-label":"start date",placeholder:"YYYYMMDD",type:"search",name:"start_date_begins_with",maxLength:8,minLength:4,size:13,autoComplete:"off",onKeyDown:B=>h(B),onBlur:f})]})]}),M.jsx("div",{style:{paddingLeft:"10px",paddingRight:"10px",marginTop:"10px"},children:M.jsxs("fieldset",{style:{display:"flex",alignItems:"center",justifyContent:"space-around"},children:[M.jsx("legend",{style:{fontSize:"small"},children:"Water Depth (m)"}),M.jsx("input",{id:"min_depth-text","aria-label":"min depth",title:"filter samples taken from water >= this depth",placeholder:"min",type:"search",name:"min_depth",maxLength:6,minLength:6,size:10,onKeyDown:B=>h(B),onBlur:f}),M.jsx("input",{id:"max_depth-text","aria-label":"max depth",title:"filter samples taken from water <= this depth",placeholder:"max",type:"search",name:"max_depth",maxLength:6,minLength:6,size:10,onKeyDown:B=>h(B),onBlur:f})]})}),M.jsx("div",{style:{paddingLeft:"10px",paddingRight:"10px",marginTop:"10px"},children:M.jsxs("fieldset",{children:[M.jsx("legend",{children:"Sample Attributes"}),M.jsxs("select",{name:"lithology",title:"filter samples by lithologic composition",id:"lithology-select",onChange:m,style:{width:"80%"},children:[M.jsx("option",{value:"",children:"-- Lithology --"}),(W=l[9].data)==null?void 0:W.map(B=>M.jsx("option",{value:B,children:B},B))]}),M.jsxs("select",{name:"texture",title:"filter samples by texture",id:"texture-select",onChange:m,style:{width:"80%"},children:[M.jsx("option",{value:"",children:"-- Texture --"}),(z=l[10].data)==null?void 0:z.map(B=>M.jsx("option",{value:B,children:B},B))]}),M.jsxs("select",{name:"mineralogy",title:"filter samples by rock mineralogy",id:"mineralogy-select",onChange:m,style:{width:"80%"},children:[M.jsx("option",{value:"",children:"-- Mineralogy --"}),(ne=l[8].data)==null?void 0:ne.map(B=>M.jsx("option",{value:B,children:B},B))]}),l[6].data&&((K=l[6].data)!=null&&K.length)?M.jsxs("select",{name:"weathering",id:"weathering-select",onChange:m,style:{width:"80%"},title:"filter samples by rock weathering",children:[M.jsx("option",{value:"",children:"-- Weathering --"}),(xe=l[6].data)==null?void 0:xe.map(B=>M.jsx("option",{value:B,children:B},B))]}):M.jsx("select",{name:"weathering",id:"weathering-select",onChange:m,style:{width:"80%"},title:"no weathering codes with this combination of filters",disabled:!0,children:M.jsx("option",{value:"",children:"-- Weathering --"})}),M.jsxs("select",{name:"metamorphism",title:"filter samples by rock metamorphism",id:"metamorphism-select",onChange:m,style:{width:"80%"},children:[M.jsx("option",{value:"",children:"-- Metamorphism --"}),(le=l[7].data)==null?void 0:le.map(B=>M.jsx("option",{value:B,children:B},B))]})]})})]}),M.jsx("div",{className:"center-content",style:{marginTop:"10px"},children:M.jsxs("label",{children:["Zoom to Selected",M.jsx("input",{type:"checkbox",id:"zoom-checkbox",name:"zoomToSelected",checked:t,onChange:B=>r(B.target.checked)})]})}),M.jsxs("div",{className:"center-content",style:{marginTop:"25px"},children:[M.jsx("button",{id:"resetButton",type:"button",title:"reset the filters to default values",onClick:y,children:"Reset"}),M.jsx("button",{id:"tableButton",type:"button",title:"open a tabular view of the data",onClick:v,children:"Table View"})]})]})}function u(e,t,r,n){var i,s=arguments.length,o=s<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,r,o):i(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o}function rIe(e,t,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(h){try{c(n.next(h))}catch(f){o(f)}}function l(h){try{c(n.throw(h))}catch(f){o(f)}}function c(h){h.done?s(h.value):i(h.value).then(a,l)}c((n=n.apply(e,t||[])).next())})}const Hte="modulepreload",Zte=function(e){return"/"+e},VL={},ie=function(t,r,n){if(!r||r.length===0)return t();const i=document.getElementsByTagName("link");return Promise.all(r.map(s=>{if(s=Zte(s),s in VL)return;VL[s]=!0;const o=s.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!n)for(let h=i.length-1;h>=0;h--){const f=i[h];if(f.href===s&&(!o||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${a}`))return;const c=document.createElement("link");if(c.rel=o?"stylesheet":Hte,o||(c.as="script",c.crossOrigin=""),c.href=s,document.head.appendChild(c),o)return new Promise((h,f)=>{c.addEventListener("load",h),c.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>t())};function Jte(e){return e&&e.release&&typeof e.release=="function"}function Qte(e){return e&&e.acquire&&typeof e.acquire=="function"}let ud=class uM{constructor(t,r,n,i=1,s=0){if(this._ctor=t,this._acquireFunction=r,this._releaseFunction=n,this.allocationSize=i,this._pool=new Array(s),this._initialSize=s,this._ctor)for(let o=0;o<s;o++)this._pool[o]=new this._ctor;this.allocationSize=Math.max(i,1)}destroy(){this.prune(0)}acquire(...t){let r;if(uM.test.disabled)r=new this._ctor;else{if(this._pool.length===0){const n=this.allocationSize;for(let i=0;i<n;i++)this._pool[i]=new this._ctor}r=this._pool.pop()}return this._acquireFunction?this._acquireFunction(r,...t):Qte(r)&&r.acquire(...t),r}release(t){t&&!uM.test.disabled&&(this._releaseFunction?this._releaseFunction(t):Jte(t)&&t.release(),this._pool.push(t))}prune(t=this._initialSize){if(!(t>=this._pool.length)){for(let r=t;r<this._pool.length;++r){const n=this._pool[r];this._dispose(n)}this._pool.length=t}}_dispose(t){t.dispose&&typeof t.dispose=="function"&&t.dispose()}};ud.test={disabled:!1};function Yte(e){e.length=0}let Yn=class{constructor(t=50,r=50){this._pool=new ud(Array,void 0,Yte,r,t)}acquire(){return this._pool.acquire()}release(t){this._pool.release(t)}prune(){this._pool.prune(0)}static acquire(){return I$.acquire()}static release(t){return I$.release(t)}static prune(){I$.prune()}};const I$=new Yn(100);function iIe(e){const t=[];return function*(){yield*t;for(const r of e)t.push(r),yield r}}function Kte(e,t){for(const r of e)if(r!=null&&t(r))return r}function rS(e){return e!=null&&typeof e[Symbol.iterator]=="function"}function Mh(e,t){return e!=null?t(e):null}function yi(e,t){return Bx(e,t),e}function Bx(e,t){if(e==null)throw new Error(t??"value is None")}function Gt(e){return e==null||e.destroy(),null}function sIe(e){return e==null||e.dispose(),null}function or(e){return e==null||e.remove(),null}function Kh(e){return e==null||e.abort(),null}function oIe(e){return e==null||e.release(),null}function Xte(e,t,r){return e!=null&&t!=null?r!=null?r(e,t):e.equals(t):e===t}function ere(e){return null}function aIe(e,t){const r=new Array;for(const n of e)r.push(n!=null?t(n):null);return r}function lIe(e,t){for(const r of e)Mh(r,t)}function uIe(e){return e}let ou=class cM{constructor(){this._groups=new Map}destroy(){this.removeAll()}get size(){let t=0;return this._groups.forEach(r=>{t+=r.length}),t}add(t,r){if(rS(t)){const n=this._getOrCreateGroup(r);for(const i of t)this._isHandle(i)&&n.push(i)}else this._isHandle(t)&&this._getOrCreateGroup(r).push(t);return this}forEach(t,r){if(typeof t=="function")this._groups.forEach(n=>n.forEach(t));else{const n=this._getGroup(t);n&&r&&n.forEach(r)}}has(t){return this._groups.has(this._ensureGroupKey(t))}remove(t){if(typeof t!="string"&&rS(t)){for(const r of t)this.remove(r);return this}return this.has(t)?(this._removeAllFromGroup(this._getGroup(t)),this._groups.delete(this._ensureGroupKey(t)),this):this}removeAll(){return this._groups.forEach(t=>this._removeAllFromGroup(t)),this._groups.clear(),this}_isHandle(t){return t&&(!!t.remove||t instanceof cM)}_getOrCreateGroup(t){if(this.has(t))return this._getGroup(t);const r=[];return this._groups.set(this._ensureGroupKey(t),r),r}_getGroup(t){return this._groups.get(this._ensureGroupKey(t))}_ensureGroupKey(t){return t||"_default_"}_removeAllFromGroup(t){for(const r of t)r instanceof cM?r.removeAll():r.remove()}};const tV=Symbol("Accessor-beforeDestroy");function qx(e){return Hl(()=>e.forEach(t=>t!=null&&t.remove()))}function Hl(e){return{remove:()=>{e&&(e(),e=void 0)}}}let C$=class Ad{constructor(t=1){this._seed=t}set seed(t){this._seed=t??Math.random()*Ad._m}getInt(){return this._seed=(Ad._a*this._seed+Ad._c)%Ad._m,this._seed}getFloat(){return this.getInt()/(Ad._m-1)}getIntRange(t,r){return Math.round(this.getFloatRange(t,r))}getFloatRange(t,r){const n=r-t;return t+this.getInt()/Ad._m*n}};C$._m=2147483647,C$._a=48271,C$._c=0;const cIe=1.5;function dIe(e,t){return t?e.filter((r,n,i)=>i.findIndex(t.bind(null,r))===n):e.filter((r,n,i)=>i.indexOf(r)===n)}function Wx(e,t,r){if(e==null&&t==null)return!0;if(e==null||t==null||e.length!==t.length)return!1;if(r){for(let n=0;n<e.length;n++)if(!r(e[n],t[n]))return!1}else for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function hIe(e,t){let r=e.length!==t.length;r&&(e.length=t.length);for(let n=0;n<t.length;++n)e[n]!==t[n]&&(e[n]=t[n],r=!0);return r}function pIe(e,t,r){let n,i;return r?(n=t.filter(s=>!e.some(o=>r(o,s))),i=e.filter(s=>!t.some(o=>r(o,s)))):(n=t.filter(s=>!e.includes(s)),i=e.filter(s=>!t.includes(s))),{added:n,removed:i}}function fIe(e){return e&&typeof e.length=="number"}const tre=!!Array.prototype.fill;function mIe(e,t){if(tre)return new Array(e).fill(t);const r=new Array(e);for(let n=0;n<e;n++)r[n]=t;return r}function yIe(e,t){t===void 0&&(t=e,e=0);const r=new Array(t-e);for(let n=e;n<t;n++)r[n-e]=n;return r}let rV=class{constructor(){this.last=0}};const nV=new rV;function dM(e,t,r,n){n=n||nV;const i=Math.max(0,n.last-10);for(let o=i;o<r;++o)if(e[o]===t)return n.last=o,o;const s=Math.min(i,r);for(let o=0;o<s;++o)if(e[o]===t)return n.last=o,o;return-1}function rre(e,t,r,n){const i=r??e.length,s=dM(e,t,i,n);if(s!==-1)return e[s]=e[i-1],r==null&&e.pop(),t}const Js=new Set;function nre(e,t,r=e.length,n=t.length,i,s){if(n===0||r===0)return r;Js.clear();for(let a=0;a<n;++a)Js.add(t[a]);i=i||nV;const o=Math.max(0,i.last-10);for(let a=o;a<r;++a)if(Js.has(e[a])&&(s&&s.push(e[a]),Js.delete(e[a]),e[a]=e[r-1],--r,--a,Js.size===0||r===0))return Js.clear(),r;for(let a=0;a<o;++a)if(Js.has(e[a])&&(s&&s.push(e[a]),Js.delete(e[a]),e[a]=e[r-1],--r,--a,Js.size===0||r===0))return Js.clear(),r;return Js.clear(),r}function ire(e,t){const r=e.indexOf(t);return r!==-1?(e.splice(r,1),t):null}function Ll(e,t){return e!=null}let $c;function V(e){return typeof $c[e]=="function"?$c[e]=$c[e](globalThis):$c[e]}var Dj,Fj,jj,Vj;$c=(Dj=globalThis.dojoConfig)!=null&&Dj.has||(Fj=globalThis.esriConfig)!=null&&Fj.has?{...(jj=globalThis.dojoConfig)==null?void 0:jj.has,...(Vj=globalThis.esriConfig)==null?void 0:Vj.has}:{},V.add=(e,t,r,n)=>((n||$c[e]===void 0)&&($c[e]=t),r&&V(e)),V.cache=$c,V.add("esri-deprecation-warnings",!0),V.add("esri-force-fullscreen-debug",!1),(()=>{var t;V.add("host-webworker",globalThis.WorkerGlobalScope!==void 0&&self instanceof globalThis.WorkerGlobalScope);const e=typeof window<"u"&&typeof location<"u"&&typeof document<"u"&&window.location===location&&window.document===document;if(V.add("host-browser",e),V.add("host-node",typeof globalThis.process=="object"&&((t=globalThis.process.versions)==null?void 0:t.node)&&globalThis.process.versions.v8),V.add("dom",e),V("host-browser")){const r=navigator,n=r.userAgent,i=r.appVersion,s=parseFloat(i);if(V.add("wp",parseFloat(n.split("Windows Phone")[1])||void 0),V.add("msapp",parseFloat(n.split("MSAppHost/")[1])||void 0),V.add("khtml",i.includes("Konqueror")?s:void 0),V.add("edge",parseFloat(n.split("Edge/")[1])||void 0),V.add("opr",parseFloat(n.split("OPR/")[1])||void 0),V.add("webkit",!V("wp")&&!V("edge")&&parseFloat(n.split("WebKit/")[1])||void 0),V.add("chrome",!V("edge")&&!V("opr")&&parseFloat(n.split("Chrome/")[1])||void 0),V.add("android",!V("wp")&&parseFloat(n.split("Android ")[1])||void 0),V.add("safari",!i.includes("Safari")||V("wp")||V("chrome")||V("android")||V("edge")||V("opr")?void 0:parseFloat(i.split("Version/")[1])),V.add("mac",i.includes("Macintosh")),!V("wp")&&/(iPhone|iPod|iPad)/.test(n)){const o=RegExp.$1.replace(/P/,"p"),a=/OS ([\d_]+)/.test(n)?RegExp.$1:"1",l=parseFloat(a.replace(/_/,".").replaceAll("_",""));V.add(o,l),V.add("ios",l)}V("webkit")||(!n.includes("Gecko")||V("wp")||V("khtml")||V("edge")||V.add("mozilla",s),V("mozilla")&&V.add("ff",parseFloat(n.split("Firefox/")[1]||n.split("Minefield/")[1])||void 0))}})(),(()=>{if(globalThis.navigator){const e=navigator.userAgent,t=/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i.test(e),r=/iPhone/i.test(e);t&&V.add("esri-mobile",t),r&&V.add("esri-iPhone",r),V.add("esri-geolocation",!!navigator.geolocation)}V.add("esri-wasm","WebAssembly"in globalThis),V.add("esri-shared-array-buffer",()=>{const e="SharedArrayBuffer"in globalThis,t=globalThis.crossOriginIsolated===!1;return e&&!t}),V.add("wasm-simd",()=>{const e=[0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11];return WebAssembly.validate(new Uint8Array(e))}),V.add("esri-atomics","Atomics"in globalThis),V.add("esri-workers","Worker"in globalThis),V.add("web-feat:cache","caches"in globalThis),V.add("esri-workers-arraybuffer-transfer",!V("safari")||Number(V("safari"))>=12),V.add("workers-pool-size",8),V.add("featurelayer-simplify-thresholds",[.5,.5,.5,.5]),V.add("featurelayer-simplify-payload-size-factors",[1,1,4]),V.add("featurelayer-animation-enabled",!0),V.add("featurelayer-snapshot-enabled",!0),V.add("featurelayer-snapshot-point-min-threshold",8e4),V.add("featurelayer-snapshot-point-max-threshold",4e5),V.add("featurelayer-snapshot-point-coverage",.1),V.add("featurelayer-advanced-symbols",!1),V.add("featurelayer-pbf",!0),V.add("featurelayer-pbf-statistics",!1),V.add("feature-layers-workers",!0),V.add("feature-polyline-generalization-factor",1),V.add("mapview-transitions-duration",200),V.add("mapview-srswitch-adjust-rotation-scale-threshold",24e6),V.add("mapserver-pbf-version-support",10.81),V.add("mapservice-popup-identify-max-tolerance",20),V.add("heatmap-allow-raster-fallback",!1),V.add("heatmap-force-raster",!1),V("host-webworker")||V("host-browser")&&(V.add("esri-csp-restrictions",()=>{try{new Function}catch{return!0}return!1}),V.add("esri-image-decode",()=>{if("decode"in new Image){const e=new Image;return e.src='data:image/svg+xml;charset=UTF-8,<svg version="1.1" xmlns="http://www.w3.org/2000/svg"></svg>',void e.decode().then(()=>{V.add("esri-image-decode",!0,!0,!0)}).catch(()=>{V.add("esri-image-decode",!1,!0,!0)})}return!1}),V.add("esri-url-encodes-apostrophe",()=>{const e=window.document.createElement("a");return e.href="?'",e.href.includes("?%27")}))})();function vIe(e){return e instanceof ArrayBuffer}function mO(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Int8Array"}function iV(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Uint8Array"}function sV(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Uint8ClampedArray"}function yO(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Int16Array"}function oV(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Uint16Array"}function gO(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Int32Array"}function aV(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Uint32Array"}function Hx(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Float32Array"}function Zx(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Float64Array"}function sre(e){return!("buffer"in e)}function wIe(e){return e!=null?sre(e)?8*e.length+12:e.byteLength+ore:0}const ore=145,_Ie=1024;function bIe(e){return Zx(e)||Hx(e)||gO(e)||yO(e)||mO(e)}function SIe(e){return Zx(e)||Hx(e)}function xIe(e){return Zx(e)?179769e303:Hx(e)?3402823e32:aV(e)?4294967295:oV(e)?65535:iV(e)||sV(e)?255:gO(e)?2147483647:yO(e)?32767:mO(e)?127:256}function lV(e,t){let r;if(t)for(r in e)e.hasOwnProperty(r)&&(e[r]===void 0?delete e[r]:e[r]instanceof Object&&lV(e[r],!0));else for(r in e)e.hasOwnProperty(r)&&e[r]===void 0&&delete e[r];return e}function F(e){if(!e||typeof e!="object"||typeof e=="function")return e;const t=dV(e);if(t!=null)return t;if(nS(e))return e.clone();if(uV(e))return e.map(F);if(cV(e))return e.clone();const r={};for(const n of Object.getOwnPropertyNames(e))r[n]=F(e[n]);return r}function hM(e){if(!e||typeof e!="object"||typeof e=="function"||"HTMLElement"in globalThis&&e instanceof HTMLElement)return e;const t=dV(e);if(t!=null)return t;if(uV(e)){let r=!0;const n=e.map(i=>{const s=hM(i);return i!=null&&s==null&&(r=!1),s});return r?n:null}if(nS(e))return e.clone();if(e instanceof File||e instanceof Blob)return e;if(!cV(e)){const r=new(Object.getPrototypeOf(e)).constructor;for(const n of Object.getOwnPropertyNames(e)){const i=e[n],s=hM(i);if(i!=null&&s==null)return null;r[n]=s}return r}return null}function nS(e){return typeof e.clone=="function"}function uV(e){return typeof e.map=="function"&&typeof e.forEach=="function"}function cV(e){return typeof e.notifyChange=="function"&&typeof e.watch=="function"}function zL(e){if(Object.prototype.toString.call(e)!=="[object Object]")return!1;const t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}function dV(e){if(mO(e)||iV(e)||sV(e)||yO(e)||oV(e)||gO(e)||aV(e)||Hx(e)||Zx(e))return e.slice();if(e instanceof Date)return new Date(e.getTime());if(e instanceof ArrayBuffer)return e.slice(0,e.byteLength);if(e instanceof Map){const t=new Map;for(const[r,n]of e)t.set(r,F(n));return t}if(e instanceof Set){const t=new Set;for(const r of e)t.add(F(r));return t}return null}function vO(e,t){return e===t||typeof e=="number"&&isNaN(e)&&typeof t=="number"&&isNaN(t)||typeof(e||{}).getTime=="function"&&typeof(t||{}).getTime=="function"&&e.getTime()===t.getTime()||!1}function hV(e,t){return e===t||(e==null||typeof e=="string"?e===t:typeof e=="number"?e===t||typeof t=="number"&&isNaN(e)&&isNaN(t):e instanceof Date?t instanceof Date&&e.getTime()===t.getTime():Array.isArray(e)?Array.isArray(t)&&Wx(e,t):e instanceof Set?t instanceof Set&&lre(e,t):e instanceof Map?t instanceof Map&&ure(e,t):!!zL(e)&&zL(t)&&are(e,t))}function are(e,t){if(e===null||t===null)return!1;const r=Object.keys(e);if(t===null||Object.keys(t).length!==r.length)return!1;for(const n of r)if(e[n]!==t[n]||!Object.prototype.hasOwnProperty.call(t,n))return!1;return!0}function lre(e,t){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}function ure(e,t){if(e.size!==t.size)return!1;for(const[r,n]of e){const i=t.get(r);if(i!==n||i===void 0&&!t.has(r))return!1}return!0}function Xr(e){return e.__accessor__??null}function cre(e,t){return e!=null&&e.metadatas&&e.metadatas[t]!=null}function f_(e,t,r){return r?iS(e,t,{policy:r,path:""}):iS(e,t,null)}function iS(e,t,r){return t?Object.keys(t).reduce((n,i)=>{const s=i;let o=null,a="merge";if(r&&(o=r.path?`${r.path}.${i}`:i,a=r.policy(o)),a==="replace"||a==="replace-arrays"&&Array.isArray(n[s]))return n[s]=t[s],n;if(n[s]===void 0)return n[s]=F(t[s]),n;let l=n[s],c=t[s];if(l===c)return n;if(Array.isArray(c)||Array.isArray(n))l=l?Array.isArray(l)?n[s]=l.concat():n[s]=[l]:n[s]=[],c&&(Array.isArray(c)||(c=[c]),c.forEach(h=>{l.includes(h)||l.push(h)}));else if(c&&typeof c=="object")if(r){const h=r.path;r.path=o,n[s]=iS(l,c,r),r.path=h}else n[s]=iS(l,c,null);else n.hasOwnProperty(i)&&!t.hasOwnProperty(i)||(n[s]=c);return n},e||{}):e}function pV(e){return Array.isArray(e)?e:e.split(".")}function UL(e){return e.includes(",")?e.split(",").map(t=>t.trim()):[e.trim()]}function dre(e){if(Array.isArray(e)){const t=[];for(const r of e)t.push(...UL(r));return t}return UL(e)}function fV(e,t,r,n){const i=dre(t);if(i.length!==1){const s=i.map(o=>n(e,o,r));return qx(s)}return n(e,i[0],r)}function mV(e){let t=!1;return()=>{t||(t=!0,e())}}function yV(e,t){const r=e[e.length-1]==="?"?e.slice(0,-1):e;if(t.getItemAt!=null||Array.isArray(t)){const i=parseInt(r,10);if(!isNaN(i))return Array.isArray(t)?t[i]:t.at(i)}const n=Xr(t);return cre(n,r)?n.get(r):t[r]}function gV(e,t,r){if(e==null)return e;const n=yV(t[r],e);return!n&&r<t.length-1?void 0:r===t.length-1?n:gV(n,t,r+1)}function Wv(e,t,r=0){return typeof t!="string"||t.includes(".")?gV(e,pV(t),r):yV(t,e)}function sS(e,t){return Wv(e,t)}function GL(e,t){return Wv(t,e)!==void 0}function Hv(e){let t=e.constructor.__accessorMetadata__;const r=Object.prototype.hasOwnProperty.call(e.constructor,"__accessorMetadata__");if(t){if(!r){t=Object.create(t);for(const n in t)t[n]=F(t[n]);Object.defineProperty(e.constructor,"__accessorMetadata__",{value:t,enumerable:!1,configurable:!0,writable:!0})}}else t={},Object.defineProperty(e.constructor,"__accessorMetadata__",{value:t,enumerable:!1,configurable:!0,writable:!0});return e.constructor.__accessorMetadata__}function Jx(e,t){const r=Hv(e);let n=r[t];return n||(n=r[t]={}),n}function hre(e,t){return f_(e,t,fre)}const pre=/^(?:[^.]+\.)?(?:value|type|(?:json\.type|json\.origins\.[^.]\.type))$/;function fre(e){return pre.test(e)?"replace":"merge"}function vV(e,t,r=!1){return _V(e,t,r)}function Zv(e,t){if(t!=null)return t[e]||wV(e.split("."),!1,t)}function vp(e,t,r){const n=e.split("."),i=n.pop(),s=wV(n,!0,r);s&&i&&(s[i]=t)}function wV(e,t,r){let n=r;for(const i of e){if(n==null)return;if(!(i in n)){if(!t)return;n[i]={}}n=n[i]}return n}function _V(e,t,r){return t?Object.keys(t).reduce((n,i)=>{let s=n[i],o=t[i];return s===o?n:s===void 0?(n[i]=F(o),n):(Array.isArray(o)||Array.isArray(n)?(s=s?Array.isArray(s)?n[i]=s.concat():n[i]=[s]:n[i]=[],o&&(Array.isArray(o)||(o=[o]),r?o.forEach(a=>{s.includes(a)||s.push(a)}):n[i]=o.concat())):o&&typeof o=="object"?n[i]=_V(s,o,r):n.hasOwnProperty(i)&&!t.hasOwnProperty(i)||(n[i]=o),n)},e||{}):e}var zj;const ot={analysisTheme:{accentColor:[255,127,0],textColor:"white"},apiKey:void 0,applicationName:"",applicationUrl:(zj=globalThis.location)==null?void 0:zj.href,assetsPath:"",fontsUrl:"https://static.arcgis.com/fonts",geometryServiceUrl:"https://utility.arcgisonline.com/arcgis/rest/services/Geometry/GeometryServer",geoRSSServiceUrl:"https://utility.arcgis.com/sharing/rss",kmlServiceUrl:"https://utility.arcgis.com/sharing/kml",userPrivilegesApplied:!1,portalUrl:"https://www.arcgis.com",routeServiceUrl:"https://route-api.arcgis.com/arcgis/rest/services/World/Route/NAServer/Route_World",workers:{loaderConfig:{has:{},paths:{},map:{},packages:[]}},request:{crossOriginNoCorsDomains:null,httpsDomains:["arcgis.com","arcgisonline.com","esrikr.com","premiumservices.blackbridge.com","esripremium.accuweather.com","gbm.digitalglobe.com","firstlook.digitalglobe.com","msi.digitalglobe.com"],interceptors:[],maxUrlLength:2e3,priority:"high",proxyRules:[],proxyUrl:null,timeout:6e4,trustedServers:[],useIdentity:!0},log:{interceptors:[],level:null}};if(globalThis.esriConfig&&(vV(ot,globalThis.esriConfig,!0),delete ot.has),!ot.assetsPath){{const e="4.27";ot.assetsPath=`https://js.arcgis.com/${e}/@arcgis/core/assets`}ot.defaultAssetsPath=ot.assetsPath}const mre=/\{([^\}]+)\}/g;function BL(e){return e??""}function Qx(e,t){return e.replaceAll(mre,typeof t=="object"?(r,n)=>BL(Zv(n,t)):(r,n)=>BL(t(n)))}function wO(e,t){return e.replaceAll(/([\.$?*|{}\(\)\[\]\\\/\+\-^])/g,r=>t&&t.includes(r)?r:`\\${r}`)}function _O(e){let t=0;for(let r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t|=0;return t}function $Ie(e){return new DOMParser().parseFromString(e||"","text/html").body.innerText||""}function TIe(e,t){return new RegExp(`{${t}}`,"ig").test(e)}const qL={info:0,warn:1,error:2,none:3};let Z=class Mn{constructor(t){this.level=null,this._module="",this._parent=null,this.writer=null,this._loggedMessages={error:new Map,warn:new Map,info:new Map},t.level!=null&&(this.level=t.level),t.writer!=null&&(this.writer=t.writer),this._module=t.module,Mn._loggers.set(this.module,this);const r=this.module.lastIndexOf(".");r!==-1&&(this._parent=Mn.getLogger(this.module.slice(0,r)))}get module(){return this._module}get parent(){return this._parent}error(...t){this._log("error","always",...t)}warn(...t){this._log("warn","always",...t)}info(...t){this._log("info","always",...t)}errorOnce(...t){this._log("error","once",...t)}warnOnce(...t){this._log("warn","once",...t)}infoOnce(...t){this._log("info","once",...t)}errorOncePerTick(...t){this._log("error","oncePerTick",...t)}warnOncePerTick(...t){this._log("warn","oncePerTick",...t)}infoOncePerTick(...t){this._log("info","oncePerTick",...t)}get test(){const t=this;return{loggedMessages:t._loggedMessages,clearLoggedWarnings:()=>t._loggedMessages.warn.clear()}}static get test(){return{resetLoggers(t=new Map){const r=Mn._loggers;return Mn._loggers=t,r},set throttlingDisabled(t){Mn._throttlingDisabled=t}}}static getLogger(t){return t=typeof t!="string"?t.declaredClass:t,Mn._loggers.get(t)||new Mn({module:t})}_log(t,r,...n){if(this._matchLevel(t)){if(r!=="always"&&!Mn._throttlingDisabled){const i=this._argsToKey(n),s=this._loggedMessages[t].get(i);if(r==="once"&&s!=null||r==="oncePerTick"&&s&&s>=Mn._tickCounter)return;this._loggedMessages[t].set(i,Mn._tickCounter),Mn._scheduleTickCounterIncrement()}for(const i of ot.log.interceptors)if(i(t,this.module,...n))return;this._inheritedWriter()(t,this.module,...n)}}_parentWithMember(t,r){let n=this;for(;n!=null;){const i=n[t];if(i!=null)return i;n=n.parent}return r}_inheritedWriter(){return this._parentWithMember("writer",this._consoleWriter)}_consoleWriter(t,r,...n){console[t](`[${r}]`,...n)}_matchLevel(t){const r=ot.log.level||"warn";return qL[this._parentWithMember("level",r)]<=qL[t]}_argsToKey(...t){return _O(JSON.stringify(t,(n,i)=>typeof i!="object"||Array.isArray(i)?i:"[Object]"))}static _scheduleTickCounterIncrement(){Mn._tickCounterScheduled||(Mn._tickCounterScheduled=!0,Promise.resolve().then(()=>{Mn._tickCounter++,Mn._tickCounterScheduled=!1}))}};Z._loggers=new Map,Z._tickCounter=0,Z._tickCounterScheduled=!1,Z._throttlingDisabled=!1;var Il;(function(e){e[e.INITIALIZING=0]="INITIALIZING",e[e.CONSTRUCTING=1]="CONSTRUCTING",e[e.CONSTRUCTED=2]="CONSTRUCTED"})(Il||(Il={}));let yre=class{constructor(t,r){this._observers=t,this._observer=r}remove(){ire(this._observers,this._observer)}},bV=class{constructor(){this._observers=null,this.destroyed=!1}observe(t){if(this.destroyed||t.destroyed)return gre;this._observers==null&&(this._observers=[]);const r=this._observers;let n=!1,i=!1;const s=r.length;for(let o=0;o<s;++o){const a=r[o];if(a.destroyed)i=!0;else if(a===t){n=!0;break}}return n||(r.push(t),i&&this._removeDestroyedObservers()),new yre(r,t)}_removeDestroyedObservers(){const t=this._observers;if(!t||t.length===0)return;const r=t.length;let n=0;for(let i=0;i<r;++i){for(;i+n<r&&t[i+n].destroyed;)++n;if(n>0){if(!(i+n<r))break;t[i]=t[i+n]}}t.length=r-n}destroy(){if(this.destroyed)return;this.destroyed=!0;const t=this._observers;if(t!=null){for(const r of t)r.onCommitted();this._observers=null}}};const gre=Hl();var ae;(function(e){e[e.DEFAULTS=0]="DEFAULTS",e[e.COMPUTED=1]="COMPUTED",e[e.SERVICE=2]="SERVICE",e[e.PORTAL_ITEM=3]="PORTAL_ITEM",e[e.WEB_SCENE=4]="WEB_SCENE",e[e.WEB_MAP=5]="WEB_MAP",e[e.LINK_CHART=6]="LINK_CHART",e[e.USER=7]="USER"})(ae||(ae={}));const pM=ae.USER+1;function Kn(e){switch(e){case"defaults":return ae.DEFAULTS;case"service":return ae.SERVICE;case"portal-item":return ae.PORTAL_ITEM;case"web-scene":return ae.WEB_SCENE;case"web-map":return ae.WEB_MAP;case"link-chart":return ae.LINK_CHART;case"user":return ae.USER;default:return null}}function av(e){switch(e){case ae.DEFAULTS:return"defaults";case ae.SERVICE:return"service";case ae.PORTAL_ITEM:return"portal-item";case ae.WEB_SCENE:return"web-scene";case ae.WEB_MAP:return"web-map";case ae.LINK_CHART:return"link-chart";case ae.USER:return"user"}return void 0}function vre(e){return av(e)}var Et;(function(e){e[e.Dirty=1]="Dirty",e[e.Overriden=2]="Overriden",e[e.Computing=4]="Computing",e[e.NonNullable=8]="NonNullable",e[e.HasDefaultValue=16]="HasDefaultValue",e[e.DepTrackingInitialized=32]="DepTrackingInitialized",e[e.AutoTracked=64]="AutoTracked",e[e.ExplicitlyTracking=128]="ExplicitlyTracking"})(Et||(Et={}));const oS={onObservableAccessed:()=>{},onTrackingEnd:()=>{}},Ky=[];let n0=oS;function Ve(e){n0.onObservableAccessed(e)}let m_=!1,y_=!1;function Zl(e,t,r){if(m_)return bO(e,t,r);SV(e);const n=t.call(r);return xV(),n}function wre(e,t){return Zl(oS,e,t)}function bO(e,t,r){const n=m_;m_=!0,SV(e);let i=null;try{i=t.call(r)}catch(s){y_&&Z.getLogger("esri.core.accessorSupport.tracking").error(s)}return xV(),m_=n,i}function SV(e){n0=e,Ky.push(e)}function xV(){const e=Ky.length;if(e>1){const t=Ky.pop();n0=Ky[e-2],t.onTrackingEnd()}else if(e===1){const t=Ky.pop();n0=oS,t.onTrackingEnd()}else n0=oS}function $V(e,t){const r=t.observerObject;if(r.flags&Et.DepTrackingInitialized)return;const n=y_;y_=!1,r.flags&Et.AutoTracked?bO(t,t.metadata.get,e):TV(e,t),y_=n}const _re=[];function TV(e,t){const r=t.observerObject;r.flags&Et.ExplicitlyTracking||(r.flags|=Et.ExplicitlyTracking,bO(t,()=>{const n=t.metadata.dependsOn||_re;for(const i of n)if(typeof i!="string"||i.includes(".")){const s=pV(i);for(let o=0,a=e;o<s.length&&a!=null&&typeof a=="object";++o)a=WL(a,s[o],o!==s.length-1)}else WL(e,i,!1)}),r.flags&=~Et.ExplicitlyTracking)}function WL(e,t,r){const n=t[t.length-1]==="?"?t.slice(0,-1):t;if(e.getItemAt!=null||Array.isArray(e)){const s=parseInt(n,10);if(!isNaN(s))return Array.isArray(e)?e[s]:e.at(s)}const i=Xr(e);if(i){const s=i.propertiesByName.get(n);s&&(Ve(s.observerObject),$V(e,s))}return r?e[n]:void 0}let HL=class{constructor(t,r){this.propertyName=t,this.metadata=r,this.observerObject=new bre,this._accessed=null,this._handles=null,this.observerObject.flags=Et.Dirty|(r.nonNullable?Et.NonNullable:0)|(r.hasOwnProperty("value")?Et.HasDefaultValue:0)|(r.get===void 0?Et.DepTrackingInitialized:0)|(r.dependsOn===void 0?Et.AutoTracked:0)}destroy(){this.observerObject.destroy(),this._accessed=null,this._clearObservationHandles()}getComputed(t){const r=this.observerObject;Ve(r);const n=t.store,i=this.propertyName,s=r.flags,o=n.get(i);if(s&Et.Computing||~s&Et.Dirty&&n.has(i))return o;r.flags|=Et.Computing;const a=t.host;let l;s&Et.AutoTracked?l=Zl(this,this.metadata.get,a):(TV(a,this),l=this.metadata.get.call(a)),n.set(i,l,ae.COMPUTED);const c=n.get(i);return c===o?r.flags&=~Et.Dirty:wre(this.commit,this),r.flags&=~Et.Computing,c}onObservableAccessed(t){if(t===this.observerObject)return;let r=this._accessed;if(r==null)r=[],this._accessed=r;else if(r.includes(t))return;r.push(t)}onTrackingEnd(){this._clearObservationHandles();const t=this.observerObject;t.flags|=Et.DepTrackingInitialized;const r=this._accessed;if(r==null||r.length===0)return;let n=this._handles;n==null&&(n=[],this._handles=n);for(let i=0;i<r.length;++i)n.push(r[i].observe(t));r.length=0}notifyChange(){const t=this.observerObject;t.onInvalidated(),t.onCommitted()}invalidate(){this.observerObject.onInvalidated()}commit(){const t=this.observerObject;t.flags&=~Et.Dirty,t.onCommitted()}_clearObservationHandles(){const t=this._handles;if(t!==null){for(let r=0;r<t.length;++r)t[r].remove();t.length=0}}},bre=class extends bV{constructor(){super(...arguments),this.flags=0}onInvalidated(){~this.flags&Et.Overriden&&(this.flags|=Et.Dirty);const t=this._observers;if(t&&t.length>0)for(const r of t)r.onInvalidated()}onCommitted(){const t=this._observers;if(t&&t.length>0){const r=t.slice();for(const n of r)n.onCommitted()}}destroy(){this.flags&Et.Dirty&&this.onCommitted(),super.destroy()}},Sre=class EV{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(t){const r=new EV;return this._values.forEach((n,i)=>{t&&t.has(i)||r.set(i,F(n))}),r}get(t){return this._values.get(t)}originOf(){return ae.USER}keys(){return[...this._values.keys()]}set(t,r){this._values.set(t,r)}delete(t){this._values.delete(t)}has(t){return this._values.has(t)}forEach(t){this._values.forEach(t)}};function Z1(e,t,r){return e!==void 0}function ZL(e,t,r,n){return e!==void 0&&(!(r==null&&e.observerObject.flags&Et.NonNullable)||(n.lifecycle,Il.INITIALIZING,!1))}function xre(e){return e&&typeof e.destroy=="function"}Z.getLogger("esri.core.accessorSupport.Properties");let $re=class{constructor(t){this.host=t,this.propertiesByName=new Map,this.ctorArgs=null,this.destroyed=!1,this.lifecycle=Il.INITIALIZING,this.store=new Sre,this._origin=ae.USER;const r=this.host.constructor.__accessorMetadata__;for(const n in r){const i=new HL(n,r[n]);this.propertiesByName.set(n,i)}this.metadatas=r}initialize(){this.lifecycle=Il.CONSTRUCTING}constructed(){this.lifecycle=Il.CONSTRUCTED}destroy(){this.destroyed=!0;for(const[t,r]of this.propertiesByName){if(r.metadata.autoDestroy){const n=this.internalGet(t);n&&xre(n)&&(n.destroy(),~r.observerObject.flags&Et.NonNullable&&this._internalSet(r,null))}r.destroy()}}get initialized(){return this.lifecycle!==Il.INITIALIZING}get(t){const r=this.propertiesByName.get(t);if(r.metadata.get)return r.getComputed(this);Ve(r.observerObject);const n=this.store;return n.has(t)?n.get(t):r.metadata.value}originOf(t){const r=this.store.originOf(t);if(r===void 0){const n=this.propertiesByName.get(t);if(n!==void 0&&n.observerObject.flags&Et.HasDefaultValue)return"defaults"}return av(r)}has(t){return!!this.propertiesByName.has(t)&&this.store.has(t)}keys(){return[...this.propertiesByName.keys()]}internalGet(t){const r=this.propertiesByName.get(t);if(Z1(r))return this.store.has(t)?this.store.get(t):r.metadata.value}internalSet(t,r){const n=this.propertiesByName.get(t);Z1(n)&&this._internalSet(n,r)}getDependsInfo(t,r,n){const i=this.propertiesByName.get(r);if(!Z1(i))return"";const s=new Set,o=Zl({onObservableAccessed:l=>s.add(l),onTrackingEnd:()=>{}},()=>{var l;return(l=i.metadata.get)==null?void 0:l.call(t)});let a=`${n}${t.declaredClass.split(".").pop()}.${r}: ${o}
`;if(s.size===0)return a;n+="  ";for(const l of s)l instanceof HL&&(a+=`${n}${l.propertyName}: undefined
`);return a}setAtOrigin(t,r,n){const i=this.propertiesByName.get(t);if(Z1(i))return this._setAtOrigin(i,r,n)}isOverridden(t){const r=this.propertiesByName.get(t);return r!==void 0&&!!(r.observerObject.flags&Et.Overriden)}clearOverride(t){const r=this.propertiesByName.get(t),n=r==null?void 0:r.observerObject;n&&n.flags&Et.Overriden&&(n.flags&=~Et.Overriden,r.notifyChange())}override(t,r){const n=this.propertiesByName.get(t);if(!ZL(n,t,r,this))return;const i=n.metadata.cast;if(i){const s=this._cast(i,r),{valid:o,value:a}=s;if(k$.release(s),!o)return;r=a}n.observerObject.flags|=Et.Overriden,this._internalSet(n,r)}set(t,r){const n=this.propertiesByName.get(t);if(!ZL(n,t,r,this))return;const i=n.metadata.cast;if(i){const o=this._cast(i,r),{valid:a,value:l}=o;if(k$.release(o),!a)return;r=l}const s=n.metadata.set;s?s.call(this.host,r):this._internalSet(n,r)}setDefaultOrigin(t){this._origin=Kn(t)}getDefaultOrigin(){return av(this._origin)}notifyChange(t){const r=this.propertiesByName.get(t);r!==void 0&&r.notifyChange()}invalidate(t){const r=this.propertiesByName.get(t);r!==void 0&&r.invalidate()}commit(t){const r=this.propertiesByName.get(t);r!==void 0&&r.commit()}_internalSet(t,r){const n=this.lifecycle!==Il.INITIALIZING?this._origin:ae.DEFAULTS;this._setAtOrigin(t,r,n)}_setAtOrigin(t,r,n){const i=this.store,s=t.propertyName;i.has(s,n)&&vO(r,i.get(s))&&~t.observerObject.flags&Et.Overriden&&n===i.originOf(s)||(t.invalidate(),i.set(s,r,n),t.commit(),$V(this.host,t))}_cast(t,r){const n=k$.acquire();return n.valid=!0,n.value=r,t&&(n.value=t.call(this.host,r,n)),n}},Tre=class{constructor(){this.value=null,this.valid=!0}acquire(){this.valid=!0}release(){this.value=null}};const k$=new ud(Tre);function Ere(e,t){return e.replaceAll(/\$\{([^\s\:\}]*)(?:\:([^\s\:\}]+))?\}/g,(r,n)=>n===""?"$":(Zv(n,t)??"").toString())}let MV=class{constructor(t,r,n){this.name=t,this.details=n,this.message=(r&&Ere(r,n))??""}toString(){return"["+this.name+"]: "+this.message}},N=class IV extends MV{constructor(t,r,n){super(t,r,n)}toJSON(){if(this.details!=null)try{return{name:this.name,message:this.message,details:JSON.parse(JSON.stringify(this.details,(t,r)=>{if(r&&typeof r=="object"&&typeof r.toJSON=="function")return r;try{return F(r)}catch{return"[object]"}}))}}catch(t){throw Z.getLogger("esri.core.Error").error(t),t}return{name:this.name,message:this.message,details:this.details}}static fromJSON(t){return new IV(t.name,t.message,t.details)}};N.prototype.type="error";function aS(e,t,r){if(e&&t)if(typeof t=="object")for(const n of Object.getOwnPropertyNames(t))aS(e,n,t[n]);else{if(t.includes(".")){const i=t.split("."),s=i.splice(i.length-1,1)[0];return void aS(sS(e,i),s,r)}const n=e.__accessor__;n!=null&&Mre(t,n),e[t]=r}}function Mre(e,t){if(V("esri-unknown-property-errors")&&!Ire(e,t))throw new N("set:unknown-property",Cre(e,t))}function Ire(e,t){return t.metadatas[e]!=null}function Cre(e,t){return"setting unknown property '"+e+"' on instance of "+t.host.declaredClass}let kre;function Pre(){return kre}let CV=class extends ud{constructor(){super(...arguments),this._set=new Set}destroy(){super.destroy(),this._set=ere(this._set)}acquire(...t){const r=super.acquire(...t);return this._set.delete(r),r}release(t){t&&!this._set.has(t)&&(super.release(t),this._set.add(t))}_dispose(t){this._set.delete(t),super._dispose(t)}};const J1=[];function lS(e){J1.push(e),J1.length===1&&queueMicrotask(()=>{const t=J1.slice();J1.length=0;for(const r of t)r()})}let i0=class{constructor(t,r=30){this.name=t,this._counter=0,this._samples=new Array(r)}record(t){t!=null&&(this._samples[++this._counter%this._samples.length]=t)}get median(){return this._samples.slice().sort((t,r)=>t-r)[Math.floor(this._samples.length/2)]}get average(){return this._samples.reduce((t,r)=>t+r,0)/this._samples.length}get last(){return this._samples[this._counter%this._samples.length]}};var fM;(function(e){const t=(s,o,a,l)=>{let c=o,h=o;const f=a>>>1,m=s[c-1];for(;h<=f;){h=c<<1,h<a&&l(s[h-1],s[h])<0&&++h;const y=s[h-1];if(l(y,m)<=0)break;s[c-1]=y,c=h}s[c-1]=m},r=(s,o)=>s<o?-1:s>o?1:0;function n(s,o,a,l){o===void 0&&(o=0),a===void 0&&(a=s.length),l===void 0&&(l=r);for(let h=a>>>1;h>o;h--)t(s,h,a,l);const c=o+1;for(let h=a-1;h>o;h--){const f=s[o];s[o]=s[h],s[h]=f,t(s,c,h,l)}}function*i(s,o,a,l){o===void 0&&(o=0),a===void 0&&(a=s.length),l===void 0&&(l=r);for(let h=a>>>1;h>o;h--)t(s,h,a,l),yield;const c=o+1;for(let h=a-1;h>o;h--){const f=s[o];s[o]=s[h],s[h]=f,t(s,c,h,l),yield}}e.sort=n,e.iterableSort=i})(fM||(fM={}));const JL=fM,Ore=1.5,Rre=1.1;let Nh=class{constructor(t){this.data=[],this._length=0,this._allocator=void 0,this._deallocator=()=>null,this._shrink=()=>{},this._hint=new rV,t&&(t.initialSize&&(this.data=new Array(t.initialSize)),t.allocator&&(this._allocator=t.allocator),t.deallocator!==void 0&&(this._deallocator=t.deallocator),t.shrink&&(this._shrink=()=>QL(this)))}toArray(){return this.data.slice(0,this.length)}filter(t){const r=new Array;for(let n=0;n<this._length;n++){const i=this.data[n];t(i)&&r.push(i)}return r}at(t){if((t=Math.trunc(t)||0)<0&&(t+=this._length),!(t<0||t>=this._length))return this.data[t]}includes(t,r){const n=this.data.indexOf(t,r);return n!==-1&&n<this.length}get length(){return this._length}set length(t){if(t>this._length){if(this._allocator){for(;this._length<t;)this.data[this._length++]=this._allocator(this.data[this._length]);return}this._length=t}else{if(this._deallocator)for(let r=t;r<this._length;++r)this.data[r]=this._deallocator(this.data[r]);this._length=t,this._shrink()}}clear(){this.length=0}prune(){this.clear(),this.data=[]}push(t){this.data[this._length++]=t}pushArray(t,r=t.length){for(let n=0;n<r;n++)this.data[this._length++]=t[n]}fill(t,r){for(let n=0;n<r;n++)this.data[this._length++]=t}pushNew(){this._allocator&&(this.data[this.length]=this._allocator(this.data[this.length]));const t=this.data[this._length];return++this._length,t}unshift(t){this.data.unshift(t),this._length++,QL(this)}pop(){if(this.length===0)return;const t=this.data[this.length-1];return this.length=this.length-1,this._shrink(),t}remove(t){const r=dM(this.data,t,this.length,this._hint);if(r!==-1)return this.data.splice(r,1),this.length=this.length-1,t}removeUnordered(t){return this.removeUnorderedIndex(dM(this.data,t,this.length,this._hint))}removeUnorderedIndex(t){if(!(t>=this.length||t<0))return this.swapElements(t,this.length-1),this.pop()}removeUnorderedMany(t,r=t.length,n){this.length=nre(this.data,t,this.length,r,this._hint,n),this._shrink()}front(){if(this.length!==0)return this.data[0]}back(){if(this.length!==0)return this.data[this.length-1]}swapElements(t,r){if(t>=this.length||r>=this.length||t===r)return;const n=this.data[t];this.data[t]=this.data[r],this.data[r]=n}sort(t){JL.sort(this.data,0,this.length,t)}iterableSort(t){return JL.iterableSort(this.data,0,this.length,t)}some(t,r){for(let n=0;n<this.length;++n)if(t.call(r,this.data[n],n,this.data))return!0;return!1}find(t,r){for(let n=0;n<this.length;++n){const i=this.data[n];if(t.call(r,i,n))return i}}filterInPlace(t,r){let n=0;for(let i=0;i<this._length;++i){const s=this.data[i];t.call(r,s,i,this.data)&&(this.data[i]=this.data[n],this.data[n]=s,n++)}if(this._deallocator)for(let i=n;i<this._length;i++)this.data[i]=this._deallocator(this.data[i]);return this._length=n,this._shrink(),this}forAll(t,r){const n=this.length,i=this.data;for(let s=0;s<n;++s)t.call(r,i[s],s,i)}forEach(t,r){for(let n=0;n<this.length;++n)t.call(r,this.data[n],n,this.data)}map(t,r){const n=new Array(this.length);for(let i=0;i<this.length;++i)n[i]=t.call(r,this.data[i],i,this.data);return n}reduce(t,r){let n=r;for(let i=0;i<this.length;++i)n=t(n,this.data[i],i,this.data);return n}has(t){const r=this.length,n=this.data;for(let i=0;i<r;++i)if(n[i]===t)return!0;return!1}};function QL(e){e.data.length>Ore*e.length&&(e.data.length=Math.floor(e.length*Rre))}function Are(e){return{setTimeout:(t,r)=>{const n=e.setTimeout(t,r);return{remove:()=>e.clearTimeout(n)}}}}const Gm=Are(globalThis);function Yx(e){return e&&(typeof e.on=="function"||typeof e.addEventListener=="function")}function Kx(e,t,r){if(!Yx(e))throw new TypeError("target is not a Evented or EventTarget object");if("on"in e)return e.on(t,r);if(Array.isArray(t)){const n=t.slice();for(const i of n)e.addEventListener(i,r);return{remove(){for(const i of n)e.removeEventListener(i,r)}}}return e.addEventListener(t,r),{remove(){e.removeEventListener(t,r)}}}function kV(e,t,r){if(!Yx(e))throw new TypeError("target is not a Evented or EventTarget object");if("once"in e)return e.once(t,r);const n=Kx(e,t,i=>{n.remove(),r.call(e,i)});return{remove(){n.remove()}}}const Lre={Win:"Meta",Scroll:"ScrollLock",Spacebar:" ",Down:"ArrowDown",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Del:"Delete",Apps:"ContextMenu",Esc:"Escape",Multiply:"*",Add:"+",Subtract:"-",Decimal:".",Divide:"/"};function s0({key:e}){return Lre[e]||e}function ar(e="Aborted"){return new N("AbortError",e)}function qt(e,t="Aborted"){if(Go(e))throw ar(t)}function Xx(e){return e!=null?"aborted"in e?e:e.signal:e}function Go(e){const t=Xx(e);return t!=null&&t.aborted}function Ea(e){if(Ei(e))throw e}function YL(e){if(!Ei(e))throw e}function As(e,t){const r=Xx(e);if(r!=null){if(!r.aborted)return kV(r,"abort",()=>t());t()}}function SO(e,t){const r=Xx(e);if(r!=null)return qt(r),kV(r,"abort",()=>t(ar()))}function yu(e,t){return Xx(t)==null?e:new Promise((r,n)=>{let i=As(t,()=>n(ar()));const s=()=>i=or(i);e.then(s,s),e.then(r,n)})}function Ei(e){return(e==null?void 0:e.name)==="AbortError"}async function mM(e){try{return await e}catch(t){if(!Ei(t))throw t;return}}async function Mo(e){if(!e)return;if(typeof e.forEach!="function"){const r=Object.keys(e),n=r.map(o=>e[o]),i=await Mo(n),s={};return r.map((o,a)=>s[o]=i[a]),s}const t=e;return Promise.allSettled(t).then(r=>Array.from(t,(n,i)=>{const s=r[i];return s.status==="fulfilled"?{promise:n,value:s.value}:{promise:n,error:s.reason}}))}async function Nre(e){return(await Mo(e)).filter(t=>!!t.value).map(t=>t.value)}function xO(e,t=void 0,r){const n=new AbortController;return As(r,()=>n.abort()),new Promise((i,s)=>{let o=setTimeout(()=>{o=0,i(t)},e);As(n,()=>{o&&(clearTimeout(o),s(ar()))})})}function au(e){return e&&typeof e.then=="function"}function yM(e){return au(e)?e:Promise.resolve(e)}function PV(e,t=-1){let r,n,i,s,o=null;const a=(...l)=>{if(r){n=l,s&&s.reject(ar()),s=Bo();const m=s.promise;if(o){const y=o;o=null,y.abort()}return m}if(i=s||Bo(),s=null,t>0){const m=new AbortController;r=yM(e(...l,m.signal));const y=r;xO(t).then(()=>{r===y&&(s?m.abort():o=m)})}else r=1,r=yM(e(...l));const c=()=>{const m=n;n=i=r=o=null,m!=null&&a(...m)},h=r,f=i;return h.then(c,c),h.then(f.resolve,f.reject),f.promise};return a}function Bo(){let e,t;const r=new Promise((i,s)=>{e=i,t=s}),n=i=>{e(i)};return n.resolve=i=>e(i),n.reject=i=>t(i),n.timeout=(i,s)=>Gm.setTimeout(()=>n.reject(s),i),n.promise=r,n}async function KL(e){await Promise.resolve(),qt(e)}function NIe(e){return e}let Dre=class{constructor(t){this.phases=t,this.paused=!1,this.ticks=-1,this.removed=!1}},Fre=class{constructor(t){this.callback=t,this.isActive=!0}remove(){this.isActive=!1}},gM=0;const My={time:0,deltaTime:0,elapsedFrameTime:0,frameDuration:0},vM=["prepare","preRender","render","postRender","update","finish"],wM=[],Xh=new Nh;let jre=class{constructor(t){this._task=t}remove(){this._task.removed=!0}pause(){this._task.paused=!0}resume(){this._task.paused=!1}};const uS={frameTasks:Xh,willDispatch:!1,clearFrameTasks:Vre,dispatch:AV,executeFrameTasks:zre};function Bm(e){const t=new Fre(e);return wM.push(t),uS.willDispatch||(uS.willDispatch=!0,lS(AV)),t}function xm(e){const t=new Dre(e);return Xh.push(t),cS==null&&(gM=performance.now(),cS=requestAnimationFrame(OV)),new jre(t)}let cS=null;function Vre(e=!1){Xh.forAll(t=>{t.removed=!0}),e&&RV()}function OV(){const e=performance.now();cS=null,cS=Xh.length>0?requestAnimationFrame(OV):null,uS.executeFrameTasks(e)}function zre(e){const t=e-gM;gM=e;const r=1e3/60,n=Math.max(0,t-r);My.time=e,My.frameDuration=r-n;for(let i=0;i<vM.length;i++){const s=performance.now(),o=vM[i];Xh.forAll(a=>{var l;a.paused||a.removed||(i===0&&a.ticks++,a.phases[o]&&(My.elapsedFrameTime=performance.now()-e,My.deltaTime=a.ticks===0?0:t,(l=a.phases[o])==null||l.call(a,My)))}),Ure[i].record(performance.now()-s)}RV(),Gre.record(performance.now()-e)}const Q1=new Nh;function RV(){Xh.forAll(e=>{e.removed&&Q1.push(e)}),Xh.removeUnorderedMany(Q1.data,Q1.length),Q1.clear()}function AV(){for(;wM.length;){const e=wM.shift();e.isActive&&e.callback()}uS.willDispatch=!1}function VIe(e=1,t){const r=Bo(),n=()=>{Go(t)?r.reject(ar()):e===0?r():(--e,lS(()=>n()))};return n(),r.promise}const Ure=vM.map(e=>new i0(e)),Gre=new i0("total");function Bre(e,t){for(const r of e.entries())if(t(r[0]))return!0;return!1}let qre=0;function o0(){return++qre}let e2=class{constructor(t){this._accessed=[],this._handles=[],this._observerObject=new Wre(t),XL.register(this,new WeakRef(this._observerObject),this)}destroy(){var t;XL.unregister(this._observerObject),this._accessed.length=0,(t=this._observerObject)==null||t.destroy(),this.clear()}onObservableAccessed(t){const r=this._accessed;r.includes(t)||r.push(t)}onTrackingEnd(){const t=this._handles,r=this._accessed,n=this._observerObject;for(let i=0;i<r.length;++i)t.push(r[i].observe(n));r.length=0}clear(){const t=this._handles;for(let r=0;r<t.length;++r)t[r].remove();t.length=0}},Wre=class{constructor(t){this._notify=t,this._invalidCount=0,this.destroyed=!1}onInvalidated(){this._invalidCount++}onCommitted(){if(this.destroyed)return;const t=this._invalidCount;if(t===1)return this._invalidCount=0,void this._notify();this._invalidCount=t>0?t-1:0}destroy(){this.destroyed=!0,this._notify=Hre}};const XL=new FinalizationRegistry(e=>{var t;(t=e.deref())==null||t.destroy()});function Hre(){}let Kf=!1;const dS=[];function LV(e,t){let r=new e2(s),n=null,i=!1;function s(){if(!r||i)return;if(Kf)return void FV(s);const a=n;r.clear(),Kf=!0,i=!0,n=Zl(r,e),i=!1,Kf=!1,t(n,a),jV()}function o(){r&&(r.destroy(),r=null,n=null)}return i=!0,n=Zl(r,e),i=!1,{remove:o}}function NV(e,t){let r=new e2(i),n=null;function i(){t(n,o)}function s(){r&&(r.destroy(),r=null),n=null}function o(){return r?(r.clear(),n=Zl(r,e),n):null}return o(),{remove:s}}function DV(e){let t=new e2(n),r=!1;function n(){t&&!r&&(Kf?FV(n):(t.clear(),Kf=!0,r=!0,Zl(t,e),r=!1,Kf=!1,jV()))}function i(){t&&(t.destroy(),t=null)}return r=!0,Zl(t,e),r=!1,{remove:i}}function FV(e){dS.includes(e)||dS.unshift(e)}function jV(){for(;dS.length;)dS.pop()()}var a0;(function(e){e[e.Untracked=0]="Untracked",e[e.Tracked=1]="Tracked"})(a0||(a0={}));let lv=class{constructor(){this.uid=o0(),this.removed=!1,this.type=null,this.oldValue=null,this.callback=null,this.getValue=null,this.target=null,this.path=null,this.equals=null}static acquireUntracked(t,r,n,i,s){return this.pool.acquire(a0.Untracked,t,r,n,i,s,vO)}static acquireTracked(t,r,n,i){return this.pool.acquire(a0.Tracked,t,r,n,null,null,i)}notify(t,r){this.type===a0.Untracked?this.callback.call(this.target,t,r,this.path,this.target):this.callback.call(null,t,r,void 0,void 0)}acquire(t,r,n,i,s,o,a){this.uid=o0(),this.removed=!1,this.type=t,this.oldValue=r,this.callback=n,this.getValue=i,this.target=s,this.path=o,this.equals=a}release(){this.target=this.path=this.oldValue=this.callback=this.getValue=null,this.uid=o0(),this.removed=!0}};lv.pool=new CV(lv);const g_=new Yn,Nl=new Set;let hS;function pS(e){Nl.delete(e),Nl.add(e),hS||(hS=Bm(Qre))}function Zre(e){if(e.removed)return;const t=e.oldValue,r=e.getValue();e.equals(t,r)||(e.oldValue=r,e.notify(r,t))}function Jre(e){for(const t of Nl.values())t.target===e&&(t.removed=!0)}function Qre(){let e=10;for(;hS&&e--;){hS=null;const t=Yre(),r=g_.acquire();for(const n of t){const i=n.uid;Zre(n),i===n.uid&&n.removed&&r.push(n)}for(const n of Nl)n.removed&&(r.push(n),Nl.delete(n));for(const n of r)lv.pool.release(n);g_.release(r),g_.release(t),_M.forEach(n=>n())}}function Yre(){const e=g_.acquire();e.length=Nl.size;let t=0;for(const r of Nl)e[t]=r,++t;return Nl.clear(),e}const _M=new Set;function Kre(e){return _M.add(e),{remove(){_M.delete(e)}}}function Xre(e,t,r){let n=fV(e,t,r,(i,s,o)=>{let a,l,c=NV(()=>Wv(i,s),(h,f)=>{i.__accessor__.destroyed||a&&a.uid!==l?n.remove():(a||(a=lv.acquireUntracked(h,o,f,i,s),l=a.uid),pS(a))});return{remove:mV(()=>{c.remove(),a&&(a.uid!==l||a.removed||(a.removed=!0,pS(a)),a=null),n=c=null})}});return n}function ene(e,t,r){const n=fV(e,t,r,(i,s,o)=>{let a=!1;return LV(()=>Wv(i,s),(l,c)=>{i.__accessor__.destroyed?n.remove():a||(a=!0,vO(c,l)||o.call(i,l,c,s,i),a=!1)})});return n}function tne(e,t,r,n=!1){return!e.__accessor__||e.__accessor__.destroyed?{remove(){}}:n?ene(e,t,r):Xre(e,t,r)}function rne(e,t,r){let n,i,s=NV(e,(o,a)=>{n&&n.uid!==i?s.remove():(n||(n=lv.acquireTracked(o,t,a,r),i=n.uid),pS(n))});return{remove:mV(()=>{s.remove(),n&&(n.uid!==i||n.removed||(n.removed=!0,pS(n)),n=null),s=null})}}function nne(e,t,r){let n=!1;return LV(e,(i,s)=>{n||(n=!0,r(s,i)||t(i,s),n=!1)})}function ine(e,t,r=!1,n=hV){return r?nne(e,t,n):rne(e,t,n)}function eN(e){return Bre(Nl,t=>t.oldValue===e)}function t2(e,t){for(const[r,n]of e)if(t(n,r))return!0;return!1}function VV(e,t,r){const n=e.get(t);if(n!==void 0)return n;const i=r();return e.set(t,i),i}const Xf=Z.getLogger("esri.core.accessorSupport.ensureTypes");function sne(e){return e==null?e:new Date(e)}function one(e){return e==null?e:!!e}function Jv(e){return e==null?e:e.toString()}function Ts(e){return e==null?e:(e=parseFloat(e),isNaN(e)?0:e)}function r2(e){return e==null?e:Math.round(parseFloat(e))}function zV(e){return e&&e.constructor&&e.constructor.__accessorMetadata__!==void 0}function fS(e,t){return t!=null&&e&&!(t instanceof e)}function UV(e){return e&&"isCollection"in e}function tN(e){return e&&e.Type?typeof e.Type=="function"?e.Type:e.Type.base:null}function ane(e,t){if(!t||!t.constructor||!UV(t.constructor))return bM(e,t)?t:new e(t);const r=tN(e.prototype.itemType),n=tN(t.constructor.prototype.itemType);return r?n?r===n?t:r.prototype.isPrototypeOf(n.prototype)?new e(t):(bM(e,t),t):new e(t):t}function bM(e,t){return!!zV(t)&&(Xf.error("Accessor#set","Assigning an instance of '"+(t.declaredClass||"unknown")+"' which is not a subclass of '"+n2(e)+"'"),!0)}function ep(e,t){return t==null?t:UV(e)?ane(e,t):fS(e,t)?bM(e,t)?t:new e(t):t}function n2(e){return e&&e.prototype&&e.prototype.declaredClass||"unknown"}const lne=new WeakMap;function une(e){switch(e){case Number:return Ts;case bt:return r2;case Boolean:return one;case String:return Jv;case Date:return sne;default:return VV(lne,e,()=>ep.bind(null,e))}}function gr(e,t){const r=une(e);return arguments.length===1?r:r(t)}function uv(e,t,r){return arguments.length===1?uv.bind(null,e):t&&(Array.isArray(t)?t.map(n=>e(n,r)):[e(t,r)])}function cne(e,t){return arguments.length===1?uv(r=>gr(e,r)):uv(r=>gr(e,r),t)}function GV(e,t,r){return t!==0&&Array.isArray(r)?r.map(n=>GV(e,t-1,n)):e(r)}function mS(e,t,r){if(arguments.length===2)return s=>mS(e,t,s);if(!r)return r;r=GV(e,t,r);let n=t,i=r;for(;n>0&&Array.isArray(i);)n--,i=i[0];if(i!==void 0)for(let s=0;s<n;s++)r=[r];return r}function dne(e,t,r){return arguments.length===2?mS(n=>gr(e,n),t):mS(n=>gr(e,n),t,r)}function BV(e){return!!Array.isArray(e)&&!e.some(t=>{const r=typeof t;return!(r==="string"||r==="number"||r==="function"&&e.length>1)})}function SM(e,t){if(arguments.length===2)return SM(e).call(null,t);const r=new Set,n=e.filter(a=>typeof a!="function"),i=e.filter(a=>typeof a=="function");for(const a of e)typeof a!="string"&&typeof a!="number"||r.add(a);let s=null,o=null;return(a,l)=>{if(a==null)return a;const c=typeof a,h=c==="string"||c==="number";return h&&(r.has(a)||i.some(f=>c==="string"&&f===String||c==="number"&&f===Number))||c==="object"&&i.some(f=>!fS(a,f))?a:(h&&n.length?(s||(s=n.map(f=>typeof f=="string"?`'${f}'`:`${f}`).join(", ")),Xf.error("Accessor#set",`'${a}' is not a valid value for this property, only the following values are valid: ${s}`)):typeof a=="object"&&i.length?(o||(o=i.map(f=>n2(f)).join(", ")),Xf.error("Accessor#set",`'${a}' is not a valid value for this property, value must be one of ${o}`)):Xf.error("Accessor#set",`'${a}' is not a valid value for this property`),l&&(l.valid=!1),null)}}function Jl(e,t){if(arguments.length===2)return Jl(e).call(null,t);const r={},n=[],i=[];for(const l in e.typeMap){const c=e.typeMap[l];r[l]=gr(c),n.push(n2(c)),i.push(l)}const s=()=>`'${n.join("', '")}'`,o=()=>`'${i.join("', '")}'`,a=typeof e.key=="string"?l=>l[e.key]:e.key;return l=>{if(e.base&&!fS(e.base,l)||l==null)return l;const c=a(l)||e.defaultKeyValue,h=r[c];if(!h)return Xf.error("Accessor#set",`Invalid property value, value needs to be one of ${s()}, or a plain object that can autocast (having .type = ${o()})`),null;if(!fS(e.typeMap[c],l))return l;if(typeof e.key=="string"&&!zV(l)){const f={};for(const m in l)m!==e.key&&(f[m]=l[m]);return h(f)}return h(l)}}let bt=class{};const qIe={native:e=>({type:"native",value:e}),array:e=>({type:"array",value:e}),oneOf:e=>({type:"one-of",values:e})};function hne(e){if(!e||!("type"in e))return!1;switch(e.type){case"native":case"array":case"one-of":return!0}return!1}function qV(e){switch(e.type){case"native":return gr(e.value);case"array":return uv(qV(e.value));case"one-of":return pne(e);default:return null}}function pne(e){let t=null;return(r,n)=>$M(r,e)?r:(t==null&&(t=xM(e)),Xf.error("Accessor#set",`Invalid property value, value needs to be of type ${t}`),n&&(n.valid=!1),null)}function xM(e){switch(e.type){case"native":switch(e.value){case Number:return"number";case String:return"string";case Boolean:return"boolean";case bt:return"integer";case Date:return"date";default:return n2(e.value)}case"array":return`array of ${xM(e.value)}`;case"one-of":{const t=e.values.map(r=>xM(r));return`one of ${t.slice(0,t.length-1)} or ${t[t.length-1]}`}}return"unknown"}function $M(e,t){if(e==null)return!0;switch(t.type){case"native":switch(t.value){case Number:case bt:return typeof e=="number";case Boolean:return typeof e=="boolean";case String:return typeof e=="string"}return e instanceof t.value;case"array":return!!Array.isArray(e)&&!e.some(r=>!$M(r,t.value));case"one-of":return t.values.some(r=>$M(e,r))}}function d(e={}){return(t,r)=>{if(t===Function.prototype)throw new Error(`Inappropriate use of @property() on a static field: ${t.name}.${r}. Accessor does not support static properties.`);const n=Object.getOwnPropertyDescriptor(t,r),i=Jx(t,r);n&&(n.get||n.set?(i.get=n.get||i.get,i.set=n.set||i.set):"value"in n&&("value"in e&&Z.getLogger("esri.core.accessorSupport.decorators.property").warn(`@property() will redefine the value of "${r}" on "${t.constructor.name}" already defined in the metadata`,e),i.value=e.value=n.value)),e.readOnly!=null&&(i.readOnly=e.readOnly);const s=e.aliasOf;if(s){const l=typeof s=="string"?s:s.source,c=typeof s=="string"?null:s.overridable===!0;let h;i.dependsOn=[l],i.get=function(){let f=sS(this,l);if(typeof f=="function"){h||(h=l.split(".").slice(0,-1).join("."));const m=sS(this,h);m&&(f=f.bind(m))}return f},i.readOnly||(i.set=c?function(f){this._override(r,f)}:function(f){aS(this,l,f)})}const o=e.type,a=e.types;i.cast||(o?i.cast=fne(o):a&&(Array.isArray(a)?i.cast=uv(Jl(a[0])):i.cast=Jl(a))),hre(i,e),e.range&&(i.cast=mne(i.cast,e.range))}}function WV(e,t,r){const n=Jx(e,r);n.json||(n.json={});let i=n.json;return t!==void 0&&(i.origins||(i.origins={}),i.origins[t]||(i.origins[t]={}),i=i.origins[t]),i}function fne(e){let t=0,r=e;if(hne(e))return qV(e);for(;Array.isArray(r)&&r.length===1&&typeof r[0]!="string"&&typeof r[0]!="number";)r=r[0],t++;const n=r;if(BV(n))return t===0?SM(n):mS(SM(n),t);if(t===1)return cne(n);if(t>1)return dne(n,t);const i=e;return i.from?i.from:gr(i)}function mne(e,t){return r=>{let n=+e(r);return t.step!=null&&(n=Math.round(n/t.step)*t.step),t.min!=null&&(n=Math.max(t.min,n)),t.max!=null&&(n=Math.min(t.max,n)),n}}function yne(e){if(e.json&&e.json.origins){const t=e.json.origins,r={"web-document":["web-scene","web-map"]};for(const n in r)if(t[n]){const i=t[n];r[n].forEach(s=>{t[s]=i}),delete t[n]}}}let qo=class extends MV{constructor(t,r,n){super(t,r,n)}};qo.prototype.type="warning";function HV(e){return!!e&&e.prototype&&e.prototype.declaredClass&&e.prototype.declaredClass.indexOf("esri.core.Collection")===0}const TM=Z.getLogger("esri.core.accessorSupport.extensions.serializableProperty.reader");function rN(e,t,r){var n,i;e&&(!r&&!t.read||(n=t.read)!=null&&n.reader||((i=t.read)==null?void 0:i.enabled)===!1||wne(e)&&vp("read.reader",Qv(e),t))}function Qv(e){var r,n;const t=e.ndimArray??0;if(t>1)return vne(e);if(t===1)return nN(e);if("type"in e&&JV(e.type)){const i=(n=(r=e.type.prototype)==null?void 0:r.itemType)==null?void 0:n.Type,s=nN(typeof i=="function"?{type:i}:{types:i});return(o,a,l)=>{const c=s(o,a,l);return c&&new e.type(c)}}return $O(e)}function $O(e){return"type"in e?gne(e.type):_ne(e.types)}function gne(e){return e.prototype.read?(t,r,n)=>{if(t==null)return t;const i=typeof t;if(i!=="object")return void TM.error(`Expected JSON value of type 'object' to deserialize type '${e.prototype.declaredClass}', but got '${i}'`);const s=new e;return s.read(t,n),s}:e.fromJSON}function ZV(e,t,r,n){return n!==0&&Array.isArray(t)?t.map(i=>ZV(e,i,r,n-1)):e(t,void 0,r)}function vne(e){const t=$O(e),r=ZV.bind(null,t),n=e.ndimArray??0;return(i,s,o)=>{if(i==null)return i;i=r(i,o,n);let a=n,l=i;for(;a>0&&Array.isArray(l);)a--,l=l[0];if(l!==void 0)for(let c=0;c<a;c++)i=[i];return i}}function nN(e){const t=$O(e);return(r,n,i)=>{if(r==null)return r;if(Array.isArray(r)){const o=[];for(const a of r){const l=t(a,void 0,i);l!==void 0&&o.push(l)}return o}const s=t(r,void 0,i);return s!==void 0?[s]:void 0}}function JV(e){if(!HV(e))return!1;const t=e.prototype.itemType;return!(!t||!t.Type)&&(typeof t.Type=="function"?TO(t.Type):QV(t.Type))}function wne(e){return"types"in e?QV(e.types):TO(e.type)}function TO(e){return!Array.isArray(e)&&!!e&&e.prototype&&("read"in e.prototype||"fromJSON"in e||JV(e))}function QV(e){for(const t in e.typeMap)if(!TO(e.typeMap[t]))return!1;return!0}function _ne(e){let t=null;const r=e.errorContext??"type";return(n,i,s)=>{if(n==null)return n;const o=typeof n;if(o!=="object")return void TM.error(`Expected JSON value of type 'object' to deserialize, but got '${o}'`);t||(t=bne(e));const a=e.key;if(typeof a!="string")return;const l=n[a],c=l?t[l]:e.defaultKeyValue?e.typeMap[e.defaultKeyValue]:void 0;if(!c){const f=`Type '${l||"unknown"}' is not supported`;return s&&s.messages&&n&&s.messages.push(new qo(`${r}:unsupported`,f,{definition:n,context:s})),void TM.error(f)}const h=new c;return h.read(n,s),h}}function bne(e){var r,n;const t={};for(const i in e.typeMap){const s=e.typeMap[i],o=Hv(s.prototype);if(typeof e.key=="function")continue;const a=o[e.key];if(!a)continue;(r=a.json)!=null&&r.type&&Array.isArray(a.json.type)&&a.json.type.length===1&&typeof a.json.type[0]=="string"&&(t[a.json.type[0]]=s);const l=(n=a.json)==null?void 0:n.write;if(!l||!l.writer){t[i]=s;continue}const c=l.target,h=typeof c=="string"?c:e.key,f={};l.writer(i,f,h),f[h]&&(t[f[h]]=s)}return t}function Sne(e){if(e.json||(e.json={}),sN(e.json),oN(e.json),iN(e.json),e.json.origins)for(const t in e.json.origins)sN(e.json.origins[t]),oN(e.json.origins[t]),iN(e.json.origins[t]);return!0}function iN(e){e.name&&(e.read&&typeof e.read=="object"?e.read.source===void 0&&(e.read.source=e.name):e.read={source:e.name},e.write&&typeof e.write=="object"?e.write.target===void 0&&(e.write.target=e.name):e.write={target:e.name})}function sN(e){typeof e.read=="boolean"?e.read={enabled:e.read}:typeof e.read=="function"?e.read={enabled:!0,reader:e.read}:e.read&&typeof e.read=="object"&&e.read.enabled===void 0&&(e.read.enabled=!0)}function oN(e){typeof e.write=="boolean"?e.write={enabled:e.write}:typeof e.write=="function"?e.write={enabled:!0,writer:e.write}:e.write&&typeof e.write=="object"&&e.write.enabled===void 0&&(e.write.enabled=!0)}function aN(e,t){if(!t.write||t.write.writer||t.write.enabled===!1&&!t.write.overridePolicy)return;const r=(e==null?void 0:e.ndimArray)??0;e&&(r===1||"type"in e&&HV(e.type))?t.write.writer=Tne:r>1?t.write.writer=Ene(r):t.types?Array.isArray(t.types)?t.write.writer=$ne(t.types[0]):t.write.writer=xne(t.types):t.write.writer=cv}function xne(e){return(t,r,n,i)=>t?YV(t,e,i)?cv(t,r,n,i):void 0:cv(t,r,n,i)}function YV(e,t,r){for(const n in t.typeMap)if(e instanceof t.typeMap[n])return!0;if(r!=null&&r.messages){const n=t.errorContext??"type",i=`Values of type '${(typeof t.key!="function"?e[t.key]:e.declaredClass)??"Unknown"}' cannot be written`;r&&r.messages&&e&&r.messages.push(new N(`${n}:unsupported`,i,{definition:e,context:r})),Z.getLogger("esri.core.accessorSupport.extensions.serializableProperty.writer").error(i)}return!1}function $ne(e){return(t,r,n,i)=>!t||!Array.isArray(t)?cv(t,r,n,i):cv(t.filter(s=>YV(s,e,i)),r,n,i)}function cv(e,t,r,n){vp(r,yS(e,n),t)}function yS(e,t){return e&&typeof e.write=="function"?e.write({},t):e&&typeof e.toJSON=="function"?e.toJSON():typeof e=="number"?gS(e):e}function gS(e){return e===-1/0?-Number.MAX_VALUE:e===1/0?Number.MAX_VALUE:isNaN(e)?null:e}function Tne(e,t,r,n){let i;e===null?i=null:e&&typeof e.map=="function"?(i=e.map(s=>yS(s,n)),typeof i.toArray=="function"&&(i=i.toArray())):i=[yS(e,n)],vp(r,i,t)}function KV(e,t,r){return r!==0&&Array.isArray(e)?e.map(n=>KV(n,t,r-1)):yS(e,t)}function Ene(e){return(t,r,n,i)=>{let s;if(t===null)s=null;else{s=KV(t,i,e);let o=e,a=s;for(;o>0&&Array.isArray(a);)o--,a=a[0];if(a!==void 0)for(let l=0;l<o;l++)s=[s]}vp(n,s,r)}}function Mne(e,t){return EO(e,"any",t==null?void 0:t.origin)}function EM(e,t){return EO(e,"read",t==null?void 0:t.origin)}function XV(e,t){return EO(e,"write",t==null?void 0:t.origin)}function EO(e,t,r){let n=e==null?void 0:e.json;if(n!=null&&n.origins&&r){let i;i=r==="link-chart"?n.origins[r]&&(t==="any"||t in n.origins[r])?n.origins[r]:n.origins["web-map"]:n.origins[r],i&&(t==="any"||t in i)&&(n=i)}return n}function Ine(e){const t=Cne(e);if(e.json.origins)for(const r in e.json.origins){const n=e.json.origins[r],i=n.types?kne(n):t;rN(i,n,!1),n.types&&!n.write&&e.json.write&&e.json.write.enabled&&(n.write={...e.json.write}),aN(i,n)}rN(t,e.json,!0),aN(t,e.json)}function Cne(e){return e.json.types?MM(e.json):e.type?ez(e):MM(e)}function kne(e){return e.type?ez(e):MM(e)}function ez(e){if(!e.type)return;let t=0,r=e.type;for(;Array.isArray(r)&&!BV(r);)r=r[0],t++;return{type:r,ndimArray:t}}function MM(e){if(!e.types)return;let t=0,r=e.types;for(;Array.isArray(r);)r=r[0],t++;return{types:r,ndimArray:t}}function Pne(e){Sne(e)&&(yne(e),Ine(e))}const P$=new Set,O$=new Set;function E(e){return t=>{t.prototype.declaredClass=e,Rne(t);const r=[],n=[];let i=t.prototype;for(;i;)i.hasOwnProperty("initialize")&&!P$.has(i.initialize)&&(P$.add(i.initialize),r.push(i.initialize)),i.hasOwnProperty("destroy")&&!O$.has(i.destroy)&&(O$.add(i.destroy),n.push(i.destroy)),i=Object.getPrototypeOf(i);P$.clear(),O$.clear();class s extends t{constructor(...a){if(super(...a),this.constructor===s&&typeof this.postscript=="function"){if(r.length&&Object.defineProperty(this,"initialize",{enumerable:!1,configurable:!0,value(){for(let l=r.length-1;l>=0;l--)r[l].call(this)}}),n.length){let l=!1;const c=this[tV];Object.defineProperty(this,"destroy",{enumerable:!1,configurable:!0,value(){if(!l){l=!0,c.call(this);for(let h=0;h<n.length;h++)n[h].call(this)}}})}this.postscript(...a)}}}return s.__accessorMetadata__=Hv(t.prototype),s.prototype.declaredClass=e,s}}function One(e,t){return t.get==null?function(){const r=this.__accessor__,n=r.propertiesByName.get(e);if(n===void 0)return;Ve(n.observerObject);const i=r.store;return i.has(e)?i.get(e):n.metadata.value}:function(){const r=this.__accessor__,n=r.propertiesByName.get(e);if(n!==void 0)return n.getComputed(r)}}function Rne(e){const t=e.prototype,r=Hv(t),n={};for(const i of Object.getOwnPropertyNames(r)){const s=r[i];Pne(s),n[i]={enumerable:!0,configurable:!0,get:One(i,s),set(o){const a=this.__accessor__;if(a!==void 0){if(!Object.isFrozen(this)){if(a.initialized&&s.readOnly)throw new TypeError(`[accessor] cannot assign to read-only property '${i}' of ${this.declaredClass}`);if(a.lifecycle===Il.CONSTRUCTED&&s.constructOnly)throw new TypeError(`[accessor] cannot assign to construct-only property '${i}' of ${this.declaredClass}`);a.set(i,o)}}else Object.defineProperty(this,i,{enumerable:!0,configurable:!0,writable:!0,value:o})}}}Object.defineProperties(e.prototype,n)}var tz,rz;function Ane(e){var t;if(e==null)return{value:e};if(Array.isArray(e))return{type:[e[0]],value:null};switch(typeof e){case"object":return(t=e.constructor)!=null&&t.__accessorMetadata__||e instanceof Date?{type:e.constructor,value:e}:e;case"boolean":return{type:Boolean,value:e};case"string":return{type:String,value:e};case"number":return{type:Number,value:e};case"function":return{type:e,value:null};default:return}}const Ru=Symbol("Accessor-Handles"),IM=Symbol("Accessor-Initialized");let $e=class nz{static createSubclass(t={}){if(Array.isArray(t))throw new Error("Multi-inheritance unsupported since 4.16");const{properties:r,declaredClass:n,constructor:i}=t;delete t.declaredClass,delete t.properties,delete t.constructor;const s=this;class o extends s{constructor(...l){super(...l),this.inherited=null,i&&i.apply(this,l)}}Hv(o.prototype);for(const a in t){const l=t[a];o.prototype[a]=typeof l=="function"?function(...c){const h=this.inherited;let f;this.inherited=function(...m){if(s.prototype[a])return s.prototype[a].apply(this,m)};try{f=l.apply(this,c)}catch(m){throw this.inherited=h,m}return this.inherited=h,f}:t[a]}for(const a in r){const l=Ane(r[a]);d(l)(o.prototype,a)}return E(n)(o)}constructor(...t){if(this[tz]=null,this[rz]=!1,this.constructor===nz)throw new Error("[accessor] cannot instantiate Accessor. This can be fixed by creating a subclass of Accessor");const r=new $re(this);Object.defineProperty(this,"__accessor__",{enumerable:!1,value:r}),t.length>0&&this.normalizeCtorArgs&&(r.ctorArgs=this.normalizeCtorArgs.apply(this,t)),lN.register(this,r.propertiesByName,this)}postscript(t){const r=this.__accessor__,n=r.ctorArgs||t;r.initialize(),n&&(this.set(n),r.ctorArgs=null),r.constructed(),this.initialize(),this[IM]=!0}initialize(){}[tV](){this[Ru]=Gt(this[Ru])}destroy(){var t;this.destroyed||(lN.unregister(this),Jre(this),this.__accessor__.destroy(),(t=Pre())==null||t.onInstanceDestroy(this))}get constructed(){return this.__accessor__&&this.__accessor__.initialized||!1}get initialized(){return this[IM]}get destroyed(){return this.__accessor__&&this.__accessor__.destroyed||!1}commitProperty(t){this.get(t)}get(t){return sS(this,t)}hasOwnProperty(t){return this.__accessor__?this.__accessor__.has(t):Object.prototype.hasOwnProperty.call(this,t)}keys(){return this.__accessor__?this.__accessor__.keys():[]}set(t,r){return aS(this,t,r),this}watch(t,r,n){return tne(this,t,r,n)}own(t){this.addHandles(t)}addHandles(t,r){if(this.destroyed){const i=Array.isArray(t)?t:[t];for(const s of i)s.remove();return}let n=this[Ru];n==null&&(n=this[Ru]=new ou),n.add(t,r)}removeHandles(t){const r=this[Ru];r!=null&&r.remove(t)}removeAllHandles(){const t=this[Ru];t!=null&&t.removeAll()}hasHandles(t){const r=this[Ru];return r!=null&&r.has(t)}_override(t,r){r===void 0?this.__accessor__.clearOverride(t):this.__accessor__.override(t,r)}_clearOverride(t){return this.__accessor__.clearOverride(t)}_overrideIfSome(t,r){r==null?this.__accessor__.clearOverride(t):this.__accessor__.override(t,r)}_isOverridden(t){return this.__accessor__.isOverridden(t)}notifyChange(t){this.__accessor__.notifyChange(t)}_get(t){return this.__accessor__.internalGet(t)}_set(t,r){return this.__accessor__.internalSet(t,r),this}};tz=Ru,rz=IM;const lN=new FinalizationRegistry(e=>{for(const t of e.values())t.destroy()});let v_=class iz{constructor(){this._emitter=new iz.EventEmitter(this)}emit(t,r){return this._emitter.emit(t,r)}on(t,r){return this._emitter.on(t,r)}once(t,r){return this._emitter.once(t,r)}hasEventListener(t){return this._emitter.hasEventListener(t)}};(function(e){class t{constructor(i=null){this._target=i,this._listenersMap=null}clear(){var i;(i=this._listenersMap)==null||i.clear(),this._listenersMap=null}destroy(){this.clear()}emit(i,s){const o=this._listenersMap&&this._listenersMap.get(i);if(!o)return!1;const a=this._target||this;return[...o].forEach(l=>{l.call(a,s)}),o.length>0}on(i,s){if(Array.isArray(i)){const a=i.map(l=>this.on(l,s));return qx(a)}if(i.includes(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");this._listenersMap||(this._listenersMap=new Map);const o=this._listenersMap.get(i)||[];return o.push(s),this._listenersMap.set(i,o),{remove:()=>{const a=this._listenersMap&&this._listenersMap.get(i)||[],l=a.indexOf(s);l>=0&&a.splice(l,1)}}}once(i,s){const o=this.on(i,a=>{o.remove(),s.call(null,a)});return o}hasEventListener(i){const s=this._listenersMap&&this._listenersMap.get(i);return s!=null&&s.length>0}}e.EventEmitter=t,e.EventedMixin=n=>{let i=class extends n{constructor(){super(...arguments),this._emitter=new t}destroy(){this._emitter.clear()}emit(s,o){return this._emitter.emit(s,o)}on(s,o){return this._emitter.on(s,o)}once(s,o){return this._emitter.once(s,o)}hasEventListener(s){return this._emitter.hasEventListener(s)}};return i=u([E("esri.core.Evented")],i),i};let r=class extends $e{constructor(){super(...arguments),this._emitter=new v_.EventEmitter(this)}destroy(){this._emitter.clear()}emit(n,i){return this._emitter.emit(n,i)}on(n,i){return this._emitter.on(n,i)}once(n,i){return this._emitter.once(n,i)}hasEventListener(n){return this._emitter.hasEventListener(n)}};r=u([E("esri.core.Evented")],r),e.EventedAccessor=r})(v_||(v_={}));const Ua=v_;var wt;(function(e){e[e.ADD=1]="ADD",e[e.REMOVE=2]="REMOVE",e[e.MOVE=4]="MOVE"})(wt||(wt={}));function sz(e){return(t,r)=>{t[r]=e}}let i2=class extends bV{notify(){const t=this._observers;if(t&&t.length>0){const r=t.slice();for(const n of r)n.onInvalidated(),n.onCommitted()}}};var El;let Lne=class{constructor(){this.target=null,this.cancellable=!1,this.defaultPrevented=!1,this.item=void 0,this.type=void 0}preventDefault(){this.cancellable&&(this.defaultPrevented=!0)}reset(t){this.defaultPrevented=!1,this.item=t}};const as=new ud(Lne,void 0,e=>{e.item=null,e.target=null,e.defaultPrevented=!1,e.cancellable=!1}),Nne=()=>{};function R$(e){return e?e instanceof mh?e.toArray():e.length?Array.prototype.slice.apply(e):[]:[]}function A$(e){if(e&&e.length)return e[0]}function Dne(e,t,r,n){const i=Math.min(e.length-r,t.length-n);let s=0;for(;s<i&&e[r+s]===t[n+s];)s++;return s}function oz(e,t,r,n){t&&t.forEach((i,s,o)=>{e.push(i),oz(e,r.call(n,i,s,o),r,n)})}const gu=new Set,vu=new Set,wu=new Set,L$=new Map;let Fne=0,mh=El=class extends Ua.EventedAccessor{static isCollection(e){return e!=null&&e instanceof El}constructor(e){super(e),this._chgListeners=[],this._notifications=null,this._timer=null,this._observable=new i2,this.length=0,this._items=[],Object.defineProperty(this,"uid",{value:Fne++})}normalizeCtorArgs(e){return e?Array.isArray(e)||e instanceof El?{items:e}:e:{}}destroy(){this._removeAllRaw()}*[Symbol.iterator](){yield*this.items}get items(){return Ve(this._observable),this._items}set items(e){this._emitBeforeChanges(wt.ADD)||(this._splice(0,this.length,R$(e)),this._emitAfterChanges(wt.ADD))}hasEventListener(e){return e==="change"?this._chgListeners.length>0:this._emitter.hasEventListener(e)}on(e,t){if(e==="change"){const r=this._chgListeners,n={removed:!1,callback:t};return r.push(n),this._notifications&&this._notifications.push({listeners:r.slice(),items:this._items.slice(),changes:[]}),{remove(){this.remove=Nne,n.removed=!0,r.splice(r.indexOf(n),1)}}}return this._emitter.on(e,t)}once(e,t){const r=this.on(e,t);return{remove(){r.remove()}}}add(e,t){if(Ve(this._observable),this._emitBeforeChanges(wt.ADD))return this;const r=this.getNextIndex(t??null);return this._splice(r,0,[e]),this._emitAfterChanges(wt.ADD),this}addMany(e,t=this._items.length){if(Ve(this._observable),!e||!e.length)return this;if(this._emitBeforeChanges(wt.ADD))return this;const r=this.getNextIndex(t);return this._splice(r,0,R$(e)),this._emitAfterChanges(wt.ADD),this}at(e){if(Ve(this._observable),(e=Math.trunc(e)||0)<0&&(e+=this.length),!(e<0||e>=this.length))return this._items[e]}removeAll(){if(Ve(this._observable),!this.length||this._emitBeforeChanges(wt.REMOVE))return[];const e=this._removeAllRaw();return this._emitAfterChanges(wt.REMOVE),e}_removeAllRaw(){return this.length===0?[]:this._splice(0,this.length)||[]}clone(){return Ve(this._observable),this._createNewInstance({items:this._items.map(F)})}concat(...e){Ve(this._observable);const t=e.map(R$);return this._createNewInstance({items:this._items.concat(...t)})}drain(e,t){if(Ve(this._observable),!this.length||this._emitBeforeChanges(wt.REMOVE))return;const r=this._splice(0,this.length),n=r.length;for(let i=0;i<n;i++)e.call(t,r[i],i,r);this._emitAfterChanges(wt.REMOVE)}every(e,t){return Ve(this._observable),this._items.every(e,t)}filter(e,t){let r;return Ve(this._observable),r=arguments.length===2?this._items.filter(e,t):this._items.filter(e),this._createNewInstance({items:r})}find(e,t){return Ve(this._observable),this._items.find(e,t)}findIndex(e,t){return Ve(this._observable),this._items.findIndex(e,t)}flatten(e,t){Ve(this._observable);const r=[];return oz(r,this,e,t),new El(r)}forEach(e,t){return Ve(this._observable),this._items.forEach(e,t)}getItemAt(e){return Ve(this._observable),this._items[e]}getNextIndex(e){Ve(this._observable);const t=this.length;return(e=e??t)<0?e=0:e>t&&(e=t),e}includes(e,t=0){return Ve(this._observable),this._items.includes(e,t)}indexOf(e,t=0){return Ve(this._observable),this._items.indexOf(e,t)}join(e=","){return Ve(this._observable),this._items.join(e)}lastIndexOf(e,t=this.length-1){return Ve(this._observable),this._items.lastIndexOf(e,t)}map(e,t){Ve(this._observable);const r=this._items.map(e,t);return new El({items:r})}reorder(e,t=this.length-1){Ve(this._observable);const r=this.indexOf(e);if(r!==-1){if(t<0?t=0:t>=this.length&&(t=this.length-1),r!==t){if(this._emitBeforeChanges(wt.MOVE))return e;this._splice(r,1),this._splice(t,0,[e]),this._emitAfterChanges(wt.MOVE)}return e}}pop(){if(Ve(this._observable),!this.length||this._emitBeforeChanges(wt.REMOVE))return;const e=A$(this._splice(this.length-1,1));return this._emitAfterChanges(wt.REMOVE),e}push(...e){return Ve(this._observable),this._emitBeforeChanges(wt.ADD)||(this._splice(this.length,0,e),this._emitAfterChanges(wt.ADD)),this.length}reduce(e,t){Ve(this._observable);const r=this._items;return arguments.length===2?r.reduce(e,t):r.reduce(e)}reduceRight(e,t){Ve(this._observable);const r=this._items;return arguments.length===2?r.reduceRight(e,t):r.reduceRight(e)}remove(e){return Ve(this._observable),this.removeAt(this.indexOf(e))}removeAt(e){if(Ve(this._observable),e<0||e>=this.length||this._emitBeforeChanges(wt.REMOVE))return;const t=A$(this._splice(e,1));return this._emitAfterChanges(wt.REMOVE),t}removeMany(e){if(Ve(this._observable),!e||!e.length||this._emitBeforeChanges(wt.REMOVE))return[];const t=e instanceof El?e.toArray():e,r=this._items,n=[],i=t.length;for(let s=0;s<i;s++){const o=t[s],a=r.indexOf(o);if(a>-1){const l=1+Dne(t,r,s+1,a+1),c=this._splice(a,l);c&&c.length>0&&n.push.apply(n,c),s+=l-1}}return this._emitAfterChanges(wt.REMOVE),n}reverse(){if(Ve(this._observable),this._emitBeforeChanges(wt.MOVE))return this;const e=this._splice(0,this.length);return e&&(e.reverse(),this._splice(0,0,e)),this._emitAfterChanges(wt.MOVE),this}shift(){if(Ve(this._observable),!this.length||this._emitBeforeChanges(wt.REMOVE))return;const e=A$(this._splice(0,1));return this._emitAfterChanges(wt.REMOVE),e}slice(e=0,t=this.length){return Ve(this._observable),this._createNewInstance({items:this._items.slice(e,t)})}some(e,t){return Ve(this._observable),this._items.some(e,t)}sort(e){if(Ve(this._observable),!this.length||this._emitBeforeChanges(wt.MOVE))return this;const t=this._splice(0,this.length);return arguments.length?t.sort(e):t.sort(),this._splice(0,0,t),this._emitAfterChanges(wt.MOVE),this}splice(e,t,...r){Ve(this._observable);const n=(t?wt.REMOVE:0)|(r.length?wt.ADD:0);if(this._emitBeforeChanges(n))return[];const i=this._splice(e,t,r)||[];return this._emitAfterChanges(n),i}toArray(){return Ve(this._observable),this._items.slice()}toJSON(){return Ve(this._observable),this.toArray()}toLocaleString(){return Ve(this._observable),this._items.toLocaleString()}toString(){return Ve(this._observable),this._items.toString()}unshift(...e){return Ve(this._observable),!e.length||this._emitBeforeChanges(wt.ADD)||(this._splice(0,0,e),this._emitAfterChanges(wt.ADD)),this.length}_createNewInstance(e){return new this.constructor(e)}_splice(e,t,r){const n=this._items,i=this.itemType;let s,o;if(!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._timer=Bm(()=>this._dispatchChange())),t){if(o=n.splice(e,t),this.hasEventListener("before-remove")){const a=as.acquire();a.target=this,a.cancellable=!0;for(let l=0,c=o.length;l<c;l++)s=o[l],a.reset(s),this.emit("before-remove",a),a.defaultPrevented&&(o.splice(l,1),n.splice(e,0,s),e+=1,l-=1,c-=1);as.release(a)}if(this.length=this._items.length,this.hasEventListener("after-remove")){const a=as.acquire();a.target=this,a.cancellable=!1;const l=o.length;for(let c=0;c<l;c++)a.reset(o[c]),this.emit("after-remove",a);as.release(a)}}if(r&&r.length){if(i){const h=[];for(const f of r){const m=i.ensureType(f);m==null&&f!=null||h.push(m)}r=h}const a=this.hasEventListener("before-add"),l=this.hasEventListener("after-add"),c=e===this.length;if(a||l){const h=as.acquire();h.target=this,h.cancellable=!0;const f=as.acquire();f.target=this,f.cancellable=!1;for(const m of r)a?(h.reset(m),this.emit("before-add",h),h.defaultPrevented||(c?n.push(m):n.splice(e++,0,m),this._set("length",n.length),l&&(f.reset(m),this.emit("after-add",f)))):(c?n.push(m):n.splice(e++,0,m),this._set("length",n.length),f.reset(m),this.emit("after-add",f));as.release(f),as.release(h)}else{if(c)for(const h of r)n.push(h);else n.splice(e,0,...r);this._set("length",n.length)}}return(r&&r.length||o&&o.length)&&this._notifyChangeEvent(r,o),o}_emitBeforeChanges(e){let t=!1;if(this.hasEventListener("before-changes")){const r=as.acquire();r.target=this,r.cancellable=!0,r.type=e,this.emit("before-changes",r),t=r.defaultPrevented,as.release(r)}return t}_emitAfterChanges(e){if(this.hasEventListener("after-changes")){const t=as.acquire();t.target=this,t.cancellable=!1,t.type=e,this.emit("after-changes",t),as.release(t)}this._observable.notify()}_notifyChangeEvent(e,t){this.hasEventListener("change")&&this._notifications&&this._notifications[this._notifications.length-1].changes.push({added:e,removed:t})}_dispatchChange(){if(this._timer&&(this._timer.remove(),this._timer=null),!this._notifications)return;const e=this._notifications;this._notifications=null;for(const t of e){const r=t.changes;gu.clear(),vu.clear(),wu.clear();for(const{added:l,removed:c}of r){if(l)if(wu.size===0&&vu.size===0)for(const h of l)gu.add(h);else for(const h of l)vu.has(h)?(wu.add(h),vu.delete(h)):wu.has(h)||gu.add(h);if(c)if(wu.size===0&&gu.size===0)for(const h of c)vu.add(h);else for(const h of c)gu.has(h)?gu.delete(h):(wu.delete(h),vu.add(h))}const n=Yn.acquire();gu.forEach(l=>{n.push(l)});const i=Yn.acquire();vu.forEach(l=>{i.push(l)});const s=this._items,o=t.items,a=Yn.acquire();if(wu.forEach(l=>{o.indexOf(l)!==s.indexOf(l)&&a.push(l)}),t.listeners&&(n.length||i.length||a.length)){const l={target:this,added:n,removed:i,moved:a},c=t.listeners.length;for(let h=0;h<c;h++){const f=t.listeners[h];f.removed||f.callback.call(this,l)}}Yn.release(n),Yn.release(i),Yn.release(a)}gu.clear(),vu.clear(),wu.clear()}};mh.ofType=e=>{if(!e)return El;if(L$.has(e))return L$.get(e);let t=null;if(typeof e=="function")t=e.prototype.declaredClass;else if(e.base)t=e.base.prototype.declaredClass;else for(const n in e.typeMap){const i=e.typeMap[n].prototype.declaredClass;t?t+=` | ${i}`:t=i}let r=class extends El{};return u([sz({Type:e,ensureType:typeof e=="function"?gr(e):Jl(e)})],r.prototype,"itemType",void 0),r=u([E(`esri.core.Collection<${t}>`)],r),L$.set(e,r),r},u([d()],mh.prototype,"length",void 0),u([d()],mh.prototype,"items",null),mh=El=u([E("esri.core.Collection")],mh);const Le=mh;function tp(e,t,r=Le){return t||(t=new r),t===e||(t.removeAll(),jne(e)?t.addMany(e):e&&t.add(e)),t}function az(e){return e}function jne(e){return e&&(Array.isArray(e)||"items"in e&&Array.isArray(e.items))}const uN=new Set;function Vne(e,t,r=!1){r&&uN.has(t)||(r&&uN.add(t),e.warn(` DEPRECATED - ${t}`))}function lz(e,t,r={}){if(V("esri-deprecation-warnings")){const{moduleName:n}=r;vS(e,`Property: ${(n?n+"::":"")+t}`,r)}}function vS(e,t,r={}){if(V("esri-deprecation-warnings")){const{replacement:n,version:i,see:s,warnOnce:o}=r;let a=t;n&&(a+=`
	 Replacement: ${n}`),i&&(a+=`
	 Version: ${i}`),s&&(a+=`
	 See ${s} for more details.`),Vne(e,a,o)}}let zne=class uz{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(t){const r=new uz;return this._values.forEach((n,i)=>{t&&t.has(i)||r.set(i,F(n.value),n.origin)}),r}get(t,r){r=this._normalizeOrigin(r);const n=this._values.get(t);return r==null||(n==null?void 0:n.origin)===r?n==null?void 0:n.value:void 0}originOf(t){var r;return((r=this._values.get(t))==null?void 0:r.origin)??ae.USER}keys(t){t=this._normalizeOrigin(t);const r=[...this._values.keys()];return t==null?r:r.filter(n=>{var i;return((i=this._values.get(n))==null?void 0:i.origin)===t})}set(t,r,n){if((n=this._normalizeOrigin(n))===ae.DEFAULTS){const i=this._values.get(t);if(i&&i.origin!=null&&i.origin>n)return}this._values.set(t,new Une(r,n))}delete(t,r){var n;(r=this._normalizeOrigin(r))!=null&&((n=this._values.get(t))==null?void 0:n.origin)!==r||this._values.delete(t)}has(t,r){var n;return(r=this._normalizeOrigin(r))!=null?((n=this._values.get(t))==null?void 0:n.origin)===r:this._values.has(t)}forEach(t){this._values.forEach(({value:r},n)=>t(r,n))}_normalizeOrigin(t){if(t!=null)return t===ae.DEFAULTS?t:ae.USER}},Une=class{constructor(t,r){this.value=t,this.origin=r}};function cz(e,t,r){t.keys().forEach(i=>{r.set(i,t.get(i),ae.DEFAULTS)});const n=e.metadatas;Object.keys(n).forEach(i=>{e.internalGet(i)&&r.set(i,e.internalGet(i),ae.DEFAULTS)})}function Gne(e,t,r){if(!e||!e.read||e.read.enabled===!1||!e.read.source)return!1;const n=e.read.source;if(typeof n=="string"){if(n===t||n.includes(".")&&n.indexOf(t)===0&&GL(n,r))return!0}else for(const i of n)if(i===t||i.includes(".")&&i.indexOf(t)===0&&GL(i,r))return!0;return!1}function Bne(e){return e&&(!e.read||e.read.enabled!==!1&&!e.read.source)}function qne(e,t,r,n,i){let s=EM(t[r],i);Bne(s)&&(e[r]=!0);for(const o of Object.getOwnPropertyNames(t))s=EM(t[o],i),Gne(s,r,n)&&(e[o]=!0)}function Wne(e,t,r,n){const i=r.metadatas,s=Mne(i[t],n),o=s==null?void 0:s.default;if(o===void 0)return;const a=typeof o=="function"?o.call(e,t,n):o;a!==void 0&&r.set(t,a)}const dz={origin:"service"};function hz(e,t,r=dz){if(!t||typeof t!="object")return;const n=Xr(e),i=n.metadatas,s={};for(const o of Object.getOwnPropertyNames(t))qne(s,i,o,t,r);n.setDefaultOrigin(r.origin);for(const o of Object.getOwnPropertyNames(s)){const a=EM(i[o],r).read,l=a&&a.source;let c;c=l&&typeof l=="string"?Wv(t,l):t[o],a&&a.reader&&(c=a.reader.call(e,c,t,r)),c!==void 0&&n.set(o,c)}if(!r||!r.ignoreDefaults){n.setDefaultOrigin("defaults");for(const o of Object.getOwnPropertyNames(i))s[o]||Wne(e,o,n,r)}n.setDefaultOrigin("user")}function Hne(e,t,r,n=dz){var s;const i={...n,messages:[]};r(i),(s=i.messages)==null||s.forEach(o=>{o.type!=="warning"||e.loaded?n&&n.messages&&n.messages.push(o):e.loadWarnings.push(o)})}function Zne(e,t,r,n,i){var o,a;const s={};return(a=(o=t.write)==null?void 0:o.writer)==null||a.call(e,n,s,r,i),s}function pz(e,t,r,n,i,s){if(!n||!n.write)return!1;const o=e.get(r);if(!i&&n.write.overridePolicy){const a=n.write.overridePolicy.call(e,o,r,s??void 0);a!==void 0&&(i=a)}if(i||(i=n.write),!i||i.enabled===!1)return!1;if((o===null&&!i.allowNull&&!i.writerEnsuresNonNull||o===void 0)&&i.isRequired){const a=new N("web-document-write:property-required",`Missing value for required property '${r}' on '${e.declaredClass}'`,{propertyName:r,target:e});return a&&s&&s.messages?s.messages.push(a):a&&!s&&Z.getLogger("esri.core.accessorSupport.write").error(a.name,a.message),!1}return!(o===void 0||o===null&&!i.allowNull&&!i.writerEnsuresNonNull||!i.alwaysWriteDefaults&&(!t.store.multipleOriginsSupported||t.store.originOf(r)===ae.DEFAULTS)&&Jne(e,r,s,n,o)||!i.ignoreOrigin&&s&&s.origin&&t.store.multipleOriginsSupported&&t.store.originOf(r)<Kn(s.origin))}function Jne(e,t,r,n,i){const s=n.default;if(s===void 0)return!1;if(n.defaultEquals!=null)return n.defaultEquals(i);if(typeof s=="function"){if(Array.isArray(i)){const o=s.call(e,t,r??void 0);return Wx(o,i)}return!1}return s===i}function Qne(e,t,r,n){const i=Xr(e),s=i.metadatas,o=XV(s[t],n);return!!o&&pz(e,i,t,o,r,n)}function fz(e,t,r){var s,o;if(e&&typeof e.toJSON=="function"&&(!e.toJSON.isDefaultToJSON||!e.write))return f_(t,e.toJSON(r));const n=Xr(e),i=n.metadatas;for(const a in i){const l=XV(i[a],r);if(!pz(e,n,a,l,void 0,r))continue;const c=e.get(a),h=Zne(e,l,l.write&&typeof l.write.target=="string"?l.write.target:a,c,r);Object.keys(h).length>0&&(t=f_(t,h),(o=(s=r==null?void 0:r.resources)==null?void 0:s.pendingOperations)!=null&&o.length&&r.resources.pendingOperations.push(Promise.all(r.resources.pendingOperations).then(()=>f_(t,h,()=>"replace-arrays"))),r&&r.writtenProperties&&r.writtenProperties.push({target:e,propName:a,oldOrigin:vre(n.store.originOf(a)),newOrigin:r.origin}))}return t}const Yv=e=>{let t=class extends e{constructor(...r){super(...r);const n=Xr(this),i=n.store,s=new zne;n.store=s,cz(n,i,s)}read(r,n){hz(this,r,n)}write(r,n){return fz(this,r??{},n)}toJSON(r){return this.write({},r)}static fromJSON(r,n){return Yne.call(this,r,n)}};return t=u([E("esri.core.JSONSupport")],t),t.prototype.toJSON.isDefaultToJSON=!0,t};function Yne(e,t){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");const r=new this;return r.read(e,t),r}let Q=class extends Yv($e){};Q=u([E("esri.core.JSONSupport")],Q);var lc;(function(e){e[e.PENDING=0]="PENDING",e[e.RESOLVED=1]="RESOLVED",e[e.REJECTED=2]="REJECTED"})(lc||(lc={}));let Kne=class{constructor(){this._resolver=Bo(),this._status=lc.PENDING,this._resolvingPromises=[],this._resolver.promise.then(()=>{this._status=lc.RESOLVED,this._cleanUp()},()=>{this._status=lc.REJECTED,this._cleanUp()}),this.promise=this._resolver.promise}destroy(){this._cleanUp()}addResolvingPromise(t){this._resolvingPromises.push(t),this._tryResolve()}isResolved(){return this._status===lc.RESOLVED}isRejected(){return this._status===lc.REJECTED}isFulfilled(){return this._status!==lc.PENDING}abort(){this._resolver.reject(ar())}_cleanUp(){this._allPromise=null,this._resolvingPromises=null}_tryResolve(){if(this.isFulfilled())return;const t=Bo(),r=[...this._resolvingPromises,t.promise],n=this._allPromise=Promise.all(r);n.then(()=>{this.isFulfilled()||this._allPromise!==n||this._resolver.resolve()},i=>{this.isFulfilled()||this._allPromise!==n||Ei(i)||this._resolver.reject(i)}),t.resolve()}};const MO=e=>{let t=class extends e{constructor(...r){super(...r),this._promiseProps=new Kne,this.addResolvingPromise(Promise.resolve())}destroy(){var r;(r=this._promiseProps)==null||r.destroy()}isResolved(){return this._promiseProps.isResolved()}isRejected(){return this._promiseProps.isRejected()}isFulfilled(){return this._promiseProps.isFulfilled()}when(r,n){return this._promiseProps.promise.then(()=>this).then(r,n)}catch(r){return this.when(null,r)}addResolvingPromise(r){r&&!this._promiseProps.isFulfilled()&&this._promiseProps.addResolvingPromise("_promiseProps"in r?r.when():r)}};return t=u([E("esri.core.Promise")],t),t};let wS=class extends MO($e){};wS=u([E("esri.core.Promise")],wS);const Xne="not-loaded",eie="loading",tie="failed",cN="loaded",mz=e=>{let t=class extends e{constructor(...r){super(...r),this._loadController=null,this.loadError=null,this.loadStatus="not-loaded",this._set("loadWarnings",[]),this.addResolvingPromise(new Promise(n=>{const i=this.load.bind(this);this.load=s=>{const o=new Promise((a,l)=>{const c=SO(s,l);this.destroyed&&l(new N("load:instance-destroyed",`Instance of '${this.declaredClass||this.constructor.name}' is already destroyed`,{instance:this})),this.when(a,l).finally(()=>{c&&c.remove()})});if(this.loadStatus===Xne){this._set("loadStatus",eie);const a=this._loadController=new AbortController;i({signal:a.signal}),As(a.signal,()=>{this._promiseProps.abort()})}return n(),o}})),this.when(()=>{this._set("loadStatus",cN),this._loadController=null},n=>{this._set("loadStatus",tie),this._set("loadError",n),this._loadController=null})}destroy(){this._loadController=Kh(this._loadController),this._set("loadError",null),this._set("loadWarnings",[])}get loaded(){return this.loadStatus===cN}get loadWarnings(){return this._get("loadWarnings")}load(){return null}cancelLoad(){var r;return this.isFulfilled()||(this._set("loadError",new N("load:cancelled","Cancelled")),(r=this._loadController)==null||r.abort()),this}};return u([d({readOnly:!0})],t.prototype,"loaded",null),u([d({readOnly:!0})],t.prototype,"loadError",void 0),u([d({clonable:!1})],t.prototype,"loadStatus",void 0),u([d({type:[qo],readOnly:!0})],t.prototype,"loadWarnings",null),t=u([E("esri.core.Loadable")],t),t};let Xy=class extends mz(wS){};Xy=u([E("esri.core.Loadable")],Xy),function(e){function t(r){return!(!r||!r.load)}e.LoadableMixin=mz,e.isLoadable=t}(Xy||(Xy={}));const Ql=Xy;function eCe(e,t,r){return Mo(e.map((n,i)=>t.apply(r,[n,i])))}async function rie(e,t,r){return(await Mo(e.map((n,i)=>t.apply(r,[n,i])))).map(n=>n.value)}function IO(e){return{ok:!0,value:e}}function CO(e){return{ok:!1,error:e}}function nie(e){return e!=null&&e.ok===!0?e.value:null}function iie(e){return e!=null&&e.ok===!1?e.error:null}async function kO(e){if(e==null)return{ok:!1,error:new Error("no promise provided")};try{return IO(await e)}catch(t){return CO(t)}}async function tCe(e){try{return IO(await e)}catch(t){return Ea(t),CO(t)}}function PO(e,t){return new Au(e,t)}let Au=class extends $e{get value(){return nie(this._result)}get error(){return iie(this._result)}get finished(){return this._result!=null}constructor(t,r){super({}),this._result=null,this._abortHandle=null,this.abort=()=>{this._abortController=Kh(this._abortController)},this.remove=this.abort,this._abortController=new AbortController;const{signal:n}=this._abortController;this.promise=t(n),this.promise.then(i=>{this._result=IO(i),this._cleanup()},i=>{this._result=CO(i),this._cleanup()}),this._abortHandle=As(r,this.abort)}normalizeCtorArgs(){return{}}destroy(){this.abort()}_cleanup(){this._abortHandle=or(this._abortHandle),this._abortController=null}};u([d()],Au.prototype,"value",null),u([d()],Au.prototype,"error",null),u([d()],Au.prototype,"finished",null),u([d()],Au.prototype,"promise",void 0),u([d()],Au.prototype,"_result",void 0),Au=u([E("esri.core.asyncUtils.ReactiveTask")],Au);async function OO(e,t){return await e.load(),sie(e,t)}async function sie(e,t){const r=[],n=(...s)=>{for(const o of s)o!=null&&(Array.isArray(o)?n(...o):Le.isCollection(o)?o.forEach(a=>n(a)):Ql.isLoadable(o)&&r.push(o))};t(n);let i=null;if(await rie(r,async s=>{const o=await kO(oie(s)?s.loadAll():s.load());o.ok!==!1||i||(i=o)}),i)throw i.error;return e}function oie(e){return"loadAll"in e&&typeof e.loadAll=="function"}const aie=/^https:\/\/([a-z\d-]+)(\.maps([^.]*))?\.arcgis\.com/i,lie={devext:{customBaseUrl:"mapsdevext.arcgis.com",portalHostname:"devext.arcgis.com"},qaext:{customBaseUrl:"mapsqa.arcgis.com",portalHostname:"qaext.arcgis.com"},www:{customBaseUrl:"maps.arcgis.com",portalHostname:"www.arcgis.com"}};function dN(e){const t=e==null?void 0:e.match(aie);if(!t)return null;const[,r,n,i]=t;if(!r)return null;let s=null,o=null,a=null;const{devext:l,qaext:c,www:h}=lie;if(n)if(s=r,i)switch(i.toLowerCase()){case"devext":({customBaseUrl:o,portalHostname:a}=l);break;case"qa":({customBaseUrl:o,portalHostname:a}=c);break;default:return null}else({customBaseUrl:o,portalHostname:a}=h);else switch(r.toLowerCase()){case"devext":({customBaseUrl:o,portalHostname:a}=l);break;case"qaext":({customBaseUrl:o,portalHostname:a}=c);break;case"www":({customBaseUrl:o,portalHostname:a}=h);break;default:return null}return{customBaseUrl:o,isPortal:!1,portalHostname:a,urlKey:s}}function uie(e){return/\/(sharing|usrsvcs)\/(appservices|servers)\//i.test(e)}function cie(e){const t=atob(e),r=new Uint8Array(t.length);for(let n=0;n<t.length;n++)r[n]=t.charCodeAt(n);return r.buffer}const die=Z.getLogger("esri.core.urlUtils"),qm=ot.request,hN="esri/config: esriConfig.request.proxyUrl is not set.",yz=/^\s*[a-z][a-z0-9-+.]*:(?![0-9])/i,gz=/^\s*http:/i,hie=/^\s*https:/i,pie=/^\s*file:/i,fie=/:\d+$/,mie=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i,yie=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$"),gie=new RegExp("^((([^\\[:]+):)?([^@]+)@)?(\\[([^\\]]+)\\]|([^\\[:]*))(:([0-9]+))?$");let em=class{constructor(t=""){this.uri=t,this.scheme=null,this.authority=null,this.path=null,this.query=null,this.fragment=null,this.user=null,this.password=null,this.host=null,this.port=null;let r=this.uri.match(yie);this.scheme=r[2]||(r[1]?"":null),this.authority=r[4]||(r[3]?"":null),this.path=r[5],this.query=r[7]||(r[6]?"":null),this.fragment=r[9]||(r[8]?"":null),this.authority!=null&&(r=this.authority.match(gie),this.user=r[3]||null,this.password=r[4]||null,this.host=r[6]||r[7],this.port=r[9]||null)}toString(){return this.uri}};const Y1={},vie=new em(ot.applicationUrl);let An=vie;const wie=_ie();let RO=wie;const AO=()=>An,iCe=()=>RO;function _ie(){const e=An.path,t=e.substring(0,e.lastIndexOf(e.split("/")[e.split("/").length-1]));return`${`${An.scheme}://${An.host}${An.port!=null?`:${An.port}`:""}`}${t}`}function jn(e){if(!e)return null;const t={path:null,query:null},r=new em(e),n=e.indexOf("?");return r.query===null?t.path=e:(t.path=e.substring(0,n),t.query=LO(r.query)),r.fragment&&(t.hash=r.fragment,r.query===null&&(t.path=t.path.substring(0,t.path.length-(r.fragment.length+1)))),t}function LO(e){const t=e.split("&"),r={};for(const n of t){if(!n)continue;const i=n.indexOf("=");let s,o;i<0?(s=decodeURIComponent(n),o=""):(s=decodeURIComponent(n.slice(0,i)),o=decodeURIComponent(n.slice(i+1)));let a=r[s];typeof a=="string"&&(a=r[s]=[a]),Array.isArray(a)?a.push(o):r[s]=o}return r}function pN(e){return e&&typeof e=="object"&&"toJSON"in e&&typeof e.toJSON=="function"}function $m(e,t){return e?t&&typeof t=="function"?Object.keys(e).map(r=>encodeURIComponent(r)+"="+encodeURIComponent(t(r,e[r]))).join("&"):Object.keys(e).map(r=>{const n=e[r];if(n==null)return"";const i=encodeURIComponent(r)+"=",s=t&&t[r];return s?i+encodeURIComponent(s(n)):Array.isArray(n)?n.map(o=>pN(o)?i+encodeURIComponent(JSON.stringify(o)):i+encodeURIComponent(o)).join("&"):pN(n)?i+encodeURIComponent(JSON.stringify(n)):i+encodeURIComponent(n)}).filter(r=>r).join("&"):""}function bie(e=!1){let t,r=qm.proxyUrl;if(typeof e=="string"){t=Iie(e);const n=s2(e);n&&(r=n.proxyUrl)}else t=!!e;if(!r)throw die.warn(hN),new N("urlutils:proxy-not-set",hN);return t&&CM()&&(r=VO(r)),jn(r)}function sCe(e){const t=s2(e);let r,n;if(t){const i=NO(t.proxyUrl);r=i.path,n=i.query?LO(i.query):null}if(r){const i=jn(e);e=r+"?"+i.path;const s=$m({...n,...i.query});s&&(e=`${e}?${s}`)}return e}const Iy={path:"",query:""};function NO(e){const t=e.indexOf("?");return t!==-1?(Iy.path=e.slice(0,t),Iy.query=e.slice(t+1)):(Iy.path=e,Iy.query=null),Iy}function vz(e){return e=(e=bS(e=Aie(e=NO(e).path),!0)).toLowerCase()}function Sie(e){const t={proxyUrl:e.proxyUrl,urlPrefix:vz(e.urlPrefix)},r=qm.proxyRules,n=t.urlPrefix;let i=r.length;for(let s=0;s<r.length;s++){const o=r[s].urlPrefix;if(n.indexOf(o)===0){if(n.length===o.length)return-1;i=s;break}o.indexOf(n)===0&&(i=s+1)}return r.splice(i,0,t),i}function s2(e){const t=qm.proxyRules,r=vz(e);for(let n=0;n<t.length;n++)if(r.indexOf(t[n].urlPrefix)===0)return t[n]}function xie(e,t){if(!e||!t)return!1;e=_S(e),t=_S(t);const r=dN(e),n=dN(t);return r!=null&&n!=null?r.portalHostname===n.portalHostname:r==null&&n==null&&Tm(e,t,!0)}function wz(e,t){return e=_S(e),t=_S(t),bS(e)===bS(t)}function _S(e){const t=(e=Lo(e)).indexOf("/sharing");return t>0?e.substring(0,t):e.replace(/\/+$/,"")}function _z(e){const t=n=>n==null||n instanceof RegExp&&n.test(e)||typeof n=="string"&&e.startsWith(n),r=qm.interceptors;if(r){for(const n of r)if(Array.isArray(n.urls)){if(n.urls.some(t))return n}else if(t(n.urls))return n}return null}function Tm(e,t,r=!1){if(!e||!t)return!1;const n=PM(e),i=PM(t);return!(!r&&n.scheme!==i.scheme)&&n.host!=null&&i.host!=null&&n.host.toLowerCase()===i.host.toLowerCase()&&n.port===i.port}function DO(e){if(typeof e=="string"){if(!Hi(e))return!0;e=PM(e)}if(Tm(e,An))return!0;const t=qm.trustedServers||[];for(let r=0;r<t.length;r++){const n=$ie(t[r]);for(let i=0;i<n.length;i++)if(Tm(e,n[i]))return!0}return!1}function $ie(e){return Y1[e]||(jO(e)||Na(e)?Y1[e]=[new em(Ms(e))]:Y1[e]=[new em(`http://${e}`),new em(`https://${e}`)]),Y1[e]}function Ms(e,t=RO,r){return Na(e)?r&&r.preserveProtocolRelative?e:An.scheme==="http"&&An.authority===No(e).slice(2)?`http:${e}`:`https:${e}`:jO(e)?e:rp(e[0]==="/"?Oie(t):t,e)}function FO(e,t=RO,r){if(e==null||!Hi(e))return e;const n=Lo(e),i=n.toLowerCase(),s=Lo(t).toLowerCase().replace(/\/+$/,""),o=r?Lo(r).toLowerCase().replace(/\/+$/,""):null;if(o&&s.indexOf(o)!==0)return e;const a=(f,m,y)=>(y=f.indexOf(m,y))===-1?f.length:y;let l=a(i,"/",i.indexOf("//")+2),c=-1;for(;i.slice(0,l+1)===s.slice(0,l)+"/"&&(c=l+1,l!==i.length);)l=a(i,"/",l+1);if(c===-1||o&&c<o.length)return e;e=n.slice(c);const h=s.slice(c-1).replaceAll(/[^/]+/g,"").length;if(h>0)for(let f=0;f<h;f++)e=`../${e}`;else e=`./${e}`;return e}function Lo(e){return e=Die(e=Nie(e=Lie(e=Ms(e=e.trim()))))}function rp(...e){const t=e.filter(Ll);if(!t||!t.length)return;const r=[];if(Hi(t[0])){const i=t[0],s=i.indexOf("//");s!==-1&&(r.push(i.slice(0,s+1)),kie(t[0])&&(r[0]+="/"),t[0]=i.slice(s+2))}else t[0][0]==="/"&&r.push("");const n=t.reduce((i,s)=>s?i.concat(s.split("/")):i,[]);for(let i=0;i<n.length;i++){const s=n[i];s===".."&&r.length>0&&r[r.length-1]!==".."?r.pop():(!s&&i===n.length-1||s&&(s!=="."||r.length===0))&&r.push(s)}return r.join("/")}function No(e,t=!1){if(e==null||o2(e)||wp(e))return null;let r=e.indexOf("://");if(r===-1&&Na(e))r=2;else{if(r===-1)return null;r+=3}const n=e.indexOf("/",r);return n!==-1&&(e=e.slice(0,n)),t&&(e=bS(e,!0)),e}function Hi(e){return Na(e)||jO(e)}function o2(e){return e!=null&&e.slice(0,5)==="blob:"}function wp(e){return e!=null&&e.slice(0,5)==="data:"}function Tie(e){const t=dv(e);return t&&t.isBase64?cie(t.data):null}function oCe(e){return btoa(String.fromCharCode.apply(null,e)).replaceAll("+","-").replaceAll("/","_").replace(/=+$/,"")}const Eie=/^data:(.*?)(;base64)?,(.*)$/;function dv(e){const t=e.match(Eie);if(!t)return null;const[,r,n,i]=t;return{mediaType:r,isBase64:!!n,data:i}}function bz(e){return e.isBase64?`data:${e.mediaType};base64,${e.data}`:`data:${e.mediaType},${e.data}`}function aCe(e){const t=Tie(e);if(!t)return null;const r=dv(e);return new Blob([t],{type:r.mediaType})}function lCe(e,t){Mie(e,t)}function Mie(e,t){if(!e)return!1;const r=document.createElement("a");if(!("download"in r))return!1;const n=URL.createObjectURL(e);return r.download=t,r.href=n,r.style.display="none",document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n),!0}function Na(e){return e!=null&&e[0]==="/"&&e[1]==="/"}function jO(e){return e!=null&&yz.test(e)}function Iie(e){return e!=null&&hie.test(e)||An.scheme==="https"&&Na(e)}function Cie(e){return e!=null&&gz.test(e)||An.scheme==="http"&&Na(e)}function kie(e){return e!=null&&pie.test(e)}function VO(e){return Na(e)?`https:${e}`:e.replace(gz,"https:")}function Pie(){return An.scheme==="http"}function CM(){return An.scheme==="https"}function bS(e,t=!1){return Na(e)?e.slice(2):(e=e.replace(yz,""),t&&e.length>1&&e[0]==="/"&&e[1]==="/"&&(e=e.slice(2)),e)}function Oie(e){const t=e.indexOf("//"),r=e.indexOf("/",t+2);return r===-1?e:e.slice(0,r)}function Rie(e){let t=0;if(Hi(e)){const n=e.indexOf("//");n!==-1&&(t=n+2)}const r=e.lastIndexOf("/");return r<t?e:e.slice(0,r+1)}function uCe(e,t){if(!e)return"";const r=jn(e).path.replace(/\/+$/,""),n=r.substring(r.lastIndexOf("/")+1);if(!(t!=null&&t.length))return n;const i=new RegExp(`.(${t.join("|")})$`,"ig");return n.replace(i,"")}function Aie(e){return e&&e[e.length-1]==="/"?e:`${e}/`}function Sz(e){return e.replace(/\/+$/,"")}function Lie(e){if(/^https?:\/\//i.test(e)){const t=NO(e);e=(e=t.path.replaceAll(/\/{2,}/g,"/")).replace("/","//"),t.query&&(e+=`?${t.query}`)}return e}function Nie(e){return e.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2")}function Die(e){const t=qm.httpsDomains;if(!Cie(e))return e;const r=e.indexOf("/",7);let n;if(n=r===-1?e:e.slice(0,r),n=n.toLowerCase().slice(7),fie.test(n)){if(!n.endsWith(":80"))return e;n=n.slice(0,-3),e=e.replace(":80","")}return Pie()&&n===An.authority&&!mie.test(e)||(CM()&&n===An.authority||t&&t.some(i=>n===i||n.endsWith(`.${i}`))||CM()&&!s2(e))&&(e=VO(e)),e}function kM(e,t,r){if(!(t&&r&&e&&Hi(e)))return e;const n=e.indexOf("//"),i=e.indexOf("/",n+2),s=e.indexOf(":",n+2),o=Math.min(i<0?e.length:i,s<0?e.length:s);return e.slice(n+2,o).toLowerCase()!==t.toLowerCase()?e:`${e.slice(0,n+2)}${r}${e.slice(o)}`}function PM(e){return typeof e=="string"?new em(Ms(e)):(e.scheme||(e.scheme=An.scheme),e)}function cCe(e){return Fie.test(e)}function xz(e,t){const r=jn(e),n=Object.keys(r.query||{});return n.length>0&&t&&t.warn("removeQueryParameters()",`Url query parameters are not supported, the following parameters have been removed: ${n.join(", ")}.`),r.path}function $z(e,t,r){const n=jn(e),i=n.query||{};return i[t]=String(r),`${n.path}?${$m(i)}`}function N$(e,t){const r=jn(e),n=r.query||{};for(const s in t)n[s]=t[s];const i=$m(n);return i?`${r.path}?${i}`:r.path}function dCe(e){if(e==null)return null;const t=e.match(Tz);return t?t[2]:null}function fN(e){if(e==null)return null;const t=e.match(Tz);return t?{path:t[1],extension:t[2]}:{path:e,extension:null}}async function hCe(e){return typeof e=="string"?dv(e)??{data:e}:new Promise((t,r)=>{const n=new FileReader;n.readAsDataURL(e),n.onload=()=>t(dv(n.result)),n.onerror=i=>r(i)})}const Tz=/([^.]*)\.([^\/]*)$/,Fie=/(^data:image\/svg|\.svg$)/i;function pe(e,t,r){let n,i;return t===void 0?(i=e,n=[void 0]):typeof t!="string"?(i=e,n=[void 0],r=t):(i=t,n=Array.isArray(e)?e:[e]),(s,o)=>{const a=s.constructor.prototype;for(const l of n){const c=WV(s,l,i);c.write&&typeof c.write=="object"||(c.write={}),r&&(c.write.target=r),c.write.writer=a[o]}}}let xt=class{constructor(t,r={ignoreUnknown:!1,useNumericKeys:!1}){this._jsonToAPI=t,this._options=r,this.apiValues=[],this.jsonValues=[],this._apiToJSON=this._invertMap(t),this.apiValues=this._getKeysSorted(this._apiToJSON),this.jsonValues=this._getKeysSorted(this._jsonToAPI),this.read=n=>this.fromJSON(n),this.write=(n,i,s)=>{const o=this.toJSON(n);o!==void 0&&vp(s,o,i)},this.write.isJSONMapWriter=!0}toJSON(t){if(t==null)return null;if(this._apiToJSON.hasOwnProperty(t)){const r=this._apiToJSON[t];return this._options.useNumericKeys?+r:r}return this._options.ignoreUnknown?void 0:t}fromJSON(t){return t!=null&&this._jsonToAPI.hasOwnProperty(t)?this._jsonToAPI[t]:this._options.ignoreUnknown?void 0:t}_invertMap(t){const r={};for(const n in t)r[t[n]]=n;return r}_getKeysSorted(t){const r=[];for(const n in t)r.push(n);return r.sort(),r}};function Vn(){return function(e,t){return new xt(e,{ignoreUnknown:!0,...t})}}let zO=class{constructor(t,r,n,i){this.semiMajorAxis=t,this.flattening=r,this.outerAtmosphereRimWidth=n;const s=1-this.flattening;this.semiMinorAxis=this.semiMajorAxis*s,this.halfSemiMajorAxis=this.semiMajorAxis/2,this.halfCircumference=Math.PI*this.semiMajorAxis,this.metersPerDegree=this.halfCircumference/180,this.inverseFlattening=1/(1-this.flattening)-1,this.eccentricitySquared=i||2*this.flattening-this.flattening*this.flattening,this.meanRadiusSemiAxes=(2*this.semiMajorAxis+this.semiMinorAxis)/3}get radius(){return this.semiMajorAxis}};const kt=new zO(6378137,1/298.257223563,3e5,.006694379990137799),Dl=new zO(3396190,1/169.8944472236118,23e4),Kc=new zO(1737400,0,0);var np;(function(e){e[e.CGCS2000=4490]="CGCS2000",e[e.GCSMARS2000=104971]="GCSMARS2000",e[e.GCSMARS2000_SPHERE=104905]="GCSMARS2000_SPHERE",e[e.GCSMOON2000=104903]="GCSMOON2000"})(np||(np={}));let p;const $={values:[1,.3048,.3048006096012192,.3047972654,.9143917962,.201166195164,.9143984146160287,.3047994715386762,20.11676512155263,20.11678249437587,.9143985307444408,.91439523,.3047997101815088,20.1168,20.116756,5e4,15e4],units:["Meter","Foot","Foot_US","Foot_Clarke","Yard_Clarke","Link_Clarke","Yard_Sears","Foot_Sears","Chain_Sears","Chain_Benoit_1895_B","Yard_Indian","Yard_Indian_1937","Foot_Gold_Coast","Chain","Chain_Sears_1922_Truncated","50_Kilometers","150_Kilometers"],2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:14,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4087:0,4088:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5041:0,5042:0,5048:0,5167:0,5168:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,6447:2,6448:0,6449:2,6450:0,6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,6528:0,6529:2,6530:0,6531:2,6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,6603:2,6605:2,6606:0,6607:2,6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,6838:0,6839:1,6840:0,6841:1,6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6962:0,6984:0,6991:0,7128:2,7131:0,7132:2,7142:0,7257:0,7258:2,7259:0,7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,7281:0,7282:2,7283:0,7284:2,7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,7353:0,7354:2,7355:0,7356:2,7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,7877:0,7878:0,7882:0,7883:0,7887:0,7899:0,7991:0,7992:0,8035:2,8036:2,8058:0,8059:0,8082:0,8083:0,8088:0,8090:0,8091:2,8092:0,8093:2,8095:0,8096:2,8097:0,8098:2,8099:0,8100:2,8101:0,8102:2,8103:0,8104:2,8105:0,8106:2,8107:0,8108:2,8109:0,8110:2,8111:0,8112:2,8113:0,8114:2,8115:0,8116:2,8117:0,8118:2,8119:0,8120:2,8121:0,8122:2,8123:0,8124:2,8125:0,8126:2,8127:0,8128:2,8129:0,8130:2,8131:0,8132:2,8133:0,8134:2,8135:0,8136:2,8137:0,8138:2,8139:0,8140:2,8141:0,8142:2,8143:0,8144:2,8145:0,8146:2,8147:0,8148:2,8149:0,8150:2,8151:0,8152:2,8153:0,8154:2,8155:0,8156:2,8157:0,8158:2,8159:0,8160:2,8161:0,8162:2,8163:0,8164:2,8165:0,8166:2,8167:0,8168:2,8169:0,8170:2,8171:0,8172:2,8173:0,8177:2,8179:0,8180:2,8181:0,8182:2,8184:0,8185:2,8187:0,8189:2,8191:0,8193:2,8196:0,8197:2,8198:0,8200:2,8201:0,8202:2,8203:0,8204:2,8205:0,8206:2,8207:0,8208:2,8209:0,8210:2,8212:0,8213:2,8214:0,8216:2,8218:0,8220:2,8222:0,8224:2,8225:0,8226:2,8311:0,8312:1,8313:0,8314:1,8315:0,8316:1,8317:0,8318:1,8319:0,8320:1,8321:0,8322:1,8323:0,8324:1,8325:0,8326:1,8327:0,8328:1,8329:0,8330:1,8331:0,8332:1,8333:0,8334:1,8335:0,8336:1,8337:0,8338:1,8339:0,8340:1,8341:0,8342:1,8343:0,8344:1,8345:0,8346:1,8347:0,8348:1,8352:0,8353:0,8379:0,8380:2,8381:0,8382:2,8383:0,8384:2,8385:0,8387:2,8391:0,8395:0,8433:0,8441:0,8455:0,8456:0,8531:2,8682:0,8686:0,8687:0,8692:0,8693:0,8826:0,8903:0,8950:0,8951:0,9039:0,9040:0,9141:0,9149:0,9150:0,9191:0,9221:0,9222:0,9249:0,9250:0,9252:0,9254:0,9265:0,9284:0,9285:0,9300:0,9354:0,9367:0,9373:0,9377:0,9387:0,9391:0,9456:0,9473:0,9498:0,9674:0,9678:0,9680:0,9709:0,9712:0,9713:0,9716:0,9741:0,9748:2,9749:2,9761:0,9766:0,9793:0,9794:0,9869:0,9874:0,9875:0,9880:0,9943:0,9945:0,9947:0,9967:0,9972:0,9977:0,20042:0,20050:1,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,22092:0,22239:0,22240:0,22332:0,22337:0,22338:0,22391:0,22392:0,22639:0,22700:0,22739:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,24600:0,25e3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,27700:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,29874:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53048:0,53049:0,54090:0,54091:0,65061:2,65062:2,65161:0,65163:0,102041:2,102064:11,102068:15,102069:16,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102731:0,102732:0,102759:1,102760:1,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102970:1,102974:2,102993:0,102994:0,102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,103106:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,103261:0,103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103586:0,103587:2,103588:1,103589:0,103590:2,103591:1,103592:0,103593:2,103594:1,103695:2};for(p=2e3;p<=2045;p++)$[p]=0;for(p=2056;p<=2065;p++)$[p]=0;for(p=2067;p<=2135;p++)$[p]=0;for(p=2137;p<=2154;p++)$[p]=0;for(p=2161;p<=2170;p++)$[p]=0;for(p=2172;p<=2193;p++)$[p]=0;for(p=2195;p<=2198;p++)$[p]=0;for(p=2200;p<=2203;p++)$[p]=0;for(p=2205;p<=2217;p++)$[p]=0;for(p=2222;p<=2224;p++)$[p]=1;for(p=2225;p<=2250;p++)$[p]=2;for(p=2251;p<=2253;p++)$[p]=1;for(p=2257;p<=2264;p++)$[p]=2;for(p=2274;p<=2279;p++)$[p]=2;for(p=2280;p<=2282;p++)$[p]=1;for(p=2283;p<=2289;p++)$[p]=2;for(p=2290;p<=2292;p++)$[p]=0;for(p=2308;p<=2313;p++)$[p]=0;for(p=2315;p<=2491;p++)$[p]=0;for(p=2494;p<=2866;p++)$[p]=0;for(p=2867;p<=2869;p++)$[p]=1;for(p=2870;p<=2888;p++)$[p]=2;for(p=2891;p<=2895;p++)$[p]=2;for(p=2896;p<=2898;p++)$[p]=1;for(p=2902;p<=2908;p++)$[p]=2;for(p=2915;p<=2920;p++)$[p]=2;for(p=2921;p<=2923;p++)$[p]=1;for(p=2924;p<=2930;p++)$[p]=2;for(p=2931;p<=2962;p++)$[p]=0;for(p=2964;p<=2968;p++)$[p]=2;for(p=2969;p<=2973;p++)$[p]=0;for(p=2975;p<=2991;p++)$[p]=0;for(p=2995;p<=3051;p++)$[p]=0;for(p=3054;p<=3079;p++)$[p]=0;for(p=3081;p<=3088;p++)$[p]=0;for(p=3092;p<=3101;p++)$[p]=0;for(p=3106;p<=3138;p++)$[p]=0;for(p=3146;p<=3151;p++)$[p]=0;for(p=3153;p<=3166;p++)$[p]=0;for(p=3168;p<=3172;p++)$[p]=0;for(p=3174;p<=3203;p++)$[p]=0;for(p=3294;p<=3358;p++)$[p]=0;for(p=3367;p<=3403;p++)$[p]=0;for(p=3408;p<=3416;p++)$[p]=0;for(p=3417;p<=3438;p++)$[p]=2;for(p=3441;p<=3446;p++)$[p]=2;for(p=3447;p<=3450;p++)$[p]=0;for(p=3451;p<=3459;p++)$[p]=2;for(p=3460;p<=3478;p++)$[p]=0;for(p=3554;p<=3559;p++)$[p]=0;for(p=3560;p<=3570;p++)$[p]=2;for(p=3571;p<=3581;p++)$[p]=0;for(p=3594;p<=3597;p++)$[p]=0;for(p=3601;p<=3604;p++)$[p]=0;for(p=3637;p<=3639;p++)$[p]=0;for(p=3665;p<=3667;p++)$[p]=0;for(p=3693;p<=3695;p++)$[p]=0;for(p=3701;p<=3727;p++)$[p]=0;for(p=3728;p<=3739;p++)$[p]=2;for(p=3740;p<=3751;p++)$[p]=0;for(p=3753;p<=3760;p++)$[p]=2;for(p=3761;p<=3773;p++)$[p]=0;for(p=3775;p<=3777;p++)$[p]=0;for(p=3779;p<=3781;p++)$[p]=0;for(p=3783;p<=3785;p++)$[p]=0;for(p=3788;p<=3791;p++)$[p]=0;for(p=3797;p<=3802;p++)$[p]=0;for(p=3814;p<=3816;p++)$[p]=0;for(p=3825;p<=3829;p++)$[p]=0;for(p=3832;p<=3841;p++)$[p]=0;for(p=3844;p<=3852;p++)$[p]=0;for(p=3873;p<=3885;p++)$[p]=0;for(p=3890;p<=3893;p++)$[p]=0;for(p=3907;p<=3912;p++)$[p]=0;for(p=3942;p<=3950;p++)$[p]=0;for(p=3968;p<=3970;p++)$[p]=0;for(p=3973;p<=3976;p++)$[p]=0;for(p=3986;p<=3989;p++)$[p]=0;for(p=3994;p<=3997;p++)$[p]=0;for(p=4048;p<=4051;p++)$[p]=0;for(p=4056;p<=4063;p++)$[p]=0;for(p=4093;p<=4096;p++)$[p]=0;for(p=4390;p<=4398;p++)$[p]=0;for(p=4399;p<=4413;p++)$[p]=2;for(p=4418;p<=4433;p++)$[p]=2;for(p=4455;p<=4457;p++)$[p]=2;for(p=4484;p<=4489;p++)$[p]=0;for(p=4491;p<=4554;p++)$[p]=0;for(p=4568;p<=4589;p++)$[p]=0;for(p=4652;p<=4656;p++)$[p]=0;for(p=4766;p<=4800;p++)$[p]=0;for(p=5014;p<=5016;p++)$[p]=0;for(p=5069;p<=5072;p++)$[p]=0;for(p=5105;p<=5130;p++)$[p]=0;for(p=5173;p<=5188;p++)$[p]=0;for(p=5253;p<=5259;p++)$[p]=0;for(p=5269;p<=5275;p++)$[p]=0;for(p=5292;p<=5311;p++)$[p]=0;for(p=5329;p<=5331;p++)$[p]=0;for(p=5343;p<=5349;p++)$[p]=0;for(p=5355;p<=5357;p++)$[p]=0;for(p=5387;p<=5389;p++)$[p]=0;for(p=5459;p<=5463;p++)$[p]=0;for(p=5479;p<=5482;p++)$[p]=0;for(p=5518;p<=5520;p++)$[p]=0;for(p=5530;p<=5539;p++)$[p]=0;for(p=5550;p<=5552;p++)$[p]=0;for(p=5562;p<=5583;p++)$[p]=0;for(p=5623;p<=5625;p++)$[p]=2;for(p=5631;p<=5639;p++)$[p]=0;for(p=5649;p<=5653;p++)$[p]=0;for(p=5663;p<=5680;p++)$[p]=0;for(p=5682;p<=5685;p++)$[p]=0;for(p=5875;p<=5877;p++)$[p]=0;for(p=5896;p<=5899;p++)$[p]=0;for(p=5921;p<=5940;p++)$[p]=0;for(p=6050;p<=6125;p++)$[p]=0;for(p=6244;p<=6275;p++)$[p]=0;for(p=6328;p<=6348;p++)$[p]=0;for(p=6350;p<=6356;p++)$[p]=0;for(p=6366;p<=6372;p++)$[p]=0;for(p=6381;p<=6387;p++)$[p]=0;for(p=6393;p<=6404;p++)$[p]=0;for(p=6480;p<=6483;p++)$[p]=0;for(p=6511;p<=6514;p++)$[p]=0;for(p=6579;p<=6581;p++)$[p]=0;for(p=6619;p<=6624;p++)$[p]=0;for(p=6625;p<=6627;p++)$[p]=2;for(p=6628;p<=6632;p++)$[p]=0;for(p=6634;p<=6637;p++)$[p]=0;for(p=6669;p<=6692;p++)$[p]=0;for(p=6707;p<=6709;p++)$[p]=0;for(p=6720;p<=6723;p++)$[p]=0;for(p=6732;p<=6738;p++)$[p]=0;for(p=6931;p<=6933;p++)$[p]=0;for(p=6956;p<=6959;p++)$[p]=0;for(p=7005;p<=7007;p++)$[p]=0;for(p=7057;p<=7070;p++)$[p]=2;for(p=7074;p<=7082;p++)$[p]=0;for(p=7109;p<=7118;p++)$[p]=0;for(p=7119;p<=7127;p++)$[p]=1;for(p=7374;p<=7376;p++)$[p]=0;for(p=7528;p<=7586;p++)$[p]=0;for(p=7587;p<=7645;p++)$[p]=2;for(p=7692;p<=7696;p++)$[p]=0;for(p=7755;p<=7787;p++)$[p]=0;for(p=7791;p<=7795;p++)$[p]=0;for(p=7799;p<=7801;p++)$[p]=0;for(p=7803;p<=7805;p++)$[p]=0;for(p=7825;p<=7831;p++)$[p]=0;for(p=7845;p<=7859;p++)$[p]=0;for(p=8013;p<=8032;p++)$[p]=0;for(p=8065;p<=8068;p++)$[p]=1;for(p=8518;p<=8529;p++)$[p]=2;for(p=8533;p<=8536;p++)$[p]=2;for(p=8538;p<=8540;p++)$[p]=2;for(p=8677;p<=8679;p++)$[p]=0;for(p=8836;p<=8840;p++)$[p]=0;for(p=8857;p<=8859;p++)$[p]=0;for(p=8908;p<=8910;p++)$[p]=0;for(p=9154;p<=9159;p++)$[p]=0;for(p=9205;p<=9218;p++)$[p]=0;for(p=9271;p<=9273;p++)$[p]=0;for(p=9295;p<=9297;p++)$[p]=0;for(p=9356;p<=9360;p++)$[p]=0;for(p=9404;p<=9407;p++)$[p]=0;for(p=9476;p<=9482;p++)$[p]=0;for(p=9487;p<=9494;p++)$[p]=0;for(p=9697;p<=9699;p++)$[p]=0;for(p=9821;p<=9865;p++)$[p]=0;for(p=20002;p<=20032;p++)$[p]=0;for(p=20047;p<=20049;p++)$[p]=0;for(p=20062;p<=20092;p++)$[p]=0;for(p=20135;p<=20138;p++)$[p]=0;for(p=20248;p<=20258;p++)$[p]=0;for(p=20348;p<=20358;p++)$[p]=0;for(p=20436;p<=20440;p++)$[p]=0;for(p=20822;p<=20824;p++)$[p]=0;for(p=20904;p<=20932;p++)$[p]=0;for(p=20934;p<=20936;p++)$[p]=0;for(p=21004;p<=21032;p++)$[p]=0;for(p=21035;p<=21037;p++)$[p]=0;for(p=21095;p<=21097;p++)$[p]=0;for(p=21148;p<=21150;p++)$[p]=0;for(p=21207;p<=21264;p++)$[p]=0;for(p=21307;p<=21364;p++)$[p]=0;for(p=21413;p<=21423;p++)$[p]=0;for(p=21453;p<=21463;p++)$[p]=0;for(p=21473;p<=21483;p++)$[p]=0;for(p=21780;p<=21782;p++)$[p]=0;for(p=21891;p<=21894;p++)$[p]=0;for(p=21896;p<=21899;p++)$[p]=0;for(p=22171;p<=22177;p++)$[p]=0;for(p=22181;p<=22187;p++)$[p]=0;for(p=22191;p<=22197;p++)$[p]=0;for(p=22207;p<=22222;p++)$[p]=0;for(p=22234;p<=22236;p++)$[p]=0;for(p=22243;p<=22250;p++)$[p]=0;for(p=22262;p<=22265;p++)$[p]=0;for(p=22307;p<=22322;p++)$[p]=0;for(p=22348;p<=22357;p++)$[p]=0;for(p=22407;p<=22422;p++)$[p]=0;for(p=22462;p<=22465;p++)$[p]=0;for(p=22521;p<=22525;p++)$[p]=0;for(p=22607;p<=22622;p++)$[p]=0;for(p=22641;p<=22646;p++)$[p]=0;for(p=22648;p<=22657;p++)$[p]=0;for(p=22707;p<=22722;p++)$[p]=0;for(p=22762;p<=22765;p++)$[p]=0;for(p=22991;p<=22994;p++)$[p]=0;for(p=23028;p<=23038;p++)$[p]=0;for(p=23830;p<=23853;p++)$[p]=0;for(p=23866;p<=23872;p++)$[p]=0;for(p=23877;p<=23884;p++)$[p]=0;for(p=23886;p<=23894;p++)$[p]=0;for(p=23946;p<=23948;p++)$[p]=0;for(p=24311;p<=24313;p++)$[p]=0;for(p=24342;p<=24347;p++)$[p]=0;for(p=24370;p<=24374;p++)$[p]=10;for(p=24375;p<=24381;p++)$[p]=0;for(p=24718;p<=24721;p++)$[p]=0;for(p=24817;p<=24821;p++)$[p]=0;for(p=24877;p<=24882;p++)$[p]=0;for(p=24891;p<=24893;p++)$[p]=0;for(p=25391;p<=25395;p++)$[p]=0;for(p=25828;p<=25838;p++)$[p]=0;for(p=26191;p<=26195;p++)$[p]=0;for(p=26391;p<=26393;p++)$[p]=0;for(p=26701;p<=26722;p++)$[p]=0;for(p=26729;p<=26799;p++)$[p]=2;for(p=26801;p<=26803;p++)$[p]=2;for(p=26811;p<=26813;p++)$[p]=2;for(p=26847;p<=26870;p++)$[p]=2;for(p=26891;p<=26899;p++)$[p]=0;for(p=26901;p<=26923;p++)$[p]=0;for(p=26929;p<=26946;p++)$[p]=0;for(p=26948;p<=26998;p++)$[p]=0;for(p=27037;p<=27040;p++)$[p]=0;for(p=27205;p<=27232;p++)$[p]=0;for(p=27258;p<=27260;p++)$[p]=0;for(p=27391;p<=27398;p++)$[p]=0;for(p=27561;p<=27564;p++)$[p]=0;for(p=27571;p<=27574;p++)$[p]=0;for(p=27581;p<=27584;p++)$[p]=0;for(p=27591;p<=27594;p++)$[p]=0;for(p=28191;p<=28193;p++)$[p]=0;for(p=28348;p<=28358;p++)$[p]=0;for(p=28402;p<=28432;p++)$[p]=0;for(p=28462;p<=28492;p++)$[p]=0;for(p=29118;p<=29122;p++)$[p]=0;for(p=29168;p<=29172;p++)$[p]=0;for(p=29177;p<=29185;p++)$[p]=0;for(p=29187;p<=29195;p++)$[p]=0;for(p=29900;p<=29903;p++)$[p]=0;for(p=30161;p<=30179;p++)$[p]=0;for(p=30491;p<=30494;p++)$[p]=0;for(p=30729;p<=30732;p++)$[p]=0;for(p=31251;p<=31259;p++)$[p]=0;for(p=31265;p<=31268;p++)$[p]=0;for(p=31275;p<=31279;p++)$[p]=0;for(p=31281;p<=31297;p++)$[p]=0;for(p=31461;p<=31469;p++)$[p]=0;for(p=31491;p<=31495;p++)$[p]=0;for(p=31917;p<=31922;p++)$[p]=0;for(p=31965;p<=32e3;p++)$[p]=0;for(p=32001;p<=32003;p++)$[p]=2;for(p=32005;p<=32031;p++)$[p]=2;for(p=32033;p<=32060;p++)$[p]=2;for(p=32064;p<=32067;p++)$[p]=2;for(p=32074;p<=32077;p++)$[p]=2;for(p=32081;p<=32086;p++)$[p]=0;for(p=32107;p<=32130;p++)$[p]=0;for(p=32133;p<=32159;p++)$[p]=0;for(p=32164;p<=32167;p++)$[p]=2;for(p=32180;p<=32199;p++)$[p]=0;for(p=32201;p<=32260;p++)$[p]=0;for(p=32301;p<=32360;p++)$[p]=0;for(p=32601;p<=32662;p++)$[p]=0;for(p=32664;p<=32667;p++)$[p]=2;for(p=32701;p<=32761;p++)$[p]=0;for(p=53001;p<=53004;p++)$[p]=0;for(p=53008;p<=53019;p++)$[p]=0;for(p=53021;p<=53032;p++)$[p]=0;for(p=53034;p<=53037;p++)$[p]=0;for(p=53042;p<=53046;p++)$[p]=0;for(p=53074;p<=53080;p++)$[p]=0;for(p=54001;p<=54004;p++)$[p]=0;for(p=54008;p<=54019;p++)$[p]=0;for(p=54021;p<=54032;p++)$[p]=0;for(p=54034;p<=54037;p++)$[p]=0;for(p=54042;p<=54046;p++)$[p]=0;for(p=54048;p<=54053;p++)$[p]=0;for(p=54074;p<=54080;p++)$[p]=0;for(p=54098;p<=54101;p++)$[p]=0;for(p=102001;p<=102040;p++)$[p]=0;for(p=102042;p<=102063;p++)$[p]=0;for(p=102065;p<=102067;p++)$[p]=0;for(p=102070;p<=102117;p++)$[p]=0;for(p=102122;p<=102216;p++)$[p]=0;for(p=102221;p<=102377;p++)$[p]=0;for(p=102382;p<=102388;p++)$[p]=0;for(p=102389;p<=102398;p++)$[p]=2;for(p=102399;p<=102444;p++)$[p]=0;for(p=102445;p<=102447;p++)$[p]=2;for(p=102448;p<=102458;p++)$[p]=0;for(p=102459;p<=102468;p++)$[p]=2;for(p=102469;p<=102499;p++)$[p]=0;for(p=102500;p<=102519;p++)$[p]=1;for(p=102520;p<=102524;p++)$[p]=0;for(p=102525;p<=102529;p++)$[p]=2;for(p=102530;p<=102588;p++)$[p]=0;for(p=102590;p<=102598;p++)$[p]=0;for(p=102601;p<=102603;p++)$[p]=0;for(p=102605;p<=102628;p++)$[p]=0;for(p=102629;p<=102646;p++)$[p]=2;for(p=102648;p<=102700;p++)$[p]=2;for(p=102701;p<=102703;p++)$[p]=0;for(p=102707;p<=102730;p++)$[p]=2;for(p=102733;p<=102758;p++)$[p]=2;for(p=102767;p<=102900;p++)$[p]=0;for(p=102901;p<=102933;p++)$[p]=2;for(p=102934;p<=102950;p++)$[p]=13;for(p=102951;p<=102955;p++)$[p]=0;for(p=102961;p<=102963;p++)$[p]=0;for(p=102965;p<=102969;p++)$[p]=0;for(p=102971;p<=102973;p++)$[p]=0;for(p=102975;p<=102989;p++)$[p]=0;for(p=102990;p<=102992;p++)$[p]=1;for(p=102997;p<=103002;p++)$[p]=0;for(p=103003;p<=103008;p++)$[p]=2;for(p=103009;p<=103011;p++)$[p]=0;for(p=103012;p<=103014;p++)$[p]=2;for(p=103019;p<=103021;p++)$[p]=0;for(p=103022;p<=103024;p++)$[p]=2;for(p=103029;p<=103031;p++)$[p]=0;for(p=103032;p<=103034;p++)$[p]=2;for(p=103065;p<=103068;p++)$[p]=0;for(p=103074;p<=103076;p++)$[p]=0;for(p=103077;p<=103079;p++)$[p]=1;for(p=103080;p<=103082;p++)$[p]=0;for(p=103083;p<=103085;p++)$[p]=2;for(p=103090;p<=103093;p++)$[p]=0;for(p=103097;p<=103099;p++)$[p]=0;for(p=103100;p<=103102;p++)$[p]=2;for(p=103107;p<=103109;p++)$[p]=0;for(p=103110;p<=103112;p++)$[p]=2;for(p=103113;p<=103116;p++)$[p]=0;for(p=103117;p<=103120;p++)$[p]=2;for(p=103153;p<=103157;p++)$[p]=0;for(p=103158;p<=103162;p++)$[p]=2;for(p=103163;p<=103165;p++)$[p]=0;for(p=103166;p<=103168;p++)$[p]=1;for(p=103169;p<=103171;p++)$[p]=2;for(p=103186;p<=103188;p++)$[p]=0;for(p=103189;p<=103191;p++)$[p]=2;for(p=103192;p<=103195;p++)$[p]=0;for(p=103196;p<=103199;p++)$[p]=2;for(p=103200;p<=103224;p++)$[p]=0;for(p=103225;p<=103227;p++)$[p]=1;for(p=103232;p<=103237;p++)$[p]=0;for(p=103238;p<=103243;p++)$[p]=2;for(p=103244;p<=103246;p++)$[p]=0;for(p=103247;p<=103249;p++)$[p]=2;for(p=103254;p<=103256;p++)$[p]=0;for(p=103257;p<=103259;p++)$[p]=2;for(p=103264;p<=103266;p++)$[p]=0;for(p=103267;p<=103269;p++)$[p]=2;for(p=103300;p<=103375;p++)$[p]=0;for(p=103381;p<=103383;p++)$[p]=0;for(p=103384;p<=103386;p++)$[p]=1;for(p=103387;p<=103389;p++)$[p]=0;for(p=103390;p<=103392;p++)$[p]=2;for(p=103397;p<=103399;p++)$[p]=0;for(p=103400;p<=103471;p++)$[p]=2;for(p=103476;p<=103478;p++)$[p]=0;for(p=103479;p<=103481;p++)$[p]=2;for(p=103486;p<=103488;p++)$[p]=0;for(p=103489;p<=103491;p++)$[p]=2;for(p=103492;p<=103495;p++)$[p]=0;for(p=103496;p<=103499;p++)$[p]=2;for(p=103528;p<=103543;p++)$[p]=0;for(p=103544;p<=103548;p++)$[p]=2;for(p=103549;p<=103551;p++)$[p]=0;for(p=103552;p<=103554;p++)$[p]=1;for(p=103555;p<=103557;p++)$[p]=2;for(p=103558;p<=103560;p++)$[p]=0;for(p=103571;p<=103573;p++)$[p]=0;for(p=103574;p<=103576;p++)$[p]=2;for(p=103577;p<=103580;p++)$[p]=0;for(p=103581;p<=103583;p++)$[p]=2;for(p=103595;p<=103694;p++)$[p]=0;for(p=103696;p<=103699;p++)$[p]=0;for(p=103700;p<=103793;p++)$[p]=2;for(p=103794;p<=103890;p++)$[p]=0;for(p=103891;p<=103896;p++)$[p]=2;for(p=103900;p<=103971;p++)$[p]=2;for(p=103972;p<=103977;p++)$[p]=0;for(p=112e3;p<=112101;p++)$[p]=0;const jie={102113:!0,102100:!0,3857:!0,3785:!0},Vie={4326:!0,3785:!0,3857:!0,102113:!0,102100:!0,104905:!0,104971:!0},mN='PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',K1=[-20037508342788905e-9,20037508342788905e-9],X1=[-20037508342787e-6,20037508342787e-6],Ez={102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:K1,origin:X1,dx:1e-5},102100:{wkTemplate:mN,valid:K1,origin:X1,dx:1e-5},3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:K1,origin:X1,dx:1e-5},3857:{wkTemplate:mN,valid:K1,origin:X1,dx:1e-5},4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",{Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],UNIT["Degrees",111319.491]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104971:{wkTemplate:'GEOGCS["Mars_2000_(Sphere)",DATUM["Mars_2000_(Sphere)",SPHEROID["Mars_2000_(Sphere)",3396190.0,0.0]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104905:{wkTemplate:'GEOGCS["GCS_Mars_2000",DATUM["D_Mars_2000",SPHEROID["Mars_2000_IAU_IAG",3396190.0,169.8944472236118]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5}};function Cr(e,t){return e===t||e!=null&&t!=null&&(e.wkid!=null||t.wkid!=null?e.wkid===t.wkid||ip(e)&&ip(t)||t.latestWkid!=null&&e.wkid===t.latestWkid||e.latestWkid!=null&&t.wkid===e.latestWkid:!(!e.wkt||!t.wkt)&&e.wkt.toUpperCase()===t.wkt.toUpperCase())}function Ls(e){return Yr(e)&&e.wkid&&Ez[e.wkid]||null}function UO(e){return!!Yr(e)&&(e.wkid?$[e.wkid]==null:!!e.wkt&&!!/^\s*GEOGCS/i.test(e.wkt))}function zie(e){return!(BO(e)||WO(e))}function hv(e){return Yr(e)&&e.wkid===4326}function mCe(e){return Yr(e)&&e.wkid===np.CGCS2000}function ip(e){return Yr(e)&&e.wkid!=null&&jie[e.wkid]===!0}function Uie(e){return Yr(e)&&e.wkid===32662}function GO(e){return e===np.GCSMARS2000||e===np.GCSMARS2000_SPHERE}function BO(e){return Yr(e)&&e.wkid!=null&&GO(e.wkid)}function qO(e){return e===np.GCSMOON2000}function WO(e){return Yr(e)&&e.wkid!=null&&qO(e.wkid)}function Gie(e){return Yr(e)&&e.wkid!=null&&Vie[e.wkid]===!0}function Yr(e){return e!=null&&(e.wkid!=null&&e.wkid>=2e3||e.wkt!=null)}const Bie={wkid:4326,wkt:Qx(Ez[4326].wkTemplate,{Central_Meridian:"0.0"})},qie={wkid:102100,latestWkid:3857},Wie={wkid:32662};function HO(e){return{wkt:`GEOCCS["Spherical geocentric",
    DATUM["Not specified",
      SPHEROID["Sphere",${e.radius},0]],
    PRIMEM["Greenwich",0.0,
      AUTHORITY["EPSG","8901"]],
    UNIT["m",1.0],
    AXIS["Geocentric X",OTHER],
    AXIS["Geocentric Y",EAST],
    AXIS["Geocentric Z",NORTH]
  ]`}}const Hie=HO(kt),Mz=HO(Dl),Iz=HO(Kc),Zie={wkt:`GEOCCS["WGS 84",
  DATUM["WGS_1984",
    SPHEROID["WGS 84",${kt.radius},298.257223563,
      AUTHORITY["EPSG","7030"]],
    AUTHORITY["EPSG","6326"]],
  PRIMEM["Greenwich",0,
    AUTHORITY["EPSG","8901"]],
  UNIT["m",1.0,
    AUTHORITY["EPSG","9001"]],
  AXIS["Geocentric X",OTHER],
  AXIS["Geocentric Y",OTHER],
  AXIS["Geocentric Z",NORTH],
  AUTHORITY["EPSG","4978"]
]`};function Jie(e){return e!=null&&(BO(e)||Cr(e,Mz))?Dl:e!=null&&(WO(e)||Cr(e,Iz))?Kc:kt}function yCe(e){return GO(e)?Dl:qO(e)?Kc:kt}const Cz=39.37,Qie=kt.radius*Math.PI/200,kz=/UNIT\[([^\]]+)\]\]$/i,Dh=$,Pz=/UNIT\[([^\]]+)\]/i,Yie=new Set([4261,4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104139,104140]),Kie=Vn()({meter:"meters",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",yard_clarke:"clarke-yards",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",chain_benoit_1895_b:"benoit-1895-b-chains",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"}),sa=e=>e*e,_u=e=>e*e*e,pv={length:{baseUnit:"meters",units:{millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},decimeters:{inBaseUnits:.1},meters:{inBaseUnits:1},kilometers:{inBaseUnits:1e3},inches:{inBaseUnits:.0254},feet:{inBaseUnits:.3048},yards:{inBaseUnits:.9144},miles:{inBaseUnits:1609.344},"nautical-miles":{inBaseUnits:1852},"us-feet":{inBaseUnits:1200/3937}}},area:{baseUnit:"square-meters",units:{"square-millimeters":{inBaseUnits:sa(.001)},"square-centimeters":{inBaseUnits:sa(.01)},"square-decimeters":{inBaseUnits:sa(.1)},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:sa(1e3)},"square-inches":{inBaseUnits:sa(.0254)},"square-feet":{inBaseUnits:sa(.3048)},"square-yards":{inBaseUnits:sa(.9144)},"square-miles":{inBaseUnits:sa(1609.344)},"square-us-feet":{inBaseUnits:sa(1200/3937)},acres:{inBaseUnits:.0015625*sa(1609.344)},ares:{inBaseUnits:100},hectares:{inBaseUnits:1e4}}},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1e3*_u(.001)},"cubic-centimeters":{inBaseUnits:1e3*_u(.01)},"cubic-decimeters":{inBaseUnits:1e3*_u(.1)},"cubic-meters":{inBaseUnits:1e3},"cubic-kilometers":{inBaseUnits:1e3*_u(1e3)},"cubic-inches":{inBaseUnits:1e3*_u(.0254)},"cubic-feet":{inBaseUnits:1e3*_u(.3048)},"cubic-yards":{inBaseUnits:1e3*_u(.9144)},"cubic-miles":{inBaseUnits:1e3*_u(1609.344)}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},Xie=(()=>{const e={};for(const t in pv)for(const r in pv[t].units)e[r]=t;return e})();function ese(e,t,r){return e*pv[r].units[t].inBaseUnits}function tse(e,t,r){return e/pv[r].units[t].inBaseUnits}function OM(e){const t=Xie[e];if(!t)throw new Error("unknown type");return t}function yN(e,t=null){return t=t||OM(e),pv[t].baseUnit===e}function Wr(e,t,r){if(t===r)return e;const n=OM(t);if(n!==OM(r))throw new Error("incompatible units");const i=yN(t,n)?e:ese(e,t,n);return yN(r,n)?i:tse(i,r,n)}function rse(e,t,r){return Wr(e,t,"meters")/(r*Math.PI/180)}function Oz(e){return Kie.fromJSON(e.toLowerCase())||null}function SS(e){if(e!=null&&!zie(e))return 1;const t=Ga(e);return t>1e5?1:t}function nse(e){return Ga(e)>=Jie(e).metersPerDegree?"meters":ZO(e)}function Ga(e,t=kt.metersPerDegree){return ise(e,!0)??t}function ise(e,t=!1){const r=e!=null?e.wkid:null,n=e!=null?e.wkt:null;let i=null;if(r){if(GO(r))return Dl.metersPerDegree;if(qO(r))return Kc.metersPerDegree;i=Dh.values[Dh[r]],!i&&t&&Yie.has(r)&&(i=Qie)}else n&&(Lz(n)?i=gN(kz.exec(n),i):Az(n)&&(i=gN(Pz.exec(n),i)));return i}function gCe(e){return e.isGeographic?1:Ga(e)}function gN(e,t){return e&&e[1]?Rz(e[1]):t}function Rz(e){return parseFloat(e.split(",")[1])}function ZO(e){const t=e!=null?e.wkid:null,r=e!=null?e.wkt:null;let n=null;if(t)n=Dh.units[Dh[t]];else if(r){const i=Lz(r)?kz:Az(r)?Pz:null;if(i){const s=i.exec(r);s&&s[1]&&(n=ose(s[1]))}}return n!=null?Oz(n):null}function Az(e){return/^GEOCCS/i.test(e)}function Lz(e){return/^PROJCS/i.test(e)}const sse=1e-7;function ose(e){const t=/[\\"\\']{1}([^\\"\\']+)/.exec(e);let r=t&&t[1];if(!r||!Dh.units.includes(r)){const n=Rz(e);r=null;const i=Dh.values;for(let s=0;s<i.length;++s)if(Math.abs(n-i[s])<sse){r=Dh.units[s];break}}return r}function ase(e){const t=ZO(e);if(t==null)return null;switch(t){case"feet":case"us-feet":case"clarke-feet":case"clarke-yards":case"clarke-links":case"sears-yards":case"sears-feet":case"sears-chains":case"benoit-1895-b-chains":case"indian-yards":case"indian-1937-yards":case"gold-coast-feet":case"sears-1922-truncated-chains":return"imperial";case"50-kilometers":case"150-kilometers":case"meters":return"metric"}return null}const lse={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},use={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriYards:"yards"},cse={esriDUDecimalDegrees:"degrees",esriDURadians:"radians"},vCe=Vn()(lse),wCe=Vn()(use),_Ce=Vn()(cse);var ua;let vt=ua=class extends Q{static fromJSON(e){if(!e)return null;if(e.wkid){if(e.wkid===102100)return ua.WebMercator;if(e.wkid===4326)return ua.WGS84}const t=new ua;return t.read(e),t}constructor(e){super(e),this.latestWkid=null,this.wkid=null,this.wkt=null,this.vcsWkid=null,this.latestVcsWkid=null,this.imageCoordinateSystem=null}normalizeCtorArgs(e){return e&&typeof e=="object"?e:{[typeof e=="string"?"wkt":"wkid"]:e}}get isWGS84(){return hv(this)}get isWebMercator(){return ip(this)}get isGeographic(){return UO(this)}get isWrappable(){return Gie(this)}get metersPerUnit(){return Ga(this)}get unit(){return ZO(this)||(this.isGeographic?"degrees":null)}writeWkt(e,t){this.wkid||(t.wkt=e)}clone(){if(this===ua.WGS84)return ua.WGS84;if(this===ua.WebMercator)return ua.WebMercator;const e=new ua;return this.wkid!=null?(e.wkid=this.wkid,this.latestWkid!=null&&(e.latestWkid=this.latestWkid),this.vcsWkid!=null&&(e.vcsWkid=this.vcsWkid),this.latestVcsWkid!=null&&(e.latestVcsWkid=this.latestVcsWkid)):this.wkt!=null&&(e.wkt=this.wkt),this.imageCoordinateSystem&&(e.imageCoordinateSystem=F(this.imageCoordinateSystem)),e}equals(e){if(e==null)return!1;if(this.imageCoordinateSystem||e.imageCoordinateSystem){if(this.imageCoordinateSystem==null||e.imageCoordinateSystem==null)return!1;const{id:t,referenceServiceName:r}=e.imageCoordinateSystem,{geodataXform:n}=e.imageCoordinateSystem,i=this.imageCoordinateSystem;return t==null||n?JSON.stringify(i)===JSON.stringify(e.imageCoordinateSystem):r?i.id===t&&i.referenceServiceName===r:i.id===t}return Cr(this,e)}toJSON(e){return this.write(void 0,e)}};vt.GCS_NAD_1927=null,vt.WGS84=null,vt.WebMercator=null,vt.PlateCarree=null,u([d({readOnly:!0})],vt.prototype,"isWGS84",null),u([d({readOnly:!0})],vt.prototype,"isWebMercator",null),u([d({readOnly:!0})],vt.prototype,"isGeographic",null),u([d({readOnly:!0})],vt.prototype,"isWrappable",null),u([d({type:bt,json:{write:!0}})],vt.prototype,"latestWkid",void 0),u([d({readOnly:!0})],vt.prototype,"metersPerUnit",null),u([d({readOnly:!0})],vt.prototype,"unit",null),u([d({type:bt,json:{write:!0,origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkt==null}}}}}}})],vt.prototype,"wkid",void 0),u([d({type:String,json:{origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkid==null}}}}}}})],vt.prototype,"wkt",void 0),u([pe("wkt"),pe("web-scene","wkt")],vt.prototype,"writeWkt",null),u([d({type:bt,json:{write:!0}})],vt.prototype,"vcsWkid",void 0),u([d({type:bt,json:{write:!0}})],vt.prototype,"latestVcsWkid",void 0),u([d()],vt.prototype,"imageCoordinateSystem",void 0),vt=ua=u([E("esri.geometry.SpatialReference")],vt),vt.prototype.toJSON.isDefaultToJSON=!0,vt.GCS_NAD_1927=new vt({wkid:4267,wkt:'GEOGCS["GCS_North_American_1927",DATUM["D_North_American_1927",SPHEROID["Clarke_1866",6378206.4,294.9786982]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]]'}),vt.WGS84=new vt(Bie),vt.WebMercator=new vt(qie),vt.PlateCarree=new vt(Wie),Object.freeze&&(Object.freeze(vt.GCS_NAD_1927),Object.freeze(vt.WGS84),Object.freeze(vt.WebMercator));const Ce=vt,Nz="20230626",Dz="b81703b48e0b92e492f4cc6b739af02a9af50038",dse="4.27";let JO=dse;JO="4.27.6";const hse={async request(e,t){var a,l;const{default:r}=await ie(()=>Promise.resolve().then(()=>Pse),void 0),n=e.options,i=n.responseType;n.signal=t==null?void 0:t.signal,n.responseType=i==="native"||i==="native-request-init"?"native-request-init":i&&["blob","json","text"].includes(i)&&((a=_z(e.url))!=null&&a.after)?i:"array-buffer";const s=await r(e.url,n),o={data:s.data,httpStatus:s.httpStatus,ssl:s.ssl};switch((l=s.requestOptions)==null?void 0:l.responseType){case"native-request-init":return delete o.data.signal,o;case"blob":o.data=await o.data.arrayBuffer();break;case"json":o.data=new TextEncoder().encode(JSON.stringify(o.data)).buffer;break;case"text":o.data=new TextEncoder().encode(o.data).buffer}return{result:o,transferList:[o.data]}}};let ht;function bCe(e){ht=e}function SCe(e){const t=ht==null?void 0:ht.findCredential(e);return t!=null&&t.token?$z(e,"token",t.token):e}V("host-webworker");const pse=["elevation3d.arcgis.com","js.arcgis.com","jsdev.arcgis.com","jsqa.arcgis.com","static.arcgis.com"];function Fz(e){const t=No(e,!0);return!!t&&t.endsWith(".arcgis.com")&&!pse.includes(t)&&!e.endsWith("/sharing/rest/generateToken")}function fse(e,t,r=!1,n){return new Promise((i,s)=>{if(Go(n))return void s(vN());let o=()=>{c(),s(new Error(`Unable to load ${t}`))},a=()=>{const h=e;c(),i(h)},l=()=>{if(!e)return;const h=e;c(),h.src="",s(vN())};const c=()=>{V("esri-image-decode")||(e.removeEventListener("error",o),e.removeEventListener("load",a)),o=null,a=null,e=null,n!=null&&n.removeEventListener("abort",l),l=null,r&&URL.revokeObjectURL(t)};n!=null&&n.addEventListener("abort",l),V("esri-image-decode")?e.decode().then(a,o):(e.addEventListener("error",o),e.addEventListener("load",a))})}function vN(){try{return new DOMException("Aborted","AbortError")}catch{const e=new Error;return e.name="AbortError",e}}const mse="Timeout exceeded";function yse(){return new Error(mse)}function gse(e){ot.request.crossOriginNoCorsDomains||(ot.request.crossOriginNoCorsDomains={});const t=ot.request.crossOriginNoCorsDomains;for(let r of e)r=r.toLowerCase(),/^https?:\/\//.test(r)?t[No(r)??""]=0:(t[No("http://"+r)??""]=0,t[No("https://"+r)??""]=0)}function vse(e){const t=ot.request.crossOriginNoCorsDomains;if(t){let r=No(e);if(r)return r=r.toLowerCase(),!Tm(r,AO())&&t[r]<Date.now()-36e5}return!1}async function wse(e){var i;const t=ot.request.crossOriginNoCorsDomains,r=No(e);t&&r&&(t[r.toLowerCase()]=Date.now());const n=jn(e);e=n.path,((i=n.query)==null?void 0:i.f)==="json"&&(e+="?f=json");try{await fetch(e,{mode:"no-cors",credentials:"include"})}catch{}}async function St(e,t){var c;e instanceof URL&&(e=e.toString()),(t==null?void 0:t.query)instanceof URLSearchParams&&(t.query=LO(t.query.toString().replaceAll("+"," ")));const r=wp(e),n=o2(e);n||r||(e=Lo(e));const i={url:e,requestOptions:{...t}};let s=_z(e);if(s){const h=await Mse(s,i);if(h!=null)return{data:h,getHeader:QO,httpStatus:200,requestOptions:i.requestOptions,url:i.url};s.after||s.error||(s=null)}if(e=i.url,(t=i.requestOptions).responseType==="image"&&(V("host-webworker")||V("host-node")))throw Ra("request:invalid-parameters",new Error("responseType 'image' is not supported in Web Workers or Node environment"),i);if(t.method==="head"){if(t.body)throw Ra("request:invalid-parameters",new Error("body parameter cannot be set when method is 'head'"),i);if(r||n)throw Ra("request:invalid-parameters",new Error("data and blob URLs are not supported for method 'head'"),i)}if(await $se(),xS)return xS.execute(e,t);const o=new AbortController;As(t,()=>o.abort());const a={controller:o,credential:void 0,credentialToken:void 0,fetchOptions:void 0,hasToken:!1,interceptor:s,params:i,redoRequest:!1,useIdentity:So.useIdentity,useProxy:!1,useSSL:!1,withCredentials:!1},l=await Cse(a);return(c=s==null?void 0:s.after)==null||c.call(s,l),l}let xS;const So=ot.request,jz="FormData"in globalThis,_se=[499,498,403,401],bse=["COM_0056","COM_0057","SB_0008"],Sse=[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],QO=()=>null,$S=Symbol();function xse(e){const t=No(e);t&&!St._corsServers.includes(t)&&St._corsServers.push(t)}function wN(e){const t=No(e);return!t||t.endsWith(".arcgis.com")||St._corsServers.includes(t)||DO(t)}function Ra(e,t,r,n){let i="Error";const s={url:r.url,requestOptions:r.requestOptions,getHeader:QO,ssl:!1};if(t instanceof N)return t.details?(t.details=F(t.details),t.details.url=r.url,t.details.requestOptions=r.requestOptions):t.details=s,t;if(t){const o=n&&(c=>n.headers.get(c)),a=n==null?void 0:n.status,l=t.message;l&&(i=l),o&&(s.getHeader=o),s.httpStatus=(t.httpCode!=null?t.httpCode:t.code)||a||0,s.subCode=t.subcode,s.messageCode=t.messageCode,typeof t.details=="string"?s.messages=[t.details]:s.messages=t.details,s.raw=$S in t?t[$S]:t}return Ei(t)?ar():new N(e,i,s)}async function $se(){V("host-webworker")?xS||(xS=await ie(()=>import("./request-e04e8b82.js"),[])):St._abortableFetch||(St._abortableFetch=globalThis.fetch.bind(globalThis))}async function RM(){ht||await ie(()=>import("./IdentityManager-456ffa5b.js"),["assets/IdentityManager-456ffa5b.js","assets/widget-bf2c3b1d.js"])}async function Tse(e){var a;const t=e.params.url,r=e.params.requestOptions,n=e.controller.signal,i=r.body;let s=null,o=null;if(jz&&"HTMLFormElement"in globalThis&&(i instanceof FormData?s=i:i instanceof HTMLFormElement&&(s=new FormData(i))),typeof i=="string"&&(o=i),e.fetchOptions={cache:r.cacheBust&&!("polyfill"in St._abortableFetch)?"no-cache":"default",credentials:"same-origin",headers:r.headers||{},method:r.method==="head"?"HEAD":"GET",mode:"cors",priority:So.priority,redirect:"follow",signal:n},(s||o)&&(e.fetchOptions.body=s||o),r.authMode==="anonymous"&&(e.useIdentity=!1),e.hasToken=!!(/token=/i.test(t)||(a=r.query)!=null&&a.token||s!=null&&s.get("token")),!e.hasToken&&ot.apiKey&&Fz(t)&&(r.query||(r.query={}),r.query.token=ot.apiKey,e.hasToken=!0),e.useIdentity&&!e.hasToken&&!e.credentialToken&&!Vz(t)&&!Go(n)){let l;r.authMode==="immediate"?(await RM(),l=await ht.getCredential(t,{signal:n}),e.credential=l):r.authMode==="no-prompt"?(await RM(),l=await ht.getCredential(t,{prompt:!1,signal:n}).catch(()=>{}),e.credential=l):ht&&(l=ht.findCredential(t)),l&&(e.credentialToken=l.token,e.useSSL=!!l.ssl)}}function Vz(e){return Sse.some(t=>t.test(e))}async function Ese(e){let t=e.params.url;const r=e.params.requestOptions,n=e.fetchOptions??{},i=o2(t)||wp(t),s=r.responseType||"json",o=i?0:r.timeout!=null?r.timeout:So.timeout;let a=!1;if(!i){e.useSSL&&(t=VO(t)),r.cacheBust&&n.cache==="default"&&(t=$z(t,"request.preventCache",Date.now()));let m={...r.query};e.credentialToken&&(m.token=e.credentialToken);let y=$m(m);V("esri-url-encodes-apostrophe")&&(y=y.replaceAll("'","%27"));const g=t.length+1+y.length;let v;a=r.method==="delete"||r.method==="post"||r.method==="put"||!!r.body||g>So.maxUrlLength;const w=r.useProxy||!!s2(t);if(w){const b=bie(t);v=b.path,!a&&v.length+1+g>So.maxUrlLength&&(a=!0),b.query&&(m={...b.query,...m})}if(n.method==="HEAD"&&(a||w)){if(a)throw g>So.maxUrlLength?Ra("request:invalid-parameters",new Error("URL exceeds maximum length"),e.params):Ra("request:invalid-parameters",new Error("cannot use POST request when method is 'head'"),e.params);if(w)throw Ra("request:invalid-parameters",new Error("cannot use proxy when method is 'head'"),e.params)}if(a?(n.method=r.method==="delete"?"DELETE":r.method==="put"?"PUT":"POST",r.body?t=N$(t,m):(n.body=$m(m),n.headers||(n.headers={}),n.headers["Content-Type"]="application/x-www-form-urlencoded")):t=N$(t,m),w&&(e.useProxy=!0,t=`${v}?${t}`),m.token&&jz&&n.body instanceof FormData&&!uie(t)&&n.body.set("token",m.token),r.hasOwnProperty("withCredentials"))e.withCredentials=r.withCredentials;else if(!Tm(t,AO())){if(DO(t))e.withCredentials=!0;else if(ht){const b=ht.findServerInfo(t);b!=null&&b.webTierAuth&&(e.withCredentials=!0)}}e.withCredentials&&(n.credentials="include",vse(t)&&await wse(a?N$(t,m):t))}let l,c,h=0,f=!1;o>0&&(h=setTimeout(()=>{f=!0,e.controller.abort()},o));try{if(r.responseType==="native-request-init")c=n,c.url=t;else if(r.responseType!=="image"||n.cache!=="default"||n.method!=="GET"||a||Ise(r.headers)||!i&&!e.useProxy&&So.proxyUrl&&!wN(t)){if(l=await St._abortableFetch(t,n),e.useProxy||xse(t),r.responseType==="native")c=l;else if(n.method!=="HEAD")if(l.ok){switch(s){case"array-buffer":c=await l.arrayBuffer();break;case"blob":case"image":c=await l.blob();break;default:c=await l.text()}if(h&&(clearTimeout(h),h=0),s==="json"||s==="xml"||s==="document")if(c)switch(s){case"json":c=JSON.parse(c);break;case"xml":c=_N(c,"application/xml");break;case"document":c=_N(c,"text/html")}else c=null;if(c){if(s==="array-buffer"||s==="blob"){const m=l.headers.get("Content-Type");if(m&&/application\/json|text\/plain/i.test(m)&&c[s==="blob"?"size":"byteLength"]<=750)try{const y=await new Response(c).json();y.error&&(c=y)}catch{}}s==="image"&&c instanceof Blob&&(c=await bN(URL.createObjectURL(c),e,!0))}}else{c=await l.text();try{c=JSON.parse(c)}catch{}}}else c=await bN(t,e)}catch(m){if(m.name==="AbortError")throw f?yse():ar("Request canceled");if(!(!l&&m instanceof TypeError&&So.proxyUrl)||r.body||r.method==="delete"||r.method==="head"||r.method==="post"||r.method==="put"||e.useProxy||wN(t))throw m;e.redoRequest=!0,Sie({proxyUrl:So.proxyUrl,urlPrefix:No(t)??""})}finally{h&&clearTimeout(h)}return[l,c]}async function Mse(e,t){if(e.responseData!=null)return e.responseData;if(e.headers&&(t.requestOptions.headers={...t.requestOptions.headers,...e.headers}),e.query&&(t.requestOptions.query={...t.requestOptions.query,...e.query}),e.before){let r,n;try{n=await e.before(t)}catch(i){r=Ra("request:interceptor",i,t)}if((n instanceof Error||n instanceof N)&&(r=Ra("request:interceptor",n,t)),r)throw e.error&&e.error(r),r;return n}}function Ise(e){if(e){for(const t of Object.getOwnPropertyNames(e))if(e[t])return!0}return!1}function _N(e,t){let r;try{r=new DOMParser().parseFromString(e,t)}catch{}if(!r||r.getElementsByTagName("parsererror").length)throw new SyntaxError("XML Parse error");return r}async function Cse(e){var s,o;let t,r;await Tse(e);try{do[t,r]=await Ese(e);while(!await kse(e,t,r))}catch(a){const l=Ra("request:server",a,e.params,t);throw l.details.ssl=e.useSSL,(s=e.interceptor)!=null&&s.error&&e.interceptor.error(l),l}const n=e.params.url;if(r&&/\/sharing\/rest\/(accounts|portals)\/self/i.test(n)){if(!e.hasToken&&!e.credentialToken&&((o=r.user)!=null&&o.username)&&!DO(n)){const a=No(n,!0);a&&So.trustedServers.push(a)}Array.isArray(r.authorizedCrossOriginNoCorsDomains)&&gse(r.authorizedCrossOriginNoCorsDomains)}const i=e.credential;if(i&&ht){const a=ht.findServerInfo(i.server);let l=a==null?void 0:a.owningSystemUrl;if(l){l=l.replace(/\/?$/,"/sharing");const c=ht.findCredential(l,i.userId);c&&ht._getIdenticalSvcIdx(l,c)===-1&&c.resources.unshift(l)}}return{data:r,getHeader:t?a=>t==null?void 0:t.headers.get(a):QO,httpStatus:(t==null?void 0:t.status)??200,requestOptions:e.params.requestOptions,ssl:e.useSSL,url:e.params.url}}async function kse(e,t,r){var c;if(e.redoRequest)return e.redoRequest=!1,!1;const n=e.params.requestOptions;if(!t||n.responseType==="native"||n.responseType==="native-request-init")return!0;let i,s;if(r&&(r.error?i=r.error:r.status==="error"&&Array.isArray(r.messages)&&(i={...r},i[$S]=r,i.details=r.messages)),!i&&!t.ok)throw i=new Error(`Unable to load ${t.url} status: ${t.status}`),i[$S]=r,i;let o,a=null;i&&(s=Number(i.code),a=i.hasOwnProperty("subcode")?Number(i.subcode):null,o=i.messageCode,o=o==null?void 0:o.toUpperCase());const l=n.authMode;if(s===403&&(a===4||(c=i.message)!=null&&c.toLowerCase().includes("ssl")&&!i.message.toLowerCase().includes("permission"))){if(!e.useSSL)return e.useSSL=!0,!1}else if(!e.hasToken&&e.useIdentity&&(l!=="no-prompt"||s===498)&&s!==void 0&&_se.includes(s)&&!Vz(e.params.url)&&(s!==403||o&&!bse.includes(o)&&(a==null||a===2&&e.credentialToken))){await RM();try{const h=await ht.getCredential(e.params.url,{error:Ra("request:server",i,e.params),prompt:l!=="no-prompt",signal:e.controller.signal,token:e.credentialToken});return e.credential=h,e.credentialToken=h.token,e.useSSL=e.useSSL||h.ssl,!1}catch(h){if(l==="no-prompt")return e.credential=void 0,e.credentialToken=void 0,!1;i=h}}if(i)throw i;return!0}function bN(e,t,r=!1){const n=t.controller.signal,i=new Image;return t.withCredentials?i.crossOrigin="use-credentials":i.crossOrigin="anonymous",i.alt="",i.fetchPriority=So.priority,i.src=e,fse(i,e,r,n)}St._abortableFetch=null,St._corsServers=["https://server.arcgisonline.com","https://services.arcgisonline.com"];const Pse=Object.freeze(Object.defineProperty({__proto__:null,default:St},Symbol.toStringTag,{value:"Module"}));function we(e,t,r){let n,i;return t===void 0||Array.isArray(t)?(i=e,r=t,n=[void 0]):(i=t,n=Array.isArray(e)?e:[e]),(s,o)=>{const a=s.constructor.prototype;n.forEach(l=>{const c=WV(s,l,i);c.read&&typeof c.read=="object"||(c.read={}),c.read.reader=a[o],r&&(c.read.source=(c.read.source||[]).concat(r))})}}let ca=class extends Q{constructor(...t){super(...t),this.type=null,this.hasM=!1,this.hasZ=!1,this.spatialReference=Ce.WGS84}get cache(){return this.commitProperty("spatialReference"),{}}get extent(){return null}readSpatialReference(t,r){if(t instanceof Ce)return t;if(t!=null){const n=new Ce;return n.read(t,r),n}return t}clone(){return console.warn(".clone() is not implemented for "+this.declaredClass),null}clearCache(){this.notifyChange("cache")}getCacheValue(t){return this.cache[t]}setCacheValue(t,r){this.cache[t]=r}};u([d()],ca.prototype,"type",void 0),u([d({readOnly:!0})],ca.prototype,"cache",null),u([d({readOnly:!0})],ca.prototype,"extent",null),u([d({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],ca.prototype,"hasM",void 0),u([d({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],ca.prototype,"hasZ",void 0),u([d({type:Ce,json:{write:!0},value:Ce.WGS84})],ca.prototype,"spatialReference",void 0),u([we("spatialReference")],ca.prototype,"readSpatialReference",null),ca=u([E("esri.geometry.Geometry")],ca);const cd=ca,Ose=Object.prototype.toString;function Rse(e){const t="__accessorMetadata__"in e?gr(e):e;return function(...r){if(r.push(t),typeof r[2]=="number")throw new Error("Using @cast has parameter decorator is not supported since 4.16");return Ase.apply(this,r)}}function Ase(e,t,r,n){Jx(e,t).cast=n}function Lse(e){return(t,r)=>{Jx(t,e).cast=t[r]}}function Pt(...e){if(e.length!==3||typeof e[1]!="string")return e.length===1&&Ose.call(e[0])==="[object Function]"?Rse(e[0]):e.length===1&&typeof e[0]=="string"?Lse(e[0]):void 0}function Nse(e,t){const r=e.x-t.x,n=e.y-t.y,i=e.hasZ&&t.hasZ?e.z-t.z:0;return Math.sqrt(r*r+n*n+i*i)}const Dse=57.29577951308232,Fse=.017453292519943;function SN(e){return e*Dse}function xN(e){return e*Fse}function $Ce(e){return Math.PI/2-2*Math.atan(Math.exp(-e/kt.radius))}function AM(e){return e.wkid!=null||e.wkt!=null}const D$=[0,0];function TS(e,t,r,n,i){const s=e,o=i;if(o.spatialReference=r,"x"in s&&"x"in o)[o.x,o.y]=t(s.x,s.y,D$,n);else if("xmin"in s&&"xmin"in o)[o.xmin,o.ymin]=t(s.xmin,s.ymin,D$,n),[o.xmax,o.ymax]=t(s.xmax,s.ymax,D$,n);else if("paths"in s&&"paths"in o||"rings"in s&&"rings"in o){const a="paths"in s?s.paths:s.rings,l=[];let c;for(let h=0;h<a.length;h++){const f=a[h];c=[],l.push(c);for(let m=0;m<f.length;m++)c.push(t(f[m][0],f[m][1],[0,0],n)),f[m].length>2&&c[m].push(f[m][2]),f[m].length>3&&c[m].push(f[m][3])}"paths"in o?o.paths=l:o.rings=l}else if("points"in s&&"points"in o){const a=s.points,l=[];for(let c=0;c<a.length;c++)l[c]=t(a[c][0],a[c][1],[0,0],n),a[c].length>2&&l[c].push(a[c][2]),a[c].length>3&&l[c].push(a[c][3]);o.points=l}return i}function w_(e,t){const r=e&&(AM(e)?e:e.spatialReference),n=t&&(AM(t)?t:t.spatialReference);return!(e&&"type"in e&&e.type==="mesh"||t&&"type"in t&&t.type==="mesh"||!r||!n)&&(!!Cr(n,r)||ip(n)&&hv(r)||ip(r)&&hv(n))}function Kv(e,t){if(e==null)return null;const r=e.spatialReference,n=t&&(AM(t)?t:t.spatialReference);return w_(r,n)?Cr(r,n)?F(e):ip(n)?TS(e,Nf,Ce.WebMercator,!1,F(e)):hv(n)?TS(e,l0,Ce.WGS84,!1,F(e)):null:null}function Nf(e,t,r=[0,0]){t>89.99999?t=89.99999:t<-89.99999&&(t=-89.99999);const n=xN(t);return r[0]=xN(e)*kt.radius,r[1]=kt.halfSemiMajorAxis*Math.log((1+Math.sin(n))/(1-Math.sin(n))),r}function l0(e,t,r=[0,0],n=!1){const i=SN(e/kt.radius);return r[0]=n?i:i-360*Math.floor((i+180)/360),r[1]=SN(Math.PI/2-2*Math.atan(Math.exp(-t/kt.radius))),r}function Uc(e,t=!1,r=F(e)){return TS(e,Nf,Ce.WebMercator,t,r)}function Tc(e,t=!1,r=F(e)){return TS(e,l0,Ce.WGS84,t,r)}var __;const Cy=[0,0];function $N(e){return e&&(e.declaredClass==="esri.geometry.SpatialReference"||e.wkid!=null)}let Wn=__=class extends cd{static copy(e,t){t._set("x",e._get("x")),t._set("y",e._get("y")),t._set("z",e._get("z")),t._set("m",e._get("m"));const r=e._get("spatialReference");t._set("spatialReference",Object.isFrozen(r)?r:r.clone())}constructor(...e){super(...e),this.x=0,this.y=0,this.z=void 0,this.m=void 0,this.type="point"}normalizeCtorArgs(e,t,r,n,i){let s;if(Array.isArray(e))s=e,i=t,e=s[0],t=s[1],r=s[2],n=s[3];else if(e&&typeof e=="object"){if(s=e,e=s.x!=null?s.x:s.longitude,t=s.y!=null?s.y:s.latitude,r=s.z,n=s.m,(i=s.spatialReference)&&i.declaredClass!=="esri.geometry.SpatialReference"&&(i=new Ce(i)),s.longitude!=null||s.latitude!=null){if(s.longitude==null)Z.getLogger(this).warn(".longitude=","Latitude was defined without longitude");else if(s.latitude==null)Z.getLogger(this).warn(".latitude=","Longitude was defined without latitude");else if(!s.declaredClass&&i&&i.isWebMercator){const a=Nf(s.longitude,s.latitude,Cy);e=a[0],t=a[1]}}}else $N(r)?(i=r,r=null):$N(n)&&(i=n,n=null);const o={x:e,y:t};return o.x==null&&o.y!=null?Z.getLogger(this).warn(".y=","Y coordinate was defined without an X coordinate"):o.y==null&&o.x!=null&&Z.getLogger(this).warn(".x=","X coordinate was defined without a Y coordinate"),i!=null&&(o.spatialReference=i),r!=null&&(o.z=r),n!=null&&(o.m=n),o}get cache(){return this.commitProperty("x"),this.commitProperty("y"),this.commitProperty("z"),this.commitProperty("m"),this.commitProperty("spatialReference"),{}}get hasM(){return this.m!==void 0}set hasM(e){e!==(this._get("m")!==void 0)&&(this._set("m",e?0:void 0),this._set("hasM",e))}get hasZ(){return this.z!==void 0}set hasZ(e){e!==(this._get("z")!==void 0)&&(this._set("z",e?0:void 0),this._set("hasZ",e))}get latitude(){const{spatialReference:e,x:t,y:r}=this;if(e){if(e.isWebMercator)return l0(t,r,Cy)[1];if(e.isGeographic)return r}return null}set latitude(e){const{spatialReference:t,x:r}=this;e!=null&&t&&(t.isWebMercator?this._set("y",Nf(r,e,Cy)[1]):t.isGeographic&&this._set("y",e),this._set("latitude",e))}get longitude(){const{x:e,y:t,spatialReference:r}=this;if(r){if(r.isWebMercator)return l0(e,t,Cy)[0];if(r.isGeographic)return e}return null}set longitude(e){const{y:t,spatialReference:r}=this;e!=null&&r&&(r.isWebMercator?this._set("x",Nf(e,t,Cy)[0]):r.isGeographic&&this._set("x",e),this._set("longitude",e))}writeX(e,t,r){t[r]=isNaN(e)?"NaN":e}readX(e){return typeof e=="string"?NaN:e}clone(){const e=new __;return e.x=this.x,e.y=this.y,e.z=this.z,e.m=this.m,e.spatialReference=this.spatialReference,e}copy(e){return __.copy(e,this),this}equals(e){if(e==null)return!1;const{x:t,y:r,z:n,m:i,spatialReference:s}=this,{z:o,m:a}=e;let{x:l,y:c,spatialReference:h}=e;if(!s.equals(h))if(s.isWebMercator&&h.isWGS84)[l,c]=Nf(l,c),h=s;else{if(!s.isWGS84||!h.isWebMercator)return!1;[l,c]=l0(l,c),h=s}return t===l&&r===c&&n===o&&i===a&&s.wkid===h.wkid}offset(e,t,r){return this.x+=e,this.y+=t,r!=null&&(this.z=(this.z??0)+r),this}normalize(){if(!this.spatialReference)return this;const e=Ls(this.spatialReference);if(!e)return this;let t=this.x;const[r,n]=e.valid,i=2*n;let s;return t>n?(s=Math.ceil(Math.abs(t-n)/i),t-=s*i):t<r&&(s=Math.ceil(Math.abs(t-r)/i),t+=s*i),this._set("x",t),this}distance(e){return Nse(this,e)}toArray(){const e=this.hasZ,t=this.hasM;return e&&t?[this.x,this.y,this.z,this.m]:e?[this.x,this.y,this.z]:t?[this.x,this.y,this.m]:[this.x,this.y]}toJSON(e){return this.write({},e)}};u([d({readOnly:!0})],Wn.prototype,"cache",null),u([d({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],Wn.prototype,"hasM",null),u([d({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],Wn.prototype,"hasZ",null),u([d({type:Number})],Wn.prototype,"latitude",null),u([d({type:Number})],Wn.prototype,"longitude",null),u([d({type:Number,json:{type:[Number,String],write:{isRequired:!0,allowNull:!0}}}),Pt(e=>isNaN(e)?e:Ts(e))],Wn.prototype,"x",void 0),u([pe("x")],Wn.prototype,"writeX",null),u([we("x")],Wn.prototype,"readX",null),u([d({type:Number,json:{write:!0}})],Wn.prototype,"y",void 0),u([d({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasZ}}}}})],Wn.prototype,"z",void 0),u([d({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasM}}}}})],Wn.prototype,"m",void 0),Wn=__=u([E("esri.geometry.Point")],Wn),Wn.prototype.toJSON.isDefaultToJSON=!0;const be=Wn,F$=[0,0];function a2(e,t){return t!=null&&Jn(e,t.x,t.y,t.z)}function TCe(e,t){if(!t.points||t.points.length)return!1;for(const r of t.points)if(!Em(e,r))return!1;return!0}function jse(e,t){const{xmin:r,ymin:n,zmin:i,xmax:s,ymax:o,zmax:a}=t;return e.hasZ&&t.hasZ?Jn(e,r,n,i)&&Jn(e,r,o,i)&&Jn(e,s,o,i)&&Jn(e,s,n,i)&&Jn(e,r,n,a)&&Jn(e,r,o,a)&&Jn(e,s,o,a)&&Jn(e,s,n,a):Jn(e,r,n)&&Jn(e,r,o)&&Jn(e,s,o)&&Jn(e,s,n)}function Em(e,t){return Jn(e,t[0],t[1])}function Vse(e,t){return Jn(e,t[0],t[1],t[2])}function Jn(e,t,r,n){return t>=e.xmin&&t<=e.xmax&&r>=e.ymin&&r<=e.ymax&&(n==null||!e.hasZ||n>=e.zmin&&n<=e.zmax)}function zz(e,t){return F$[1]=t.y,F$[0]=t.x,zse(e,F$)}function zse(e,t){return Uz(e.rings,t)}function Uz(e,t){if(!e)return!1;if(Use(e))return TN(!1,e,t);let r=!1;for(let n=0,i=e.length;n<i;n++)r=TN(r,e[n],t);return r}function Use(e){return!Array.isArray(e[0][0])}function TN(e,t,r){const[n,i]=r;let s=e,o=0;for(let a=0,l=t.length;a<l;a++){o++,o===l&&(o=0);const[c,h]=t[a],[f,m]=t[o];(h<i&&m>=i||m<i&&h>=i)&&c+(i-h)/(m-h)*(f-c)<n&&(s=!s)}return s}function Gse(e,t){return a2(e,t)}function Bse(e,t){const r=e.hasZ&&t.hasZ;let n,i,s;if(e.xmin<=t.xmin){if(n=t.xmin,e.xmax<n)return!1}else if(n=e.xmin,t.xmax<n)return!1;if(e.ymin<=t.ymin){if(i=t.ymin,e.ymax<i)return!1}else if(i=e.ymin,t.ymax<i)return!1;if(r&&t.hasZ){if(e.zmin<=t.zmin){if(s=t.zmin,e.zmax<s)return!1}else if(s=e.zmin,t.zmax<s)return!1}return!0}function qse(e,t){const{points:r,hasZ:n}=t,i=n?Vse:Em;for(const s of r)if(i(e,s))return!0;return!1}const sp=[0,0],op=[0,0],ap=[0,0],lp=[0,0],Wse=[sp,op,ap,lp],Gz=[[ap,sp],[sp,op],[op,lp],[lp,ap]];function Hse(e,t){return Zse(e,t.rings)}function Zse(e,t){sp[0]=e.xmin,sp[1]=e.ymax,op[0]=e.xmax,op[1]=e.ymax,ap[0]=e.xmin,ap[1]=e.ymin,lp[0]=e.xmax,lp[1]=e.ymin;for(const r of Wse)if(Uz(t,r))return!0;for(const r of t){if(!r.length)continue;let n=r[0];if(Em(e,n))return!0;for(let i=1;i<r.length;i++){const s=r[i];if(Em(e,s)||Bz(n,s,Gz))return!0;n=s}}return!1}function Jse(e,t){sp[0]=e.xmin,sp[1]=e.ymax,op[0]=e.xmax,op[1]=e.ymax,ap[0]=e.xmin,ap[1]=e.ymin,lp[0]=e.xmax,lp[1]=e.ymin;const r=t.paths;for(const n of r){if(!r.length)continue;let i=n[0];if(Em(e,i))return!0;for(let s=1;s<n.length;s++){const o=n[s];if(Em(e,o)||Bz(i,o,Gz))return!0;i=o}}return!1}const nn=[0,0];function Qse(e){for(let t=0;t<e.length;t++){const r=e[t];for(let i=0;i<r.length-1;i++){const s=r[i],o=r[i+1];for(let a=t+1;a<e.length;a++)for(let l=0;l<e[a].length-1;l++){const c=e[a][l],h=e[a][l+1];if(LM(s,o,c,h,nn)&&!(nn[0]===s[0]&&nn[1]===s[1]||nn[0]===c[0]&&nn[1]===c[1]||nn[0]===o[0]&&nn[1]===o[1]||nn[0]===h[0]&&nn[1]===h[1]))return!0}}const n=r.length;if(!(n<=4))for(let i=0;i<n-3;i++){let s=n-1;i===0&&(s=n-2);const o=r[i],a=r[i+1];for(let l=i+2;l<s;l++){const c=r[l],h=r[l+1];if(LM(o,a,c,h,nn)&&!(nn[0]===o[0]&&nn[1]===o[1]||nn[0]===c[0]&&nn[1]===c[1]||nn[0]===a[0]&&nn[1]===a[1]||nn[0]===h[0]&&nn[1]===h[1]))return!0}}}return!1}function Bz(e,t,r){for(let n=0;n<r.length;n++)if(LM(e,t,r[n][0],r[n][1]))return!0;return!1}function LM(e,t,r,n,i){const[s,o]=e,[a,l]=t,[c,h]=r,[f,m]=n,y=f-c,g=s-c,v=a-s,w=m-h,b=o-h,S=l-o,_=w*v-y*S;if(_===0)return!1;const x=(y*b-w*g)/_,T=(v*b-S*g)/_;return x>=0&&x<=1&&T>=0&&T<=1&&(i&&(i[0]=s+x*(a-s),i[1]=o+x*(l-o)),!0)}function Yse(e){switch(e){case"esriGeometryEnvelope":case"extent":return Bse;case"esriGeometryMultipoint":case"multipoint":return qse;case"esriGeometryPoint":case"point":return Gse;case"esriGeometryPolygon":case"polygon":return Hse;case"esriGeometryPolyline":case"polyline":return Jse}}var ds;function Kse(e){return e&&(e.declaredClass==="esri.geometry.SpatialReference"||e.wkid!=null)}function bu(e,t,r){return t==null?r:r==null?t:e(t,r)}let zr=ds=class extends cd{constructor(...e){super(...e),this.type="extent",this.xmin=0,this.ymin=0,this.mmin=void 0,this.zmin=void 0,this.xmax=0,this.ymax=0,this.mmax=void 0,this.zmax=void 0}normalizeCtorArgs(e,t,r,n,i){return Kse(e)?{spatialReference:e,xmin:0,ymin:0,xmax:0,ymax:0}:typeof e=="object"?(e.spatialReference=e.spatialReference==null?Ce.WGS84:e.spatialReference,e):{xmin:e,ymin:t,xmax:r,ymax:n,spatialReference:i??Ce.WGS84}}static fromBounds(e,t){return new ds({xmin:e[0],ymin:e[1],xmax:e[2],ymax:e[3],spatialReference:t})}static fromPoint(e){return new ds({xmin:e.x,ymin:e.y,zmin:e.z,xmax:e.x,ymax:e.y,zmax:e.z,spatialReference:e.spatialReference})}get cache(){return this.commitProperty("xmin"),this.commitProperty("ymin"),this.commitProperty("zmin"),this.commitProperty("mmin"),this.commitProperty("xmax"),this.commitProperty("ymax"),this.commitProperty("zmax"),this.commitProperty("mmax"),this.commitProperty("spatialReference"),{}}get center(){const e=new be({x:.5*(this.xmin+this.xmax),y:.5*(this.ymin+this.ymax),spatialReference:this.spatialReference});return this.hasZ&&(e.z=.5*(this.zmin+this.zmax)),this.hasM&&(e.m=.5*(this.mmin+this.mmax)),e}get extent(){return this.clone()}get hasM(){return this.mmin!=null&&this.mmax!=null}get hasZ(){return this.zmin!=null&&this.zmax!=null}get height(){return Math.abs(this.ymax-this.ymin)}get width(){return Math.abs(this.xmax-this.xmin)}centerAt(e){const t=this.center;return e.z!=null&&this.hasZ?this.offset(e.x-t.x,e.y-t.y,e.z-t.z):this.offset(e.x-t.x,e.y-t.y)}clone(){const e=new ds;return e.xmin=this.xmin,e.ymin=this.ymin,e.xmax=this.xmax,e.ymax=this.ymax,e.spatialReference=this.spatialReference,this.zmin!=null&&(e.zmin=this.zmin,e.zmax=this.zmax),this.mmin!=null&&(e.mmin=this.mmin,e.mmax=this.mmax),e}contains(e){if(!e)return!1;const t=this.spatialReference,r=e.spatialReference;return t&&r&&!t.equals(r)&&w_(t,r)&&(e=t.isWebMercator?Uc(e):Tc(e,!0)),e.type==="point"?a2(this,e):e.type==="extent"&&jse(this,e)}equals(e){if(this===e)return!0;if(e==null)return!1;const t=this.spatialReference,r=e.spatialReference;return t&&r&&!t.equals(r)&&w_(t,r)&&(e=t.isWebMercator?Uc(e):Tc(e,!0)),this.xmin===e.xmin&&this.ymin===e.ymin&&this.zmin===e.zmin&&this.mmin===e.mmin&&this.xmax===e.xmax&&this.ymax===e.ymax&&this.zmax===e.zmax&&this.mmax===e.mmax}expand(e){const t=.5*(1-e),r=this.width*t,n=this.height*t;if(this.xmin+=r,this.ymin+=n,this.xmax-=r,this.ymax-=n,this.hasZ){const i=(this.zmax-this.zmin)*t;this.zmin+=i,this.zmax-=i}if(this.hasM){const i=(this.mmax-this.mmin)*t;this.mmin+=i,this.mmax-=i}return this}intersects(e){if(e==null)return!1;e.type==="mesh"&&(e=e.extent);const t=this.spatialReference,r=e.spatialReference;return t&&r&&!Cr(t,r)&&w_(t,r)&&(e=t.isWebMercator?Uc(e):Tc(e,!0)),Yse(e.type)(this,e)}normalize(){const e=this._normalize(!1,!0);return Array.isArray(e)?e:[e]}offset(e,t,r){return this.xmin+=e,this.ymin+=t,this.xmax+=e,this.ymax+=t,r!=null&&(this.zmin+=r,this.zmax+=r),this}shiftCentralMeridian(){return this._normalize(!0)}union(e){return this===e||(this.xmin=Math.min(this.xmin,e.xmin),this.ymin=Math.min(this.ymin,e.ymin),this.xmax=Math.max(this.xmax,e.xmax),this.ymax=Math.max(this.ymax,e.ymax),(this.hasZ||e.hasZ)&&(this.zmin=bu(Math.min,this.zmin,e.zmin),this.zmax=bu(Math.max,this.zmax,e.zmax)),(this.hasM||e.hasM)&&(this.mmin=bu(Math.min,this.mmin,e.mmin),this.mmax=bu(Math.max,this.mmax,e.mmax))),this}intersection(e){return this===e?this:e!=null&&this.intersects(e)?(this.xmin=Math.max(this.xmin,e.xmin),this.ymin=Math.max(this.ymin,e.ymin),this.xmax=Math.min(this.xmax,e.xmax),this.ymax=Math.min(this.ymax,e.ymax),(this.hasZ||e.hasZ)&&(this.zmin=bu(Math.max,this.zmin,e.zmin),this.zmax=bu(Math.min,this.zmax,e.zmax)),(this.hasM||e.hasM)&&(this.mmin=bu(Math.max,this.mmin,e.mmin),this.mmax=bu(Math.min,this.mmax,e.mmax)),this):null}toJSON(e){return this.write({},e)}_shiftCM(e=Ls(this.spatialReference)){if(!e||!this.spatialReference)return this;const t=this.spatialReference,r=this._getCM(e);if(r){const n=t.isWebMercator?Tc(r):r;this.xmin-=r.x,this.xmax-=r.x,t.isWebMercator||(n.x=this._normalizeX(n.x,e).x),this.spatialReference=new Ce(Qx((t.isWGS84?e.altTemplate:null)??e.wkTemplate,{Central_Meridian:n.x}))}return this}_getCM(e){let t=null;const[r,n]=e.valid,i=this.xmin,s=this.xmax;return i>=r&&i<=n&&s>=r&&s<=n||(t=this.center),t}_normalize(e,t,r){const n=this.spatialReference;if(!n)return this;const i=r??Ls(n);if(i==null)return this;const s=this._getParts(i).map(l=>l.extent);if(s.length<2)return s[0]||this;if(s.length>2)return e?this._shiftCM(i):this.set({xmin:i.valid[0],xmax:i.valid[1]});if(e)return this._shiftCM(i);if(t)return s;let o=!0,a=!0;return s.forEach(l=>{l.hasZ||(o=!1),l.hasM||(a=!1)}),{rings:s.map(l=>{const c=[[l.xmin,l.ymin],[l.xmin,l.ymax],[l.xmax,l.ymax],[l.xmax,l.ymin],[l.xmin,l.ymin]];if(o){const h=(l.zmax-l.zmin)/2;for(let f=0;f<c.length;f++)c[f].push(h)}if(a){const h=(l.mmax-l.mmin)/2;for(let f=0;f<c.length;f++)c[f].push(h)}return c}),hasZ:o,hasM:a,spatialReference:n}}_getParts(e){let t=this.cache._parts;if(!t){t=[];const{ymin:i,ymax:s,spatialReference:o}=this,a=this.width,l=this.xmin,c=this.xmax;let h;e=e||Ls(o);const[f,m]=e.valid;h=this._normalizeX(this.xmin,e);const y=h.x,g=h.frameId;h=this._normalizeX(this.xmax,e);const v=h.x,w=h.frameId,b=y===v&&a>0;if(a>2*m){const S=new ds(l<c?y:v,i,m,s,o),_=new ds(f,i,l<c?v:y,s,o),x=new ds(0,i,m,s,o),T=new ds(f,i,0,s,o),I=[],C=[];S.contains(x)&&I.push(g),S.contains(T)&&C.push(g),_.contains(x)&&I.push(w),_.contains(T)&&C.push(w);for(let O=g+1;O<w;O++)I.push(O),C.push(O);t.push({extent:S,frameIds:[g]},{extent:_,frameIds:[w]},{extent:x,frameIds:I},{extent:T,frameIds:C})}else y>v||b?t.push({extent:new ds(y,i,m,s,o),frameIds:[g]},{extent:new ds(f,i,v,s,o),frameIds:[w]}):t.push({extent:new ds(y,i,v,s,o),frameIds:[g]});this.cache._parts=t}const r=this.hasZ,n=this.hasM;if(r||n){const i={};r&&(i.zmin=this.zmin,i.zmax=this.zmax),n&&(i.mmin=this.mmin,i.mmax=this.mmax);for(let s=0;s<t.length;s++)t[s].extent.set(i)}return t}_normalizeX(e,t){const[r,n]=t.valid,i=2*n;let s,o=0;return e>n?(s=Math.ceil(Math.abs(e-n)/i),e-=s*i,o=s):e<r&&(s=Math.ceil(Math.abs(e-r)/i),e+=s*i,o=-s),{x:e,frameId:o}}};u([d({readOnly:!0})],zr.prototype,"cache",null),u([d({readOnly:!0})],zr.prototype,"center",null),u([d({readOnly:!0})],zr.prototype,"extent",null),u([d({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],zr.prototype,"hasM",null),u([d({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],zr.prototype,"hasZ",null),u([d({readOnly:!0})],zr.prototype,"height",null),u([d({readOnly:!0})],zr.prototype,"width",null),u([d({type:Number,json:{type:[Number,String],write:{enabled:!0,allowNull:!0}}})],zr.prototype,"xmin",void 0),u([d({type:Number,json:{write:!0}})],zr.prototype,"ymin",void 0),u([d({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],zr.prototype,"mmin",void 0),u([d({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],zr.prototype,"zmin",void 0),u([d({type:Number,json:{write:!0}})],zr.prototype,"xmax",void 0),u([d({type:Number,json:{write:!0}})],zr.prototype,"ymax",void 0),u([d({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],zr.prototype,"mmax",void 0),u([d({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],zr.prototype,"zmax",void 0),zr=ds=u([E("esri.geometry.Extent")],zr),zr.prototype.toJSON.isDefaultToJSON=!0;const at=zr;let u0;var Uj,Gj;const Xse=((Uj=globalThis.esriConfig)==null?void 0:Uj.locale)??((Gj=globalThis.dojoConfig)==null?void 0:Gj.locale);function qz(){var e;return Xse??((e=globalThis.navigator)==null?void 0:e.language)??"en"}function ei(){return u0===void 0&&(u0=qz()),u0}const c0=[];function l2(e){return c0.push(e),{remove(){c0.splice(c0.indexOf(e),1)}}}const NM=[];function YO(e){return NM.push(e),{remove(){c0.splice(NM.indexOf(e),1)}}}function eoe(){const e=qz();u0!==e&&(u0=e,[...NM].forEach(t=>{t.call(null,e)}),[...c0].forEach(t=>{t.call(null,e)}))}var Bj;(Bj=globalThis.addEventListener)==null||Bj.call(globalThis,"languagechange",eoe);let ew;function toe(e){return ew&&!ew.destroyed||(ew=e()),ew}var DM;const roe=new xt({avgRating:"avg-rating",numRatings:"num-ratings",numComments:"num-comments",numViews:"num-views"});let hs=DM=class extends $e{constructor(e){super(e),this.categories=null,this.disableExtraQuery=!1,this.extent=null,this.filter=null,this.num=10,this.query=null,this.sortField=null,this.start=1}get sortOrder(){return this._get("sortOrder")||"asc"}set sortOrder(e){e!=="asc"&&e!=="desc"||this._set("sortOrder",e)}clone(){return new DM({categories:this.categories?F(this.categories):null,disableExtraQuery:this.disableExtraQuery,extent:this.extent?this.extent.clone():null,filter:this.filter,num:this.num,query:this.query,sortField:this.sortField,sortOrder:this.sortOrder,start:this.start})}toRequestOptions(e,t){let r=[];this.categories&&(r=this.categories.map(o=>Array.isArray(o)?JSON.stringify(o):o));let n="";if(this.extent){const o=Kv(this.extent,Ce.WGS84);o!=null&&(n=`${o.xmin},${o.ymin},${o.xmax},${o.ymax}`)}let i=this.query;!this.disableExtraQuery&&e.extraQuery&&(i="("+i+")"+e.extraQuery);const s={categories:r,bbox:n,q:i,filter:this.filter,num:this.num,sortField:null,sortOrder:null,start:this.start};return this.sortField&&(s.sortField=this.sortField.split(",").map(o=>roe.toJSON(o.trim())).join(","),s.sortOrder=this.sortOrder),{query:{...t,...s}}}};u([d()],hs.prototype,"categories",void 0),u([d()],hs.prototype,"disableExtraQuery",void 0),u([d({type:at})],hs.prototype,"extent",void 0),u([d()],hs.prototype,"filter",void 0),u([d()],hs.prototype,"num",void 0),u([d()],hs.prototype,"query",void 0),u([d()],hs.prototype,"sortField",void 0),u([d()],hs.prototype,"sortOrder",null),u([d()],hs.prototype,"start",void 0),hs=DM=u([E("esri.portal.PortalQueryParams")],hs);const Ca=hs;let Ld=class extends $e{constructor(t){super(t),this.nextQueryParams=null,this.queryParams=null,this.results=null,this.total=null}};u([d()],Ld.prototype,"nextQueryParams",void 0),u([d()],Ld.prototype,"queryParams",void 0),u([d()],Ld.prototype,"results",void 0),u([d()],Ld.prototype,"total",void 0),Ld=u([E("esri.portal.PortalQueryResult")],Ld);const noe=Ld;let il=class extends Q{constructor(t){super(t),this.created=null,this.id=null,this.portal=null,this.title=null,this.username=null}get url(){const t=this.get("portal.restUrl");return t?`${t}/content/users/${this.username}/${this.id}`:null}toJSON(){throw new N("internal:not-yet-implemented","PortalFolder.toJSON is not yet implemented")}};u([d({type:Date})],il.prototype,"created",void 0),u([d()],il.prototype,"id",void 0),u([d()],il.prototype,"portal",void 0),u([d()],il.prototype,"title",void 0),u([d({readOnly:!0})],il.prototype,"url",null),u([d()],il.prototype,"username",void 0),il=u([E("esri.portal.PortalFolder")],il);const ioe=il;let Ur=class extends Q{constructor(t){super(t),this.access=null,this.created=null,this.description=null,this.id=null,this.isInvitationOnly=!1,this.modified=null,this.owner=null,this.portal=null,this.snippet=null,this.sortField=null,this.sortOrder=null,this.tags=null,this.title=null}get thumbnailUrl(){var n;const t=this.url,r=this.thumbnail;return t&&r&&this.portal?(n=this.portal)==null?void 0:n.normalizeUrl(`${t}/info/${r}?f=json`):null}get url(){const t=this.get("portal.restUrl");return t?t+"/community/groups/"+this.id:null}fetchCategorySchema(t){return yi(this.portal).request(this.url+"/categorySchema",t).then(r=>{const n=r.categorySchema||[];return n.some(i=>i.source==="contentCategorySetsGroupQuery.LivingAtlas")?this._fetchCategorySchemaSet("LivingAtlas",t):n})}fetchMembers(t){return yi(this.portal).request(this.url+"/users",t)}getThumbnailUrl(t){let r=this.thumbnailUrl;return r&&t&&(r+=`&w=${t}`),r}toJSON(){throw new N("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}queryItems(t,r){let n=gr(Ca,t);const i=yi(this.portal);return parseFloat(i.currentVersion)>5?(n=n||new Ca,i.queryPortal(`/content/groups/${this.id}/search`,n,"PortalItem",r)):(n=n?n.clone():new Ca,n.query="group:"+this.id+(n.query?" "+n.query:""),i.queryItems(n,r))}_fetchCategorySchemaSet(t,r){const n=yi(this.portal);return n.fetchSelf(n.authMode,!0,r).then(i=>{const s=i.contentCategorySetsGroupQuery;if(s){const o=new Ca;return o.disableExtraQuery=!0,o.num=1,o.query=s,n.queryGroups(o,r)}throw new N("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery value not found")}).then(i=>{if(i.total){const s=i.results[0],o=new Ca;return o.num=1,o.query=`typekeywords:"${t}"`,s.queryItems(o,r)}throw new N("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery group not found")}).then(i=>i.total?i.results[0].fetchData("json",r).then(s=>{const o=s&&s.categorySchema;return o&&o.length?o:[]}):[])}};u([d()],Ur.prototype,"access",void 0),u([d({type:Date})],Ur.prototype,"created",void 0),u([d()],Ur.prototype,"description",void 0),u([d()],Ur.prototype,"id",void 0),u([d()],Ur.prototype,"isInvitationOnly",void 0),u([d({type:Date})],Ur.prototype,"modified",void 0),u([d()],Ur.prototype,"owner",void 0),u([d()],Ur.prototype,"portal",void 0),u([d()],Ur.prototype,"snippet",void 0),u([d()],Ur.prototype,"sortField",void 0),u([d()],Ur.prototype,"sortOrder",void 0),u([d()],Ur.prototype,"tags",void 0),u([d()],Ur.prototype,"thumbnail",void 0),u([d({readOnly:!0})],Ur.prototype,"thumbnailUrl",null),u([d()],Ur.prototype,"title",void 0),u([d({readOnly:!0})],Ur.prototype,"url",null),Ur=u([E("esri.portal.PortalGroup")],Ur);const FM=Ur,soe=Object.freeze(Object.defineProperty({__proto__:null,default:FM},Symbol.toStringTag,{value:"Module"}));var jM;let zt=jM=class extends Q{constructor(...e){super(...e),this.access=null,this.created=null,this.culture=null,this.description=null,this.email=null,this.fullName=null,this.modified=null,this.orgId=null,this.portal=null,this.preferredView=null,this.privileges=null,this.region=null,this.role=null,this.roleId=null,this.sourceJSON=null,this.units=null,this.username=null,this.userType=null}get thumbnailUrl(){const e=this.url,t=this.thumbnail;return e&&t?this.portal.normalizeUrl(`${e}/info/${t}?f=json`):null}get userContentUrl(){const e=this.get("portal.restUrl");return e?`${e}/content/users/${this.username}`:null}get url(){const e=this.get("portal.restUrl");return e?`${e}/community/users/${this.username}`:null}addItem(e){const t=e&&e.item,r=e&&e.data,n=e&&e.folder,i={method:"post"};t&&(i.query=t.createPostQuery(),r!=null&&(typeof r=="string"?i.query.text=r:typeof r=="object"&&(i.query.text=JSON.stringify(r))));let s=this.userContentUrl;return n&&(s+="/"+(typeof n=="string"?n:n.id)),this.portal.request(s+"/addItem",i).then(o=>(t.id=o.id,t.portal=this.portal,t.loaded?t.reload():t.load()))}deleteItem(e){let t=this.userContentUrl;return e.ownerFolder&&(t+="/"+e.ownerFolder),this.portal.request(t+`/items/${e.id}/delete`,{method:"post"}).then(()=>{e.id=null,e.portal=null})}deleteItems(e){const t=this.userContentUrl+"/deleteItems",r=e.map(n=>n.id);if(r.length){const n={method:"post",query:{items:r.join(",")}};return this.portal.request(t,n).then(()=>{e.forEach(i=>{i.id=null,i.portal=null})})}return Promise.resolve(void 0)}fetchFolders(){const e={query:{num:1}};return this.portal.request(this.userContentUrl??"",e).then(t=>{let r;return r=t&&t.folders?t.folders.map(n=>{const i=ioe.fromJSON(n);return i.portal=this.portal,i}):[],r})}fetchGroups(){return this.portal.request(this.url??"").then(e=>{let t;return t=e&&e.groups?e.groups.map(r=>{const n=FM.fromJSON(r);return n.portal=this.portal,n}):[],t})}fetchItems(e){const t=e??{};let r,n=this.userContentUrl??"";return t.folder&&(n+="/"+t.folder.id),ie(()=>Promise.resolve().then(()=>Wz),void 0).then(({default:i})=>{r=i;const s={folders:!1,num:t.num||10,start:t.start||1,sortField:t.sortField||"created",sortOrder:t.sortOrder||"asc"};return this.portal.request(n,{query:s})}).then(i=>{let s;return i&&i.items?(s=i.items.map(o=>{const a=r.fromJSON(o);return a.portal=this.portal,a}),Promise.all(s.map(o=>o.load())).catch(o=>o).then(()=>({items:s,nextStart:i.nextStart,total:i.total}))):{items:[],nextStart:-1,total:0}})}fetchTags(){return this.portal.request(this.url+"/tags").then(e=>e.tags)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}queryFavorites(e){return this.favGroupId?(this._favGroup||(this._favGroup=new FM({id:this.favGroupId,portal:this.portal})),this._favGroup.queryItems(e)):Promise.reject(new N("internal:unknown","Unknown internal error",{internalError:"Unknown favGroupId"}))}toJSON(){throw new N("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");const t=new jM;return t.sourceJSON=e,t.read(e),t}};u([d()],zt.prototype,"access",void 0),u([d({type:Date})],zt.prototype,"created",void 0),u([d()],zt.prototype,"culture",void 0),u([d()],zt.prototype,"description",void 0),u([d()],zt.prototype,"email",void 0),u([d()],zt.prototype,"favGroupId",void 0),u([d()],zt.prototype,"fullName",void 0),u([d({type:Date})],zt.prototype,"modified",void 0),u([d()],zt.prototype,"orgId",void 0),u([d()],zt.prototype,"portal",void 0),u([d()],zt.prototype,"preferredView",void 0),u([d()],zt.prototype,"privileges",void 0),u([d()],zt.prototype,"region",void 0),u([d()],zt.prototype,"role",void 0),u([d()],zt.prototype,"roleId",void 0),u([d()],zt.prototype,"sourceJSON",void 0),u([d()],zt.prototype,"thumbnail",void 0),u([d({readOnly:!0})],zt.prototype,"thumbnailUrl",null),u([d()],zt.prototype,"units",void 0),u([d({readOnly:!0})],zt.prototype,"userContentUrl",null),u([d({readOnly:!0})],zt.prototype,"url",null),u([d()],zt.prototype,"username",void 0),u([d()],zt.prototype,"userType",void 0),zt=jM=u([E("esri.portal.PortalUser")],zt);const KO=zt,ooe=Object.freeze(Object.defineProperty({__proto__:null,default:KO},Symbol.toStringTag,{value:"Module"}));var sl;let tw;const EN={PortalGroup:()=>ie(()=>Promise.resolve().then(()=>soe),void 0),PortalItem:()=>ie(()=>Promise.resolve().then(()=>Wz),void 0),PortalUser:()=>ie(()=>Promise.resolve().then(()=>ooe),void 0)};let re=sl=class extends Yv(Ql){constructor(e){super(e),this._esriIdCredentialCreateHandle=null,this.access=null,this.allSSL=!1,this.authMode="auto",this.authorizedCrossOriginDomains=null,this.basemapGalleryGroupQuery=null,this.basemapGalleryGroupQuery3D=null,this.bingKey=null,this.canListApps=!1,this.canListData=!1,this.canListPreProvisionedItems=!1,this.canProvisionDirectPurchase=!1,this.canSearchPublic=!0,this.canShareBingPublic=!1,this.canSharePublic=!1,this.canSignInArcGIS=!1,this.canSignInIDP=!1,this.colorSetsGroupQuery=null,this.commentsEnabled=!1,this.created=null,this.culture=null,this.customBaseUrl=null,this.defaultBasemap=null,this.defaultDevBasemap=null,this.defaultExtent=null,this.defaultVectorBasemap=null,this.description=null,this.devBasemapGalleryGroupQuery=null,this.eueiEnabled=null,this.featuredGroups=null,this.featuredItemsGroupQuery=null,this.galleryTemplatesGroupQuery=null,this.livingAtlasGroupQuery=null,this.hasCategorySchema=!1,this.helperServices=null,this.homePageFeaturedContent=null,this.homePageFeaturedContentCount=null,this.httpPort=null,this.httpsPort=null,this.id=null,this.ipCntryCode=null,this.isPortal=!1,this.isReadOnly=!1,this.layerTemplatesGroupQuery=null,this.maxTokenExpirationMinutes=null,this.modified=null,this.name=null,this.portalHostname=null,this.portalMode=null,this.portalProperties=null,this.region=null,this.rotatorPanels=null,this.showHomePageDescription=!1,this.sourceJSON=null,this.supportsHostedServices=!1,this.symbolSetsGroupQuery=null,this.templatesGroupQuery=null,this.units=null,this.url=ot.portalUrl,this.urlKey=null,this.user=null,this.use3dBasemaps=!0,this.useStandardizedQuery=!1,this.useVectorBasemaps=!1,this.vectorBasemapGalleryGroupQuery=null}normalizeCtorArgs(e){return typeof e=="string"?{url:e}:e}destroy(){MN.unregister(this),this.defaultBasemap=Gt(this.defaultBasemap),this.defaultDevBasemap=Gt(this.defaultDevBasemap),this.defaultVectorBasemap=Gt(this.defaultVectorBasemap),this._esriIdCredentialCreateHandle=or(this._esriIdCredentialCreateHandle)}readAuthorizedCrossOriginDomains(e){if(e)for(const t of e)ot.request.trustedServers.includes(t)||ot.request.trustedServers.push(t);return e}readDefaultBasemap(e){return this._readBasemap(e)}readDefaultDevBasemap(e){return this._readBasemap(e)}readDefaultVectorBasemap(e){return this._readBasemap(e)}get extraQuery(){const e=!(this.user&&this.user.orgId)||this.canSearchPublic;return this.id&&!e?` AND orgid:${this.id}`:null}get isOrganization(){return!!this.access}get itemPageUrl(){return this.url?`${this.url}/home/item.html`:null}get restUrl(){let e=this.url;if(e){const t=e.indexOf("/sharing");e=t>0?e.substring(0,t):this.url.replace(/\/+$/,""),e+="/sharing/rest"}return e}get thumbnailUrl(){const e=this.restUrl,t=this.thumbnail;return e&&t?this._normalizeSSL(e+"/portals/self/resources/"+t):null}readUrlKey(e){return e&&e.toLowerCase()}readUser(e){let t=null;return e&&(t=KO.fromJSON(e),t.portal=this),t}load(e){const t=ie(()=>Promise.resolve().then(()=>Ooe),void 0).then(({default:r})=>{qt(e),tw=r}).then(()=>this.sourceJSON?this.sourceJSON:this.fetchSelf(this.authMode,!1,e)).then(r=>{var n;if(ht){const i=ht;this.credential=i.findCredential(this.restUrl),this.credential||this.authMode!==sl.AUTH_MODE_AUTO||((n=this._esriIdCredentialCreateHandle)==null||n.remove(),this._esriIdCredentialCreateHandle=i.on("credential-create",aoe(new WeakRef(this))),MN.register(this,this._esriIdCredentialCreateHandle,this))}this.sourceJSON=r,this.read(r)});return this.addResolvingPromise(t),Promise.resolve(this)}async createElevationLayers(){await this.load();const e=this._getHelperService("defaultElevationLayers"),t=(await ie(()=>import("./ElevationLayer-18b339e7.js"),["assets/ElevationLayer-18b339e7.js","assets/ArcGISCachedService-59364829.js","assets/TileInfoTilemapCache-c74e4e05.js","assets/TilemapCache-b60b6337.js","assets/ByteSizeUnit-d4757d40.js"])).default;return e?e.map(r=>new t({id:r.id,url:r.url})):[]}async fetchBasemaps(e,t){const r=await this._fetchBasemaps(e,t);if((t==null?void 0:t.include3d)===!0&&this.use3dBasemaps!==!1){const n=await this._fetchBasemaps3D(e,t);r.unshift(...n)}return r}fetchCategorySchema(e){return this.hasCategorySchema?this.request(this.restUrl+"/portals/self/categorySchema",e).then(t=>t.categorySchema):Go(e)?Promise.reject(ar()):Promise.resolve([])}fetchFeaturedGroups(e){const t=this.featuredGroups,r=new Ca;if(r.num=100,r.sortField="title",t&&t.length){const n=[];for(const i of t)n.push(`(title:"${i.title}" AND owner:${i.owner})`);return r.query=n.join(" OR "),this.queryGroups(r,e).then(i=>i.results)}return Go(e)?Promise.reject(ar()):Promise.resolve([])}fetchRegions(e){var r;const t=((r=this.user)==null?void 0:r.culture)||this.culture||ei();return this.request(this.restUrl+"/portals/regions",{...e,query:{culture:t}})}fetchSettings(e){var r;const t=((r=this.user)==null?void 0:r.culture)||this.culture||ei();return this.request(this.restUrl+"/portals/self/settings",{...e,query:{culture:t}})}static getDefault(){return toe(()=>new sl)}queryGroups(e,t){return this.queryPortal("/community/groups",e,"PortalGroup",t)}queryItems(e,t){return this.queryPortal("/search",e,"PortalItem",t)}queryUsers(e,t){return e.sortField||(e.sortField="username"),this.queryPortal("/community/users",e,"PortalUser",t)}fetchSelf(e=this.authMode,t=!1,r){const n=this.restUrl+"/portals/self",i={authMode:e,query:{culture:ei().toLowerCase()},...r};return i.authMode==="auto"&&(i.authMode="no-prompt"),t&&(i.query.default=!0),this.request(n,i)}queryPortal(e,t,r,n){const i=gr(Ca,t),s=o=>this.request(this.restUrl+e,{...i.toRequestOptions(this),...n}).then(a=>{const l=i.clone();return l.start=a.nextStart,new noe({nextQueryParams:l,queryParams:i,total:a.total,results:sl._resultsToTypedArray(o,{portal:this},a,n)})}).then(a=>Promise.all(a.results.map(l=>typeof l.when=="function"?l.when():a)).then(()=>a,l=>(Ea(l),a)));return r&&EN[r]?EN[r]().then(({default:o})=>(qt(n),s(o))):s()}signIn(){if(this.authMode===sl.AUTH_MODE_ANONYMOUS)return Promise.reject(new N("portal:invalid-auth-mode",`Current "authMode"' is "${this.authMode}"`));if(this.loadStatus==="failed")return Promise.reject(this.loadError);const e=t=>Promise.resolve().then(()=>this.loadStatus==="not-loaded"?(t||(this.authMode="immediate"),this.load().then(()=>null)):this.loadStatus==="loading"?this.load().then(()=>this.credential?null:(this.credential=t,this.fetchSelf("immediate"))):this.user&&this.credential===t?null:(this.credential=t,this.fetchSelf("immediate"))).then(r=>{r&&(this.sourceJSON=r,this.read(r))});return ht?ht.getCredential(this.restUrl).then(t=>e(t)):e(this.credential)}normalizeUrl(e){const t=this.credential&&this.credential.token;return this._normalizeSSL(t?e+(e.includes("?")?"&":"?")+"token="+t:e)}requestToTypedArray(e,t,r){return this.request(e,t).then(n=>{const i=sl._resultsToTypedArray(r,{portal:this},n);return Promise.all(i.map(s=>typeof s.when=="function"?s.when():n)).then(()=>i,()=>i)})}request(e,t={}){const r={f:"json",...t.query},{authMode:n=this.authMode===sl.AUTH_MODE_ANONYMOUS?"anonymous":"auto",body:i=null,cacheBust:s=!1,method:o="auto",responseType:a="json",signal:l}=t,c={authMode:n,body:i,cacheBust:s,method:o,query:r,responseType:a,timeout:0,signal:l};return St(this._normalizeSSL(e),c).then(h=>h.data)}toJSON(){throw new N("internal:not-yet-implemented","Portal.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");return new sl({sourceJSON:e})}_getHelperService(e){const t=this.helperServices&&this.helperServices[e];if(!t)throw new N("portal:service-not-found",`The \`helperServices\` do not include an entry named "${e}"`);return t}async _fetchBasemaps(e,t){const r=new Ca;r.query=e||(ot.apiKey&&Fz(this.url)?this.devBasemapGalleryGroupQuery:this.useVectorBasemaps?this.vectorBasemapGalleryGroupQuery:this.basemapGalleryGroupQuery),r.disableExtraQuery=!0;const n=await this.queryGroups(r,t);if(!n.total)return[];const i=n.results[0];r.num=100,r.query='type:"Web Map" -type:"Web Application"',r.sortField=i.sortField||"name",r.sortOrder=i.sortOrder||"desc";const s=await i.queryItems(r,t);return s.total?s.results.filter(o=>o.type==="Web Map").map(o=>new tw({portalItem:o})):[]}async _fetchBasemaps3D(e,t){const r=e||this.basemapGalleryGroupQuery3D;if(!r)return[];const n=new Ca({query:r,disableExtraQuery:!0}),i=await this.queryGroups(n,t);if(!i.total)return[];const s=i.results[0];n.num=100,n.query='type:"Web Scene"',n.sortField=s.sortField||"name",n.sortOrder=s.sortOrder||"desc";const o=await s.queryItems(n,t);return o.total?o.results.filter(a=>a.type==="Web Scene").map(a=>new tw({portalItem:a})):[]}_normalizeSSL(e){return e.replace(/^http:/i,"https:").replace(":7080",":7443")}_readBasemap(e){if(e){const t=tw.fromJSON(e);return t.portalItem={portal:this},t}return null}static _resultsToTypedArray(e,t,r,n){let i=[];if(r){const s=n!=null?n.signal:null;i=r.listings||r.notifications||r.userInvitations||r.tags||r.items||r.groups||r.comments||r.provisions||r.results||r.relatedItems||r,(e||t)&&(i=i.map(o=>{const a=Object.assign(e?e.fromJSON(o):o,t);return typeof a.load=="function"&&a.load(s),a}))}else i=[];return i}};re.AUTH_MODE_ANONYMOUS="anonymous",re.AUTH_MODE_AUTO="auto",re.AUTH_MODE_IMMEDIATE="immediate",u([d()],re.prototype,"access",void 0),u([d()],re.prototype,"allSSL",void 0),u([d()],re.prototype,"authMode",void 0),u([d()],re.prototype,"authorizedCrossOriginDomains",void 0),u([we("authorizedCrossOriginDomains")],re.prototype,"readAuthorizedCrossOriginDomains",null),u([d()],re.prototype,"basemapGalleryGroupQuery",void 0),u([d({json:{name:"3DBasemapGalleryGroupQuery"}})],re.prototype,"basemapGalleryGroupQuery3D",void 0),u([d()],re.prototype,"bingKey",void 0),u([d()],re.prototype,"canListApps",void 0),u([d()],re.prototype,"canListData",void 0),u([d()],re.prototype,"canListPreProvisionedItems",void 0),u([d()],re.prototype,"canProvisionDirectPurchase",void 0),u([d()],re.prototype,"canSearchPublic",void 0),u([d()],re.prototype,"canShareBingPublic",void 0),u([d()],re.prototype,"canSharePublic",void 0),u([d()],re.prototype,"canSignInArcGIS",void 0),u([d()],re.prototype,"canSignInIDP",void 0),u([d()],re.prototype,"colorSetsGroupQuery",void 0),u([d()],re.prototype,"commentsEnabled",void 0),u([d({type:Date})],re.prototype,"created",void 0),u([d()],re.prototype,"credential",void 0),u([d()],re.prototype,"culture",void 0),u([d()],re.prototype,"currentVersion",void 0),u([d()],re.prototype,"customBaseUrl",void 0),u([d()],re.prototype,"defaultBasemap",void 0),u([we("defaultBasemap")],re.prototype,"readDefaultBasemap",null),u([d()],re.prototype,"defaultDevBasemap",void 0),u([we("defaultDevBasemap")],re.prototype,"readDefaultDevBasemap",null),u([d({type:at})],re.prototype,"defaultExtent",void 0),u([d()],re.prototype,"defaultVectorBasemap",void 0),u([we("defaultVectorBasemap")],re.prototype,"readDefaultVectorBasemap",null),u([d()],re.prototype,"description",void 0),u([d()],re.prototype,"devBasemapGalleryGroupQuery",void 0),u([d()],re.prototype,"eueiEnabled",void 0),u([d({readOnly:!0})],re.prototype,"extraQuery",null),u([d()],re.prototype,"featuredGroups",void 0),u([d()],re.prototype,"featuredItemsGroupQuery",void 0),u([d()],re.prototype,"galleryTemplatesGroupQuery",void 0),u([d()],re.prototype,"livingAtlasGroupQuery",void 0),u([d()],re.prototype,"hasCategorySchema",void 0),u([d()],re.prototype,"helpBase",void 0),u([d()],re.prototype,"helperServices",void 0),u([d()],re.prototype,"helpMap",void 0),u([d()],re.prototype,"homePageFeaturedContent",void 0),u([d()],re.prototype,"homePageFeaturedContentCount",void 0),u([d()],re.prototype,"httpPort",void 0),u([d()],re.prototype,"httpsPort",void 0),u([d()],re.prototype,"id",void 0),u([d()],re.prototype,"ipCntryCode",void 0),u([d({readOnly:!0})],re.prototype,"isOrganization",null),u([d()],re.prototype,"isPortal",void 0),u([d()],re.prototype,"isReadOnly",void 0),u([d({readOnly:!0})],re.prototype,"itemPageUrl",null),u([d()],re.prototype,"layerTemplatesGroupQuery",void 0),u([d()],re.prototype,"maxTokenExpirationMinutes",void 0),u([d({type:Date})],re.prototype,"modified",void 0),u([d()],re.prototype,"name",void 0),u([d()],re.prototype,"portalHostname",void 0),u([d()],re.prototype,"portalMode",void 0),u([d()],re.prototype,"portalProperties",void 0),u([d()],re.prototype,"region",void 0),u([d({readOnly:!0})],re.prototype,"restUrl",null),u([d()],re.prototype,"rotatorPanels",void 0),u([d()],re.prototype,"showHomePageDescription",void 0),u([d()],re.prototype,"sourceJSON",void 0),u([d()],re.prototype,"staticImagesUrl",void 0),u([d({json:{name:"2DStylesGroupQuery"}})],re.prototype,"stylesGroupQuery2d",void 0),u([d({json:{name:"stylesGroupQuery"}})],re.prototype,"stylesGroupQuery3d",void 0),u([d()],re.prototype,"supportsHostedServices",void 0),u([d()],re.prototype,"symbolSetsGroupQuery",void 0),u([d()],re.prototype,"templatesGroupQuery",void 0),u([d()],re.prototype,"thumbnail",void 0),u([d({readOnly:!0})],re.prototype,"thumbnailUrl",null),u([d()],re.prototype,"units",void 0),u([d()],re.prototype,"url",void 0),u([d()],re.prototype,"urlKey",void 0),u([we("urlKey")],re.prototype,"readUrlKey",null),u([d()],re.prototype,"user",void 0),u([we("user")],re.prototype,"readUser",null),u([d()],re.prototype,"use3dBasemaps",void 0),u([d()],re.prototype,"useStandardizedQuery",void 0),u([d()],re.prototype,"useVectorBasemaps",void 0),u([d()],re.prototype,"vectorBasemapGalleryGroupQuery",void 0),re=sl=u([E("esri.portal.Portal")],re);const hn=re,MN=new FinalizationRegistry(e=>{e.remove()});function aoe(e){const t=ht;return()=>{const r=e.deref();r&&t.findCredential(r.restUrl)&&r.signIn().catch(()=>{})}}const loe=Z.getLogger("esri.assets");function ct(e){if(!ot.assetsPath)throw loe.errorOnce("The API assets location needs to be set using config.assetsPath. More information: https://arcg.is/1OzLe50"),new N("assets:path-not-set","config.assetsPath is not set");return rp(ot.assetsPath,e)}let ol=class extends $e{constructor(t){super(t),this.portalItem=null}normalizeCtorArgs(t){return t&&t.portalItem&&t.path?{...t,path:this._normalizePath(t.path,t.portalItem)}:t}set path(t){t!=null&&Hi(t)?Z.getLogger(this).error("portalitemresource:invalid-path","A portal item resource path must be relative"):this._set("path",t)}_castPath(t){return this._normalizePath(t,this.portalItem)}get url(){return this.portalItem&&this.path?`${this.portalItem.itemUrl}/resources/${this.path}`:null}get cdnUrl(){return this.portalItem&&this.path?`${this.portalItem.itemCdnUrl}/resources/${this.path}`:null}get itemRelativeUrl(){return this.portalItem&&this.path?`./resources/${this.path}`:null}fetch(t="json",r){const n=this.cdnUrl;if(n==null)throw new N("portal-item-resource:fetch","Portal item resource does not refer to a valid item or path");return this.portalItem.portal.request(n,{responseType:t,query:{token:this.portalItem.apiKey},signal:r==null?void 0:r.signal})}async update(t,r){const{addOrUpdateResource:n}=await ie(()=>import("./resourceUtils-fa66e95d.js"),[]);return n(this,"update",t,r)}hasPath(){return this.path!=null}_normalizePath(t,r){return t==null?t:(t=t.replace(/^\/+/,""),r!=null&&Hi(t)&&(t=FO(t,r.itemUrl)),t==null?void 0:t.replace(/^\/+/,"").replace(/^(\.\/)?resources\//,""))}};u([d()],ol.prototype,"portalItem",void 0),u([d({type:String,value:null})],ol.prototype,"path",null),u([Pt("path")],ol.prototype,"_castPath",null),u([d({type:String,readOnly:!0})],ol.prototype,"url",null),u([d({type:String,readOnly:!0})],ol.prototype,"cdnUrl",null),u([d({type:String,readOnly:!0})],ol.prototype,"itemRelativeUrl",null),ol=u([E("esri.portal.PortalItemResource")],ol);const uoe=ol;let eg=class extends $e{constructor(t){super(t),this.created=null,this.rating=null}};u([d()],eg.prototype,"created",void 0),u([d()],eg.prototype,"rating",void 0),eg=u([E("esri.portal.PortalRating")],eg);const j$=eg;var Nd;const coe=new Set(["Map Service","Feature Service","Feature Collection","Scene Service","Image Service","Stream Service","Vector Tile Service","GeoJson","CSV","KML","WFS","WMTS","WMS","Feed"]),doe=new Set(["KML","GeoJson","CSV"]);let Be=Nd=class extends Yv(Ql){static from(e){return ep(Nd,e)}constructor(e){super(e),this.access=null,this.accessInformation=null,this.apiKey=null,this.applicationProxies=null,this.avgRating=null,this.categories=null,this.created=null,this.culture=null,this.description=null,this.extent=null,this.groupCategories=null,this.id=null,this.isOrgItem=!1,this.itemControl=null,this.licenseInfo=null,this.modified=null,this.name=null,this.numComments=null,this.numRatings=null,this.numViews=null,this.owner=null,this.ownerFolder=null,this.portal=null,this.screenshots=null,this.size=null,this.snippet=null,this.sourceJSON=null,this.sourceUrl=null,this.spatialReference=null,this.tags=null,this.title=null,this.type=null,this.typeKeywords=null,this.url=null}destroy(){this.portal=null}get displayName(){const e=this.type,t=this.typeKeywords||[];let r=e;return e==="Feature Service"||e==="Feature Collection"?r=t.includes("Table")?"Table":t.includes("Route Layer")?"Route Layer":t.includes("Markup")?"Markup":"Feature Layer":e==="Image Service"?r=t.includes("Elevation 3D Layer")?"Elevation Layer":t.includes("Tiled Imagery")?"Tiled Imagery Layer":"Imagery Layer":e==="Scene Service"?r="Scene Layer":e==="Video Service"?r="Video Layer":e==="Scene Package"?r="Scene Layer Package":e==="Stream Service"?r="Feature Layer":e==="Geoprocessing Service"?r=t.includes("Web Tool")?"Tool":"Geoprocessing Service":e==="Geocoding Service"?r="Locator":e==="Geoenrichment Service"?r="GeoEnrichment Service":e==="Microsoft Powerpoint"?r="Microsoft PowerPoint":e==="GeoJson"?r="GeoJSON":e==="Globe Service"?r="Globe Layer":e==="Vector Tile Service"?r="Tile Layer":e==="netCDF"?r="NetCDF":e==="Map Service"?r=t.includes("Spatiotemporal")||!t.includes("Hosted Service")&&!t.includes("Tiled")||t.includes("Relational")?"Map Image Layer":"Tile Layer":e&&e.toLowerCase().includes("add in")?r=e.replaceAll(/(add in)/gi,"Add-In"):e==="datastore catalog service"?r="Big Data File Share":e==="Compact Tile Package"?r="Tile Package (tpkx)":e==="OGCFeatureServer"?r="OGC Feature Layer":e==="web mapping application"&&t.includes("configurableApp")?r="Instant App":e==="Insights Page"?r="Insights Report":e==="Excalibur Imagery Project"&&(r="Excalibur Project"),r}readExtent(e){return e&&e.length?new at(e[0][0],e[0][1],e[1][0],e[1][1]):null}get iconUrl(){const e=this.type&&this.type.toLowerCase()||"",t=this.typeKeywords||[],r="esri/images/portal/",n="16";let i,s=!1,o=!1,a=!1,l=!1,c=!1,h=!1;return e.indexOf("service")>0||e==="feature collection"||e==="kml"||e==="wms"||e==="wmts"||e==="wfs"?(s=t.includes("Hosted Service"),e==="feature service"||e==="feature collection"||e==="kml"||e==="wfs"?(o=t.includes("Table"),a=t.includes("Route Layer"),l=t.includes("Markup"),c=t.includes("Spatiotemporal"),h=t.includes("UtilityNetwork"),i=c&&o?"spatiotemporaltable":o?"table":a?"routelayer":l?"markup":c?"spatiotemporal":s?"featureshosted":h?"utilitynetwork":"features"):i=e==="map service"||e==="wms"||e==="wmts"?s||t.includes("Tiled")||e==="wmts"?"maptiles":"mapimages":e==="scene service"?t.includes("Line")?"sceneweblayerline":t.includes("3DObject")?"sceneweblayermultipatch":t.includes("Point")?"sceneweblayerpoint":t.includes("IntegratedMesh")?"sceneweblayermesh":t.includes("PointCloud")?"sceneweblayerpointcloud":t.includes("Polygon")?"sceneweblayerpolygon":t.includes("Building")?"sceneweblayerbuilding":t.includes("Voxel")?"sceneweblayervoxel":"sceneweblayer":e==="image service"?t.includes("Elevation 3D Layer")?"elevationlayer":t.includes("Tiled Imagery")?"tiledimagerylayer":"imagery":e==="stream service"?"streamlayer":e==="video service"?t.includes("Live Stream")?"livestreamvideolayer":"videolayer":e==="vector tile service"?"vectortile":e==="datastore catalog service"?"datastorecollection":e==="geocoding service"?"geocodeservice":e==="geoprocessing service"?t.includes("Web Tool")?"tool":"layers":e==="geodata service"?"geodataservice":"layers"):i=e==="web map"||e==="cityengine web scene"?"maps":e==="web scene"?t.includes("ViewingMode-Local")?"webscenelocal":"websceneglobal":e==="web mapping application"&&t.includes("configurableApp")?"instantapps":e==="web mapping application"||e==="mobile application"||e==="application"||e==="operation view"||e==="desktop application"?"apps":e==="map document"||e==="map package"||e==="published map"||e==="scene document"||e==="globe document"||e==="basemap package"||e==="mobile basemap package"||e==="mobile map package"||e==="project package"||e==="project template"||e==="pro map"||e==="layout"||e==="layer"&&t.includes("ArcGIS Pro")||e==="explorer map"&&t.indexOf("Explorer Document")?"mapsgray":e==="service definition"||e==="csv"||e==="shapefile"||e==="cad drawing"||e==="geojson"||e==="netcdf"||e==="administrative report"?"datafiles":e==="explorer add in"||e==="desktop add in"||e==="windows viewer add in"||e==="windows viewer configuration"?"appsgray":e==="360 vr experience"?"360vr":e==="arcgis pro add in"||e==="arcgis pro configuration"?"addindesktop":e==="rule package"||e==="file geodatabase"||e==="sqlite geodatabase"||e==="csv collection"||e==="kml collection"||e==="windows mobile package"||e==="map template"||e==="desktop application template"||e==="gml"||e==="arcpad package"||e==="code sample"||e==="form"||e==="document link"||e==="earth configuration"||e==="operations dashboard add in"||e==="rules package"||e==="image"||e==="workflow manager package"||e==="explorer map"&&t.includes("Explorer Mapping Application")||t.includes("Document")?"datafilesgray":e==="network analysis service"||e==="geoprocessing service"||e==="geodata service"||e==="geometry service"||e==="geoprocessing package"||e==="locator package"||e==="geoprocessing sample"||e==="workflow manager service"?"toolsgray":e==="layer"||e==="layer package"||e==="explorer layer"?"layersgray":e==="scene package"?"scenepackage":e==="mobile scene package"?"mobilescenepackage":e==="tile package"||e==="compact tile package"?"tilepackage":e==="task file"?"taskfile":e==="report template"?"report-template":e==="statistical data collection"?"statisticaldatacollection":e==="insights workbook"?"workbook":e==="insights model"?"insightsmodel":e==="insights page"?"insightspage":e==="insights theme"?"insightstheme":e==="hub initiative"?"hubinitiative":e==="hubpage"?"hubpage":e==="hub event"?"hubevent":e==="hub site application"?"hubsite":e==="hub project"?"hubproject":e==="relational database connection"?"relationaldatabaseconnection":e==="big data file share"?"datastorecollection":e==="image collection"?"imagecollection":e==="style"?"style":e==="desktop style"?"desktopstyle":e==="dashboard"?"dashboard":e==="raster function template"?"rasterprocessingtemplate":e==="vector tile package"?"vectortilepackage":e==="ortho mapping project"?"orthomappingproject":e==="ortho mapping template"?"orthomappingtemplate":e==="solution"?"solutions":e==="geopackage"?"geopackage":e==="deep learning package"?"deeplearningpackage":e==="real time analytic"?"realtimeanalytics":e==="big data analytic"?"bigdataanalytics":e==="feed"?"feed":e==="excalibur imagery project"?"excaliburimageryproject":e==="notebook"?"notebook":e==="storymap"?"storymap":e==="survey123 add in"?"survey123addin":e==="mission"?"mission":e==="mission report"?"missionreport":e==="quickcapture project"?"quickcaptureproject":e==="pro report"?"proreport":e==="pro report template"?"proreporttemplate":e==="urban model"?"urbanmodel":e==="web experience"?"experiencebuilder":e==="web experience template"?"webexperiencetemplate":e==="experience builder widget"?"experiencebuilderwidget":e==="experience builder widget package"?"experiencebuilderwidgetpackage":e==="workflow"?"workflow":e==="insights script"?"insightsscript":e==="kernel gateway connection"?"kernelgatewayconnection":e==="hub initiative template"?"hubinitiativetemplate":e==="storymap theme"?"storymaptheme":e==="knowledge graph"?"knowledgegraph":e==="native application"?"nativeapp":e==="native application installer"?"nativeappinstaller":e==="link chart"?"linkchart":e==="investigation"?"investigation":e==="ogcfeatureserver"?"features":e==="pro project"?"proproject":e==="insights workbook package"?"insightsworkbookpackage":e==="apache parquet"?"apacheparquet":e==="notebook code snippets"||e==="notebook code snippet library"?"notebookcodesnippets":e==="suitability model"?"suitabilitymodel":e==="esri classifier definition"?"classifierdefinition":e==="esri classification schema"?"classificationschema":e==="insights data engineering workbook"?"dataengineeringworkbook":e==="insights data engineering model"?"dataengineeringmodel":e==="deep learning studio project"?"deeplearningproject":e==="discussion"?"discussion":e==="allsource project"?"allsourceproject":e==="api key"?"apikey":e==="data pipeline"?"datapipelines":"maps",i?ct(r+i+n+".png"):null}get isLayer(){return this.type!=null&&coe.has(this.type)}get itemCdnUrl(){let e=this.itemUrl;return e&&ht&&!ht.findCredential(e)&&(e=ht._normalizeAGOLorgDomain(e),e=e.replace(/^https?:\/\/www\.arcgis\.com/,"https://cdn.arcgis.com"),e=e.replace(/^https?:\/\/devext\.arcgis\.com/,"https://cdndev.arcgis.com"),e=e.replace(/^https?:\/\/qaext\.arcgis\.com/,"https://cdnqa.arcgis.com")),e}get itemPageUrl(){var t;const e=(t=this.portal)==null?void 0:t.itemPageUrl;return e&&this.id?`${e}?id=${this.id}`:null}get itemUrl(){var t;const e=(t=this.portal)==null?void 0:t.restUrl;return e&&this.id?`${e}/content/items/${this.id}`:null}get thumbnailUrl(){var r;const e=this.itemUrl,t=this.thumbnail;return e&&t?((r=this.portal)==null?void 0:r.normalizeUrl(`${e}/info/${t}?f=json`))??null:null}get userItemUrl(){const e=this.get("portal.restUrl");if(!e)return null;const t=this.owner||this.get("portal.user.username");return t?`${e}/content/users/${this.ownerFolder?`${t}/${this.ownerFolder}`:t}/items/${this.id}`:null}load(e){const t=this.portal??(this.portal=hn.getDefault()),r=t.load(e).then(()=>this.sourceJSON?this.sourceJSON:this.id&&this.itemUrl?t.request(this.itemUrl,{signal:e!=null?e.signal:null,query:{token:this.apiKey}}):{}).then(n=>{this.sourceJSON=n,this.read(n)});return this.addResolvingPromise(r),Promise.resolve(this)}async addRating(e){const t={method:"post",query:{}};return e instanceof j$&&(e=e.rating),e==null||isNaN(e)||typeof e!="number"||(t.query.rating=e),this.portal?(await this.portal.request(this.itemUrl+"/addRating",t),new j$({rating:e,created:new Date})):null}clone(){const e={access:this.access,accessInformation:this.accessInformation,applicationProxies:F(this.applicationProxies),avgRating:this.avgRating,categories:F(this.categories),created:F(this.created),culture:this.culture,description:this.description,extent:F(this.extent),groupCategories:F(this.groupCategories),id:this.id,itemControl:this.itemControl,licenseInfo:this.licenseInfo,modified:F(this.modified),name:this.name,numComments:this.numComments,numRatings:this.numRatings,numViews:this.numViews,owner:this.owner,ownerFolder:this.ownerFolder,portal:this.portal,screenshots:F(this.screenshots),size:this.size,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:F(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:F(this.typeKeywords),url:this.url};this.loaded&&(e.loadStatus="loaded");const t=new Nd({sourceJSON:this.sourceJSON}).set(e);return t._set("isOrgItem",this.isOrgItem),t}createPostQuery(){var r;const e=this.toJSON();for(const n of["tags","typeKeywords","categories"])e[n]=(r=e[n])==null?void 0:r.join(", ");const{extent:t}=e;return t&&(e.extent=JSON.stringify(t)),e}async deleteRating(){await yi(this.portal).request(this.itemUrl+"/deleteRating",{method:"post"})}fetchData(e="json",t){return yi(this.portal).request(this.itemUrl+"/data",{responseType:e,...t,query:{token:this.apiKey}})}async fetchRating(e){const t=await yi(this.portal).request(this.itemUrl+"/rating",{query:{token:this.apiKey},...e});return t.rating!=null?(t.created=new Date(t.created),new j$(t)):null}fetchRelatedItems(e,t){return yi(this.portal).requestToTypedArray(this.itemUrl+"/relatedItems",{query:{...e,token:this.apiKey},...t},Nd)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}reload(){return yi(this.portal).request(this.itemUrl??"",{cacheBust:!0,query:{token:this.apiKey}}).then(e=>(this.sourceJSON=e,this.read(e),this))}update(e){return this.id?this.load().then(()=>yi(this.portal).signIn()).then(()=>{const t=e&&e.data,r={method:"post"};r.query=this.createPostQuery();for(const n in r.query)r.query[n]===null&&(r.query[n]="");return r.query.clearEmptyFields=!0,t!=null&&(typeof t=="string"?r.query.text=t:typeof t=="object"&&(r.query.text=JSON.stringify(t))),this.portal.request(`${this.userItemUrl}/update`,r).then(()=>this.reload())}):Promise.reject(new N("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async copy(e){if(!this.id)throw new N("portal:item-does-not-exist","The item does not exist yet");await this.load();const{portal:t,itemUrl:r}=this;await yi(t).signIn();const{copyResources:n,folder:i,tags:s,title:o}=e||{},a={method:"post",query:{copyPrivateResources:n==="all",folder:typeof i=="string"?i:i==null?void 0:i.id,includeResources:!!n,tags:s==null?void 0:s.join(","),title:o}},{itemId:l}=await t.request(`${r}/copy`,a);return new Nd({id:l,portal:t})}updateThumbnail(e){return this.id?this.load().then(()=>this.portal.signIn()).then(()=>{const t=e.thumbnail,r=e.filename,n={method:"post"};if(typeof t=="string")wp(t)?n.query={data:t}:n.query={url:Ms(t)},r!=null&&(n.query.filename=r);else{const i=new FormData;r!=null?i.append("file",t,r):i.append("file",t),n.body=i}return this.portal.request(`${this.userItemUrl}/updateThumbnail`,n).then(()=>this.reload())}):Promise.reject(new N("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async fetchResources(e={},t){const{fetchResources:r}=await ie(()=>import("./resourceUtils-fa66e95d.js"),[]);return r(this,e,t)}async addResource(e,t,r){const{addOrUpdateResource:n}=await ie(()=>import("./resourceUtils-fa66e95d.js"),[]);return e.portalItem=this,n(e,"add",t,r)}async removeResource(e,t){const{removeResource:r}=await ie(()=>import("./resourceUtils-fa66e95d.js"),[]);if(e.portalItem&&e.portalItem.itemUrl!==this.itemUrl)throw new N("removeresource:portal-item-mismatch","The portal item associated with the provided resource does not match the item");return r(this,e,t)}async removeAllResources(e){const{removeAllResources:t}=await ie(()=>import("./resourceUtils-fa66e95d.js"),[]);return t(this,e)}resourceFromPath(e){return new uoe({portalItem:this,path:e})}toJSON(){const e=this.extent,t={accessInformation:this.accessInformation,categories:F(this.categories),created:this.created&&this.created.getTime(),description:this.description,extent:e&&[[e.xmin,e.ymin],[e.xmax,e.ymax]],id:this.id,isOrgItem:this.isOrgItem,licenseInfo:this.licenseInfo,modified:this.modified&&this.modified.getTime(),name:this.name,owner:this.owner,ownerFolder:this.ownerFolder,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:F(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:F(this.typeKeywords),url:this.url};return lV(t)}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");return new Nd({sourceJSON:e})}_getPostQuery(){const e=this.toJSON();for(const t in e)t==="tags"&&e[t]!==null&&(e[t]=e[t].join(", ")),t==="typeKeywords"&&e[t]!==null&&(e[t]=e[t].join(", ")),t==="extent"&&e[t]&&(e[t]=JSON.stringify(e[t]));return e}};u([d({type:["private","shared","org","public"]})],Be.prototype,"access",void 0),u([d()],Be.prototype,"accessInformation",void 0),u([d({type:String})],Be.prototype,"apiKey",void 0),u([d({json:{read:{source:"appProxies"}}})],Be.prototype,"applicationProxies",void 0),u([d()],Be.prototype,"avgRating",void 0),u([d()],Be.prototype,"categories",void 0),u([d({type:Date})],Be.prototype,"created",void 0),u([d()],Be.prototype,"culture",void 0),u([d()],Be.prototype,"description",void 0),u([d({readOnly:!0})],Be.prototype,"displayName",null),u([d({type:at})],Be.prototype,"extent",void 0),u([we("extent")],Be.prototype,"readExtent",null),u([d()],Be.prototype,"groupCategories",void 0),u([d({readOnly:!0})],Be.prototype,"iconUrl",null),u([d()],Be.prototype,"id",void 0),u([d({readOnly:!0})],Be.prototype,"isLayer",null),u([d({type:Boolean,readOnly:!0})],Be.prototype,"isOrgItem",void 0),u([d()],Be.prototype,"itemControl",void 0),u([d({readOnly:!0})],Be.prototype,"itemPageUrl",null),u([d({readOnly:!0})],Be.prototype,"itemUrl",null),u([d()],Be.prototype,"licenseInfo",void 0),u([d({type:Date})],Be.prototype,"modified",void 0),u([d()],Be.prototype,"name",void 0),u([d()],Be.prototype,"numComments",void 0),u([d()],Be.prototype,"numRatings",void 0),u([d()],Be.prototype,"numViews",void 0),u([d()],Be.prototype,"owner",void 0),u([d()],Be.prototype,"ownerFolder",void 0),u([d({type:hn})],Be.prototype,"portal",void 0),u([d()],Be.prototype,"screenshots",void 0),u([d()],Be.prototype,"size",void 0),u([d()],Be.prototype,"snippet",void 0),u([d()],Be.prototype,"sourceJSON",void 0),u([d({type:String})],Be.prototype,"sourceUrl",void 0),u([d({type:String})],Be.prototype,"spatialReference",void 0),u([d()],Be.prototype,"tags",void 0),u([d()],Be.prototype,"thumbnail",void 0),u([d({readOnly:!0})],Be.prototype,"thumbnailUrl",null),u([d()],Be.prototype,"title",void 0),u([d()],Be.prototype,"type",void 0),u([d()],Be.prototype,"typeKeywords",void 0),u([d({type:String,json:{read(e,t){var r;if(doe.has(t.type)){const n=(r=this.portal)==null?void 0:r.restUrl;e||(e=n&&this.id?`${n}/content/items/${this.id}/data`:null)}return e}}})],Be.prototype,"url",void 0),u([d({readOnly:!0})],Be.prototype,"userItemUrl",null),Be=Nd=u([E("esri.portal.PortalItem")],Be);const d0=Be,Wz=Object.freeze(Object.defineProperty({__proto__:null,default:d0},Symbol.toStringTag,{value:"Module"})),IN=/^([a-z]{2})(?:[-_]([A-Za-z]{2}))?$/,hoe={ar:!0,bg:!0,bs:!0,ca:!0,cs:!0,da:!0,de:!0,el:!0,en:!0,es:!0,et:!0,fi:!0,fr:!0,he:!0,hr:!0,hu:!0,id:!0,it:!0,ja:!0,ko:!0,lt:!0,lv:!0,nb:!0,nl:!0,pl:!0,"pt-BR":!0,"pt-PT":!0,ro:!0,ru:!0,sk:!0,sl:!0,sr:!0,sv:!0,th:!0,tr:!0,uk:!0,vi:!0,"zh-CN":!0,"zh-HK":!0,"zh-TW":!0};function CN(e){return e in hoe}const tg=[],tm=new Map;function kN(e){for(const t of tm.keys())Hz(e.pattern,t)&&tm.delete(t)}function poe(e){return tg.includes(e)||(kN(e),tg.unshift(e)),{remove(){const t=tg.indexOf(e);t>-1&&(tg.splice(t,1),kN(e))}}}async function u2(e){const t=ei();tm.has(e)||tm.set(e,moe(e,t));const r=tm.get(e);return r&&await yoe.add(r),r}function foe(e){if(!IN.test(e))return null;const t=IN.exec(e);if(t===null)return null;const[,r,n]=t,i=r+(n?"-"+n.toUpperCase():"");return CN(i)?i:CN(r)?r:null}async function moe(e,t){const r=[];for(const n of tg)if(Hz(n.pattern,e))try{return await n.fetchMessageBundle(e,t)}catch(i){r.push(i)}throw r.length?new N("intl:message-bundle-error",`Errors occurred while loading "${e}"`,{errors:r}):new N("intl:no-message-bundle-loader",`No loader found for message bundle "${e}"`)}function Hz(e,t){return typeof e=="string"?t.startsWith(e):e.test(t)}YO(()=>{tm.clear()});const yoe=new class{constructor(){this._numLoading=0,this._dfd=null}async waitForAll(){this._dfd&&await this._dfd.promise}add(e){return this._increase(),e.then(()=>this._decrease(),()=>this._decrease()),this.waitForAll()}_increase(){this._numLoading++,this._dfd||(this._dfd=Bo())}_decrease(){this._numLoading=Math.max(this._numLoading-1,0),this._dfd&&this._numLoading===0&&(this._dfd.resolve(),this._dfd=null)}};async function goe(e){if(!e)return;const t=e.includes("-vector")?e.slice(0,e.indexOf("-vector")):e,r=await u2("esri/t9n/basemaps");return r[e]||r[t]}const VM={streets:{id:"streets",classic:!0,deprecated:!0,get thumbnailUrl(){return ct("esri/images/basemap/streets.jpg")},baseMapLayers:[{id:"streets-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Street Map",showLegend:!1,visibility:!0,opacity:1}]},satellite:{id:"satellite",classic:!0,get thumbnailUrl(){return ct("esri/images/basemap/satellite.jpg")},baseMapLayers:[{id:"satellite-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1}]},hybrid:{id:"hybrid",classic:!0,get thumbnailUrl(){return ct("esri/images/basemap/hybrid.jpg")},baseMapLayers:[{id:"hybrid-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1},{id:"hybrid-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/30d6b8271e1849cd9c3042060001f425/resources/styles/root.json",layerType:"VectorTileLayer",title:"Hybrid Reference Layer",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},terrain:{id:"terrain",classic:!0,get thumbnailUrl(){return ct("esri/images/basemap/terrain.jpg")},baseMapLayers:[{id:"terrain-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Terrain Base",showLegend:!1,visibility:!0,opacity:1},{id:"terrain-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Reference Overlay",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},topo:{id:"topo",classic:!0,deprecated:!0,get thumbnailUrl(){return ct("esri/images/basemap/topo.jpg")},baseMapLayers:[{id:"topo-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Topo Map",showLegend:!1,visibility:!0,opacity:1}]},gray:{id:"gray",classic:!0,deprecated:!0,get thumbnailUrl(){return ct("esri/images/basemap/gray.jpg")},baseMapLayers:[{id:"gray-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Light Gray Base",showLegend:!1,visibility:!0,opacity:1},{id:"gray-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Light Gray Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},"dark-gray":{id:"dark-gray",classic:!0,deprecated:!0,get thumbnailUrl(){return ct("esri/images/basemap/dark-gray.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Dark Gray Base",showLegend:!1,visibility:!0,opacity:1},{id:"dark-gray-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Dark Gray Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},oceans:{id:"oceans",classic:!0,get thumbnailUrl(){return ct("esri/images/basemap/oceans.jpg")},baseMapLayers:[{id:"oceans-base-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Base",showLegend:!1,visibility:!0,opacity:1},{id:"oceans-reference-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},"national-geographic":{id:"national-geographic",classic:!0,deprecated:!0,get thumbnailUrl(){return ct("esri/images/basemap/national-geographic.jpg")},baseMapLayers:[{id:"national-geographic-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer",title:"NatGeo World Map",showLegend:!1,layerType:"ArcGISTiledMapServiceLayer",visibility:!0,opacity:1}]},osm:{id:"osm",classic:!0,get thumbnailUrl(){return ct("esri/images/basemap/osm.jpg")},baseMapLayers:[{id:"osm-base-layer",layerType:"OpenStreetMap",title:"Open Street Map",showLegend:!1,visibility:!0,opacity:1}]},"dark-gray-vector":{id:"dark-gray-vector",classic:!0,get thumbnailUrl(){return ct("esri/images/basemap/dark-gray-vector.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/5e9b3685f4c24d8781073dd928ebda50/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Base",visibility:!0,opacity:1},{id:"dark-gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/747cb7a5329c478cbe6981076cc879c5/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Reference",isReference:!0,visibility:!0,opacity:1}]},"gray-vector":{id:"gray-vector",classic:!0,get thumbnailUrl(){return ct("esri/images/basemap/gray-vector.jpg")},baseMapLayers:[{id:"gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/291da5eab3a0412593b66d384379f89f/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Base",visibility:!0,opacity:1},{id:"gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/1768e8369a214dfab4e2167d5c5f2454/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Reference",isReference:!0,visibility:!0,opacity:1}]},"streets-vector":{id:"streets-vector",classic:!0,get thumbnailUrl(){return ct("esri/images/basemap/streets-vector.jpg")},baseMapLayers:[{id:"streets-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/de26a3cf4cc9451298ea173c4b324736/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets",visibility:!0,opacity:1}]},"topo-vector":{id:"topo-vector",classic:!0,get thumbnailUrl(){return ct("esri/images/basemap/topo-vector.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"topo-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/7dc6cea0b1764a1f9af2e679f642f0f5/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Topo",visibility:!0,opacity:1}]},"streets-night-vector":{id:"streets-night-vector",classic:!0,get thumbnailUrl(){return ct("esri/images/basemap/streets-night.jpg")},baseMapLayers:[{id:"streets-night-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/86f556a2d1fd468181855a35e344567f/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Night",visibility:!0,opacity:1}]},"streets-relief-vector":{id:"streets-relief-vector",classic:!0,get thumbnailUrl(){return ct("esri/images/basemap/streets-relief.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"streets-relief-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/b266e6d17fc345b498345613930fbd76/resources/styles/root.json",title:"World Streets Relief",layerType:"VectorTileLayer",visibility:!0,opacity:1}]},"streets-navigation-vector":{id:"streets-navigation-vector",classic:!0,get thumbnailUrl(){return ct("esri/images/basemap/streets-navigation.jpg")},baseMapLayers:[{id:"streets-navigation-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/63c47b7177f946b49902c24129b87252/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Navigation",visibility:!0,opacity:1}]},"arcgis-imagery":{get thumbnailUrl(){return ct("esri/images/basemap/hybrid.jpg")},title:"Imagery Hybrid",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-imagery-standard":{get thumbnailUrl(){return ct("esri/images/basemap/satellite.jpg")},title:"Imagery",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"}]},"arcgis-imagery-labels":{title:"Hybrid [Reference]",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-light-gray":{get thumbnailUrl(){return ct("esri/images/basemap/gray-vector.jpg")},title:"Light Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Base",title:"Light Gray Canvas Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Labels",title:"Light Gray Canvas Labels",isReference:!0}]},"arcgis-dark-gray":{get thumbnailUrl(){return ct("esri/images/basemap/dark-gray.jpg")},title:"Dark Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Base",title:"Dark Gray Canvas Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Labels",title:"Dark Gray Canvas Labels",isReference:!0}]},"arcgis-navigation":{get thumbnailUrl(){return ct("esri/images/basemap/streets-navigation.jpg")},title:"Navigation",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Navigation",title:"World Navigation Map"}]},"arcgis-navigation-night":{title:"Navigation (Dark Mode)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:NavigationNight",title:"World Navigation Map (Dark Mode)"}]},"arcgis-streets":{get thumbnailUrl(){return ct("esri/images/basemap/streets-vector.jpg")},title:"Streets",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Streets",title:"World Street Map"}]},"arcgis-streets-night":{get thumbnailUrl(){return ct("esri/images/basemap/streets-night.jpg")},title:"Streets (Night)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsNight",title:"World Street Map (Night)"}]},"arcgis-streets-relief":{get thumbnailUrl(){return ct("esri/images/basemap/streets-relief.jpg")},title:"Streets (with Relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsRelief:Base",title:"World Street Map (with Relief)"}]},"arcgis-topographic":{get thumbnailUrl(){return ct("esri/images/basemap/topo.jpg")},title:"Topographic",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Topographic:Base",title:"World Topographic Map"}]},"arcgis-oceans":{get thumbnailUrl(){return ct("esri/images/basemap/oceans.jpg")},title:"Oceans",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Ocean Base",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Oceans:Labels",title:"World Ocean Reference",isReference:!0}]},"osm-standard":{title:"OpenStreetMap",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Standard",title:"OpenStreetMap"}]},"osm-standard-relief":{title:"OpenStreetMap (with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StandardRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},"osm-streets":{title:"OpenStreetMap (Streets)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Streets",title:"OpenStreetMap (Streets)"}]},"osm-streets-relief":{title:"OpenStreetMap (Streets with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StreetsRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},"osm-light-gray":{title:"OpenStreetMap (Light Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Base",title:"OSM (Light Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Labels",title:"OSM (Light Gray Reference)",isReference:!0}]},"osm-dark-gray":{title:"OpenStreetMap (Dark Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Base",title:"OSM (Dark Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Labels",title:"OSM (Dark Gray Reference)",isReference:!0}]},"arcgis-terrain":{title:"Terrain with Labels",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Base",title:"World Terrain Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Detail",title:"World Terrain Reference",isReference:!0}]},"arcgis-community":{title:"Community",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Community",title:"Community"}]},"arcgis-charted-territory":{title:"Charted Territory",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ChartedTerritory:Base",title:"Charted Territory"}]},"arcgis-colored-pencil":{title:"Colored Pencil",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ColoredPencil",title:"Colored Pencil"}]},"arcgis-nova":{title:"Nova",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Nova",title:"Nova"}]},"arcgis-modern-antique":{title:"Modern Antique",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ModernAntique:Base",title:"Modern Antique"}]},"arcgis-midcentury":{title:"Mid-Century",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Midcentury",title:"Mid-Century"}]},"arcgis-newspaper":{title:"Newspaper",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Newspaper",title:"Newspaper"}]},"arcgis-hillshade-light":{title:"Hillshade",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"}]},"arcgis-hillshade-dark":{title:"Hillshade (Dark)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade (Dark)",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade_Dark/MapServer"}]},"arcgis-human-geography":{title:"Human Geography",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Base",title:"Human Geography Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Detail",title:"Human Geography Detail",isReference:!0},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Label",title:"Human Geography Label",isReference:!0}]},"arcgis-human-geography-dark":{title:"Human Geography (Dark)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Base",title:"Human Geography Dark Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Detail",title:"Human Geography Dark Detail",isReference:!0},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Label",title:"Human Geography Dark Label",isReference:!0}]}};function PCe(e){return e!=null&&typeof e=="object"&&"type"in e&&e.type==="feature"}const OCe={Point:"SceneLayer","3DObject":"SceneLayer",IntegratedMesh:"IntegratedMeshLayer",PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"};function Zz(e){const t=e==null?void 0:e.type;return t==="building-scene"||t==="integrated-mesh"||t==="point-cloud"||t==="scene"}function XO(e){var t;return(e==null?void 0:e.type)==="feature"&&!e.url&&((t=e.source)==null?void 0:t.type)==="memory"}function RCe(e){var t;return(e==null?void 0:e.type)==="feature"&&((t=e.source)==null?void 0:t.type)==="feature-layer"}async function voe(e,t){const r=ht==null?void 0:ht.findServerInfo(e);if((r==null?void 0:r.currentVersion)!=null)return r.owningSystemUrl||null;const n=e.toLowerCase().indexOf("/rest/services");if(n===-1)return null;const i=`${e.substring(0,n)}/rest/info`,s=t!=null?t.signal:null,{data:o}=await St(i,{query:{f:"json"},responseType:"json",signal:s});return(o==null?void 0:o.owningSystemUrl)||null}function woe(e){if(!("capabilities"in e))return!1;switch(e.type){case"csv":case"feature":case"geojson":case"imagery":case"knowledge-graph-sublayer":case"ogc-feature":case"oriented-imagery":case"scene":case"subtype-group":case"subtype-sublayer":case"wfs":return!0;default:return!1}}function _oe(e){return woe(e)?"effectiveCapabilities"in e?e.effectiveCapabilities:e.capabilities:null}function boe(e){if(!("editingEnabled"in e))return!1;switch(e.type){case"csv":case"feature":case"geojson":case"oriented-imagery":case"scene":case"subtype-group":case"subtype-sublayer":return!0;default:return!1}}function Soe(e){return!!boe(e)&&("effectiveEditingEnabled"in e?e.effectiveEditingEnabled:e.editingEnabled)}const xoe=new Set(["bing-maps","imagery","imagery-tile","map-image","open-street-map","tile","unknown","unsupported","vector-tile","web-tile","wms","wmts"]),$oe=new Set(["csv","feature","geo-rss","geojson","group","imagery","imagery-tile","kml","map-image","map-notes","media","ogc-feature","route","stream","subtype-group","tile","unknown","unsupported","vector-tile","web-tile","wfs","wms","wmts"]);function Toe(e){return e.layerContainerType==="basemap"?xoe:e.layerContainerType==="operational-layers"?$oe:null}function Eoe(e,t){if(t.restrictedWebMapWriting){const r=Toe(t);return r==null||r.has(e.type)&&!XO(e)}return!0}function Moe(e,t){if(t)if(XO(e)){const r=Zv("featureCollection.layers",t),n=r&&r[0]&&r[0].layerDefinition;n&&PN(e,n)}else e.type!=="group"&&PN(e,t)}function PN(e,t){"maxScale"in e&&(t.maxScale=gS(e.maxScale)??void 0),"minScale"in e&&(t.minScale=gS(e.minScale)??void 0)}function Ioe(e,t){if(Moe(e,t),t&&("blendMode"in e&&(t.blendMode=e.blendMode,t.blendMode==="normal"&&delete t.blendMode),t.opacity=gS(e.opacity)??void 0,t.title=e.title||"Layer",t.visibility=e.visible,"legendEnabled"in e&&e.type!=="wmts"))if(XO(e)){const r=t.featureCollection;r&&(r.showLegend=e.legendEnabled)}else t.showLegend=e.legendEnabled}function ON(e,t,r){if(!("write"in e)||!e.write)return r&&r.messages&&r.messages.push(new N("layer:unsupported",`Layers (${e.title}, ${e.id}) of type '${e.declaredClass}' cannot be persisted`,{layer:e})),null;if(Eoe(e,r)){const n={};return e.write(n,r)?n:null}return t!=null&&Ioe(e,t=F(t)),t}var b_;let Coe=0;const Jz="esri.Basemap";let ps=b_=class extends Yv(Ql){constructor(e){super(e),this.id=null,this.portalItem=null,this.spatialReference=null,this.thumbnailUrl=null,this.title="Basemap",this.id=Date.now().toString(16)+"-basemap-"+Coe++,this.baseLayers=new Le,this.referenceLayers=new Le;const t=n=>{n.parent&&n.parent!==this&&"remove"in n.parent&&n.parent.remove(n),n.parent=this,n.type==="elevation"&&Z.getLogger(this).error(`Layer '${n.title}, id:${n.id}' of type '${n.type}' is not supported as a basemap layer and will therefore be ignored.`)},r=n=>{n.parent=null};this.addHandles([this.baseLayers.on("after-add",n=>t(n.item)),this.referenceLayers.on("after-add",n=>t(n.item)),this.baseLayers.on("after-remove",n=>r(n.item)),this.referenceLayers.on("after-remove",n=>r(n.item))])}initialize(){this.when().catch(e=>{Z.getLogger(this).error("#load()",`Failed to load basemap (title: '${this.title}', id: '${this.id}')`,e)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){var r;const e=this.baseLayers.removeAll();for(const n of e)n.destroy();const t=this.referenceLayers.removeAll();for(const n of t)n.destroy();this.baseLayers.destroy(),this.referenceLayers.destroy(),(r=this.portalItem)==null||r.destroy(),this.portalItem=null}normalizeCtorArgs(e){return e&&"resourceInfo"in e&&(this._set("resourceInfo",e.resourceInfo),delete(e={...e}).resourceInfo),e}set baseLayers(e){this._set("baseLayers",tp(e,this._get("baseLayers")))}_writeBaseLayers(e,t,r){const n=[];e&&(r={...r,layerContainerType:"basemap"},this.baseLayers.forEach(i=>{const s=ON(i,r.webmap?r.webmap.getLayerJSONFromResourceInfo(i):null,r);s!=null&&n.push(s)}),this.referenceLayers.forEach(i=>{const s=ON(i,r.webmap?r.webmap.getLayerJSONFromResourceInfo(i):null,r);s!=null&&(i.type!=="scene"&&(s.isReference=!0),n.push(s))})),t.baseMapLayers=n}set referenceLayers(e){this._set("referenceLayers",tp(e,this._get("referenceLayers")))}writeTitle(e,t){t.title=e||"Basemap"}load(e){return this.addResolvingPromise(this._loadFromSource(e)),Promise.resolve(this)}loadAll(){return OO(this,e=>{e(this.baseLayers,this.referenceLayers)})}clone(){const e={id:this.id,title:this.title,portalItem:this.portalItem,baseLayers:this.baseLayers.map(t=>nS(t)?t.clone():t),referenceLayers:this.referenceLayers.map(t=>nS(t)?t.clone():t)};return this.loaded&&(e.loadStatus="loaded"),new b_({resourceInfo:this.resourceInfo}).set(e)}read(e,t){this.resourceInfo||this._set("resourceInfo",{data:e,context:t}),super.read(e,t)}write(e,t){return e=e||{},t&&t.origin||(t={origin:"web-map",...t}),super.write(e,t),!this.loaded&&this.resourceInfo&&this.resourceInfo.data.baseMapLayers&&(e.baseMapLayers=this.resourceInfo.data.baseMapLayers.map(r=>{const n=F(r);return n.url&&Na(n.url)&&(n.url=`https:${n.url}`),n.templateUrl&&Na(n.templateUrl)&&(n.templateUrl=`https:${n.templateUrl}`),n})),e}async _loadFromSource(e){const{resourceInfo:t,portalItem:r}=this;qt(e);const n=[];if(t){const i=t.context?t.context.url:null;if(n.push(this._loadLayersFromJSON(t.data,i,e)),t.data.id&&!t.data.title){const s=t.data.id;n.push(goe(s).then(o=>{o&&this.read({title:o},t.context)}))}}else r&&n.push(this._loadFromItem(r,e));await Promise.all(n)}async _loadLayersFromJSON(e,t,r){const n=this.resourceInfo&&this.resourceInfo.context,i=this.portalItem&&this.portalItem.portal||n&&n.portal||null,s=Poe[(n==null?void 0:n.origin)||""]??"web-map",{populateOperationalLayers:o}=await ie(()=>import("./layersCreator-ac87ab9e.js"),["assets/layersCreator-ac87ab9e.js","assets/lazyLayerLoader-a860f64c.js","assets/portalLayers-35fcc643.js","assets/layersLoader-48793f5f.js","assets/fetchService-363fc0b0.js","assets/jsonContext-76163bf5.js","assets/styleUtils-b6b6277d.js"]),a=[];if(qt(r),e.baseMapLayers&&Array.isArray(e.baseMapLayers)){const l={context:{origin:s,url:t,portal:i,layerContainerType:"basemap"},defaultLayerType:"DefaultTileLayer"},c=m=>s==="web-scene"&&m.layerType==="ArcGISSceneServiceLayer"||m.isReference,h=o(this.baseLayers,e.baseMapLayers.filter(m=>!c(m)),l);a.push(h);const f=o(this.referenceLayers,e.baseMapLayers.filter(c),l);a.push(f)}await Mo(a)}async _loadFromItem(e,t){const r=await e.load(t),n=await r.fetchData("json",t),i=jn(e.itemUrl??"");return this._set("resourceInfo",{data:n.baseMap??{},context:{origin:koe[e.type||""]??"web-map",portal:e.portal||hn.getDefault(),url:i}}),this.read(this.resourceInfo.data,this.resourceInfo.context),this.read({spatialReference:n.spatialReference},this.resourceInfo.context),this.read({title:e.title,thumbnailUrl:e.thumbnailUrl},{origin:"portal-item",portal:e.portal||hn.getDefault(),url:i}),this._loadLayersFromJSON(this.resourceInfo.data,i,t)}static fromId(e){const t=VM[e];if(!t)return null;if(t.deprecated){let r=null;e==="dark-gray"?r="dark-gray-vector":e==="gray"?r="gray-vector":e==="streets"?r="streets-vector":e==="topo"&&(r="topo-vector"),vS(Z.getLogger(Jz),`The ${e} basemap has entered mature support and is no longer being updated.`,{replacement:r,see:"https://arcg.is/1iq8aD",warnOnce:!0})}return b_.fromJSON(t)}};u([d({json:{write:{ignoreOrigin:!0,target:"baseMapLayers",writer(e,t,r,n){this._writeBaseLayers(e,t,n)}},origins:{"web-scene":{write:{ignoreOrigin:!0,target:{baseMapLayers:{type:Le}},writer(e,t,r,n){this._writeBaseLayers(e,t,n)}}}}}})],ps.prototype,"baseLayers",null),u([d({type:String,json:{origins:{"web-scene":{write:!0}}}})],ps.prototype,"id",void 0),u([d({type:d0})],ps.prototype,"portalItem",void 0),u([d()],ps.prototype,"referenceLayers",null),u([d({readOnly:!0})],ps.prototype,"resourceInfo",void 0),u([d({type:Ce})],ps.prototype,"spatialReference",void 0),u([d()],ps.prototype,"thumbnailUrl",void 0),u([d({type:String,json:{origins:{"web-scene":{write:{isRequired:!0}}}}})],ps.prototype,"title",void 0),u([pe("title")],ps.prototype,"writeTitle",null),ps=b_=u([E(Jz)],ps);const koe={"Web Scene":"web-scene","Web Map":"web-map","Link Chart":"link-chart"},Poe={"web-scene":"web-scene","web-map":"web-map","link-chart":"link-chart"},ES=ps,Ooe=Object.freeze(Object.defineProperty({__proto__:null,default:ES},Symbol.toStringTag,{value:"Module"})),MS={transparent:[0,0,0,0],black:[0,0,0,1],silver:[192,192,192,1],gray:[128,128,128,1],white:[255,255,255,1],maroon:[128,0,0,1],red:[255,0,0,1],purple:[128,0,128,1],fuchsia:[255,0,255,1],green:[0,128,0,1],lime:[0,255,0,1],olive:[128,128,0,1],yellow:[255,255,0,1],navy:[0,0,128,1],blue:[0,0,255,1],teal:[0,128,128,1],aqua:[0,255,255,1],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],blanchedalmond:[255,235,205,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],oldlace:[253,245,230,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],rebeccapurple:[102,51,153,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],whitesmoke:[245,245,245,1],yellowgreen:[154,205,50,1]};function Qz(e){return!!MS[e]||!!MS[e.toLowerCase()]}function eR(e){return MS[e]??MS[e.toLowerCase()]}function Roe(e){return[...eR(e)]}function V$(e,t,r){r<0&&++r,r>1&&--r;const n=6*r;return n<1?e+(t-e)*n:2*r<1?t:3*r<2?e+(t-e)*(2/3-r)*6:e}function Yz(e,t,r,n=1){const i=(e%360+360)%360/360,s=r<=.5?r*(t+1):r+t-r*t,o=2*r-s;return[Math.round(255*V$(o,s,i+1/3)),Math.round(255*V$(o,s,i)),Math.round(255*V$(o,s,i-1/3)),n]}function Aoe(e){const t=e.length>5,r=t?8:4,n=(1<<r)-1,i=t?1:17,s=t?e.length===9:e.length===5;let o=+("0x"+e.substr(1));if(isNaN(o))return null;const a=[0,0,0,1];let l;return s&&(l=o&n,o>>=r,a[3]=i*l/255),l=o&n,o>>=r,a[2]=i*l,l=o&n,o>>=r,a[1]=i*l,l=o&n,o>>=r,a[0]=i*l,a}function Yo(){return[0,0,0]}function Loe(e){return[e[0],e[1],e[2]]}function Xv(e,t,r){return[e,t,r]}function Noe(e){const t=Yo(),r=Math.min(3,e.length);for(let n=0;n<r;++n)t[n]=e[n];return t}function Doe(e,t){return new Float64Array(e,t,3)}function Kz(){return Yo()}function Xz(){return Xv(1,1,1)}function eU(){return Xv(1,0,0)}function tU(){return Xv(0,1,0)}function rU(){return Xv(0,0,1)}const Foe=Kz(),joe=Xz(),Voe=eU(),zoe=tU(),Uoe=rU();Object.freeze(Object.defineProperty({__proto__:null,ONES:joe,UNIT_X:Voe,UNIT_Y:zoe,UNIT_Z:Uoe,ZEROS:Foe,clone:Loe,create:Yo,createView:Doe,fromArray:Noe,fromValues:Xv,ones:Xz,unitX:eU,unitY:tU,unitZ:rU,zeros:Kz},Symbol.toStringTag,{value:"Module"}));let tR=1e-6;function zs(){return tR}function Goe(e){tR=e}const c2=Math.random,Boe=Math.PI/180,qoe=180/Math.PI;function rR(e){return e*Boe}function Woe(e){return e*qoe}function Hoe(e,t){return Math.abs(e-t)<=tR*Math.max(1,Math.abs(e),Math.abs(t))}Object.freeze(Object.defineProperty({__proto__:null,RANDOM:c2,equals:Hoe,getEpsilon:zs,setEpsilon:Goe,toDegree:Woe,toRadian:rR},Symbol.toStringTag,{value:"Module"}));function d2(e){const t=e[0],r=e[1],n=e[2];return Math.sqrt(t*t+r*r+n*n)}function IS(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function h2(e,t,r,n){return e[0]=t,e[1]=r,e[2]=n,e}function nU(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e}function nR(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e}function iU(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e[2]=t[2]*r[2],e}function sU(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e[2]=t[2]/r[2],e}function Zoe(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e}function Joe(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e}function Qoe(e,t){return e[0]=Math.abs(t[0]),e[1]=Math.abs(t[1]),e[2]=Math.abs(t[2]),e}function Yoe(e,t){return e[0]=Math.sign(t[0]),e[1]=Math.sign(t[1]),e[2]=Math.sign(t[2]),e}function Koe(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e[2]=Math.min(t[2],r[2]),e}function Xoe(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e[2]=Math.max(t[2],r[2]),e}function eae(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e}function oU(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e}function tae(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e[2]=t[2]+r[2]*n,e}function aU(e,t){const r=t[0]-e[0],n=t[1]-e[1],i=t[2]-e[2];return Math.sqrt(r*r+n*n+i*i)}function lU(e,t){const r=t[0]-e[0],n=t[1]-e[1],i=t[2]-e[2];return r*r+n*n+i*i}function uU(e){const t=e[0],r=e[1],n=e[2];return t*t+r*r+n*n}function rae(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function nae(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e}function CS(e,t){const r=t[0],n=t[1],i=t[2];let s=r*r+n*n+i*i;return s>0&&(s=1/Math.sqrt(s),e[0]=t[0]*s,e[1]=t[1]*s,e[2]=t[2]*s),e}function cU(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function iae(e,t,r){const n=t[0],i=t[1],s=t[2],o=r[0],a=r[1],l=r[2];return e[0]=i*l-s*a,e[1]=s*o-n*l,e[2]=n*a-i*o,e}function sae(e,t,r,n){const i=t[0],s=t[1],o=t[2];return e[0]=i+n*(r[0]-i),e[1]=s+n*(r[1]-s),e[2]=o+n*(r[2]-o),e}function oae(e,t,r,n,i,s){const o=s*s,a=o*(2*s-3)+1,l=o*(s-2)+s,c=o*(s-1),h=o*(3-2*s);return e[0]=t[0]*a+r[0]*l+n[0]*c+i[0]*h,e[1]=t[1]*a+r[1]*l+n[1]*c+i[1]*h,e[2]=t[2]*a+r[2]*l+n[2]*c+i[2]*h,e}function aae(e,t,r,n,i,s){const o=1-s,a=o*o,l=s*s,c=a*o,h=3*s*a,f=3*l*o,m=l*s;return e[0]=t[0]*c+r[0]*h+n[0]*f+i[0]*m,e[1]=t[1]*c+r[1]*h+n[1]*f+i[1]*m,e[2]=t[2]*c+r[2]*h+n[2]*f+i[2]*m,e}function lae(e,t){t=t||1;const r=c2,n=2*r()*Math.PI,i=2*r()-1,s=Math.sqrt(1-i*i)*t;return e[0]=Math.cos(n)*s,e[1]=Math.sin(n)*s,e[2]=i*t,e}function uae(e,t,r){const n=t[0],i=t[1],s=t[2];return e[0]=r[0]*n+r[4]*i+r[8]*s+r[12],e[1]=r[1]*n+r[5]*i+r[9]*s+r[13],e[2]=r[2]*n+r[6]*i+r[10]*s+r[14],e}function cae(e,t,r){const n=t[0],i=t[1],s=t[2];return e[0]=n*r[0]+i*r[3]+s*r[6],e[1]=n*r[1]+i*r[4]+s*r[7],e[2]=n*r[2]+i*r[5]+s*r[8],e}function dae(e,t,r){const n=r[0],i=r[1],s=r[2],o=r[3],a=t[0],l=t[1],c=t[2];let h=i*c-s*l,f=s*a-n*c,m=n*l-i*a,y=i*m-s*f,g=s*h-n*m,v=n*f-i*h;const w=2*o;return h*=w,f*=w,m*=w,y*=2,g*=2,v*=2,e[0]=a+h+y,e[1]=l+f+g,e[2]=c+m+v,e}function hae(e,t,r,n){const i=[],s=[];return i[0]=t[0]-r[0],i[1]=t[1]-r[1],i[2]=t[2]-r[2],s[0]=i[0],s[1]=i[1]*Math.cos(n)-i[2]*Math.sin(n),s[2]=i[1]*Math.sin(n)+i[2]*Math.cos(n),e[0]=s[0]+r[0],e[1]=s[1]+r[1],e[2]=s[2]+r[2],e}function pae(e,t,r,n){const i=[],s=[];return i[0]=t[0]-r[0],i[1]=t[1]-r[1],i[2]=t[2]-r[2],s[0]=i[2]*Math.sin(n)+i[0]*Math.cos(n),s[1]=i[1],s[2]=i[2]*Math.cos(n)-i[0]*Math.sin(n),e[0]=s[0]+r[0],e[1]=s[1]+r[1],e[2]=s[2]+r[2],e}function fae(e,t,r,n){const i=[],s=[];return i[0]=t[0]-r[0],i[1]=t[1]-r[1],i[2]=t[2]-r[2],s[0]=i[0]*Math.cos(n)-i[1]*Math.sin(n),s[1]=i[0]*Math.sin(n)+i[1]*Math.cos(n),s[2]=i[2],e[0]=s[0]+r[0],e[1]=s[1]+r[1],e[2]=s[2]+r[2],e}function mae(e,t){IS(rw,e),IS(nw,t),CS(rw,rw),CS(nw,nw);const r=cU(rw,nw);return r>1?0:r<-1?Math.PI:Math.acos(r)}const rw=Yo(),nw=Yo();function yae(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"}function gae(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}function vae(e,t){if(e===t)return!0;const r=e[0],n=e[1],i=e[2],s=t[0],o=t[1],a=t[2],l=zs();return Math.abs(r-s)<=l*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(n-o)<=l*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(i-a)<=l*Math.max(1,Math.abs(i),Math.abs(a))}function wae(e,t,r){const n=r[0]-t[0],i=r[1]-t[1],s=r[2]-t[2];let o=n*n+i*i+s*s;return o>0?(o=1/Math.sqrt(o),e[0]=n*o,e[1]=i*o,e[2]=s*o,e):(e[0]=0,e[1]=0,e[2]=0,e)}const _ae=nR,bae=iU,Sae=sU,xae=aU,$ae=lU,Tae=d2,Eae=uU;Object.freeze(Object.defineProperty({__proto__:null,abs:Qoe,add:nU,angle:mae,bezier:aae,ceil:Zoe,copy:IS,cross:iae,direction:wae,dist:xae,distance:aU,div:Sae,divide:sU,dot:cU,equals:vae,exactEquals:gae,floor:Joe,hermite:oae,inverse:nae,len:Tae,length:d2,lerp:sae,max:Xoe,min:Koe,mul:bae,multiply:iU,negate:rae,normalize:CS,random:lae,rotateX:hae,rotateY:pae,rotateZ:fae,round:eae,scale:oU,scaleAndAdd:tae,set:h2,sign:Yoe,sqrDist:$ae,sqrLen:Eae,squaredDistance:lU,squaredLength:uU,str:yae,sub:_ae,subtract:nR,transformMat3:cae,transformMat4:uae,transformQuat:dae},Symbol.toStringTag,{value:"Module"}));function Mae(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function Iae(e,t,r,n,i){return e[0]=t,e[1]=r,e[2]=n,e[3]=i,e}function Cae(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e}function dU(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e}function hU(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e[2]=t[2]*r[2],e[3]=t[3]*r[3],e}function pU(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e[2]=t[2]/r[2],e[3]=t[3]/r[3],e}function kae(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e[3]=Math.ceil(t[3]),e}function Pae(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e[3]=Math.floor(t[3]),e}function Oae(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e[2]=Math.min(t[2],r[2]),e[3]=Math.min(t[3],r[3]),e}function Rae(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e[2]=Math.max(t[2],r[2]),e[3]=Math.max(t[3],r[3]),e}function Aae(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e[3]=Math.round(t[3]),e}function Lae(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e}function Nae(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e[2]=t[2]+r[2]*n,e[3]=t[3]+r[3]*n,e}function fU(e,t){const r=t[0]-e[0],n=t[1]-e[1],i=t[2]-e[2],s=t[3]-e[3];return Math.sqrt(r*r+n*n+i*i+s*s)}function mU(e,t){const r=t[0]-e[0],n=t[1]-e[1],i=t[2]-e[2],s=t[3]-e[3];return r*r+n*n+i*i+s*s}function yU(e){const t=e[0],r=e[1],n=e[2],i=e[3];return Math.sqrt(t*t+r*r+n*n+i*i)}function gU(e){const t=e[0],r=e[1],n=e[2],i=e[3];return t*t+r*r+n*n+i*i}function Dae(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e}function Fae(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e}function jae(e,t){const r=t[0],n=t[1],i=t[2],s=t[3];let o=r*r+n*n+i*i+s*s;return o>0&&(o=1/Math.sqrt(o),e[0]=r*o,e[1]=n*o,e[2]=i*o,e[3]=s*o),e}function Vae(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function vU(e,t,r,n){const i=t[0],s=t[1],o=t[2],a=t[3];return e[0]=i+n*(r[0]-i),e[1]=s+n*(r[1]-s),e[2]=o+n*(r[2]-o),e[3]=a+n*(r[3]-a),e}function zae(e,t){const r=c2;let n,i,s,o,a,l;t=t||1;do n=2*r()-1,i=2*r()-1,a=n*n+i*i;while(a>=1);do s=2*r()-1,o=2*r()-1,l=s*s+o*o;while(l>=1);const c=Math.sqrt((1-a)/l);return e[0]=t*n,e[1]=t*i,e[2]=t*s*c,e[3]=t*o*c,e}function Uae(e,t,r){const n=t[0],i=t[1],s=t[2],o=t[3];return e[0]=r[0]*n+r[4]*i+r[8]*s+r[12]*o,e[1]=r[1]*n+r[5]*i+r[9]*s+r[13]*o,e[2]=r[2]*n+r[6]*i+r[10]*s+r[14]*o,e[3]=r[3]*n+r[7]*i+r[11]*s+r[15]*o,e}function Gae(e,t,r){const n=t[0],i=t[1],s=t[2],o=r[0],a=r[1],l=r[2],c=r[3],h=c*n+a*s-l*i,f=c*i+l*n-o*s,m=c*s+o*i-a*n,y=-o*n-a*i-l*s;return e[0]=h*c+y*-o+f*-l-m*-a,e[1]=f*c+y*-a+m*-o-h*-l,e[2]=m*c+y*-l+h*-a-f*-o,e[3]=t[3],e}function Bae(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}function qae(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]}function Wae(e,t){const r=e[0],n=e[1],i=e[2],s=e[3],o=t[0],a=t[1],l=t[2],c=t[3],h=zs();return Math.abs(r-o)<=h*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(n-a)<=h*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(i-l)<=h*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(s-c)<=h*Math.max(1,Math.abs(s),Math.abs(c))}const Hae=dU,Zae=hU,Jae=pU,Qae=fU,Yae=mU,Kae=yU,Xae=gU;Object.freeze(Object.defineProperty({__proto__:null,add:Cae,ceil:kae,copy:Mae,dist:Qae,distance:fU,div:Jae,divide:pU,dot:Vae,equals:Wae,exactEquals:qae,floor:Pae,inverse:Fae,len:Kae,length:yU,lerp:vU,max:Rae,min:Oae,mul:Zae,multiply:hU,negate:Dae,normalize:jae,random:zae,round:Aae,scale:Lae,scaleAndAdd:Nae,set:Iae,sqrDist:Yae,sqrLen:Xae,squaredDistance:mU,squaredLength:gU,str:Bae,sub:Hae,subtract:dU,transformMat4:Uae,transformQuat:Gae},Symbol.toStringTag,{value:"Module"}));const RN=new Float32Array(1);function ACe(e){--e;for(let t=1;t<32;t<<=1)e|=e>>t;return e+1}function Yi(e,t,r){return Math.min(Math.max(e,t),r)}function LCe(e){return(e&e-1)==0}function NCe(e){return e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,++e}function DCe(e,t,r){return e+(t-e)*r}function ele(e){return e*Math.PI/180}function wU(e){return 180*e/Math.PI}function FCe(e){return Math.acos(Yi(e,-1,1))}function _U(e){return Math.asin(Yi(e,-1,1))}function z$(e,t,r=1e-6){return e===t?!0:!Number.isFinite(e)||!Number.isFinite(t)?!1:(e>t?e-t:t-e)<=r}const kS=new DataView(new ArrayBuffer(Float64Array.BYTES_PER_ELEMENT));function tle(e){return kS.setFloat64(0,e),kS.getBigInt64(0)}function rle(e){return kS.setBigInt64(0,e),kS.getFloat64(0)}const U$=BigInt("1000000");nle(1);function nle(e){const t=tle(e=Math.abs(e)),r=rle(t<=U$?U$:t-U$);return Math.abs(e-r)}function jCe(e){return bU(Math.max(-AN,Math.min(e,AN)))}function bU(e){return RN[0]=e,RN[0]}function VCe(e,t){const r=d2(e),n=_U(e[2]/r),i=Math.atan2(e[1]/r,e[0]/r);return h2(t,r,n,i),t}function zCe(e){const t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[3]*e[3]+e[4]*e[4]+e[5]*e[5],n=e[6]*e[6]+e[7]*e[7]+e[8]*e[8];return!(z$(t,1)&&z$(r,1)&&z$(n,1))}const AN=bU(34028234663852886e22);function iw(e){return Yi(r2(e),0,255)}function sw(e,t,r){return e=Number(e),isNaN(e)?r:e<t?t:e>r?r:e}let S_=class mn{static blendColors(t,r,n,i=new mn){return i.r=Math.round(t.r+(r.r-t.r)*n),i.g=Math.round(t.g+(r.g-t.g)*n),i.b=Math.round(t.b+(r.b-t.b)*n),i.a=t.a+(r.a-t.a)*n,i._sanitize()}static fromRgb(t,r){const n=t.toLowerCase().match(/^(rgba?|hsla?)\(([\s\.\-,%0-9]+)\)/);if(n){const i=n[2].split(/\s*,\s*/),s=n[1];if(s==="rgb"&&i.length===3||s==="rgba"&&i.length===4){const o=i[0];if(o.charAt(o.length-1)==="%"){const a=i.map(l=>2.56*parseFloat(l));return i.length===4&&(a[3]=parseFloat(i[3])),mn.fromArray(a,r)}return mn.fromArray(i.map(a=>parseFloat(a)),r)}if(s==="hsl"&&i.length===3||s==="hsla"&&i.length===4)return mn.fromArray(Yz(parseFloat(i[0]),parseFloat(i[1])/100,parseFloat(i[2])/100,parseFloat(i[3])),r)}return null}static fromHex(t,r=new mn){if(t.length!==4&&t.length!==7||t[0]!=="#")return null;const n=t.length===4?4:8,i=(1<<n)-1;let s=+("0x"+t.substr(1));return isNaN(s)?null:(["b","g","r"].forEach(o=>{const a=s&i;s>>=n,r[o]=n===4?17*a:a}),r.a=1,r)}static fromArray(t,r=new mn){return r._set(Number(t[0]),Number(t[1]),Number(t[2]),Number(t[3])),isNaN(r.a)&&(r.a=1),r._sanitize()}static fromString(t,r){const n=Qz(t)?eR(t):null;return n&&mn.fromArray(n,r)||mn.fromRgb(t,r)||mn.fromHex(t,r)}static fromJSON(t){return t&&new mn([t[0],t[1],t[2],t[3]/255])}static toUnitRGB(t){return t!=null?[t.r/255,t.g/255,t.b/255]:null}static toUnitRGBA(t){return t!=null?[t.r/255,t.g/255,t.b/255,t.a!=null?t.a:1]:null}constructor(t){this.r=255,this.g=255,this.b=255,this.a=1,t&&this.setColor(t)}get isBright(){return .299*this.r+.587*this.g+.114*this.b>=127}setColor(t){return typeof t=="string"?mn.fromString(t,this):Array.isArray(t)?mn.fromArray(t,this):(this._set(t.r??0,t.g??0,t.b??0,t.a??1),t instanceof mn||this._sanitize()),this}toRgb(){return[this.r,this.g,this.b]}toRgba(){return[this.r,this.g,this.b,this.a]}toHex(){const t=this.r.toString(16),r=this.g.toString(16),n=this.b.toString(16);return`#${t.length<2?"0"+t:t}${r.length<2?"0"+r:r}${n.length<2?"0"+n:n}`}toCss(t=!1){const r=this.r+", "+this.g+", "+this.b;return t?`rgba(${r}, ${this.a})`:`rgb(${r})`}toString(){return this.toCss(!0)}toJSON(){return this.toArray()}toArray(t=mn.AlphaMode.ALWAYS){const r=iw(this.r),n=iw(this.g),i=iw(this.b);return t===mn.AlphaMode.ALWAYS||this.a!==1?[r,n,i,iw(255*this.a)]:[r,n,i]}clone(){return new mn(this.toRgba())}hash(){return this.r<<24|this.g<<16|this.b<<8|255*this.a}equals(t){return t!=null&&t.r===this.r&&t.g===this.g&&t.b===this.b&&t.a===this.a}_sanitize(){return this.r=Math.round(sw(this.r,0,255)),this.g=Math.round(sw(this.g,0,255)),this.b=Math.round(sw(this.b,0,255)),this.a=sw(this.a,0,1),this}_set(t,r,n,i){this.r=t,this.g=r,this.b=n,this.a=i}};S_.prototype.declaredClass="esri.Color",function(e){var t;(t=e.AlphaMode||(e.AlphaMode={}))[t.ALWAYS=0]="ALWAYS",t[t.UNLESS_OPAQUE=1]="UNLESS_OPAQUE"}(S_||(S_={}));const We=S_;function UCe(e){}function ile(e){return()=>e}function Me(e,t={}){const r=e instanceof xt?e:new xt(e,t),n={type:(t==null?void 0:t.ignoreUnknown)??1?r.apiValues:String,json:{type:r.jsonValues,read:!(t!=null&&t.readOnly)&&{reader:r.read},write:{writer:r.write}}};return(t==null?void 0:t.readOnly)!==void 0&&(n.readOnly=!!t.readOnly),(t==null?void 0:t.default)!==void 0&&(n.json.default=t.default),(t==null?void 0:t.name)!==void 0&&(n.json.name=t.name),(t==null?void 0:t.nonNullable)!==void 0&&(n.nonNullable=t.nonNullable),d(n)}var zM;let x_=zM=class extends Q{constructor(e){super(e),this.type="none"}clone(){return new zM({type:this.type})}};u([Me({none:"none",stayAbove:"stay-above"})],x_.prototype,"type",void 0),x_=zM=u([E("esri.ground.NavigationConstraint")],x_);function iR(e){const t=r2(100*(1-e));return Math.max(0,Math.min(t,100))}function fv(e){const t=1-e/100;return Math.max(0,Math.min(t,1))}var UM;let al=UM=class extends Yv(Ql){constructor(e){super(e),this.opacity=1,this.surfaceColor=null,this.navigationConstraint=null,this.layers=new Le;const t=n=>{n.parent&&n.parent!==this&&"remove"in n.parent&&n.parent.remove(n),n.parent=this,n.type!=="elevation"&&n.type!=="base-elevation"&&Z.getLogger(this).error(`Layer '${n.title}, id:${n.id}' of type '${n.type}' is not supported as a ground layer and will therefore be ignored. Only layers of type 'elevation' are supported.`)},r=n=>{n.parent=null};this.addHandles([this.layers.on("after-add",n=>t(n.item)),this.layers.on("after-remove",n=>r(n.item))])}initialize(){this.when().catch(e=>{Ei(e)||Z.getLogger(this).error("#load()","Failed to load ground",e)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){const e=this.layers.removeAll();for(const t of e)t.destroy();this.layers.destroy()}normalizeCtorArgs(e){return e&&"resourceInfo"in e&&(this._set("resourceInfo",e.resourceInfo),delete(e={...e}).resourceInfo),e}set layers(e){this._set("layers",tp(e,this._get("layers")))}writeLayers(e,t,r,n){const i=[];e&&(n={...n,layerContainerType:"ground"},e.forEach(s=>{if("write"in s){const o={};ile(s)().write(o,n)&&i.push(o)}else n&&n.messages&&n.messages.push(new N("layer:unsupported",`Layers (${s.title}, ${s.id}) of type '${s.declaredClass}' cannot be persisted in the ground`,{layer:s}))})),t.layers=i}load(e){return this.addResolvingPromise(this._loadFromSource(e)),Promise.resolve(this)}loadAll(){return OO(this,e=>{e(this.layers)})}async queryElevation(e,t){await this.load({signal:t==null?void 0:t.signal});const{ElevationQuery:r}=await ie(()=>import("./ElevationQuery-7f72259d.js"),[]);qt(t);const n=new r,i=this.layers.filter(LN).toArray();return n.queryAll(i,e,t)}async createElevationSampler(e,t){await this.load({signal:t==null?void 0:t.signal});const{ElevationQuery:r}=await ie(()=>import("./ElevationQuery-7f72259d.js"),[]);qt(t);const n=new r,i=this.layers.filter(LN).toArray();return n.createSamplerAll(i,e,t)}clone(){const e={opacity:this.opacity,surfaceColor:F(this.surfaceColor),navigationConstraint:F(this.navigationConstraint),layers:this.layers.slice()};return this.loaded&&(e.loadStatus="loaded"),new UM({resourceInfo:this.resourceInfo}).set(e)}read(e,t){this.resourceInfo||this._set("resourceInfo",{data:e,context:t}),super.read(e,t)}_loadFromSource(e){const t=this.resourceInfo;return t?this._loadLayersFromJSON(t.data,t.context,e):Promise.resolve()}_loadLayersFromJSON(e,t,r){const n=t&&t.origin||"web-scene",i=t&&t.portal||null,s=t&&t.url||null;return ie(()=>import("./layersCreator-ac87ab9e.js"),["assets/layersCreator-ac87ab9e.js","assets/lazyLayerLoader-a860f64c.js","assets/portalLayers-35fcc643.js","assets/layersLoader-48793f5f.js","assets/fetchService-363fc0b0.js","assets/jsonContext-76163bf5.js","assets/styleUtils-b6b6277d.js"]).then(({populateOperationalLayers:o})=>{qt(r);const a=[];if(e.layers&&Array.isArray(e.layers)){const l={context:{origin:n,url:s,portal:i,layerContainerType:"ground"},defaultLayerType:"ArcGISTiledElevationServiceLayer"};a.push(o(this.layers,e.layers,l))}return Mo(a)}).then(()=>{})}};function sle(e){return e&&"createElevationSampler"in e}function LN(e){return e.type==="elevation"||sle(e)}u([d({json:{read:!1}})],al.prototype,"layers",null),u([pe("layers")],al.prototype,"writeLayers",null),u([d({readOnly:!0})],al.prototype,"resourceInfo",void 0),u([d({type:Number,nonNullable:!0,range:{min:0,max:1},json:{type:bt,read:{reader:fv,source:"transparency"},write:{writer:(e,t)=>{t.transparency=iR(e)},target:"transparency"}}})],al.prototype,"opacity",void 0),u([d({type:We,json:{type:[bt],write:(e,t)=>{t.surfaceColor=e.toJSON().slice(0,3)}}})],al.prototype,"surfaceColor",void 0),u([d({type:x_,json:{write:!0}})],al.prototype,"navigationConstraint",void 0),al=UM=u([E("esri.Ground")],al);const PS=al;let Up=class extends Le{constructor(t){super(t),this.getCollections=null}initialize(){this.own(DV(()=>this._refresh()))}destroy(){this.getCollections=null}_refresh(){const t=this.getCollections!=null?this.getCollections():null;if(t==null)return void this.removeAll();let r=0;for(const n of t)n!=null&&(r=this._processCollection(r,n));this.splice(r,this.length)}_createNewInstance(t){return new Le(t)}_processCollection(t,r){if(!r)return t;const n=this.itemFilterFunction??(i=>!!i);for(const i of r)if(i){if(n(i)){const s=this.indexOf(i,t);s>=0?s!==t&&this.reorder(i,t):this.add(i,t),++t}if(this.getChildrenFunction){const s=this.getChildrenFunction(i);if(Array.isArray(s))for(const o of s)t=this._processCollection(t,o);else t=this._processCollection(t,s)}}return t}};u([d()],Up.prototype,"getCollections",void 0),u([d()],Up.prototype,"getChildrenFunction",void 0),u([d()],Up.prototype,"itemFilterFunction",void 0),Up=u([E("esri.core.CollectionFlattener")],Up);const Mm=Up,ole=[["binary","application/octet-stream","bin",""]];function GM(e,t){return oR(lle(e,t))}function BM(e,t){return oR(ule(e,t))}function BCe(e,t){return SU(ale(e,t))}function sR(e){return[...ole,...e]}function ale(e,t){return sR(t).find(r=>oR(r)===e)}function lle(e,t){return sR(t).find(r=>SU(r)===e)}function ule(e,t){const r=e.toLowerCase();return sR(t).find(n=>cle(n).some(i=>r.endsWith(i)))}function oR(e){return e==null?void 0:e[0]}function SU(e){return e==null?void 0:e[1]}function cle(e){return(e==null?void 0:e[2].split(","))??[]}function qCe(e){var t;return(t=e.tables)==null?void 0:t.find(r=>r.role==="assetMaps")}function dle(e){var t,r;return!(!(e&&typeof e=="object"&&"loaded"in e&&e.loaded&&((r=(t=_oe(e))==null?void 0:t.operations)!=null&&r.supportsEditing)&&"type"in e)||"editingEnabled"in e&&!Soe(e)||e.type==="scene"&&!hle(e))}function hle(e){const t=e.infoFor3D;if(!t)return!0;const{supportedFormats:r,queryFormats:n}=t,i=GM("model/gltf-binary",r)??BM("glb",r);return i!=null&&n.includes(i)}const NN=Z.getLogger("esri.support.basemapUtils");function ple(){return{}}function fle(e){for(const t in e){const r=e[t];(r==null?void 0:r.destroyed)===!1&&r.destroy(),delete e[t]}}function mle(e,t){let r;if(typeof e=="string"){if(!(e in VM)){const n=Object.entries(VM).filter(([i,s])=>ot.apiKey&&!s.classic||!ot.apiKey&&s.classic&&!s.deprecated).map(([i])=>`"${i}"`).join(", ");return NN.warn(`Unable to find basemap definition for: ${e}. Try one of these: ${n}`),null}t&&(r=t[e]),r||(r=ES.fromId(e),t&&(t[e]=r))}else r=gr(ES,e);return r!=null&&r.destroyed&&(NN.warn("The provided basemap is already destroyed",{basemap:r}),r=null),r}function yle(e){return new Mm({getCollections:()=>[e.tables,e.layers],getChildrenFunction:t=>{const r=[];return"tables"in t&&r.push(t.tables),"layers"in t&&r.push(t.layers),r},itemFilterFunction:t=>{const r=t.parent;return!!r&&"tables"in r&&r.tables.includes(t)}})}function G$(e){for(const t of e.values())t==null||t.destroy();e.clear()}const DN={"world-elevation":{id:"worldElevation",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"},"world-topobathymetry":{id:"worldTopoBathymetry",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/TopoBathy3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"}};function gle(e){let t=null;if(typeof e=="string")if(e in DN){const r=DN[e];t=new PS({resourceInfo:{data:{layers:[r]}}})}else Z.getLogger("esri.support.groundUtils").warn(`Unable to find ground definition for: ${e}. Try "world-elevation"`);else t=gr(PS,e);return t}function Im(e,t,r=!1){let{hasM:n,hasZ:i}=e;Array.isArray(t)?t.length!==4||n||i?t.length===3&&r&&!n?(i=!0,n=!1):t.length===3&&n&&i&&(n=!1,i=!1):(n=!0,i=!0):(i=!i&&t.hasZ&&(!n||t.hasM),n=!n&&t.hasM&&(!i||t.hasZ)),e.hasZ=i,e.hasM=n}var qM;function FN(e){return(t,r)=>t==null?r:r==null?t:e(t,r)}function vle(e){return e&&(e.declaredClass==="esri.geometry.SpatialReference"||e.wkid!=null)}let Lu=qM=class extends cd{constructor(...e){super(...e),this.points=[],this.type="multipoint"}normalizeCtorArgs(e,t){if(!e&&!t)return{};const r={};Array.isArray(e)?(r.points=e,r.spatialReference=t):vle(e)?r.spatialReference=e:(e.points&&(r.points=e.points),e.spatialReference&&(r.spatialReference=e.spatialReference),e.hasZ&&(r.hasZ=e.hasZ),e.hasM&&(r.hasM=e.hasM));const n=r.points&&r.points[0];return n&&(r.hasZ===void 0&&r.hasM===void 0?(r.hasZ=n.length>2,r.hasM=!1):r.hasZ===void 0?r.hasZ=n.length>3:r.hasM===void 0&&(r.hasM=n.length>3)),r}get cache(){return this.commitProperty("points"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const e=this.points;if(!e.length)return null;const t=new at,r=this.hasZ,n=this.hasM,i=r?3:2,s=e[0],o=FN(Math.min),a=FN(Math.max);let l,c,h,f,[m,y]=s,[g,v]=s;for(let w=0,b=e.length;w<b;w++){const S=e[w],[_,x]=S;if(m=o(m,_),y=o(y,x),g=a(g,_),v=a(v,x),r&&S.length>2){const T=S[2];l=o(l,T),h=a(h,T)}if(n&&S.length>i){const T=S[i];c=o(c,T),f=a(f,T)}}return t.xmin=m,t.ymin=y,t.xmax=g,t.ymax=v,t.spatialReference=this.spatialReference,r?(t.zmin=l,t.zmax=h):(t.zmin=void 0,t.zmax=void 0),n?(t.mmin=c,t.mmax=f):(t.mmin=void 0,t.mmax=void 0),t}writePoints(e,t){t.points=F(this.points)}addPoint(e){return Im(this,e),Array.isArray(e)?this.points.push(e):this.points.push(e.toArray()),this.notifyChange("points"),this}clone(){const e={points:F(this.points),spatialReference:this.spatialReference};return this.hasZ&&(e.hasZ=!0),this.hasM&&(e.hasM=!0),new qM(e)}getPoint(e){if(!this._validateInputs(e))return null;const t=this.points[e],r={x:t[0],y:t[1],spatialReference:this.spatialReference};let n=2;return this.hasZ&&(r.z=t[2],n=3),this.hasM&&(r.m=t[n]),new be(r)}removePoint(e){if(!this._validateInputs(e))return null;const t=new be(this.points.splice(e,1)[0],this.spatialReference);return this.notifyChange("points"),t}setPoint(e,t){return this._validateInputs(e)?(Im(this,t),Array.isArray(t)||(t=t.toArray()),this.points[e]=t,this.notifyChange("points"),this):this}toJSON(e){return this.write({},e)}_validateInputs(e){return e!=null&&e>=0&&e<this.points.length}};u([d({readOnly:!0})],Lu.prototype,"cache",null),u([d()],Lu.prototype,"extent",null),u([d({type:[[Number]],json:{write:{isRequired:!0}}})],Lu.prototype,"points",void 0),u([pe("points")],Lu.prototype,"writePoints",null),Lu=qM=u([E("esri.geometry.Multipoint")],Lu),Lu.prototype.toJSON.isDefaultToJSON=!0;const p2=Lu;function WCe(e){const t=[];for(e.reset();e.nextPath();){const r=[];for(;e.nextPoint();)r.push([e.x,e.y]);t.push(r)}return e.reset(),t}function wle(e){const t=[];for(;e.nextPoint();)t.push([e.x,e.y]);return e.seekPathStart(),t}function xU(e,t){const r=t[0]-e[0],n=t[1]-e[1];if(e.length>2&&t.length>2){const i=e[2]-t[2];return Math.sqrt(r*r+n*n+i*i)}return Math.sqrt(r*r+n*n)}function _le(e,t,r){const n=e[0]+r*(t[0]-e[0]),i=e[1]+r*(t[1]-e[1]);return e.length>2&&t.length>2?[n,i,e[2]+r*(t[2]-e[2])]:[n,i]}function ble(e,t,r,n){const[i,s]=t,[o,a]=r[n],[l,c]=r[n+1],h=l-o,f=c-a,m=h*h+f*f,y=(i-o)*h+(s-a)*f,g=Math.min(1,Math.max(0,y/m));return e[0]=o+h*g,e[1]=a+f*g,e}function HCe(e,t,r){let n,i,s,o,a=!1,l=1/0;for(r.reset();r.nextPath();)if(r.nextPoint())for(n=r.x,i=r.y;r.nextPoint();)s=r.x,o=r.y,i>t!=o>t&&e<(s-n)*(t-i)/(o-i)+n&&(a=!a),l=Math.min(l,Sle(e,t,n,i,s,o)),n=s,i=o;return l===0?0:(a?1:-1)*Math.sqrt(l)}function Sle(e,t,r,n,i,s){let o=r,a=n,l=i-o,c=s-a;if(l!==0||c!==0){const h=((e-o)*l+(t-a)*c)/(l*l+c*c);h>1?(o=i,a=s):h>0&&(o+=l*h,a+=c*h)}return l=e-o,c=t-a,l*l+c*c}function $U(e,t){return _le(e,t,.5)}function TU(e,t,r){const n=e.length;let i=0,s=0,o=0;for(let a=0;a<n;a++){const l=e[a],c=e[(a+1)%n];let h=2;i+=l[0]*c[1]-c[0]*l[1],l.length>2&&c.length>2&&r&&(s+=l[0]*c[2]-c[0]*l[2],h=3),l.length>h&&c.length>h&&t&&(o+=l[0]*c[h]-c[0]*l[h])}return i<=0&&s<=0&&o<=0}function xle(e){const t=e.length;return t>2&&Wx(e[0],e[t-1])}function ZCe(e){if("rings"in e&&($le(e),e.rings.length>0&&!TU(e.rings[0],e.hasM??!1,e.hasZ??!1)))for(const t of e.rings)t.reverse()}function $le(e){if("rings"in e)for(const t of e.rings)xle(t)||t.push(t[0].slice())}function JCe(e){if(!e||e.length<3)return 0;let t=0;const r=e.length-1;for(let n=0;n<r;n++)t+=(e[n][0]-e[n+1][0])*(e[n][1]+e[n+1][1]);return t+=(e[r][0]-e[0][0])*(e[r][1]+e[0][1]),-.5*t}function EU(e){if(!e||e.numPoints<3)return 0;let t,r,n=0;if(e.seekPathStart(),!e.nextPoint())return 0;t=e.x,r=e.y;const i=t,s=r;for(;e.nextPoint();)n+=(t-e.x)*(r+e.y),t=e.x,r=e.y;return n+=(t-i)*(r+s),-.5*n}function QCe(e){return e?e.hasZ?[e.xmax-e.xmin/2,e.ymax-e.ymin/2,e.zmax-e.zmin/2]:[e.xmax-e.xmin/2,e.ymax-e.ymin/2]:null}function Tle(e){return e?Ele(e.rings,e.hasZ??!1):null}function Ele(e,t){if(!e||!e.length)return null;const r=[],n=[],i=t?[1/0,-1/0,1/0,-1/0,1/0,-1/0]:[1/0,-1/0,1/0,-1/0];for(let s=0,o=e.length;s<o;s++){const a=MU(e[s],t,i);a&&n.push(a)}if(n.sort((s,o)=>{let a=s[2]-o[2];return a===0&&t&&(a=s[4]-o[4]),a}),n.length&&(r[0]=n[0][0],r[1]=n[0][1],t&&(r[2]=n[0][3]),(r[0]<i[0]||r[0]>i[1]||r[1]<i[2]||r[1]>i[3]||t&&(r[2]<i[4]||r[2]>i[5]))&&(r.length=0)),!r.length){const s=e[0]&&e[0].length?Mle(e[0],t):null;if(!s)return null;r[0]=s[0],r[1]=s[1],t&&s.length>2&&(r[2]=s[2])}return r}function MU(e,t,r){let n=0,i=0,s=0,o=0,a=0;const l=e.length?e[0][0]:0,c=e.length?e[0][1]:0,h=e.length&&t?e[0][2]:0;for(let m=0;m<e.length;m++){const y=e[m],g=e[(m+1)%e.length],[v,w,b]=y,S=v-l,_=w-c,[x,T,I]=g,C=x-l,O=T-c,W=S*O-C*_;if(o+=W,n+=(S+C)*W,i+=(_+O)*W,t&&y.length>2&&g.length>2){const z=b-h,ne=I-h,K=S*ne-C*z;s+=(z+ne)*K,a+=K}v<r[0]&&(r[0]=v),v>r[1]&&(r[1]=v),w<r[2]&&(r[2]=w),w>r[3]&&(r[3]=w),t&&(b<r[4]&&(r[4]=b),b>r[5]&&(r[5]=b))}if(o>0&&(o*=-1),a>0&&(a*=-1),!o)return null;o*=.5,a*=.5;const f=[n/(6*o)+l,i/(6*o)+c,o];return t&&(r[4]===r[5]||a===0?(f[3]=(r[4]+r[5])/2,f[4]=0):(f[3]=s/(6*a)+h,f[4]=a)),f}function Mle(e,t){const r=t?[0,0,0]:[0,0],n=t?[0,0,0]:[0,0];let i=0,s=0,o=0,a=0;for(let l=0,c=e.length;l<c-1;l++){const h=e[l],f=e[l+1];if(h&&f){r[0]=h[0],r[1]=h[1],n[0]=f[0],n[1]=f[1],t&&h.length>2&&f.length>2&&(r[2]=h[2],n[2]=f[2]);const m=xU(r,n);if(m){i+=m;const y=$U(h,f);s+=m*y[0],o+=m*y[1],t&&y.length>2&&(a+=m*y[2])}}}return i>0?t?[s/i,o/i,a/i]:[s/i,o/i]:e.length?e[0]:null}function Ile(e){const{hasZ:t,numPaths:r}=e;if(r===0)return null;const n=[],i=[],s=t?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY];for(e.reset();e.nextPath();){const o=MU(wle(e),e.hasZ,s);o&&i.push(o)}if(i.sort((o,a)=>{let l=o[2]-a[2];return l===0&&t&&(l=o[4]-a[4]),l}),i.length&&(n[0]=i[0][0],n[1]=i[0][1],t&&(n[2]=i[0][3]),(n[0]<s[0]||n[0]>s[1]||n[1]<s[2]||n[1]>s[3]||t&&(n[2]<s[4]||n[2]>s[5]))&&(n.length=0)),!n.length){e.reset(),e.nextPath();const o=e.numPoints?Cle(e):null;if(!o)return null;n[0]=o[0],n[1]=o[1],t&&o.length>2&&(n[2]=o[2])}return n}function Cle(e){const{hasZ:t}=e,r=t?[0,0,0]:[0,0],n=t?[0,0,0]:[0,0];let i=0,s=0,o=0,a=0;if(e.nextPoint()){let l=e.x,c=e.y,h=e.z;for(;e.nextPoint();){const f=e.x,m=e.y,y=e.z;r[0]=l,r[1]=c,n[0]=f,n[1]=m,t&&(r[2]=h,n[2]=y);const g=xU(r,n);if(g){i+=g;const v=$U(r,n);s+=g*v[0],o+=g*v[1],t&&v.length>2&&(a+=g*v[2])}l=f,c=m,h=y}}return i>0?t?[s/i,o/i,a/i]:[s/i,o/i]:e.numPoints?(e.seekPathStart(),e.nextPoint(),[e.x,e.y]):null}const kle=1e-6;function YCe(e){let t=0;for(e.reset();e.nextPath();)t+=EU(e);if(t<kle){const i=Ile(e);return i?[i[0],i[1]]:null}const r=[0,0];if(e.reset(),!e.nextPath()||!e.nextPoint())return null;const n=[e.x,e.y];for(e.reset();e.nextPath();)Ole(r,n,e);return r[0]*=1/t,r[1]*=1/t,r[0]+=n[0],r[1]+=n[1],r}const Ple=1/3;function Ole(e,t,r){if(!e||!r||r.numPoints<3)return null;r.nextPoint();const n=r.x,i=r.y;r.nextPoint();let s,o=r.x-n,a=r.y-i,l=0,c=0;for(;r.nextPoint();)l=r.x-n,c=r.y-i,s=.5*Ple*(l*a-c*o),e[0]+=s*(o+l),e[1]+=s*(a+c),o=l,a=c;const h=EU(r),f=[n,i];return f[0]-=t[0],f[1]-=t[1],f[0]*=h,f[1]*=h,e[0]+=f[0],e[1]+=f[1],e}function Da(e=Dle){return[e[0],e[1],e[2],e[3]]}function KCe(e){return[e[0],e[1],e[2],e[3]]}function aR(e,t){return e!==t&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3]),e}function Rle(e,t,r,n,i=Da()){return i[0]=e,i[1]=t,i[2]=r,i[3]=n,i}function XCe(e,t=Da()){return t[0]=e.xmin,t[1]=e.ymin,t[2]=e.xmax,t[3]=e.ymax,t}function eke(e,t){return new at({xmin:e[0],ymin:e[1],xmax:e[2],ymax:e[3],spatialReference:t})}function tke(e,t){t[0]<e[0]&&(e[0]=t[0]),t[0]>e[2]&&(e[2]=t[0]),t[1]<e[1]&&(e[1]=t[1]),t[1]>e[3]&&(e[3]=t[1])}function rke(e,t,r){if(t!=null)if("length"in t)WM(t)?(r[0]=Math.min(e[0],t[0]),r[1]=Math.min(e[1],t[1]),r[2]=Math.max(e[2],t[2]),r[3]=Math.max(e[3],t[3])):t.length!==2&&t.length!==3||(r[0]=Math.min(e[0],t[0]),r[1]=Math.min(e[1],t[1]),r[2]=Math.max(e[2],t[0]),r[3]=Math.max(e[3],t[1]));else switch(t.type){case"extent":r[0]=Math.min(e[0],t.xmin),r[1]=Math.min(e[1],t.ymin),r[2]=Math.max(e[2],t.xmax),r[3]=Math.max(e[3],t.ymax);break;case"point":r[0]=Math.min(e[0],t.x),r[1]=Math.min(e[1],t.y),r[2]=Math.max(e[2],t.x),r[3]=Math.max(e[3],t.y)}else aR(r,e)}function Ale(e){return e==null||e[0]>=e[2]?0:e[2]-e[0]}function Lle(e){return e[1]>=e[3]?0:e[3]-e[1]}function nke(e){return Ale(e)*Lle(e)}function ike(e,t,r){return t>=e[0]&&r>=e[1]&&t<=e[2]&&r<=e[3]}function ske(e,t,r){return t[0]>=e[0]-r&&t[1]>=e[1]-r&&t[0]<=e[2]+r&&t[1]<=e[3]+r}function oke(e,t){return Math.max(t[0],e[0])<=Math.min(t[2],e[2])&&Math.max(t[1],e[1])<=Math.min(t[3],e[3])}function Nle(e,t){return t[0]>=e[0]&&t[2]<=e[2]&&t[1]>=e[1]&&t[3]<=e[3]}function ake(e){return e?aR(e,jN):Da(jN)}function WM(e){return e!=null&&e.length===4}function lke(e,t){return WM(e)&&WM(t)?e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]:e===t}const jN=[1/0,1/0,-1/0,-1/0],Dle=[0,0,0,0];function IU(e){return e.xmin!==void 0&&e.ymin!==void 0&&e.xmax!==void 0&&e.ymax!==void 0}function CU(e){return e.points!==void 0}function kU(e){return e.x!==void 0&&e.y!==void 0}function PU(e){return e.paths!==void 0}function OU(e){return e.rings!==void 0}function RU(e){function t(r,n){return r==null?n:n==null?r:e(r,n)}return t}const Ec=RU(Math.min),Mc=RU(Math.max);function uke(e,t){return PU(t)?Cm(e,t.paths,!1,!1):OU(t)?Cm(e,t.rings,!1,!1):CU(t)?lR(e,t.points,!1,!1,!1,!1):IU(t)?AU(e,t):(kU(t)&&(e[0]=t.x,e[1]=t.y,e[2]=t.x,e[3]=t.y),e)}function cke(e){let t,r,n,i;for(e.reset(),t=n=1/0,r=i=-1/0;e.nextPath();){const s=Fle(e);t=Math.min(s[0],t),n=Math.min(s[1],n),r=Math.max(s[2],r),i=Math.max(s[3],i)}return Da([t,n,r,i])}function Fle(e){let t,r,n,i;for(t=n=1/0,r=i=-1/0;e.nextPoint();)t=Math.min(e.x,t),n=Math.min(e.y,n),r=Math.max(e.x,r),i=Math.max(e.y,i);return Da([t,n,r,i])}function dke(e,t){return PU(t)?Cm(e,t.paths,!0,!1):OU(t)?Cm(e,t.rings,!0,!1):CU(t)?lR(e,t.points,!0,!1,!0,!1):IU(t)?AU(e,t,!0,!1,!0,!1):(kU(t)&&(e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.x,e[4]=t.y,e[5]=t.z),e)}function Cm(e,t,r,n){const i=r?3:2;if(!t.length||!t[0].length)return null;let s,o,a,l,[c,h]=t[0][0],[f,m]=t[0][0];for(let y=0;y<t.length;y++){const g=t[y];for(let v=0;v<g.length;v++){const w=g[v],[b,S]=w;if(c=Ec(c,b),h=Ec(h,S),f=Mc(f,b),m=Mc(m,S),r&&w.length>2){const _=w[2];s=Ec(s,_),o=Mc(o,_)}if(n&&w.length>i){const _=w[i];a=Ec(s,_),l=Mc(o,_)}}}return r?n?(e[0]=c,e[1]=h,e[2]=s,e[3]=a,e[4]=f,e[5]=m,e[6]=o,e[7]=l,e.length=8,e):(e[0]=c,e[1]=h,e[2]=s,e[3]=f,e[4]=m,e[5]=o,e.length=6,e):n?(e[0]=c,e[1]=h,e[2]=a,e[3]=f,e[4]=m,e[5]=l,e.length=6,e):(e[0]=c,e[1]=h,e[2]=f,e[3]=m,e.length=4,e)}function AU(e,t,r,n,i,s){const o=t.xmin,a=t.xmax,l=t.ymin,c=t.ymax;let h=t.zmin,f=t.zmax,m=t.mmin,y=t.mmax;return i?(h=h||0,f=f||0,s?(m=m||0,y=y||0,e[0]=o,e[1]=l,e[2]=h,e[3]=m,e[4]=a,e[5]=c,e[6]=f,e[7]=y,e):(e[0]=o,e[1]=l,e[2]=h,e[3]=a,e[4]=c,e[5]=f,e)):s?(m=m||0,y=y||0,e[0]=o,e[1]=l,e[2]=m,e[3]=a,e[4]=c,e[5]=y,e):(e[0]=o,e[1]=l,e[2]=a,e[3]=c,e)}function lR(e,t,r,n,i,s){const o=r?3:2,a=n&&s,l=r&&i;if(!t.length||!t[0].length)return null;let c,h,f,m,[y,g]=t[0],[v,w]=t[0];for(let b=0;b<t.length;b++){const S=t[b],[_,x]=S;if(y=Ec(y,_),g=Ec(g,x),v=Mc(v,_),w=Mc(w,x),l&&S.length>2){const T=S[2];c=Ec(c,T),h=Mc(h,T)}if(a&&S.length>o){const T=S[o];f=Ec(c,T),m=Mc(h,T)}}return i?(c=c||0,h=h||0,s?(f=f||0,m=m||0,e[0]=y,e[1]=g,e[2]=c,e[3]=f,e[4]=v,e[5]=w,e[6]=h,e[7]=m,e):(e[0]=y,e[1]=g,e[2]=c,e[3]=v,e[4]=w,e[5]=h,e)):s?(f=f||0,m=m||0,e[0]=y,e[1]=g,e[2]=f,e[3]=v,e[4]=w,e[5]=m,e):(e[0]=y,e[1]=g,e[2]=v,e[3]=w,e)}function jle(e){return e.xmin!==void 0&&e.ymin!==void 0&&e.xmax!==void 0&&e.ymax!==void 0}function Vle(e){return e.points!==void 0}function zle(e){return e.x!==void 0&&e.y!==void 0}function Ule(e){return e.paths!==void 0}function Gle(e){return e.rings!==void 0}const uR=[];function LU(e,t,r,n){return{xmin:e,ymin:t,xmax:r,ymax:n}}function NU(e,t,r,n,i,s){return{xmin:e,ymin:t,zmin:r,xmax:n,ymax:i,zmax:s}}function DU(e,t,r,n,i,s){return{xmin:e,ymin:t,mmin:r,xmax:n,ymax:i,mmax:s}}function FU(e,t,r,n,i,s,o,a){return{xmin:e,ymin:t,zmin:r,mmin:n,xmax:i,ymax:s,zmax:o,mmax:a}}function cR(e,t=!1,r=!1){return t?r?FU(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]):NU(e[0],e[1],e[2],e[3],e[4],e[5]):r?DU(e[0],e[1],e[2],e[3],e[4],e[5]):LU(e[0],e[1],e[2],e[3])}function hke(e){return e?jle(e)?e:zle(e)?qle(e):Gle(e)?jU(e):Ule(e)?VU(e):Vle(e)?Ble(e):null:null}function Ble(e){const{hasZ:t,hasM:r,points:n}=e;return cR(lR(uR,n,t??!1,r??!1),t,r)}function qle(e){const{x:t,y:r,z:n,m:i}=e,s=i!=null;return n!=null?s?FU(t,r,n,i,t,r,n,i):NU(t,r,n,t,r,n):s?DU(t,r,i,t,r,i):LU(t,r,t,r)}function jU(e){const{hasZ:t,hasM:r,rings:n}=e,i=Cm(uR,n,t??!1,r??!1);return i?cR(i,t,r):null}function VU(e){const{hasZ:t,hasM:r,paths:n}=e,i=Cm(uR,n,t??!1,r??!1);return i?cR(i,t,r):null}var $_;function VN(e){return!Array.isArray(e[0])}let da=$_=class extends cd{static fromExtent(e){const t=e.clone().normalize(),r=e.spatialReference;let n=!1,i=!1;for(const o of t)o.hasZ&&(n=!0),o.hasM&&(i=!0);const s={rings:t.map(o=>{const a=[[o.xmin,o.ymin],[o.xmin,o.ymax],[o.xmax,o.ymax],[o.xmax,o.ymin],[o.xmin,o.ymin]];if(n&&o.hasZ){const l=o.zmin+.5*(o.zmax-o.zmin);for(let c=0;c<a.length;c++)a[c].push(l)}if(i&&o.hasM){const l=o.mmin+.5*(o.mmax-o.mmin);for(let c=0;c<a.length;c++)a[c].push(l)}return a}),spatialReference:r};return n&&(s.hasZ=!0),i&&(s.hasM=!0),new $_(s)}constructor(...e){super(...e),this.rings=[],this.type="polygon"}normalizeCtorArgs(e,t){let r,n,i=null,s=null;return e&&!Array.isArray(e)?(i=e.rings??null,t||(e.spatialReference?t=e.spatialReference:e.rings||(t=e)),r=e.hasZ,n=e.hasM):i=e,i=i||[],t=t||Ce.WGS84,i.length&&i[0]&&i[0][0]!=null&&typeof i[0][0]=="number"&&(i=[i]),s=i[0]&&i[0][0],s&&(r===void 0&&n===void 0?(r=s.length>2,n=s.length>3):r===void 0?r=n?s.length>3:s.length>2:n===void 0&&(n=r?s.length>3:s.length>2)),{rings:i,spatialReference:t,hasZ:r,hasM:n}}get cache(){return this.commitProperty("rings"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get centroid(){const e=Tle(this);if(!e||isNaN(e[0])||isNaN(e[1])||this.hasZ&&isNaN(e[2]))return null;const t=new be;return t.x=e[0],t.y=e[1],t.spatialReference=this.spatialReference,this.hasZ&&(t.z=e[2]),t}get extent(){const{spatialReference:e}=this,t=jU(this);if(!t)return null;const r=new at(t);return r.spatialReference=e,r}get isSelfIntersecting(){return Qse(this.rings)}writeRings(e,t){t.rings=F(this.rings)}addRing(e){if(!e)return;const t=this.rings,r=t.length;if(VN(e)){const n=[];for(let i=0,s=e.length;i<s;i++)n[i]=e[i].toArray();t[r]=n}else t[r]=e.concat();return this.notifyChange("rings"),this}clone(){const e=new $_;return e.spatialReference=this.spatialReference,e.rings=F(this.rings),e.hasZ=this.hasZ,e.hasM=this.hasM,e}equals(e){if(this===e)return!0;if(e==null)return!1;const t=this.spatialReference,r=e.spatialReference;if(t!=null!=(r!=null)||t!=null&&r!=null&&!t.equals(r)||this.rings.length!==e.rings.length)return!1;const n=([i,s,o,a],[l,c,h,f])=>i===l&&s===c&&(o==null&&h==null||o===h)&&(a==null&&f==null||a===f);for(let i=0;i<this.rings.length;i++){const s=this.rings[i],o=e.rings[i];if(!Wx(s,o,n))return!1}return!0}contains(e){if(!e)return!1;const t=Kv(e,this.spatialReference);return zz(this,t??e)}isClockwise(e){let t;return t=VN(e)?e.map(r=>this.hasZ?this.hasM?[r.x,r.y,r.z,r.m]:[r.x,r.y,r.z]:[r.x,r.y]):e,TU(t,this.hasM,this.hasZ)}getPoint(e,t){if(!this._validateInputs(e,t))return null;const r=this.rings[e][t],n=this.hasZ,i=this.hasM;return n&&!i?new be(r[0],r[1],r[2],void 0,this.spatialReference):i&&!n?new be(r[0],r[1],void 0,r[2],this.spatialReference):n&&i?new be(r[0],r[1],r[2],r[3],this.spatialReference):new be(r[0],r[1],this.spatialReference)}insertPoint(e,t,r){return this._validateInputs(e,t,!0)?(Im(this,r),Array.isArray(r)||(r=r.toArray()),this.rings[e].splice(t,0,r),this.notifyChange("rings"),this):this}removePoint(e,t){if(!this._validateInputs(e,t))return null;const r=new be(this.rings[e].splice(t,1)[0],this.spatialReference);return this.notifyChange("rings"),r}removeRing(e){if(!this._validateInputs(e,null))return null;const t=this.rings.splice(e,1)[0],r=this.spatialReference,n=t.map(i=>new be(i,r));return this.notifyChange("rings"),n}setPoint(e,t,r){return this._validateInputs(e,t)?(Im(this,r),Array.isArray(r)||(r=r.toArray()),this.rings[e][t]=r,this.notifyChange("rings"),this):this}_validateInputs(e,t,r=!1){if(e==null||e<0||e>=this.rings.length)return!1;if(t!=null){const n=this.rings[e];if(r&&(t<0||t>n.length)||!r&&(t<0||t>=n.length))return!1}return!0}toJSON(e){return this.write({},e)}};u([d({readOnly:!0})],da.prototype,"cache",null),u([d({readOnly:!0})],da.prototype,"centroid",null),u([d({readOnly:!0})],da.prototype,"extent",null),u([d({readOnly:!0})],da.prototype,"isSelfIntersecting",null),u([d({type:[[[Number]]],json:{write:{isRequired:!0}}})],da.prototype,"rings",void 0),u([pe("rings")],da.prototype,"writeRings",null),da=$_=u([E("esri.geometry.Polygon")],da),da.prototype.toJSON.isDefaultToJSON=!0;const Fa=da;var HM;function Wle(e){return!Array.isArray(e[0])}let Nu=HM=class extends cd{constructor(...e){super(...e),this.paths=[],this.type="polyline"}normalizeCtorArgs(e,t){let r,n,i=null,s=null;return e&&!Array.isArray(e)?(i=e.paths??null,t||(e.spatialReference?t=e.spatialReference:e.paths||(t=e)),r=e.hasZ,n=e.hasM):i=e,i=i||[],t=t||Ce.WGS84,i.length&&i[0]&&i[0][0]!=null&&typeof i[0][0]=="number"&&(i=[i]),s=i[0]&&i[0][0],s&&(r===void 0&&n===void 0?(r=s.length>2,n=!1):r===void 0?r=!n&&s.length>3:n===void 0&&(n=!r&&s.length>3)),{paths:i,spatialReference:t,hasZ:r,hasM:n}}get cache(){return this.commitProperty("paths"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const{spatialReference:e}=this,t=VU(this);if(!t)return null;const r=new at(t);return r.spatialReference=e,r}writePaths(e,t){t.paths=F(this.paths)}addPath(e){if(!e)return;const t=this.paths,r=t.length;if(Wle(e)){const n=[];for(let i=0,s=e.length;i<s;i++)n[i]=e[i].toArray();t[r]=n}else t[r]=e.concat();return this.notifyChange("paths"),this}clone(){const e=new HM;return e.spatialReference=this.spatialReference,e.paths=F(this.paths),e.hasZ=this.hasZ,e.hasM=this.hasM,e}getPoint(e,t){if(!this._validateInputs(e,t))return null;const r=this.paths[e][t],n=this.hasZ,i=this.hasM;return n&&!i?new be(r[0],r[1],r[2],void 0,this.spatialReference):i&&!n?new be(r[0],r[1],void 0,r[2],this.spatialReference):n&&i?new be(r[0],r[1],r[2],r[3],this.spatialReference):new be(r[0],r[1],this.spatialReference)}insertPoint(e,t,r){return this._validateInputs(e,t,!0)?(Im(this,r),Array.isArray(r)||(r=r.toArray()),this.paths[e].splice(t,0,r),this.notifyChange("paths"),this):this}removePath(e){if(!this._validateInputs(e,null))return null;const t=this.paths.splice(e,1)[0],r=this.spatialReference,n=t.map(i=>new be(i,r));return this.notifyChange("paths"),n}removePoint(e,t){if(!this._validateInputs(e,t))return null;const r=new be(this.paths[e].splice(t,1)[0],this.spatialReference);return this.notifyChange("paths"),r}setPoint(e,t,r){return this._validateInputs(e,t)?(Im(this,r),Array.isArray(r)||(r=r.toArray()),this.paths[e][t]=r,this.notifyChange("paths"),this):this}_validateInputs(e,t,r=!1){if(e==null||e<0||e>=this.paths.length)return!1;if(t!=null){const n=this.paths[e];if(r&&(t<0||t>n.length)||!r&&(t<0||t>=n.length))return!1}return!0}toJSON(e){return this.write({},e)}};u([d({readOnly:!0})],Nu.prototype,"cache",null),u([d({readOnly:!0})],Nu.prototype,"extent",null),u([d({type:[[[Number]]],json:{write:{isRequired:!0}}})],Nu.prototype,"paths",void 0),u([pe("paths")],Nu.prototype,"writePaths",null),Nu=HM=u([E("esri.geometry.Polyline")],Nu),Nu.prototype.toJSON.isDefaultToJSON=!0;const Cs=Nu,OS=Vn()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon"}),Hle=Vn()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh"});function zU(e){return e.xmin!==void 0&&e.ymin!==void 0&&e.xmax!==void 0&&e.ymax!==void 0}function dR(e){return e.points!==void 0}function hR(e){return e.x!==void 0&&e.y!==void 0}function pR(e){return e.paths!==void 0}function Fh(e){return e.rings!==void 0}function Xc(e){return e==null?null:e instanceof cd?e:hR(e)?be.fromJSON(e):pR(e)?Cs.fromJSON(e):Fh(e)?Fa.fromJSON(e):dR(e)?p2.fromJSON(e):zU(e)?at.fromJSON(e):null}function _p(e){return e?hR(e)?"esriGeometryPoint":pR(e)?"esriGeometryPolyline":Fh(e)?"esriGeometryPolygon":zU(e)?"esriGeometryEnvelope":dR(e)?"esriGeometryMultipoint":null:null}const Zle={esriGeometryPoint:be,esriGeometryPolyline:Cs,esriGeometryPolygon:Fa,esriGeometryEnvelope:at,esriGeometryMultipoint:p2};function Jle(e){return e&&Zle[e]||null}const Wm={base:cd,key:"type",typeMap:{extent:at,multipoint:p2,point:be,polyline:Cs,polygon:Fa}};Jl(Wm);let UU=0;const e1=e=>{let t=class extends e{constructor(...r){super(...r),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:Date.now().toString(16)+"-object-"+UU++})}};return t=u([E("esri.core.Identifiable")],t),t},fR=e=>{let t=class extends e{constructor(...r){super(...r),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:UU++})}};return t=u([E("esri.core.NumericIdentifiable")],t),t};let zN=class extends e1(class{}){};zN=u([E("esri.core.Identifiable")],zN);async function Qle(e){const t="portalItem"in e?e:{portalItem:e},{fromItem:r}=await ie(()=>import("./portalLayers-35fcc643.js"),["assets/portalLayers-35fcc643.js","assets/lazyLayerLoader-a860f64c.js","assets/layersLoader-48793f5f.js","assets/fetchService-363fc0b0.js","assets/jsonContext-76163bf5.js","assets/styleUtils-b6b6277d.js"]);try{return await r(t)}catch(n){const i=t&&t.portalItem,s=i&&i.id||"unset",o=i&&i.portal&&i.portal.url||ot.portalUrl;throw Z.getLogger("esri.layers.support.fromPortalItem").error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+o+"', id: '"+s+"')",n),n}}let Yle=0,Gr=class extends Ua.EventedMixin(e1(Ql)){constructor(){super(...arguments),this.attributionDataUrl=null,this.fullExtent=new at(-180,-90,180,90,Ce.WGS84),this.id=Date.now().toString(16)+"-layer-"+Yle++,this.legendEnabled=!0,this.listMode="show",this.opacity=1,this.parent=null,this.popupEnabled=!0,this.attributionVisible=!0,this.spatialReference=Ce.WGS84,this.title=null,this.type=null,this.url=null,this.visible=!0}static async fromArcGISServerUrl(t){const r=typeof t=="string"?{url:t}:t;return(await ie(()=>import("./arcgisLayers-073b3eb6.js"),["assets/arcgisLayers-073b3eb6.js","assets/fetchService-363fc0b0.js","assets/lazyLayerLoader-a860f64c.js"])).fromUrl(r)}static fromPortalItem(t){return Qle(t)}initialize(){this.when().catch(t=>{Ei(t)||Z.getLogger(this).error("#load()",`Failed to load layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}')`,{error:t})})}destroy(){if(this.parent){const t=this,r=this.parent;"layers"in r&&r.layers.includes(t)?r.layers.remove(t):"tables"in r&&r.tables.includes(t)?r.tables.remove(t):"baseLayers"in r&&r.baseLayers.includes(t)?r.baseLayers.remove(t):"baseLayers"in r&&r.referenceLayers.includes(t)&&r.referenceLayers.remove(t)}}get hasAttributionData(){return this.attributionDataUrl!=null}get parsedUrl(){return jn(this.url)}async fetchAttributionData(){const t=this.attributionDataUrl;if(this.hasAttributionData&&t)return(await St(t,{query:{f:"json"},responseType:"json"})).data;throw new N("layer:no-attribution-data","Layer does not have attribution data")}};u([d({type:String})],Gr.prototype,"attributionDataUrl",void 0),u([d({type:at})],Gr.prototype,"fullExtent",void 0),u([d({readOnly:!0})],Gr.prototype,"hasAttributionData",null),u([d({type:String,clonable:!1})],Gr.prototype,"id",void 0),u([d({type:Boolean,nonNullable:!0})],Gr.prototype,"legendEnabled",void 0),u([d({type:["show","hide","hide-children"]})],Gr.prototype,"listMode",void 0),u([d({type:Number,range:{min:0,max:1},nonNullable:!0})],Gr.prototype,"opacity",void 0),u([d({clonable:!1})],Gr.prototype,"parent",void 0),u([d({readOnly:!0})],Gr.prototype,"parsedUrl",null),u([d({type:Boolean})],Gr.prototype,"popupEnabled",void 0),u([d({type:Boolean})],Gr.prototype,"attributionVisible",void 0),u([d({type:Ce})],Gr.prototype,"spatialReference",void 0),u([d({type:String})],Gr.prototype,"title",void 0),u([d({readOnly:!0,json:{read:!1}})],Gr.prototype,"type",void 0),u([d()],Gr.prototype,"url",void 0),u([d({type:Boolean,nonNullable:!0})],Gr.prototype,"visible",void 0),Gr=u([E("esri.layers.Layer")],Gr);const GU=Gr;function ZM(e,t,r){let n,i;if(e)for(let s=0,o=e.length;s<o;s++){if(n=e.at(s),(n==null?void 0:n[t])===r)return n;if((n==null?void 0:n.type)==="group"&&(i=ZM(n.layers,t,r),i))return i}}const Kle=e=>{let t=class extends e{constructor(...r){super(...r),this.layers=new Le;const n=o=>{o.parent&&"remove"in o.parent&&o.parent.remove(o)},i=o=>{o.parent=this,this.layerAdded(o),o.type!=="elevation"&&o.type!=="base-elevation"||Z.getLogger(this).error(`Layer 'title:${o.title}, id:${o.id}' of type '${o.type}' is not supported as an operational layer and will therefore be ignored.`)},s=o=>{o.parent=null,this.layerRemoved(o)};this.addHandles([this.layers.on("before-add",o=>n(o.item)),this.layers.on("after-add",o=>i(o.item)),this.layers.on("after-remove",o=>s(o.item))])}destroy(){const r=this.layers.toArray();for(const n of r)n.destroy();this.layers.destroy()}set layers(r){this._set("layers",tp(r,this._get("layers")))}add(r,n){const i=this.layers;if(n=i.getNextIndex(n),r instanceof GU){const s=r;s.parent===this?this.reorder(s,n):i.add(s,n)}else au(r)?r.then(s=>{this.destroyed||this.add(s,n)}):Z.getLogger(this).error("#add()","The item being added is not a Layer or a Promise that resolves to a Layer.")}addMany(r,n){const i=this.layers;let s=i.getNextIndex(n);r.slice().forEach(o=>{o.parent!==this?(i.add(o,s),s+=1):this.reorder(o,s)})}findLayerById(r){return ZM(this.layers,"id",r)}findLayerByUid(r){return ZM(this.layers,"uid",r)}remove(r){return this.layers.remove(r)}removeMany(r){return this.layers.removeMany(r)}removeAll(){return this.layers.removeAll()}reorder(r,n){return this.layers.reorder(r,n)}layerAdded(r){}layerRemoved(r){}};return u([d()],t.prototype,"layers",null),t=u([E("esri.support.LayersMixin")],t),t};function JM(e,t,r){if(e)for(let n=0,i=e.length;n<i;n++){const s=e.at(n);if(s[t]===r)return s;if((s==null?void 0:s.type)==="group"){const o=JM(s.tables,t,r);if(o)return o}}}const Xle=e=>{let t=class extends e{constructor(...r){super(...r),this.tables=new Le,this.addHandles([this.tables.on("after-add",n=>{const i=n.item;i.parent&&i.parent!==this&&"tables"in i.parent&&i.parent.tables.remove(i),i.parent=this,i.type!=="feature"&&Z.getLogger(this).error(`Layer 'title:${i.title}, id:${i.id}' of type '${i.type}' is not supported as a table and will therefore be ignored.`)}),this.tables.on("after-remove",n=>{n.item.parent=null})])}destroy(){const r=this.tables.removeAll();for(const n of r)n.destroy();this.tables.destroy()}set tables(r){this._set("tables",tp(r,this._get("tables")))}findTableById(r){return JM(this.tables,"id",r)}findTableByUid(r){return JM(this.tables,"uid",r)}};return u([d()],t.prototype,"tables",null),t=u([E("esri.support.TablesMixin")],t),t};let ha=class extends Xle(Kle(Ua.EventedMixin($e))){constructor(t){super(t),this.allLayers=new Mm({getCollections:()=>{var r,n,i;return[(r=this.basemap)==null?void 0:r.baseLayers,(n=this.ground)==null?void 0:n.layers,this.layers,(i=this.basemap)==null?void 0:i.referenceLayers]},getChildrenFunction:r=>"layers"in r?r.layers:null}),this.allTables=yle(this),this.basemap=null,this.editableLayers=new Mm({getCollections:()=>[this.allLayers],itemFilterFunction:dle}),this.ground=new PS,this._basemapCache=ple()}destroy(){var t,r;this.allLayers.destroy(),this.allTables.destroy(),this.editableLayers.destroy(),(t=this.ground)==null||t.destroy(),(r=this.basemap)==null||r.destroy(),fle(this._basemapCache),this._basemapCache=null}castBasemap(t){return mle(t,this._basemapCache)}castGround(t){return gle(t)??this._get("ground")}findLayerById(t){return this.allLayers.find(r=>r.id===t)}findTableById(t){return this.allTables.find(r=>r.id===t)}};u([d({readOnly:!0,dependsOn:[]})],ha.prototype,"allLayers",void 0),u([d({readOnly:!0})],ha.prototype,"allTables",void 0),u([d({type:ES})],ha.prototype,"basemap",void 0),u([Pt("basemap")],ha.prototype,"castBasemap",null),u([d({readOnly:!0})],ha.prototype,"editableLayers",void 0),u([d({type:PS,nonNullable:!0})],ha.prototype,"ground",void 0),u([Pt("ground")],ha.prototype,"castGround",null),ha=u([E("esri.Map")],ha);const BU=ha,kr=e=>{let t=class extends e{clone(){var l;const r=yi(Xr(this),"unable to clone instance of non-accessor class"),n=r.metadatas,i=r.store,s={},o=new Map;for(const c in n){const h=n[c],f=i==null?void 0:i.originOf(c),m=h.clonable;if(h.readOnly||m===!1||f!==ae.USER&&f!==ae.DEFAULTS&&f!==ae.WEB_MAP&&f!==ae.WEB_SCENE)continue;const y=this[c];let g=null;g=typeof m=="function"?m(y):m==="reference"?y:hM(y),y!=null&&g==null||(f===ae.DEFAULTS?o.set(c,g):s[c]=g)}const a=new(Object.getPrototypeOf(this)).constructor(s);if(o.size){const c=(l=Xr(a))==null?void 0:l.store;if(c)for(const[h,f]of o)c.set(h,f,ae.DEFAULTS)}return a}};return t=u([E("esri.core.Clonable")],t),t};let UN=class extends kr($e){};UN=u([E("esri.core.Clonable")],UN);var km;function eue(e,t){switch(e.type){case"range":{const r="range"in e?e.range[0]:e.minValue,n="range"in e?e.range[1]:e.maxValue;if(r!=null&&+t<r||n!=null&&+t>n)return km.VALUE_OUT_OF_RANGE;break}case"coded-value":case"codedValue":if(e.codedValues==null||e.codedValues.every(r=>r==null||r.code!==t))return km.INVALID_CODED_VALUE}return null}(function(e){e.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range",e.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value"})(km||(km={}));const tue=Z.getLogger("esri.support.arcadeOnDemand");let B$;function up(){return B$||(B$=(async()=>{const e=await ie(()=>import("./arcadeUtils-13551489.js").then(t=>t.az),["assets/arcadeUtils-13551489.js","assets/arcadeTimeUtils-a7821097.js","assets/executionError-c92d3b85.js"]);return{arcade:e.arcade,arcadeUtils:e,Dictionary:e.Dictionary,Feature:e.arcadeFeature}})()),B$}const gke=(e,t,r)=>mR.create(e,t,r,null,["$feature"],[]),vke=(e,t,r)=>mR.create(e,t,r,null,["$feature","$view"],[]),rue=(e,t,r,n)=>mR.create(e,t,r,n,["$feature","$view"],[]);let mR=class qU{constructor(t,r,n,i,s,o,a){this.services=null,this.script=t,this.evaluate=i;const l=Array.isArray(o)?o:o.fields;this.fields=l,this._syntaxTree=n,this._arcade=r,this._arcadeFeature=s,this._spatialReference=a,this._referencesGeometry=r.scriptTouchesGeometry(this._syntaxTree),this._referencesScale=this._arcade.referencesMember(this._syntaxTree,"scale")}static async create(t,r,n,i,s,o){const{arcade:a,Feature:l,Dictionary:c}=await up(),h=Ce.fromJSON(r);let f;try{f=a.parseScript(t,o)}catch(O){return tue.error(new N("arcade-bad-expression","Failed to parse arcade script",{script:t,error:O})),null}const m=s.reduce((O,W)=>({...O,[W]:null}),{});let y=null;i!=null&&(y=new c(i),y.immutable=!0,m.$config=null);const g=a.scriptUsesGeometryEngine(f),v=g&&a.enableGeometrySupport(),w=a.scriptUsesFeatureSet(f)&&a.enableFeatureSetSupport(),b=a.scriptIsAsync(f),S=b&&a.enableAsyncSupport(),_={vars:m,spatialReference:h,useAsync:!!S};await Promise.all([v,w,S]);const x=new Set;await a.loadDependentModules(x,f,null,b,g);const T=new c;T.immutable=!1,T.setField("scale",0);const I=a.compileScript(f,_),C=(O,W)=>("$view"in O&&O.$view&&(T.setField("scale",typeof O.$view=="object"&&"scale"in O.$view?O.$view.scale:void 0),O.$view=T),y&&(O.$config=y),I({vars:O,spatialReference:h,services:W}));return new qU(t,a,f,C,new l,n,h)}repurposeFeature(t){return t.geometry&&!t.geometry.spatialReference&&(t.geometry.spatialReference=this._spatialReference),this._arcadeFeature.repurposeFromGraphicLikeObject(t.geometry,t.attributes,{fields:this.fields}),this._arcadeFeature}referencesGeometry(){return this._referencesGeometry}referencesScale(){return this._referencesScale}};const nue=/^([0-9_])/,iue=/[^a-z0-9_\u0080-\uffff]+/gi;function sue(e){return e==null?null:e.trim().replaceAll(iue,"_").replace(nue,"F$1")||null}const oue=["field","field2","field3","normalizationField","rotationInfo.field","proportionalSymbolInfo.field","proportionalSymbolInfo.normalizationField","colorInfo.field","colorInfo.normalizationField"],aue=["field","normalizationField"];function wke(e,t){if(e!=null&&t!=null){for(const r of Array.isArray(e)?e:[e])if(GN(oue,r,t),"visualVariables"in r&&r.visualVariables)for(const n of r.visualVariables)GN(aue,n,t)}}function GN(e,t,r){if(e)for(const n of e){const i=Zv(n,t),s=i&&typeof i!="function"&&r.get(i);s&&vp(n,s.name,t)}}function lue(e,t){var r;if(e!=null&&((r=t==null?void 0:t.fields)!=null&&r.length))if("startField"in e){const n=t.get(e.startField),i=t.get(e.endField);e.startField=(n==null?void 0:n.name)??null,e.endField=(i==null?void 0:i.name)??null}else{const n=t.get(e.startTimeField),i=t.get(e.endTimeField);e.startTimeField=(n==null?void 0:n.name)??null,e.endTimeField=(i==null?void 0:i.name)??null}}const q$=new Set;function WU(e,t){return e&&t?(q$.clear(),mv(q$,e,t),Array.from(q$).sort()):[]}function mv(e,t,r){var n;if(r)if((n=t==null?void 0:t.fields)!=null&&n.length)if(r.includes("*"))for(const{name:i}of t.fields)e.add(i);else for(const i of r)Zi(e,t,i);else{if(r.includes("*"))return e.clear(),void e.add("*");for(const i of r)i!=null&&e.add(i)}}function Zi(e,t,r){if(typeof r=="string")if(t){const n=t.get(r);n&&e.add(n.name)}else e.add(r)}function _ke(e,t){return t==null||e==null?[]:t.includes("*")?(e.fields??[]).map(r=>r.name):t}async function ni(e,t,r){var s;if(!r)return;const{arcadeUtils:n}=await up(),i=n.extractFieldNames(r,(s=t==null?void 0:t.fields)==null?void 0:s.map(o=>o.name));for(const o of i)Zi(e,t,o)}async function HU(e,t,r){if(r&&r!=="1=1"){const{WhereClause:n}=await ie(()=>import("./WhereClause-3339dfce.js").then(s=>s.W),["assets/WhereClause-3339dfce.js","assets/executionError-c92d3b85.js"]),i=n.create(r,t);if(!i.isStandardized)throw new N("fieldUtils:collectFilterFields","Where clause is not standardized",{where:r});mv(e,t,i.fieldNames)}}function uue({displayField:e,fields:t}){return e||(t&&t.length?W$(t,"name-or-title")||W$(t,"unique-identifier")||W$(t,"type-or-category")||cue(t):null)}function cue(e){for(const t of e){if(!t||!t.name)continue;const r=t.name.toLowerCase();if(r.includes("name")||r.includes("title"))return t.name}return null}function W$(e,t){for(const r of e)if(r&&r.valueType&&r.valueType===t)return r.name;return null}async function bke(e,t){var n;if(!t)return;const r=(n=t.elevationInfo)==null?void 0:n.featureExpressionInfo;return r?r.collectRequiredFields(e,t.fieldsIndex):void 0}function due(e,t,r){r.onStatisticExpression?ni(e,t,r.onStatisticExpression.expression):e.add(r.onStatisticField)}async function Ske(e,t,r){if(!t||!r||!("fields"in r))return;const n=[],i=r.popupTemplate;n.push(hue(e,t,i)),r.fields&&n.push(...r.fields.map(async s=>due(e,t.fieldsIndex,s))),await Promise.all(n)}async function hue(e,t,r){const n=[];r!=null&&r.expressionInfos&&n.push(...r.expressionInfos.map(s=>ni(e,t.fieldsIndex,s.expression)));const i=r==null?void 0:r.content;if(Array.isArray(i))for(const s of i)s.type==="expression"&&s.expressionInfo&&n.push(ni(e,t.fieldsIndex,s.expressionInfo.expression));await Promise.all(n)}async function xke(e,t,r){t&&(t.timeInfo&&r!=null&&r.timeExtent&&mv(e,t.fieldsIndex,[t.timeInfo.startField,t.timeInfo.endField]),t.floorInfo&&mv(e,t.fieldsIndex,[t.floorInfo.floorField]),r!=null&&r.where!=null&&await HU(e,t.fieldsIndex,r.where))}async function $ke(e,t,r){t&&r&&await Promise.all(r.map(n=>pue(e,t,n)))}async function pue(e,t,r){t&&r&&(r.valueExpression?await ni(e,t.fieldsIndex,r.valueExpression):r.field&&Zi(e,t.fieldsIndex,r.field))}function Tke(e){return e?WU(e.fieldsIndex,ZU(e)):[]}function fue(e){if(!e)return[];const t=e.geometryFieldsInfo;return t?WU(e.fieldsIndex,[t.shapeAreaField,t.shapeLengthField]):[]}const mue=["oid","global-id","guid"],yue=["oid","global-id"],gue=[/^fnode_$/i,/^tnode_$/i,/^lpoly_$/i,/^rpoly_$/i,/^poly_$/i,/^subclass$/i,/^subclass_$/i,/^rings_ok$/i,/^rings_nok$/i,/shape/i,/perimeter/i,/objectid/i,/_i$/i];function vue(e){const t=new Set;JU(e).forEach(n=>t.add(n)),fue(e).forEach(n=>t.add(n.toLowerCase()));const r=e&&"infoFor3D"in e?e.infoFor3D:void 0;return r&&(Object.values(r.assetMapFieldRoles).forEach(n=>t.add(n.toLowerCase())),Object.values(r.transformFieldRoles).forEach(n=>t.add(n.toLowerCase()))),Array.from(t)}function ZU(e){if(!e)return[];const t="editFieldsInfo"in e&&e.editFieldsInfo;if(!t)return[];const{creationDateField:r,creatorField:n,editDateField:i,editorField:s}=t;return[r,n,i,s].filter(Boolean)}function JU(e){return ZU(e).map(t=>t.toLowerCase())}function wue(e,t){var r;return e.editable&&!mue.includes(e.type)&&!JU(t).includes(((r=e.name)==null?void 0:r.toLowerCase())??"")}function _ue(e,t){var n;const r=((n=e.name)==null?void 0:n.toLowerCase())??"";return!((t==null?void 0:t.objectIdField)!=null&&r===t.objectIdField.toLowerCase()||(t==null?void 0:t.globalIdField)!=null&&r===t.globalIdField.toLowerCase()||vue(t).includes(r)||yue.includes(e.type)||gue.some(i=>i.test(r)))}async function Eke(e,t){const{labelingInfo:r,fieldsIndex:n}=t;r&&r.length&&await Promise.all(r.map(i=>bue(e,n,i)))}async function bue(e,t,r){if(!r)return;const n=r.getLabelExpression(),i=r.where;if(n.type==="arcade")await ni(e,t,n.expression);else{const s=n.expression.match(/{[^}]*}/g);s&&s.forEach(o=>{Zi(e,t,o.slice(1,-1))})}await HU(e,t,i)}function Sue(e){const t=e.defaultValue;return t!==void 0&&KU(e,t)?t:e.nullable?null:void 0}function QU(e){return typeof e=="number"&&!isNaN(e)&&isFinite(e)}function xue(e){return e===null||QU(e)}const yR="isInteger"in Number?Number.isInteger:e=>typeof e=="number"&&isFinite(e)&&Math.floor(e)===e;function $ue(e){return e===null||yR(e)}function YU(e){return e!=null&&typeof e=="string"}function Tue(e){return e===null||YU(e)}function Eue(){return!0}function KU(e,t){let r;switch(e.type){case"date":case"integer":case"long":case"small-integer":case"esriFieldTypeDate":case"esriFieldTypeInteger":case"esriFieldTypeLong":case"esriFieldTypeSmallInteger":r=e.nullable?$ue:yR;break;case"double":case"single":case"esriFieldTypeSingle":case"esriFieldTypeDouble":r=e.nullable?xue:QU;break;case"string":case"esriFieldTypeString":r=e.nullable?Tue:YU;break;default:r=Eue}return arguments.length===1?r:r(t)}const Mue=["integer","small-integer","single","double"],Iue=new Set([...Mue,"esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]),Cue=["date","date-only","time-only","timestamp-offset"],kue=new Set([...Cue,"esriFieldTypeDate","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"]);function XU(e){return e!=null&&Iue.has(e.type)}function Mke(e){return e!=null&&(e.type==="string"||e.type==="esriFieldTypeString")}function Ike(e){return e!=null&&kue.has(e.type)}var RS,AS;function Cke(e){return e==null||typeof e=="number"&&isNaN(e)?null:e}function kke(e,t){return e==null||e.nullable&&t===null?null:XU(e)&&!Pue(e.type,Number(t))?RS.OUT_OF_RANGE:KU(e,t)?e.domain?eue(e.domain,t):null:AS.INVALID_TYPE}function Pue(e,t){const r=typeof e=="string"?e9(e):e;if(!r)return!1;const n=r.min,i=r.max;return r.isInteger?yR(t)&&t>=n&&t<=i:t>=n&&t<=i}function e9(e){switch(e){case"esriFieldTypeSmallInteger":case"small-integer":return Oue;case"esriFieldTypeInteger":case"integer":return Rue;case"esriFieldTypeBigInteger":case"big-integer":return Aue;case"esriFieldTypeSingle":case"single":return Lue;case"esriFieldTypeDouble":case"double":return Nue}}(function(e){e.OUT_OF_RANGE="numeric-range-validation-error::out-of-range"})(RS||(RS={})),function(e){e.INVALID_TYPE="type-validation-error::invalid-type"}(AS||(AS={}));const Oue={min:-32768,max:32767,isInteger:!0},Rue={min:-2147483648,max:2147483647,isInteger:!0},Aue={min:-Number.MAX_SAFE_INTEGER,max:Number.MAX_SAFE_INTEGER,isInteger:!0},Lue={min:-34e37,max:12e37,isInteger:!1},Nue={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1};function Pke(e,t,r){switch(e){case km.INVALID_CODED_VALUE:return`Value ${r} is not in the coded domain - field: ${t.name}, domain: ${JSON.stringify(t.domain)}`;case km.VALUE_OUT_OF_RANGE:return`Value ${r} is out of the range of valid values - field: ${t.name}, domain: ${JSON.stringify(t.domain)}`;case AS.INVALID_TYPE:return`Value ${r} is not a valid value for the field type - field: ${t.name}, type: ${t.type}, nullable: ${t.nullable}`;case RS.OUT_OF_RANGE:{const{min:n,max:i}=e9(t.type);return`Value ${r} is out of range for the number type - field: ${t.name}, type: ${t.type}, value range is ${n} to ${i}`}}}function Oke(e,t){return!Due(e,t,null)}function Due(e,t,r){if(!t||!t.attributes||!e){if(r!=null)for(const s of e??[])r.add(s);return!0}const n=t.attributes;let i=!1;for(const s of e)if(!(s in n)){if(i=!0,r==null)break;r.add(s)}return i}function Fue(e){return!!e&&["raster.itempixelvalue","raster.servicepixelvalue"].some(t=>e.toLowerCase().startsWith(t))}let T_=class extends Q{constructor(t){super(t),this.type=null}};u([d({type:["attachments","custom","fields","media","text","expression","relationship"],readOnly:!0,json:{read:!1,write:!0}})],T_.prototype,"type",void 0),T_=u([E("esri.popup.content.Content")],T_);const dd=T_;var QM;let Dd=QM=class extends dd{constructor(e){super(e),this.description=null,this.displayType="auto",this.title=null,this.type="attachments"}clone(){return new QM({description:this.description,displayType:this.displayType,title:this.title})}};u([d({type:String,json:{write:!0}})],Dd.prototype,"description",void 0),u([d({type:["auto","preview","list"],json:{write:!0}})],Dd.prototype,"displayType",void 0),u([d({type:String,json:{write:!0}})],Dd.prototype,"title",void 0),u([d({type:["attachments"],readOnly:!0,json:{read:!1,write:!0}})],Dd.prototype,"type",void 0),Dd=QM=u([E("esri.popup.content.AttachmentsContent")],Dd);const yv=Dd;var YM;let Fd=YM=class extends dd{constructor(e){super(e),this.creator=null,this.destroyer=null,this.outFields=null,this.type="custom"}clone(){return new YM({creator:this.creator,destroyer:this.destroyer,outFields:Array.isArray(this.outFields)?F(this.outFields):null})}};u([d()],Fd.prototype,"creator",void 0),u([d()],Fd.prototype,"destroyer",void 0),u([d()],Fd.prototype,"outFields",void 0),u([d({type:["custom"],readOnly:!0})],Fd.prototype,"type",void 0),Fd=YM=u([E("esri.popup.content.CustomContent")],Fd);const jue=Fd;var KM;let Gp=KM=class extends Q{constructor(e){super(e),this.title=null,this.expression=null,this.returnType="dictionary"}clone(){return new KM({title:this.title,expression:this.expression})}};u([d({type:String,json:{write:!0}})],Gp.prototype,"title",void 0),u([d({type:String,json:{write:!0}})],Gp.prototype,"expression",void 0),u([d({type:["dictionary"],readOnly:!0,json:{read:!1,write:!0}})],Gp.prototype,"returnType",void 0),Gp=KM=u([E("esri.popup.ElementExpressionInfo")],Gp);const Vue=Gp;var XM;let rg=XM=class extends dd{constructor(e){super(e),this.expressionInfo=null,this.type="expression"}clone(){var e;return new XM({expressionInfo:(e=this.expressionInfo)==null?void 0:e.clone()})}};u([d({type:Vue,json:{write:!0}})],rg.prototype,"expressionInfo",void 0),u([d({type:["expression"],readOnly:!0,json:{read:!1,write:!0}})],rg.prototype,"type",void 0),rg=XM=u([E("esri.popup.content.ExpressionContent")],rg);const gR=rg;class bp extends Error{}class zue extends bp{constructor(t){super(`Invalid DateTime: ${t.toMessage()}`)}}class Uue extends bp{constructor(t){super(`Invalid Interval: ${t.toMessage()}`)}}class Gue extends bp{constructor(t){super(`Invalid Duration: ${t.toMessage()}`)}}class ng extends bp{}class t9 extends bp{constructor(t){super(`Invalid unit ${t}`)}}class Es extends bp{}class Su extends bp{constructor(){super("Zone is an abstract class")}}const ce="numeric",Wo="short",Ji="long",LS={year:ce,month:ce,day:ce},r9={year:ce,month:Wo,day:ce},Bue={year:ce,month:Wo,day:ce,weekday:Wo},n9={year:ce,month:Ji,day:ce},i9={year:ce,month:Ji,day:ce,weekday:Ji},s9={hour:ce,minute:ce},o9={hour:ce,minute:ce,second:ce},a9={hour:ce,minute:ce,second:ce,timeZoneName:Wo},l9={hour:ce,minute:ce,second:ce,timeZoneName:Ji},u9={hour:ce,minute:ce,hourCycle:"h23"},c9={hour:ce,minute:ce,second:ce,hourCycle:"h23"},d9={hour:ce,minute:ce,second:ce,hourCycle:"h23",timeZoneName:Wo},h9={hour:ce,minute:ce,second:ce,hourCycle:"h23",timeZoneName:Ji},p9={year:ce,month:ce,day:ce,hour:ce,minute:ce},f9={year:ce,month:ce,day:ce,hour:ce,minute:ce,second:ce},m9={year:ce,month:Wo,day:ce,hour:ce,minute:ce},y9={year:ce,month:Wo,day:ce,hour:ce,minute:ce,second:ce},que={year:ce,month:Wo,day:ce,weekday:Wo,hour:ce,minute:ce},g9={year:ce,month:Ji,day:ce,hour:ce,minute:ce,timeZoneName:Wo},v9={year:ce,month:Ji,day:ce,hour:ce,minute:ce,second:ce,timeZoneName:Wo},w9={year:ce,month:Ji,day:ce,weekday:Ji,hour:ce,minute:ce,timeZoneName:Ji},_9={year:ce,month:Ji,day:ce,weekday:Ji,hour:ce,minute:ce,second:ce,timeZoneName:Ji};class t1{get type(){throw new Su}get name(){throw new Su}get ianaName(){return this.name}get isUniversal(){throw new Su}offsetName(t,r){throw new Su}formatOffset(t,r){throw new Su}offset(t){throw new Su}equals(t){throw new Su}get isValid(){throw new Su}}let H$=null;class f2 extends t1{static get instance(){return H$===null&&(H$=new f2),H$}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(t,{format:r,locale:n}){return S9(t,r,n)}formatOffset(t,r){return p0(this.offset(t),r)}offset(t){return-new Date(t).getTimezoneOffset()}equals(t){return t.type==="system"}get isValid(){return!0}}let E_={};function Wue(e){return E_[e]||(E_[e]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),E_[e]}const Hue={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function Zue(e,t){const r=e.format(t).replace(/\u200E/g,""),n=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(r),[,i,s,o,a,l,c,h]=n;return[o,i,s,a,l,c,h]}function Jue(e,t){const r=e.formatToParts(t),n=[];for(let i=0;i<r.length;i++){const{type:s,value:o}=r[i],a=Hue[s];s==="era"?n[a]=o:dt(a)||(n[a]=parseInt(o,10))}return n}let ow={};class Yl extends t1{static create(t){return ow[t]||(ow[t]=new Yl(t)),ow[t]}static resetCache(){ow={},E_={}}static isValidSpecifier(t){return this.isValidZone(t)}static isValidZone(t){if(!t)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:t}).format(),!0}catch{return!1}}constructor(t){super(),this.zoneName=t,this.valid=Yl.isValidZone(t)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(t,{format:r,locale:n}){return S9(t,r,n,this.name)}formatOffset(t,r){return p0(this.offset(t),r)}offset(t){const r=new Date(t);if(isNaN(r))return NaN;const n=Wue(this.name);let[i,s,o,a,l,c,h]=n.formatToParts?Jue(n,r):Zue(n,r);a==="BC"&&(i=-Math.abs(i)+1);const m=_R({year:i,month:s,day:o,hour:l===24?0:l,minute:c,second:h,millisecond:0});let y=+r;const g=y%1e3;return y-=g>=0?g:1e3+g,(m-y)/(60*1e3)}equals(t){return t.type==="iana"&&t.name===this.name}get isValid(){return this.valid}}let BN={};function Que(e,t={}){const r=JSON.stringify([e,t]);let n=BN[r];return n||(n=new Intl.ListFormat(e,t),BN[r]=n),n}let eI={};function tI(e,t={}){const r=JSON.stringify([e,t]);let n=eI[r];return n||(n=new Intl.DateTimeFormat(e,t),eI[r]=n),n}let rI={};function Yue(e,t={}){const r=JSON.stringify([e,t]);let n=rI[r];return n||(n=new Intl.NumberFormat(e,t),rI[r]=n),n}let nI={};function Kue(e,t={}){const{base:r,...n}=t,i=JSON.stringify([e,n]);let s=nI[i];return s||(s=new Intl.RelativeTimeFormat(e,t),nI[i]=s),s}let ig=null;function Xue(){return ig||(ig=new Intl.DateTimeFormat().resolvedOptions().locale,ig)}function ece(e){const t=e.indexOf("-x-");t!==-1&&(e=e.substring(0,t));const r=e.indexOf("-u-");if(r===-1)return[e];{let n,i;try{n=tI(e).resolvedOptions(),i=e}catch{const l=e.substring(0,r);n=tI(l).resolvedOptions(),i=l}const{numberingSystem:s,calendar:o}=n;return[i,s,o]}}function tce(e,t,r){return(r||t)&&(e.includes("-u-")||(e+="-u"),r&&(e+=`-ca-${r}`),t&&(e+=`-nu-${t}`)),e}function rce(e){const t=[];for(let r=1;r<=12;r++){const n=Qe.utc(2016,r,1);t.push(e(n))}return t}function nce(e){const t=[];for(let r=1;r<=7;r++){const n=Qe.utc(2016,11,13+r);t.push(e(n))}return t}function aw(e,t,r,n,i){const s=e.listingMode(r);return s==="error"?null:s==="en"?n(t):i(t)}function ice(e){return e.numberingSystem&&e.numberingSystem!=="latn"?!1:e.numberingSystem==="latn"||!e.locale||e.locale.startsWith("en")||new Intl.DateTimeFormat(e.intl).resolvedOptions().numberingSystem==="latn"}class sce{constructor(t,r,n){this.padTo=n.padTo||0,this.floor=n.floor||!1;const{padTo:i,floor:s,...o}=n;if(!r||Object.keys(o).length>0){const a={useGrouping:!1,...n};n.padTo>0&&(a.minimumIntegerDigits=n.padTo),this.inf=Yue(t,a)}}format(t){if(this.inf){const r=this.floor?Math.floor(t):t;return this.inf.format(r)}else{const r=this.floor?Math.floor(t):wR(t,3);return Fr(r,this.padTo)}}}class oce{constructor(t,r,n){this.opts=n,this.originalZone=void 0;let i;if(this.opts.timeZone)this.dt=t;else if(t.zone.type==="fixed"){const o=-1*(t.offset/60),a=o>=0?`Etc/GMT+${o}`:`Etc/GMT${o}`;t.offset!==0&&Yl.create(a).valid?(i=a,this.dt=t):(i="UTC",this.dt=t.offset===0?t:t.setZone("UTC").plus({minutes:t.offset}),this.originalZone=t.zone)}else t.zone.type==="system"?this.dt=t:t.zone.type==="iana"?(this.dt=t,i=t.zone.name):(i="UTC",this.dt=t.setZone("UTC").plus({minutes:t.offset}),this.originalZone=t.zone);const s={...this.opts};s.timeZone=s.timeZone||i,this.dtf=tI(r,s)}format(){return this.originalZone?this.formatToParts().map(({value:t})=>t).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const t=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?t.map(r=>{if(r.type==="timeZoneName"){const n=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...r,value:n}}else return r}):t}resolvedOptions(){return this.dtf.resolvedOptions()}}class ace{constructor(t,r,n){this.opts={style:"long",...n},!r&&b9()&&(this.rtf=Kue(t,n))}format(t,r){return this.rtf?this.rtf.format(t,r):$ce(r,t,this.opts.numeric,this.opts.style!=="long")}formatToParts(t,r){return this.rtf?this.rtf.formatToParts(t,r):[]}}class Xt{static fromOpts(t){return Xt.create(t.locale,t.numberingSystem,t.outputCalendar,t.defaultToEN)}static create(t,r,n,i=!1){const s=t||Dr.defaultLocale,o=s||(i?"en-US":Xue()),a=r||Dr.defaultNumberingSystem,l=n||Dr.defaultOutputCalendar;return new Xt(o,a,l,s)}static resetCache(){ig=null,eI={},rI={},nI={}}static fromObject({locale:t,numberingSystem:r,outputCalendar:n}={}){return Xt.create(t,r,n)}constructor(t,r,n,i){const[s,o,a]=ece(t);this.locale=s,this.numberingSystem=r||o||null,this.outputCalendar=n||a||null,this.intl=tce(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=i,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=ice(this)),this.fastNumbersCached}listingMode(){const t=this.isEnglish(),r=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return t&&r?"en":"intl"}clone(t){return!t||Object.getOwnPropertyNames(t).length===0?this:Xt.create(t.locale||this.specifiedLocale,t.numberingSystem||this.numberingSystem,t.outputCalendar||this.outputCalendar,t.defaultToEN||!1)}redefaultToEN(t={}){return this.clone({...t,defaultToEN:!0})}redefaultToSystem(t={}){return this.clone({...t,defaultToEN:!1})}months(t,r=!1,n=!0){return aw(this,t,n,T9,()=>{const i=r?{month:t,day:"numeric"}:{month:t},s=r?"format":"standalone";return this.monthsCache[s][t]||(this.monthsCache[s][t]=rce(o=>this.extract(o,i,"month"))),this.monthsCache[s][t]})}weekdays(t,r=!1,n=!0){return aw(this,t,n,I9,()=>{const i=r?{weekday:t,year:"numeric",month:"long",day:"numeric"}:{weekday:t},s=r?"format":"standalone";return this.weekdaysCache[s][t]||(this.weekdaysCache[s][t]=nce(o=>this.extract(o,i,"weekday"))),this.weekdaysCache[s][t]})}meridiems(t=!0){return aw(this,void 0,t,()=>C9,()=>{if(!this.meridiemCache){const r={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[Qe.utc(2016,11,13,9),Qe.utc(2016,11,13,19)].map(n=>this.extract(n,r,"dayperiod"))}return this.meridiemCache})}eras(t,r=!0){return aw(this,t,r,k9,()=>{const n={era:t};return this.eraCache[t]||(this.eraCache[t]=[Qe.utc(-40,1,1),Qe.utc(2017,1,1)].map(i=>this.extract(i,n,"era"))),this.eraCache[t]})}extract(t,r,n){const i=this.dtFormatter(t,r),s=i.formatToParts(),o=s.find(a=>a.type.toLowerCase()===n);return o?o.value:null}numberFormatter(t={}){return new sce(this.intl,t.forceSimple||this.fastNumbers,t)}dtFormatter(t,r={}){return new oce(t,this.intl,r)}relFormatter(t={}){return new ace(this.intl,this.isEnglish(),t)}listFormatter(t={}){return Que(this.intl,t)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")}equals(t){return this.locale===t.locale&&this.numberingSystem===t.numberingSystem&&this.outputCalendar===t.outputCalendar}}let Z$=null;class Nn extends t1{static get utcInstance(){return Z$===null&&(Z$=new Nn(0)),Z$}static instance(t){return t===0?Nn.utcInstance:new Nn(t)}static parseSpecifier(t){if(t){const r=t.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(r)return new Nn(y2(r[1],r[2]))}return null}constructor(t){super(),this.fixed=t}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${p0(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${p0(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(t,r){return p0(this.fixed,r)}get isUniversal(){return!0}offset(){return this.fixed}equals(t){return t.type==="fixed"&&t.fixed===this.fixed}get isValid(){return!0}}class lce extends t1{constructor(t){super(),this.zoneName=t}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function _c(e,t){if(dt(e)||e===null)return t;if(e instanceof t1)return e;if(uce(e)){const r=e.toLowerCase();return r==="default"?t:r==="local"||r==="system"?f2.instance:r==="utc"||r==="gmt"?Nn.utcInstance:Nn.parseSpecifier(r)||Yl.create(e)}else return jh(e)?Nn.instance(e):typeof e=="object"&&e.offset&&typeof e.offset=="number"?e:new lce(e)}let qN=()=>Date.now(),WN="system",HN=null,ZN=null,JN=null,QN=60,YN;class Dr{static get now(){return qN}static set now(t){qN=t}static set defaultZone(t){WN=t}static get defaultZone(){return _c(WN,f2.instance)}static get defaultLocale(){return HN}static set defaultLocale(t){HN=t}static get defaultNumberingSystem(){return ZN}static set defaultNumberingSystem(t){ZN=t}static get defaultOutputCalendar(){return JN}static set defaultOutputCalendar(t){JN=t}static get twoDigitCutoffYear(){return QN}static set twoDigitCutoffYear(t){QN=t%100}static get throwOnInvalid(){return YN}static set throwOnInvalid(t){YN=t}static resetCaches(){Xt.resetCache(),Yl.resetCache()}}function dt(e){return typeof e>"u"}function jh(e){return typeof e=="number"}function m2(e){return typeof e=="number"&&e%1===0}function uce(e){return typeof e=="string"}function cce(e){return Object.prototype.toString.call(e)==="[object Date]"}function b9(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function dce(e){return Array.isArray(e)?e:[e]}function KN(e,t,r){if(e.length!==0)return e.reduce((n,i)=>{const s=[t(i),i];return n&&r(n[0],s[0])===n[0]?n:s},null)[1]}function hce(e,t){return t.reduce((r,n)=>(r[n]=e[n],r),{})}function Pm(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Ol(e,t,r){return m2(e)&&e>=t&&e<=r}function pce(e,t){return e-t*Math.floor(e/t)}function Fr(e,t=2){const r=e<0;let n;return r?n="-"+(""+-e).padStart(t,"0"):n=(""+e).padStart(t,"0"),n}function uc(e){if(!(dt(e)||e===null||e===""))return parseInt(e,10)}function xd(e){if(!(dt(e)||e===null||e===""))return parseFloat(e)}function vR(e){if(!(dt(e)||e===null||e==="")){const t=parseFloat("0."+e)*1e3;return Math.floor(t)}}function wR(e,t,r=!1){const n=10**t;return(r?Math.trunc:Math.round)(e*n)/n}function r1(e){return e%4===0&&(e%100!==0||e%400===0)}function h0(e){return r1(e)?366:365}function NS(e,t){const r=pce(t-1,12)+1,n=e+(t-r)/12;return r===2?r1(n)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][r-1]}function _R(e){let t=Date.UTC(e.year,e.month-1,e.day,e.hour,e.minute,e.second,e.millisecond);return e.year<100&&e.year>=0&&(t=new Date(t),t.setUTCFullYear(e.year,e.month-1,e.day)),+t}function DS(e){const t=(e+Math.floor(e/4)-Math.floor(e/100)+Math.floor(e/400))%7,r=e-1,n=(r+Math.floor(r/4)-Math.floor(r/100)+Math.floor(r/400))%7;return t===4||n===3?53:52}function iI(e){return e>99?e:e>Dr.twoDigitCutoffYear?1900+e:2e3+e}function S9(e,t,r,n=null){const i=new Date(e),s={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};n&&(s.timeZone=n);const o={timeZoneName:t,...s},a=new Intl.DateTimeFormat(r,o).formatToParts(i).find(l=>l.type.toLowerCase()==="timezonename");return a?a.value:null}function y2(e,t){let r=parseInt(e,10);Number.isNaN(r)&&(r=0);const n=parseInt(t,10)||0,i=r<0||Object.is(r,-0)?-n:n;return r*60+i}function x9(e){const t=Number(e);if(typeof e=="boolean"||e===""||Number.isNaN(t))throw new Es(`Invalid unit value ${e}`);return t}function FS(e,t){const r={};for(const n in e)if(Pm(e,n)){const i=e[n];if(i==null)continue;r[t(n)]=x9(i)}return r}function p0(e,t){const r=Math.trunc(Math.abs(e/60)),n=Math.trunc(Math.abs(e%60)),i=e>=0?"+":"-";switch(t){case"short":return`${i}${Fr(r,2)}:${Fr(n,2)}`;case"narrow":return`${i}${r}${n>0?`:${n}`:""}`;case"techie":return`${i}${Fr(r,2)}${Fr(n,2)}`;default:throw new RangeError(`Value format ${t} is out of range for property format`)}}function g2(e){return hce(e,["hour","minute","second","millisecond"])}const fce=["January","February","March","April","May","June","July","August","September","October","November","December"],$9=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],mce=["J","F","M","A","M","J","J","A","S","O","N","D"];function T9(e){switch(e){case"narrow":return[...mce];case"short":return[...$9];case"long":return[...fce];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const E9=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],M9=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],yce=["M","T","W","T","F","S","S"];function I9(e){switch(e){case"narrow":return[...yce];case"short":return[...M9];case"long":return[...E9];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const C9=["AM","PM"],gce=["Before Christ","Anno Domini"],vce=["BC","AD"],wce=["B","A"];function k9(e){switch(e){case"narrow":return[...wce];case"short":return[...vce];case"long":return[...gce];default:return null}}function _ce(e){return C9[e.hour<12?0:1]}function bce(e,t){return I9(t)[e.weekday-1]}function Sce(e,t){return T9(t)[e.month-1]}function xce(e,t){return k9(t)[e.year<0?0:1]}function $ce(e,t,r="always",n=!1){const i={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},s=["hours","minutes","seconds"].indexOf(e)===-1;if(r==="auto"&&s){const f=e==="days";switch(t){case 1:return f?"tomorrow":`next ${i[e][0]}`;case-1:return f?"yesterday":`last ${i[e][0]}`;case 0:return f?"today":`this ${i[e][0]}`}}const o=Object.is(t,-0)||t<0,a=Math.abs(t),l=a===1,c=i[e],h=n?l?c[1]:c[2]||c[1]:l?i[e][0]:e;return o?`${a} ${h} ago`:`in ${a} ${h}`}function XN(e,t){let r="";for(const n of e)n.literal?r+=n.val:r+=t(n.val);return r}const Tce={D:LS,DD:r9,DDD:n9,DDDD:i9,t:s9,tt:o9,ttt:a9,tttt:l9,T:u9,TT:c9,TTT:d9,TTTT:h9,f:p9,ff:m9,fff:g9,ffff:w9,F:f9,FF:y9,FFF:v9,FFFF:_9};class Ln{static create(t,r={}){return new Ln(t,r)}static parseFormat(t){let r=null,n="",i=!1;const s=[];for(let o=0;o<t.length;o++){const a=t.charAt(o);a==="'"?(n.length>0&&s.push({literal:i||/^\s+$/.test(n),val:n}),r=null,n="",i=!i):i||a===r?n+=a:(n.length>0&&s.push({literal:/^\s+$/.test(n),val:n}),n=a,r=a)}return n.length>0&&s.push({literal:i||/^\s+$/.test(n),val:n}),s}static macroTokenToFormatOpts(t){return Tce[t]}constructor(t,r){this.opts=r,this.loc=t,this.systemLoc=null}formatWithSystemDefault(t,r){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(t,{...this.opts,...r}).format()}formatDateTime(t,r={}){return this.loc.dtFormatter(t,{...this.opts,...r}).format()}formatDateTimeParts(t,r={}){return this.loc.dtFormatter(t,{...this.opts,...r}).formatToParts()}formatInterval(t,r={}){return this.loc.dtFormatter(t.start,{...this.opts,...r}).dtf.formatRange(t.start.toJSDate(),t.end.toJSDate())}resolvedOptions(t,r={}){return this.loc.dtFormatter(t,{...this.opts,...r}).resolvedOptions()}num(t,r=0){if(this.opts.forceSimple)return Fr(t,r);const n={...this.opts};return r>0&&(n.padTo=r),this.loc.numberFormatter(n).format(t)}formatDateTimeFromString(t,r){const n=this.loc.listingMode()==="en",i=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",s=(y,g)=>this.loc.extract(t,y,g),o=y=>t.isOffsetFixed&&t.offset===0&&y.allowZ?"Z":t.isValid?t.zone.formatOffset(t.ts,y.format):"",a=()=>n?_ce(t):s({hour:"numeric",hourCycle:"h12"},"dayperiod"),l=(y,g)=>n?Sce(t,y):s(g?{month:y}:{month:y,day:"numeric"},"month"),c=(y,g)=>n?bce(t,y):s(g?{weekday:y}:{weekday:y,month:"long",day:"numeric"},"weekday"),h=y=>{const g=Ln.macroTokenToFormatOpts(y);return g?this.formatWithSystemDefault(t,g):y},f=y=>n?xce(t,y):s({era:y},"era"),m=y=>{switch(y){case"S":return this.num(t.millisecond);case"u":case"SSS":return this.num(t.millisecond,3);case"s":return this.num(t.second);case"ss":return this.num(t.second,2);case"uu":return this.num(Math.floor(t.millisecond/10),2);case"uuu":return this.num(Math.floor(t.millisecond/100));case"m":return this.num(t.minute);case"mm":return this.num(t.minute,2);case"h":return this.num(t.hour%12===0?12:t.hour%12);case"hh":return this.num(t.hour%12===0?12:t.hour%12,2);case"H":return this.num(t.hour);case"HH":return this.num(t.hour,2);case"Z":return o({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return o({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return o({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return t.zone.offsetName(t.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return t.zone.offsetName(t.ts,{format:"long",locale:this.loc.locale});case"z":return t.zoneName;case"a":return a();case"d":return i?s({day:"numeric"},"day"):this.num(t.day);case"dd":return i?s({day:"2-digit"},"day"):this.num(t.day,2);case"c":return this.num(t.weekday);case"ccc":return c("short",!0);case"cccc":return c("long",!0);case"ccccc":return c("narrow",!0);case"E":return this.num(t.weekday);case"EEE":return c("short",!1);case"EEEE":return c("long",!1);case"EEEEE":return c("narrow",!1);case"L":return i?s({month:"numeric",day:"numeric"},"month"):this.num(t.month);case"LL":return i?s({month:"2-digit",day:"numeric"},"month"):this.num(t.month,2);case"LLL":return l("short",!0);case"LLLL":return l("long",!0);case"LLLLL":return l("narrow",!0);case"M":return i?s({month:"numeric"},"month"):this.num(t.month);case"MM":return i?s({month:"2-digit"},"month"):this.num(t.month,2);case"MMM":return l("short",!1);case"MMMM":return l("long",!1);case"MMMMM":return l("narrow",!1);case"y":return i?s({year:"numeric"},"year"):this.num(t.year);case"yy":return i?s({year:"2-digit"},"year"):this.num(t.year.toString().slice(-2),2);case"yyyy":return i?s({year:"numeric"},"year"):this.num(t.year,4);case"yyyyyy":return i?s({year:"numeric"},"year"):this.num(t.year,6);case"G":return f("short");case"GG":return f("long");case"GGGGG":return f("narrow");case"kk":return this.num(t.weekYear.toString().slice(-2),2);case"kkkk":return this.num(t.weekYear,4);case"W":return this.num(t.weekNumber);case"WW":return this.num(t.weekNumber,2);case"o":return this.num(t.ordinal);case"ooo":return this.num(t.ordinal,3);case"q":return this.num(t.quarter);case"qq":return this.num(t.quarter,2);case"X":return this.num(Math.floor(t.ts/1e3));case"x":return this.num(t.ts);default:return h(y)}};return XN(Ln.parseFormat(r),m)}formatDurationFromString(t,r){const n=l=>{switch(l[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},i=l=>c=>{const h=n(c);return h?this.num(l.get(h),c.length):c},s=Ln.parseFormat(r),o=s.reduce((l,{literal:c,val:h})=>c?l:l.concat(h),[]),a=t.shiftTo(...o.map(n).filter(l=>l));return XN(s,i(a))}}class Io{constructor(t,r){this.reason=t,this.explanation=r}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const P9=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function Hm(...e){const t=e.reduce((r,n)=>r+n.source,"");return RegExp(`^${t}$`)}function Zm(...e){return t=>e.reduce(([r,n,i],s)=>{const[o,a,l]=s(t,i);return[{...r,...o},a||n,l]},[{},null,1]).slice(0,2)}function Jm(e,...t){if(e==null)return[null,null];for(const[r,n]of t){const i=r.exec(e);if(i)return n(i)}return[null,null]}function O9(...e){return(t,r)=>{const n={};let i;for(i=0;i<e.length;i++)n[e[i]]=uc(t[r+i]);return[n,null,r+i]}}const R9=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,Ece=`(?:${R9.source}?(?:\\[(${P9.source})\\])?)?`,bR=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,A9=RegExp(`${bR.source}${Ece}`),SR=RegExp(`(?:T${A9.source})?`),Mce=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,Ice=/(\d{4})-?W(\d\d)(?:-?(\d))?/,Cce=/(\d{4})-?(\d{3})/,kce=O9("weekYear","weekNumber","weekDay"),Pce=O9("year","ordinal"),Oce=/(\d{4})-(\d\d)-(\d\d)/,L9=RegExp(`${bR.source} ?(?:${R9.source}|(${P9.source}))?`),Rce=RegExp(`(?: ${L9.source})?`);function rm(e,t,r){const n=e[t];return dt(n)?r:uc(n)}function Ace(e,t){return[{year:rm(e,t),month:rm(e,t+1,1),day:rm(e,t+2,1)},null,t+3]}function Qm(e,t){return[{hours:rm(e,t,0),minutes:rm(e,t+1,0),seconds:rm(e,t+2,0),milliseconds:vR(e[t+3])},null,t+4]}function n1(e,t){const r=!e[t]&&!e[t+1],n=y2(e[t+1],e[t+2]),i=r?null:Nn.instance(n);return[{},i,t+3]}function i1(e,t){const r=e[t]?Yl.create(e[t]):null;return[{},r,t+1]}const Lce=RegExp(`^T?${bR.source}$`),Nce=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function Dce(e){const[t,r,n,i,s,o,a,l,c]=e,h=t[0]==="-",f=l&&l[0]==="-",m=(y,g=!1)=>y!==void 0&&(g||y&&h)?-y:y;return[{years:m(xd(r)),months:m(xd(n)),weeks:m(xd(i)),days:m(xd(s)),hours:m(xd(o)),minutes:m(xd(a)),seconds:m(xd(l),l==="-0"),milliseconds:m(vR(c),f)}]}const Fce={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function xR(e,t,r,n,i,s,o){const a={year:t.length===2?iI(uc(t)):uc(t),month:$9.indexOf(r)+1,day:uc(n),hour:uc(i),minute:uc(s)};return o&&(a.second=uc(o)),e&&(a.weekday=e.length>3?E9.indexOf(e)+1:M9.indexOf(e)+1),a}const jce=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function Vce(e){const[,t,r,n,i,s,o,a,l,c,h,f]=e,m=xR(t,i,n,r,s,o,a);let y;return l?y=Fce[l]:c?y=0:y=y2(h,f),[m,new Nn(y)]}function zce(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const Uce=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,Gce=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,Bce=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function eD(e){const[,t,r,n,i,s,o,a]=e;return[xR(t,i,n,r,s,o,a),Nn.utcInstance]}function qce(e){const[,t,r,n,i,s,o,a]=e;return[xR(t,a,r,n,i,s,o),Nn.utcInstance]}const Wce=Hm(Mce,SR),Hce=Hm(Ice,SR),Zce=Hm(Cce,SR),Jce=Hm(A9),N9=Zm(Ace,Qm,n1,i1),Qce=Zm(kce,Qm,n1,i1),Yce=Zm(Pce,Qm,n1,i1),Kce=Zm(Qm,n1,i1);function Xce(e){return Jm(e,[Wce,N9],[Hce,Qce],[Zce,Yce],[Jce,Kce])}function ede(e){return Jm(zce(e),[jce,Vce])}function tde(e){return Jm(e,[Uce,eD],[Gce,eD],[Bce,qce])}function rde(e){return Jm(e,[Nce,Dce])}const nde=Zm(Qm);function ide(e){return Jm(e,[Lce,nde])}const sde=Hm(Oce,Rce),ode=Hm(L9),ade=Zm(Qm,n1,i1);function lde(e){return Jm(e,[sde,N9],[ode,ade])}const ude="Invalid Duration",D9={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},cde={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3},...D9},ls=146097/400,kp=146097/4800,dde={years:{quarters:4,months:12,weeks:ls/7,days:ls,hours:ls*24,minutes:ls*24*60,seconds:ls*24*60*60,milliseconds:ls*24*60*60*1e3},quarters:{months:3,weeks:ls/28,days:ls/4,hours:ls*24/4,minutes:ls*24*60/4,seconds:ls*24*60*60/4,milliseconds:ls*24*60*60*1e3/4},months:{weeks:kp/7,days:kp,hours:kp*24,minutes:kp*24*60,seconds:kp*24*60*60,milliseconds:kp*24*60*60*1e3},...D9},jd=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],hde=jd.slice(0).reverse();function xu(e,t,r=!1){const n={values:r?t.values:{...e.values,...t.values||{}},loc:e.loc.clone(t.loc),conversionAccuracy:t.conversionAccuracy||e.conversionAccuracy,matrix:t.matrix||e.matrix};return new mt(n)}function pde(e){return e<0?Math.floor(e):Math.ceil(e)}function F9(e,t,r,n,i){const s=e[i][r],o=t[r]/s,a=Math.sign(o)===Math.sign(n[i]),l=!a&&n[i]!==0&&Math.abs(o)<=1?pde(o):Math.trunc(o);n[i]+=l,t[r]-=l*s}function fde(e,t){hde.reduce((r,n)=>dt(t[n])?r:(r&&F9(e,t,r,t,n),n),null)}function mde(e){const t={};for(const[r,n]of Object.entries(e))n!==0&&(t[r]=n);return t}class mt{constructor(t){const r=t.conversionAccuracy==="longterm"||!1;let n=r?dde:cde;t.matrix&&(n=t.matrix),this.values=t.values,this.loc=t.loc||Xt.create(),this.conversionAccuracy=r?"longterm":"casual",this.invalid=t.invalid||null,this.matrix=n,this.isLuxonDuration=!0}static fromMillis(t,r){return mt.fromObject({milliseconds:t},r)}static fromObject(t,r={}){if(t==null||typeof t!="object")throw new Es(`Duration.fromObject: argument expected to be an object, got ${t===null?"null":typeof t}`);return new mt({values:FS(t,mt.normalizeUnit),loc:Xt.fromObject(r),conversionAccuracy:r.conversionAccuracy,matrix:r.matrix})}static fromDurationLike(t){if(jh(t))return mt.fromMillis(t);if(mt.isDuration(t))return t;if(typeof t=="object")return mt.fromObject(t);throw new Es(`Unknown duration argument ${t} of type ${typeof t}`)}static fromISO(t,r){const[n]=rde(t);return n?mt.fromObject(n,r):mt.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static fromISOTime(t,r){const[n]=ide(t);return n?mt.fromObject(n,r):mt.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static invalid(t,r=null){if(!t)throw new Es("need to specify a reason the Duration is invalid");const n=t instanceof Io?t:new Io(t,r);if(Dr.throwOnInvalid)throw new Gue(n);return new mt({invalid:n})}static normalizeUnit(t){const r={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[t&&t.toLowerCase()];if(!r)throw new t9(t);return r}static isDuration(t){return t&&t.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(t,r={}){const n={...r,floor:r.round!==!1&&r.floor!==!1};return this.isValid?Ln.create(this.loc,n).formatDurationFromString(this,t):ude}toHuman(t={}){const r=jd.map(n=>{const i=this.values[n];return dt(i)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...t,unit:n.slice(0,-1)}).format(i)}).filter(n=>n);return this.loc.listFormatter({type:"conjunction",style:t.listStyle||"narrow",...t}).format(r)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let t="P";return this.years!==0&&(t+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(t+=this.months+this.quarters*3+"M"),this.weeks!==0&&(t+=this.weeks+"W"),this.days!==0&&(t+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(t+="T"),this.hours!==0&&(t+=this.hours+"H"),this.minutes!==0&&(t+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(t+=wR(this.seconds+this.milliseconds/1e3,3)+"S"),t==="P"&&(t+="T0S"),t}toISOTime(t={}){if(!this.isValid)return null;const r=this.toMillis();if(r<0||r>=864e5)return null;t={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...t};const n=this.shiftTo("hours","minutes","seconds","milliseconds");let i=t.format==="basic"?"hhmm":"hh:mm";(!t.suppressSeconds||n.seconds!==0||n.milliseconds!==0)&&(i+=t.format==="basic"?"ss":":ss",(!t.suppressMilliseconds||n.milliseconds!==0)&&(i+=".SSS"));let s=n.toFormat(i);return t.includePrefix&&(s="T"+s),s}toJSON(){return this.toISO()}toString(){return this.toISO()}toMillis(){return this.as("milliseconds")}valueOf(){return this.toMillis()}plus(t){if(!this.isValid)return this;const r=mt.fromDurationLike(t),n={};for(const i of jd)(Pm(r.values,i)||Pm(this.values,i))&&(n[i]=r.get(i)+this.get(i));return xu(this,{values:n},!0)}minus(t){if(!this.isValid)return this;const r=mt.fromDurationLike(t);return this.plus(r.negate())}mapUnits(t){if(!this.isValid)return this;const r={};for(const n of Object.keys(this.values))r[n]=x9(t(this.values[n],n));return xu(this,{values:r},!0)}get(t){return this[mt.normalizeUnit(t)]}set(t){if(!this.isValid)return this;const r={...this.values,...FS(t,mt.normalizeUnit)};return xu(this,{values:r})}reconfigure({locale:t,numberingSystem:r,conversionAccuracy:n,matrix:i}={}){const o={loc:this.loc.clone({locale:t,numberingSystem:r}),matrix:i,conversionAccuracy:n};return xu(this,o)}as(t){return this.isValid?this.shiftTo(t).get(t):NaN}normalize(){if(!this.isValid)return this;const t=this.toObject();return fde(this.matrix,t),xu(this,{values:t},!0)}rescale(){if(!this.isValid)return this;const t=mde(this.normalize().shiftToAll().toObject());return xu(this,{values:t},!0)}shiftTo(...t){if(!this.isValid)return this;if(t.length===0)return this;t=t.map(o=>mt.normalizeUnit(o));const r={},n={},i=this.toObject();let s;for(const o of jd)if(t.indexOf(o)>=0){s=o;let a=0;for(const c in n)a+=this.matrix[c][o]*n[c],n[c]=0;jh(i[o])&&(a+=i[o]);const l=Math.trunc(a);r[o]=l,n[o]=(a*1e3-l*1e3)/1e3;for(const c in i)jd.indexOf(c)>jd.indexOf(o)&&F9(this.matrix,i,c,r,o)}else jh(i[o])&&(n[o]=i[o]);for(const o in n)n[o]!==0&&(r[s]+=o===s?n[o]:n[o]/this.matrix[s][o]);return xu(this,{values:r},!0).normalize()}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const t={};for(const r of Object.keys(this.values))t[r]=this.values[r]===0?0:-this.values[r];return xu(this,{values:t},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(t){if(!this.isValid||!t.isValid||!this.loc.equals(t.loc))return!1;function r(n,i){return n===void 0||n===0?i===void 0||i===0:n===i}for(const n of jd)if(!r(this.values[n],t.values[n]))return!1;return!0}}const Pp="Invalid Interval";function yde(e,t){return!e||!e.isValid?Sr.invalid("missing or invalid start"):!t||!t.isValid?Sr.invalid("missing or invalid end"):t<e?Sr.invalid("end before start",`The end of an interval must be after its start, but you had start=${e.toISO()} and end=${t.toISO()}`):null}class Sr{constructor(t){this.s=t.start,this.e=t.end,this.invalid=t.invalid||null,this.isLuxonInterval=!0}static invalid(t,r=null){if(!t)throw new Es("need to specify a reason the Interval is invalid");const n=t instanceof Io?t:new Io(t,r);if(Dr.throwOnInvalid)throw new Uue(n);return new Sr({invalid:n})}static fromDateTimes(t,r){const n=Oy(t),i=Oy(r),s=yde(n,i);return s??new Sr({start:n,end:i})}static after(t,r){const n=mt.fromDurationLike(r),i=Oy(t);return Sr.fromDateTimes(i,i.plus(n))}static before(t,r){const n=mt.fromDurationLike(r),i=Oy(t);return Sr.fromDateTimes(i.minus(n),i)}static fromISO(t,r){const[n,i]=(t||"").split("/",2);if(n&&i){let s,o;try{s=Qe.fromISO(n,r),o=s.isValid}catch{o=!1}let a,l;try{a=Qe.fromISO(i,r),l=a.isValid}catch{l=!1}if(o&&l)return Sr.fromDateTimes(s,a);if(o){const c=mt.fromISO(i,r);if(c.isValid)return Sr.after(s,c)}else if(l){const c=mt.fromISO(n,r);if(c.isValid)return Sr.before(a,c)}}return Sr.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static isInterval(t){return t&&t.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(t="milliseconds"){return this.isValid?this.toDuration(t).get(t):NaN}count(t="milliseconds"){if(!this.isValid)return NaN;const r=this.start.startOf(t),n=this.end.startOf(t);return Math.floor(n.diff(r,t).get(t))+(n.valueOf()!==this.end.valueOf())}hasSame(t){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,t):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(t){return this.isValid?this.s>t:!1}isBefore(t){return this.isValid?this.e<=t:!1}contains(t){return this.isValid?this.s<=t&&this.e>t:!1}set({start:t,end:r}={}){return this.isValid?Sr.fromDateTimes(t||this.s,r||this.e):this}splitAt(...t){if(!this.isValid)return[];const r=t.map(Oy).filter(o=>this.contains(o)).sort(),n=[];let{s:i}=this,s=0;for(;i<this.e;){const o=r[s]||this.e,a=+o>+this.e?this.e:o;n.push(Sr.fromDateTimes(i,a)),i=a,s+=1}return n}splitBy(t){const r=mt.fromDurationLike(t);if(!this.isValid||!r.isValid||r.as("milliseconds")===0)return[];let{s:n}=this,i=1,s;const o=[];for(;n<this.e;){const a=this.start.plus(r.mapUnits(l=>l*i));s=+a>+this.e?this.e:a,o.push(Sr.fromDateTimes(n,s)),n=s,i+=1}return o}divideEqually(t){return this.isValid?this.splitBy(this.length()/t).slice(0,t):[]}overlaps(t){return this.e>t.s&&this.s<t.e}abutsStart(t){return this.isValid?+this.e==+t.s:!1}abutsEnd(t){return this.isValid?+t.e==+this.s:!1}engulfs(t){return this.isValid?this.s<=t.s&&this.e>=t.e:!1}equals(t){return!this.isValid||!t.isValid?!1:this.s.equals(t.s)&&this.e.equals(t.e)}intersection(t){if(!this.isValid)return this;const r=this.s>t.s?this.s:t.s,n=this.e<t.e?this.e:t.e;return r>=n?null:Sr.fromDateTimes(r,n)}union(t){if(!this.isValid)return this;const r=this.s<t.s?this.s:t.s,n=this.e>t.e?this.e:t.e;return Sr.fromDateTimes(r,n)}static merge(t){const[r,n]=t.sort((i,s)=>i.s-s.s).reduce(([i,s],o)=>s?s.overlaps(o)||s.abutsStart(o)?[i,s.union(o)]:[i.concat([s]),o]:[i,o],[[],null]);return n&&r.push(n),r}static xor(t){let r=null,n=0;const i=[],s=t.map(l=>[{time:l.s,type:"s"},{time:l.e,type:"e"}]),o=Array.prototype.concat(...s),a=o.sort((l,c)=>l.time-c.time);for(const l of a)n+=l.type==="s"?1:-1,n===1?r=l.time:(r&&+r!=+l.time&&i.push(Sr.fromDateTimes(r,l.time)),r=null);return Sr.merge(i)}difference(...t){return Sr.xor([this].concat(t)).map(r=>this.intersection(r)).filter(r=>r&&!r.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()}  ${this.e.toISO()})`:Pp}toLocaleString(t=LS,r={}){return this.isValid?Ln.create(this.s.loc.clone(r),t).formatInterval(this):Pp}toISO(t){return this.isValid?`${this.s.toISO(t)}/${this.e.toISO(t)}`:Pp}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:Pp}toISOTime(t){return this.isValid?`${this.s.toISOTime(t)}/${this.e.toISOTime(t)}`:Pp}toFormat(t,{separator:r="  "}={}){return this.isValid?`${this.s.toFormat(t)}${r}${this.e.toFormat(t)}`:Pp}toDuration(t,r){return this.isValid?this.e.diff(this.s,t,r):mt.invalid(this.invalidReason)}mapEndpoints(t){return Sr.fromDateTimes(t(this.s),t(this.e))}}class lw{static hasDST(t=Dr.defaultZone){const r=Qe.now().setZone(t).set({month:12});return!t.isUniversal&&r.offset!==r.set({month:6}).offset}static isValidIANAZone(t){return Yl.isValidZone(t)}static normalizeZone(t){return _c(t,Dr.defaultZone)}static months(t="long",{locale:r=null,numberingSystem:n=null,locObj:i=null,outputCalendar:s="gregory"}={}){return(i||Xt.create(r,n,s)).months(t)}static monthsFormat(t="long",{locale:r=null,numberingSystem:n=null,locObj:i=null,outputCalendar:s="gregory"}={}){return(i||Xt.create(r,n,s)).months(t,!0)}static weekdays(t="long",{locale:r=null,numberingSystem:n=null,locObj:i=null}={}){return(i||Xt.create(r,n,null)).weekdays(t)}static weekdaysFormat(t="long",{locale:r=null,numberingSystem:n=null,locObj:i=null}={}){return(i||Xt.create(r,n,null)).weekdays(t,!0)}static meridiems({locale:t=null}={}){return Xt.create(t).meridiems()}static eras(t="short",{locale:r=null}={}){return Xt.create(r,null,"gregory").eras(t)}static features(){return{relative:b9()}}}function tD(e,t){const r=i=>i.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),n=r(t)-r(e);return Math.floor(mt.fromMillis(n).as("days"))}function gde(e,t,r){const n=[["years",(l,c)=>c.year-l.year],["quarters",(l,c)=>c.quarter-l.quarter+(c.year-l.year)*4],["months",(l,c)=>c.month-l.month+(c.year-l.year)*12],["weeks",(l,c)=>{const h=tD(l,c);return(h-h%7)/7}],["days",tD]],i={},s=e;let o,a;for(const[l,c]of n)r.indexOf(l)>=0&&(o=l,i[l]=c(e,t),a=s.plus(i),a>t?(i[l]--,e=s.plus(i)):e=a);return[e,i,a,o]}function vde(e,t,r,n){let[i,s,o,a]=gde(e,t,r);const l=t-i,c=r.filter(f=>["hours","minutes","seconds","milliseconds"].indexOf(f)>=0);c.length===0&&(o<t&&(o=i.plus({[a]:1})),o!==i&&(s[a]=(s[a]||0)+l/(o-i)));const h=mt.fromObject(s,n);return c.length>0?mt.fromMillis(l,n).shiftTo(...c).plus(h):h}const $R={arab:"[-]",arabext:"[-]",bali:"[-]",beng:"[-]",deva:"[-]",fullwide:"[-]",gujr:"[-]",hanidec:"[|||||||||]",khmr:"[-]",knda:"[-]",laoo:"[-]",limb:"[-]",mlym:"[-]",mong:"[-]",mymr:"[-]",orya:"[-]",tamldec:"[-]",telu:"[-]",thai:"[-]",tibt:"[-]",latn:"\\d"},rD={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},wde=$R.hanidec.replace(/[\[|\]]/g,"").split("");function _de(e){let t=parseInt(e,10);if(isNaN(t)){t="";for(let r=0;r<e.length;r++){const n=e.charCodeAt(r);if(e[r].search($R.hanidec)!==-1)t+=wde.indexOf(e[r]);else for(const i in rD){const[s,o]=rD[i];n>=s&&n<=o&&(t+=n-s)}}return parseInt(t,10)}else return t}function Qs({numberingSystem:e},t=""){return new RegExp(`${$R[e||"latn"]}${t}`)}const bde="missing Intl.DateTimeFormat.formatToParts support";function $t(e,t=r=>r){return{regex:e,deser:([r])=>t(_de(r))}}const Sde=String.fromCharCode(160),j9=`[ ${Sde}]`,V9=new RegExp(j9,"g");function xde(e){return e.replace(/\./g,"\\.?").replace(V9,j9)}function nD(e){return e.replace(/\./g,"").replace(V9," ").toLowerCase()}function Ys(e,t){return e===null?null:{regex:RegExp(e.map(xde).join("|")),deser:([r])=>e.findIndex(n=>nD(r)===nD(n))+t}}function iD(e,t){return{regex:e,deser:([,r,n])=>y2(r,n),groups:t}}function uw(e){return{regex:e,deser:([t])=>t}}function $de(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function Tde(e,t){const r=Qs(t),n=Qs(t,"{2}"),i=Qs(t,"{3}"),s=Qs(t,"{4}"),o=Qs(t,"{6}"),a=Qs(t,"{1,2}"),l=Qs(t,"{1,3}"),c=Qs(t,"{1,6}"),h=Qs(t,"{1,9}"),f=Qs(t,"{2,4}"),m=Qs(t,"{4,6}"),y=w=>({regex:RegExp($de(w.val)),deser:([b])=>b,literal:!0}),v=(w=>{if(e.literal)return y(w);switch(w.val){case"G":return Ys(t.eras("short",!1),0);case"GG":return Ys(t.eras("long",!1),0);case"y":return $t(c);case"yy":return $t(f,iI);case"yyyy":return $t(s);case"yyyyy":return $t(m);case"yyyyyy":return $t(o);case"M":return $t(a);case"MM":return $t(n);case"MMM":return Ys(t.months("short",!0,!1),1);case"MMMM":return Ys(t.months("long",!0,!1),1);case"L":return $t(a);case"LL":return $t(n);case"LLL":return Ys(t.months("short",!1,!1),1);case"LLLL":return Ys(t.months("long",!1,!1),1);case"d":return $t(a);case"dd":return $t(n);case"o":return $t(l);case"ooo":return $t(i);case"HH":return $t(n);case"H":return $t(a);case"hh":return $t(n);case"h":return $t(a);case"mm":return $t(n);case"m":return $t(a);case"q":return $t(a);case"qq":return $t(n);case"s":return $t(a);case"ss":return $t(n);case"S":return $t(l);case"SSS":return $t(i);case"u":return uw(h);case"uu":return uw(a);case"uuu":return $t(r);case"a":return Ys(t.meridiems(),0);case"kkkk":return $t(s);case"kk":return $t(f,iI);case"W":return $t(a);case"WW":return $t(n);case"E":case"c":return $t(r);case"EEE":return Ys(t.weekdays("short",!1,!1),1);case"EEEE":return Ys(t.weekdays("long",!1,!1),1);case"ccc":return Ys(t.weekdays("short",!0,!1),1);case"cccc":return Ys(t.weekdays("long",!0,!1),1);case"Z":case"ZZ":return iD(new RegExp(`([+-]${a.source})(?::(${n.source}))?`),2);case"ZZZ":return iD(new RegExp(`([+-]${a.source})(${n.source})?`),2);case"z":return uw(/[a-z_+-/]{1,256}?/i);case" ":return uw(/[^\S\n\r]/);default:return y(w)}})(e)||{invalidReason:bde};return v.token=e,v}const Ede={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour:{numeric:"h","2-digit":"hh"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function Mde(e,t){const{type:r,value:n}=e;if(r==="literal"){const o=/^\s+$/.test(n);return{literal:!o,val:o?" ":n}}const i=t[r];let s=Ede[r];if(typeof s=="object"&&(s=s[i]),s)return{literal:!1,val:s}}function Ide(e){return[`^${e.map(r=>r.regex).reduce((r,n)=>`${r}(${n.source})`,"")}$`,e]}function Cde(e,t,r){const n=e.match(t);if(n){const i={};let s=1;for(const o in r)if(Pm(r,o)){const a=r[o],l=a.groups?a.groups+1:1;!a.literal&&a.token&&(i[a.token.val[0]]=a.deser(n.slice(s,s+l))),s+=l}return[n,i]}else return[n,{}]}function kde(e){const t=s=>{switch(s){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let r=null,n;return dt(e.z)||(r=Yl.create(e.z)),dt(e.Z)||(r||(r=new Nn(e.Z)),n=e.Z),dt(e.q)||(e.M=(e.q-1)*3+1),dt(e.h)||(e.h<12&&e.a===1?e.h+=12:e.h===12&&e.a===0&&(e.h=0)),e.G===0&&e.y&&(e.y=-e.y),dt(e.u)||(e.S=vR(e.u)),[Object.keys(e).reduce((s,o)=>{const a=t(o);return a&&(s[a]=e[o]),s},{}),r,n]}let J$=null;function Pde(){return J$||(J$=Qe.fromMillis(1555555555555)),J$}function Ode(e,t){if(e.literal)return e;const r=Ln.macroTokenToFormatOpts(e.val),n=G9(r,t);return n==null||n.includes(void 0)?e:n}function z9(e,t){return Array.prototype.concat(...e.map(r=>Ode(r,t)))}function U9(e,t,r){const n=z9(Ln.parseFormat(r),e),i=n.map(o=>Tde(o,e)),s=i.find(o=>o.invalidReason);if(s)return{input:t,tokens:n,invalidReason:s.invalidReason};{const[o,a]=Ide(i),l=RegExp(o,"i"),[c,h]=Cde(t,l,a),[f,m,y]=h?kde(h):[null,null,void 0];if(Pm(h,"a")&&Pm(h,"H"))throw new ng("Can't include meridiem when specifying 24-hour format");return{input:t,tokens:n,regex:l,rawMatches:c,matches:h,result:f,zone:m,specificOffset:y}}}function Rde(e,t,r){const{result:n,zone:i,specificOffset:s,invalidReason:o}=U9(e,t,r);return[n,i,s,o]}function G9(e,t){return e?Ln.create(t,e).formatDateTimeParts(Pde()).map(i=>Mde(i,e)):null}const B9=[0,31,59,90,120,151,181,212,243,273,304,334],q9=[0,31,60,91,121,152,182,213,244,274,305,335];function ks(e,t){return new Io("unit out of range",`you specified ${t} (of type ${typeof t}) as a ${e}, which is invalid`)}function W9(e,t,r){const n=new Date(Date.UTC(e,t-1,r));e<100&&e>=0&&n.setUTCFullYear(n.getUTCFullYear()-1900);const i=n.getUTCDay();return i===0?7:i}function H9(e,t,r){return r+(r1(e)?q9:B9)[t-1]}function Z9(e,t){const r=r1(e)?q9:B9,n=r.findIndex(s=>s<t),i=t-r[n];return{month:n+1,day:i}}function sI(e){const{year:t,month:r,day:n}=e,i=H9(t,r,n),s=W9(t,r,n);let o=Math.floor((i-s+10)/7),a;return o<1?(a=t-1,o=DS(a)):o>DS(t)?(a=t+1,o=1):a=t,{weekYear:a,weekNumber:o,weekday:s,...g2(e)}}function sD(e){const{weekYear:t,weekNumber:r,weekday:n}=e,i=W9(t,1,4),s=h0(t);let o=r*7+n-i-3,a;o<1?(a=t-1,o+=h0(a)):o>s?(a=t+1,o-=h0(t)):a=t;const{month:l,day:c}=Z9(a,o);return{year:a,month:l,day:c,...g2(e)}}function Q$(e){const{year:t,month:r,day:n}=e,i=H9(t,r,n);return{year:t,ordinal:i,...g2(e)}}function oD(e){const{year:t,ordinal:r}=e,{month:n,day:i}=Z9(t,r);return{year:t,month:n,day:i,...g2(e)}}function Ade(e){const t=m2(e.weekYear),r=Ol(e.weekNumber,1,DS(e.weekYear)),n=Ol(e.weekday,1,7);return t?r?n?!1:ks("weekday",e.weekday):ks("week",e.week):ks("weekYear",e.weekYear)}function Lde(e){const t=m2(e.year),r=Ol(e.ordinal,1,h0(e.year));return t?r?!1:ks("ordinal",e.ordinal):ks("year",e.year)}function J9(e){const t=m2(e.year),r=Ol(e.month,1,12),n=Ol(e.day,1,NS(e.year,e.month));return t?r?n?!1:ks("day",e.day):ks("month",e.month):ks("year",e.year)}function Q9(e){const{hour:t,minute:r,second:n,millisecond:i}=e,s=Ol(t,0,23)||t===24&&r===0&&n===0&&i===0,o=Ol(r,0,59),a=Ol(n,0,59),l=Ol(i,0,999);return s?o?a?l?!1:ks("millisecond",i):ks("second",n):ks("minute",r):ks("hour",t)}const Y$="Invalid DateTime",aD=864e13;function cw(e){return new Io("unsupported zone",`the zone "${e.name}" is not supported`)}function K$(e){return e.weekData===null&&(e.weekData=sI(e.c)),e.weekData}function ky(e,t){const r={ts:e.ts,zone:e.zone,c:e.c,o:e.o,loc:e.loc,invalid:e.invalid};return new Qe({...r,...t,old:r})}function Y9(e,t,r){let n=e-t*60*1e3;const i=r.offset(n);if(t===i)return[n,t];n-=(i-t)*60*1e3;const s=r.offset(n);return i===s?[n,i]:[e-Math.min(i,s)*60*1e3,Math.max(i,s)]}function lD(e,t){e+=t*60*1e3;const r=new Date(e);return{year:r.getUTCFullYear(),month:r.getUTCMonth()+1,day:r.getUTCDate(),hour:r.getUTCHours(),minute:r.getUTCMinutes(),second:r.getUTCSeconds(),millisecond:r.getUTCMilliseconds()}}function M_(e,t,r){return Y9(_R(e),t,r)}function uD(e,t){const r=e.o,n=e.c.year+Math.trunc(t.years),i=e.c.month+Math.trunc(t.months)+Math.trunc(t.quarters)*3,s={...e.c,year:n,month:i,day:Math.min(e.c.day,NS(n,i))+Math.trunc(t.days)+Math.trunc(t.weeks)*7},o=mt.fromObject({years:t.years-Math.trunc(t.years),quarters:t.quarters-Math.trunc(t.quarters),months:t.months-Math.trunc(t.months),weeks:t.weeks-Math.trunc(t.weeks),days:t.days-Math.trunc(t.days),hours:t.hours,minutes:t.minutes,seconds:t.seconds,milliseconds:t.milliseconds}).as("milliseconds"),a=_R(s);let[l,c]=Y9(a,r,e.zone);return o!==0&&(l+=o,c=e.zone.offset(l)),{ts:l,o:c}}function Py(e,t,r,n,i,s){const{setZone:o,zone:a}=r;if(e&&Object.keys(e).length!==0||t){const l=t||a,c=Qe.fromObject(e,{...r,zone:l,specificOffset:s});return o?c:c.setZone(a)}else return Qe.invalid(new Io("unparsable",`the input "${i}" can't be parsed as ${n}`))}function dw(e,t,r=!0){return e.isValid?Ln.create(Xt.create("en-US"),{allowZ:r,forceSimple:!0}).formatDateTimeFromString(e,t):null}function X$(e,t){const r=e.c.year>9999||e.c.year<0;let n="";return r&&e.c.year>=0&&(n+="+"),n+=Fr(e.c.year,r?6:4),t?(n+="-",n+=Fr(e.c.month),n+="-",n+=Fr(e.c.day)):(n+=Fr(e.c.month),n+=Fr(e.c.day)),n}function cD(e,t,r,n,i,s){let o=Fr(e.c.hour);return t?(o+=":",o+=Fr(e.c.minute),(e.c.second!==0||!r)&&(o+=":")):o+=Fr(e.c.minute),(e.c.second!==0||!r)&&(o+=Fr(e.c.second),(e.c.millisecond!==0||!n)&&(o+=".",o+=Fr(e.c.millisecond,3))),i&&(e.isOffsetFixed&&e.offset===0&&!s?o+="Z":e.o<0?(o+="-",o+=Fr(Math.trunc(-e.o/60)),o+=":",o+=Fr(Math.trunc(-e.o%60))):(o+="+",o+=Fr(Math.trunc(e.o/60)),o+=":",o+=Fr(Math.trunc(e.o%60)))),s&&(o+="["+e.zone.ianaName+"]"),o}const K9={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},Nde={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},Dde={ordinal:1,hour:0,minute:0,second:0,millisecond:0},X9=["year","month","day","hour","minute","second","millisecond"],Fde=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],jde=["year","ordinal","hour","minute","second","millisecond"];function dD(e){const t={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[e.toLowerCase()];if(!t)throw new t9(e);return t}function hD(e,t){const r=_c(t.zone,Dr.defaultZone),n=Xt.fromObject(t),i=Dr.now();let s,o;if(dt(e.year))s=i;else{for(const c of X9)dt(e[c])&&(e[c]=K9[c]);const a=J9(e)||Q9(e);if(a)return Qe.invalid(a);const l=r.offset(i);[s,o]=M_(e,l,r)}return new Qe({ts:s,zone:r,loc:n,o})}function pD(e,t,r){const n=dt(r.round)?!0:r.round,i=(o,a)=>(o=wR(o,n||r.calendary?0:2,!0),t.loc.clone(r).relFormatter(r).format(o,a)),s=o=>r.calendary?t.hasSame(e,o)?0:t.startOf(o).diff(e.startOf(o),o).get(o):t.diff(e,o).get(o);if(r.unit)return i(s(r.unit),r.unit);for(const o of r.units){const a=s(o);if(Math.abs(a)>=1)return i(a,o)}return i(e>t?-0:0,r.units[r.units.length-1])}function fD(e){let t={},r;return e.length>0&&typeof e[e.length-1]=="object"?(t=e[e.length-1],r=Array.from(e).slice(0,e.length-1)):r=Array.from(e),[t,r]}class Qe{constructor(t){const r=t.zone||Dr.defaultZone;let n=t.invalid||(Number.isNaN(t.ts)?new Io("invalid input"):null)||(r.isValid?null:cw(r));this.ts=dt(t.ts)?Dr.now():t.ts;let i=null,s=null;if(!n)if(t.old&&t.old.ts===this.ts&&t.old.zone.equals(r))[i,s]=[t.old.c,t.old.o];else{const a=r.offset(this.ts);i=lD(this.ts,a),n=Number.isNaN(i.year)?new Io("invalid input"):null,i=n?null:i,s=n?null:a}this._zone=r,this.loc=t.loc||Xt.create(),this.invalid=n,this.weekData=null,this.c=i,this.o=s,this.isLuxonDateTime=!0}static now(){return new Qe({})}static local(){const[t,r]=fD(arguments),[n,i,s,o,a,l,c]=r;return hD({year:n,month:i,day:s,hour:o,minute:a,second:l,millisecond:c},t)}static utc(){const[t,r]=fD(arguments),[n,i,s,o,a,l,c]=r;return t.zone=Nn.utcInstance,hD({year:n,month:i,day:s,hour:o,minute:a,second:l,millisecond:c},t)}static fromJSDate(t,r={}){const n=cce(t)?t.valueOf():NaN;if(Number.isNaN(n))return Qe.invalid("invalid input");const i=_c(r.zone,Dr.defaultZone);return i.isValid?new Qe({ts:n,zone:i,loc:Xt.fromObject(r)}):Qe.invalid(cw(i))}static fromMillis(t,r={}){if(jh(t))return t<-aD||t>aD?Qe.invalid("Timestamp out of range"):new Qe({ts:t,zone:_c(r.zone,Dr.defaultZone),loc:Xt.fromObject(r)});throw new Es(`fromMillis requires a numerical input, but received a ${typeof t} with value ${t}`)}static fromSeconds(t,r={}){if(jh(t))return new Qe({ts:t*1e3,zone:_c(r.zone,Dr.defaultZone),loc:Xt.fromObject(r)});throw new Es("fromSeconds requires a numerical input")}static fromObject(t,r={}){t=t||{};const n=_c(r.zone,Dr.defaultZone);if(!n.isValid)return Qe.invalid(cw(n));const i=Dr.now(),s=dt(r.specificOffset)?n.offset(i):r.specificOffset,o=FS(t,dD),a=!dt(o.ordinal),l=!dt(o.year),c=!dt(o.month)||!dt(o.day),h=l||c,f=o.weekYear||o.weekNumber,m=Xt.fromObject(r);if((h||a)&&f)throw new ng("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(c&&a)throw new ng("Can't mix ordinal dates with month/day");const y=f||o.weekday&&!h;let g,v,w=lD(i,s);y?(g=Fde,v=Nde,w=sI(w)):a?(g=jde,v=Dde,w=Q$(w)):(g=X9,v=K9);let b=!1;for(const O of g){const W=o[O];dt(W)?b?o[O]=v[O]:o[O]=w[O]:b=!0}const S=y?Ade(o):a?Lde(o):J9(o),_=S||Q9(o);if(_)return Qe.invalid(_);const x=y?sD(o):a?oD(o):o,[T,I]=M_(x,s,n),C=new Qe({ts:T,zone:n,o:I,loc:m});return o.weekday&&h&&t.weekday!==C.weekday?Qe.invalid("mismatched weekday",`you can't specify both a weekday of ${o.weekday} and a date of ${C.toISO()}`):C}static fromISO(t,r={}){const[n,i]=Xce(t);return Py(n,i,r,"ISO 8601",t)}static fromRFC2822(t,r={}){const[n,i]=ede(t);return Py(n,i,r,"RFC 2822",t)}static fromHTTP(t,r={}){const[n,i]=tde(t);return Py(n,i,r,"HTTP",r)}static fromFormat(t,r,n={}){if(dt(t)||dt(r))throw new Es("fromFormat requires an input string and a format");const{locale:i=null,numberingSystem:s=null}=n,o=Xt.fromOpts({locale:i,numberingSystem:s,defaultToEN:!0}),[a,l,c,h]=Rde(o,t,r);return h?Qe.invalid(h):Py(a,l,n,`format ${r}`,t,c)}static fromString(t,r,n={}){return Qe.fromFormat(t,r,n)}static fromSQL(t,r={}){const[n,i]=lde(t);return Py(n,i,r,"SQL",t)}static invalid(t,r=null){if(!t)throw new Es("need to specify a reason the DateTime is invalid");const n=t instanceof Io?t:new Io(t,r);if(Dr.throwOnInvalid)throw new zue(n);return new Qe({invalid:n})}static isDateTime(t){return t&&t.isLuxonDateTime||!1}static parseFormatForOpts(t,r={}){const n=G9(t,Xt.fromObject(r));return n?n.map(i=>i?i.val:null).join(""):null}static expandFormat(t,r={}){return z9(Ln.parseFormat(t),Xt.fromObject(r)).map(i=>i.val).join("")}get(t){return this[t]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?K$(this).weekYear:NaN}get weekNumber(){return this.isValid?K$(this).weekNumber:NaN}get weekday(){return this.isValid?K$(this).weekday:NaN}get ordinal(){return this.isValid?Q$(this.c).ordinal:NaN}get monthShort(){return this.isValid?lw.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?lw.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?lw.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?lw.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}get isInLeapYear(){return r1(this.year)}get daysInMonth(){return NS(this.year,this.month)}get daysInYear(){return this.isValid?h0(this.year):NaN}get weeksInWeekYear(){return this.isValid?DS(this.weekYear):NaN}resolvedLocaleOptions(t={}){const{locale:r,numberingSystem:n,calendar:i}=Ln.create(this.loc.clone(t),t).resolvedOptions(this);return{locale:r,numberingSystem:n,outputCalendar:i}}toUTC(t=0,r={}){return this.setZone(Nn.instance(t),r)}toLocal(){return this.setZone(Dr.defaultZone)}setZone(t,{keepLocalTime:r=!1,keepCalendarTime:n=!1}={}){if(t=_c(t,Dr.defaultZone),t.equals(this.zone))return this;if(t.isValid){let i=this.ts;if(r||n){const s=t.offset(this.ts),o=this.toObject();[i]=M_(o,s,t)}return ky(this,{ts:i,zone:t})}else return Qe.invalid(cw(t))}reconfigure({locale:t,numberingSystem:r,outputCalendar:n}={}){const i=this.loc.clone({locale:t,numberingSystem:r,outputCalendar:n});return ky(this,{loc:i})}setLocale(t){return this.reconfigure({locale:t})}set(t){if(!this.isValid)return this;const r=FS(t,dD),n=!dt(r.weekYear)||!dt(r.weekNumber)||!dt(r.weekday),i=!dt(r.ordinal),s=!dt(r.year),o=!dt(r.month)||!dt(r.day),a=s||o,l=r.weekYear||r.weekNumber;if((a||i)&&l)throw new ng("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(o&&i)throw new ng("Can't mix ordinal dates with month/day");let c;n?c=sD({...sI(this.c),...r}):dt(r.ordinal)?(c={...this.toObject(),...r},dt(r.day)&&(c.day=Math.min(NS(c.year,c.month),c.day))):c=oD({...Q$(this.c),...r});const[h,f]=M_(c,this.o,this.zone);return ky(this,{ts:h,o:f})}plus(t){if(!this.isValid)return this;const r=mt.fromDurationLike(t);return ky(this,uD(this,r))}minus(t){if(!this.isValid)return this;const r=mt.fromDurationLike(t).negate();return ky(this,uD(this,r))}startOf(t){if(!this.isValid)return this;const r={},n=mt.normalizeUnit(t);switch(n){case"years":r.month=1;case"quarters":case"months":r.day=1;case"weeks":case"days":r.hour=0;case"hours":r.minute=0;case"minutes":r.second=0;case"seconds":r.millisecond=0;break}if(n==="weeks"&&(r.weekday=1),n==="quarters"){const i=Math.ceil(this.month/3);r.month=(i-1)*3+1}return this.set(r)}endOf(t){return this.isValid?this.plus({[t]:1}).startOf(t).minus(1):this}toFormat(t,r={}){return this.isValid?Ln.create(this.loc.redefaultToEN(r)).formatDateTimeFromString(this,t):Y$}toLocaleString(t=LS,r={}){return this.isValid?Ln.create(this.loc.clone(r),t).formatDateTime(this):Y$}toLocaleParts(t={}){return this.isValid?Ln.create(this.loc.clone(t),t).formatDateTimeParts(this):[]}toISO({format:t="extended",suppressSeconds:r=!1,suppressMilliseconds:n=!1,includeOffset:i=!0,extendedZone:s=!1}={}){if(!this.isValid)return null;const o=t==="extended";let a=X$(this,o);return a+="T",a+=cD(this,o,r,n,i,s),a}toISODate({format:t="extended"}={}){return this.isValid?X$(this,t==="extended"):null}toISOWeekDate(){return dw(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:t=!1,suppressSeconds:r=!1,includeOffset:n=!0,includePrefix:i=!1,extendedZone:s=!1,format:o="extended"}={}){return this.isValid?(i?"T":"")+cD(this,o==="extended",r,t,n,s):null}toRFC2822(){return dw(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return dw(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?X$(this,!0):null}toSQLTime({includeOffset:t=!0,includeZone:r=!1,includeOffsetSpace:n=!0}={}){let i="HH:mm:ss.SSS";return(r||t)&&(n&&(i+=" "),r?i+="z":t&&(i+="ZZ")),dw(this,i,!0)}toSQL(t={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(t)}`:null}toString(){return this.isValid?this.toISO():Y$}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(t={}){if(!this.isValid)return{};const r={...this.c};return t.includeConfig&&(r.outputCalendar=this.outputCalendar,r.numberingSystem=this.loc.numberingSystem,r.locale=this.loc.locale),r}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(t,r="milliseconds",n={}){if(!this.isValid||!t.isValid)return mt.invalid("created by diffing an invalid DateTime");const i={locale:this.locale,numberingSystem:this.numberingSystem,...n},s=dce(r).map(mt.normalizeUnit),o=t.valueOf()>this.valueOf(),a=o?this:t,l=o?t:this,c=vde(a,l,s,i);return o?c.negate():c}diffNow(t="milliseconds",r={}){return this.diff(Qe.now(),t,r)}until(t){return this.isValid?Sr.fromDateTimes(this,t):this}hasSame(t,r){if(!this.isValid)return!1;const n=t.valueOf(),i=this.setZone(t.zone,{keepLocalTime:!0});return i.startOf(r)<=n&&n<=i.endOf(r)}equals(t){return this.isValid&&t.isValid&&this.valueOf()===t.valueOf()&&this.zone.equals(t.zone)&&this.loc.equals(t.loc)}toRelative(t={}){if(!this.isValid)return null;const r=t.base||Qe.fromObject({},{zone:this.zone}),n=t.padding?this<r?-t.padding:t.padding:0;let i=["years","months","days","hours","minutes","seconds"],s=t.unit;return Array.isArray(t.unit)&&(i=t.unit,s=void 0),pD(r,this.plus(n),{...t,numeric:"always",units:i,unit:s})}toRelativeCalendar(t={}){return this.isValid?pD(t.base||Qe.fromObject({},{zone:this.zone}),this,{...t,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...t){if(!t.every(Qe.isDateTime))throw new Es("min requires all arguments be DateTimes");return KN(t,r=>r.valueOf(),Math.min)}static max(...t){if(!t.every(Qe.isDateTime))throw new Es("max requires all arguments be DateTimes");return KN(t,r=>r.valueOf(),Math.max)}static fromFormatExplain(t,r,n={}){const{locale:i=null,numberingSystem:s=null}=n,o=Xt.fromOpts({locale:i,numberingSystem:s,defaultToEN:!0});return U9(o,t,r)}static fromStringExplain(t,r,n={}){return Qe.fromFormatExplain(t,r,n)}static get DATE_SHORT(){return LS}static get DATE_MED(){return r9}static get DATE_MED_WITH_WEEKDAY(){return Bue}static get DATE_FULL(){return n9}static get DATE_HUGE(){return i9}static get TIME_SIMPLE(){return s9}static get TIME_WITH_SECONDS(){return o9}static get TIME_WITH_SHORT_OFFSET(){return a9}static get TIME_WITH_LONG_OFFSET(){return l9}static get TIME_24_SIMPLE(){return u9}static get TIME_24_WITH_SECONDS(){return c9}static get TIME_24_WITH_SHORT_OFFSET(){return d9}static get TIME_24_WITH_LONG_OFFSET(){return h9}static get DATETIME_SHORT(){return p9}static get DATETIME_SHORT_WITH_SECONDS(){return f9}static get DATETIME_MED(){return m9}static get DATETIME_MED_WITH_SECONDS(){return y9}static get DATETIME_MED_WITH_WEEKDAY(){return que}static get DATETIME_FULL(){return g9}static get DATETIME_FULL_WITH_SECONDS(){return v9}static get DATETIME_HUGE(){return w9}static get DATETIME_HUGE_WITH_SECONDS(){return _9}}function Oy(e){if(Qe.isDateTime(e))return e;if(e&&e.valueOf&&jh(e.valueOf()))return Qe.fromJSDate(e);if(e&&typeof e=="object")return Qe.fromObject(e);throw new Es(`Unknown datetime argument: ${e}, of type ${typeof e}`)}const Vde={year:void 0,month:void 0,day:void 0,weekday:void 0},zde={hour:void 0,minute:void 0,second:void 0},Ude={timeZone:Intl.DateTimeFormat().resolvedOptions().timeZone},TR={timeZone:"Etc/UTC"},oa={year:"numeric",month:"numeric",day:"numeric"},Ry={year:"numeric",month:"long",day:"numeric"},Ay={year:"numeric",month:"short",day:"numeric"},Ly={year:"numeric",month:"long",weekday:"long",day:"numeric"},fs={hour:"numeric",minute:"numeric"},Ks={...fs,second:"numeric"},Ym={"short-date":oa,"short-date-short-time":{...oa,...fs},"short-date-short-time-24":{...oa,...fs,hour12:!1},"short-date-long-time":{...oa,...Ks},"short-date-long-time-24":{...oa,...Ks,hour12:!1},"short-date-le":oa,"short-date-le-short-time":{...oa,...fs},"short-date-le-short-time-24":{...oa,...fs,hour12:!1},"short-date-le-long-time":{...oa,...Ks},"short-date-le-long-time-24":{...oa,...Ks,hour12:!1},"long-month-day-year":Ry,"long-month-day-year-short-time":{...Ry,...fs},"long-month-day-year-short-time-24":{...Ry,...fs,hour12:!1},"long-month-day-year-long-time":{...Ry,...Ks},"long-month-day-year-long-time-24":{...Ry,...Ks,hour12:!1},"day-short-month-year":Ay,"day-short-month-year-short-time":{...Ay,...fs},"day-short-month-year-short-time-24":{...Ay,...fs,hour12:!1},"day-short-month-year-long-time":{...Ay,...Ks},"day-short-month-year-long-time-24":{...Ay,...Ks,hour12:!1},"long-date":Ly,"long-date-short-time":{...Ly,...fs},"long-date-short-time-24":{...Ly,...fs,hour12:!1},"long-date-long-time":{...Ly,...Ks},"long-date-long-time-24":{...Ly,...Ks,hour12:!1},"long-month-year":{month:"long",year:"numeric"},"short-month-year":{month:"short",year:"numeric"},year:{year:"numeric"},"short-time":fs,"long-time":Ks},Gde=Vn()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"}),e7={ar:"ar-u-nu-latn-ca-gregory"};let oI=new WeakMap,t7=Ym["short-date-short-time"];function Bde(e){const t=e||t7;let r=oI.get(t);if(!r){const n=ei(),i=e7[n]||n;r=new Intl.DateTimeFormat(i,t),oI.set(t,r)}return r}function hw(e){return Ym[e]}function ed(e,t){return Bde(t).format(e)}function qde(e,t=Ym["short-date"]){return ed(new Date(e),{...t,...TR,...zde})}function Wde(e,t=Ym["short-time"]){return ed(new Date(`1970-01-01T${e}Z`),{...t,...TR,...Vde})}function Hde(e,t=Ym["short-date-short-time"]){const r=Qe.fromISO(e,{setZone:!0}),n=ei(),i=e7[n]??n;return r.toLocaleString({...Ude,...t},{locale:i})}YO(()=>{oI=new WeakMap,t7=Ym["short-date-short-time"]});const Zde={ar:"ar-u-nu-latn"};let I_=new WeakMap,r7={};function Jde(e){const t=e||r7;if(!I_.has(t)){const r=ei(),n=Zde[ei()]||r;I_.set(t,new Intl.NumberFormat(n,e))}return I_.get(t)}function Qde(e={}){const t={};return e.digitSeparator!=null&&(t.useGrouping=e.digitSeparator),e.places!=null&&(t.minimumFractionDigits=t.maximumFractionDigits=e.places),t}function Om(e,t){return Object.is(e,-0)&&(e=0),Jde(t).format(e)}YO(()=>{I_=new WeakMap,r7={}});let Bp=class extends kr(Q){constructor(t){super(t),this.dateFormat=null,this.digitSeparator=!1,this.places=null}formatNumber(t){return Om(t,Qde(this))}formatDate(t,r=!1){return this.dateFormat?ed(t,{...hw(this.dateFormat),...r&&TR}):this.formatNumber(t)}formatDateOnly(t){const r=(this.dateFormat&&hw(this.dateFormat))??void 0;return qde(t,r)}formatTimeOnly(t){const r=(this.dateFormat&&hw(this.dateFormat))??void 0;return Wde(t,r)}formatTimestamp(t){const r=(this.dateFormat&&hw(this.dateFormat))??void 0;return Hde(t,r)}formatRasterPixelValue(t){return t.includes("-")?t:t.trim().includes(",")?this._formatDelimitedString(t,",",", "):t.trim().includes(";")?this._formatDelimitedString(t,";","; "):t.trim().includes(" ")?this._formatDelimitedString(t," "," "):this.formatNumber(Number(t))}_formatDelimitedString(t,r,n){return t&&r&&n?t.trim().split(r).map(i=>this.formatNumber(Number(i))).join(n):t}};u([Me(Gde)],Bp.prototype,"dateFormat",void 0),u([d({type:Boolean,json:{write:!0}})],Bp.prototype,"digitSeparator",void 0),u([d({type:bt,json:{write:!0}})],Bp.prototype,"places",void 0),Bp=u([E("esri.popup.support.FieldInfoFormat")],Bp);const sg=Bp;var aI;let ro=aI=class extends Q{constructor(e){super(e),this.fieldName=null,this.format=null,this.isEditable=!0,this.label=null,this.stringFieldOption="text-box",this.statisticType=null,this.tooltip=null,this.visible=!0}clone(){return new aI({fieldName:this.fieldName,format:this.format?F(this.format):null,isEditable:this.isEditable,label:this.label,stringFieldOption:this.stringFieldOption,statisticType:this.statisticType,tooltip:this.tooltip,visible:this.visible})}};u([d({type:String,json:{write:!0}})],ro.prototype,"fieldName",void 0),u([d({type:sg,json:{write:!0}})],ro.prototype,"format",void 0),u([d({type:Boolean,json:{write:{alwaysWriteDefaults:!0},default:!0}})],ro.prototype,"isEditable",void 0),u([d({type:String,json:{write:!0}})],ro.prototype,"label",void 0),u([Me(new xt({richtext:"rich-text",textarea:"text-area",textbox:"text-box"}),{default:"text-box"})],ro.prototype,"stringFieldOption",void 0),u([d({type:["count","sum","min","max","avg","stddev","var"],json:{write:!0}})],ro.prototype,"statisticType",void 0),u([d({type:String,json:{write:!0}})],ro.prototype,"tooltip",void 0),u([d({type:Boolean,json:{write:!0}})],ro.prototype,"visible",void 0),ro=aI=u([E("esri.popup.FieldInfo")],ro);const ER=ro;var lI;let ll=lI=class extends dd{constructor(e){super(e),this.attributes=null,this.description=null,this.fieldInfos=null,this.title=null,this.type="fields"}writeFieldInfos(e,t){t.fieldInfos=e&&e.map(r=>r.toJSON())}clone(){return new lI(F({attributes:this.attributes,description:this.description,fieldInfos:this.fieldInfos,title:this.title}))}};u([d({type:Object,json:{write:!0}})],ll.prototype,"attributes",void 0),u([d({type:String,json:{write:!0}})],ll.prototype,"description",void 0),u([d({type:[ER]})],ll.prototype,"fieldInfos",void 0),u([pe("fieldInfos")],ll.prototype,"writeFieldInfos",null),u([d({type:String,json:{write:!0}})],ll.prototype,"title",void 0),u([d({type:["fields"],readOnly:!0,json:{read:!1,write:!0}})],ll.prototype,"type",void 0),ll=lI=u([E("esri.popup.content.FieldsContent")],ll);const gv=ll;let Vd=class extends Q{constructor(t){super(t),this.altText=null,this.caption="",this.title="",this.type=null}};u([d({type:String,json:{write:!0}})],Vd.prototype,"altText",void 0),u([d({type:String,json:{write:!0}})],Vd.prototype,"caption",void 0),u([d({type:String,json:{write:!0}})],Vd.prototype,"title",void 0),u([d({type:["image","bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],Vd.prototype,"type",void 0),Vd=u([E("esri.popup.content.mixins.MediaInfo")],Vd);const MR=Vd;var uI;let qp=uI=class extends $e{constructor(e){super(e),this.fieldName=null,this.tooltip=null,this.value=null}clone(){return new uI({fieldName:this.fieldName,tooltip:this.tooltip,value:this.value})}};u([d()],qp.prototype,"fieldName",void 0),u([d()],qp.prototype,"tooltip",void 0),u([d()],qp.prototype,"value",void 0),qp=uI=u([E("esri.popup.content.support.ChartMediaInfoValueSeries")],qp);const Yde=qp;var cI;let zd=cI=class extends Q{constructor(e){super(e),this.fields=[],this.normalizeField=null,this.series=[],this.tooltipField=null}clone(){return new cI({fields:F(this.fields),normalizeField:this.normalizeField,tooltipField:this.tooltipField})}};u([d({type:[String],json:{write:!0}})],zd.prototype,"fields",void 0),u([d({type:String,json:{write:!0}})],zd.prototype,"normalizeField",void 0),u([d({type:[Yde],json:{read:!1}})],zd.prototype,"series",void 0),u([d({type:String,json:{write:!0}})],zd.prototype,"tooltipField",void 0),zd=cI=u([E("esri.popup.content.support.ChartMediaInfoValue")],zd);const Kde=zd;let og=class extends MR{constructor(t){super(t),this.type=null,this.value=null}};u([d({type:["bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],og.prototype,"type",void 0),u([d({type:Kde,json:{write:!0}})],og.prototype,"value",void 0),og=u([E("esri.popup.content.mixins.ChartMediaInfo")],og);const v2=og,w2=Vn()({barchart:"bar-chart",columnchart:"column-chart",linechart:"line-chart",piechart:"pie-chart"});var dI;let C_=dI=class extends v2{constructor(e){super(e),this.type="bar-chart"}clone(){return new dI({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};u([d({type:["bar-chart"],readOnly:!0,json:{type:["barchart"],read:!1,write:w2.write}})],C_.prototype,"type",void 0),C_=dI=u([E("esri.popup.content.BarChartMediaInfo")],C_);const n7=C_;var hI;let k_=hI=class extends v2{constructor(e){super(e),this.type="column-chart"}clone(){return new hI({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};u([d({type:["column-chart"],readOnly:!0,json:{type:["columnchart"],read:!1,write:w2.write}})],k_.prototype,"type",void 0),k_=hI=u([E("esri.popup.content.ColumnChartMediaInfo")],k_);const i7=k_;var pI;let ag=pI=class extends Q{constructor(e){super(e),this.linkURL=null,this.sourceURL=null}clone(){return new pI({linkURL:this.linkURL,sourceURL:this.sourceURL})}};u([d({type:String,json:{write:!0}})],ag.prototype,"linkURL",void 0),u([d({type:String,json:{write:!0}})],ag.prototype,"sourceURL",void 0),ag=pI=u([E("esri.popup.content.support.ImageMediaInfoValue")],ag);const Xde=ag;var fI;let Wp=fI=class extends MR{constructor(e){super(e),this.refreshInterval=null,this.type="image",this.value=null}clone(){return new fI({altText:this.altText,title:this.title,caption:this.caption,refreshInterval:this.refreshInterval,value:this.value?this.value.clone():null})}};u([d({type:Number,json:{write:!0}})],Wp.prototype,"refreshInterval",void 0),u([d({type:["image"],readOnly:!0,json:{read:!1,write:!0}})],Wp.prototype,"type",void 0),u([d({type:Xde,json:{write:!0}})],Wp.prototype,"value",void 0),Wp=fI=u([E("esri.popup.content.ImageMediaInfo")],Wp);const s7=Wp;var mI;let P_=mI=class extends v2{constructor(e){super(e),this.type="line-chart"}clone(){return new mI({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};u([d({type:["line-chart"],readOnly:!0,json:{type:["linechart"],read:!1,write:w2.write}})],P_.prototype,"type",void 0),P_=mI=u([E("esri.popup.content.LineChartMediaInfo")],P_);const o7=P_;var yI;let O_=yI=class extends v2{constructor(e){super(e),this.type="pie-chart"}clone(){return new yI({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};u([d({type:["pie-chart"],readOnly:!0,json:{type:["piechart"],read:!1,write:w2.write}})],O_.prototype,"type",void 0),O_=yI=u([E("esri.popup.content.PieChartMediaInfo")],O_);const a7=O_,l7={base:MR,key:"type",defaultKeyValue:"image",typeMap:{"bar-chart":n7,"column-chart":i7,"line-chart":o7,"pie-chart":a7,image:s7}};var gI;let no=gI=class extends dd{constructor(e){super(e),this.activeMediaInfoIndex=null,this.attributes=null,this.description=null,this.mediaInfos=null,this.title=null,this.type="media"}readMediaInfos(e){return e&&e.map(t=>t.type==="image"?s7.fromJSON(t):t.type==="barchart"?n7.fromJSON(t):t.type==="columnchart"?i7.fromJSON(t):t.type==="linechart"?o7.fromJSON(t):t.type==="piechart"?a7.fromJSON(t):void 0).filter(Boolean)}writeMediaInfos(e,t){t.mediaInfos=e&&e.map(r=>r.toJSON())}clone(){return new gI(F({activeMediaInfoIndex:this.activeMediaInfoIndex,attributes:this.attributes,description:this.description,mediaInfos:this.mediaInfos,title:this.title}))}};u([d()],no.prototype,"activeMediaInfoIndex",void 0),u([d({type:Object,json:{write:!0}})],no.prototype,"attributes",void 0),u([d({type:String,json:{write:!0}})],no.prototype,"description",void 0),u([d({types:[l7]})],no.prototype,"mediaInfos",void 0),u([we("mediaInfos")],no.prototype,"readMediaInfos",null),u([pe("mediaInfos")],no.prototype,"writeMediaInfos",null),u([d({type:String,json:{write:!0}})],no.prototype,"title",void 0),u([d({type:["media"],readOnly:!0,json:{read:!1,write:!0}})],no.prototype,"type",void 0),no=gI=u([E("esri.popup.content.MediaContent")],no);const jS=no;var vI;let lg=vI=class extends Q{constructor(e){super(e),this.field=null,this.order=null}clone(){return new vI({field:this.field,order:this.order})}};u([d({type:String,json:{write:!0}})],lg.prototype,"field",void 0),u([d({type:["asc","desc"],json:{write:!0}})],lg.prototype,"order",void 0),lg=vI=u([E("esri.popup.support.RelatedRecordsInfoFieldOrder")],lg);const u7=lg;let pa=class extends kr(dd){constructor(t){super(t),this.description=null,this.displayCount=null,this.displayType="list",this.orderByFields=null,this.relationshipId=null,this.title=null,this.type="relationship"}};u([d({type:String,json:{write:!0}})],pa.prototype,"description",void 0),u([d({type:Number,json:{type:bt,write:!0}})],pa.prototype,"displayCount",void 0),u([d({type:["list"],json:{write:!0}})],pa.prototype,"displayType",void 0),u([d({type:[u7],json:{write:!0}})],pa.prototype,"orderByFields",void 0),u([d({type:Number,json:{type:bt,write:!0}})],pa.prototype,"relationshipId",void 0),u([d({type:String,json:{write:!0}})],pa.prototype,"title",void 0),u([d({type:["relationship"],readOnly:!0,json:{read:!1,write:!0}})],pa.prototype,"type",void 0),pa=u([E("esri.popup.content.RelationshipContent")],pa);const VS=pa;var wI;let ug=wI=class extends dd{constructor(e){super(e),this.text=null,this.type="text"}clone(){return new wI({text:this.text})}};u([d({type:String,json:{write:!0}})],ug.prototype,"text",void 0),u([d({type:["text"],readOnly:!0,json:{read:!1,write:!0}})],ug.prototype,"type",void 0),ug=wI=u([E("esri.popup.content.TextContent")],ug);const zS=ug,ehe={base:null,key:"type",typeMap:{attachment:yv,media:jS,text:zS,expression:gR,field:gv,relationship:VS}};var _I;let Ud=_I=class extends Q{constructor(e){super(e),this.name=null,this.title=null,this.expression=null,this.returnType=null}clone(){return new _I({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};u([d({type:String,json:{write:!0}})],Ud.prototype,"name",void 0),u([d({type:String,json:{write:!0}})],Ud.prototype,"title",void 0),u([d({type:String,json:{write:!0}})],Ud.prototype,"expression",void 0),u([d({type:["string","number"],json:{write:!0}})],Ud.prototype,"returnType",void 0),Ud=_I=u([E("esri.popup.ExpressionInfo")],Ud);const the=Ud;var bI;let cg=bI=class extends Q{constructor(e){super(e),this.returnTopmostRaster=null,this.showNoDataRecords=null}clone(){return new bI({showNoDataRecords:this.showNoDataRecords,returnTopmostRaster:this.returnTopmostRaster})}};u([d({type:Boolean,json:{write:!0}})],cg.prototype,"returnTopmostRaster",void 0),u([d({type:Boolean,json:{write:!0}})],cg.prototype,"showNoDataRecords",void 0),cg=bI=u([E("esri.popup.LayerOptions")],cg);const rhe=cg;var SI;let dg=SI=class extends Q{constructor(e){super(e),this.showRelatedRecords=null,this.orderByFields=null}clone(){return new SI({showRelatedRecords:this.showRelatedRecords,orderByFields:this.orderByFields?F(this.orderByFields):null})}};u([d({type:Boolean,json:{write:!0}})],dg.prototype,"showRelatedRecords",void 0),u([d({type:[u7],json:{write:!0}})],dg.prototype,"orderByFields",void 0),dg=SI=u([E("esri.popup.RelatedRecordsInfo")],dg);const nhe=dg;var xI;let ms=xI=class extends e1($e){constructor(e){super(e),this.active=!1,this.className=null,this.disabled=!1,this.icon=null,this.id=null,this.indicator=!1,this.title=null,this.type=null,this.visible=!0}clone(){return new xI({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible})}};u([d()],ms.prototype,"active",void 0),u([d()],ms.prototype,"className",void 0),u([d()],ms.prototype,"disabled",void 0),u([d()],ms.prototype,"icon",void 0),u([d()],ms.prototype,"id",void 0),u([d()],ms.prototype,"indicator",void 0),u([d()],ms.prototype,"title",void 0),u([d()],ms.prototype,"type",void 0),u([d()],ms.prototype,"visible",void 0),ms=xI=u([E("esri.support.actions.ActionBase")],ms);const IR=ms;var $I;let R_=$I=class extends IR{constructor(e){super(e),this.image=null,this.type="button"}clone(){return new $I({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image})}};u([d()],R_.prototype,"image",void 0),R_=$I=u([E("esri.support.Action.ActionButton")],R_);const ihe=R_;var TI;let hg=TI=class extends IR{constructor(e){super(e),this.image=null,this.type="toggle",this.value=!1}clone(){return new TI({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image,value:this.value})}};u([d()],hg.prototype,"image",void 0),u([d()],hg.prototype,"value",void 0),hg=TI=u([E("esri.support.Action.ActionToggle")],hg);const she=hg,ohe="esri.PopupTemplate",ahe=Z.getLogger(ohe),Ny="relationships/",mD="expression/",lhe=Le.ofType({key:"type",defaultKeyValue:"button",base:IR,typeMap:{button:ihe,toggle:she}}),uhe={base:dd,key:"type",typeMap:{media:jS,custom:jue,text:zS,attachments:yv,fields:gv,expression:gR,relationship:VS}},che=["attachments","fields","media","text","expression","relationship"];let Br=class extends kr(Q){constructor(){super(...arguments),this.actions=null,this.content="",this.expressionInfos=null,this.fieldInfos=null,this.layerOptions=null,this.lastEditInfoEnabled=!0,this.outFields=null,this.overwriteActions=!1,this.returnGeometry=!1,this.title=""}castContent(t){return Array.isArray(t)?t.map(r=>Jl(uhe,r)):typeof t=="string"||typeof t=="function"||t instanceof HTMLElement||au(t)?t:(ahe.error("content error","unsupported content value",{value:t}),null)}readContent(t,r){const{popupElements:n}=r;return Array.isArray(n)&&n.length>0?this._readPopupInfoElements(r.description,r.mediaInfos,n):this._readPopupInfo(r)}writeContent(t,r,n,i){typeof t!="string"?Array.isArray(t)&&(r.popupElements=t.filter(s=>che.includes(s.type)).map(s=>s&&s.toJSON(i)),r.popupElements.forEach(s=>{s.type==="attachments"?this._writeAttachmentContent(r):s.type==="media"?this._writeMediaContent(s,r):s.type==="text"?this._writeTextContent(s,r):s.type==="relationship"&&this._writeRelationshipContent(s,r)})):r.description=t}writeFieldInfos(t,r,n,i){const{content:s}=this,o=Array.isArray(s)?s:null;if(t){const a=o?o.filter(c=>c.type==="fields"):[],l=a.length&&a.every(c=>{var h;return(h=c.fieldInfos)==null?void 0:h.length});r.fieldInfos=t.filter(Boolean).map(c=>{const h=c.toJSON(i);return l&&(h.visible=!1),h})}if(o)for(const a of o)a.type==="fields"&&this._writeFieldsContent(a,r)}writeLayerOptions(t,r,n,i){r[n]=!t||t.showNoDataRecords===null&&t.returnTopmostRaster===null?null:t.toJSON(i)}writeTitle(t,r){r.title=t||""}async collectRequiredFields(t,r){const n=this.expressionInfos||[];await this._collectExpressionInfoFields(t,r,[...n,...this._getContentExpressionInfos(this.content,n)]),mv(t,r,[...this.outFields||[],...this._getActionsFields(this.actions),...this._getTitleFields(this.title),...this._getContentFields(this.content)])}async getRequiredFields(t){const r=new Set;return await this.collectRequiredFields(r,t),[...r].sort()}_writeFieldsContent(t,r){if(!Array.isArray(t.fieldInfos)||!t.fieldInfos.length)return;const n=F(t.fieldInfos);Array.isArray(r.fieldInfos)?n.forEach(i=>{const s=r.fieldInfos.find(o=>o.fieldName.toLowerCase()===i.fieldName.toLowerCase());s?s.visible=!0:r.fieldInfos.push(i)}):r.fieldInfos=n}_writeAttachmentContent(t){t.showAttachments||(t.showAttachments=!0)}_writeRelationshipContent(t,r){var s,o;const n=((s=t.orderByFields)==null?void 0:s.map(a=>this._toFieldOrderJSON(a,t.relationshipId)))||[],i=[...((o=r.relatedRecordsInfo)==null?void 0:o.orderByFields)||[],...n];r.relatedRecordsInfo={showRelatedRecords:!0,...(i==null?void 0:i.length)&&{orderByFields:i}}}_writeTextContent(t,r){!r.description&&t.text&&(r.description=t.text)}_writeMediaContent(t,r){if(!Array.isArray(t.mediaInfos)||!t.mediaInfos.length)return;const n=F(t.mediaInfos);Array.isArray(r.mediaInfos)?r.mediaInfos=[...r.mediaInfos,...n]:r.mediaInfos=n}_readPopupInfoElements(t,r,n){const i={description:!1,mediaInfos:!1};return n.map(s=>s.type==="media"?(s.mediaInfos||!r||i.mediaInfos||(s.mediaInfos=r,i.mediaInfos=!0),jS.fromJSON(s)):s.type==="text"?(s.text||!t||i.description||(s.text=t,i.description=!0),zS.fromJSON(s)):s.type==="attachments"?yv.fromJSON(s):s.type==="fields"?gv.fromJSON(s):s.type==="expression"?gR.fromJSON(s):s.type==="relationship"?VS.fromJSON(s):void 0).filter(Boolean)}_toRelationshipContent(t){const{field:r,order:n}=t;if(!(r!=null&&r.startsWith(Ny)))return null;const i=r.replace(Ny,"").split("/");if(i.length!==2)return null;const s=parseInt(i[0],10),o=i[1];return typeof s=="number"&&o?VS.fromJSON({relationshipId:s,orderByFields:[{field:o,order:n}]}):null}_toFieldOrderJSON(t,r){const{order:n,field:i}=t;return{field:`${Ny}${r}/${i}`,order:n}}_readPopupInfo({description:t,mediaInfos:r,showAttachments:n,relatedRecordsInfo:i={showRelatedRecords:!1}}){const s=[];t?s.push(new zS({text:t})):s.push(new gv),Array.isArray(r)&&r.length&&s.push(jS.fromJSON({mediaInfos:r})),n&&s.push(yv.fromJSON({displayType:"auto"}));const{showRelatedRecords:o,orderByFields:a}=i;return o&&(a!=null&&a.length)&&a.forEach(l=>{const c=this._toRelationshipContent(l);c&&s.push(c)}),s.length?s:t}_getContentElementFields(t){const r=t==null?void 0:t.type;if(r==="attachments")return[...this._extractFieldNames(t.title),...this._extractFieldNames(t.description)];if(r==="custom")return t.outFields||[];if(r==="fields")return[...this._extractFieldNames(t.title),...this._extractFieldNames(t.description),...this._getFieldInfoFields(t.fieldInfos??this.fieldInfos)];if(r==="media"){const n=t.mediaInfos||[];return[...this._extractFieldNames(t.title),...this._extractFieldNames(t.description),...n.reduce((i,s)=>[...i,...this._getMediaInfoFields(s)],[])]}return r==="text"?this._extractFieldNames(t.text):[]}_getMediaInfoFields(t){const{caption:r,title:n,value:i}=t,s=i||{},{fields:o,normalizeField:a,tooltipField:l,sourceURL:c,linkURL:h}=s,f=[...this._extractFieldNames(n),...this._extractFieldNames(r),...this._extractFieldNames(c),...this._extractFieldNames(h),...o??[]];return a&&f.push(a),l&&f.push(l),f}_getContentExpressionInfos(t,r){return Array.isArray(t)?t.reduce((n,i)=>[...n,...i.type==="expression"&&i.expressionInfo?[i.expressionInfo]:[]],r):[]}_getContentFields(t){return typeof t=="string"?this._extractFieldNames(t):Array.isArray(t)?t.reduce((r,n)=>[...r,...this._getContentElementFields(n)],[]):[]}async _collectExpressionInfoFields(t,r,n){n&&await Promise.all(n.map(i=>ni(t,r,i.expression)))}_getFieldInfoFields(t){return t?t.filter(r=>r.visible===void 0||!!r.visible).map(r=>r.fieldName).filter(r=>!r.startsWith(Ny)&&!r.startsWith(mD)):[]}_getActionsFields(t){return t?t.toArray().reduce((r,n)=>[...r,...this._getActionFields(n)],[]):[]}_getActionFields(t){const{className:r,title:n,type:i}=t,s=i==="button"||i==="toggle"?t.image:"";return[...this._extractFieldNames(n),...this._extractFieldNames(r),...this._extractFieldNames(s)]}_getTitleFields(t){return typeof t=="string"?this._extractFieldNames(t):[]}_extractFieldNames(t){if(!t||typeof t!="string")return[];const r=/{[^}]*}/g,n=t.match(r);if(!n)return[];const i=/\{(\w+):.+\}/,s=n.filter(o=>!(o.indexOf(`{${Ny}`)===0||o.indexOf(`{${mD}`)===0)).map(o=>o.replace(i,"{$1}"));return s?s.map(o=>o.slice(1,-1)):[]}};u([d({type:lhe})],Br.prototype,"actions",void 0),u([d()],Br.prototype,"content",void 0),u([Pt("content")],Br.prototype,"castContent",null),u([we("content",["description","fieldInfos","popupElements","mediaInfos","showAttachments","relatedRecordsInfo"])],Br.prototype,"readContent",null),u([pe("content",{popupElements:{type:Le.ofType(ehe)},showAttachments:{type:Boolean},mediaInfos:{type:Le.ofType(l7)},description:{type:String},relatedRecordsInfo:{type:nhe}})],Br.prototype,"writeContent",null),u([d({type:[the],json:{write:!0}})],Br.prototype,"expressionInfos",void 0),u([d({type:[ER]})],Br.prototype,"fieldInfos",void 0),u([pe("fieldInfos")],Br.prototype,"writeFieldInfos",null),u([d({type:rhe})],Br.prototype,"layerOptions",void 0),u([pe("layerOptions")],Br.prototype,"writeLayerOptions",null),u([d({type:Boolean,json:{read:{source:"showLastEditInfo"},write:{target:"showLastEditInfo"},default:!0}})],Br.prototype,"lastEditInfoEnabled",void 0),u([d()],Br.prototype,"outFields",void 0),u([d()],Br.prototype,"overwriteActions",void 0),u([d()],Br.prototype,"returnGeometry",void 0),u([d({json:{type:String}})],Br.prototype,"title",void 0),u([pe("title")],Br.prototype,"writeTitle",null),Br=u([E("esri.PopupTemplate")],Br);const Km=Br,yD=new xt({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",WebStyleSymbol:"web-style",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d",CIMSymbolReference:"cim"});let dhe=0,Hp=class extends Q{constructor(t){super(t),this.id="sym"+dhe++,this.type=null,this.color=new We([0,0,0,1])}readColor(t){return t&&t[0]!=null?[t[0],t[1],t[2],t[3]/255]:t}async collectRequiredFields(t,r){}hash(){return JSON.stringify(this.toJSON())}clone(){}};u([d({type:yD.apiValues,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:yD.write}}})],Hp.prototype,"type",void 0),u([d({type:We,json:{write:{allowNull:!0}}})],Hp.prototype,"color",void 0),u([we("color")],Hp.prototype,"readColor",null),Hp=u([E("esri.symbols.Symbol")],Hp);const Mi=Hp;var EI;let Du=EI=class extends Mi{constructor(e){super(e),this.data=null,this.type="cim"}readData(e,t){return t}writeData(e,t){Object.assign(t,e)}async collectRequiredFields(e,t){var r;if(((r=this.data)==null?void 0:r.type)==="CIMSymbolReference"){const n=this.data.primitiveOverrides;if(n){const i=n.map(s=>{const o=s.valueExpressionInfo;return ni(e,t,o.expression)});await Promise.all(i)}}}clone(){return new EI({data:F(this.data)})}hash(){return _O(JSON.stringify(this.data)).toString()}};u([d({json:{write:!1}})],Du.prototype,"color",void 0),u([d({json:{write:!0}})],Du.prototype,"data",void 0),u([we("data",["symbol"])],Du.prototype,"readData",null),u([pe("data",{})],Du.prototype,"writeData",null),u([Me({CIMSymbolReference:"cim"},{readOnly:!0})],Du.prototype,"type",void 0),Du=EI=u([E("esri.symbols.CIMSymbol")],Du);const s1=Du;let Zp=class extends Q{constructor(t){super(t),this.enabled=!0,this.type=null,this.ignoreDrivers=!1}writeEnabled(t,r,n){t||(r[n]=t)}};u([d({type:Boolean,json:{read:{source:"enable"},write:{target:"enable"}}})],Zp.prototype,"enabled",void 0),u([pe("enabled")],Zp.prototype,"writeEnabled",null),u([d({type:["icon","object","line","path","fill","water","extrude","text"],readOnly:!0})],Zp.prototype,"type",void 0),Zp=u([E("esri.symbols.Symbol3DLayer")],Zp);const Ba=Zp,hhe=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i,phe="screenUtils.toPt: input not recognized!",c7=96;function d7(e){return e?e/72*c7:0}function Kl(e){return e?72*e/c7:0}function At(e){if(typeof e=="string"){const t=e.match(hhe);if(t){const r=Number(t[1]),n=t[3]&&t[3].toLowerCase(),i=e.charAt(0)==="-",s=n==="px"?Kl(r):r;return i?-s:s}return console.warn(phe),null}return e}function Kr(e=0,t=0){return{x:e,y:t}}function zke(e=0,t=0){return[e,t]}function fhe(e,t){const r=t.transparency!=null?fv(t.transparency):1,n=t.color;return n&&Array.isArray(n)?new We([n[0]||0,n[1]||0,n[2]||0,r]):null}function mhe(e,t){t.color=e.toJSON().slice(0,3);const r=iR(e.a);r!==0&&(t.transparency=r)}const hd={type:We,json:{type:[bt],default:null,read:{source:["color","transparency"],reader:fhe},write:{target:{color:{type:[bt]},transparency:{type:bt}},writer:mhe}}},ja={type:Number,cast:At,json:{write:!0}};let Gd=class extends Q{constructor(t){super(t),this.color=new We([0,0,0,1]),this.extensionLength=0,this.size=Kl(1)}clone(){}cloneProperties(){return{color:F(this.color),size:this.size,extensionLength:this.extensionLength}}};u([d({type:["solid","sketch"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],Gd.prototype,"type",void 0),u([d(hd)],Gd.prototype,"color",void 0),u([d({...ja,json:{write:{overridePolicy:e=>({enabled:!!e})}}})],Gd.prototype,"extensionLength",void 0),u([d(ja)],Gd.prototype,"size",void 0),Gd=u([E("esri.symbols.edges.Edges3D")],Gd);const CR=Gd;var MI;let A_=MI=class extends CR{constructor(e){super(e),this.type="sketch"}clone(){return new MI(this.cloneProperties())}};u([Me({sketch:"sketch"},{readOnly:!0})],A_.prototype,"type",void 0),A_=MI=u([E("esri.symbols.edges.SketchEdges3D")],A_);const yhe=A_;var II;let L_=II=class extends CR{constructor(e){super(e),this.type="solid"}clone(){return new II(this.cloneProperties())}};u([Me({solid:"solid"},{readOnly:!0})],L_.prototype,"type",void 0),L_=II=u([E("esri.symbols.support.SolidEdges3D")],L_);const ghe=L_,h7={types:{key:"type",base:CR,typeMap:{solid:ghe,sketch:yhe}},json:{write:!0}};var CI;let Ns=CI=class extends Q{constructor(e){super(e),this.color=null}clone(){const e={color:this.color!=null?this.color.clone():null};return new CI(e)}};u([d(hd)],Ns.prototype,"color",void 0),Ns=CI=u([E("esri.symbols.support.Symbol3DMaterial")],Ns);var kI;let Fu=kI=class extends Ba{constructor(e){super(e),this.type="extrude",this.size=1,this.material=null,this.castShadows=!0,this.edges=null}clone(){return new kI({edges:this.edges&&this.edges.clone(),enabled:this.enabled,material:this.material!=null?this.material.clone():null,castShadows:this.castShadows,size:this.size})}};u([Me({Extrude:"extrude"},{readOnly:!0})],Fu.prototype,"type",void 0),u([d({type:Number,json:{write:{enabled:!0,isRequired:!0}},nonNullable:!0})],Fu.prototype,"size",void 0),u([d({type:Ns,json:{write:!0}})],Fu.prototype,"material",void 0),u([d({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Fu.prototype,"castShadows",void 0),u([d(h7)],Fu.prototype,"edges",void 0),Fu=kI=u([E("esri.symbols.ExtrudeSymbol3DLayer")],Fu);const p7=Fu;let pg=class extends Mi{constructor(t){super(t),this.type="simple-line",this.width=.75}hash(){return`${this.type}.${this.width}`}};u([Me({esriSLS:"simple-line"},{readOnly:!0})],pg.prototype,"type",void 0),u([d({type:Number,cast:At,json:{write:!0}})],pg.prototype,"width",void 0),pg=u([E("esri.symbols.LineSymbol")],pg);const vhe=pg,whe=["begin","end","begin-end"],f7=["arrow","circle","square","diamond","cross","x"];var PI;let fa=PI=class extends Q{constructor(e){super(e),this.placement="begin-end",this.type="line-marker",this.style="arrow"}writeStyle(e,t,r,n){t[r]=(n==null?void 0:n.origin)==="web-map"?"arrow":e}set color(e){this._set("color",e)}readColor(e){return e&&e[0]!=null?[e[0],e[1],e[2],e[3]/255]:e}writeColor(e,t,r,n){(n==null?void 0:n.origin)==="web-map"||(t[r]=e)}clone(){return new PI({color:F(this.color),placement:this.placement,style:this.style})}hash(){var e;return`${this.placement}.${(e=this.color)==null?void 0:e.hash()}.${this.style}`}};u([d({type:["begin","end","begin-end"],json:{write:!0}})],fa.prototype,"placement",void 0),u([Me({"line-marker":"line-marker"},{readOnly:!0}),d({json:{origins:{"web-map":{write:!1}}}})],fa.prototype,"type",void 0),u([d({type:f7})],fa.prototype,"style",void 0),u([pe("style")],fa.prototype,"writeStyle",null),u([d({type:We,value:null,json:{write:{allowNull:!0}}})],fa.prototype,"color",null),u([we("color")],fa.prototype,"readColor",null),u([pe("color")],fa.prototype,"writeColor",null),fa=PI=u([E("esri.symbols.LineSymbolMarker")],fa);const _he=fa;var OI;const eT=new xt({esriSLSSolid:"solid",esriSLSDash:"dash",esriSLSDot:"dot",esriSLSDashDot:"dash-dot",esriSLSDashDotDot:"long-dash-dot-dot",esriSLSNull:"none",esriSLSInsideFrame:"inside-frame",esriSLSShortDash:"short-dash",esriSLSShortDot:"short-dot",esriSLSShortDashDot:"short-dash-dot",esriSLSShortDashDotDot:"short-dash-dot-dot",esriSLSLongDash:"long-dash",esriSLSLongDashDot:"long-dash-dot"});let ul=OI=class extends vhe{constructor(...e){super(...e),this.type="simple-line",this.style="solid",this.cap="round",this.join="round",this.marker=null,this.miterLimit=2}normalizeCtorArgs(e,t,r,n,i,s){if(e&&typeof e!="string")return e;const o={};return e!=null&&(o.style=e),t!=null&&(o.color=t),r!=null&&(o.width=At(r)),n!=null&&(o.cap=n),i!=null&&(o.join=i),s!=null&&(o.miterLimit=At(s)),o}clone(){var e;return new OI({color:F(this.color),style:this.style,width:this.width,cap:this.cap,join:this.join,miterLimit:this.miterLimit,marker:(e=this.marker)==null?void 0:e.clone()})}hash(){var e,t;return`${super.hash()}.${(e=this.color)==null?void 0:e.hash()}.${this.style}.${this.cap}.${this.join}.${this.miterLimit}.${(t=this.marker)==null?void 0:t.hash()}`}};u([Me({esriSLS:"simple-line"},{readOnly:!0})],ul.prototype,"type",void 0),u([d({type:eT.apiValues,json:{read:eT.read,write:eT.write}})],ul.prototype,"style",void 0),u([d({type:["butt","round","square"],json:{write:{overridePolicy:(e,t,r)=>({enabled:e!=="round"&&(r==null||r.origin==null)})}}})],ul.prototype,"cap",void 0),u([d({type:["miter","round","bevel"],json:{write:{overridePolicy:(e,t,r)=>({enabled:e!=="round"&&(r==null||r.origin==null)})}}})],ul.prototype,"join",void 0),u([d({types:{key:"type",base:null,defaultKeyValue:"line-marker",typeMap:{"line-marker":_he}},json:{write:!0,origins:{"web-scene":{write:!1}}}})],ul.prototype,"marker",void 0),u([d({type:Number,json:{read:!1,write:!1}})],ul.prototype,"miterLimit",void 0),ul=OI=u([E("esri.symbols.SimpleLineSymbol")],ul);const ts=ul;let fg=class extends Mi{constructor(t){super(t),this.outline=null,this.type=null}hash(){return`${this.type}.${this.outline&&this.outline.hash()}`}};u([d({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":ts}},json:{default:null,write:!0}})],fg.prototype,"outline",void 0),u([d({type:["simple-fill","picture-fill"],readOnly:!0})],fg.prototype,"type",void 0),fg=u([E("esri.symbols.FillSymbol")],fg);const m7=fg;let N_=class extends Q{constructor(t){super(t)}clone(){}};u([d({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],N_.prototype,"type",void 0),N_=u([E("esri.symbols.patterns.LinePattern3D")],N_);const y7=N_,bhe=["dash","dash-dot","dot","long-dash","long-dash-dot","long-dash-dot-dot","none","short-dash","short-dash-dot","short-dash-dot-dot","short-dot","solid"];var RI;const She=Vn()({dash:"dash","dash-dot":"dash-dot","dash-dot-dot":"long-dash-dot-dot",dot:"dot","long-dash":"long-dash","long-dash-dot":"long-dash-dot",null:"none","short-dash":"short-dash","short-dash-dot":"short-dash-dot","short-dash-dot-dot":"short-dash-dot-dot","short-dot":"short-dot",solid:"solid"});let mg=RI=class extends y7{constructor(e){super(e),this.type="style",this.style="solid"}clone(){const e={style:this.style};return new RI(e)}};u([d({type:["style"]})],mg.prototype,"type",void 0),u([Me(She),d({type:bhe})],mg.prototype,"style",void 0),mg=RI=u([E("esri.symbols.patterns.LineStylePattern3D")],mg);const kR=mg;let D_=class extends Q{constructor(t){super(t)}clone(){}};u([d({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],D_.prototype,"type",void 0),D_=u([E("esri.symbols.patterns.Pattern3D")],D_);const g7=D_,xhe=["backward-diagonal","cross","diagonal-cross","forward-diagonal","horizontal","none","solid","vertical"];var AI;let yg=AI=class extends g7{constructor(e){super(e),this.type="style",this.style="solid"}clone(){const e={style:this.style};return new AI(e)}};u([d({type:["style"]})],yg.prototype,"type",void 0),u([d({type:xhe,json:{read:!0,write:!0}})],yg.prototype,"style",void 0),yg=AI=u([E("esri.symbols.patterns.StylePattern3D")],yg);const v7=yg,$he={types:{key:"type",base:g7,typeMap:{style:v7}},json:{write:!0}},w7={types:{key:"type",base:y7,typeMap:{style:kR}},json:{write:!0}},f0=new We("white");new We("black");const The=new We([255,255,255,0]);function Ehe(e){return e.r===0&&e.g===0&&e.b===0}var LI;let m0=LI=class extends Ns{constructor(e){super(e),this.colorMixMode=null}clone(){const e={color:this.color!=null?this.color.clone():null,colorMixMode:this.colorMixMode};return new LI(e)}};u([Me({multiply:"multiply",replace:"replace",tint:"tint"})],m0.prototype,"colorMixMode",void 0),m0=LI=u([E("esri.symbols.support.Symbol3DFillMaterial")],m0);function PR(e=Ohe){return[e[0],e[1],e[2],e[3],e[4],e[5]]}function OR(e,t,r,n,i,s,o=PR()){return o[0]=e,o[1]=t,o[2]=r,o[3]=n,o[4]=i,o[5]=s,o}function Hke(e,t){const r=isFinite(e[2])||isFinite(e[5]);return new at(r?{xmin:e[0],xmax:e[3],ymin:e[1],ymax:e[4],zmin:e[2],zmax:e[5],spatialReference:t}:{xmin:e[0],xmax:e[3],ymin:e[1],ymax:e[4],spatialReference:t})}function Zke(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[3]),e[4]=Math.max(e[4],t[4]),e[5]=Math.max(e[5],t[5])}function Jke(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[0]),e[4]=Math.max(e[4],t[1]),e[5]=Math.max(e[5],t[2])}function Mhe(e){return e[0]>=e[3]?0:e[3]-e[0]}function Ihe(e){return e[1]>=e[4]?0:e[4]-e[1]}function Che(e){return e[2]>=e[5]?0:e[5]-e[2]}function Qke(e,t=[0,0,0]){return t[0]=Mhe(e),t[1]=Ihe(e),t[2]=Che(e),t}function Yke(e,t,r=e){return r[0]=t[0],r[1]=t[1],r[2]=t[2],r!==e&&(r[3]=e[3],r[4]=e[4],r[5]=e[5]),r}function Kke(e,t,r=e){return r[3]=t[0],r[4]=t[1],r[5]=t[2],r!==e&&(r[0]=e[0],r[1]=e[1],r[2]=e[2]),e}function khe(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function Xke(e){return e?khe(e,gD):PR(gD)}function ePe(e,t){return e[0]=t[0],e[1]=t[1],e[2]=Number.NEGATIVE_INFINITY,e[3]=t[2],e[4]=t[3],e[5]=Number.POSITIVE_INFINITY,e}function Phe(e,t,r,n,i){return e[0]=t,e[1]=r,e[2]=Number.NEGATIVE_INFINITY,e[3]=n,e[4]=i,e[5]=Number.POSITIVE_INFINITY,e}function NI(e){return e.length===6}function tPe(e,t,r){if(e==null||t==null)return e===t;if(!NI(e)||!NI(t))return!1;if(r){for(let n=0;n<e.length;n++)if(!r(e[n],t[n]))return!1}else for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}const gD=[1/0,1/0,1/0,-1/0,-1/0,-1/0],Ohe=[0,0,0,0,0,0];PR();const Rhe=OR(-.5,-.5,-.5,.5,.5,.5),Ahe=OR(-.5,-.5,0,.5,.5,1),Lhe=OR(-.5,-.5,0,.5,.5,.5);function rPe(e){switch(e){case"sphere":case"cube":case"diamond":return Rhe;case"cylinder":case"cone":case"inverted-cone":return Ahe;case"tetrahedron":return Lhe;default:return}}const RR=["butt","square","round"],Nhe=[...RR,"none"],_7=["miter","bevel","round"];var DI;let Bd=DI=class extends Q{constructor(e){super(e),this.color=new We([0,0,0,1]),this.size=Kl(1),this.pattern=null,this.patternCap="butt"}clone(){const e={color:this.color!=null?this.color.clone():null,size:this.size,pattern:this.pattern!=null?this.pattern.clone():null,patternCap:this.patternCap};return new DI(e)}};u([d(hd)],Bd.prototype,"color",void 0),u([d(ja)],Bd.prototype,"size",void 0),u([d(w7)],Bd.prototype,"pattern",void 0),u([d({type:RR,json:{default:"butt",write:{overridePolicy(){return{enabled:this.pattern!=null}}}}})],Bd.prototype,"patternCap",void 0),Bd=DI=u([E("esri.symbols.support.Symbol3DOutline")],Bd);var F_;let cl=F_=class extends Ba{constructor(e){super(e),this.type="fill",this.material=null,this.pattern=null,this.castShadows=!0,this.outline=null,this.edges=null}clone(){const e={edges:this.edges!=null?this.edges.clone():null,enabled:this.enabled,material:this.material!=null?this.material.clone():null,pattern:this.pattern!=null?this.pattern.clone():null,castShadows:this.castShadows,outline:this.outline!=null?this.outline.clone():null};return new F_(e)}static fromSimpleFillSymbol(e){var n,i,s;const t=e.outline&&e.outline.style&&e.outline.style!=="inside-frame"&&e.outline.style!=="solid"?new kR({style:e.outline.style}):null,r={size:((n=e.outline)==null?void 0:n.width)??0,color:(((i=e.outline)==null?void 0:i.color)??f0).clone(),pattern:t};return t&&((s=e.outline)!=null&&s.cap)&&(r.patternCap=e.outline.cap),new F_({material:new m0({color:(e.color??The).clone()}),pattern:e.style&&e.style!=="solid"?new v7({style:e.style}):null,outline:r})}};u([Me({Fill:"fill"},{readOnly:!0})],cl.prototype,"type",void 0),u([d({type:m0,json:{write:!0}})],cl.prototype,"material",void 0),u([d($he)],cl.prototype,"pattern",void 0),u([d({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],cl.prototype,"castShadows",void 0),u([d({type:Bd,json:{write:!0}})],cl.prototype,"outline",void 0),u([d(h7)],cl.prototype,"edges",void 0),cl=F_=u([E("esri.symbols.FillSymbol3DLayer")],cl);const o1=cl,Dhe=["none","underline","line-through"],Fhe=["normal","italic","oblique"],jhe=["normal","lighter","bold","bolder"],b7={type:Number,cast:e=>{const t=Ts(e);return t===0?1:Yi(t,.1,4)},nonNullable:!0},Vhe=["left","right","center"],zhe=["baseline","top","middle","bottom"],S7={type:Vhe,nonNullable:!0},x7={type:zhe,nonNullable:!0},nPe=8;var FI;let dl=FI=class extends Q{constructor(e){super(e),this.decoration="none",this.family="sans-serif",this.size=9,this.style="normal",this.weight="normal"}castSize(e){return At(e)}clone(){return new FI({decoration:this.decoration,family:this.family,size:this.size,style:this.style,weight:this.weight})}hash(){return`${this.decoration}.${this.family}.${this.size}.${this.style}.${this.weight}`}};u([d({type:Dhe,json:{default:"none",write:!0}})],dl.prototype,"decoration",void 0),u([d({type:String,json:{write:!0}})],dl.prototype,"family",void 0),u([d({type:Number,json:{write:{overridePolicy:(e,t,r)=>({enabled:!r||!r.textSymbol3D})}}})],dl.prototype,"size",void 0),u([Pt("size")],dl.prototype,"castSize",null),u([d({type:Fhe,json:{default:"normal",write:!0}})],dl.prototype,"style",void 0),u([d({type:jhe,json:{default:"normal",write:!0}})],dl.prototype,"weight",void 0),dl=FI=u([E("esri.symbols.Font")],dl);const _2=dl;function Xm(e,t){const r=t&&t.url&&t.url.path;if(e&&r&&(e=Ms(e,r,{preserveProtocolRelative:!0}),t.portalItem&&t.readResourcePaths)){const n=FO(e,t.portalItem.itemUrl);n!=null&&Uhe.test(n)&&t.readResourcePaths.push(t.portalItem.resourceFromPath(n).path)}return jI(e,t&&t.portal)}function a1(e,t,r=vv.YES){if(e==null)return e;!Hi(e)&&t&&t.blockedRelativeUrls&&t.blockedRelativeUrls.push(e);let n=Ms(e);if(t){const i=t.verifyItemRelativeUrls&&t.verifyItemRelativeUrls.rootPath||t.url&&t.url.path;if(i){const s=jI(i,t.portal),o=jI(n,t.portal);n=FO(o,s,s),n!=null&&n!==o&&n!==e&&t.verifyItemRelativeUrls&&t.verifyItemRelativeUrls.writtenUrls.push(n)}}return n=T7(n,t==null?void 0:t.portal),Hi(n)&&(n=Lo(n)),t!=null&&t.resources&&(t!=null&&t.portalItem)&&!Hi(n)&&!wp(n)&&r===vv.YES&&t.resources.toKeep.push({resource:t.portalItem.resourceFromPath(n),compress:!1}),n}function AR(e,t,r){return Xm(e,r)}function cp(e,t,r,n){const i=a1(e,n);i!==void 0&&(t[r]=i)}const $7=/\/items\/([^\/]+)\/resources\/(.*)/,Uhe=/^\.\/resources\//;function Ghe(e){const t=(e==null?void 0:e.match($7))??null;return(t==null?void 0:t[1])??null}function Bhe(e){const t=(e==null?void 0:e.match($7))??null;if(t==null)return null;const r=t[2],n=r.lastIndexOf("/");if(n===-1){const{path:o,extension:a}=fN(r);return{prefix:null,filename:o,extension:a}}const{path:i,extension:s}=fN(r.slice(n+1));return{prefix:r.slice(0,n),filename:i,extension:s}}function T7(e,t){return t&&!t.isPortal&&t.urlKey&&t.customBaseUrl?kM(e,`${t.urlKey}.${t.customBaseUrl}`,t.portalHostname):e}function jI(e,t){if(!t||t.isPortal||!t.urlKey||!t.customBaseUrl)return e;const r=`${t.urlKey}.${t.customBaseUrl}`,n=AO();return Tm(n,`${n.scheme}://${r}`)?kM(e,t.portalHostname,r):kM(e,r,t.portalHostname)}var vv;(function(e){e[e.YES=0]="YES",e[e.NO=1]="NO"})(vv||(vv={}));const iPe=Object.freeze(Object.defineProperty({__proto__:null,get MarkKeep(){return vv},ensureMainOnlineDomain:T7,fromJSON:Xm,itemIdFromResourceUrl:Ghe,prefixAndFilenameFromResourceUrl:Bhe,read:AR,toJSON:a1,write:cp},Symbol.toStringTag,{value:"Module"}));var VI;const qhe=Vn()({circle:"circle",square:"square",cross:"cross",x:"x",kite:"kite",triangle:"triangle"});let qd=VI=class extends Q{constructor(e){super(e)}readHref(e,t,r){return e?Xm(e,r):t.dataURI}writeHref(e,t,r,n){e&&(wp(e)?t.dataURI=e:(t.href=a1(e,n),Hi(t.href)&&(t.href=Lo(t.href))))}clone(){return new VI({href:this.href,primitive:this.primitive})}};u([d({type:String,json:{write:!0,read:{source:["href","dataURI"]}}})],qd.prototype,"href",void 0),u([we("href")],qd.prototype,"readHref",null),u([pe("href",{href:{type:String},dataURI:{type:String}})],qd.prototype,"writeHref",null),u([Me(qhe)],qd.prototype,"primitive",void 0),qd=VI=u([E("esri.symbols.support.IconSymbol3DLayerResource")],qd);var zI;let Df=zI=class extends $e{constructor(){super(...arguments),this.x=0,this.y=0}clone(){return new zI({x:this.x,y:this.y})}};u([d({type:Number})],Df.prototype,"x",void 0),u([d({type:Number})],Df.prototype,"y",void 0),Df=zI=u([E("esri.symbols.support.Symbol3DAnchorPosition2D")],Df);var UI;let gg=UI=class extends Q{constructor(e){super(e),this.color=new We([0,0,0,1]),this.size=Kl(1)}clone(){const e={color:this.color!=null?this.color.clone():null,size:this.size};return new UI(e)}};u([d(hd)],gg.prototype,"color",void 0),u([d(ja)],gg.prototype,"size",void 0),gg=UI=u([E("esri.symbols.support.Symbol3DIconOutline")],gg);var Jp;const E7="esri.symbols.IconSymbol3DLayer";let ma=Jp=class extends Ba{constructor(e){super(e),this.material=null,this.resource=null,this.type="icon",this.size=12,this.anchor="center",this.anchorPosition=null,this.outline=null}clone(){return new Jp({anchor:this.anchor,anchorPosition:this.anchorPosition&&this.anchorPosition.clone(),enabled:this.enabled,material:this.material!=null?this.material.clone():null,outline:this.outline!=null?this.outline.clone():null,resource:this.resource&&this.resource.clone(),size:this.size})}static fromSimpleMarkerSymbol(e){const t=e.color||f0,r=vD(e),n=e.outline&&e.outline.width>0?{size:e.outline.width,color:(e.outline.color||f0).clone()}:null;return new Jp({size:e.size,resource:{primitive:Hhe(e.style)},material:{color:t},outline:n,anchor:r?"relative":void 0,anchorPosition:r})}static fromPictureMarkerSymbol(e){const t=!e.color||Ehe(e.color)?f0:e.color,r=vD(e);return new Jp({size:e.width<=e.height?e.height:e.width,resource:{href:e.url},material:{color:t.clone()},anchor:r?"relative":void 0,anchorPosition:r})}static fromCIMSymbol(e){return new Jp({resource:{href:bz({mediaType:"application/json",data:JSON.stringify(e.data)})}})}};function vD(e){const t="width"in e?e.width:e.size,r="height"in e?e.height:e.size,n=wD(e.xoffset),i=wD(e.yoffset);return(n||i)&&t&&r?{x:-n/t,y:i/r}:null}function wD(e){return isFinite(e)?e:0}u([d({type:Ns,json:{write:!0}})],ma.prototype,"material",void 0),u([d({type:qd,json:{write:!0}})],ma.prototype,"resource",void 0),u([Me({Icon:"icon"},{readOnly:!0})],ma.prototype,"type",void 0),u([d(ja)],ma.prototype,"size",void 0),u([Me({center:"center",left:"left",right:"right",top:"top",bottom:"bottom",topLeft:"top-left",topRight:"top-right",bottomLeft:"bottom-left",bottomRight:"bottom-right",relative:"relative"}),d({json:{default:"center"}})],ma.prototype,"anchor",void 0),u([d({type:Df,json:{type:[Number],read:{reader:e=>new Df({x:e[0],y:e[1]})},write:{writer:(e,t)=>{t.anchorPosition=[e.x,e.y]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],ma.prototype,"anchorPosition",void 0),u([d({type:gg,json:{write:!0}})],ma.prototype,"outline",void 0),ma=Jp=u([E(E7)],ma);const Whe={circle:"circle",cross:"cross",diamond:"kite",square:"square",x:"x",triangle:"triangle",path:null};function Hhe(e){return Whe[e]||(Z.getLogger(E7).warn(`${e} cannot be mapped to Icon symbol. Fallback to "circle"`),"circle")}const Ih=ma;let Wd=class extends kr(Q){constructor(t){super(t),this.type="style",this.placement="begin-end",this.style="arrow",this.color=null}equals(t){return t!=null&&t.placement===this.placement&&t.style===this.style&&(this.color==null&&t.color==null||this.color!=null&&t.color!=null&&this.color.toJSON()===t.color.toJSON())}};u([d({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],Wd.prototype,"type",void 0),u([d({type:whe,json:{default:"begin-end",write:!0}})],Wd.prototype,"placement",void 0),u([d({type:f7,json:{default:"arrow",write:!0}})],Wd.prototype,"style",void 0),u([d({type:We,json:{type:[bt],default:null,write:!0}})],Wd.prototype,"color",void 0),Wd=u([E("esri.symbols.LineStyleMarker3D")],Wd);const GI=Wd;var j_;let ya=j_=class extends Ba{constructor(e){super(e),this.material=null,this.type="line",this.join="miter",this.cap="butt",this.size=Kl(1),this.pattern=null,this.marker=null}clone(){const e={enabled:this.enabled,material:this.material!=null?this.material.clone():null,size:this.size,join:this.join,cap:this.cap,pattern:this.pattern!=null?this.pattern.clone():null,marker:this.marker!=null?this.marker.clone():null};return new j_(e)}static fromSimpleLineSymbol(e){var r;const t={enabled:!0,size:e.width??Kl(1),cap:e.cap||"butt",join:e.join||"miter",pattern:e.style&&e.style!=="inside-frame"?new kR({style:e.style}):null,material:new Ns({color:(e.color||f0).clone()}),marker:e.marker?new GI({placement:e.marker.placement,style:e.marker.style,color:((r=e.marker.color)==null?void 0:r.clone())??null}):null};return new j_(t)}};u([d({type:Ns,json:{write:!0}})],ya.prototype,"material",void 0),u([Me({Line:"line"},{readOnly:!0})],ya.prototype,"type",void 0),u([d({type:_7,json:{write:!0,default:"miter"}})],ya.prototype,"join",void 0),u([d({type:RR,json:{write:!0,default:"butt"}})],ya.prototype,"cap",void 0),u([d(ja)],ya.prototype,"size",void 0),u([d(w7)],ya.prototype,"pattern",void 0),u([d({types:{key:"type",base:GI,typeMap:{style:GI}},json:{write:!0}})],ya.prototype,"marker",void 0),ya=j_=u([E("esri.symbols.LineSymbol3DLayer")],ya);const l1=ya;var BI;const Zhe=Vn()({sphere:"sphere",cylinder:"cylinder",cube:"cube",cone:"cone",diamond:"diamond",tetrahedron:"tetrahedron",invertedCone:"inverted-cone"});let vg=BI=class extends Q{clone(){return new BI({href:this.href,primitive:this.primitive})}};u([d({type:String,json:{read:AR,write:cp}})],vg.prototype,"href",void 0),u([Me(Zhe)],vg.prototype,"primitive",void 0),vg=BI=u([E("esri.symbols.support.ObjectSymbol3DLayerResource")],vg);var qI;let yh=qI=class extends $e{constructor(){super(...arguments),this.x=0,this.y=0,this.z=0}clone(){return new qI({x:this.x,y:this.y,z:this.z})}};u([d({type:Number})],yh.prototype,"x",void 0),u([d({type:Number})],yh.prototype,"y",void 0),u([d({type:Number})],yh.prototype,"z",void 0),yh=qI=u([E("esri.symbols.support.Symbol3DAnchorPosition3D")],yh);var WI;let In=WI=class extends Ba{constructor(e){super(e),this.material=null,this.castShadows=!0,this.resource=null,this.type="object",this.width=void 0,this.height=void 0,this.depth=void 0,this.anchor=void 0,this.anchorPosition=void 0,this.heading=void 0,this.tilt=void 0,this.roll=void 0}clone(){return new WI({heading:this.heading,tilt:this.tilt,roll:this.roll,anchor:this.anchor,anchorPosition:this.anchorPosition&&this.anchorPosition.clone(),depth:this.depth,enabled:this.enabled,height:this.height,material:this.material!=null?this.material.clone():null,castShadows:this.castShadows,resource:this.resource&&this.resource.clone(),width:this.width})}get isPrimitive(){return!this.resource||typeof this.resource.href!="string"}};u([d({type:Ns,json:{write:!0}})],In.prototype,"material",void 0),u([d({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],In.prototype,"castShadows",void 0),u([d({type:vg,json:{write:!0}})],In.prototype,"resource",void 0),u([Me({Object:"object"},{readOnly:!0})],In.prototype,"type",void 0),u([d({type:Number,json:{write:!0}})],In.prototype,"width",void 0),u([d({type:Number,json:{write:!0}})],In.prototype,"height",void 0),u([d({type:Number,json:{write:!0}})],In.prototype,"depth",void 0),u([Me({center:"center",top:"top",bottom:"bottom",origin:"origin",relative:"relative"}),d({json:{default:"origin"}})],In.prototype,"anchor",void 0),u([d({type:yh,json:{type:[Number],read:{reader:e=>new yh({x:e[0],y:e[1],z:e[2]})},write:{writer:(e,t)=>{t.anchorPosition=[e.x,e.y,e.z]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],In.prototype,"anchorPosition",void 0),u([d({type:Number,json:{write:!0}})],In.prototype,"heading",void 0),u([d({type:Number,json:{write:!0}})],In.prototype,"tilt",void 0),u([d({type:Number,json:{write:!0}})],In.prototype,"roll",void 0),u([d({readOnly:!0})],In.prototype,"isPrimitive",null),In=WI=u([E("esri.symbols.ObjectSymbol3DLayer")],In);const LR=In;var HI;let Hn=HI=class extends Ba{constructor(e){super(e),this.material=null,this.castShadows=!0,this.type="path",this.profile="circle",this.join="miter",this.cap="butt",this.width=void 0,this.height=void 0,this.anchor="center",this.profileRotation="all"}readWidth(e,t){return e??(t.height==null&&t.size!=null?t.size:void 0)}readHeight(e,t){return e??(t.width==null&&t.size!=null?t.size:void 0)}clone(){return new HI({enabled:this.enabled,material:this.material!=null?this.material.clone():null,castShadows:this.castShadows,profile:this.profile,join:this.join,cap:this.cap,width:this.width,height:this.height,profileRotation:this.profileRotation,anchor:this.anchor})}};u([d({type:Ns,json:{write:!0}})],Hn.prototype,"material",void 0),u([d({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Hn.prototype,"castShadows",void 0),u([Me({Path:"path"},{readOnly:!0})],Hn.prototype,"type",void 0),u([d({type:["circle","quad"],json:{write:!0,default:"circle"}})],Hn.prototype,"profile",void 0),u([d({type:_7,json:{write:!0,default:"miter"}})],Hn.prototype,"join",void 0),u([d({type:Nhe,json:{write:!0,default:"butt"}})],Hn.prototype,"cap",void 0),u([d({type:Number,json:{write:{enabled:!0,target:{width:{type:Number},size:{type:Number}}}}})],Hn.prototype,"width",void 0),u([we("width",["width","size","height"])],Hn.prototype,"readWidth",null),u([d({type:Number,json:{write:!0}})],Hn.prototype,"height",void 0),u([we("height",["height","size","width"])],Hn.prototype,"readHeight",null),u([d({type:["center","bottom","top"],json:{write:!0,default:"center"}})],Hn.prototype,"anchor",void 0),u([d({type:["heading","all"],json:{write:!0,default:"all"}})],Hn.prototype,"profileRotation",void 0),Hn=HI=u([E("esri.symbols.PathSymbol3DLayer")],Hn);const NR=Hn;var ZI;let Ff=ZI=class extends Q{constructor(){super(...arguments),this.color=new We([0,0,0,1]),this.size=0}clone(){const e={color:F(this.color),size:this.size};return new ZI(e)}};u([d(hd)],Ff.prototype,"color",void 0),u([d(ja)],Ff.prototype,"size",void 0),Ff=ZI=u([E("esri.symbols.support.Symbol3DHalo")],Ff);let y0=class extends kr(Q){constructor(t){super(t),this.color=null}};u([d(hd)],y0.prototype,"color",void 0),y0=u([E("esri.symbols.support.Symbol3DTextBackground")],y0);var V_;let ui=V_=class extends Ba{constructor(e){super(e),this._userSize=void 0,this.halo=null,this.horizontalAlignment="center",this.lineHeight=1,this.material=null,this.background=null,this.text=null,this.type="text",this.verticalAlignment="baseline"}get font(){return this._get("font")||null}set font(e){e!=null&&this._userSize!=null&&(e.size=this._userSize),this._set("font",e)}writeFont(e,t,r,n){const i={...n,textSymbol3D:!0};t.font=e.write({},i),delete t.font.size}get size(){return this._userSize!=null?this._userSize:this.font!=null&&this.font.size!=null?this.font.size:9}set size(e){this._userSize=e,this.font!=null&&(this.font.size=this._userSize),this.notifyChange("size")}clone(){const e=new V_({enabled:this.enabled,font:this.font&&F(this.font),halo:this.halo&&F(this.halo),horizontalAlignment:this.horizontalAlignment,lineHeight:this.lineHeight,material:this.material!=null?this.material.clone():null,text:this.text,verticalAlignment:this.verticalAlignment,background:F(this.background)});return e._userSize=this._userSize,e}static fromTextSymbol(e){return new V_({font:e.font!=null?e.font.clone():new _2,halo:Jhe(e.haloColor,e.haloSize),horizontalAlignment:e.horizontalAlignment,lineHeight:e.lineHeight,material:e.color?new Ns({color:e.color.clone()}):null,text:e.text,verticalAlignment:e.verticalAlignment,background:e.backgroundColor?new y0({color:e.backgroundColor.clone()}):null})}};function Jhe(e,t){return e&&t!=null&&t>0?new Ff({color:F(e),size:t}):null}u([d({type:_2,json:{write:!0}})],ui.prototype,"font",null),u([pe("font")],ui.prototype,"writeFont",null),u([d({type:Ff,json:{write:!0}})],ui.prototype,"halo",void 0),u([d({...S7,json:{default:"center",write:!0}})],ui.prototype,"horizontalAlignment",void 0),u([d({...b7,json:{default:1,write:!0}})],ui.prototype,"lineHeight",void 0),u([d({type:Ns,json:{write:!0}})],ui.prototype,"material",void 0),u([d({type:y0,json:{write:!0}})],ui.prototype,"background",void 0),u([d(ja)],ui.prototype,"size",null),u([d({type:String,json:{write:!0}})],ui.prototype,"text",void 0),u([Me({Text:"text"},{readOnly:!0})],ui.prototype,"type",void 0),u([d({...x7,json:{default:"baseline",write:!0}})],ui.prototype,"verticalAlignment",void 0),ui=V_=u([E("esri.symbols.TextSymbol3DLayer")],ui);const ey=ui;var JI;let ju=JI=class extends Ba{constructor(e){super(e),this.color=QI.clone(),this.type="water",this.waterbodySize="medium",this.waveDirection=null,this.waveStrength="moderate"}clone(){return new JI({color:F(this.color),waterbodySize:this.waterbodySize,waveDirection:this.waveDirection,waveStrength:this.waveStrength})}};u([d({type:We,nonNullable:!0,json:{type:[bt],write:(e,t,r)=>t[r]=e.toArray(We.AlphaMode.UNLESS_OPAQUE),default:()=>QI.clone(),defaultEquals:e=>e.toCss(!0)===QI.toCss(!0)}})],ju.prototype,"color",void 0),u([Me({Water:"water"},{readOnly:!0})],ju.prototype,"type",void 0),u([d({type:["small","medium","large"],json:{write:!0,default:"medium"}})],ju.prototype,"waterbodySize",void 0),u([d({type:Number,json:{write:!0,default:null}})],ju.prototype,"waveDirection",void 0),u([d({type:["calm","rippled","slight","moderate"],json:{write:!0,default:"moderate"}})],ju.prototype,"waveStrength",void 0),ju=JI=u([E("esri.symbols.WaterSymbol3DLayer")],ju);const QI=new We([0,119,190]),M7=ju;var YI;let Hd=YI=class extends $e{constructor(e){super(e),this.name=null,this.styleUrl=null,this.styleName=null,this.portal=null}clone(){return new YI({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}};u([d({type:String})],Hd.prototype,"name",void 0),u([d({type:String})],Hd.prototype,"styleUrl",void 0),u([d({type:String})],Hd.prototype,"styleName",void 0),u([d({type:hn})],Hd.prototype,"portal",void 0),Hd=YI=u([E("esri.symbols.support.StyleOrigin")],Hd);const KI=Hd;var XI;let g0=XI=class extends $e{constructor(){super(...arguments),this.url=""}clone(){return new XI({url:this.url})}};u([d({type:String})],g0.prototype,"url",void 0),g0=XI=u([E("esri.symbols.support.Thumbnail")],g0);const I7={icon:Ih,object:LR,line:l1,path:NR,fill:o1,extrude:p7,text:ey,water:M7},Qhe=Le.ofType({base:Ba,key:"type",typeMap:I7,errorContext:"symbol-layer"});let ga=class extends Mi{constructor(t){super(t),this.styleOrigin=null,this.thumbnail=null,this.type=null;const r=this.__accessor__&&this.__accessor__.metadatas&&this.__accessor__.metadatas.symbolLayers,n=r&&r.type||Le;this._set("symbolLayers",new n)}get color(){return null}set color(t){this.constructed&&Z.getLogger(this).error("Symbol3D does not support colors on the symbol level. Colors may be set on individual symbol layer materials instead.")}set symbolLayers(t){tp(t,this._get("symbolLayers"))}readStyleOrigin(t,r,n){if(t.styleUrl&&t.name){const i=Xm(t.styleUrl,n);return new KI({styleUrl:i,name:t.name})}if(t.styleName&&t.name)return new KI({portal:n&&n.portal||hn.getDefault(),styleName:t.styleName,name:t.name});n&&n.messages&&n.messages.push(new qo("symbol3d:incomplete-style-origin","Style origin requires either a 'styleUrl' or 'styleName' and a 'name' property",{context:n,definition:t}))}writeStyleOrigin(t,r,n,i){if(t.styleUrl&&t.name){let s=a1(t.styleUrl,i);Hi(s)&&(s=Lo(s)),r.styleOrigin={styleUrl:s,name:t.name}}else t.styleName&&t.name&&(t.portal&&i&&i.portal&&!wz(t.portal.restUrl,i.portal.restUrl)?i&&i.messages&&i.messages.push(new qo("symbol:cross-portal","The symbol style origin cannot be persisted because it refers to an item on a different portal than the one being saved to.",{symbol:this})):r.styleOrigin={styleName:t.styleName,name:t.name})}normalizeCtorArgs(t){return t instanceof Ba||t&&I7[t.type]?{symbolLayers:[t]}:Array.isArray(t)?{symbolLayers:t}:t}};u([d({json:{read:!1,write:!1}})],ga.prototype,"color",null),u([d({type:Qhe,nonNullable:!0,json:{write:!0}}),Pt(az)],ga.prototype,"symbolLayers",null),u([d({type:KI})],ga.prototype,"styleOrigin",void 0),u([we("styleOrigin")],ga.prototype,"readStyleOrigin",null),u([pe("styleOrigin",{"styleOrigin.styleUrl":{type:String},"styleOrigin.styleName":{type:String},"styleOrigin.name":{type:String}})],ga.prototype,"writeStyleOrigin",null),u([d({type:g0,json:{read:!1}})],ga.prototype,"thumbnail",void 0),u([d({type:["point-3d","line-3d","polygon-3d","mesh-3d","label-3d"],readOnly:!0})],ga.prototype,"type",void 0),ga=u([E("esri.symbols.Symbol3D")],ga);const ty=ga;let wg=class extends Q{constructor(t){super(t),this.visible=!0}clone(){}};u([d({type:["line"],readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0}}})],wg.prototype,"type",void 0),u([d({readOnly:!0})],wg.prototype,"visible",void 0),wg=u([E("esri.symbols.callouts.Callout3D")],wg);const C7=wg;var eC;let z_=eC=class extends Q{constructor(){super(...arguments),this.color=new We("white")}clone(){return new eC({color:F(this.color)})}};u([d(hd)],z_.prototype,"color",void 0),z_=eC=u([E("esri.symbols.callouts.LineCallout3DBorder")],z_);const k7=z_;Object.freeze(Object.defineProperty({__proto__:null,default:k7},Symbol.toStringTag,{value:"Module"}));var tC;let Vu=tC=class extends C7{constructor(e){super(e),this.type="line",this.color=new We([0,0,0,1]),this.size=Kl(1),this.border=null}get visible(){return this.size>0&&this.color!=null&&this.color.a>0}clone(){return new tC({color:F(this.color),size:this.size,border:F(this.border)})}};u([Me({line:"line"},{readOnly:!0})],Vu.prototype,"type",void 0),u([d(hd)],Vu.prototype,"color",void 0),u([d(ja)],Vu.prototype,"size",void 0),u([d({type:k7,json:{write:!0}})],Vu.prototype,"border",void 0),u([d({readOnly:!0})],Vu.prototype,"visible",null),Vu=tC=u([E("esri.symbols.callouts.LineCallout3D")],Vu);const Yhe=Vu;function DR(e){if(!e)return!1;const t=e.verticalOffset;return!!t&&!(t.screenLength<=0||t.maxWorldLength!=null&&t.maxWorldLength<=0)}function P7(e){if(!e||!e.supportsCallout||!e.supportsCallout())return!1;const t=e.callout;return!!t&&!!t.visible&&!!DR(e)}const O7={types:{key:"type",base:C7,typeMap:{line:Yhe}},json:{write:!0}};var rC;let Qp=rC=class extends Q{constructor(e){super(e),this.screenLength=0,this.minWorldLength=0,this.maxWorldLength=null}clone(){return new rC({screenLength:this.screenLength,minWorldLength:this.minWorldLength,maxWorldLength:this.maxWorldLength})}};u([d(ja)],Qp.prototype,"screenLength",void 0),u([d({type:Number,nonNullable:!0,json:{write:!0,default:0}})],Qp.prototype,"minWorldLength",void 0),u([d({type:Number,json:{write:!0}})],Qp.prototype,"maxWorldLength",void 0),Qp=rC=u([E("esri.symbols.support.Symbol3DVerticalOffset")],Qp);const R7=Qp;var U_;const A7=Le.ofType({base:null,key:"type",typeMap:{text:ey}});let zu=U_=class extends ty{constructor(e){super(e),this.verticalOffset=null,this.callout=null,this.styleOrigin=null,this.symbolLayers=new A7,this.type="label-3d"}supportsCallout(){return!0}hasVisibleCallout(){return P7(this)}hasVisibleVerticalOffset(){return DR(this)}clone(){return new U_({styleOrigin:F(this.styleOrigin),symbolLayers:F(this.symbolLayers),thumbnail:F(this.thumbnail),callout:F(this.callout),verticalOffset:F(this.verticalOffset)})}static fromTextSymbol(e){return new U_({symbolLayers:[ey.fromTextSymbol(e)]})}};u([d({type:R7,json:{write:!0}})],zu.prototype,"verticalOffset",void 0),u([d(O7)],zu.prototype,"callout",void 0),u([d({json:{read:!1,write:!1}})],zu.prototype,"styleOrigin",void 0),u([d({type:A7})],zu.prototype,"symbolLayers",void 0),u([Me({LabelSymbol3D:"label-3d"},{readOnly:!0})],zu.prototype,"type",void 0),zu=U_=u([E("esri.symbols.LabelSymbol3D")],zu);const b2=zu;var G_;const L7=Le.ofType({base:null,key:"type",typeMap:{line:l1,path:NR}}),Khe=Le.ofType({base:null,key:"type",typeMap:{line:l1,path:NR}});let _g=G_=class extends ty{constructor(e){super(e),this.symbolLayers=new L7,this.type="line-3d"}clone(){return new G_({styleOrigin:F(this.styleOrigin),symbolLayers:F(this.symbolLayers),thumbnail:F(this.thumbnail)})}static fromSimpleLineSymbol(e){return new G_({symbolLayers:[l1.fromSimpleLineSymbol(e)]})}};u([d({type:L7,json:{type:Khe}})],_g.prototype,"symbolLayers",void 0),u([Me({LineSymbol3D:"line-3d"},{readOnly:!0})],_g.prototype,"type",void 0),_g=G_=u([E("esri.symbols.LineSymbol3D")],_g);const S2=_g;let Uu=class extends Mi{constructor(t){super(t),this.angle=0,this.type=null,this.xoffset=0,this.yoffset=0,this.size=9}hash(){return`${this.type}.${this.angle}.${this.size}.${this.xoffset}.${this.yoffset}`}};u([d({type:Number,json:{read:e=>e&&-1*e,write:(e,t)=>t.angle=e&&-1*e}})],Uu.prototype,"angle",void 0),u([d({type:["simple-marker","picture-marker"],readOnly:!0})],Uu.prototype,"type",void 0),u([d({type:Number,cast:At,json:{write:!0}})],Uu.prototype,"xoffset",void 0),u([d({type:Number,cast:At,json:{write:!0}})],Uu.prototype,"yoffset",void 0),u([d({type:Number,cast:e=>e==="auto"?e:At(e),json:{write:!0}})],Uu.prototype,"size",void 0),Uu=u([E("esri.symbols.MarkerSymbol")],Uu);const N7=Uu;var B_;const D7=Le.ofType({base:null,key:"type",typeMap:{fill:o1}});let bg=B_=class extends ty{constructor(e){super(e),this.symbolLayers=new D7,this.type="mesh-3d"}clone(){return new B_({styleOrigin:F(this.styleOrigin),symbolLayers:F(this.symbolLayers),thumbnail:F(this.thumbnail)})}static fromSimpleFillSymbol(e){return new B_({symbolLayers:[o1.fromSimpleFillSymbol(e)]})}};u([d({type:D7})],bg.prototype,"symbolLayers",void 0),u([Me({MeshSymbol3D:"mesh-3d"},{readOnly:!0})],bg.prototype,"type",void 0),bg=B_=u([E("esri.symbols.MeshSymbol3D")],bg);const x2=bg;function Xhe(e,t,r){return t.imageData?bz({mediaType:t.contentType||"image/png",isBase64:!0,data:t.imageData}):F7(t.url,r)}function F7(e,t){var r;return tpe(t)&&!Hi(e)&&((r=t==null?void 0:t.layer)!=null&&r.parsedUrl)?rp(t.layer.parsedUrl.path,"images",e):Xm(e,t)}function epe(e,t,r,n){if(wp(e)){const i=dv(e);if(!i)return;t.contentType=i.mediaType,t.imageData=i.data,r&&r.imageData===t.imageData&&r.url&&cp(r.url,t,"url",n)}else cp(e,t,"url",n)}const j7={json:{read:{source:["imageData","url"],reader:Xhe},write:{writer(e,t,r,n){epe(e,t,this.source,n)}}}},V7={readOnly:!0,json:{read:{source:["imageData","url"],reader(e,t,r){const n={};return t.imageData&&(n.imageData=t.imageData),t.contentType&&(n.contentType=t.contentType),t.url&&(n.url=F7(t.url,r)),n}}}};function tpe(e){var t,r;return!(e==null||e.origin!=="service"&&e.origin!=="portal-item"||((t=e.layer)==null?void 0:t.type)!=="feature"&&((r=e.layer)==null?void 0:r.type)!=="stream")}var nC;let ys=nC=class extends m7{constructor(...e){super(...e),this.type="picture-fill",this.url=null,this.xscale=1,this.yscale=1,this.width=12,this.height=12,this.xoffset=0,this.yoffset=0,this.source=null}normalizeCtorArgs(e,t,r,n){if(e&&typeof e!="string"&&e.imageData==null)return e;const i={};return e&&(i.url=e),t&&(i.outline=t),r!=null&&(i.width=At(r)),n!=null&&(i.height=At(n)),i}clone(){const e=new nC({color:F(this.color),height:this.height,outline:this.outline&&this.outline.clone(),url:this.url,width:this.width,xoffset:this.xoffset,xscale:this.xscale,yoffset:this.yoffset,yscale:this.yscale});return e._set("source",F(this.source)),e}hash(){var e;return`${super.hash()}.${(e=this.color)==null?void 0:e.hash()}.${this.height}.${this.url}.${this.width}.${this.xoffset}.${this.xscale}.${this.yoffset}.${this.yscale}`}};u([Me({esriPFS:"picture-fill"},{readOnly:!0})],ys.prototype,"type",void 0),u([d(j7)],ys.prototype,"url",void 0),u([d({type:Number,json:{write:!0}})],ys.prototype,"xscale",void 0),u([d({type:Number,json:{write:!0}})],ys.prototype,"yscale",void 0),u([d({type:Number,cast:At,json:{write:!0}})],ys.prototype,"width",void 0),u([d({type:Number,cast:At,json:{write:!0}})],ys.prototype,"height",void 0),u([d({type:Number,cast:At,json:{write:!0}})],ys.prototype,"xoffset",void 0),u([d({type:Number,cast:At,json:{write:!0}})],ys.prototype,"yoffset",void 0),u([d(V7)],ys.prototype,"source",void 0),ys=nC=u([E("esri.symbols.PictureFillSymbol")],ys);const z7=ys;var iC;let io=iC=class extends N7{constructor(...e){super(...e),this.color=null,this.type="picture-marker",this.url=null,this.source=null,this.height=12,this.width=12,this.size=null}normalizeCtorArgs(e,t,r){if(e&&typeof e!="string"&&e.imageData==null)return e;const n={};return e&&(n.url=e),t!=null&&(n.width=At(t)),r!=null&&(n.height=At(r)),n}readHeight(e,t){return t.size||e}readWidth(e,t){return t.size||e}clone(){const e=new iC({angle:this.angle,height:this.height,url:this.url,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset});return e._set("source",F(this.source)),e}hash(){return`${super.hash()}.${this.height}.${this.url}.${this.width}`}};u([d({json:{write:!1}})],io.prototype,"color",void 0),u([Me({esriPMS:"picture-marker"},{readOnly:!0})],io.prototype,"type",void 0),u([d(j7)],io.prototype,"url",void 0),u([d(V7)],io.prototype,"source",void 0),u([d({type:Number,cast:At,json:{write:!0}})],io.prototype,"height",void 0),u([we("height",["height","size"])],io.prototype,"readHeight",null),u([d({type:Number,cast:At,json:{write:!0}})],io.prototype,"width",void 0),u([d({json:{write:!1}})],io.prototype,"size",void 0),io=iC=u([E("esri.symbols.PictureMarkerSymbol")],io);const ry=io;var Zd;const U7=Le.ofType({base:null,key:"type",typeMap:{icon:Ih,object:LR,text:ey}});let Jd=Zd=class extends ty{constructor(e){super(e),this.verticalOffset=null,this.callout=null,this.symbolLayers=new U7,this.type="point-3d"}supportsCallout(){if((this.symbolLayers?this.symbolLayers.length:0)<1)return!1;for(const e of this.symbolLayers.items)switch(e.type){case"icon":case"text":case"object":continue;default:return!1}return!0}hasVisibleCallout(){return P7(this)}hasVisibleVerticalOffset(){return DR(this)}clone(){return new Zd({verticalOffset:F(this.verticalOffset),callout:F(this.callout),styleOrigin:F(this.styleOrigin),symbolLayers:F(this.symbolLayers),thumbnail:F(this.thumbnail)})}static fromSimpleMarkerSymbol(e){return new Zd({symbolLayers:[Ih.fromSimpleMarkerSymbol(e)]})}static fromPictureMarkerSymbol(e){return new Zd({symbolLayers:[Ih.fromPictureMarkerSymbol(e)]})}static fromCIMSymbol(e){var n,i;if(((i=(n=e.data)==null?void 0:n.symbol)==null?void 0:i.type)!=="CIMPointSymbol")return null;const r=e.data.symbol;return new Zd(r!=null&&r.callout?{symbolLayers:[Ih.fromCIMSymbol(e)],callout:{type:"line",size:.5,color:[0,0,0]},verticalOffset:{screenLength:40}}:{symbolLayers:[Ih.fromCIMSymbol(e)]})}static fromTextSymbol(e){return new Zd({symbolLayers:[ey.fromTextSymbol(e)]})}};u([d({type:R7,json:{write:!0}})],Jd.prototype,"verticalOffset",void 0),u([d(O7)],Jd.prototype,"callout",void 0),u([d({type:U7,json:{origins:{"web-scene":{write:!0}}}})],Jd.prototype,"symbolLayers",void 0),u([Me({PointSymbol3D:"point-3d"},{readOnly:!0})],Jd.prototype,"type",void 0),Jd=Zd=u([E("esri.symbols.PointSymbol3D")],Jd);const Ch=Jd;var Sg;const G7=Le.ofType({base:null,key:"type",typeMap:{extrude:p7,fill:o1,icon:Ih,line:l1,object:LR,text:ey,water:M7}});let xg=Sg=class extends ty{constructor(e){super(e),this.symbolLayers=new G7,this.type="polygon-3d"}clone(){return new Sg({styleOrigin:F(this.styleOrigin),symbolLayers:F(this.symbolLayers),thumbnail:F(this.thumbnail)})}static fromJSON(e){const t=new Sg;if(t.read(e),t.symbolLayers.length===2&&t.symbolLayers.at(0).type==="fill"&&t.symbolLayers.at(1).type==="line"){const r=t.symbolLayers.at(0),n=t.symbolLayers.at(1);!n.enabled||e.symbolLayers&&e.symbolLayers[1]&&e.symbolLayers[1].enable===!1||(r.outline={size:n.size,color:n.material!=null?n.material.color:null}),t.symbolLayers.removeAt(1)}return t}static fromSimpleFillSymbol(e){return new Sg({symbolLayers:[o1.fromSimpleFillSymbol(e)]})}};u([d({type:G7,json:{write:!0}})],xg.prototype,"symbolLayers",void 0),u([Me({PolygonSymbol3D:"polygon-3d"},{readOnly:!0})],xg.prototype,"type",void 0),xg=Sg=u([E("esri.symbols.PolygonSymbol3D")],xg);const u1=xg;var sC;const tT=new xt({esriSFSSolid:"solid",esriSFSNull:"none",esriSFSHorizontal:"horizontal",esriSFSVertical:"vertical",esriSFSForwardDiagonal:"forward-diagonal",esriSFSBackwardDiagonal:"backward-diagonal",esriSFSCross:"cross",esriSFSDiagonalCross:"diagonal-cross"});let Qd=sC=class extends m7{constructor(...e){super(...e),this.color=new We([0,0,0,.25]),this.outline=new ts,this.type="simple-fill",this.style="solid"}normalizeCtorArgs(e,t,r){if(e&&typeof e!="string")return e;const n={};return e&&(n.style=e),t&&(n.outline=t),r&&(n.color=r),n}clone(){return new sC({color:F(this.color),outline:this.outline&&this.outline.clone(),style:this.style})}hash(){return`${super.hash()}${this.style}.${this.color&&this.color.hash()}`}};u([d()],Qd.prototype,"color",void 0),u([d()],Qd.prototype,"outline",void 0),u([Me({esriSFS:"simple-fill"},{readOnly:!0})],Qd.prototype,"type",void 0),u([d({type:tT.apiValues,json:{read:tT.read,write:tT.write}})],Qd.prototype,"style",void 0),Qd=sC=u([E("esri.symbols.SimpleFillSymbol")],Qd);const pd=Qd;var oC;const rT=new xt({esriSMSCircle:"circle",esriSMSSquare:"square",esriSMSCross:"cross",esriSMSX:"x",esriSMSDiamond:"diamond",esriSMSTriangle:"triangle",esriSMSPath:"path"});let va=oC=class extends N7{constructor(...e){super(...e),this.color=new We([255,255,255,.25]),this.type="simple-marker",this.size=12,this.style="circle",this.outline=new ts}normalizeCtorArgs(e,t,r,n){if(e&&typeof e!="string")return e;const i={};return e&&(i.style=e),t!=null&&(i.size=At(t)),r&&(i.outline=r),n&&(i.color=n),i}writeColor(e,t){e&&this.style!=="x"&&this.style!=="cross"&&(t.color=e.toJSON()),e===null&&(t.color=null)}set path(e){this.style="path",this._set("path",e)}clone(){return new oC({angle:this.angle,color:F(this.color),outline:this.outline&&this.outline.clone(),path:this.path,size:this.size,style:this.style,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){var e;return`${super.hash()}.${this.color&&this.color.hash()}.${this.path}.${this.style}.${(e=this.outline)==null?void 0:e.hash()}`}};u([d()],va.prototype,"color",void 0),u([pe("color")],va.prototype,"writeColor",null),u([Me({esriSMS:"simple-marker"},{readOnly:!0})],va.prototype,"type",void 0),u([d()],va.prototype,"size",void 0),u([d({type:rT.apiValues,json:{read:rT.read,write:rT.write}})],va.prototype,"style",void 0),u([d({type:String,json:{write:!0}})],va.prototype,"path",null),u([d({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":ts}},json:{default:null,write:!0}})],va.prototype,"outline",void 0),va=oC=u([E("esri.symbols.SimpleMarkerSymbol")],va);const fd=va;var aC;let Yt=aC=class extends Mi{constructor(...e){super(...e),this.backgroundColor=null,this.borderLineColor=null,this.borderLineSize=null,this.font=new _2,this.horizontalAlignment="center",this.kerning=!0,this.haloColor=null,this.haloSize=null,this.rightToLeft=null,this.rotated=!1,this.text="",this.type="text",this.verticalAlignment="baseline",this.xoffset=0,this.yoffset=0,this.angle=0,this.width=null,this.lineWidth=192,this.lineHeight=1}normalizeCtorArgs(e,t,r){if(e&&typeof e!="string")return e;const n={};return e&&(n.text=e),t&&(n.font=t),r&&(n.color=r),n}writeLineWidth(e,t,r,n){n&&typeof n!="string"?n.origin:t[r]=e}castLineWidth(e){return At(e)}writeLineHeight(e,t,r,n){n&&typeof n!="string"?n.origin:t[r]=e}clone(){return new aC({angle:this.angle,backgroundColor:F(this.backgroundColor),borderLineColor:F(this.borderLineColor),borderLineSize:this.borderLineSize,color:F(this.color),font:this.font&&this.font.clone(),haloColor:F(this.haloColor),haloSize:this.haloSize,horizontalAlignment:this.horizontalAlignment,kerning:this.kerning,lineHeight:this.lineHeight,lineWidth:this.lineWidth,rightToLeft:this.rightToLeft,rotated:this.rotated,text:this.text,verticalAlignment:this.verticalAlignment,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){var e;return`${this.backgroundColor&&this.backgroundColor.hash()}.${this.borderLineColor}.${this.borderLineSize}.${(e=this.color)==null?void 0:e.hash()}.${this.font&&this.font.hash()}.${this.haloColor&&this.haloColor.hash()}.${this.haloSize}.${this.horizontalAlignment}.${this.kerning}.${this.rightToLeft}.${this.rotated}.${this.text}.${this.verticalAlignment}.${this.width}.${this.xoffset}.${this.yoffset}.${this.lineHeight}.${this.lineWidth}.${this.angle}`}};u([d({type:We,json:{write:!0}})],Yt.prototype,"backgroundColor",void 0),u([d({type:We,json:{write:!0}})],Yt.prototype,"borderLineColor",void 0),u([d({type:Number,json:{write:!0},cast:At})],Yt.prototype,"borderLineSize",void 0),u([d({type:_2,json:{write:!0}})],Yt.prototype,"font",void 0),u([d({...S7,json:{write:!0}})],Yt.prototype,"horizontalAlignment",void 0),u([d({type:Boolean,json:{write:!0}})],Yt.prototype,"kerning",void 0),u([d({type:We,json:{write:!0}})],Yt.prototype,"haloColor",void 0),u([d({type:Number,cast:At,json:{write:!0}})],Yt.prototype,"haloSize",void 0),u([d({type:Boolean,json:{write:!0}})],Yt.prototype,"rightToLeft",void 0),u([d({type:Boolean,json:{write:!0}})],Yt.prototype,"rotated",void 0),u([d({type:String,json:{write:!0}})],Yt.prototype,"text",void 0),u([Me({esriTS:"text"},{readOnly:!0})],Yt.prototype,"type",void 0),u([d({...x7,json:{write:!0}})],Yt.prototype,"verticalAlignment",void 0),u([d({type:Number,cast:At,json:{write:!0}})],Yt.prototype,"xoffset",void 0),u([d({type:Number,cast:At,json:{write:!0}})],Yt.prototype,"yoffset",void 0),u([d({type:Number,json:{read:e=>e&&-1*e,write:(e,t)=>t.angle=e&&-1*e}})],Yt.prototype,"angle",void 0),u([d({type:Number,json:{write:!0}})],Yt.prototype,"width",void 0),u([d({type:Number})],Yt.prototype,"lineWidth",void 0),u([pe("lineWidth")],Yt.prototype,"writeLineWidth",null),u([Pt("lineWidth")],Yt.prototype,"castLineWidth",null),u([d(b7)],Yt.prototype,"lineHeight",void 0),u([pe("lineHeight")],Yt.prototype,"writeLineHeight",null),Yt=aC=u([E("esri.symbols.TextSymbol")],Yt);const Sp=Yt;var lC;let so=lC=class extends Mi{constructor(e){super(e),this.styleName=null,this.portal=null,this.styleUrl=null,this.thumbnail=null,this.name=null,this.type="web-style"}get _fetchCacheKey(){const e=this.portal!=null?this.portal:hn.getDefault(),t=e.user?e.user.username:null;return`${this.styleName}:${this.styleUrl}:${this.name}:${t}:${e.url}`}read(e,t){this.portal=t==null?void 0:t.portal,super.read(e,t)}clone(){return new lC({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}fetchSymbol(e){return this._fetchSymbol("webRef",e)}fetchCIMSymbol(e){return this._fetchSymbol("cimRef",e)}async _fetchSymbol(e,t){const r=t!=null?t.cache:null,n=r?this._fetchCacheKey:null;if(r!=null){const a=n&&r.get(n);if(a)return a.clone()}const{resolveWebStyleSymbol:i}=await ie(()=>import("./webStyleSymbolUtils-8f7de622.js"),["assets/webStyleSymbolUtils-8f7de622.js","assets/devEnvironmentUtils-5002a058.js"]);qt(t);const s=i(this,{portal:this.portal},e,t);s.catch(a=>{Z.getLogger(this).error("#fetchSymbol()","Failed to create symbol from style",a)});const o=await s;return e==="webRef"&&o.type==="point-3d"||e==="cimRef"&&o.type==="cim"?(r!=null&&r.set(n,o.clone()),o):null}};u([d({json:{write:!1}})],so.prototype,"color",void 0),u([d({type:String,json:{write:!0}})],so.prototype,"styleName",void 0),u([d({type:hn,json:{write:!1}})],so.prototype,"portal",void 0),u([d({type:String,json:{read:AR,write:cp}})],so.prototype,"styleUrl",void 0),u([d({type:g0,json:{read:!1}})],so.prototype,"thumbnail",void 0),u([d({type:String,json:{write:!0}})],so.prototype,"name",void 0),u([Me({styleSymbolReference:"web-style"},{readOnly:!0})],so.prototype,"type",void 0),u([d()],so.prototype,"_fetchCacheKey",null),so=lC=u([E("esri.symbols.WebStyleSymbol")],so);const xp=so;function cPe(e){if(!e)return!1;switch(e.type){case"picture-fill":case"picture-marker":case"simple-fill":case"simple-line":case"simple-marker":case"text":case"cim":return!0;default:return!1}}function uC(e){if(!e)return!1;switch(e.type){case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":return!0;default:return!1}}const nm={base:Mi,key:"type",typeMap:{"simple-fill":pd,"picture-fill":z7,"picture-marker":ry,"simple-line":ts,"simple-marker":fd,text:Sp,"label-3d":b2,"line-3d":S2,"mesh-3d":x2,"point-3d":Ch,"polygon-3d":u1,"web-style":xp,cim:s1},errorContext:"symbol"},dPe={base:Mi,key:"type",typeMap:{"picture-marker":ry,"simple-marker":fd,text:Sp,"web-style":xp,cim:s1},errorContext:"symbol"},rpe=Qv({types:nm}),npe={base:Mi,key:"type",typeMap:{"simple-fill":pd,"picture-fill":z7,"picture-marker":ry,"simple-line":ts,"simple-marker":fd,text:Sp,"line-3d":S2,"mesh-3d":x2,"point-3d":Ch,"polygon-3d":u1,"web-style":xp,cim:s1},errorContext:"symbol"},ipe={base:Mi,key:"type",typeMap:{text:Sp,"label-3d":b2},errorContext:"symbol"},_D={base:Mi,key:"type",typeMap:{"line-3d":S2,"mesh-3d":x2,"point-3d":Ch,"polygon-3d":u1,"web-style":xp,cim:s1},errorContext:"symbol"},spe={base:Mi,key:"type",typeMap:{"label-3d":b2},errorContext:"symbol"},B7=Jl(nm);var cC;function ope(e){if(!e)return null;const t={};for(const r in e){const n=Xc(e[r]);n&&(t[r]=n)}return Object.keys(t).length!==0?t:null}function ape(e){if(e==null)return null;const t={};for(const r in e){const n=e[r];n&&(t[r]=n.toJSON())}return Object.keys(t).length!==0?t:null}let ci=cC=class extends kr(Q){constructor(...e){super(...e),this.isAggregate=!1,this.layer=null,this.popupTemplate=null,this.sourceLayer=null,Object.defineProperty(this,"uid",{value:o0(),configurable:!0})}normalizeCtorArgs(e,t,r,n){return e&&!e.declaredClass?e:{geometry:e,symbol:t,attributes:r,popupTemplate:n}}set aggregateGeometries(e){const t=this._get("aggregateGeometries");JSON.stringify(t)!==JSON.stringify(e)&&this._set("aggregateGeometries",e)}set attributes(e){const t=this._get("attributes");t!==e&&(this._set("attributes",e),this._notifyLayer("attributes",t,e))}set geometry(e){const t=this._get("geometry");t!==e&&(this._set("geometry",e),this._notifyLayer("geometry",t,e))}set symbol(e){const t=this._get("symbol");t!==e&&(this._set("symbol",e),this._notifyLayer("symbol",t,e))}set visible(e){const t=this._get("visible");t!==e&&(this._set("visible",e),this._notifyLayer("visible",t,e))}cloneShallow(){return new cC({aggregateGeometries:this.aggregateGeometries,attributes:this.attributes,geometry:this.geometry,isAggregate:this.isAggregate,layer:this.layer,popupTemplate:this.popupTemplate,sourceLayer:this.sourceLayer,symbol:this.symbol,visible:this.visible})}getEffectivePopupTemplate(e=!1){if(this.popupTemplate)return this.popupTemplate;for(const t of[this.sourceLayer,this.layer])if(t){if("popupTemplate"in t&&t.popupTemplate)return t.popupTemplate;if(e&&"defaultPopupTemplate"in t&&t.defaultPopupTemplate!=null)return t.defaultPopupTemplate}return null}getAttribute(e){var t;return(t=this.attributes)==null?void 0:t[e]}setAttribute(e,t){if(this.attributes){const r=this.getAttribute(e);this.attributes[e]=t,this._notifyLayer("attributes",r,t,e)}else this.attributes={[e]:t},this._notifyLayer("attributes",void 0,t,e)}getObjectId(){return this.sourceLayer&&"objectIdField"in this.sourceLayer&&this.sourceLayer.objectIdField?this.getAttribute(this.sourceLayer.objectIdField):null}toJSON(){return{aggregateGeometries:ape(this.aggregateGeometries),geometry:this.geometry!=null?this.geometry.toJSON():null,symbol:this.symbol!=null?this.symbol.toJSON():null,attributes:{...this.attributes},popupTemplate:this.popupTemplate&&this.popupTemplate.toJSON()}}notifyGeometryChanged(){this._notifyLayer("geometry",this.geometry,this.geometry)}notifyMeshTransformChanged(e={}){const{geometry:t}=this;if((t==null?void 0:t.type)==="mesh"){const r={origin:t.origin,transform:t.transform};this._notifyLayer("origin-transform",r,r,e.action)}}_notifyLayer(e,t,r,n){if(!this.layer||!("graphicChanged"in this.layer))return;const i={graphic:this,property:e,oldValue:t,newValue:r};e==="origin-transform"&&(i.action=n),e==="attributes"&&(i.attributeName=n),this.layer.graphicChanged(i)}};u([d({value:null,json:{read:ope}})],ci.prototype,"aggregateGeometries",null),u([d({value:null})],ci.prototype,"attributes",null),u([d({value:null,types:Wm,json:{read:Xc}})],ci.prototype,"geometry",null),u([d({type:Boolean})],ci.prototype,"isAggregate",void 0),u([d({clonable:"reference"})],ci.prototype,"layer",void 0),u([d({type:Km})],ci.prototype,"popupTemplate",void 0),u([d({clonable:"reference"})],ci.prototype,"sourceLayer",void 0),u([d({value:null,types:nm})],ci.prototype,"symbol",null),u([d({type:Boolean,value:!0})],ci.prototype,"visible",null),ci=cC=u([E("esri.Graphic")],ci),function(e){e.generateUID=o0}(ci||(ci={}));const Ki=ci;let FR=class{constructor(t,r){this.min=t,this.max=r,this.range=r-t}ndiff(t,r=0){return Math.ceil((t-r)/this.range)*this.range+r}_normalize(t,r,n,i=0,s=!1){return(n-=i)<t?n+=this.ndiff(t-n):n>r&&(n-=this.ndiff(n-r)),s&&n===r&&(n=t),n+i}normalize(t,r=0,n=!1){return this._normalize(this.min,this.max,t,r,n)}clamp(t,r=0){return Yi(t-r,this.min,this.max)+r}monotonic(t,r,n){return t<r?r:r+this.ndiff(t-r,n)}minimalMonotonic(t,r,n){return this._normalize(t,t+this.range,r,n)}center(t,r,n){return r=this.monotonic(t,r,n),this.normalize((t+r)/2,n)}diff(t,r,n){return this.monotonic(t,r,n)-t}shortestSignedDiff(t,r){t=this.normalize(t);const n=(r=this.normalize(r))-t,i=r<t?this.minimalMonotonic(t,r)-t:r-this.minimalMonotonic(r,t);return Math.abs(n)<Math.abs(i)?n:i}contains(t,r,n){return r=this.minimalMonotonic(t,r),(n=this.minimalMonotonic(t,n))>t&&n<r}};function jR(e){for(const t in e){const r=e[t];r instanceof Function&&(e[t]=r.bind(e))}return e}jR(new FR(0,2*Math.PI));jR(new FR(-Math.PI,Math.PI));const lpe=jR(new FR(0,360));let hl=class extends kr(Q){constructor(...t){super(...t),this.position=new be([0,0,0]),this.heading=0,this.tilt=0,this.fov=55}normalizeCtorArgs(t,r,n,i){if(t&&typeof t=="object"&&("x"in t||Array.isArray(t))){const s={position:t};return r!=null&&(s.heading=r),n!=null&&(s.tilt=n),i!=null&&(s.fov=i),s}return t}writePosition(t,r,n,i){const s=t.clone();s.x=Ts(t.x||0),s.y=Ts(t.y||0),s.z=t.hasZ?Ts(t.z||0):t.z,r[n]=s.write({},i)}readPosition(t,r){const n=new be;return n.read(t,r),n.x=Ts(n.x||0),n.y=Ts(n.y||0),n.z=n.hasZ?Ts(n.z||0):n.z,n}equals(t){return t!=null&&this.tilt===t.tilt&&this.heading===t.heading&&this.fov===t.fov&&this.position.equals(t.position)}};u([d({type:be,json:{write:{isRequired:!0}}})],hl.prototype,"position",void 0),u([pe("position")],hl.prototype,"writePosition",null),u([we("position")],hl.prototype,"readPosition",null),u([d({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),Pt(e=>lpe.normalize(Ts(e)))],hl.prototype,"heading",void 0),u([d({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),Pt(e=>Yi(Ts(e),-180,180))],hl.prototype,"tilt",void 0),u([d({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],hl.prototype,"fov",void 0),hl=u([E("esri.Camera")],hl);const upe=hl;var dC;let Gu=dC=class extends Q{constructor(e){super(e),this.rotation=0,this.scale=0,this.targetGeometry=null,this.camera=null}castRotation(e){return(e%=360)<0&&(e+=360),e}clone(){return new dC({rotation:this.rotation,scale:this.scale,targetGeometry:this.targetGeometry!=null?this.targetGeometry.clone():null,camera:this.camera!=null?this.camera.clone():null})}};function nT(){return{enabled:!this.camera}}u([d({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:nT}}}}})],Gu.prototype,"rotation",void 0),u([Pt("rotation")],Gu.prototype,"castRotation",null),u([d({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:nT}}}}})],Gu.prototype,"scale",void 0),u([d({types:Wm,json:{read:Xc,write:!0,origins:{"web-scene":{read:Xc,write:{overridePolicy:nT}}}}})],Gu.prototype,"targetGeometry",void 0),u([d({type:upe,json:{write:!0}})],Gu.prototype,"camera",void 0),Gu=dC=u([E("esri.Viewpoint")],Gu);const Do=Gu;function Ee(e,t,r={}){return VR(e,t,r,q7)}function Xl(e,t,r={}){return VR(e,t,r,W7)}function VR(e,t,r={},n){let i=null;const s=r.once?(o,a)=>{n(o)&&(or(i),t(o,a))}:(o,a)=>{n(o)&&t(o,a)};if(i=ine(e,s,r.sync,r.equals),r.initial){const o=e();s(o,o)}return i}function Rm(e,t,r,n={}){let i=null,s=null,o=null;function a(){var h;i&&s&&(s.remove(),(h=n.onListenerRemove)==null||h.call(n,i),i=null,s=null)}function l(h){n.once&&n.once&&or(o),r(h)}const c=Ee(e,(h,f)=>{var m;a(),Yx(h)&&(i=h,s=Kx(h,t,l),(m=n.onListenerAdd)==null||m.call(n,h))},{sync:n.sync,initial:!0});return o=Hl(()=>{c.remove(),a()}),o}function wv(e,t){return cpe(e,W7,t)}function cpe(e,t,r){if(Go(r))return Promise.reject(ar());const n=e();if(t!=null&&t(n))return Promise.resolve(n);let i=null;function s(){i=or(i)}return new Promise((o,a)=>{i=qx([As(r,()=>{s(),a(ar())}),VR(e,l=>{s(),o(l)},{sync:!1,once:!0},t??q7)])})}function q7(e){return!0}function W7(e){return!!e}const ny={sync:!0},Ir={initial:!0},cc={sync:!0,initial:!0};let US=class{constructor(t=r=>r.values().next().value){this._peeker=t,this._observable=new i2,this._items=new Set}get length(){return Ve(this._observable),this._items.size}clear(){this.length!==0&&(this._items.clear(),this._observable.notify())}last(){if(this.length===0)return;let t;for(t of this._items);return t}peek(){if(this.length!==0)return this._peeker(this._items)}push(t){this.contains(t)||(this._items.add(t),this._observable.notify())}contains(t){return Ve(this._observable),this._items.has(t)}pop(){if(this.length===0)return;const t=this.peek();return this._items.delete(t),this._observable.notify(),t}popLast(){if(this.length===0)return;const t=this.last();return this._items.delete(t),this._observable.notify(),t}remove(t){this.contains(t)&&(this._items.delete(t),this._observable.notify())}filter(t){const r=this.length;return this._items.forEach(n=>{t(n)||this._items.delete(n)}),r!==this._items.size&&this._observable.notify(),this}*[Symbol.iterator](){Ve(this._observable),yield*this._items}};const dpe={statsWorker:()=>ie(()=>import("./statsWorker-5b1af0e5.js"),["assets/statsWorker-5b1af0e5.js","assets/quantizationUtils-20b347c1.js","assets/utils-23709ca4.js","assets/generateRendererUtils-e00cbd9a.js"]),geometryEngineWorker:()=>ie(()=>import("./geometryEngineWorker-a77e6ba6.js"),["assets/geometryEngineWorker-a77e6ba6.js","assets/geometryEngineJSON-cfd9e900.js","assets/geometryEngineBase-3ed6e1ee.js","assets/json-48e3ea08.js"]),CSVSourceWorker:()=>ie(()=>import("./CSVSourceWorker-14c4a84d.js"),["assets/CSVSourceWorker-14c4a84d.js","assets/json-48e3ea08.js","assets/FeatureStore-23f8eed1.js","assets/BoundsStore-91a45721.js","assets/PooledRBush-c287f557.js","assets/projectionSupport-a7571eb4.js","assets/timeSupport-0de4f5f3.js","assets/QueryEngine-d75cb44b.js","assets/WhereClause-3339dfce.js","assets/executionError-c92d3b85.js","assets/QueryEngineCapabilities-42e44ded.js","assets/quantizationUtils-20b347c1.js","assets/utils-23709ca4.js","assets/generateRendererUtils-e00cbd9a.js","assets/clientSideDefaults-c5b4d28b.js"]),EdgeProcessingWorker:()=>ie(()=>import("./EdgeProcessingWorker-a73a8393.js"),["assets/EdgeProcessingWorker-a73a8393.js","assets/InterleavedLayout-06ad5730.js","assets/BufferView-4d060d73.js","assets/types-1305598a.js","assets/edgeProcessing-0a1f5215.js","assets/deduplicate-55d1cdb1.js","assets/Indices-7b5af16f.js","assets/VertexAttribute-9f2e53ec.js","assets/enums-b14466b3.js","assets/VertexElementDescriptor-2925c6af.js"]),ElevationSamplerWorker:()=>ie(()=>import("./ElevationSamplerWorker-7ed9770a.js"),["assets/ElevationSamplerWorker-7ed9770a.js","assets/PooledRBush-c287f557.js","assets/georeference-149ab787.js","assets/mat3f64-221ce671.js","assets/mat4f64-1413b4a7.js","assets/spatialReferenceEllipsoidUtils-e67582fd.js","assets/MeshLocalVertexSpace-aceab1dd.js","assets/MeshGeoreferencedRelativeVertexSpace-616f4ead.js","assets/quat-625bfdbb.js","assets/quatf64-3363c48e.js","assets/vec32-aac4b6cd.js","assets/BufferView-4d060d73.js"]),FeatureServiceSnappingSourceWorker:()=>ie(()=>import("./FeatureServiceSnappingSourceWorker-762aa8e0.js"),["assets/FeatureServiceSnappingSourceWorker-762aa8e0.js","assets/FeatureStore-23f8eed1.js","assets/BoundsStore-91a45721.js","assets/PooledRBush-c287f557.js","assets/projectionSupport-a7571eb4.js","assets/json-48e3ea08.js","assets/timeSupport-0de4f5f3.js","assets/QueryEngine-d75cb44b.js","assets/WhereClause-3339dfce.js","assets/executionError-c92d3b85.js","assets/QueryEngineCapabilities-42e44ded.js","assets/quantizationUtils-20b347c1.js","assets/utils-23709ca4.js","assets/generateRendererUtils-e00cbd9a.js","assets/byteSizeEstimations-7cf1c05d.js","assets/ByteSizeUnit-d4757d40.js"]),GeoJSONSourceWorker:()=>ie(()=>import("./GeoJSONSourceWorker-37eab977.js"),["assets/GeoJSONSourceWorker-37eab977.js","assets/FeatureStore-23f8eed1.js","assets/BoundsStore-91a45721.js","assets/PooledRBush-c287f557.js","assets/projectionSupport-a7571eb4.js","assets/json-48e3ea08.js","assets/timeSupport-0de4f5f3.js","assets/QueryEngine-d75cb44b.js","assets/WhereClause-3339dfce.js","assets/executionError-c92d3b85.js","assets/QueryEngineCapabilities-42e44ded.js","assets/quantizationUtils-20b347c1.js","assets/utils-23709ca4.js","assets/generateRendererUtils-e00cbd9a.js","assets/geojson-f7dde0c4.js","assets/clientSideDefaults-c5b4d28b.js","assets/sourceUtils-2a960777.js"]),LercWorker:()=>ie(()=>import("./LercWorker-da145acb.js"),[]),MemorySourceWorker:()=>ie(()=>import("./MemorySourceWorker-acf7deb6.js"),["assets/MemorySourceWorker-acf7deb6.js","assets/objectIdUtils-789e911a.js","assets/FeatureStore-23f8eed1.js","assets/BoundsStore-91a45721.js","assets/PooledRBush-c287f557.js","assets/projectionSupport-a7571eb4.js","assets/json-48e3ea08.js","assets/timeSupport-0de4f5f3.js","assets/QueryEngine-d75cb44b.js","assets/WhereClause-3339dfce.js","assets/executionError-c92d3b85.js","assets/QueryEngineCapabilities-42e44ded.js","assets/quantizationUtils-20b347c1.js","assets/utils-23709ca4.js","assets/generateRendererUtils-e00cbd9a.js","assets/clientSideDefaults-c5b4d28b.js","assets/sourceUtils-2a960777.js"]),PBFDecoderWorker:()=>ie(()=>import("./PBFDecoderWorker-2a687da3.js"),[]),Pipeline:()=>ie(()=>import("./Pipeline-0b9b5b7e.js"),["assets/Pipeline-0b9b5b7e.js","assets/QueryEngine-d75cb44b.js","assets/WhereClause-3339dfce.js","assets/executionError-c92d3b85.js","assets/projectionSupport-a7571eb4.js","assets/json-48e3ea08.js","assets/QueryEngineCapabilities-42e44ded.js","assets/quantizationUtils-20b347c1.js","assets/timeSupport-0de4f5f3.js","assets/utils-23709ca4.js","assets/generateRendererUtils-e00cbd9a.js","assets/FeatureStore2D-82757a37.js","assets/CircularArray-ef508845.js","assets/ComputedAttributeStorage-9e574e70.js","assets/arcadeTimeUtils-a7821097.js","assets/definitions-e4cb28dd.js","assets/visualVariablesUtils-a8c18281.js","assets/color-2b7193c1.js","assets/enums-f1a6a48a.js","assets/enums-b14466b3.js","assets/VertexElementDescriptor-2925c6af.js","assets/ogcFeatureUtils-2f2e159a.js","assets/geojson-f7dde0c4.js","assets/clientSideDefaults-c5b4d28b.js","assets/createConnection-f9b502ae.js","assets/geohashUtils-77d8429b.js"]),PointCloudWorker:()=>ie(()=>import("./PointCloudWorker-4a7160be.js"),["assets/PointCloudWorker-4a7160be.js","assets/quat-625bfdbb.js","assets/mat3f64-221ce671.js","assets/quatf64-3363c48e.js","assets/I3SBinaryReader-e25bd4c1.js","assets/VertexAttribute-9f2e53ec.js","assets/vec3f32-ad1dc57f.js","assets/PointCloudUniqueValueRenderer-34c712ec.js"]),RasterWorker:()=>ie(()=>import("./RasterWorker-e350a1d8.js"),["assets/RasterWorker-e350a1d8.js","assets/dataUtils-e13db66f.js","assets/RasterSymbolizer-5263d28c.js","assets/colorUtils-c0f43caf.js","assets/rasterRendererChecks-e55c06d8.js","assets/utils-32460483.js","assets/rasterProjectionHelper-2c7c9ae1.js"]),SceneLayerSnappingSourceWorker:()=>ie(()=>import("./SceneLayerSnappingSourceWorker-4fb38136.js"),["assets/SceneLayerSnappingSourceWorker-4fb38136.js","assets/lineSegment-f1e6dc8e.js","assets/sphere-2983c6c0.js","assets/ByteSizeUnit-d4757d40.js","assets/mat3f64-221ce671.js","assets/mat4f64-1413b4a7.js","assets/quatf64-3363c48e.js","assets/plane-e3b39cd3.js","assets/InterleavedLayout-06ad5730.js","assets/BufferView-4d060d73.js","assets/types-1305598a.js","assets/edgeProcessing-0a1f5215.js","assets/deduplicate-55d1cdb1.js","assets/Indices-7b5af16f.js","assets/VertexAttribute-9f2e53ec.js","assets/enums-b14466b3.js","assets/VertexElementDescriptor-2925c6af.js"]),SceneLayerWorker:()=>ie(()=>import("./SceneLayerWorker-f29a2d0c.js"),["assets/SceneLayerWorker-f29a2d0c.js","assets/MeshLocalVertexSpace-aceab1dd.js","assets/MeshGeoreferencedRelativeVertexSpace-616f4ead.js","assets/vec32-aac4b6cd.js","assets/sphere-2983c6c0.js","assets/ByteSizeUnit-d4757d40.js","assets/mat3f64-221ce671.js","assets/mat4f64-1413b4a7.js","assets/quatf64-3363c48e.js"]),WFSSourceWorker:()=>ie(()=>import("./WFSSourceWorker-3bf63985.js"),["assets/WFSSourceWorker-3bf63985.js","assets/FeatureStore-23f8eed1.js","assets/BoundsStore-91a45721.js","assets/PooledRBush-c287f557.js","assets/projectionSupport-a7571eb4.js","assets/json-48e3ea08.js","assets/timeSupport-0de4f5f3.js","assets/QueryEngine-d75cb44b.js","assets/WhereClause-3339dfce.js","assets/executionError-c92d3b85.js","assets/QueryEngineCapabilities-42e44ded.js","assets/quantizationUtils-20b347c1.js","assets/utils-23709ca4.js","assets/generateRendererUtils-e00cbd9a.js","assets/geojson-f7dde0c4.js","assets/sourceUtils-2a960777.js","assets/wfsUtils-436e4bca.js","assets/xmlUtils-444cb4c0.js"]),WorkerTileHandler:()=>ie(()=>import("./WorkerTileHandler-d65dc6e5.js"),["assets/WorkerTileHandler-d65dc6e5.js","assets/enums-fb086c25.js","assets/GeometryUtils-984e8446.js","assets/Rect-ea14f53a.js","assets/config-1337d16e.js","assets/StyleDefinition-29c49b98.js","assets/enums-f1a6a48a.js","assets/TurboLine-216fb4d0.js","assets/definitions-e4cb28dd.js","assets/StyleRepository-e19e019c.js","assets/enums-b14466b3.js","assets/VertexElementDescriptor-2925c6af.js","assets/colorUtils-c0f43caf.js","assets/earcut-e27332fd.js","assets/BidiEngine-9a40f2f4.js"])};var cn;(function(e){e[e.HANDSHAKE=0]="HANDSHAKE",e[e.OPEN=1]="OPEN",e[e.OPENED=2]="OPENED",e[e.RESPONSE=3]="RESPONSE",e[e.INVOKE=4]="INVOKE",e[e.ABORT=5]="ABORT",e[e.CLOSE=6]="CLOSE",e[e.OPEN_PORT=7]="OPEN_PORT",e[e.ON=8]="ON"})(cn||(cn={}));let hpe=0;function H7(){return hpe++}function ppe(e){return e&&typeof e=="object"&&("result"in e||"transferList"in e)}function _v(e){return e?typeof e=="string"?JSON.stringify({name:"message",message:e}):e.toJSON?JSON.stringify(e):JSON.stringify({name:e.name,message:e.message,details:e.details||{stack:e.stack}}):null}function zR(e,t,r,n){if(t.type===cn.OPEN_PORT)return void e.postMessage(t,[t.port]);if(t.type!==cn.INVOKE&&t.type!==cn.RESPONSE)return void e.postMessage(t);let i;if(ppe(r)?(i=bD(r.transferList),t.data=r.result):(i=bD(n),t.data=r),i){if(V("ff")){for(const s of i)if("byteLength"in s&&s.byteLength>267386880){const o="Worker call with large ArrayBuffer would crash Firefox";switch(t.type){case cn.INVOKE:throw o;case cn.RESPONSE:return void zR(e,{type:cn.RESPONSE,jobId:t.jobId,error:_v(o)})}}}e.postMessage(t,i)}else e.postMessage(t)}function bv(e){if(!e)return null;const t=e.data;return t?typeof t=="string"?JSON.parse(t):t:null}function bD(e){if(!e||!e.length)return null;if(V("esri-workers-arraybuffer-transfer"))return e;const t=e.filter(r=>!fpe(r));return t.length?t:null}function fpe(e){var t;return e instanceof ArrayBuffer||((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="ArrayBuffer"}const{CLOSE:SD,ABORT:xD,INVOKE:$D,RESPONSE:Dy,OPEN_PORT:TD,ON:mpe}=cn,ype=2;let gpe=class{constructor(t){this._timer=null,this._cancelledJobIds=new Set,this._invokeMessages=[],this._invoke=t,this._timer=null,this._process=this._process.bind(this)}push(t){t.type===cn.ABORT?this._cancelledJobIds.add(t.jobId):(this._invokeMessages.push(t),this._timer===null&&(this._timer=setTimeout(this._process,0)))}clear(){this._invokeMessages.length=0,this._cancelledJobIds.clear(),this._timer=null}_process(){this._timer=null;for(const t of this._invokeMessages)this._cancelledJobIds.has(t.jobId)||this._invoke(t);this._cancelledJobIds.clear(),this._invokeMessages.length=0}},td=class Yp{static connect(t){const r=new MessageChannel;let n;n=typeof t=="function"?new t:"default"in t&&typeof t.default=="function"?new t.default:t;const i=new Yp(r.port1,{channel:r,client:n},()=>null);return typeof n=="object"&&"remoteClient"in n&&(n.remoteClient=i),Yp.clients.set(i,n),r.port2}static loadWorker(t){const r=dpe[t];return r?r():Promise.resolve(null)}constructor(t,r,n){this._port=t,this._getNextJob=n,this._outJobs=new Map,this._inJobs=new Map,this._invokeQueue=new gpe(i=>this._onInvokeMessage(i)),this._client=r.client,this._onMessage=this._onMessage.bind(this),this._channel=r.channel,this._schedule=r.schedule,this._port.addEventListener("message",this._onMessage),this._port.start()}close(){this._post({type:SD}),this._close()}isBusy(){return this._outJobs.size>0}invoke(t,r,n){const i=n==null?void 0:n.signal,s=n==null?void 0:n.transferList;if(!this._port)return Promise.reject(new N("worker:port-closed",`Cannot call invoke('${t}'), port is closed`,{methodName:t,data:r}));const o=H7();return new Promise((a,l)=>{if(Go(i))return this._processWork(),void l(ar());const c=As(i,()=>{const f=this._outJobs.get(o);f&&(this._outJobs.delete(o),this._processWork(),or(f.abortHandle),this._post({type:xD,jobId:o}),l(ar()))}),h={resolve:a,reject:l,abortHandle:c,debugInfo:t};this._outJobs.set(o,h),this._post({type:$D,jobId:o,methodName:t,abortable:i!=null},r,s)})}on(t,r){const n=new MessageChannel;function i(s){r(s.data)}return this._port.postMessage({type:cn.ON,eventType:t,port:n.port2},[n.port2]),n.port1.addEventListener("message",i),n.port1.start(),{remove(){n.port1.postMessage({type:cn.CLOSE}),n.port1.close(),n.port1.removeEventListener("message",i)}}}jobAdded(){this._processWork()}openPort(){const t=new MessageChannel;return this._post({type:TD,port:t.port2}),t.port1}_processWork(){if(this._outJobs.size>=ype)return;const t=this._getNextJob();if(!t)return;const{methodName:r,data:n,invokeOptions:i,resolver:s}=t;this.invoke(r,n,i).then(o=>s.resolve(o)).catch(o=>s.reject(o))}_close(){this._channel&&(this._channel=void 0),this._port.removeEventListener("message",this._onMessage),this._port.close(),this._outJobs.forEach(t=>{or(t.abortHandle),t.reject(ar(`Worker closing, aborting job calling '${t.debugInfo}'`))}),this._inJobs.clear(),this._outJobs.clear(),this._invokeQueue.clear(),this._port=null,this._client=null,this._schedule=null}_onMessage(t){this._schedule!=null?this._schedule(()=>this._processMessage(t)):this._processMessage(t)}_processMessage(t){const r=bv(t);if(r)switch(r.type){case Dy:this._onResponseMessage(r);break;case $D:this._invokeQueue.push(r);break;case xD:this._onAbortMessage(r);break;case SD:this._onCloseMessage();break;case TD:this._onOpenPortMessage(r);break;case mpe:this._onOnMessage(r)}}_onAbortMessage(t){const r=this._inJobs,n=t.jobId,i=r.get(n);this._invokeQueue.push(t),i&&(i.controller&&i.controller.abort(),r.delete(n))}_onCloseMessage(){const t=this._client;this._close(),t&&"destroy"in t&&Yp.clients.get(this)===t&&t.destroy(),Yp.clients.delete(this),t!=null&&t.remoteClient&&(t.remoteClient=null)}_onInvokeMessage(t){const{methodName:r,jobId:n,data:i,abortable:s}=t,o=s?new AbortController:null,a=this._inJobs;let l,c=this._client,h=c[r];try{if(!h&&r&&r.includes(".")){const f=r.split(".");for(let m=0;m<f.length-1;m++)c=c[f[m]],h=c[f[m+1]]}if(typeof h!="function")throw new TypeError(`${r} is not a function`);l=h.call(c,i,{client:this,signal:o?o.signal:null})}catch(f){return void this._post({type:Dy,jobId:n,error:_v(f)})}au(l)?(a.set(n,{controller:o,promise:l}),l.then(f=>{a.has(n)&&(a.delete(n),this._post({type:Dy,jobId:n},f))},f=>{a.has(n)&&(a.delete(n),Ei(f)||this._post({type:Dy,jobId:n,error:_v(f||{message:`Error encountered at method ${r}`})}))})):this._post({type:Dy,jobId:n},l)}_onOpenPortMessage(t){new Yp(t.port,{client:this._client},()=>null)}_onOnMessage(t){const{port:r}=t,n=this._client.on(t.eventType,s=>{r.postMessage(s)}),i=Kx(t.port,"message",s=>{const o=bv(s);(o==null?void 0:o.type)===cn.CLOSE&&(i.remove(),n.remove(),r.close())})}_onResponseMessage(t){const{jobId:r,error:n,data:i}=t,s=this._outJobs;if(!s.has(r))return;const o=s.get(r);s.delete(r),this._processWork(),or(o.abortHandle),n?o.reject(N.fromJSON(JSON.parse(n))):o.resolve(i)}_post(t,r,n){return zR(this._port,t,r,n)}};td.kernelInfo={buildDate:Nz,fullVersion:JO,revision:Dz},td.clients=new Map;let vpe=class{constructor(){this._inUseClients=new Array,this._clients=new Array,this._clientPromises=new Array,this._ongoingJobsQueue=new US}destroy(){this.close()}get closed(){return!this._clients||!this._clients.length}open(t,r){return new Promise((n,i)=>{let s=!0;const o=a=>{qt(r.signal),s&&(s=!1,a())};this._clients.length=t.length,this._clientPromises.length=t.length,this._inUseClients.length=t.length;for(let a=0;a<t.length;++a){const l=t[a];au(l)?this._clientPromises[a]=l.then(c=>(this._clients[a]=new td(c,r,()=>this._ongoingJobsQueue.pop()??null),o(n),this._clients[a]),()=>(o(i),null)):(this._clients[a]=new td(l,r,()=>this._ongoingJobsQueue.pop()??null),this._clientPromises[a]=Promise.resolve(this._clients[a]),o(n))}})}broadcast(t,r,n){const i=new Array(this._clientPromises.length);for(let s=0;s<this._clientPromises.length;++s){const o=this._clientPromises[s];i[s]=o.then(a=>a==null?void 0:a.invoke(t,r,n))}return i}close(){let t;for(;t=this._ongoingJobsQueue.pop();)t.resolver.reject(ar(`Worker closing, aborting job calling '${t.methodName}'`));for(const r of this._clientPromises)r.then(n=>n==null?void 0:n.close());this._clients.length=0,this._clientPromises.length=0,this._inUseClients.length=0}invoke(t,r,n){let i;Array.isArray(n)?(Z.getLogger("esri.core.workers.Connection").warn("invoke()","The transferList parameter is deprecated, use the options object instead"),i={transferList:n}):i=n;const s=Bo();this._ongoingJobsQueue.push({methodName:t,data:r,invokeOptions:i,resolver:s});for(let o=0;o<this._clientPromises.length;o++){const a=this._clients[o];a?a.jobAdded():this._clientPromises[o].then(l=>l==null?void 0:l.jobAdded())}return s.promise}on(t,r){return Promise.all(this._clientPromises).then(()=>qx(this._clients.map(n=>n.on(t,r))))}openPorts(){return new Promise(t=>{const r=new Array(this._clientPromises.length);let n=r.length;for(let i=0;i<this._clientPromises.length;++i)this._clientPromises[i].then(s=>{s&&(r[i]=s.openPort()),--n==0&&t(r)})})}get test(){return{numClients:this._clients.length}}};const Z7=Z.getLogger("esri.intl.substitute");function J7(e,t,r={}){const{format:n={}}=r;return Qx(e,i=>wpe(i,t,n))}function wpe(e,t,r){let n,i;const s=e.indexOf(":");if(s===-1?n=e.trim():(n=e.slice(0,s).trim(),i=e.slice(s+1).trim()),!n)return"";const o=Zv(n,t);if(o==null)return"";const a=(i?r==null?void 0:r[i]:null)??(r==null?void 0:r[n]);return a?_pe(o,a):i?bpe(o,i):UR(o)}function _pe(e,t){switch(t.type){case"date":return ed(e,t.intlOptions);case"number":return Om(e,t.intlOptions);default:return Z7.warn("missing format descriptor for key {key}"),UR(e)}}function bpe(e,t){switch(t.toLowerCase()){case"dateformat":return ed(e);case"numberformat":return Om(e);default:return Z7.warn(`inline format is unsupported since 4.12: ${t}`),/^(dateformat|datestring)/i.test(t)?ed(e):/^numberformat/i.test(t)?Om(e):UR(e)}}function UR(e){switch(typeof e){case"string":return e;case"number":return Om(e);case"boolean":return""+e;default:return e instanceof Date?ed(e):""}}async function Spe(e,t,r,n){const i=t.exec(r);if(!i)throw new N("esri-intl:invalid-bundle",`Bundle id "${r}" is not compatible with the pattern "${t}"`);const s=i[1]?`${i[1]}/`:"",o=i[2],a=foe(n),l=`${s}${o}.json`,c=a?`${s}${o}_${a}.json`:l;let h;try{h=await ED(e(c))}catch(f){if(c===l)throw new N("intl:unknown-bundle",`Bundle "${r}" cannot be loaded`,{error:f});try{h=await ED(e(l))}catch(m){throw new N("intl:unknown-bundle",`Bundle "${r}" cannot be loaded`,{error:m})}}return h}async function ED(e){if(MD.fetchBundleAsset!=null)return MD.fetchBundleAsset(e);const t=await St(e,{responseType:"text"});return JSON.parse(t.data)}let xpe=class{constructor({base:t="",pattern:r,location:n=new URL(window.location.href)}){let i;i=typeof n=="string"?s=>new URL(s,new URL(n,window.location.href)).href:n instanceof URL?s=>new URL(s,n).href:n,this.pattern=typeof r=="string"?new RegExp(`^${r}`):r,this.getAssetUrl=i,t=t?t.endsWith("/")?t:t+"/":"",this.matcher=new RegExp(`^${t}(?:(.*)/)?(.*)$`)}fetchMessageBundle(t,r){return Spe(this.getAssetUrl,this.matcher,t,r)}};function $pe(e){return new xpe(e)}const MD={};poe($pe({pattern:"esri/",location:ct}));const Tpe={};function Epe(e){const t={async:e.async,isDebug:e.isDebug,locale:e.locale,baseUrl:e.baseUrl,has:{...e.has},map:{...e.map},packages:e.packages&&e.packages.concat()||[],paths:{...e.paths}};return e.hasOwnProperty("async")||(t.async=!0),e.hasOwnProperty("isDebug")||(t.isDebug=!1),e.baseUrl||(t.baseUrl=Tpe.baseUrl),t}let Mpe=class{constructor(){const t=document.createDocumentFragment();["addEventListener","dispatchEvent","removeEventListener"].forEach(r=>{this[r]=(...n)=>t[r](...n)})}},q_=class{constructor(){this._dispatcher=new Mpe,this._workerPostMessage({type:cn.HANDSHAKE})}terminate(){}get onmessage(){return this._onmessageHandler}set onmessage(t){this._onmessageHandler&&this.removeEventListener("message",this._onmessageHandler),this._onmessageHandler=t,t&&this.addEventListener("message",t)}get onmessageerror(){return this._onmessageerrorHandler}set onmessageerror(t){this._onmessageerrorHandler&&this.removeEventListener("messageerror",this._onmessageerrorHandler),this._onmessageerrorHandler=t,t&&this.addEventListener("messageerror",t)}get onerror(){return this._onerrorHandler}set onerror(t){this._onerrorHandler&&this.removeEventListener("error",this._onerrorHandler),this._onerrorHandler=t,t&&this.addEventListener("error",t)}postMessage(t){lS(()=>{this._workerMessageHandler(new MessageEvent("message",{data:t}))})}dispatchEvent(t){return this._dispatcher.dispatchEvent(t)}addEventListener(t,r,n){this._dispatcher.addEventListener(t,r,n)}removeEventListener(t,r,n){this._dispatcher.removeEventListener(t,r,n)}_workerPostMessage(t){lS(()=>{this.dispatchEvent(new MessageEvent("message",{data:t}))})}async _workerMessageHandler(t){const r=bv(t);if(r&&r.type===cn.OPEN){const{modulePath:n,jobId:i}=r;let s=await td.loadWorker(n);s||(s=await ie(()=>import(n),[]));const o=td.connect(s);this._workerPostMessage({type:cn.OPENED,jobId:i,data:o})}}};const hC=Z.getLogger("esri.core.workers.workerFactory"),{HANDSHAKE:Ipe}=cn,Cpe='let globalId=0;const outgoing=new Map,configuration=JSON.parse("{CONFIGURATION}");self.esriConfig=configuration.esriConfig;const workerPath=self.esriConfig.workers.workerPath,HANDSHAKE=0,OPEN=1,OPENED=2,RESPONSE=3,INVOKE=4,ABORT=5;function createAbortError(){const e=new Error("Aborted");return e.name="AbortError",e}function receiveMessage(e){return e&&e.data?"string"==typeof e.data?JSON.parse(e.data):e.data:null}function invokeStaticMessage(e,o,r){const t=r&&r.signal,n=globalId++;return new Promise(((r,s)=>{if(t){if(t.aborted)return s(createAbortError());t.addEventListener("abort",(()=>{outgoing.get(n)&&(outgoing.delete(n),self.postMessage({type:ABORT,jobId:n}),s(createAbortError()))}))}outgoing.set(n,{resolve:r,reject:s}),self.postMessage({type:INVOKE,jobId:n,methodName:e,abortable:null!=t,data:o})}))}let workerRevisionChecked=!1;function checkWorkerRevision(e){if(!workerRevisionChecked&&e.kernelInfo){workerRevisionChecked=!0;const{revision:o,fullVersion:r}=configuration.kernelInfo,{revision:t,fullVersion:n,version:s}=e.kernelInfo;esriConfig.assetsPath!==esriConfig.defaultAssetsPath&&o!==t&&console.warn(`Version mismatch detected between ArcGIS Maps SDK for JavaScript modules and assets. For more information visit https://bit.ly/3QnsuSo.\\nModules version: ${r}\\nAssets version: ${n??s}\\nAssets path: ${esriConfig.assetsPath}`)}}function messageHandler(e){const o=receiveMessage(e);if(!o)return;const r=o.jobId;switch(o.type){case OPEN:let n;function t(e){const o=n.connect(e);self.postMessage({type:OPENED,jobId:r,data:o},[o])}"function"==typeof define&&define.amd?require([workerPath],(e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then((e=>e||new Promise((e=>{require([o.modulePath],e)})))).then(t)})):"System"in self&&"function"==typeof System.import?System.import(workerPath).then((e=>(n=e.default,checkWorkerRevision(n),n.loadWorker(o.modulePath)))).then((e=>e||System.import(o.modulePath))).then(t):esriConfig.workers.useDynamicImport?import(workerPath).then((e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then((e=>e||import(o.modulePath))).then(t)})):(self.RemoteClient||importScripts(workerPath),n=self.RemoteClient.default||self.RemoteClient,checkWorkerRevision(n),n.loadWorker(o.modulePath).then(t));break;case RESPONSE:if(outgoing.has(r)){const s=outgoing.get(r);outgoing.delete(r),o.error?s.reject(JSON.parse(o.error)):s.resolve(o.data)}}}self.dojoConfig=configuration.loaderConfig,esriConfig.workers.loaderUrl&&(self.importScripts(esriConfig.workers.loaderUrl),"function"==typeof require&&"function"==typeof require.config&&require.config(configuration.loaderConfig)),self.addEventListener("message",messageHandler),self.postMessage({type:0});';let pw,fw;const ID="Failed to create Worker. Fallback to execute module in main thread";async function kpe(){if(!V("esri-workers")||(V("mozilla"),0))return CD(new q_);if(!pw&&!fw)try{const t=Cpe.split('"{CONFIGURATION}"').join(`'${Ppe()}'`);pw=URL.createObjectURL(new Blob([t],{type:"text/javascript"}))}catch(t){fw=t||{}}let e;if(pw)try{e=new Worker(pw,{name:"esri-worker-"+Ope++})}catch{hC.warn(ID,fw),e=new q_}else hC.warn(ID,fw),e=new q_;return CD(e)}async function CD(e){return new Promise(t=>{function r(i){const s=bv(i);s&&s.type===Ipe&&(e.removeEventListener("message",r),e.removeEventListener("error",n),t(e))}function n(i){i.preventDefault(),e.removeEventListener("message",r),e.removeEventListener("error",n),hC.warn("Failed to create Worker. Fallback to execute module in main thread",i),(e=new q_).addEventListener("message",r),e.addEventListener("error",n)}e.addEventListener("message",r),e.addEventListener("error",n)})}function Ppe(){let e;if(ot.default!=null){const i={...ot};delete i.default,e=JSON.parse(JSON.stringify(i))}else e=JSON.parse(JSON.stringify(ot));e.assetsPath=Ms(e.assetsPath),e.defaultAssetsPath=e.defaultAssetsPath?Ms(e.defaultAssetsPath):void 0,e.request.interceptors=[],e.log.interceptors=[],e.locale=ei(),e.has={"esri-csp-restrictions":V("esri-csp-restrictions"),"esri-2d-debug":!1,"esri-2d-update-debug":V("esri-2d-update-debug"),"esri-2d-log-updating":V("esri-2d-log-updating"),"featurelayer-pbf":V("featurelayer-pbf"),"featurelayer-simplify-thresholds":V("featurelayer-simplify-thresholds"),"featurelayer-simplify-payload-size-factors":V("featurelayer-simplify-payload-size-factors"),"featurelayer-simplify-mobile-factor":V("featurelayer-simplify-mobile-factor"),"esri-atomics":V("esri-atomics"),"esri-shared-array-buffer":V("esri-shared-array-buffer"),"esri-tiles-debug":V("esri-tiles-debug"),"esri-workers-arraybuffer-transfer":V("esri-workers-arraybuffer-transfer"),"feature-polyline-generalization-factor":V("feature-polyline-generalization-factor"),"host-webworker":1,"polylabel-placement-enabled":V("polylabel-placement-enabled")},e.workers.loaderUrl&&(e.workers.loaderUrl=Ms(e.workers.loaderUrl)),e.workers.workerPath?e.workers.workerPath=Ms(e.workers.workerPath):e.workers.workerPath=Ms(ct("esri/core/workers/RemoteClient.js")),e.workers.useDynamicImport=!1;const t=ot.workers.loaderConfig,r=Epe({baseUrl:t==null?void 0:t.baseUrl,locale:ei(),has:{"csp-restrictions":1,"dojo-test-sniff":0,"host-webworker":1,...t==null?void 0:t.has},map:{...t==null?void 0:t.map},paths:{...t==null?void 0:t.paths},packages:(t==null?void 0:t.packages)||[]});return JSON.stringify({esriConfig:e,loaderConfig:r,kernelInfo:{buildDate:Nz,fullVersion:JO,revision:Dz}})}let Ope=0;const{ABORT:kD,INVOKE:Rpe,OPEN:Ape,OPENED:Lpe,RESPONSE:Fy}=cn;let Npe=class Q7{static async create(t){const r=await kpe();return new Q7(r,t)}constructor(t,r){this._outJobs=new Map,this._inJobs=new Map,this.worker=t,this.id=r,t.addEventListener("message",this._onMessage.bind(this)),t.addEventListener("error",n=>{n.preventDefault(),Z.getLogger("esri.core.workers.WorkerOwner").error(n)})}terminate(){this.worker.terminate()}async open(t,r={}){const{signal:n}=r,i=H7();return new Promise((s,o)=>{const a={resolve:s,reject:o,abortHandle:SO(n,()=>{this._outJobs.delete(i),this._post({type:kD,jobId:i})})};this._outJobs.set(i,a),this._post({type:Ape,jobId:i,modulePath:t})})}_onMessage(t){const r=bv(t);if(r)switch(r.type){case Lpe:this._onOpenedMessage(r);break;case Fy:this._onResponseMessage(r);break;case kD:this._onAbortMessage(r);break;case Rpe:this._onInvokeMessage(r)}}_onAbortMessage(t){const r=this._inJobs,n=t.jobId,i=r.get(n);i&&(i.controller&&i.controller.abort(),r.delete(n))}_onInvokeMessage(t){const{methodName:r,jobId:n,data:i,abortable:s}=t,o=s?new AbortController:null,a=this._inJobs,l=hse[r];let c;try{if(typeof l!="function")throw new TypeError(`${r} is not a function`);c=l.call(null,i,{signal:o?o.signal:null})}catch(h){return void this._post({type:Fy,jobId:n,error:_v(h)})}au(c)?(a.set(n,{controller:o,promise:c}),c.then(h=>{a.has(n)&&(a.delete(n),this._post({type:Fy,jobId:n},h))},h=>{a.has(n)&&(a.delete(n),h||(h={message:"Error encountered at method"+r}),Ei(h)||this._post({type:Fy,jobId:n,error:_v(h||{message:`Error encountered at method ${r}`})}))})):this._post({type:Fy,jobId:n},c)}_onOpenedMessage(t){const{jobId:r,data:n}=t,i=this._outJobs.get(r);i&&(this._outJobs.delete(r),or(i.abortHandle),i.resolve(n))}_onResponseMessage(t){const{jobId:r,error:n,data:i}=t,s=this._outJobs.get(r);s&&(this._outJobs.delete(r),or(s.abortHandle),n?s.reject(N.fromJSON(JSON.parse(n))):s.resolve(i))}_post(t,r,n){return zR(this.worker,t,r,n)}};const PD=V("host-browser")?Math.min(navigator.hardwareConcurrency-1,V("workers-pool-size")):0;let kh=V("esri-mobile")?Math.min(PD,3):PD;kh||(kh=V("safari")&&V("mac")?7:2);let OD=0;const W_=[];function Dpe(){Y7()}async function mw(e,t){const r=new vpe;return await r.open(e,t),r}async function _Pe(e,t={}){if(typeof e!="string")throw new N("workers:undefined-module","modulePath is missing");let r=t.strategy||"distributed";if(V("host-webworker")&&!V("esri-workers")&&(r="local"),r==="local"){let n=await td.loadWorker(e);n||(n=await ie(()=>import(e),[])),qt(t.signal);const i=t.client||n;return mw([td.connect(n)],{...t,client:i})}if(await Y7(),qt(t.signal),r==="dedicated"){const n=OD++%kh;return mw([await W_[n].open(e,t)],t)}if(t.maxNumWorkers&&t.maxNumWorkers>0){const n=Math.min(t.maxNumWorkers,kh);if(n<kh){const i=new Array(n);for(let s=0;s<n;++s){const o=OD++%kh;i[s]=W_[o].open(e,t)}return mw(i,t)}}return mw(W_.map(n=>n.open(e,t)),t)}let yw=null;async function Y7(){if(yw)return yw;new AbortController;const e=[];for(let t=0;t<kh;t++){const r=Npe.create(t).then(n=>(W_[t]=n,n));e.push(r)}return yw=Promise.all(e),yw}function Fpe(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function md(e,t,r,n,i,s,o,a,l,c,h,f,m,y,g,v,w){return e[0]=t,e[1]=r,e[2]=n,e[3]=i,e[4]=s,e[5]=o,e[6]=a,e[7]=l,e[8]=c,e[9]=h,e[10]=f,e[11]=m,e[12]=y,e[13]=g,e[14]=v,e[15]=w,e}function c1(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function lu(e,t){if(e===t){const r=t[1],n=t[2],i=t[3],s=t[6],o=t[7],a=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=r,e[6]=t[9],e[7]=t[13],e[8]=n,e[9]=s,e[11]=t[14],e[12]=i,e[13]=o,e[14]=a}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function jpe(e,t){return K7(e,t)||c1(e),e}function K7(e,t){const r=t[0],n=t[1],i=t[2],s=t[3],o=t[4],a=t[5],l=t[6],c=t[7],h=t[8],f=t[9],m=t[10],y=t[11],g=t[12],v=t[13],w=t[14],b=t[15],S=r*a-n*o,_=r*l-i*o,x=r*c-s*o,T=n*l-i*a,I=n*c-s*a,C=i*c-s*l,O=h*v-f*g,W=h*w-m*g,z=h*b-y*g,ne=f*w-m*v,K=f*b-y*v,xe=m*b-y*w;let le=S*xe-_*K+x*ne+T*z-I*W+C*O;return le?(le=1/le,e[0]=(a*xe-l*K+c*ne)*le,e[1]=(i*K-n*xe-s*ne)*le,e[2]=(v*C-w*I+b*T)*le,e[3]=(m*I-f*C-y*T)*le,e[4]=(l*z-o*xe-c*W)*le,e[5]=(r*xe-i*z+s*W)*le,e[6]=(w*x-g*C-b*_)*le,e[7]=(h*C-m*x+y*_)*le,e[8]=(o*K-a*z+c*O)*le,e[9]=(n*z-r*K-s*O)*le,e[10]=(g*I-v*x+b*S)*le,e[11]=(f*x-h*I-y*S)*le,e[12]=(a*W-o*ne-l*O)*le,e[13]=(r*ne-n*W+i*O)*le,e[14]=(v*_-g*T-w*S)*le,e[15]=(h*T-f*_+m*S)*le,e):null}function Vpe(e,t){const r=t[0],n=t[1],i=t[2],s=t[3],o=t[4],a=t[5],l=t[6],c=t[7],h=t[8],f=t[9],m=t[10],y=t[11],g=t[12],v=t[13],w=t[14],b=t[15];return e[0]=a*(m*b-y*w)-f*(l*b-c*w)+v*(l*y-c*m),e[1]=-(n*(m*b-y*w)-f*(i*b-s*w)+v*(i*y-s*m)),e[2]=n*(l*b-c*w)-a*(i*b-s*w)+v*(i*c-s*l),e[3]=-(n*(l*y-c*m)-a*(i*y-s*m)+f*(i*c-s*l)),e[4]=-(o*(m*b-y*w)-h*(l*b-c*w)+g*(l*y-c*m)),e[5]=r*(m*b-y*w)-h*(i*b-s*w)+g*(i*y-s*m),e[6]=-(r*(l*b-c*w)-o*(i*b-s*w)+g*(i*c-s*l)),e[7]=r*(l*y-c*m)-o*(i*y-s*m)+h*(i*c-s*l),e[8]=o*(f*b-y*v)-h*(a*b-c*v)+g*(a*y-c*f),e[9]=-(r*(f*b-y*v)-h*(n*b-s*v)+g*(n*y-s*f)),e[10]=r*(a*b-c*v)-o*(n*b-s*v)+g*(n*c-s*a),e[11]=-(r*(a*y-c*f)-o*(n*y-s*f)+h*(n*c-s*a)),e[12]=-(o*(f*w-m*v)-h*(a*w-l*v)+g*(a*m-l*f)),e[13]=r*(f*w-m*v)-h*(n*w-i*v)+g*(n*m-i*f),e[14]=-(r*(a*w-l*v)-o*(n*w-i*v)+g*(n*l-i*a)),e[15]=r*(a*m-l*f)-o*(n*m-i*f)+h*(n*l-i*a),e}function zpe(e){const t=e[0],r=e[1],n=e[2],i=e[3],s=e[4],o=e[5],a=e[6],l=e[7],c=e[8],h=e[9],f=e[10],m=e[11],y=e[12],g=e[13],v=e[14],w=e[15];return(t*o-r*s)*(f*w-m*v)-(t*a-n*s)*(h*w-m*g)+(t*l-i*s)*(h*v-f*g)+(r*a-n*o)*(c*w-m*y)-(r*l-i*o)*(c*v-f*y)+(n*l-i*a)*(c*g-h*y)}function X7(e,t,r){const n=t[0],i=t[1],s=t[2],o=t[3],a=t[4],l=t[5],c=t[6],h=t[7],f=t[8],m=t[9],y=t[10],g=t[11],v=t[12],w=t[13],b=t[14],S=t[15];let _=r[0],x=r[1],T=r[2],I=r[3];return e[0]=_*n+x*a+T*f+I*v,e[1]=_*i+x*l+T*m+I*w,e[2]=_*s+x*c+T*y+I*b,e[3]=_*o+x*h+T*g+I*S,_=r[4],x=r[5],T=r[6],I=r[7],e[4]=_*n+x*a+T*f+I*v,e[5]=_*i+x*l+T*m+I*w,e[6]=_*s+x*c+T*y+I*b,e[7]=_*o+x*h+T*g+I*S,_=r[8],x=r[9],T=r[10],I=r[11],e[8]=_*n+x*a+T*f+I*v,e[9]=_*i+x*l+T*m+I*w,e[10]=_*s+x*c+T*y+I*b,e[11]=_*o+x*h+T*g+I*S,_=r[12],x=r[13],T=r[14],I=r[15],e[12]=_*n+x*a+T*f+I*v,e[13]=_*i+x*l+T*m+I*w,e[14]=_*s+x*c+T*y+I*b,e[15]=_*o+x*h+T*g+I*S,e}function Upe(e,t,r){const n=r[0],i=r[1],s=r[2];if(t===e)e[12]=t[0]*n+t[4]*i+t[8]*s+t[12],e[13]=t[1]*n+t[5]*i+t[9]*s+t[13],e[14]=t[2]*n+t[6]*i+t[10]*s+t[14],e[15]=t[3]*n+t[7]*i+t[11]*s+t[15];else{const o=t[0],a=t[1],l=t[2],c=t[3],h=t[4],f=t[5],m=t[6],y=t[7],g=t[8],v=t[9],w=t[10],b=t[11];e[0]=o,e[1]=a,e[2]=l,e[3]=c,e[4]=h,e[5]=f,e[6]=m,e[7]=y,e[8]=g,e[9]=v,e[10]=w,e[11]=b,e[12]=o*n+h*i+g*s+t[12],e[13]=a*n+f*i+v*s+t[13],e[14]=l*n+m*i+w*s+t[14],e[15]=c*n+y*i+b*s+t[15]}return e}function Gpe(e,t,r){const n=r[0],i=r[1],s=r[2];return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*s,e[9]=t[9]*s,e[10]=t[10]*s,e[11]=t[11]*s,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function Bpe(e,t,r,n){let i,s,o,a,l,c,h,f,m,y,g,v,w,b,S,_,x,T,I,C,O,W,z,ne,K=n[0],xe=n[1],le=n[2],B=Math.sqrt(K*K+xe*xe+le*le);return B<zs()?null:(B=1/B,K*=B,xe*=B,le*=B,i=Math.sin(r),s=Math.cos(r),o=1-s,a=t[0],l=t[1],c=t[2],h=t[3],f=t[4],m=t[5],y=t[6],g=t[7],v=t[8],w=t[9],b=t[10],S=t[11],_=K*K*o+s,x=xe*K*o+le*i,T=le*K*o-xe*i,I=K*xe*o-le*i,C=xe*xe*o+s,O=le*xe*o+K*i,W=K*le*o+xe*i,z=xe*le*o-K*i,ne=le*le*o+s,e[0]=a*_+f*x+v*T,e[1]=l*_+m*x+w*T,e[2]=c*_+y*x+b*T,e[3]=h*_+g*x+S*T,e[4]=a*I+f*C+v*O,e[5]=l*I+m*C+w*O,e[6]=c*I+y*C+b*O,e[7]=h*I+g*C+S*O,e[8]=a*W+f*z+v*ne,e[9]=l*W+m*z+w*ne,e[10]=c*W+y*z+b*ne,e[11]=h*W+g*z+S*ne,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}function qpe(e,t,r){const n=Math.sin(r),i=Math.cos(r),s=t[4],o=t[5],a=t[6],l=t[7],c=t[8],h=t[9],f=t[10],m=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=s*i+c*n,e[5]=o*i+h*n,e[6]=a*i+f*n,e[7]=l*i+m*n,e[8]=c*i-s*n,e[9]=h*i-o*n,e[10]=f*i-a*n,e[11]=m*i-l*n,e}function Wpe(e,t,r){const n=Math.sin(r),i=Math.cos(r),s=t[0],o=t[1],a=t[2],l=t[3],c=t[8],h=t[9],f=t[10],m=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=s*i-c*n,e[1]=o*i-h*n,e[2]=a*i-f*n,e[3]=l*i-m*n,e[8]=s*n+c*i,e[9]=o*n+h*i,e[10]=a*n+f*i,e[11]=l*n+m*i,e}function Hpe(e,t,r){const n=Math.sin(r),i=Math.cos(r),s=t[0],o=t[1],a=t[2],l=t[3],c=t[4],h=t[5],f=t[6],m=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=s*i+c*n,e[1]=o*i+h*n,e[2]=a*i+f*n,e[3]=l*i+m*n,e[4]=c*i-s*n,e[5]=h*i-o*n,e[6]=f*i-a*n,e[7]=m*i-l*n,e}function eG(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function Zpe(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Jpe(e,t,r){if(t===0)return c1(e);let n,i,s,o=r[0],a=r[1],l=r[2],c=Math.sqrt(o*o+a*a+l*l);return c<zs()?null:(c=1/c,o*=c,a*=c,l*=c,n=Math.sin(t),i=Math.cos(t),s=1-i,e[0]=o*o*s+i,e[1]=a*o*s+l*n,e[2]=l*o*s-a*n,e[3]=0,e[4]=o*a*s-l*n,e[5]=a*a*s+i,e[6]=l*a*s+o*n,e[7]=0,e[8]=o*l*s+a*n,e[9]=a*l*s-o*n,e[10]=l*l*s+i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}function Qpe(e,t){const r=Math.sin(t),n=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=n,e[6]=r,e[7]=0,e[8]=0,e[9]=-r,e[10]=n,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Ype(e,t){const r=Math.sin(t),n=Math.cos(t);return e[0]=n,e[1]=0,e[2]=-r,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=r,e[9]=0,e[10]=n,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Kpe(e,t){const r=Math.sin(t),n=Math.cos(t);return e[0]=n,e[1]=r,e[2]=0,e[3]=0,e[4]=-r,e[5]=n,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function tG(e,t,r){const n=t[0],i=t[1],s=t[2],o=t[3],a=n+n,l=i+i,c=s+s,h=n*a,f=n*l,m=n*c,y=i*l,g=i*c,v=s*c,w=o*a,b=o*l,S=o*c;return e[0]=1-(y+v),e[1]=f+S,e[2]=m-b,e[3]=0,e[4]=f-S,e[5]=1-(h+v),e[6]=g+w,e[7]=0,e[8]=m+b,e[9]=g-w,e[10]=1-(h+y),e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}function Xpe(e,t){const r=efe,n=-t[0],i=-t[1],s=-t[2],o=t[3],a=t[4],l=t[5],c=t[6],h=t[7],f=n*n+i*i+s*s+o*o;return f>0?(r[0]=2*(a*o+h*n+l*s-c*i)/f,r[1]=2*(l*o+h*i+c*n-a*s)/f,r[2]=2*(c*o+h*s+a*i-l*n)/f):(r[0]=2*(a*o+h*n+l*s-c*i),r[1]=2*(l*o+h*i+c*n-a*s),r[2]=2*(c*o+h*s+a*i-l*n)),tG(e,t,r),e}const efe=Yo();function tfe(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e}function rfe(e,t){const r=t[0],n=t[1],i=t[2],s=t[4],o=t[5],a=t[6],l=t[8],c=t[9],h=t[10];return e[0]=Math.sqrt(r*r+n*n+i*i),e[1]=Math.sqrt(s*s+o*o+a*a),e[2]=Math.sqrt(l*l+c*c+h*h),e}function nfe(e,t){const r=t[0]+t[5]+t[10];let n=0;return r>0?(n=2*Math.sqrt(r+1),e[3]=.25*n,e[0]=(t[6]-t[9])/n,e[1]=(t[8]-t[2])/n,e[2]=(t[1]-t[4])/n):t[0]>t[5]&&t[0]>t[10]?(n=2*Math.sqrt(1+t[0]-t[5]-t[10]),e[3]=(t[6]-t[9])/n,e[0]=.25*n,e[1]=(t[1]+t[4])/n,e[2]=(t[8]+t[2])/n):t[5]>t[10]?(n=2*Math.sqrt(1+t[5]-t[0]-t[10]),e[3]=(t[8]-t[2])/n,e[0]=(t[1]+t[4])/n,e[1]=.25*n,e[2]=(t[6]+t[9])/n):(n=2*Math.sqrt(1+t[10]-t[0]-t[5]),e[3]=(t[1]-t[4])/n,e[0]=(t[8]+t[2])/n,e[1]=(t[6]+t[9])/n,e[2]=.25*n),e}function ife(e,t,r,n){const i=t[0],s=t[1],o=t[2],a=t[3],l=i+i,c=s+s,h=o+o,f=i*l,m=i*c,y=i*h,g=s*c,v=s*h,w=o*h,b=a*l,S=a*c,_=a*h,x=n[0],T=n[1],I=n[2];return e[0]=(1-(g+w))*x,e[1]=(m+_)*x,e[2]=(y-S)*x,e[3]=0,e[4]=(m-_)*T,e[5]=(1-(f+w))*T,e[6]=(v+b)*T,e[7]=0,e[8]=(y+S)*I,e[9]=(v-b)*I,e[10]=(1-(f+g))*I,e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}function sfe(e,t,r,n,i){const s=t[0],o=t[1],a=t[2],l=t[3],c=s+s,h=o+o,f=a+a,m=s*c,y=s*h,g=s*f,v=o*h,w=o*f,b=a*f,S=l*c,_=l*h,x=l*f,T=n[0],I=n[1],C=n[2],O=i[0],W=i[1],z=i[2],ne=(1-(v+b))*T,K=(y+x)*T,xe=(g-_)*T,le=(y-x)*I,B=(1-(m+b))*I,it=(w+S)*I,Ge=(g+_)*C,H=(w-S)*C,oe=(1-(m+v))*C;return e[0]=ne,e[1]=K,e[2]=xe,e[3]=0,e[4]=le,e[5]=B,e[6]=it,e[7]=0,e[8]=Ge,e[9]=H,e[10]=oe,e[11]=0,e[12]=r[0]+O-(ne*O+le*W+Ge*z),e[13]=r[1]+W-(K*O+B*W+H*z),e[14]=r[2]+z-(xe*O+it*W+oe*z),e[15]=1,e}function ofe(e,t){const r=t[0],n=t[1],i=t[2],s=t[3],o=r+r,a=n+n,l=i+i,c=r*o,h=n*o,f=n*a,m=i*o,y=i*a,g=i*l,v=s*o,w=s*a,b=s*l;return e[0]=1-f-g,e[1]=h+b,e[2]=m-w,e[3]=0,e[4]=h-b,e[5]=1-c-g,e[6]=y+v,e[7]=0,e[8]=m+w,e[9]=y-v,e[10]=1-c-f,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function afe(e,t,r,n,i,s,o){const a=1/(r-t),l=1/(i-n),c=1/(s-o);return e[0]=2*s*a,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*s*l,e[6]=0,e[7]=0,e[8]=(r+t)*a,e[9]=(i+n)*l,e[10]=(o+s)*c,e[11]=-1,e[12]=0,e[13]=0,e[14]=o*s*2*c,e[15]=0,e}function lfe(e,t,r,n,i){const s=1/Math.tan(t/2);let o;return e[0]=s/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=s,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,i!=null&&i!==1/0?(o=1/(n-i),e[10]=(i+n)*o,e[14]=2*i*n*o):(e[10]=-1,e[14]=-2*n),e}function ufe(e,t,r,n){const i=Math.tan(t.upDegrees*Math.PI/180),s=Math.tan(t.downDegrees*Math.PI/180),o=Math.tan(t.leftDegrees*Math.PI/180),a=Math.tan(t.rightDegrees*Math.PI/180),l=2/(o+a),c=2/(i+s);return e[0]=l,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=c,e[6]=0,e[7]=0,e[8]=-(o-a)*l*.5,e[9]=(i-s)*c*.5,e[10]=n/(r-n),e[11]=-1,e[12]=0,e[13]=0,e[14]=n*r/(r-n),e[15]=0,e}function cfe(e,t,r,n,i,s,o){const a=1/(t-r),l=1/(n-i),c=1/(s-o);return e[0]=-2*a,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*c,e[11]=0,e[12]=(t+r)*a,e[13]=(i+n)*l,e[14]=(o+s)*c,e[15]=1,e}function dfe(e,t,r,n){const i=t[0],s=t[1],o=t[2];let a=i-r[0],l=s-r[1],c=o-r[2];const h=zs();if(Math.abs(a)<h&&Math.abs(l)<h&&Math.abs(c)<h)return void c1(e);let f=1/Math.sqrt(a*a+l*l+c*c);a*=f,l*=f,c*=f;const m=n[0],y=n[1],g=n[2];let v=y*c-g*l,w=g*a-m*c,b=m*l-y*a;f=Math.sqrt(v*v+w*w+b*b),f?(f=1/f,v*=f,w*=f,b*=f):(v=0,w=0,b=0);let S=l*b-c*w,_=c*v-a*b,x=a*w-l*v;f=Math.sqrt(S*S+_*_+x*x),f?(f=1/f,S*=f,_*=f,x*=f):(S=0,_=0,x=0),e[0]=v,e[1]=S,e[2]=a,e[3]=0,e[4]=w,e[5]=_,e[6]=l,e[7]=0,e[8]=b,e[9]=x,e[10]=c,e[11]=0,e[12]=-(v*i+w*s+b*o),e[13]=-(S*i+_*s+x*o),e[14]=-(a*i+l*s+c*o),e[15]=1}function hfe(e,t,r,n){const i=t[0],s=t[1],o=t[2],a=n[0],l=n[1],c=n[2];let h=i-r[0],f=s-r[1],m=o-r[2],y=h*h+f*f+m*m;y>0&&(y=1/Math.sqrt(y),h*=y,f*=y,m*=y);let g=l*m-c*f,v=c*h-a*m,w=a*f-l*h;return y=g*g+v*v+w*w,y>0&&(y=1/Math.sqrt(y),g*=y,v*=y,w*=y),e[0]=g,e[1]=v,e[2]=w,e[3]=0,e[4]=f*w-m*v,e[5]=m*g-h*w,e[6]=h*v-f*g,e[7]=0,e[8]=h,e[9]=f,e[10]=m,e[11]=0,e[12]=i,e[13]=s,e[14]=o,e[15]=1,e}function pfe(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}function ffe(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+e[6]**2+e[7]**2+e[8]**2+e[9]**2+e[10]**2+e[11]**2+e[12]**2+e[13]**2+e[14]**2+e[15]**2)}function mfe(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e[6]=t[6]+r[6],e[7]=t[7]+r[7],e[8]=t[8]+r[8],e[9]=t[9]+r[9],e[10]=t[10]+r[10],e[11]=t[11]+r[11],e[12]=t[12]+r[12],e[13]=t[13]+r[13],e[14]=t[14]+r[14],e[15]=t[15]+r[15],e}function rG(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e[4]=t[4]-r[4],e[5]=t[5]-r[5],e[6]=t[6]-r[6],e[7]=t[7]-r[7],e[8]=t[8]-r[8],e[9]=t[9]-r[9],e[10]=t[10]-r[10],e[11]=t[11]-r[11],e[12]=t[12]-r[12],e[13]=t[13]-r[13],e[14]=t[14]-r[14],e[15]=t[15]-r[15],e}function yfe(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e[8]=t[8]*r,e[9]=t[9]*r,e[10]=t[10]*r,e[11]=t[11]*r,e[12]=t[12]*r,e[13]=t[13]*r,e[14]=t[14]*r,e[15]=t[15]*r,e}function gfe(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e[2]=t[2]+r[2]*n,e[3]=t[3]+r[3]*n,e[4]=t[4]+r[4]*n,e[5]=t[5]+r[5]*n,e[6]=t[6]+r[6]*n,e[7]=t[7]+r[7]*n,e[8]=t[8]+r[8]*n,e[9]=t[9]+r[9]*n,e[10]=t[10]+r[10]*n,e[11]=t[11]+r[11]*n,e[12]=t[12]+r[12]*n,e[13]=t[13]+r[13]*n,e[14]=t[14]+r[14]*n,e[15]=t[15]+r[15]*n,e}function vfe(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]}function wfe(e,t){if(e===t)return!0;const r=e[0],n=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],h=e[8],f=e[9],m=e[10],y=e[11],g=e[12],v=e[13],w=e[14],b=e[15],S=t[0],_=t[1],x=t[2],T=t[3],I=t[4],C=t[5],O=t[6],W=t[7],z=t[8],ne=t[9],K=t[10],xe=t[11],le=t[12],B=t[13],it=t[14],Ge=t[15],H=zs();return Math.abs(r-S)<=H*Math.max(1,Math.abs(r),Math.abs(S))&&Math.abs(n-_)<=H*Math.max(1,Math.abs(n),Math.abs(_))&&Math.abs(i-x)<=H*Math.max(1,Math.abs(i),Math.abs(x))&&Math.abs(s-T)<=H*Math.max(1,Math.abs(s),Math.abs(T))&&Math.abs(o-I)<=H*Math.max(1,Math.abs(o),Math.abs(I))&&Math.abs(a-C)<=H*Math.max(1,Math.abs(a),Math.abs(C))&&Math.abs(l-O)<=H*Math.max(1,Math.abs(l),Math.abs(O))&&Math.abs(c-W)<=H*Math.max(1,Math.abs(c),Math.abs(W))&&Math.abs(h-z)<=H*Math.max(1,Math.abs(h),Math.abs(z))&&Math.abs(f-ne)<=H*Math.max(1,Math.abs(f),Math.abs(ne))&&Math.abs(m-K)<=H*Math.max(1,Math.abs(m),Math.abs(K))&&Math.abs(y-xe)<=H*Math.max(1,Math.abs(y),Math.abs(xe))&&Math.abs(g-le)<=H*Math.max(1,Math.abs(g),Math.abs(le))&&Math.abs(v-B)<=H*Math.max(1,Math.abs(v),Math.abs(B))&&Math.abs(w-it)<=H*Math.max(1,Math.abs(w),Math.abs(it))&&Math.abs(b-Ge)<=H*Math.max(1,Math.abs(b),Math.abs(Ge))}function _fe(e){const t=zs(),r=e[0],n=e[1],i=e[2],s=e[4],o=e[5],a=e[6],l=e[8],c=e[9],h=e[10];return Math.abs(1-(r*r+s*s+l*l))<=t&&Math.abs(1-(n*n+o*o+c*c))<=t&&Math.abs(1-(i*i+a*a+h*h))<=t}function bfe(e){return e[0]===1&&e[1]===0&&e[2]===0&&e[4]===0&&e[5]===1&&e[6]===0&&e[8]===0&&e[9]===0&&e[10]===1}const Sfe=X7,xfe=rG;Object.freeze(Object.defineProperty({__proto__:null,add:mfe,adjoint:Vpe,copy:Fpe,determinant:zpe,equals:wfe,exactEquals:vfe,frob:ffe,fromQuat:ofe,fromQuat2:Xpe,fromRotation:Jpe,fromRotationTranslation:tG,fromRotationTranslationScale:ife,fromRotationTranslationScaleOrigin:sfe,fromScaling:Zpe,fromTranslation:eG,fromXRotation:Qpe,fromYRotation:Ype,fromZRotation:Kpe,frustum:afe,getRotation:nfe,getScaling:rfe,getTranslation:tfe,hasIdentityRotation:bfe,identity:c1,invert:K7,invertOrIdentity:jpe,isOrthoNormal:_fe,lookAt:dfe,mul:Sfe,multiply:X7,multiplyScalar:yfe,multiplyScalarAndAdd:gfe,ortho:cfe,perspective:lfe,perspectiveFromFieldOfView:ufe,rotate:Bpe,rotateX:qpe,rotateY:Wpe,rotateZ:Hpe,scale:Gpe,set:md,str:pfe,sub:xfe,subtract:rG,targetTo:hfe,translate:Upe,transpose:lu},Symbol.toStringTag,{value:"Module"}));let iT,A=null;function GR(){return!!A}function $fe(){return!!V("esri-wasm")}function nG(){return iT||(iT=ie(()=>import("./pe-wasm-47aa1fd8.js"),[]).then(e=>e.p).then(({default:e})=>e({locateFile:t=>ct(`esri/geometry/support/${t}`)})).then(e=>{sG(e)}),iT)}var pC,Ut,Sv;(function(e){function t(s,o,a){A.ensureCache.prepare();const l=gh(a),c=a===l,h=A.ensureFloat64(l),f=A._pe_geog_to_proj(A.getPointer(s),o,h);return f&&bc(a,o,h,c),f}function r(s,o,a,l){switch(l){case Ut.PE_TRANSFORM_P_TO_G:return n(s,o,a);case Ut.PE_TRANSFORM_G_TO_P:return t(s,o,a)}return 0}function n(s,o,a){return i(s,o,a,0)}function i(s,o,a,l){A.ensureCache.prepare();const c=gh(a),h=a===c,f=A.ensureFloat64(c),m=A._pe_proj_to_geog_center(A.getPointer(s),o,f,l);return m&&bc(a,o,f,h),m}e.geogToProj=t,e.projGeog=r,e.projToGeog=n,e.projToGeogCenter=i})(pC||(pC={})),function(e){function t(){e.PE_BUFFER_MAX=A.PeDefs.prototype.PE_BUFFER_MAX,e.PE_NAME_MAX=A.PeDefs.prototype.PE_NAME_MAX,e.PE_MGRS_MAX=A.PeDefs.prototype.PE_MGRS_MAX,e.PE_USNG_MAX=A.PeDefs.prototype.PE_USNG_MAX,e.PE_DD_MAX=A.PeDefs.prototype.PE_DD_MAX,e.PE_DDM_MAX=A.PeDefs.prototype.PE_DDM_MAX,e.PE_DMS_MAX=A.PeDefs.prototype.PE_DMS_MAX,e.PE_UTM_MAX=A.PeDefs.prototype.PE_UTM_MAX,e.PE_PARM_MAX=A.PeDefs.prototype.PE_PARM_MAX,e.PE_TYPE_NONE=A.PeDefs.prototype.PE_TYPE_NONE,e.PE_TYPE_GEOGCS=A.PeDefs.prototype.PE_TYPE_GEOGCS,e.PE_TYPE_PROJCS=A.PeDefs.prototype.PE_TYPE_PROJCS,e.PE_TYPE_GEOGTRAN=A.PeDefs.prototype.PE_TYPE_GEOGTRAN,e.PE_TYPE_COORDSYS=A.PeDefs.prototype.PE_TYPE_COORDSYS,e.PE_TYPE_UNIT=A.PeDefs.prototype.PE_TYPE_UNIT,e.PE_TYPE_LINUNIT=A.PeDefs.prototype.PE_TYPE_LINUNIT,e.PE_STR_OPTS_NONE=A.PeDefs.prototype.PE_STR_OPTS_NONE,e.PE_STR_AUTH_NONE=A.PeDefs.prototype.PE_STR_AUTH_NONE,e.PE_STR_AUTH_TOP=A.PeDefs.prototype.PE_STR_AUTH_TOP,e.PE_STR_NAME_CANON=A.PeDefs.prototype.PE_STR_NAME_CANON,e.PE_PARM_X0=A.PeDefs.prototype.PE_PARM_X0,e.PE_PARM_ND=A.PeDefs.prototype.PE_PARM_ND,e.PE_TRANSFORM_1_TO_2=A.PeDefs.prototype.PE_TRANSFORM_1_TO_2,e.PE_TRANSFORM_2_TO_1=A.PeDefs.prototype.PE_TRANSFORM_2_TO_1,e.PE_TRANSFORM_P_TO_G=A.PeDefs.prototype.PE_TRANSFORM_P_TO_G,e.PE_TRANSFORM_G_TO_P=A.PeDefs.prototype.PE_TRANSFORM_G_TO_P,e.PE_HORIZON_RECT=A.PeDefs.prototype.PE_HORIZON_RECT,e.PE_HORIZON_POLY=A.PeDefs.prototype.PE_HORIZON_POLY,e.PE_HORIZON_LINE=A.PeDefs.prototype.PE_HORIZON_LINE,e.PE_HORIZON_DELTA=A.PeDefs.prototype.PE_HORIZON_DELTA}e.init=t}(Ut||(Ut={})),function(e){const t={},r={},n=y=>{if(y){const g=y.getType();switch(g){case Ut.PE_TYPE_GEOGCS:y=A.castObject(y,A.PeGeogcs);break;case Ut.PE_TYPE_PROJCS:y=A.castObject(y,A.PeProjcs);break;case Ut.PE_TYPE_GEOGTRAN:y=A.castObject(y,A.PeGeogtran);break;default:g&Ut.PE_TYPE_UNIT&&(y=A.castObject(y,A.PeUnit))}}return y};function i(){A.PeFactory.prototype.initialize(null)}function s(y){return o(Ut.PE_TYPE_COORDSYS,y)}function o(y,g){let v=null,w=t[y];if(w||(w={},t[y]=w),w.hasOwnProperty(String(g)))v=w[g];else{const b=A.PeFactory.prototype.factoryByType(y,g);A.compare(b,A.NULL)||(v=b,w[g]=v)}return v=n(v),v}function a(y,g){let v=null,w=r[y];if(w||(w={},r[y]=w),w.hasOwnProperty(g))v=w[g];else{const b=A.PeFactory.prototype.fromString(y,g);A.compare(b,A.NULL)||(v=b,w[g]=v)}return v=n(v),v}function l(y){return o(Ut.PE_TYPE_GEOGCS,y)}function c(y){return o(Ut.PE_TYPE_GEOGTRAN,y)}function h(y){return A.PeFactory.prototype.getCode(y)}function f(y){return o(Ut.PE_TYPE_PROJCS,y)}function m(y){return o(Ut.PE_TYPE_UNIT,y)}e.initialize=i,e.coordsys=s,e.factoryByType=o,e.fromString=a,e.geogcs=l,e.geogtran=c,e.getCode=h,e.projcs=f,e.unit=m}(Sv||(Sv={}));let iG=null;var GS,fC,mC,Vh,gi,xv,eu,BS,yC;function sG(e){function t(s,o,a){s[o]=a(s[o])}A=e,Ut.init(),GS.init(),gi.init(),eu.init(),BS.init(),iG=class extends A.PeGCSExtent{destroy(){A.destroy(this)}};const r=[A.PeDatum,A.PeGeogcs,A.PeGeogtran,A.PeObject,A.PeParameter,A.PePrimem,A.PeProjcs,A.PeSpheroid,A.PeUnit];for(const s of r)t(s.prototype,"getName",o=>function(){return o.call(this,new Array(Ut.PE_NAME_MAX))});for(const s of[A.PeGeogtran,A.PeProjcs])t(s.prototype,"getParameters",o=>function(){const a=new Array(Ut.PE_PARM_MAX);let l=o.call(this);for(let c=0;c<a.length;c++){const h=A.getValue(l,"*");a[c]=h?A.wrapPointer(h,A.PeParameter):null,l+=Int32Array.BYTES_PER_ELEMENT}return a});t(A.PeHorizon.prototype,"getCoord",s=>function(){const o=this.getSize();if(!o)return null;const a=[];return bc(a,o,s.call(this)),a}),t(A.PeGTlistExtendedEntry.prototype,"getEntries",s=>{const o=A._pe_getPeGTlistExtendedGTsSize();return function(){let a=null;const l=s.call(this);if(!A.compare(l,A.NULL)){a=[l];const c=this.getSteps();if(c>1){const h=A.getPointer(l);for(let f=1;f<c;f++)a.push(A.wrapPointer(h+o*f,A.PeGTlistExtendedGTs))}}return a}});const n=A._pe_getPeHorizonSize(),i=s=>function(){let o=this._cache;if(o||(o=new Map,this._cache=o),o.has(s))return o.get(s);let a=null;const l=s.call(this);if(!A.compare(l,A.NULL)){a=[l];const c=l.getNump();if(c>1){const h=A.getPointer(l);for(let f=1;f<c;f++)a.push(A.wrapPointer(h+n*f,A.PeHorizon))}}return o.set(s,a),a};t(A.PeProjcs.prototype,"horizonGcsGenerate",i),t(A.PeProjcs.prototype,"horizonPcsGenerate",i),A.PeObject.prototype.toString=function(s=Ut.PE_STR_OPTS_NONE){A.ensureCache.prepare();const o=A.getPointer(this),a=A.ensureInt8(new Array(Ut.PE_BUFFER_MAX));return A.UTF8ToString(A._pe_object_to_string_ext(o,s,a))}}function Ya(e){if(!e)return;const t=A.getClass(e);if(!t)return;const r=A.getCache(t);if(!r)return;const n=A.getPointer(e);n&&delete r[n]}function gw(e,t){const r=[],n=new Array(t);for(let i=0;i<e;i++)r.push(A.ensureInt8(n));return r}function gh(e){let t;return Array.isArray(e[0])?(t=[],e.forEach(r=>{t.push(r[0],r[1])})):t=e,t}function bc(e,t,r,n=!1){if(n)for(let i=0;i<2*t;i++)e[i]=A.getValue(r+i*Float64Array.BYTES_PER_ELEMENT,"double");else{const i=e.length===0;for(let s=0;s<t;s++)i&&(e[s]=new Array(2)),e[s][0]=A.getValue(r,"double"),e[s][1]=A.getValue(r+Float64Array.BYTES_PER_ELEMENT,"double"),r+=2*Float64Array.BYTES_PER_ELEMENT}}(function(e){let t;function r(){e.PE_GTLIST_OPTS_COMMON=A.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON,t=A._pe_getPeGTlistExtendedEntrySize()}function n(i,s,o,a,l,c){let h=null;const f=new A.PeInteger(c);try{const m=A.PeGTlistExtended.prototype.getGTlist(i,s,o,a,l,f);if((c=f.val)&&(h=[m],c>1)){const y=A.getPointer(m);for(let g=1;g<c;g++)h.push(A.wrapPointer(y+t*g,A.PeGTlistExtendedEntry))}}finally{A.destroy(f)}return h}e.init=r,e.getGTlist=n})(GS||(GS={})),function(e){function t(r){if(r&&r.length){for(const n of r)Ya(n),n.getEntries().forEach(i=>{Ya(i);const s=i.getGeogtran();Ya(s),s.getParameters().forEach(Ya),[s.getGeogcs1(),s.getGeogcs2()].forEach(o=>{Ya(o);const a=o.getDatum();Ya(a),Ya(a.getSpheroid()),Ya(o.getPrimem()),Ya(o.getUnit())})});A.PeGTlistExtendedEntry.prototype.Delete(r[0])}}e.destroy=t}(fC||(fC={})),function(e){function t(r,n,i,s,o){A.ensureCache.prepare();const a=gh(i),l=i===a,c=A.ensureFloat64(a);let h=0;s&&(h=A.ensureFloat64(s));const f=A._pe_geog_to_geog(A.getPointer(r),n,c,h,o);return f&&bc(i,n,c,l),f}e.geogToGeog=t}(mC||(mC={})),function(e){const t=(c,h,f,m,y,g)=>{let v,w;switch(A.ensureCache.prepare(),c){case"dd":v=A._pe_geog_to_dd,w=Ut.PE_DD_MAX;break;case"ddm":v=A._pe_geog_to_ddm,w=Ut.PE_DDM_MAX;break;case"dms":v=A._pe_geog_to_dms,w=Ut.PE_DMS_MAX}let b=0;h&&(b=A.getPointer(h));const S=gh(m),_=A.ensureFloat64(S),x=gw(f,w),T=v(b,f,_,y,A.ensureInt32(x));if(T)for(let I=0;I<f;I++)g[I]=A.UTF8ToString(x[I]);return T},r=(c,h,f,m,y)=>{let g;switch(A.ensureCache.prepare(),c){case"dd":g=A._pe_dd_to_geog;break;case"ddm":g=A._pe_ddm_to_geog;break;case"dms":g=A._pe_dms_to_geog}let v=0;h&&(v=A.getPointer(h));const w=m.map(x=>A.ensureString(x)),b=A.ensureInt32(w),S=A.ensureFloat64(new Array(2*f)),_=g(v,f,b,S);return _&&bc(y,f,S),_};function n(c,h,f,m,y){return t("dms",c,h,f,m,y)}function i(c,h,f,m){return r("dms",c,h,f,m)}function s(c,h,f,m,y){return t("ddm",c,h,f,m,y)}function o(c,h,f,m){return r("ddm",c,h,f,m)}function a(c,h,f,m,y){return t("dd",c,h,f,m,y)}function l(c,h,f,m){return r("dd",c,h,f,m)}e.geogToDms=n,e.dmsToGeog=i,e.geogToDdm=s,e.ddmToGeog=o,e.geogToDd=a,e.ddToGeog=l}(Vh||(Vh={})),function(e){function t(){e.PE_MGRS_STYLE_NEW=A.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW,e.PE_MGRS_STYLE_OLD=A.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD,e.PE_MGRS_STYLE_AUTO=A.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO,e.PE_MGRS_180_ZONE_1_PLUS=A.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS,e.PE_MGRS_ADD_SPACES=A.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES}function r(i,s,o,a,l,c,h){A.ensureCache.prepare();let f=0;i&&(f=A.getPointer(i));const m=gh(o),y=A.ensureFloat64(m),g=gw(s,Ut.PE_MGRS_MAX),v=A.ensureInt32(g),w=A._pe_geog_to_mgrs_extended(f,s,y,a,l,c,v);if(w)for(let b=0;b<s;b++)h[b]=A.UTF8ToString(g[b]);return w}function n(i,s,o,a,l){A.ensureCache.prepare();let c=0;i&&(c=A.getPointer(i));const h=o.map(g=>A.ensureString(g)),f=A.ensureInt32(h),m=A.ensureFloat64(new Array(2*s)),y=A._pe_mgrs_to_geog_extended(c,s,f,a,m);return y&&bc(l,s,m),y}e.init=t,e.geogToMgrsExtended=r,e.mgrsToGeogExtended=n}(gi||(gi={})),function(e){function t(n,i,s,o,a,l,c){A.ensureCache.prepare();let h=0;n&&(h=A.getPointer(n));const f=gh(s),m=A.ensureFloat64(f),y=gw(i,Ut.PE_MGRS_MAX),g=A.ensureInt32(y),v=A._pe_geog_to_usng(h,i,m,o,a,l,g);if(v)for(let w=0;w<i;w++)c[w]=A.UTF8ToString(y[w]);return v}function r(n,i,s,o){A.ensureCache.prepare();let a=0;n&&(a=A.getPointer(n));const l=s.map(m=>A.ensureString(m)),c=A.ensureInt32(l),h=A.ensureFloat64(new Array(2*i)),f=A._pe_usng_to_geog(a,i,c,h);return f&&bc(o,i,h),f}e.geogToUsng=t,e.usngToGeog=r}(xv||(xv={})),function(e){function t(){e.PE_UTM_OPTS_NONE=A.PeNotationUtm.prototype.PE_UTM_OPTS_NONE,e.PE_UTM_OPTS_ADD_SPACES=A.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES,e.PE_UTM_OPTS_NS=A.PeNotationUtm.prototype.PE_UTM_OPTS_NS}function r(i,s,o,a,l){A.ensureCache.prepare();let c=0;i&&(c=A.getPointer(i));const h=gh(o),f=A.ensureFloat64(h),m=gw(s,Ut.PE_UTM_MAX),y=A.ensureInt32(m),g=A._pe_geog_to_utm(c,s,f,a,y);if(g)for(let v=0;v<s;v++)l[v]=A.UTF8ToString(m[v]);return g}function n(i,s,o,a,l){A.ensureCache.prepare();let c=0;i&&(c=A.getPointer(i));const h=o.map(g=>A.ensureString(g)),f=A.ensureInt32(h),m=A.ensureFloat64(new Array(2*s)),y=A._pe_utm_to_geog(c,s,f,a,m);return y&&bc(l,s,m),y}e.init=t,e.geogToUtm=r,e.utmToGeog=n}(eu||(eu={})),function(e){const t=new Map;function r(){e.PE_PCSINFO_OPTION_NONE=A.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE,e.PE_PCSINFO_OPTION_DOMAIN=A.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN,e.PE_POLE_OUTSIDE_BOUNDARY=A.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY,e.PE_POLE_POINT=A.PePCSInfo.prototype.PE_POLE_POINT}function n(i,s=e.PE_PCSINFO_OPTION_DOMAIN){let o=null,a=null;return t.has(i)&&(a=t.get(i),a[s]&&(o=a[s])),o||(o=A.PePCSInfo.prototype.generate(i,s),a||(a=[],t.set(i,a)),a[s]=o),o}e.init=r,e.generate=n}(BS||(BS={})),function(e){function t(){return A.PeVersion.prototype.version_string()}e.versionString=t}(yC||(yC={}));const Tfe=Object.freeze(Object.defineProperty({__proto__:null,get PeCSTransformations(){return pC},get PeDefs(){return Ut},get PeFactory(){return Sv},get PeGCSExtent(){return iG},get PeGTTransformations(){return mC},get PeGTlistExtended(){return GS},get PeGTlistExtendedEntry(){return fC},get PeNotationDms(){return Vh},get PeNotationMgrs(){return gi},get PeNotationUsng(){return xv},get PeNotationUtm(){return eu},get PePCSInfo(){return BS},get PeVersion(){return yC},_init:sG,get _pe(){return A},isLoaded:GR,isSupported:$fe,load:nG},Symbol.toStringTag,{value:"Module"})),$d=Math.PI/180,Efe=/SPHEROID\[([^\]]+)]/i,$u=kt.radius,Xs=kt.eccentricitySquared,Mfe={a1:$u*Xs,a2:$u*Xs*$u*Xs,a3:$u*Xs*Xs/2,a4:$u*Xs*$u*Xs*2.5,a5:$u*Xs+$u*Xs*Xs/2,a6:1-Xs},Ife={4267:{a:63782064e-1,f:1/294.9786982},4269:{a:6378137,f:1/298.257222101},4326:{a:kt.radius,f:kt.flattening},104900:{a:2439700,f:0},104901:{a:6051e3,f:0},104902:{a:6051800,f:0},104903:{a:Kc.radius,f:Kc.flattening},104904:{a:3393400,f:1/192.0430107526882},104905:{a:Dl.radius,f:Dl.flattening},104906:{a:6200,f:0},104907:{a:11100,f:0},104908:{a:71492e3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1e4,f:0},104912:{a:2409300,f:0},104913:{a:15e3,f:0},104914:{a:4e4,f:0},104915:{a:1562090,f:0},104916:{a:2632345,f:0},104917:{a:85e3,f:0},104918:{a:1821460,f:0},104919:{a:5e3,f:0},104920:{a:12e3,f:0},104921:{a:3e4,f:3},104922:{a:18e3,f:0},104923:{a:14e3,f:0},104924:{a:49300,f:0},104925:{a:60268e3,f:1/10.2079945799458},104926:{a:16e3,f:0},104927:{a:9500,f:0},104928:{a:56e4,f:0},104929:{a:249400,f:0},104930:{a:59500,f:0},104931:{a:16e3,f:0},104932:{a:133e3,f:0},104933:{a:718e3,f:0},104934:{a:888e3,f:0},104935:{a:1986300,f:0},104936:{a:1e4,f:0},104937:{a:41900,f:0},104938:{a:11e4,f:0},104939:{a:50100,f:0},104940:{a:764e3,f:0},104941:{a:11e3,f:0},104942:{a:529800,f:0},104943:{a:2575e3,f:0},104944:{a:25559e3,f:1/43.61604095563141},104945:{a:578900,f:0},104946:{a:33e3,f:0},104947:{a:21e3,f:0},104948:{a:13e3,f:0},104949:{a:31e3,f:0},104950:{a:27e3,f:0},104951:{a:42e3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},104954:{a:15e3,f:0},104955:{a:54e3,f:0},104956:{a:77e3,f:0},104957:{a:27e3,f:0},104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764e3,f:.01708124697141011},104961:{a:74e3,f:0},104962:{a:79e3,f:0},104963:{a:104e3,f:.14423076923076922},104964:{a:29e3,f:0},104965:{a:17e4,f:0},104966:{a:208e3,f:0},104967:{a:4e4,f:0},104968:{a:1352600,f:0},104969:{a:1195e3,f:0},104970:{a:593e3,f:0},104971:{a:Dl.radius,f:0},104972:{a:47e4,f:0},104973:{a:255e3,f:0},104974:{a:2439400,f:0}};let vw=0,sT=class gC{static fromGE(t){const r=new gC;return r._wkt=t.wkt,r._wkid=t.wkid,r._isInverse=t.isInverse,r}constructor(t){this.uid=vw++,t?(this._wkt=t.wkt!=null?t.wkt:null,this._wkid=t.wkid!=null?t.wkid:-1,this._isInverse=t.isInverse!=null&&t.isInverse===!0):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}get wkt(){return this._wkt}set wkt(t){this._wkt=t,this.uid=vw++}get wkid(){return this._wkid}set wkid(t){this._wkid=t,this.uid=vw++}get isInverse(){return this._isInverse}set isInverse(t){this._isInverse=t,this.uid=vw++}getInverse(){const t=new gC;return t._wkt=this.wkt,t._wkid=this._wkid,t._isInverse=!this.isInverse,t}},qS=class $g{static cacheKey(t,r){return[t.wkid!==void 0&&t.wkid!==null?t.wkid.toString():"-1",t.wkt!==void 0&&t.wkt!==null?t.wkt.toString():"",r.wkid!==void 0&&r.wkid!==null?r.wkid.toString():"-1",r.wkt!==void 0&&r.wkt!==null?r.wkt.toString():""].join(",")}static fromGE(t){const r=new $g;let n="";for(const i of t.steps){const s=sT.fromGE(i);r.steps.push(s),n+=s.uid.toString()+","}return r._cachedProjection={},r._gtlistentry=null,r._chain=n,r}constructor(t){if(this.steps=[],this._cachedProjection={},this._chain="",this._gtlistentry=null,t&&t.steps)for(const r of t.steps)r instanceof sT?this.steps.push(r):this.steps.push(new sT({wkid:r.wkid,wkt:r.wkt,isInverse:r.isInverse}))}getInverse(){const t=new $g;t.steps=[];for(let r=this.steps.length-1;r>=0;r--){const n=this.steps[r];t.steps.push(n.getInverse())}return t}getGTListEntry(){let t="";for(const r of this.steps)t+=r.uid.toString()+",";return t!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=t),this._gtlistentry}assignCachedGe(t,r,n){this._cachedProjection[$g.cacheKey(t,r)]=n}getCachedGeTransformation(t,r){let n="";for(const s of this.steps)n+=s.uid.toString()+",";n!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=n);const i=this._cachedProjection[$g.cacheKey(t,r)];return i===void 0?null:i}};function BR(e,t,r){if(t==null||r==null||r.vcsWkid||Cr(t,r))return null;const n=SS(t)/SS(r);if(n===1)return null;switch(e){case"point":case"esriGeometryPoint":return i=>Cfe(i,n);case"polyline":case"esriGeometryPolyline":return i=>Pfe(i,n);case"polygon":case"esriGeometryPolygon":return i=>kfe(i,n);case"multipoint":case"esriGeometryMultipoint":return i=>Ofe(i,n);case"extent":case"esriGeometryEnvelope":return i=>Rfe(i,n);default:return null}}function Cfe(e,t){e&&e.z!=null&&(e.z*=t)}function kfe(e,t){if(e)for(const r of e.rings)for(const n of r)n.length>2&&(n[2]*=t)}function Pfe(e,t){if(e)for(const r of e.paths)for(const n of r)n.length>2&&(n[2]*=t)}function Ofe(e,t){if(e)for(const r of e.points)r.length>2&&(r[2]*=t)}function Rfe(e,t){e&&e.zmin!=null&&e.zmax!=null&&(e.zmin*=t,e.zmax*=t)}let Fo=null,rd=null,v0=null,H_={};const oG=new i2;function yd(){return!!Fo&&GR()}function tu(e){return v0==null&&(v0=Promise.all([nG(),ie(()=>import("./geometryEngineBase-3ed6e1ee.js"),[]).then(t=>t.g),ie(()=>import("./hydrated-74f22c9c.js"),[])])),v0.then(([,t,{hydratedAdapter:r}])=>{qt(e),rd=r,Fo=t.default,Fo._enableProjection(Tfe),oG.notify()})}function uu(e,t,r=null,n=null){return Array.isArray(e)?e.length===0?[]:vC(rd,e,e[0].spatialReference,t,r,n):vC(rd,[e],e.spatialReference,t,r,n)[0]}function vC(e,t,r,n,i=null,s=null){if(r==null||n==null)return t;if(ru(r,n,i))return t.map(o=>dG(o,r,n));if(i==null){const o=qS.cacheKey(r,n);H_[o]!==void 0?i=H_[o]:((i=lG(r,n,void 0))==null&&(i=new qS),H_[o]=i)}if(Fo==null||e==null)throw new $2;return s!=null?Fo._project(e,t,r,n,i,s):Fo._project(e,t,r,n,i)}function Afe(e,t){const r=aG([e],t);return r.pending!=null?{pending:r.pending,geometry:null}:r.geometries!=null?{pending:null,geometry:r.geometries[0]}:{pending:null,geometry:null}}function aG(e,t){if(!yd()){for(const r of e)if(r!=null&&!Cr(r.spatialReference,t)&&Yr(r.spatialReference)&&Yr(t)&&!ru(r.spatialReference,t))return Ve(oG),{pending:tu(),geometries:null}}return{pending:null,geometries:e.map(r=>r==null?null:Cr(r.spatialReference,t)?r:Yr(r.spatialReference)&&Yr(t)?uG(r,t):null)}}function lG(e,t,r=null){if(e==null||t==null)return null;if(Fo==null||rd==null)throw new $2;const n=Fo._getTransformation(rd,e,t,r,r==null?void 0:r.spatialReference);return n!==null?qS.fromGE(n):null}function Lfe(e,t,r=null){if(Fo==null||rd==null)throw new $2;const n=Fo._getTransformationBySuitability(rd,e,t,r,r==null?void 0:r.spatialReference);if(n!==null){const i=[];for(const s of n)i.push(qS.fromGE(s));return i}return[]}class $2 extends N{constructor(){super("projection:not-loaded","projection engine not fully loaded yet, please call load()")}}var P;function Nfe(){Fo=null,rd=null,v0=null,H_={}}(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.SPHERICAL_ECEF=1]="SPHERICAL_ECEF",e[e.WGS84=2]="WGS84",e[e.WEB_MERCATOR=3]="WEB_MERCATOR",e[e.WGS84_ECEF=4]="WGS84_ECEF",e[e.CGCS2000=5]="CGCS2000",e[e.WGS84_COMPARABLE_LON_LAT=6]="WGS84_COMPARABLE_LON_LAT",e[e.SPHERICAL_MARS_PCPF=7]="SPHERICAL_MARS_PCPF",e[e.GCSMARS2000=8]="GCSMARS2000",e[e.SPHERICAL_MOON_PCPF=9]="SPHERICAL_MOON_PCPF",e[e.GCSMOON2000=10]="GCSMOON2000",e[e.LON_LAT=11]="LON_LAT",e[e.PLATE_CARREE=12]="PLATE_CARREE"})(P||(P={}));const Dfe={get loadPromise(){return v0}};function uG(e,t){try{const r=uu(e,t);if(r==null)return null;"xmin"in e&&"xmin"in r&&(r.zmin=e.zmin,r.zmax=e.zmax);const n=BR(r.type,e.spatialReference,t);return n!=null&&n(r),r}catch(r){if(!(r instanceof $2))throw r;return null}}function ru(e,t,r){return!r&&(!!Cr(e,t)||Yr(e)&&Yr(t)&&!!HR(e,t,JR))}async function cG(e,t,r,n){if(yd())return KL(n);if(Array.isArray(e)){for(const{source:i,dest:s,geographicTransformation:o}of e)if(!ru(i,s,o))return tu(n)}else if(!ru(e,t,r))return tu(n);return KL(n)}function Ffe(e,t){switch(HR(e,t,JR)){case Tt:return"copy3";case Cc:return"wgs84ToSphericalECEF";case dp:return"wgs84ToWebMercator";case Ic:return"wgs84ToPlateCarree";case Pc:return"wgs84ToWGS84ECEF";case zh:return"webMercatorToWGS84";case _G:return"webMercatorToSphericalECEF";case bG:return"webMercatorToWGS84ECEF";case xG:return"webMercatorToPlateCarree";case Oc:return"wgs84ECEFToWGS84";case EG:return"wgs84ECEFToSphericalECEF";case MG:return"wgs84ECEFToWebMercator";case kc:return"sphericalECEFToWGS84";case $G:return"sphericalECEFToWebMercator";case $C:return"sphericalMarsPCPFToMars2000";case xC:return"sphericalMoonPCPFToMoon2000";case TG:return"sphericalECEFToWGS84ECEF";case SC:return"mars2000ToSphericalPCPF";case bC:return"moon2000ToSphericalPCPF";default:return null}}function dG(e,t,r){return e?"x"in e?hG(e,t,new be,r,0):"xmin"in e?yG(e,t,new at,r,0):"rings"in e?mG(e,t,new Fa,r,0):"paths"in e?fG(e,t,new Cs,r,0):"points"in e?pG(e,t,new p2,r,0):null:null}function jfe(e,t,r=t.spatialReference,n=0){return r!=null&&e.spatialReference!=null&&hG(e,e.spatialReference,t,r,n)!=null}function hG(e,t,r,n,i){nt[0]=e.x,nt[1]=e.y;const s=e.z;return nt[2]=s!==void 0?s:i,Ho(nt,t,0,nt,n,0,1)?(r.x=nt[0],r.y=nt[1],r.spatialReference=n,s===void 0?(r.z=void 0,r.hasZ=!1):(r.z=nt[2],r.hasZ=!0),e.m===void 0?(r.m=void 0,r.hasM=!1):(r.m=e.m,r.hasM=!0),r):null}function Vfe(e,t,r=t.spatialReference,n=0){return e.spatialReference!=null&&r!=null&&pG(e,e.spatialReference,t,r,n)!=null}function pG(e,t,r,n,i){const{points:s,hasZ:o,hasM:a}=e,l=[],c=s.length,h=[];for(const f of s)h.push(f[0],f[1],o?f[2]:i);if(!Ho(h,t,0,h,n,0,c))return null;for(let f=0;f<c;++f){const m=3*f,y=h[m],g=h[m+1];o&&a?l.push([y,g,h[m+2],s[f][3]]):o?l.push([y,g,h[m+2]]):a?l.push([y,g,s[f][2]]):l.push([y,g])}return r.points=l,r.spatialReference=n,r.hasZ=o,r.hasM=a,r}function zfe(e,t,r=t.spatialReference,n=0){return e.spatialReference!=null&&r!=null&&fG(e,e.spatialReference,t,r,n)!=null}function fG(e,t,r,n,i){const{paths:s,hasZ:o,hasM:a}=e,l=[];return vG(s,o??!1,a??!1,t,l,n,i)?(r.paths=l,r.spatialReference=n,r.hasZ=o,r.hasM=a,r):null}function Ufe({hasZ:e,spatialReference:t,paths:r},n,i=0){const s=Va(t,iy),o=Ps[s][P.WGS84_COMPARABLE_LON_LAT];if(o==null)return!1;const a=e?l=>l:l=>h2(nt,l[0],l[1],i);for(const l of r){const c=[];for(const h of l){const f=[0,0,i];o(a(h),0,f,0),c.push(f)}n.push(c)}return!0}function Gfe({hasZ:e,spatialReference:t,rings:r},n,i=0){const s=Va(t,iy),o=Ps[s][P.WGS84_COMPARABLE_LON_LAT];if(o==null)return!1;const a=e?l=>l:l=>h2(nt,l[0],l[1],i);for(const l of r){const c=[];for(const h of l){const f=[0,0,i];o(a(h),0,f,0),c.push(f)}n.push(c)}return!0}function Bfe(e,t,r=t.spatialReference,n=0){return e.spatialReference!=null&&r!=null&&mG(e,e.spatialReference,t,r,n)!=null}function mG(e,t,r,n,i){const{rings:s,hasZ:o,hasM:a}=e,l=[];return vG(s,o??!1,a??!1,t,l,n,i)?(r.rings=l,r.spatialReference=n,r.hasZ=o,r.hasM=a,r):null}function qfe(e,t,r=t.spatialReference,n=0){return e.spatialReference!=null&&r!=null&&yG(e,e.spatialReference,t,r,n)!=null}function yG(e,t,r,n,i){const{xmin:s,ymin:o,xmax:a,ymax:l,hasZ:c,hasM:h}=e;return wC(s,o,c?e.zmin:i,t,nt,n)?(r.xmin=nt[0],r.ymin=nt[1],c&&(r.zmin=nt[2]),wC(a,l,c?e.zmax:i,t,nt,n)?(r.xmax=nt[0],r.ymax=nt[1],c&&(r.zmax=nt[2]),h&&(r.mmin=e.mmin,r.mmax=e.mmax),r.spatialReference=n,r):null):null}function Wfe(e,t,r){if(t==null||r==null)return null;const n=new be({spatialReference:r});return Ho(e,t,0,nt,r,0,1)?(n.x=nt[0],n.y=nt[1],n.z=nt[2],n):null}function Hfe(e,t,r){return Ho(e,t,0,nt,r.spatialReference,0,1)?(r.x=nt[0],r.y=nt[1],r.z=nt[2],r):null}function Zfe(e,t,r,n=0){nt[0]=e.x,nt[1]=e.y;const i=e.z;return nt[2]=i!==void 0?i:n,Ho(nt,e.spatialReference,0,t,r,0,1)}function wC(e,t,r,n,i,s){return Vt[0]=e,Vt[1]=t,Vt[2]=r,Ho(Vt,n,0,i,s,0,1)}function _C(e,t,r,n){return!(t==null||n==null||e.length<2)&&(e.length===2&&(Vt[0]=e[0],Vt[1]=e[1],Vt[2]=0,e=Vt),Ho(e,t,0,r,n,0,1))}function Jfe(e,t){nt[0]=e.x,nt[1]=e.y;const r=e.z;return nt[2]=r!==void 0?r:0,gG(nt,e.spatialReference,t)}function gG(e,t,r){return Qfe(e,t,r)}function Qfe(e,t,r){if(t==null)return!1;const n=Va(t,iy),i=Ps[n][P.WGS84_COMPARABLE_LON_LAT];return i!=null&&(i(e,0,Vt,0),r!==Vt&&(r[0]=Vt[0],r[1]=Vt[1],r.length>2&&(r[2]=Vt[2])),!0)}function Ho(e,t,r,n,i,s,o=1){const a=HR(t,i,JR);if(a==null)return!1;if(a===Tt){if(e===n&&r===s)return!0;const c=r+3*o;for(let h=r,f=s;h<c;h++,f++)n[f]=e[h];return!0}const l=r+3*o;for(let c=r,h=s;c<l;c+=3,h+=3)a(e,c,n,h);return!0}function Yfe(e,t,r,n,i){IS(nt,e),nU(ww,e,t),_C(nt,r,nt,i),_C(ww,r,ww,i),nR(n,ww,nt),CS(n,n)}function vG(e,t,r,n,i,s,o=0){const a=new Array;for(const c of e)for(const h of c)a.push(h[0],h[1],t?h[2]:o);if(!Ho(a,n,0,a,s,0,a.length/3))return!1;let l=0;i.length=0;for(const c of e){const h=new Array;for(const f of c)t&&r?h.push([a[l++],a[l++],a[l++],f[3]]):t?h.push([a[l++],a[l++],a[l++]]):r?(h.push([a[l++],a[l++],f[2]]),l++):(h.push([a[l++],a[l++]]),l++);i.push(h)}return!0}function Kfe(e,t,r,n){if(t==null||n==null)return!1;const i=IG(t,n,cme);if(i.projector===Tt)return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],!0;if(i.projector==null)return!1;const{source:s,dest:o}=i;if(o.spatialReferenceId===P.WEB_MERCATOR){const a=Ps[s.spatialReferenceId][P.WGS84];return a!=null&&(a(e,0,vo,0),dp(vo,0,r,0),r[3]=RD(vo[1],e[2],e[3],kt.radius),!0)}if(s.spatialReferenceId!==P.WGS84&&s.spatialReferenceId!==P.CGCS2000||o.spatialReferenceId!==P.PLATE_CARREE){i.projector(e,0,r,0);const a=s.metersPerUnit??1,l=o.metersPerUnit??1;r[3]=e[3]*a/l}else{const a=Ps[s.spatialReferenceId][P.SPHERICAL_ECEF],l=Ps[P.SPHERICAL_ECEF][P.PLATE_CARREE];let c=e[3];a!=null&&l!=null&&(c=RD(e[1],e[2],e[3],kt.radius)),i.projector(e,0,r,0),r[3]=c}return!0}function RD(e,t,r,n){const i=n+t;if(i<n/2||r>i)return Number.MAX_VALUE;const s=Math.abs(Co*e)+Math.asin(r/i);return s>=Math.PI/2?Number.MAX_VALUE:r/Math.cos(s)}function Xfe(e,t,r,n){return e!=null&&(Cr(t,n)?(aR(r,e),!0):(Vt[0]=e[0],Vt[1]=e[1],Vt[2]=0,!!Ho(Vt,t,0,Vt,n,0,1)&&(r[0]=Vt[0],r[1]=Vt[1],Vt[0]=e[2],Vt[1]=e[3],Vt[2]=0,!!Ho(Vt,t,0,Vt,n,0,1)&&(r[2]=Vt[0],r[3]=Vt[1],!0))))}function eme(e,t,r,n){if(t==null||n==null)return!1;const i=Va(t,iy),s=Va(n,CG);if(i===s&&i!==P.UNKNOWN||Cr(t,n))return r[0]=1,r[1]=1,r[2]=1,!0;if(i===P.SPHERICAL_ECEF){const o=d2(e),a=o/Math.sqrt(e[0]*e[0]+e[1]*e[1]),l=o/kt.radius;if(s===P.WEB_MERCATOR)return r[0]=a*l,r[1]=a*l,r[2]=1,!0;if(s===P.WGS84||s===P.CGCS2000){const c=w0;return r[0]=c*a*l,r[1]=c*l,r[2]=1,!0}}else if(i===P.PLATE_CARREE){if(s===P.WGS84||s===P.CGCS2000)return r[0]=w0,r[1]=w0,r[2]=1,!0;if(s===P.WEB_MERCATOR){const o=e[1]/kt.radius;return r[0]=1,r[1]=1/Math.cos(o),r[2]=1,!0}}return!1}function tme(e,t,r,n){if(e==null||n==null)return!1;const i=Va(e,iy),s=Va(n,CG);if(i===s&&!AD(s)&&(i!==P.UNKNOWN||Cr(e,n)))return eG(r,t),!0;if(AD(s)){const o=Ps[i][P.LON_LAT],a=Ps[P.LON_LAT][s];return o!=null&&a!=null&&(o(t,0,vo,0),a(vo,0,Tu,0),qR(Co*vo[0],Co*vo[1],r),r[12]=Tu[0],r[13]=Tu[1],r[14]=Tu[2],!0)}if((s===P.WEB_MERCATOR||s===P.PLATE_CARREE)&&(i===P.WGS84||i===P.CGCS2000&&s===P.PLATE_CARREE||i===P.SPHERICAL_ECEF||i===P.WEB_MERCATOR)){const o=Ps[i][P.LON_LAT],a=Ps[P.LON_LAT][s];return o!=null&&a!=null&&(o(t,0,vo,0),a(vo,0,Tu,0),i===P.SPHERICAL_ECEF?wG(Co*vo[0],Co*vo[1],r):c1(r),r[12]=Tu[0],r[13]=Tu[1],r[14]=Tu[2],!0)}return!1}function AD(e){return e===P.SPHERICAL_ECEF||e===P.SPHERICAL_MARS_PCPF||e===P.SPHERICAL_MOON_PCPF}function qR(e,t,r){const n=Math.sin(e),i=Math.cos(e),s=Math.sin(t),o=Math.cos(t),a=r;return a[0]=-n,a[4]=-s*i,a[8]=o*i,a[12]=0,a[1]=i,a[5]=-s*n,a[9]=o*n,a[13]=0,a[2]=0,a[6]=o,a[10]=s,a[14]=0,a[3]=0,a[7]=0,a[11]=0,a[15]=1,a}function wG(e,t,r){return qR(e,t,r),lu(r,r),r}function Va(e,t){return e?t.spatialReference===e?t.spatialReferenceId:(t.spatialReference=e,"metersPerUnit"in t&&(t.metersPerUnit=Ga(e,1)),e.wkt===Hie.wkt?t.spatialReferenceId=P.SPHERICAL_ECEF:hv(e)?t.spatialReferenceId=P.WGS84:ip(e)?t.spatialReferenceId=P.WEB_MERCATOR:Uie(e)?t.spatialReferenceId=P.PLATE_CARREE:e.wkt===Zie.wkt?t.spatialReferenceId=P.WGS84_ECEF:e.wkid===np.CGCS2000?t.spatialReferenceId=P.CGCS2000:e.wkt===Mz.wkt?t.spatialReferenceId=P.SPHERICAL_MARS_PCPF:e.wkt===Iz.wkt?t.spatialReferenceId=P.SPHERICAL_MOON_PCPF:BO(e)?t.spatialReferenceId=P.GCSMARS2000:WO(e)?t.spatialReferenceId=P.GCSMOON2000:t.spatialReferenceId=P.UNKNOWN):P.UNKNOWN}function Tt(e,t,r,n){e!==r&&(r[n++]=e[t++],r[n++]=e[t++],r[n]=e[t])}function zh(e,t,r,n){r[n++]=Am*(e[t++]/kt.radius),r[n++]=Am*(Math.PI/2-2*Math.atan(Math.exp(-e[t++]/kt.radius))),r[n]=e[t]}function _G(e,t,r,n){zh(e,t,r,n),Cc(r,n,r,n)}function bG(e,t,r,n){zh(e,t,r,n),Pc(r,n,r,n)}function SG(e,t,r,n,i){const s=.4999999*Math.PI,o=Yi(Co*e[t+1],-s,s),a=Math.sin(o);r[n++]=Co*e[t]*i.radius,r[n++]=i.halfSemiMajorAxis*Math.log((1+a)/(1-a)),r[n]=e[t+2]}function dp(e,t,r,n){SG(e,t,r,n,kt)}const LD=kt.radius*Math.PI/180,w0=180/(kt.radius*Math.PI);function Ic(e,t,r,n){r[n]=e[t]*LD,r[n+1]=e[t+1]*LD,r[n+2]=e[t+2]}function Ph(e,t,r,n){r[n]=e[t]*w0,r[n+1]=e[t+1]*w0,r[n+2]=e[t+2]}function xG(e,t,r,n){zh(e,t,r,n),Ic(r,n,r,n)}function rme(e,t,r,n){Oc(e,t,r,n),Ic(r,n,r,n)}function nme(e,t,r,n){kc(e,t,r,n),Ic(r,n,r,n)}function ime(e,t,r,n){Ph(e,t,r,n),Cc(r,n,r,n)}function sme(e,t,r,n){Ph(e,t,r,n),dp(r,n,r,n)}function ome(e,t,r,n){Ph(e,t,r,n),Pc(r,n,r,n)}function ame(e){if(e==null)return!1;const t=Va(e,iy);return!!Ps[t][P.WGS84_COMPARABLE_LON_LAT]}function lme(e,t,r,n){const i=Math.cos(r);e[0]=Math.cos(t)*i*n,e[1]=Math.sin(t)*i*n,e[2]=Math.sin(r)*n}function WR(e,t,r,n,i){const s=i+e[t+2],o=Co*e[t+1],a=Co*e[t],l=Math.cos(o);r[n++]=Math.cos(a)*l*s,r[n++]=Math.sin(a)*l*s,r[n]=Math.sin(o)*s}function bC(e,t,r,n){WR(e,t,r,n,Kc.radius)}function SC(e,t,r,n){WR(e,t,r,n,Dl.radius)}function Cc(e,t,r,n){WR(e,t,r,n,kt.radius)}function T2(e,t,r,n,i){const s=e[t],o=e[t+1],a=e[t+2],l=Math.sqrt(s*s+o*o+a*a),c=_U(a/(l===0?1:l)),h=Math.atan2(o,s);r[n++]=Am*h,r[n++]=Am*c,r[n]=l-i}function xC(e,t,r,n){T2(e,t,r,n,Kc.radius)}function $C(e,t,r,n){T2(e,t,r,n,Dl.radius)}function kc(e,t,r,n){T2(e,t,r,n,kt.radius)}function $G(e,t,r,n){kc(e,t,r,n),dp(r,n,r,n)}function TG(e,t,r,n){kc(e,t,r,n),Pc(r,n,r,n)}function ume(e,t,r,n,i){const s=Co*e[t],o=Co*e[t+1],a=e[t+2],l=Math.sin(o),c=Math.cos(o),h=i.radius/Math.sqrt(1-i.eccentricitySquared*l*l);r[n++]=(h+a)*c*Math.cos(s),r[n++]=(h+a)*c*Math.sin(s),r[n++]=(h*(1-i.eccentricitySquared)+a)*l}function Pc(e,t,r,n){ume(e,t,r,n,kt)}function Oc(e,t,r,n){const i=Mfe,s=e[t],o=e[t+1],a=e[t+2];let l,c,h,f,m,y,g,v,w,b,S,_,x,T,I,C,O,W,z,ne,K;l=Math.abs(a),c=s*s+o*o,h=Math.sqrt(c),f=c+a*a,m=Math.sqrt(f),ne=Math.atan2(o,s),y=a*a/f,g=c/f,T=i.a2/m,I=i.a3-i.a4/m,g>.3?(v=l/m*(1+g*(i.a1+T+y*I)/m),z=Math.asin(v),b=v*v,w=Math.sqrt(1-b)):(w=h/m*(1-y*(i.a5-T-g*I)/m),z=Math.acos(w),b=1-w*w,v=Math.sqrt(b)),S=1-kt.eccentricitySquared*b,_=kt.radius/Math.sqrt(S),x=i.a6*_,T=h-_*w,I=l-x*v,O=w*T+v*I,C=w*I-v*T,W=C/(x/S+O),z+=W,K=O+C*W/2,a<0&&(z=-z),r[n++]=Am*ne,r[n++]=Am*z,r[n]=K}function EG(e,t,r,n){Oc(e,t,r,n),Cc(r,n,r,n)}function MG(e,t,r,n){Oc(e,t,r,n),dp(r,n,r,n)}const Ps={[P.WGS84]:{[P.CGCS2000]:null,[P.GCSMARS2000]:null,[P.GCSMOON2000]:null,[P.LON_LAT]:Tt,[P.WGS84_COMPARABLE_LON_LAT]:Tt,[P.SPHERICAL_ECEF]:Cc,[P.SPHERICAL_MARS_PCPF]:null,[P.SPHERICAL_MOON_PCPF]:null,[P.UNKNOWN]:null,[P.WEB_MERCATOR]:dp,[P.PLATE_CARREE]:Ic,[P.WGS84]:Tt,[P.WGS84_ECEF]:Pc},[P.CGCS2000]:{[P.CGCS2000]:Tt,[P.GCSMARS2000]:null,[P.GCSMOON2000]:null,[P.LON_LAT]:Tt,[P.WGS84_COMPARABLE_LON_LAT]:Tt,[P.SPHERICAL_ECEF]:Cc,[P.SPHERICAL_MARS_PCPF]:null,[P.SPHERICAL_MOON_PCPF]:null,[P.UNKNOWN]:null,[P.WEB_MERCATOR]:null,[P.PLATE_CARREE]:Ic,[P.WGS84]:null,[P.WGS84_ECEF]:Pc},[P.GCSMARS2000]:{[P.CGCS2000]:null,[P.GCSMARS2000]:Tt,[P.GCSMOON2000]:null,[P.LON_LAT]:Tt,[P.WGS84_COMPARABLE_LON_LAT]:null,[P.SPHERICAL_ECEF]:null,[P.SPHERICAL_MARS_PCPF]:SC,[P.SPHERICAL_MOON_PCPF]:null,[P.UNKNOWN]:null,[P.WEB_MERCATOR]:null,[P.PLATE_CARREE]:null,[P.WGS84]:null,[P.WGS84_ECEF]:null},[P.GCSMOON2000]:{[P.CGCS2000]:null,[P.GCSMARS2000]:null,[P.GCSMOON2000]:Tt,[P.LON_LAT]:Tt,[P.WGS84_COMPARABLE_LON_LAT]:null,[P.SPHERICAL_ECEF]:null,[P.SPHERICAL_MARS_PCPF]:null,[P.SPHERICAL_MOON_PCPF]:bC,[P.UNKNOWN]:null,[P.WEB_MERCATOR]:null,[P.PLATE_CARREE]:null,[P.WGS84]:null,[P.WGS84_ECEF]:null},[P.WEB_MERCATOR]:{[P.CGCS2000]:null,[P.GCSMARS2000]:null,[P.GCSMOON2000]:null,[P.LON_LAT]:zh,[P.WGS84_COMPARABLE_LON_LAT]:zh,[P.SPHERICAL_ECEF]:_G,[P.SPHERICAL_MARS_PCPF]:null,[P.SPHERICAL_MOON_PCPF]:null,[P.UNKNOWN]:null,[P.WEB_MERCATOR]:Tt,[P.PLATE_CARREE]:xG,[P.WGS84]:zh,[P.WGS84_ECEF]:bG},[P.WGS84_ECEF]:{[P.CGCS2000]:Oc,[P.GCSMARS2000]:null,[P.GCSMOON2000]:null,[P.LON_LAT]:Oc,[P.WGS84_COMPARABLE_LON_LAT]:Oc,[P.SPHERICAL_ECEF]:EG,[P.SPHERICAL_MARS_PCPF]:null,[P.SPHERICAL_MOON_PCPF]:null,[P.UNKNOWN]:null,[P.WEB_MERCATOR]:MG,[P.PLATE_CARREE]:rme,[P.WGS84]:Oc,[P.WGS84_ECEF]:Tt},[P.SPHERICAL_ECEF]:{[P.CGCS2000]:kc,[P.GCSMARS2000]:null,[P.GCSMOON2000]:null,[P.LON_LAT]:kc,[P.WGS84_COMPARABLE_LON_LAT]:kc,[P.SPHERICAL_ECEF]:Tt,[P.SPHERICAL_MARS_PCPF]:null,[P.SPHERICAL_MOON_PCPF]:null,[P.UNKNOWN]:null,[P.WEB_MERCATOR]:$G,[P.PLATE_CARREE]:nme,[P.WGS84]:kc,[P.WGS84_ECEF]:TG},[P.SPHERICAL_MARS_PCPF]:{[P.CGCS2000]:null,[P.GCSMARS2000]:$C,[P.GCSMOON2000]:null,[P.LON_LAT]:$C,[P.WGS84_COMPARABLE_LON_LAT]:null,[P.SPHERICAL_ECEF]:null,[P.SPHERICAL_MARS_PCPF]:Tt,[P.SPHERICAL_MOON_PCPF]:null,[P.UNKNOWN]:null,[P.WEB_MERCATOR]:null,[P.PLATE_CARREE]:null,[P.WGS84]:null,[P.WGS84_ECEF]:null},[P.SPHERICAL_MOON_PCPF]:{[P.CGCS2000]:null,[P.GCSMARS2000]:null,[P.GCSMOON2000]:xC,[P.LON_LAT]:xC,[P.WGS84_COMPARABLE_LON_LAT]:null,[P.SPHERICAL_ECEF]:null,[P.SPHERICAL_MARS_PCPF]:null,[P.SPHERICAL_MOON_PCPF]:Tt,[P.UNKNOWN]:null,[P.WEB_MERCATOR]:null,[P.PLATE_CARREE]:null,[P.WGS84]:null,[P.WGS84_ECEF]:null},[P.UNKNOWN]:{[P.CGCS2000]:null,[P.GCSMARS2000]:null,[P.GCSMOON2000]:null,[P.LON_LAT]:null,[P.WGS84_COMPARABLE_LON_LAT]:null,[P.SPHERICAL_ECEF]:null,[P.SPHERICAL_MARS_PCPF]:null,[P.SPHERICAL_MOON_PCPF]:null,[P.UNKNOWN]:Tt,[P.WEB_MERCATOR]:null,[P.PLATE_CARREE]:null,[P.WGS84]:null,[P.WGS84_ECEF]:null},[P.LON_LAT]:{[P.CGCS2000]:Tt,[P.GCSMARS2000]:Tt,[P.GCSMOON2000]:Tt,[P.LON_LAT]:Tt,[P.WGS84_COMPARABLE_LON_LAT]:Tt,[P.SPHERICAL_ECEF]:Cc,[P.SPHERICAL_MARS_PCPF]:SC,[P.SPHERICAL_MOON_PCPF]:bC,[P.UNKNOWN]:null,[P.WEB_MERCATOR]:dp,[P.PLATE_CARREE]:Ic,[P.WGS84]:Tt,[P.WGS84_ECEF]:Pc},[P.WGS84_COMPARABLE_LON_LAT]:{[P.CGCS2000]:null,[P.GCSMARS2000]:null,[P.GCSMOON2000]:null,[P.LON_LAT]:Tt,[P.WGS84_COMPARABLE_LON_LAT]:Tt,[P.SPHERICAL_ECEF]:Cc,[P.SPHERICAL_MARS_PCPF]:null,[P.SPHERICAL_MOON_PCPF]:null,[P.UNKNOWN]:null,[P.WEB_MERCATOR]:null,[P.PLATE_CARREE]:Ic,[P.WGS84]:Tt,[P.WGS84_ECEF]:Pc},[P.PLATE_CARREE]:{[P.CGCS2000]:Ph,[P.GCSMARS2000]:null,[P.GCSMOON2000]:null,[P.LON_LAT]:Ph,[P.WGS84_COMPARABLE_LON_LAT]:Ph,[P.SPHERICAL_ECEF]:ime,[P.SPHERICAL_MARS_PCPF]:null,[P.SPHERICAL_MOON_PCPF]:null,[P.UNKNOWN]:null,[P.WEB_MERCATOR]:sme,[P.PLATE_CARREE]:Tt,[P.WGS84]:Ph,[P.WGS84_ECEF]:ome}};function HR(e,t,r=ZR()){return e==null||t==null?null:IG(e,t,r).projector}function IG(e,t,r){if(e==null||t==null||r.source.spatialReference===e&&r.dest.spatialReference===t)return r;const n=Va(e,r.source),i=Va(t,r.dest);return n===P.UNKNOWN&&i===P.UNKNOWN?Cr(e,t)?r.projector=Tt:r.projector=null:r.projector=Ps[n][i],r}function ZR(){return{source:{spatialReference:null,spatialReferenceId:P.UNKNOWN,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:P.UNKNOWN,metersPerUnit:1},projector:Tt}}const iy={spatialReference:null,spatialReferenceId:P.UNKNOWN},CG={spatialReference:null,spatialReferenceId:P.UNKNOWN},JR=ZR(),cme=ZR(),Co=ele(1),Am=wU(1),Vt=Yo(),vo=Yo(),Tu=Yo(),nt=Yo(),ww=Yo(),bPe=Object.freeze(Object.defineProperty({__proto__:null,canProjectToWGS84ComparableLonLat:ame,canProjectWithoutEngine:ru,computeENUToSphericalPCPFLocalRotation:qR,computeSphericalPCPFToENULocalRotation:wG,computeTranslationToOriginAndRotation:tme,getProjectorName:Ffe,getTransformation:lG,getTransformations:Lfe,initializeProjection:cG,isLoaded:yd,load:tu,localLinearScaleFactors:eme,lonLatToSphericalPCPF:lme,lonLatToWebMercatorComparable:SG,project:uu,projectBoundingRect:Xfe,projectBoundingSphere:Kfe,projectBuffer:Ho,projectDirection:Yfe,projectExtent:qfe,projectMany:vC,projectMultipoint:Vfe,projectOrLoad:Afe,projectOrLoadMany:aG,projectPoint:jfe,projectPointToVector:Zfe,projectPointToWGS84ComparableLonLat:Jfe,projectPolygon:Bfe,projectPolygonToWGS84ComparableLonLat:Gfe,projectPolyline:zfe,projectPolylineToWGS84ComparableLonLat:Ufe,projectVectorToDehydratedPoint:Hfe,projectVectorToPoint:Wfe,projectVectorToVector:_C,projectVectorToWGS84ComparableLonLat:gG,projectWithoutEngine:dG,projectXYZToVector:wC,sphericalPCPFtoLonLatElevation:T2,test:Dfe,tryProjectWithZConversion:uG,unload:Nfe},Symbol.toStringTag,{value:"Module"}));var TC;let wa=TC=class extends Q{constructor(e){super(e),this.cols=null,this.level=0,this.levelValue=null,this.origin=null,this.resolution=0,this.rows=null,this.scale=0}clone(){return new TC({cols:this.cols,level:this.level,levelValue:this.levelValue,resolution:this.resolution,rows:this.rows,scale:this.scale})}};u([d({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],wa.prototype,"cols",void 0),u([d({type:bt,json:{write:!0}})],wa.prototype,"level",void 0),u([d({type:String,json:{write:!0}})],wa.prototype,"levelValue",void 0),u([d({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],wa.prototype,"origin",void 0),u([d({type:Number,json:{write:!0}})],wa.prototype,"resolution",void 0),u([d({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],wa.prototype,"rows",void 0),u([d({type:Number,json:{write:!0}})],wa.prototype,"scale",void 0),wa=TC=u([E("esri.layers.support.LOD")],wa);const dc=wa;let dme=class{constructor(t,r,n,i,s=void 0){this.id=t,this.level=r,this.row=n,this.col=i,this.extent=s}};var Bu;const ND=new xt({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});let yn=Bu=class extends Q{static create(e={}){const{resolutionFactor:t=1,scales:r,size:n=256,spatialReference:i=Ce.WebMercator,numLODs:s=24}=e;if(!Yr(i)){const f=[];if(r)for(let m=0;m<r.length;m++){const y=r[m];f.push(new dc({level:m,scale:y,resolution:y}))}else{let m=5e-4;for(let y=s-1;y>=0;y--)f.unshift(new dc({level:y,scale:m,resolution:m})),m*=2}return new Bu({dpi:96,lods:f,origin:new be(0,0,i),size:[n,n],spatialReference:i})}const o=Ls(i),a=e.origin?new be({x:e.origin.x,y:e.origin.y,spatialReference:i}):new be(o?{x:o.origin[0],y:o.origin[1],spatialReference:i}:{x:0,y:0,spatialReference:i}),l=96,c=1/(Ga(i)*39.37*l),h=[];if(r)for(let f=0;f<r.length;f++){const m=r[f],y=m*c;h.push(new dc({level:f,scale:m,resolution:y}))}else{let f=UO(i)?512/n*5916575275917094e-7:256/n*591657527591555e-6;const m=Math.ceil(s/t);h.push(new dc({level:0,scale:f,resolution:f*c}));for(let y=1;y<m;y++){const g=f/2**t,v=g*c;h.push(new dc({level:y,scale:g,resolution:v})),f=g}}return new Bu({dpi:l,lods:h,origin:a,size:[n,n],spatialReference:i})}constructor(e){super(e),this.dpi=96,this.format=null,this.origin=null,this.size=null,this.spatialReference=null}get isWrappable(){const{spatialReference:e,origin:t}=this;if(e&&t){const r=Ls(e);return e.isWrappable&&!!r&&Math.abs(r.origin[0]-t.x)<=r.dx}return!1}readOrigin(e,t){return be.fromJSON({spatialReference:t.spatialReference,...e})}set lods(e){let t=0,r=0;const n=[],i=this._levelToLOD={};e&&(t=-1/0,r=1/0,e.forEach(s=>{n.push(s.scale),t=s.scale>t?s.scale:t,r=s.scale<r?s.scale:r,i[s.level]=s})),this._set("scales",n),this._set("lods",e),this._initializeUpsampleLevels()}readSize(e,t){return[t.cols,t.rows]}writeSize(e,t){t.cols=e[0],t.rows=e[1]}zoomToScale(e){const t=this.scales;if(e<=0)return t[0];if(e>=t.length-1)return t[t.length-1];const r=Math.floor(e),n=r+1;return t[r]/(t[r]/t[n])**(e-r)}scaleToZoom(e){const t=this.scales,r=t.length-1;let n=0;for(;n<r;n++){const i=t[n],s=t[n+1];if(i<=e)return n;if(s===e)return n+1;if(i>e&&s<e)return n+Math.log(i/e)/Math.log(i/s)}return n}snapScale(e,t=.95){const r=this.scaleToZoom(e);return r%Math.floor(r)>=t?this.zoomToScale(Math.ceil(r)):this.zoomToScale(Math.floor(r))}tileAt(e,t,r,n){const i=this.lodAt(e);if(!i)return null;let s,o;if(typeof t=="number")s=t,o=r;else if(Cr(t.spatialReference,this.spatialReference))s=t.x,o=t.y,n=r;else{const c=Kv(t,this.spatialReference);if(c==null)return null;s=c.x,o=c.y,n=r}const a=i.resolution*this.size[0],l=i.resolution*this.size[1];return n||(n=new dme(null,0,0,0,Da())),n.level=e,n.row=Math.floor((this.origin.y-o)/l+.001),n.col=Math.floor((s-this.origin.x)/a+.001),this.updateTileInfo(n),n}updateTileInfo(e,t=Bu.ExtrapolateOptions.NONE){let r=this.lodAt(e.level);if(!r&&t===Bu.ExtrapolateOptions.POWER_OF_TWO){const o=this.lods[this.lods.length-1];o.level<e.level&&(r=o)}if(!r)return;const n=e.level-r.level,i=r.resolution*this.size[0]/2**n,s=r.resolution*this.size[1]/2**n;e.id=`${e.level}/${e.row}/${e.col}`,e.extent||(e.extent=Da()),e.extent[0]=this.origin.x+e.col*i,e.extent[1]=this.origin.y-(e.row+1)*s,e.extent[2]=e.extent[0]+i,e.extent[3]=e.extent[1]+s}upsampleTile(e){const t=this._upsampleLevels[e.level];return!(!t||t.parentLevel===-1)&&(e.level=t.parentLevel,e.row=Math.floor(e.row/t.factor+.001),e.col=Math.floor(e.col/t.factor+.001),this.updateTileInfo(e),!0)}getTileBounds(e,t){const r=this.lodAt(t.level);if(r==null)return null;const{resolution:n}=r,i=n*this.size[0],s=n*this.size[1];return e[0]=this.origin.x+t.col*i,e[1]=this.origin.y-(t.row+1)*s,e[2]=e[0]+i,e[3]=e[1]+s,e}lodAt(e){var t;return((t=this._levelToLOD)==null?void 0:t[e])??null}clone(){return Bu.fromJSON(this.write({}))}getOrCreateCompatible(e,t){if(this.size[0]===256&&this.size[1]===256)return e===256?this:null;const r=[],n=this.lods.length;for(let i=0;i<n;i++){const s=this.lods[i],o=s.resolution*t;r.push(new dc({level:s.level,scale:s.scale,resolution:o}))}return new Bu({size:[e,e],dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,origin:this.origin,spatialReference:this.spatialReference,lods:r})}_initializeUpsampleLevels(){const e=this.lods;this._upsampleLevels=[];let t=null;for(let r=0;r<e.length;r++){const n=e[r];this._upsampleLevels[n.level]={parentLevel:t?t.level:-1,factor:t?t.resolution/n.resolution:0},t=n}}};u([d({type:Number,json:{write:!0}})],yn.prototype,"compressionQuality",void 0),u([d({type:Number,json:{write:!0}})],yn.prototype,"dpi",void 0),u([d({type:String,json:{read:ND.read,write:ND.write,origins:{"web-scene":{read:!1,write:!1}}}})],yn.prototype,"format",void 0),u([d({readOnly:!0})],yn.prototype,"isWrappable",null),u([d({type:be,json:{write:!0}})],yn.prototype,"origin",void 0),u([we("origin")],yn.prototype,"readOrigin",null),u([d({type:[dc],value:null,json:{write:!0}})],yn.prototype,"lods",null),u([d({readOnly:!0})],yn.prototype,"scales",void 0),u([d({cast:e=>Array.isArray(e)?e:typeof e=="number"?[e,e]:[256,256]})],yn.prototype,"size",void 0),u([we("size",["rows","cols"])],yn.prototype,"readSize",null),u([pe("size",{cols:{type:bt},rows:{type:bt}})],yn.prototype,"writeSize",null),u([d({type:Ce,json:{write:!0}})],yn.prototype,"spatialReference",void 0),yn=Bu=u([E("esri.layers.support.TileInfo")],yn),function(e){var t;(t=e.ExtrapolateOptions||(e.ExtrapolateOptions={}))[t.NONE=0]="NONE",t[t.POWER_OF_TWO=1]="POWER_OF_TWO"}(yn||(yn={}));const hme=yn,Z_={widthBreakpoint:{getValue(e){const t=e.viewSize[0],r=e.breakpoints,n=this.values;return t<=r.xsmall?n.xsmall:t<=r.small?n.small:t<=r.medium?n.medium:t<=r.large?n.large:n.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",small:"esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",medium:"esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge",large:"esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge",xlarge:"esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large"}},heightBreakpoint:{getValue(e){const t=e.viewSize[1],r=e.breakpoints,n=this.values;return t<=r.xsmall?n.xsmall:t<=r.small?n.small:t<=r.medium?n.medium:t<=r.large?n.large:n.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",small:"esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",medium:"esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge",large:"esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge",xlarge:"esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large"}},orientation:{getValue(e){const t=e.viewSize,r=t[0],n=t[1],i=this.values;return n>=r?i.portrait:i.landscape},values:{portrait:"portrait",landscape:"landscape"},valueToClassName:{portrait:"esri-view-orientation-portrait",landscape:"esri-view-orientation-landscape"}}},oT={xsmall:544,small:768,medium:992,large:1200};function pme(e){const t=e;return t&&t.xsmall<t.small&&t.small<t.medium&&t.medium<t.large}function aT(e,t){return t?Z_[e].valueToClassName[t].split(" "):[]}const fme=e=>{let t=class extends e{constructor(...r){super(...r),this._breakpointsHandles=new ou,this.orientation=null,this.widthBreakpoint=null,this.heightBreakpoint=null,this.breakpoints=oT}initialize(){this._breakpointsHandles.add(Ee(()=>[this.breakpoints,this.size],()=>this._updateClassNames(),Ir))}destroy(){this.destroyed||(this._removeActiveClassNames(),this._breakpointsHandles=Gt(this._breakpointsHandles))}set breakpoints(r){if(r===this._get("breakpoints"))return;const n=pme(r);if(!n){const i=JSON.stringify(oT,null,2);console.warn("provided breakpoints are not valid, using defaults:"+i)}r=n?r:oT,this._set("breakpoints",{...r})}_updateClassNames(){if(!this.container)return;const r=Yn.acquire(),n=Yn.acquire();let i,s=!1;for(i in Z_){const o=this[i],a=Z_[i].getValue({viewSize:this.size,breakpoints:this.breakpoints});o!==a&&(s=!0,this[i]=a,aT(i,o).forEach(l=>n.push(l)),aT(i,a).forEach(l=>r.push(l)))}s&&(this._applyClassNameChanges(r,n),Yn.release(r),Yn.release(n))}_applyClassNameChanges(r,n){const i=this.container;i&&(n.forEach(s=>i.classList.remove(s)),r.forEach(s=>i.classList.add(s)))}_removeActiveClassNames(){const r=this.container;if(!r)return;let n;for(n in Z_)aT(n,this[n]).forEach(i=>r.classList.remove(i))}};return u([d()],t.prototype,"breakpoints",null),u([d()],t.prototype,"orientation",void 0),u([d()],t.prototype,"widthBreakpoint",void 0),u([d()],t.prototype,"heightBreakpoint",void 0),t=u([E("esri.views.BreakpointsOwner")],t),t};function QR(e){return typeof e=="string"?document.getElementById(e):e??null}function kG(e){for(;e.hasChildNodes();)e.removeChild(e.firstChild)}function DD(e,t){const r=t.parentNode;r&&r.insertBefore(e,t)}function FD(e,t){for(;;){const r=e.firstChild;if(!r)break;t.appendChild(r)}}let im=class extends $e{constructor(){super(...arguments),this.updating=!1,this._handleId=0,this._handles=new ou,this._scheduleHandleId=0,this._pendingPromises=new Set}destroy(){this.removeAll(),this._handles.destroy()}add(t,r,n={}){return this._installWatch(t,r,n,Ee)}addWhen(t,r,n={}){return this._installWatch(t,r,n,Xl)}addOnCollectionChange(t,r,{initial:n=!1,final:i=!1}={}){const s=++this._handleId;return this._handles.add([Rm(t,"after-changes",this._createSyncUpdatingCallback(),ny),Rm(t,"change",r,{onListenerAdd:n?o=>r({added:o.toArray(),removed:[]}):void 0,onListenerRemove:i?o=>r({added:[],removed:o.toArray()}):void 0})],s),Hl(()=>this._handles.remove(s))}addPromise(t){if(t==null)return t;const r=++this._handleId;this._handles.add({remove:()=>{this._pendingPromises.delete(t)&&(this._pendingPromises.size!==0||this._handles.has(_w)||this._set("updating",!1))}},r),this._pendingPromises.add(t),this._set("updating",!0);const n=()=>this._handles.remove(r);return t.then(n,n),t}removeAll(){this._pendingPromises.clear(),this._handles.removeAll(),this._set("updating",!1)}_installWatch(t,r,n={},i){const s=++this._handleId;n.sync||this._installSyncUpdatingWatch(t,s);const o=i(t,r,n);return this._handles.add(o,s),Hl(()=>this._handles.remove(s))}_installSyncUpdatingWatch(t,r){const n=this._createSyncUpdatingCallback(),i=Ee(t,n,{sync:!0,equals:()=>!1});return this._handles.add(i,r),i}_createSyncUpdatingCallback(){return()=>{this._handles.remove(_w),++this._scheduleHandleId;const t=this._scheduleHandleId;this._get("updating")||this._set("updating",!0),this._handles.add(Bm(()=>{t===this._scheduleHandleId&&(this._set("updating",this._pendingPromises.size>0),this._handles.remove(_w))}),_w)}}};u([d({readOnly:!0})],im.prototype,"updating",void 0),im=u([E("esri.core.support.WatchUpdatingTracking")],im);const _w=-42;/*!
 * @esri/arcgis-html-sanitizer - v3.0.1 - Tue Nov 15 2022 09:46:54 GMT-0800 (Pacific Standard Time)
 * Copyright (c) 2022 - Environmental Systems Research Institute, Inc.
 * Apache-2.0
 * 
 * js-xss
 * Copyright (c) 2012-2018 Zongmin Lei() <leizongmin@gmail.com>
 * http://ucdok.com
 * MIT License, see https://github.com/leizongmin/js-xss/blob/master/LICENSE for details
 */var mme=function(e){if(typeof e!="object"||e===null||Object.prototype.toString.call(e)!=="[object Object]")return!1;var t=Object.getPrototypeOf(e);if(t===null)return!0;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t},vh={exports:{}},vr={},$v={exports:{}},$p={};function PG(){var e={};return e["align-content"]=!1,e["align-items"]=!1,e["align-self"]=!1,e["alignment-adjust"]=!1,e["alignment-baseline"]=!1,e.all=!1,e["anchor-point"]=!1,e.animation=!1,e["animation-delay"]=!1,e["animation-direction"]=!1,e["animation-duration"]=!1,e["animation-fill-mode"]=!1,e["animation-iteration-count"]=!1,e["animation-name"]=!1,e["animation-play-state"]=!1,e["animation-timing-function"]=!1,e.azimuth=!1,e["backface-visibility"]=!1,e.background=!0,e["background-attachment"]=!0,e["background-clip"]=!0,e["background-color"]=!0,e["background-image"]=!0,e["background-origin"]=!0,e["background-position"]=!0,e["background-repeat"]=!0,e["background-size"]=!0,e["baseline-shift"]=!1,e.binding=!1,e.bleed=!1,e["bookmark-label"]=!1,e["bookmark-level"]=!1,e["bookmark-state"]=!1,e.border=!0,e["border-bottom"]=!0,e["border-bottom-color"]=!0,e["border-bottom-left-radius"]=!0,e["border-bottom-right-radius"]=!0,e["border-bottom-style"]=!0,e["border-bottom-width"]=!0,e["border-collapse"]=!0,e["border-color"]=!0,e["border-image"]=!0,e["border-image-outset"]=!0,e["border-image-repeat"]=!0,e["border-image-slice"]=!0,e["border-image-source"]=!0,e["border-image-width"]=!0,e["border-left"]=!0,e["border-left-color"]=!0,e["border-left-style"]=!0,e["border-left-width"]=!0,e["border-radius"]=!0,e["border-right"]=!0,e["border-right-color"]=!0,e["border-right-style"]=!0,e["border-right-width"]=!0,e["border-spacing"]=!0,e["border-style"]=!0,e["border-top"]=!0,e["border-top-color"]=!0,e["border-top-left-radius"]=!0,e["border-top-right-radius"]=!0,e["border-top-style"]=!0,e["border-top-width"]=!0,e["border-width"]=!0,e.bottom=!1,e["box-decoration-break"]=!0,e["box-shadow"]=!0,e["box-sizing"]=!0,e["box-snap"]=!0,e["box-suppress"]=!0,e["break-after"]=!0,e["break-before"]=!0,e["break-inside"]=!0,e["caption-side"]=!1,e.chains=!1,e.clear=!0,e.clip=!1,e["clip-path"]=!1,e["clip-rule"]=!1,e.color=!0,e["color-interpolation-filters"]=!0,e["column-count"]=!1,e["column-fill"]=!1,e["column-gap"]=!1,e["column-rule"]=!1,e["column-rule-color"]=!1,e["column-rule-style"]=!1,e["column-rule-width"]=!1,e["column-span"]=!1,e["column-width"]=!1,e.columns=!1,e.contain=!1,e.content=!1,e["counter-increment"]=!1,e["counter-reset"]=!1,e["counter-set"]=!1,e.crop=!1,e.cue=!1,e["cue-after"]=!1,e["cue-before"]=!1,e.cursor=!1,e.direction=!1,e.display=!0,e["display-inside"]=!0,e["display-list"]=!0,e["display-outside"]=!0,e["dominant-baseline"]=!1,e.elevation=!1,e["empty-cells"]=!1,e.filter=!1,e.flex=!1,e["flex-basis"]=!1,e["flex-direction"]=!1,e["flex-flow"]=!1,e["flex-grow"]=!1,e["flex-shrink"]=!1,e["flex-wrap"]=!1,e.float=!1,e["float-offset"]=!1,e["flood-color"]=!1,e["flood-opacity"]=!1,e["flow-from"]=!1,e["flow-into"]=!1,e.font=!0,e["font-family"]=!0,e["font-feature-settings"]=!0,e["font-kerning"]=!0,e["font-language-override"]=!0,e["font-size"]=!0,e["font-size-adjust"]=!0,e["font-stretch"]=!0,e["font-style"]=!0,e["font-synthesis"]=!0,e["font-variant"]=!0,e["font-variant-alternates"]=!0,e["font-variant-caps"]=!0,e["font-variant-east-asian"]=!0,e["font-variant-ligatures"]=!0,e["font-variant-numeric"]=!0,e["font-variant-position"]=!0,e["font-weight"]=!0,e.grid=!1,e["grid-area"]=!1,e["grid-auto-columns"]=!1,e["grid-auto-flow"]=!1,e["grid-auto-rows"]=!1,e["grid-column"]=!1,e["grid-column-end"]=!1,e["grid-column-start"]=!1,e["grid-row"]=!1,e["grid-row-end"]=!1,e["grid-row-start"]=!1,e["grid-template"]=!1,e["grid-template-areas"]=!1,e["grid-template-columns"]=!1,e["grid-template-rows"]=!1,e["hanging-punctuation"]=!1,e.height=!0,e.hyphens=!1,e.icon=!1,e["image-orientation"]=!1,e["image-resolution"]=!1,e["ime-mode"]=!1,e["initial-letters"]=!1,e["inline-box-align"]=!1,e["justify-content"]=!1,e["justify-items"]=!1,e["justify-self"]=!1,e.left=!1,e["letter-spacing"]=!0,e["lighting-color"]=!0,e["line-box-contain"]=!1,e["line-break"]=!1,e["line-grid"]=!1,e["line-height"]=!1,e["line-snap"]=!1,e["line-stacking"]=!1,e["line-stacking-ruby"]=!1,e["line-stacking-shift"]=!1,e["line-stacking-strategy"]=!1,e["list-style"]=!0,e["list-style-image"]=!0,e["list-style-position"]=!0,e["list-style-type"]=!0,e.margin=!0,e["margin-bottom"]=!0,e["margin-left"]=!0,e["margin-right"]=!0,e["margin-top"]=!0,e["marker-offset"]=!1,e["marker-side"]=!1,e.marks=!1,e.mask=!1,e["mask-box"]=!1,e["mask-box-outset"]=!1,e["mask-box-repeat"]=!1,e["mask-box-slice"]=!1,e["mask-box-source"]=!1,e["mask-box-width"]=!1,e["mask-clip"]=!1,e["mask-image"]=!1,e["mask-origin"]=!1,e["mask-position"]=!1,e["mask-repeat"]=!1,e["mask-size"]=!1,e["mask-source-type"]=!1,e["mask-type"]=!1,e["max-height"]=!0,e["max-lines"]=!1,e["max-width"]=!0,e["min-height"]=!0,e["min-width"]=!0,e["move-to"]=!1,e["nav-down"]=!1,e["nav-index"]=!1,e["nav-left"]=!1,e["nav-right"]=!1,e["nav-up"]=!1,e["object-fit"]=!1,e["object-position"]=!1,e.opacity=!1,e.order=!1,e.orphans=!1,e.outline=!1,e["outline-color"]=!1,e["outline-offset"]=!1,e["outline-style"]=!1,e["outline-width"]=!1,e.overflow=!1,e["overflow-wrap"]=!1,e["overflow-x"]=!1,e["overflow-y"]=!1,e.padding=!0,e["padding-bottom"]=!0,e["padding-left"]=!0,e["padding-right"]=!0,e["padding-top"]=!0,e.page=!1,e["page-break-after"]=!1,e["page-break-before"]=!1,e["page-break-inside"]=!1,e["page-policy"]=!1,e.pause=!1,e["pause-after"]=!1,e["pause-before"]=!1,e.perspective=!1,e["perspective-origin"]=!1,e.pitch=!1,e["pitch-range"]=!1,e["play-during"]=!1,e.position=!1,e["presentation-level"]=!1,e.quotes=!1,e["region-fragment"]=!1,e.resize=!1,e.rest=!1,e["rest-after"]=!1,e["rest-before"]=!1,e.richness=!1,e.right=!1,e.rotation=!1,e["rotation-point"]=!1,e["ruby-align"]=!1,e["ruby-merge"]=!1,e["ruby-position"]=!1,e["shape-image-threshold"]=!1,e["shape-outside"]=!1,e["shape-margin"]=!1,e.size=!1,e.speak=!1,e["speak-as"]=!1,e["speak-header"]=!1,e["speak-numeral"]=!1,e["speak-punctuation"]=!1,e["speech-rate"]=!1,e.stress=!1,e["string-set"]=!1,e["tab-size"]=!1,e["table-layout"]=!1,e["text-align"]=!0,e["text-align-last"]=!0,e["text-combine-upright"]=!0,e["text-decoration"]=!0,e["text-decoration-color"]=!0,e["text-decoration-line"]=!0,e["text-decoration-skip"]=!0,e["text-decoration-style"]=!0,e["text-emphasis"]=!0,e["text-emphasis-color"]=!0,e["text-emphasis-position"]=!0,e["text-emphasis-style"]=!0,e["text-height"]=!0,e["text-indent"]=!0,e["text-justify"]=!0,e["text-orientation"]=!0,e["text-overflow"]=!0,e["text-shadow"]=!0,e["text-space-collapse"]=!0,e["text-transform"]=!0,e["text-underline-position"]=!0,e["text-wrap"]=!0,e.top=!1,e.transform=!1,e["transform-origin"]=!1,e["transform-style"]=!1,e.transition=!1,e["transition-delay"]=!1,e["transition-duration"]=!1,e["transition-property"]=!1,e["transition-timing-function"]=!1,e["unicode-bidi"]=!1,e["vertical-align"]=!1,e.visibility=!1,e["voice-balance"]=!1,e["voice-duration"]=!1,e["voice-family"]=!1,e["voice-pitch"]=!1,e["voice-range"]=!1,e["voice-rate"]=!1,e["voice-stress"]=!1,e["voice-volume"]=!1,e.volume=!1,e["white-space"]=!1,e.widows=!1,e.width=!0,e["will-change"]=!1,e["word-break"]=!0,e["word-spacing"]=!0,e["word-wrap"]=!0,e["wrap-flow"]=!1,e["wrap-through"]=!1,e["writing-mode"]=!1,e["z-index"]=!1,e}function yme(e,t,r){}function gme(e,t,r){}var vme=/javascript\s*\:/img;function wme(e,t){return vme.test(t)?"":t}$p.whiteList=PG();$p.getDefaultWhiteList=PG;$p.onAttr=yme;$p.onIgnoreAttr=gme;$p.safeAttrValue=wme;var _me={indexOf:function(e,t){var r,n;if(Array.prototype.indexOf)return e.indexOf(t);for(r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1},forEach:function(e,t,r){var n,i;if(Array.prototype.forEach)return e.forEach(t,r);for(n=0,i=e.length;n<i;n++)t.call(r,e[n],n,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(e){return String.prototype.trimRight?e.trimRight():e.replace(/(\s*$)/g,"")}},jy=_me;function bme(e,t){e=jy.trimRight(e),e[e.length-1]!==";"&&(e+=";");var r=e.length,n=!1,i=0,s=0,o="";function a(){if(!n){var h=jy.trim(e.slice(i,s)),f=h.indexOf(":");if(f!==-1){var m=jy.trim(h.slice(0,f)),y=jy.trim(h.slice(f+1));if(m){var g=t(i,o.length,m,y,h);g&&(o+=g+"; ")}}}i=s+1}for(;s<r;s++){var l=e[s];if(l==="/"&&e[s+1]==="*"){var c=e.indexOf("*/",s+2);if(c===-1)break;s=c+1,i=s+1,n=!1}else l==="("?n=!0:l===")"?n=!1:l===";"?n||a():l===`
`&&a()}return jy.trim(o)}var Sme=bme,bw=$p,xme=Sme;function jD(e){return e==null}function $me(e){var t={};for(var r in e)t[r]=e[r];return t}function OG(e){e=$me(e||{}),e.whiteList=e.whiteList||bw.whiteList,e.onAttr=e.onAttr||bw.onAttr,e.onIgnoreAttr=e.onIgnoreAttr||bw.onIgnoreAttr,e.safeAttrValue=e.safeAttrValue||bw.safeAttrValue,this.options=e}OG.prototype.process=function(e){if(e=e||"",e=e.toString(),!e)return"";var t=this,r=t.options,n=r.whiteList,i=r.onAttr,s=r.onIgnoreAttr,o=r.safeAttrValue,a=xme(e,function(l,c,h,f,m){var y=n[h],g=!1;if(y===!0?g=y:typeof y=="function"?g=y(f):y instanceof RegExp&&(g=y.test(f)),g!==!0&&(g=!1),f=o(h,f),!!f){var v={position:c,sourcePosition:l,source:m,isWhite:g};if(g){var w=i(h,f,v);return jD(w)?h+":"+f:w}else{var w=s(h,f,v);if(!jD(w))return w}}});return a};var Tme=OG;(function(e,t){var r=$p,n=Tme;function i(o,a){var l=new n(a);return l.process(o)}t=e.exports=i,t.FilterCSS=n;for(var s in r)t[s]=r[s]})($v,$v.exports);var YR={indexOf:function(e,t){var r,n;if(Array.prototype.indexOf)return e.indexOf(t);for(r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1},forEach:function(e,t,r){var n,i;if(Array.prototype.forEach)return e.forEach(t,r);for(n=0,i=e.length;n<i;n++)t.call(r,e[n],n,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(e){var t=/\s|\n|\t/,r=t.exec(e);return r?r.index:-1}},Eme=$v.exports.FilterCSS,Mme=$v.exports.getDefaultWhiteList,WS=YR;function RG(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}}var AG=new Eme;function Ime(e,t,r){}function Cme(e,t,r){}function kme(e,t,r){}function Pme(e,t,r){}function LG(e){return e.replace(Rme,"&lt;").replace(Ame,"&gt;")}function Ome(e,t,r,n){if(r=zG(r),t==="href"||t==="src"){if(r=WS.trim(r),r==="#")return"#";if(!(r.substr(0,7)==="http://"||r.substr(0,8)==="https://"||r.substr(0,7)==="mailto:"||r.substr(0,4)==="tel:"||r.substr(0,11)==="data:image/"||r.substr(0,6)==="ftp://"||r.substr(0,2)==="./"||r.substr(0,3)==="../"||r[0]==="#"||r[0]==="/"))return""}else if(t==="background"){if(Sw.lastIndex=0,Sw.test(r))return""}else if(t==="style"){if(VD.lastIndex=0,VD.test(r)||(zD.lastIndex=0,zD.test(r)&&(Sw.lastIndex=0,Sw.test(r))))return"";n!==!1&&(n=n||AG,r=n.process(r))}return r=UG(r),r}var Rme=/</g,Ame=/>/g,Lme=/"/g,Nme=/&quot;/g,Dme=/&#([a-zA-Z0-9]*);?/gim,Fme=/&colon;?/gim,jme=/&newline;?/gim,Sw=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,VD=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,zD=/u\s*r\s*l\s*\(.*/gi;function NG(e){return e.replace(Lme,"&quot;")}function DG(e){return e.replace(Nme,'"')}function FG(e){return e.replace(Dme,function(r,n){return n[0]==="x"||n[0]==="X"?String.fromCharCode(parseInt(n.substr(1),16)):String.fromCharCode(parseInt(n,10))})}function jG(e){return e.replace(Fme,":").replace(jme," ")}function VG(e){for(var t="",r=0,n=e.length;r<n;r++)t+=e.charCodeAt(r)<32?" ":e.charAt(r);return WS.trim(t)}function zG(e){return e=DG(e),e=FG(e),e=jG(e),e=VG(e),e}function UG(e){return e=NG(e),e=LG(e),e}function Vme(){return""}function zme(e,t){typeof t!="function"&&(t=function(){});var r=!Array.isArray(e);function n(o){return r?!0:WS.indexOf(e,o)!==-1}var i=[],s=!1;return{onIgnoreTag:function(o,a,l){if(n(o))if(l.isClosing){var c="[/removed]",h=l.position+c.length;return i.push([s!==!1?s:l.position,h]),s=!1,c}else return s||(s=l.position),"[removed]";else return t(o,a,l)},remove:function(o){var a="",l=0;return WS.forEach(i,function(c){a+=o.slice(l,c[0]),l=c[1]}),a+=o.slice(l),a}}}function Ume(e){for(var t="",r=0;r<e.length;){var n=e.indexOf("<!--",r);if(n===-1){t+=e.slice(r);break}t+=e.slice(r,n);var i=e.indexOf("-->",n);if(i===-1)break;r=i+3}return t}function Gme(e){var t=e.split("");return t=t.filter(function(r){var n=r.charCodeAt(0);return n===127?!1:n<=31?n===10||n===13:!0}),t.join("")}vr.whiteList=RG();vr.getDefaultWhiteList=RG;vr.onTag=Ime;vr.onIgnoreTag=Cme;vr.onTagAttr=kme;vr.onIgnoreTagAttr=Pme;vr.safeAttrValue=Ome;vr.escapeHtml=LG;vr.escapeQuote=NG;vr.unescapeQuote=DG;vr.escapeHtmlEntities=FG;vr.escapeDangerHtml5Entities=jG;vr.clearNonPrintableCharacter=VG;vr.friendlyAttrValue=zG;vr.escapeAttrValue=UG;vr.onIgnoreTagStripAll=Vme;vr.StripTagBody=zme;vr.stripCommentTag=Ume;vr.stripBlankChar=Gme;vr.cssFilter=AG;vr.getDefaultCSSWhiteList=Mme;var E2={},hc=YR;function Bme(e){var t=hc.spaceIndex(e),r;return t===-1?r=e.slice(1,-1):r=e.slice(1,t+1),r=hc.trim(r).toLowerCase(),r.slice(0,1)==="/"&&(r=r.slice(1)),r.slice(-1)==="/"&&(r=r.slice(0,-1)),r}function qme(e){return e.slice(0,2)==="</"}function Wme(e,t,r){var n="",i=0,s=!1,o=!1,a=0,l=e.length,c="",h="";e:for(a=0;a<l;a++){var f=e.charAt(a);if(s===!1){if(f==="<"){s=a;continue}}else if(o===!1){if(f==="<"){n+=r(e.slice(i,a)),s=a,i=a;continue}if(f===">"){n+=r(e.slice(i,s)),h=e.slice(s,a+1),c=Bme(h),n+=t(s,n.length,c,h,qme(h)),i=a+1,s=!1;continue}if(f==='"'||f==="'")for(var m=1,y=e.charAt(a-m);y.trim()===""||y==="=";){if(y==="="){o=f;continue e}y=e.charAt(a-++m)}}else if(f===o){o=!1;continue}}return i<e.length&&(n+=r(e.substr(i))),n}var Hme=/[^a-zA-Z0-9\\_:.-]/gim;function Zme(e,t){var r=0,n=0,i=[],s=!1,o=e.length;function a(m,y){if(m=hc.trim(m),m=m.replace(Hme,"").toLowerCase(),!(m.length<1)){var g=t(m,y||"");g&&i.push(g)}}for(var l=0;l<o;l++){var c=e.charAt(l),h,f;if(s===!1&&c==="="){s=e.slice(r,l),r=l+1,n=e.charAt(r)==='"'||e.charAt(r)==="'"?r:Qme(e,l+1);continue}if(s!==!1&&l===n){if(f=e.indexOf(c,l+1),f===-1)break;h=hc.trim(e.slice(n+1,f)),a(s,h),s=!1,l=f,r=l+1;continue}if(/\s|\n|\t/.test(c))if(e=e.replace(/\s|\n|\t/g," "),s===!1)if(f=Jme(e,l),f===-1){h=hc.trim(e.slice(r,l)),a(h),s=!1,r=l+1;continue}else{l=f-1;continue}else if(f=Yme(e,l-1),f===-1){h=hc.trim(e.slice(r,l)),h=UD(h),a(s,h),s=!1,r=l+1;continue}else continue}return r<e.length&&(s===!1?a(e.slice(r)):a(s,UD(hc.trim(e.slice(r))))),hc.trim(i.join(" "))}function Jme(e,t){for(;t<e.length;t++){var r=e[t];if(r!==" ")return r==="="?t:-1}}function Qme(e,t){for(;t<e.length;t++){var r=e[t];if(r!==" ")return r==="'"||r==='"'?t:-1}}function Yme(e,t){for(;t>0;t--){var r=e[t];if(r!==" ")return r==="="?t:-1}}function Kme(e){return e[0]==='"'&&e[e.length-1]==='"'||e[0]==="'"&&e[e.length-1]==="'"}function UD(e){return Kme(e)?e.substr(1,e.length-2):e}E2.parseTag=Wme;E2.parseAttr=Zme;var Xme=$v.exports.FilterCSS,wo=vr,GG=E2,eye=GG.parseTag,tye=GG.parseAttr,J_=YR;function xw(e){return e==null}function rye(e){var t=J_.spaceIndex(e);if(t===-1)return{html:"",closing:e[e.length-2]==="/"};e=J_.trim(e.slice(t+1,-1));var r=e[e.length-1]==="/";return r&&(e=J_.trim(e.slice(0,-1))),{html:e,closing:r}}function nye(e){var t={};for(var r in e)t[r]=e[r];return t}function iye(e){var t={};for(var r in e)Array.isArray(e[r])?t[r.toLowerCase()]=e[r].map(function(n){return n.toLowerCase()}):t[r.toLowerCase()]=e[r];return t}function BG(e){e=nye(e||{}),e.stripIgnoreTag&&(e.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),e.onIgnoreTag=wo.onIgnoreTagStripAll),e.whiteList||e.allowList?e.whiteList=iye(e.whiteList||e.allowList):e.whiteList=wo.whiteList,e.onTag=e.onTag||wo.onTag,e.onTagAttr=e.onTagAttr||wo.onTagAttr,e.onIgnoreTag=e.onIgnoreTag||wo.onIgnoreTag,e.onIgnoreTagAttr=e.onIgnoreTagAttr||wo.onIgnoreTagAttr,e.safeAttrValue=e.safeAttrValue||wo.safeAttrValue,e.escapeHtml=e.escapeHtml||wo.escapeHtml,this.options=e,e.css===!1?this.cssFilter=!1:(e.css=e.css||{},this.cssFilter=new Xme(e.css))}BG.prototype.process=function(e){if(e=e||"",e=e.toString(),!e)return"";var t=this,r=t.options,n=r.whiteList,i=r.onTag,s=r.onIgnoreTag,o=r.onTagAttr,a=r.onIgnoreTagAttr,l=r.safeAttrValue,c=r.escapeHtml,h=t.cssFilter;r.stripBlankChar&&(e=wo.stripBlankChar(e)),r.allowCommentTag||(e=wo.stripCommentTag(e));var f=!1;r.stripIgnoreTagBody&&(f=wo.StripTagBody(r.stripIgnoreTagBody,s),s=f.onIgnoreTag);var m=eye(e,function(y,g,v,w,b){var S={sourcePosition:y,position:g,isClosing:b,isWhite:Object.prototype.hasOwnProperty.call(n,v)},_=i(v,w,S);if(!xw(_))return _;if(S.isWhite){if(S.isClosing)return"</"+v+">";var x=rye(w),T=n[v],I=tye(x.html,function(C,O){var W=J_.indexOf(T,C)!==-1,z=o(v,C,O,W);return xw(z)?W?(O=l(v,C,O,h),O?C+'="'+O+'"':C):(z=a(v,C,O,W),xw(z)?void 0:z):z});return w="<"+v,I&&(w+=" "+I),x.closing&&(w+=" /"),w+=">",w}else return _=s(v,w,S),xw(_)?c(w):_},c);return f&&(m=f.remove(m)),m};var sye=BG;(function(e,t){var r=vr,n=E2,i=sye;function s(a,l){var c=new i(l);return c.process(a)}t=e.exports=s,t.filterXSS=s,t.FilterXSS=i,function(){for(var a in r)t[a]=r[a];for(var l in n)t[l]=n[l]}();function o(){return typeof self<"u"&&typeof DedicatedWorkerGlobalScope<"u"&&self instanceof DedicatedWorkerGlobalScope}o()&&(self.filterXSS=e.exports)})(vh,vh.exports);var oye=function(){function e(t,r){var n=this;this.arcgisWhiteList={a:["href","style","target"],abbr:["title"],audio:["autoplay","controls","loop","muted","preload"],b:[],br:[],dd:["style"],div:["align","style"],dl:["style"],dt:["style"],em:[],figcaption:["style"],figure:["style"],font:["color","face","size","style"],h1:["style"],h2:["style"],h3:["style"],h4:["style"],h5:["style"],h6:["style"],hr:[],i:[],img:["alt","border","height","src","style","width"],li:[],ol:[],p:["style"],source:["media","src","type"],span:["style"],strong:[],sub:["style"],sup:["style"],table:["border","cellpadding","cellspacing","height","style","width"],tbody:[],tr:["align","height","style","valign"],td:["align","colspan","height","nowrap","rowspan","style","valign","width"],th:["align","colspan","height","nowrap","rowspan","style","valign","width"],u:[],ul:[],video:["autoplay","controls","height","loop","muted","poster","preload","width"]},this.allowedProtocols=["http","https","mailto","iform","tel","flow","lfmobile","arcgis-navigator","arcgis-appstudio-player","arcgis-survey123","arcgis-collector","arcgis-workforce","arcgis-explorer","arcgis-trek2there","arcgis-quickcapture","mspbi","comgooglemaps","pdfefile","pdfehttp","pdfehttps","boxapp","boxemm","awb","awbs","gropen","radarscope"],this.arcgisFilterOptions={allowCommentTag:!0,safeAttrValue:function(s,o,a,l){return s==="a"&&o==="href"||(s==="img"||s==="source")&&o==="src"?n.sanitizeUrl(a):vh.exports.safeAttrValue(s,o,a,l)}},this._entityMap={"&":"&#x38;","<":"&#x3C;",">":"&#x3E;",'"':"&#x22;","'":"&#x27;","/":"&#x2F;"};var i;t&&!r?i=t:t&&r?(i=Object.create(this.arcgisFilterOptions),Object.keys(t).forEach(function(s){s==="whiteList"?i.whiteList=n._extendObjectOfArrays([n.arcgisWhiteList,t.whiteList||{}]):i[s]=t[s]})):(i=Object.create(this.arcgisFilterOptions),i.whiteList=this.arcgisWhiteList),this.xssFilterOptions=i,this._xssFilter=new vh.exports.FilterXSS(i)}return e.prototype.sanitize=function(t,r){switch(r===void 0&&(r={}),typeof t){case"number":return isNaN(t)||!isFinite(t)?null:t;case"boolean":return t;case"string":return this._xssFilter.process(t);case"object":return this._iterateOverObject(t,r);default:return r.allowUndefined&&typeof t>"u"?void 0:null}},e.prototype.sanitizeUrl=function(t,r){var n=(r??{}).isProtocolRequired,i=n===void 0?!0:n,s=this._trim(t.substring(0,t.indexOf(":"))),o=t==="/",a=/^#/.test(t),l=s&&this.allowedProtocols.indexOf(s.toLowerCase())>-1;return o||a||l?vh.exports.escapeAttrValue(t):!s&&!i?vh.exports.escapeAttrValue("https://".concat(t)):""},e.prototype.sanitizeHTMLAttribute=function(t,r,n,i){return typeof this.xssFilterOptions.safeAttrValue=="function"?this.xssFilterOptions.safeAttrValue(t,r,n,i):vh.exports.safeAttrValue(t,r,n,i)},e.prototype.validate=function(t,r){r===void 0&&(r={});var n=this.sanitize(t,r);return{isValid:t===n,sanitized:n}},e.prototype.encodeHTML=function(t){var r=this;return String(t).replace(/[&<>"'\/]/g,function(n){return r._entityMap[n]})},e.prototype.encodeAttrValue=function(t){var r=/^[a-zA-Z0-9]$/;return String(t).replace(/[\x00-\xFF]/g,function(n,i){return r.test(n)?n:"&#x".concat(Number(t.charCodeAt(i)).toString(16),";")})},e.prototype._extendObjectOfArrays=function(t){var r={};return t.forEach(function(n){Object.keys(n).forEach(function(i){Array.isArray(n[i])&&Array.isArray(r[i])?r[i]=r[i].concat(n[i]):r[i]=n[i]})}),r},e.prototype._iterateOverObject=function(t,r){var n=this;r===void 0&&(r={});try{var i=!1,s=void 0;if(Array.isArray(t))s=t.reduce(function(a,l){var c=n.validate(l,r);return c.isValid?a.concat([l]):(i=!0,a.concat([c.sanitized]))},[]);else if(mme(t)){var o=Object.keys(t);s=o.reduce(function(a,l){var c=t[l],h=n.validate(c,r);return h.isValid?a[l]=c:(i=!0,a[l]=h.sanitized),a},{})}else return r.allowUndefined&&typeof t>"u"?void 0:null;return i?s:t}catch{return null}},e.prototype._trim=function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},e}();const M2=new Map;function qG(){M2.clear()}function aye(e){return M2.get(e)}function lye(e,t){M2.set(e,t)}function lT(e){M2.delete(e)}var hp,Lm,uye=function(e){if("WebkitTransition"in e.style)hp="webkitTransitionEnd",Lm="webkitAnimationEnd";else{if(!("transition"in e.style))throw new Error("Your browser is not supported!");hp="transitionend",Lm="animationend"}},WG=function(e){hp||uye(e)},cye=function(e,t){return t===void 0&&(t=e+"-active"),function(r){WG(r);var n=!1,i=function(s){n||(n=!0,r.removeEventListener(hp,i),r.removeEventListener(Lm,i),r.classList.remove(e),r.classList.remove(t))};r.classList.add(e),r.addEventListener(hp,i),r.addEventListener(Lm,i),requestAnimationFrame(function(){r.classList.add(t)})}},dye=function(e,t){return t===void 0&&(t=e+"-active"),function(r,n){WG(r);var i=!1,s=function(o){i||(i=!0,r.removeEventListener(hp,s),r.removeEventListener(Lm,s),n())};r.classList.add(e),r.addEventListener(hp,s),r.addEventListener(Lm,s),requestAnimationFrame(function(){r.classList.add(t)})}};const hye=Z.getLogger("esri.widgets.support.widgetUtils");function HG(e){const t=Yn.acquire();for(let n=0;n<arguments.length;n++){const i=arguments[n],s=typeof i;if(s==="string")t.push(i);else if(Array.isArray(i))t.push.apply(t,i);else if(s==="object")for(const o in i)i[o]&&t.push(o)}const r=t.join(" ");return Yn.release(t),r}(()=>{const e=new Map,t=new ResizeObserver(n=>{var i;qG();for(const s of n)(i=e.get(s.target))==null||i(s)}),r=(n,i,s)=>(e.has(n)&&hye.error("Already observing element",n),e.set(n,i),t.observe(n,s),Hl(()=>{t.unobserve(n),e.delete(n)}));return(n,i,s)=>{let o=null;return Ee(()=>typeof n=="function"?n():n,a=>{o==null||o.remove(),a&&(o=r(a,i,s))},cc)}})();function ZG(e){const t=e==null?void 0:e.closest("[dir]");return t!==null&&t instanceof HTMLElement&&t.dir==="rtl"||document.dir==="rtl"}function $Pe(e){const t="data-node-ref";this[e.getAttribute(t)]=null}function Tg(e){const t="data-node-ref";this[e.getAttribute(t)]=e}function TPe(e,t){return(e==="enter"?cye:dye)(t)}const pye=["dd","dl","dt","h1","h2","h3","h4","h5","h6","sub","sup","animate","animatetransform","circle","clippath","defs","ellipse","g","image","line","lineargradient","marker","mask","path","pattern","polygon","polyline","radialgradient","rect","stop","svg","switch","symbol","text","textpath","tspan","use"],fye=pye.reduce((e,t)=>(e[t]=[],e),{}),mye=["align","alink","alt","bgcolor","border","cellpadding","cellspacing","class","color","cols","colspan","coords","d","dir","face","height","hspace","ismap","lang","marginheight","marginwidth","multiple","nohref","noresize","noshade","nowrap","ref","rel","rev","rows","rowspan","scrolling","shape","span","summary","tabindex","title","usemap","valign","value","vlink","vspace","width"],JG=new oye({whiteList:fye,onTagAttr:(e,t,r)=>{const n=`${t}="${r}"`;if(mye.includes(t))return n},stripIgnoreTag:!0,stripIgnoreTagBody:["script","style"]},!0);function yye(e,t){const r=e.getBoundingClientRect(),n=t.getBoundingClientRect(),i=r.top+r.height,s=n.top+n.height,o=r.top,a=n.top;(i>s||o<a)&&e.scrollIntoView({block:"end"})}function QG(e){return e==="Enter"||e===" "}const YG="http://www.w3.org/",I2=`${YG}2000/svg`,KG=`${YG}1999/xlink`;let GD=[],KR=(e,t)=>{let r={};return Object.keys(e).forEach(n=>{r[n]=e[n]}),t&&Object.keys(t).forEach(n=>{r[n]=t[n]}),r},XR=(e,t)=>e.vnodeSelector===t.vnodeSelector&&(e.properties&&t.properties?e.properties.key===t.properties.key&&e.properties.bind===t.properties.bind:!e.properties&&!t.properties),XG=e=>{if(typeof e!="string")throw new Error("Style values must be strings")},gye=(e,t,r)=>{if(t.vnodeSelector!==""){for(let n=r;n<e.length;n++)if(XR(e[n],t))return n}return-1},uT=(e,t,r,n)=>{let i=e[t];if(i.vnodeSelector==="")return;let s=i.properties;if(!(s&&(s.key===void 0?s.bind:s.key))){for(let o=0;o<e.length;o++)if(o!==t){let a=e[o];if(XR(a,i))throw new Error(`${r.vnodeSelector} had a ${i.vnodeSelector} child ${n==="added"?n:"removed"}, but there is now more than one. You must add unique key properties to make them distinguishable.`)}}},vye=e=>{if(e.properties){let t=e.properties.enterAnimation;t&&t(e.domNode,e.properties)}},EC=[],MC=!1,eB=e=>{(e.children||[]).forEach(eB),e.properties&&e.properties.afterRemoved&&e.properties.afterRemoved.apply(e.properties.bind||e.properties,[e.domNode])},BD=()=>{MC=!1,EC.forEach(eB),EC.length=0},qD=e=>{EC.push(e),MC||(MC=!0,typeof window<"u"&&"requestIdleCallback"in window?window.requestIdleCallback(BD,{timeout:16}):setTimeout(BD,16))},WD=e=>{let t=e.domNode;if(e.properties){let r=e.properties.exitAnimation;if(r)return t.style.pointerEvents="none",void r(t,()=>{t.parentNode&&(t.parentNode.removeChild(t),qD(e))},e.properties)}t.parentNode&&(t.parentNode.removeChild(t),qD(e))},wye=(e,t,r)=>{if(!t)return;let n=r.eventHandlerInterceptor,i=Object.keys(t),s=i.length;for(let o=0;o<s;o++){let a=i[o],l=t[a];if(a==="className")throw new Error('Property "className" is not supported, use "class".');if(a==="class")IC(e,l,!0);else if(a==="classes"){let c=Object.keys(l),h=c.length;for(let f=0;f<h;f++){let m=c[f];l[m]&&e.classList.add(m)}}else if(a==="styles"){let c=Object.keys(l),h=c.length;for(let f=0;f<h;f++){let m=c[f],y=l[m];y&&(XG(y),r.styleApplyer(e,m,y))}}else if(a!=="key"&&l!=null){let c=typeof l;c==="function"?(a.lastIndexOf("on",0)===0&&(n&&(l=n(a,l,e,t)),a==="oninput"&&function(){let h=l;l=function(f){h.apply(this,[f]),f.target["oninput-value"]=f.target.value}}()),e[a]=l):r.namespace===I2?a==="href"?e.setAttributeNS(KG,a,l):e.setAttribute(a,l):c==="string"&&a!=="value"?a==="innerHTML"?e[a]=JG.sanitize(l):tB(e)&&a in e?e[a]=l:e.setAttribute(a,l):e[a]=l}}};function tB(e){if(!(e instanceof Element&&e.tagName.includes("-")))return!1;const t=window.customElements.get(e.tagName.toLowerCase());return!!t&&e instanceof t}let HS,_ye=(e,t,r)=>{if(t)for(let n of t)jf(n,e,void 0,r)},rB=(e,t,r)=>{_ye(e,t.children,r),t.text&&(e.textContent=t.text),wye(e,t.properties,r),t.properties&&t.properties.afterCreate&&t.properties.afterCreate.apply(t.properties.bind||t.properties,[e,r,t.vnodeSelector,t.properties,t.children])},jf=(e,t,r,n)=>{let i,s=0,o=e.vnodeSelector,a=t.ownerDocument;if(o==="")i=e.domNode=a.createTextNode(e.text),r!==void 0?t.insertBefore(i,r):t.appendChild(i);else{for(let l=0;l<=o.length;++l){let c=o.charAt(l);if(l===o.length||c==="."||c==="#"){let h=o.charAt(s-1),f=o.slice(s,l);h==="."?i.classList.add(f):h==="#"?i.id=f:(f==="svg"&&(n=KR(n,{namespace:I2})),n.namespace!==void 0?i=e.domNode=a.createElementNS(n.namespace,f):(i=e.domNode=e.domNode||a.createElement(f),f==="input"&&e.properties&&e.properties.type!==void 0&&i.setAttribute("type",e.properties.type)),r!==void 0?t.insertBefore(i,r):i.parentNode!==t&&t.appendChild(i)),s=l+1}}rB(i,e,n)}},IC=(e,t,r)=>{t&&t.split(" ").forEach(n=>{n&&e.classList.toggle(n,r)})},bye=(e,t,r,n)=>{if(!r)return;let i=!1,s=Object.keys(r),o=s.length;for(let a=0;a<o;a++){let l=s[a],c=r[l],h=t[l];if(l==="class")h!==c&&(IC(e,h,!1),IC(e,c,!0));else if(l==="classes"){let f=e.classList,m=Object.keys(c),y=m.length;for(let g=0;g<y;g++){let v=m[g],w=!!c[v];w!==!!h[v]&&(i=!0,w?f.add(v):f.remove(v))}}else if(l==="styles"){let f=Object.keys(c),m=f.length;for(let y=0;y<m;y++){let g=f[y],v=c[g];v!==h[g]&&(i=!0,v?(XG(v),n.styleApplyer(e,g,v)):n.styleApplyer(e,g,""))}}else if(c||typeof h!="string"||(c=""),l==="value"){let f=e[l];f!==c&&(e["oninput-value"]?f===e["oninput-value"]:c!==h)&&(e[l]=c,e["oninput-value"]=void 0),c!==h&&(i=!0)}else if(c!==h){let f=typeof c;f==="function"&&n.eventHandlerInterceptor||(n.namespace===I2?l==="href"?e.setAttributeNS(KG,l,c):e.setAttribute(l,c):f==="string"?l==="innerHTML"?e[l]=JG.sanitize(c):l==="role"&&c===""?e.removeAttribute(l):tB(e)&&l in e?e[l]=c:e.setAttribute(l,c):e[l]!==c&&(e[l]=c),i=!0)}}return i},Sye=(e,t,r,n,i)=>{if(r===n)return!1;n=n||GD;let s,o=(r=r||GD).length,a=n.length,l=0,c=0,h=!1;for(;c<a;){let f=l<o?r[l]:void 0,m=n[c];if(f!==void 0&&XR(f,m))h=HS(f,m,i)||h,l++;else{let y=gye(r,m,l+1);if(y>=0){for(s=l;s<y;s++)WD(r[s]),uT(r,s,e,"removed");h=HS(r[y],m,i)||h,l=y+1}else jf(m,t,l<o?r[l].domNode:void 0,i),vye(m),uT(n,c,e,"added")}c++}if(o>l)for(s=l;s<o;s++)WD(r[s]),uT(r,s,e,"removed");return h};HS=(e,t,r)=>{let n=e.domNode,i=!1;if(e===t)return!1;let s=!1;if(t.vnodeSelector===""){if(t.text!==e.text){let o=n.ownerDocument.createTextNode(t.text);return n.parentNode.replaceChild(o,n),t.domNode=o,i=!0,i}t.domNode=n}else t.vnodeSelector.lastIndexOf("svg",0)===0&&(r=KR(r,{namespace:I2})),e.text!==t.text&&(s=!0,t.text===void 0?n.removeChild(n.firstChild):n.textContent=t.text),t.domNode=n,s=Sye(t,n,e.children,t.children,r)||s,s=bye(n,e.properties,t.properties,r)||s,t.properties&&t.properties.afterUpdate&&t.properties.afterUpdate.apply(t.properties.bind||t.properties,[n,r,t.vnodeSelector,t.properties,t.children]);return s&&t.properties&&t.properties.updateAnimation&&t.properties.updateAnimation(n,t.properties,e.properties),i};let Vy=(e,t)=>({getLastRender:()=>e,update:r=>{if(e.vnodeSelector!==r.vnodeSelector)throw new Error("The selector for the root VNode may not be changed. (consider using dom.merge and add one extra level to the virtual DOM)");let n=e;e=r,HS(n,r,t)},domNode:e.domNode});const xye={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(e,t,r)=>{t.charAt(0)==="-"?e.style.setProperty(t,r):e.style[t]=r}};let Kp=e=>KR(xye,e),Rc={create:(e,t)=>(t=Kp(t),jf(e,document.createElement("div"),void 0,t),Vy(e,t)),append:(e,t,r)=>(r=Kp(r),jf(t,e,void 0,r),Vy(t,r)),insertBefore:(e,t,r)=>(r=Kp(r),jf(t,e.parentNode,e,r),Vy(t,r)),merge:(e,t,r)=>(r=Kp(r),t.domNode=e,rB(e,t,r),Vy(t,r)),replace:(e,t,r)=>(r=Kp(r),jf(t,e.parentNode,e,r),e.parentNode.removeChild(e),Vy(t,r))},nB,$ye=(e,t)=>{let r=[];for(;e&&e!==t;)r.push(e),e=e.parentNode;return r};nB=Array.prototype.find?(e,t)=>e.find(t):(e,t)=>e.filter(t)[0];let Tye=(e,t)=>{let r=e;return t.forEach(n=>{r=r&&r.children?nB(r.children,i=>i.domNode===n):void 0}),r},Eye=(e,t,r)=>{let n=function(i){r("domEvent",i);let s=t(),o=$ye(i.currentTarget,s.domNode);o.reverse();let a,l=Tye(s.getLastRender(),o);return e.scheduleRender(),l&&(a=l.properties[`on${i.type}`].apply(l.properties.bind||this,arguments)),r("domEventProcessed",i),a};return(i,s,o,a)=>n},HD=e=>{let t,r,n=Kp(e),i=n.performanceLogger,s=!0,o=!1,a=[],l=[],c=(f,m,y)=>{let g,v=()=>g;n.eventHandlerInterceptor=Eye(t,v,i),g=f(m,y(),n),a.push(g),l.push(y)},h=()=>{if(r=void 0,s){s=!1,i("renderStart",void 0);for(let f=0;f<a.length;f++){let m=l[f]();i("rendered",void 0),a[f].update(m),i("patched",void 0)}i("renderDone",void 0),s=!0}};return t={renderNow:h,scheduleRender:()=>{r||o||(r=requestAnimationFrame(h))},stop:()=>{r&&(cancelAnimationFrame(r),r=void 0),o=!0},resume:()=>{o=!1,s=!0,t.scheduleRender()},append:(f,m)=>{c(Rc.append,f,m)},insertBefore:(f,m)=>{c(Rc.insertBefore,f,m)},merge:(f,m)=>{c(Rc.merge,f,m)},replace:(f,m)=>{c(Rc.replace,f,m)},detach:f=>{for(let m=0;m<l.length;m++)if(l[m]===f)return l.splice(m,1),a.splice(m,1)[0];throw new Error("renderFunction was not found")}},t},qu=class extends $e{constructor(){super(...arguments),this.items=new Le,this._watchUpdatingTracking=new im,this._callbacks=new Map,this._projector=HD(),this._hiddenProjector=HD()}get needsRender(){return this.items.length>0}get updating(){var t;return((t=this._watchUpdatingTracking)==null?void 0:t.updating)??!1}initialize(){const t=document.createElement("div");t.className="esri-overlay-surface",this._set("surface",t),this._hiddenSurface=document.createElement("div"),this._hiddenSurface.setAttribute("style","visibility: hidden;"),t.appendChild(this._hiddenSurface),this._watchUpdatingTracking.addOnCollectionChange(()=>this.items,r=>{for(const n of r.added){const i=()=>n.render();this._callbacks.set(n,i),this._projector.append(this.surface,i)}for(const n of r.removed){const i=this._projector.detach(this._callbacks.get(n));this.surface.removeChild(i.domNode),this._callbacks.delete(n)}})}addItem(t){this.items.add(t)}removeItem(t){this.items.remove(t)}destroy(){this.items.removeAll(),this._callbacks.forEach(t=>this._projector.detach(t)),this._callbacks=null,this._projector=null,this._watchUpdatingTracking.destroy()}render(){this._projector.renderNow()}computeBoundingRect(t){const r=this._hiddenSurface,n=this._hiddenProjector;let i;const s=()=>(i=t.render(),i);n.append(r,s),n.renderNow();const o={left:0,top:0,right:0,bottom:0};if(i&&i.domNode){const a=i.domNode.getBoundingClientRect();o.left=a.left,o.top=a.top,o.right=a.right,o.bottom=a.bottom}for(n.detach(s);r.firstChild;)r.removeChild(r.firstChild);return o}overlaps(t,r){const n=this.computeBoundingRect(t),i=this.computeBoundingRect(r);return Math.max(n.left,i.left)<=Math.min(n.right,i.right)&&Math.max(n.top,i.top)<=Math.min(n.bottom,i.bottom)}get hasVisibleItems(){return this.items.some(t=>t.visible)}async prepare(){await document.fonts.load(this._fontString()).catch(()=>{})}renderCanvas(t){if(!this.items.some(n=>n.visible))return;const r=t.getContext("2d");r.save(),r.font=this._fontString(),this.items.forEach(n=>{r.save(),n.renderCanvas(r),r.restore()}),r.restore()}_fontString(){return`10px ${getComputedStyle(this.surface).fontFamily}`}};u([d({readOnly:!0})],qu.prototype,"surface",void 0),u([d({readOnly:!0})],qu.prototype,"items",void 0),u([d({readOnly:!0})],qu.prototype,"needsRender",null),u([d({readOnly:!0})],qu.prototype,"_watchUpdatingTracking",void 0),u([d({readOnly:!0})],qu.prototype,"updating",null),qu=u([E("esri.views.overlay.ViewOverlay")],qu);const ZD=qu,cT=[0,0];function Mye(e){const t=(e.ownerDocument||window.document).defaultView,r=e.getBoundingClientRect();return cT[0]=r.left+((t==null?void 0:t.pageXOffset)??0),cT[1]=r.top+((t==null?void 0:t.pageYOffset)??0),cT}function JD(e){e&&(kG(e),e.parentNode&&e.parentNode.removeChild(e))}function Iye(e){const t=document.createElement("div");return e.appendChild(t),t}const zy=16,$w=750,Cye=512,kye=2,Pye=e=>{let t=class extends e{constructor(...r){super(...r),this._freqInfo={freq:zy,time:$w},this._overlayRenderTaskHandle=null,this.height=0,this.overlay=null,this.position=null,this.resizing=!1,this.root=null,this.surface=null,this.suspended=!0,this.ui=null,this.userContent=null,this.width=0,this.widthBreakpoint=null,this.addHandles([Ee(()=>this.cursor,n=>{const{surface:i}=this;i&&i.setAttribute("data-cursor",n)}),Ee(()=>this.navigating,n=>{const{surface:i}=this;i&&i.setAttribute("data-navigating",n.toString())})])}initialize(){this.addHandles([Ee(()=>this.ui,(r,n)=>this._handleUIChange(r,n),Ir),this.on("focus",()=>this.notifyChange("focused")),this.on("blur",()=>this.notifyChange("focused"))])}destroy(){this.destroyed||(this.ui=Gt(this.ui),this.container=null)}get container(){return this._get("container")??null}set container(r){const n=this._get("container"),i=QR(r);if(i||typeof r!="string"||Z.getLogger(this).error("#container",`element with id '${r}' not found`),n===i)return;if(this._stopMeasuring(),n&&(n.classList.remove("esri-view"),this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null),this.overlay&&(this.overlay.destroy(),this._set("overlay",null)),this.root&&(JD(this.root),this._set("root",null)),this.userContent&&(FD(this.userContent,n),JD(this.userContent),this._set("userContent",null))),!i)return this._set("width",0),this._set("height",0),this._set("position",null),this._set("suspended",!0),this._set("surface",null),void this._set("container",null);i.classList.add("esri-view");const s=document.createElement("div");s.className="esri-view-user-storage",FD(i,s),i.appendChild(s),this._set("userContent",s);const o=document.createElement("div");o.className="esri-view-root",i.insertBefore(o,i.firstChild),this._set("root",o);const a=document.createElement("div");a.className="esri-view-surface",a.setAttribute("role","application"),a.tabIndex=0,o.appendChild(a),this._set("surface",a);const l=new ZD;o.appendChild(l.surface),this._set("overlay",l),this.addHandles(Ee(()=>l.needsRender,c=>{c&&!this._overlayRenderTaskHandle?this._overlayRenderTaskHandle=xm({render:()=>{var h;return(h=this.overlay)==null?void 0:h.render()}}):this._overlayRenderTaskHandle=or(this._overlayRenderTaskHandle)})),this.forceDOMReadyCycle(),this._set("container",i),this._startMeasuring()}get focused(){const r=document.activeElement===this.surface;return document.hasFocus()&&r}get size(){return[this.width,this.height]}blur(){var r;(r=this.surface)==null||r.blur()}focus(){var r;(r=this.surface)==null||r.focus()}pageToContainer(r,n,i){const s=this.position;return r-=s?s[0]:0,n-=s?s[1]:0,i?(i[0]=r,i[1]=n):i=[r,n],i}containerToPage(r,n,i){const s=this.position;return r+=s?s[0]:0,n+=s?s[1]:0,i?(i[0]=r,i[1]=n):i=[r,n],i}_handleUIChange(r,n){this.removeHandles("ui"),n&&n!==r&&n.destroy(),r&&(r.view=this,this.addHandles(Ee(()=>this.root,i=>{r.container=i?Iye(i):null},Ir),"ui")),this._set("ui",r)}_stopMeasuring(){this.removeHandles("measuring"),this._get("resizing")&&this._set("resizing",!1)}_startMeasuring(){const r=this._freqInfo;r.freq=zy,r.time=$w,this.addHandles([(()=>{const n=()=>{r.freq=zy,r.time=$w};return window.addEventListener("resize",n),{remove(){window.removeEventListener("resize",n)}}})(),xm({prepare:n=>{const i=this._measure(),s=this._freqInfo;if(s.time+=n.deltaTime,i&&(s.freq=zy,this._get("resizing")||this._set("resizing",!0)),s.time<s.freq)return;s.time=0;const o=this._position();s.freq=o||i?zy:Math.min($w,s.freq*kye),!i&&s.freq>=Cye&&this._get("resizing")&&this._set("resizing",!1)}})],"measuring"),this._measure(),this._position()}_measure(){const r=this.container,n=r?r.clientWidth:0,i=r?r.clientHeight:0;if(n===0||i===0)return this.suspended||this._set("suspended",!0),!1;const s=this.width,o=this.height;return n===s&&i===o?(this.suspended&&this._set("suspended",!1),!1):(this._set("width",n),this._set("height",i),this.suspended&&this._set("suspended",!1),this.emit("resize",{oldWidth:s,oldHeight:o,width:n,height:i}),!0)}_position(){const r=this.container,n=this.position,i=r&&Mye(r);return!!i&&(!n||i[0]!==n[0]||i[1]!==n[1])&&(this._set("position",[i[0],i[1]]),!0)}forceDOMReadyCycle(){}};return u([d()],t.prototype,"container",null),u([d({readOnly:!0})],t.prototype,"focused",null),u([d({readOnly:!0})],t.prototype,"height",void 0),u([d({type:ZD})],t.prototype,"overlay",void 0),u([d({readOnly:!0})],t.prototype,"position",void 0),u([d({readOnly:!0})],t.prototype,"resizing",void 0),u([d({readOnly:!0})],t.prototype,"root",void 0),u([d({value:null,readOnly:!0})],t.prototype,"size",null),u([d({readOnly:!0})],t.prototype,"surface",void 0),u([d({readOnly:!0})],t.prototype,"suspended",void 0),u([d()],t.prototype,"ui",void 0),u([d({readOnly:!0})],t.prototype,"userContent",void 0),u([d({readOnly:!0})],t.prototype,"width",void 0),u([d()],t.prototype,"widthBreakpoint",void 0),t=u([E("esri.views.DOMContainer")],t),t};let Oye=class{constructor(t,r){this._owner=r,this._properties={},this._afterDispatchHandle=null;for(const n in t){const i=t[n],s=new CV(i,void 0,void 0,2,2);this._properties[n]={pool:s,acquired:[]}}this._afterDispatchHandle=Kre(()=>this._release())}destroy(){this._afterDispatchHandle&&(this._afterDispatchHandle.remove(),this._afterDispatchHandle=null);for(const t in this._properties){const r=this._properties[t];for(const n of r.acquired)eN(n)||r.pool.release(n);r.pool.destroy(),r.pool=null,r.acquired=null}this._properties=null,this._owner=null}get(t){const r=this._owner._get(t),n=this._properties[t];let i=n.pool.acquire();for(n.acquired.push(i);i===r;)n.acquired.push(i),i=n.pool.acquire();return i}_release(){for(const t in this._properties){const r=this._properties[t];let n=0;for(const i of r.acquired)eN(i)?r.acquired[n++]=i:r.pool.release(i);r.acquired.length=n}}};const Rye=V("mac")?"Meta":"Ctrl",C2={8:"Backspace",9:"Tab",13:"Enter",27:"Escape",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete"};for(let e=48;e<58;e++)C2[e]=String.fromCharCode(e);for(let e=1;e<25;e++)C2[111+e]=`F${e}`;for(let e=65;e<91;e++)C2[e]=[String.fromCharCode(e+32),String.fromCharCode(e)];function Aye(e){if(e.key!==void 0)return s0(e);const t=C2[e.keyCode];return Array.isArray(t)?e.shiftKey?t[1]:t[0]:t}function Lye(e){switch(e){case"Ctrl":case"Alt":case"Shift":case"Meta":case"Primary":return!0}return!1}let Nye=class{constructor(t,r=[]){this.eventType=t,this.keyModifiers=r}matches(t){if(t.type!==this.eventType)return!1;if(this.keyModifiers.length===0)return!0;const r=t.modifiers;for(const n of this.keyModifiers)if(!r.has(n))return!1;return!0}};const QD=Z.getLogger("esri.views.input.InputHandler");let en=class{constructor(t){this._manager=null,this._incoming={},this._outgoing={},this._incomingEventMatches=null,this._incomingEventTypes=null,this._outgoingEventTypes=null,this._hasSideEffects=t}get incomingEventMatches(){if(!this._incomingEventMatches){this._incomingEventMatches=[];for(const t in this._incoming){const r=this._incoming[t];for(const n of r)this._incomingEventMatches.push(n.match)}}return this._incomingEventMatches}get incomingEventTypes(){return this._incomingEventTypes||(this._incomingEventTypes=this.incomingEventMatches.map(t=>t.eventType)),this._incomingEventTypes}get outgoingEventTypes(){return this._outgoingEventTypes||(this._outgoingEventTypes=Object.keys(this._outgoing)),this._outgoingEventTypes}get hasSideEffects(){return this._hasSideEffects}get hasPendingInputs(){return!1}onInstall(t){this._manager?QD.error("This InputHandler has already been registered with an InputManager"):(t.setEventCallback(r=>this._handleEvent(r)),t.setUninstallCallback(()=>this._onUninstall()),this._manager=t)}onUninstall(){}registerIncoming(t,r,n){let i;typeof r=="function"?(n=r,i=[]):i=r||[];const s=typeof t=="string"?new Nye(t,i):t,o=()=>{this._incomingEventTypes=null,this._incomingEventMatches=null},a=h=>{const f=this._incoming[h.match.eventType];if(f){const m=f.indexOf(h);f.splice(m,1),o(),this._manager&&this._manager.updateDependencies()}},l=new Dye(s,n,{onPause:a,onRemove:a,onResume:h=>{const f=this._incoming[h.match.eventType];f&&!f.includes(h)&&(f.push(h),o(),this._manager&&this._manager.updateDependencies())}});let c=this._incoming[s.eventType];return c||(c=[],this._incoming[s.eventType]=c),c.push(l),o(),this._manager&&this._manager.updateDependencies(),l}registerOutgoing(t){if(this._outgoing[t])throw new Error("There is already a callback registered for this outgoing InputEvent: "+t);const r=new Fye(t,{onEmit:(n,i,s,o)=>{var a;(a=this._manager)==null||a.emit(n.eventType,i,s,o)},onRemove:n=>{var i;delete this._outgoing[n.eventType],(i=this._manager)==null||i.updateDependencies()}});return this._outgoing[t]=r,this._outgoingEventTypes=null,this._manager&&this._manager.updateDependencies(),r}startCapturingPointer(t){var r;(r=this._manager)==null||r.setPointerCapture(t,!0)}stopCapturingPointer(t){var r;(r=this._manager)==null||r.setPointerCapture(t,!1)}refreshHasPendingInputs(){var t;(t=this._manager)==null||t.refreshHasPendingInputs()}_onUninstall(){this._manager?(this.onUninstall(),this._manager=null):QD.error("This InputHandler is not registered with an InputManager")}_handleEvent(t){var n;const r=this._incoming[t.type];if(r){for(const i of r)if(i.match.matches(t)&&((n=i.callback)==null||n.call(i,t),t.shouldStopPropagation()))break}}},Dye=class{constructor(t,r,n){this.match=t,this._callback=r,this._handler=n}pause(){this._handler.onPause(this)}resume(){this._handler.onResume(this)}remove(){this._handler.onRemove(this)}get callback(){return this._callback}},Fye=class{constructor(t,r){this.eventType=t,this._removed=!1,this._handler=r}emit(t,r,n){this._removed||this._handler.onEmit(this,t,r,n)}remove(){this._removed=!0,this._handler.onRemove(this)}},jye=class extends en{constructor(t){super(!0),this._onChange=t,this._value="mouse",this._x=null,this._y=null,this.registerIncoming("pointer-move",r=>{this._update(r.data)})}_update(t){const r=t.native.pointerType==="touch"?"touch":"mouse",{x:n,y:i}=t;r===this._value&&this._x===n&&this._y===i||(this._value=r,this._x=n,this._y=i,this._onChange(r,n,i))}},Vye=class{constructor(t,r){this._observable=new i2,this._value=t,this._equalityFunction=r}get value(){return Ve(this._observable),this._value}set value(t){this._equalityFunction(t,this._value)||(this._value=t,this._observable.notify())}mutate(t){t(this._value),this._observable.notify()}};function ZS(e,t=hV){return new Vye(e,t)}let zye=class extends en{get multiTouchActive(){return this._multiTouchActive.value}constructor(){super(!0),this._activeTouchPointerIds=new Set,this._multiTouchActive=ZS(!1),this._onPointerAdd=({data:t})=>{t.pointerType==="touch"&&(this._activeTouchPointerIds.add(t.native.pointerId),this._update())},this._onPointerRemove=({data:t})=>{t.pointerType==="touch"&&(this._activeTouchPointerIds.delete(t.native.pointerId),this._update())},this.registerIncoming("pointer-down",this._onPointerAdd),this.registerIncoming("pointer-up",this._onPointerRemove),this.registerIncoming("pointer-capture-lost",this._onPointerRemove),this.registerIncoming("pointer-cancel",this._onPointerRemove)}_update(){this._multiTouchActive.value=this._activeTouchPointerIds.size>1}},gs=class extends $e{constructor(t){super(t),this._pointerCaptures=new Map,this._nameToGroup={},this._handlers=[],this._handlersPriority=[],this._currentPropagation=null,this._updateDependenciesAfterPropagation=!1,this._sourceEvents=new Set,this._keyModifiers=new Set,this._activeKeyModifiers=new Set,this._stoppedPropagationEventIds=new Set,this.primaryKey=Rye,this._latestPointerType="mouse",this._propertiesPool=new Oye({latestPointerLocation:Bye},this),this.latestPointerLocation=null,this._paused=!1,this.test={timestamp:void 0,hasCurrentPropagation:()=>!!this._currentPropagation}}initialize(){this.eventSource.onEventReceived=this._onEventReceived.bind(this),this._installRecognizers()}destroy(){const t=Object.keys(this._nameToGroup);for(const r of t)this.uninstallHandlers(r);this.eventSource.destroy(),this._currentPropagation=null,this._propertiesPool.destroy()}get hasPendingInputs(){return this._handlers.some(t=>t.handler.hasPendingInputs)}get latestPointerType(){return this._latestPointerType}get multiTouchActive(){return this._multiTouchHandler.multiTouchActive}get updating(){return this.hasPendingInputs||this._paused}installHandlers(t,r,n=Gc.INTERNAL){if(this._nameToGroup[t])return void Z.getLogger(this).error("There is already an InputHandler group registered under the name `"+t+"`");if(r.length===0)return void Z.getLogger(this).error("Can't register a group of zero handlers");const i={name:t,handlers:r.map(s=>({handler:s,active:!0,removed:!1,priorityIndex:0,groupPriority:n,eventCallback:null,uninstallCallback:null}))};this._nameToGroup[t]=i;for(let s=i.handlers.length-1;s>=0;s--){const o=i.handlers[s];this._handlers.push(o),o.handler.onInstall({updateDependencies:()=>{this.updateDependencies()},emit:(a,l,c,h,f)=>{this._emitInputEvent(o.priorityIndex+1,a,l,c,f,h)},setPointerCapture:(a,l)=>{this._setPointerCapture(i,o,a,l)},setEventCallback:a=>{o.eventCallback=a},setUninstallCallback:a=>{o.uninstallCallback=a},refreshHasPendingInputs:()=>{this.notifyChange("hasPendingInputs")}})}this.updateDependencies()}uninstallHandlers(t){const r=this._nameToGroup[t];r?(r.handlers.forEach(n=>{var i;n.removed=!0,(i=n.uninstallCallback)==null||i.call(n)}),delete this._nameToGroup[t],this._currentPropagation?this._currentPropagation.needsHandlerGarbageCollect=!0:this._garbageCollectRemovedHandlers()):Z.getLogger(this).error("There is no InputHandler group registered under the name `"+t+"`")}hasHandlers(t){return this._nameToGroup[t]!==void 0}updateDependencies(){if(this._currentPropagation)return void(this._updateDependenciesAfterPropagation=!0);this._updateDependenciesAfterPropagation=!1;const t=new Set,r=new Set;this._handlersPriority=[];for(let n=this._handlers.length-1;n>=0;n--){const i=this._handlers[n];i.priorityIndex=n,this._handlersPriority.push(i)}this._handlersPriority=this._sortHandlersPriority(this._handlersPriority);for(let n=this._handlersPriority.length-1;n>=0;n--){const i=this._handlersPriority[n];i.priorityIndex=n;let s=i.handler.hasSideEffects;if(!s){for(const o of i.handler.outgoingEventTypes)if(t.has(o)){s=!0;break}}if(s)for(const o of i.handler.incomingEventMatches){t.add(o.eventType);for(const a of o.keyModifiers)Lye(a)||r.add(a)}i.active=s}this._sourceEvents=t,this._keyModifiers=r,this._pointerCaptures.size>0&&this._sourceEvents.add("pointer-capture-lost"),this._keyModifiers.size>0&&(this._sourceEvents.add("key-down"),this._sourceEvents.add("key-up")),this.eventSource&&(this.eventSource.activeEvents=this._sourceEvents)}_setLatestPointer(t,r,n){this._latestPointerType=t;const i=this._get("latestPointerLocation");if(i==null||i.x!==r||i.y!==n){const s=this._propertiesPool.get("latestPointerLocation");s.x=r,s.y=n,this._set("latestPointerLocation",s)}}_onEventReceived(t,r){if(t==="pointer-capture-lost"){const s=r;this._pointerCaptures.delete(s.native.pointerId)}this._updateKeyModifiers(t,r);const n=this.test.timestamp!=null?this.test.timestamp:r.native?r.native.timestamp:void 0,i=r.native?r.native.cancelable:void 0;this._emitInputEventFromSource(t,r,n,i)}_updateKeyModifiers(t,r){if(!r)return;let n=!1;const i=()=>{if(!n){const a=new Set;this._activeKeyModifiers.forEach(l=>{a.add(l)}),this._activeKeyModifiers=a,n=!0}},s=(a,l)=>{l&&!this._activeKeyModifiers.has(a)?(i(),this._activeKeyModifiers.add(a)):!l&&this._activeKeyModifiers.has(a)&&(i(),this._activeKeyModifiers.delete(a))};if(t==="key-down"||t==="key-up"){const a=r.key;this._keyModifiers.has(a)&&s(a,t==="key-down")}const o=r.native;s("Alt",!(!o||!o.altKey)),s("Ctrl",!(!o||!o.ctrlKey)),s("Shift",!(!o||!o.shiftKey)),s("Meta",!(!o||!o.metaKey)),s("Primary",this._activeKeyModifiers.has(this.primaryKey))}_installRecognizers(){this._latestPointerHandler=new jye((t,r,n)=>this._setLatestPointer(t,r,n)),this._multiTouchHandler=new zye,this.installHandlers("input-manager-logic",[this._latestPointerHandler,this._multiTouchHandler],Gc.ALWAYS),this.recognizers.length>0&&this.installHandlers("default",this.recognizers,Gc.INTERNAL)}_setPointerCapture(t,r,n,i){const s=t.name+"-"+r.priorityIndex,o=this._pointerCaptures.get(n.pointerId)||new Set;this._pointerCaptures.set(n.pointerId,o),i?(o.add(s),o.size===1&&this.eventSource&&this.eventSource.setPointerCapture(n,!0)):o.has(s)&&(o.delete(s),o.size===0&&(this._pointerCaptures.delete(n.pointerId),this.eventSource&&this.eventSource.setPointerCapture(n,!1)))}_garbageCollectRemovedHandlers(){this._handlers=this._handlers.filter(t=>!t.removed),this.updateDependencies()}_emitInputEventFromSource(t,r,n,i){this._emitInputEvent(0,t,r,n,i)}_emitInputEvent(t,r,n,i,s,o){const a=i!==void 0?i:this._currentPropagation?this._currentPropagation.timestamp:performance.now(),l=s!==void 0&&s,c={event:new Uye(r,n,a,o||this._activeKeyModifiers,l),priorityIndex:t};this._currentPropagation?this._currentPropagation.events.push(c):this._doNewPropagation(c)}_doNewPropagation(t){this._currentPropagation={events:new US,currentHandler:null,needsHandlerGarbageCollect:!1,timestamp:t.event.timestamp},this._currentPropagation.events.push(t),this._continuePropagation()}_continuePropagation(){var r,n;this._paused=!1;const t=this._currentPropagation;if(t){for(;t.events.length>0;){const{event:i,priorityIndex:s}=t.events.pop(),o=i.data&&i.data.eventId;if(!(o!=null&&this._stoppedPropagationEventIds.has(o)))for(t.currentHandler=this._handlersPriority[s];t.currentHandler;){if(t.currentHandler.removed)t.needsHandlerGarbageCollect=!0;else{if(t.currentHandler.active&&!i.shouldStopPropagation()&&((n=(r=t.currentHandler).eventCallback)==null||n.call(r,i)),i.shouldStopPropagation()){o!=null&&this._stoppedPropagationEventIds.add(o);break}if(i.shouldPausePropagation(()=>this._continuePropagation()))return void this._pausePropagation({event:i,priorityIndex:t.currentHandler.priorityIndex+1})}t.currentHandler=this._handlersPriority[t.currentHandler.priorityIndex+1]}}t.needsHandlerGarbageCollect&&this._garbageCollectRemovedHandlers(),this.hasPendingInputs||this._stoppedPropagationEventIds.clear(),this._currentPropagation=null,this._updateDependenciesAfterPropagation&&this.updateDependencies()}}_pausePropagation(t){const r=new US;r.push(t);const n=this._currentPropagation;if(n){for(;n.events.length;)r.push(n.events.pop());n.events=r,n.currentHandler=null,this._paused=!0}}_compareHandlerPriority(t,r){if(t.handler.hasSideEffects!==r.handler.hasSideEffects)return t.handler.hasSideEffects?1:-1;if(t.groupPriority!==r.groupPriority)return t.groupPriority>r.groupPriority?-1:1;for(const n of t.handler.incomingEventMatches)for(const i of r.handler.incomingEventMatches){if(n.eventType!==i.eventType)continue;const s=n.keyModifiers.filter(o=>i.keyModifiers.includes(o));if(s.length===n.keyModifiers.length!=(s.length===i.keyModifiers.length))return n.keyModifiers.length>i.keyModifiers.length?-1:1}return t.priorityIndex>r.priorityIndex?-1:1}_sortHandlersPriority(t){const r=[];for(const n of t){let i=0;for(;i<r.length&&this._compareHandlerPriority(n,r[i])>=0;)i++;r.splice(i,0,n)}return r}get debug(){const t=r=>{const n=this._setPointerCapture;this._setPointerCapture=()=>{},r(),this._setPointerCapture=n};return{injectEvent:(r,n)=>{t(()=>{this._onEventReceived(r,n)})},disablePointerCapture:t}}};u([d({readOnly:!0})],gs.prototype,"hasPendingInputs",null),u([d({constructOnly:!0})],gs.prototype,"eventSource",void 0),u([d({constructOnly:!0})],gs.prototype,"recognizers",void 0),u([d()],gs.prototype,"_latestPointerType",void 0),u([d()],gs.prototype,"latestPointerType",null),u([d()],gs.prototype,"multiTouchActive",null),u([d({readOnly:!0})],gs.prototype,"latestPointerLocation",void 0),u([d()],gs.prototype,"_paused",void 0),u([d({readOnly:!0})],gs.prototype,"updating",null),gs=u([E("esri.views.input.InputManager")],gs);let Uye=class{constructor(t,r,n,i,s){this.type=t,this.data=r,this.timestamp=n,this.modifiers=i,this.cancelable=s,this._propagationState=pc.NONE,this._resumeCallback=null}stopPropagation(){this._propagationState|=pc.STOPPED}shouldStopPropagation(){return(this._propagationState&pc.STOPPED)!=0}async(t){this._propagationState|=pc.PAUSED;const r=(n,i)=>{this._propagationState&=~pc.PAUSED;const s=this._resumeCallback;if(this._resumeCallback=null,s&&s(),i)throw n;return n};return(typeof t=="function"?t():t).then(n=>r(n,!1),n=>r(n,!0))}shouldPausePropagation(t){return!!(this._propagationState&pc.PAUSED)&&(this._resumeCallback=t,!0)}preventDefault(){this.data.native.preventDefault()}};var pc;(function(e){e[e.NONE=0]="NONE",e[e.STOPPED=1]="STOPPED",e[e.PAUSED=2]="PAUSED"})(pc||(pc={}));const Gc={ALWAYS:1,DEFAULT:0,TOOL:-1,WIDGET:-2,INTERNAL:-3};let Gye=class{};const Bye=Gye;function aa(e){return e!=null&&"open"in e&&"declaredClass"in e}function YD(e){return e!=null&&"declaredClass"in e&&"dockOptions"in e}const qye=e=>{let t=class extends e{constructor(){super(...arguments),this._popupSetupTask=null,this.popup={},this.popupEnabled=!0}initialize(){this.addHandles([Ee(()=>[this.ui,this.popup],([r,n],i)=>{const s="popup",o="manual";if(i){const[a,l]=i;a&&aa(l)&&(l.view=null,YD(l)&&a.remove(l,s))}r&&aa(n)&&(n.view=this,YD(n)&&r.add(n,{key:s,position:o,internal:!0}))},Ir),this.on("click",r=>{this.popup&&this.popupEnabled&&(r.pointerType!=="mouse"||r.button===0)&&(!aa(this.popup)&&"autoOpenEnabled"in this.popup&&this.popup.autoOpenEnabled===!1||(aa(this.popup)?this.popup.viewModel.handleViewClick(r):r.async(async()=>{await this.setupPopup(),aa(this.popup)&&!this.destroyed&&this.ready&&this.popupEnabled&&this.popup.viewModel.handleViewClick(r)})))},Gc.WIDGET)]),wv(()=>this.ready&&this.popupEnabled&&!this.updating).then(()=>{ie(()=>import("./Popup-138f2fce.js").then(r=>r.a0),["assets/Popup-138f2fce.js","assets/throttle-7bf02de9.js","assets/ByteSizeUnit-d4757d40.js","assets/AttachmentInfo-e1bbf655.js","assets/widget-bf2c3b1d.js","assets/utils-4dc5c8be.js","assets/utils-010a06e5.js","assets/RelationshipQuery-bf22fff1.js","assets/TopFeaturesQuery-46f43816.js","assets/FeatureLayer-852e78d2.js","assets/FeatureLayerBase-bfa01cb0.js","assets/featureLayerUtils-ac66a8f0.js","assets/editsZScale-4caab792.js","assets/EditBusLayer-7f8ff5e7.js","assets/FeatureEffectLayer-cdba4172.js","assets/FeatureEffect-38c14a64.js","assets/FeatureReductionLayer-d582c2c6.js","assets/clusterUtils-84d6baf1.js","assets/OrderedLayer-05f6586b.js","assets/fieldProperties-237f2853.js","assets/styleUtils-b6b6277d.js"])})}destroy(){this.destroyed||this.closePopup()}async openPopup(r){aa(this.popup)&&this.popup.open(r);try{if(await this.setupPopup(),!this.popup)return void Z.getLogger(this).error(new N("view:null-popup","Popup is null and can't be opened"));this.popup.open(r)}catch{}}closePopup(){var r;(r=this._popupSetupTask)==null||r.abort(),aa(this.popup)&&this.popup.close()}async fetchPopupFeatures(r,n){await this.when();const{location:i,queryArea:s,layerViewsAndGraphics:o,clientOnlyGraphics:a}=await this._prepareFetchPopupFeatures(r,n),l=Promise.resolve(a),c=this._queryLayerPopupFeatures(s,o,n),h=c.map(f=>f.promise);return{location:i,clientOnlyGraphics:a,allGraphicsPromise:Nre([l,...h]).then(f=>Array.from(new Set(f.flat()))),promisesPerLayerView:c}}async setupPopup(){var r;if((r=this._popupSetupTask)==null||r.abort(),this.popup&&!aa(this.popup))return this._popupSetupTask=PO(async n=>{const{default:i}=await ie(()=>import("./Popup-138f2fce.js").then(o=>o.a0),["assets/Popup-138f2fce.js","assets/throttle-7bf02de9.js","assets/ByteSizeUnit-d4757d40.js","assets/AttachmentInfo-e1bbf655.js","assets/widget-bf2c3b1d.js","assets/utils-4dc5c8be.js","assets/utils-010a06e5.js","assets/RelationshipQuery-bf22fff1.js","assets/TopFeaturesQuery-46f43816.js","assets/FeatureLayer-852e78d2.js","assets/FeatureLayerBase-bfa01cb0.js","assets/featureLayerUtils-ac66a8f0.js","assets/editsZScale-4caab792.js","assets/EditBusLayer-7f8ff5e7.js","assets/FeatureEffectLayer-cdba4172.js","assets/FeatureEffect-38c14a64.js","assets/FeatureReductionLayer-d582c2c6.js","assets/clusterUtils-84d6baf1.js","assets/OrderedLayer-05f6586b.js","assets/fieldProperties-237f2853.js","assets/styleUtils-b6b6277d.js"]);if(qt(n),!this.popup||aa(this.popup))return;const s=this.popup;delete s.open,delete s.close,this.popup=new i(s)}),this._popupSetupTask.promise}_queryLayerPopupFeatures(r,n,i){return n.map(({layerView:s,graphics:o})=>{const a={clientGraphics:o,event:i!=null?i.event:void 0,signal:i!=null?i.signal:void 0,defaultPopupTemplateEnabled:i!=null&&!!i.defaultPopupTemplateEnabled},l=s.fetchPopupFeatures(r,a);return{layerView:s,promise:l}})}_isValidPopupGraphic(r,n){return r&&!!r.getEffectivePopupTemplate(n!=null&&n.defaultPopupTemplateEnabled)}async _prepareFetchPopupFeatures(r,n){const{clientGraphics:i,queryArea:s,location:o}=await this._popupHitTestGraphics(r,n),a=this._getFetchPopupLayerViews(),{layerViewsAndGraphics:l,clientOnlyGraphics:c}=this._graphicsPerFetchPopupLayerView(i,a);return{clientOnlyGraphics:c,layerViewsAndGraphics:l,queryArea:s,location:o}}async _popupHitTestGraphics(r,n){const i=await this.popupHitTest(r),s=i.results,o=i.mapPoint,a=s.filter(c=>c.type==="graphic"&&this._isValidPopupGraphic(c.graphic,n)),l=a.length?a[0].mapPoint:null;return{clientGraphics:a.map(c=>c.graphic),queryArea:o,location:o||l}}_getFetchPopupLayerViews(){const r=[];return this.allLayerViews.forEach(n=>{this._isValidPopupLayerView(n)&&r.push(n)}),this.graphicsView!=null&&this._isValidPopupLayerView(this.graphicsView)&&r.push(this.graphicsView),r.reverse()}_isValidPopupLayerView(r){return r!=null&&(!("layer"in r)||!r.suspended)&&"fetchPopupFeatures"in r}_graphicsPerFetchPopupLayerView(r,n){const i=[],s=new Map,o=n.map(a=>{const l=[];return"layer"in a?s.set(a.layer,l):s.set(a.graphics,l),{layerView:a,graphics:l}});for(const a of r){const l=s.get(a.layer)||s.get(a.sourceLayer)||null;l?l.push(a):i.push(a)}return{layerViewsAndGraphics:o,clientOnlyGraphics:i}}};return u([d({cast(r){return!r||aa(r)||typeof r=="object"&&(r.open=n=>(vS(Z.getLogger(this),"view.popup is no longer created by default. view.popup.open() will stop working when the popup isn't created",{replacement:"Use view.openPopup() instead.",version:"4.27"}),this.openPopup(n)),r.close=()=>(vS(Z.getLogger(this),"view.popup is no longer created by default. view.popup.close() will stop working when the popup isn't created",{replacement:"Use view.closePopup() instead.",version:"4.27"}),this.closePopup())),r}})],t.prototype,"popup",void 0),u([d()],t.prototype,"popupEnabled",void 0),t=u([E("esri.views.PopupView")],t),t},KD={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,days:864e5,weeks:6048e5,months:26784e5,years:31536e6,decades:31536e7,centuries:31536e8},Wye={milliseconds:{getter:"getMilliseconds",setter:"setMilliseconds",multiplier:1},seconds:{getter:"getSeconds",setter:"setSeconds",multiplier:1},minutes:{getter:"getMinutes",setter:"setMinutes",multiplier:1},hours:{getter:"getHours",setter:"setHours",multiplier:1},days:{getter:"getDate",setter:"setDate",multiplier:1},weeks:{getter:"getDate",setter:"setDate",multiplier:7},months:{getter:"getMonth",setter:"setMonth",multiplier:1},years:{getter:"getFullYear",setter:"setFullYear",multiplier:1},decades:{getter:"getFullYear",setter:"setFullYear",multiplier:10},centuries:{getter:"getFullYear",setter:"setFullYear",multiplier:100}};function Hye(e,t){const r=new Date(e,t+1,1);return r.setDate(0),r.getDate()}function Uh(e,t,r){const n=new Date(e.getTime());if(t&&r){const i=Wye[r],{getter:s,setter:o,multiplier:a}=i;if(r==="months"){const l=Hye(n.getFullYear(),n.getMonth()+t);n.getDate()>l&&n.setDate(l)}n[o](n[s]()+t*a)}return n}function XD(e,t){switch(t){case"milliseconds":return new Date(e.getTime());case"seconds":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds());case"minutes":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes());case"hours":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours());case"days":return new Date(e.getFullYear(),e.getMonth(),e.getDate());case"weeks":return new Date(e.getFullYear(),e.getMonth(),e.getDate()-e.getDay());case"months":return new Date(e.getFullYear(),e.getMonth(),1);case"years":return new Date(e.getFullYear(),0,1);case"decades":return new Date(e.getFullYear()-e.getFullYear()%10,0,1);case"centuries":return new Date(e.getFullYear()-e.getFullYear()%100,0,1);default:return new Date}}function Zye(e,t,r){return e===0?0:e*KD[t]/KD[r]}var oo;let zi=oo=class extends Q{static get allTime(){return eF}static get empty(){return Jye}constructor(e){super(e),this.end=null,this.start=null}readEnd(e,t){return t.end!=null?new Date(t.end):null}writeEnd(e,t){t.end=e?e.getTime():null}get isAllTime(){return this.equals(oo.allTime)}get isEmpty(){return this.equals(oo.empty)}readStart(e,t){return t.start!=null?new Date(t.start):null}writeStart(e,t){t.start=e?e.getTime():null}clone(){return new oo({end:this.end,start:this.start})}equals(e){if(!e)return!1;const t=this.start!=null?this.start.getTime():this.start,r=this.end!=null?this.end.getTime():this.end,n=e.start!=null?e.start.getTime():e.start,i=e.end!=null?e.end.getTime():e.end;return t===n&&r===i}expandTo(e){if(this.isEmpty||this.isAllTime)return this.clone();const t=Mh(this.start,n=>XD(n,e)),r=Mh(this.end,n=>{const i=XD(n,e);return n.getTime()===i.getTime()?i:Uh(i,1,e)});return new oo({start:t,end:r})}intersection(e){var a,l,c,h;if(!e)return this.clone();if(this.isEmpty||e.isEmpty)return oo.empty;if(this.isAllTime)return e.clone();if(e.isAllTime)return this.clone();const t=((a=this.start)==null?void 0:a.getTime())??-1/0,r=((l=this.end)==null?void 0:l.getTime())??1/0,n=((c=e.start)==null?void 0:c.getTime())??-1/0,i=((h=e.end)==null?void 0:h.getTime())??1/0;let s,o;if(n>=t&&n<=r?s=n:t>=n&&t<=i&&(s=t),r>=n&&r<=i?o=r:i>=t&&i<=r&&(o=i),s!=null&&o!=null&&!isNaN(s)&&!isNaN(o)){const f=new oo;return f.start=s===-1/0?null:new Date(s),f.end=o===1/0?null:new Date(o),f}return oo.empty}offset(e,t){if(this.isEmpty||this.isAllTime)return this.clone();const r=new oo,{start:n,end:i}=this;return n!=null&&(r.start=Uh(n,e,t)),i!=null&&(r.end=Uh(i,e,t)),r}union(e){if(!e||e.isEmpty)return this.clone();if(this.isEmpty)return e.clone();if(this.isAllTime||e.isAllTime)return eF.clone();const t=this.start!=null&&e.start!=null?new Date(Math.min(this.start.getTime(),e.start.getTime())):null,r=this.end!=null&&e.end!=null?new Date(Math.max(this.end.getTime(),e.end.getTime())):null;return new oo({start:t,end:r})}};u([d({type:Date,json:{write:{allowNull:!0}}})],zi.prototype,"end",void 0),u([we("end")],zi.prototype,"readEnd",null),u([pe("end")],zi.prototype,"writeEnd",null),u([d({readOnly:!0,json:{read:!1}})],zi.prototype,"isAllTime",null),u([d({readOnly:!0,json:{read:!1}})],zi.prototype,"isEmpty",null),u([d({type:Date,json:{write:{allowNull:!0}}})],zi.prototype,"start",void 0),u([we("start")],zi.prototype,"readStart",null),u([pe("start")],zi.prototype,"writeStart",null),zi=oo=u([E("esri.TimeExtent")],zi);const eF=new zi,Jye=new zi({start:void 0,end:void 0}),qa=zi,sy=e=>{let t=class extends e{constructor(){super(...arguments),this._handles=new ou,this._updatingHandles=new im}destroy(){this.destroyed||(this._handles.destroy(),this._updatingHandles.destroy())}get handles(){return this._handles}get updatingHandles(){return this._updatingHandles}};return u([d({readOnly:!0})],t.prototype,"handles",null),u([d({readOnly:!0})],t.prototype,"updatingHandles",null),t=u([E("esri.core.HandleOwner")],t),t};let JS=class extends sy($e){};JS=u([E("esri.core.HandleOwner")],JS);let _0=class extends sy(Le){constructor(t){super(t),this.handles.add([this.on("before-add",r=>{r.item==null&&r.preventDefault()}),this.on("after-add",r=>this._own(r.item)),this.on("after-remove",r=>this._release(r.item))])}get owner(){return this._get("owner")}set owner(t){t!==this._get("owner")&&(this._releaseAll(),this._set("owner",t),this._ownAll())}_ownAll(){for(const t of this.items)this._own(t)}_releaseAll(){for(const t of this.items)this._release(t)}_createNewInstance(t){return this.itemType?new(Le.ofType(this.itemType.Type))(t):new Le(t)}};function tF(e,t){return{type:e,cast:az,set(r){const n=tp(r,this._get(t),e);n.owner=this,this._set(t,n)}}}u([d()],_0.prototype,"owner",null),_0=u([E("esri.core.support.OwningCollection")],_0);var Eg;const QS=Vn()({orthometric:"gravity-related-height",gravity_related_height:"gravity-related-height",ellipsoidal:"ellipsoidal"}),iB=QS.jsonValues.slice();rre(iB,"orthometric");const b0=Vn()({meter:"meters",foot:"feet","us-foot":"us-feet","clarke-foot":"clarke-feet","clarke-yard":"clarke-yards","clarke-link":"clarke-links","sears-yard":"sears-yards","sears-foot":"sears-feet","sears-chain":"sears-chains","benoit-1895-b-chain":"benoit-1895-b-chains","indian-yard":"indian-yards","indian-1937-yard":"indian-1937-yards","gold-coast-foot":"gold-coast-feet","sears-1922-truncated-chain":"sears-1922-truncated-chains","50-kilometers":"50-kilometers","150-kilometers":"150-kilometers"});let ao=Eg=class extends Q{constructor(e){super(e),this.heightModel="gravity-related-height",this.heightUnit="meters",this.vertCRS=null}writeHeightModel(e,t,r){return QS.write(e,t,r)}readHeightModel(e,t,r){return QS.read(e)||(r&&r.messages&&r.messages.push(Qye(e,{context:r})),null)}readHeightUnit(e,t,r){return b0.read(e)||(r&&r.messages&&r.messages.push(rF(e,{context:r})),null)}readHeightUnitService(e,t,r){return Oz(e)||b0.read(e)||(r&&r.messages&&r.messages.push(rF(e,{context:r})),null)}readVertCRS(e,t){return t.vertCRS||t.ellipsoid||t.geoid}clone(){return new Eg({heightModel:this.heightModel,heightUnit:this.heightUnit,vertCRS:this.vertCRS})}equals(e){return!!e&&(this===e||this.heightModel===e.heightModel&&this.heightUnit===e.heightUnit&&this.vertCRS===e.vertCRS)}static deriveUnitFromSR(e,t){const r=nse(t);return new Eg({heightModel:e.heightModel,heightUnit:r,vertCRS:e.vertCRS})}write(e,t){return t={origin:"web-scene",...t},super.write(e,t)}static fromJSON(e){if(!e)return null;const t=new Eg;return t.read(e,{origin:"web-scene"}),t}};function rF(e,t){return new qo("height-unit:unsupported",`Height unit of value '${e}' is not supported`,t)}function Qye(e,t){return new qo("height-model:unsupported",`Height model of value '${e}' is not supported`,t)}u([d({type:QS.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:iB,default:"ellipsoidal"}}}})],ao.prototype,"heightModel",void 0),u([pe("web-scene","heightModel")],ao.prototype,"writeHeightModel",null),u([we(["web-scene","service"],"heightModel")],ao.prototype,"readHeightModel",null),u([d({type:b0.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:b0.jsonValues,write:b0.write}}}})],ao.prototype,"heightUnit",void 0),u([we("web-scene","heightUnit")],ao.prototype,"readHeightUnit",null),u([we("service","heightUnit")],ao.prototype,"readHeightUnitService",null),u([d({type:String,constructOnly:!0,json:{origins:{"web-scene":{write:!0}}}})],ao.prototype,"vertCRS",void 0),u([we("service","vertCRS",["vertCRS","ellipsoid","geoid"])],ao.prototype,"readVertCRS",null),ao=Eg=u([E("esri.geometry.HeightModelInfo")],ao);const e3=ao;let YS=class extends _0{constructor(t){super(t),this.handles.add(this.on("before-add",r=>{r.item!=null&&r.item.parent===this.owner&&(Z.getLogger(this).warn("Analysis inside the collection must be unique. Not adding this element again."),r.preventDefault())}))}_own(t){t.parent=this.owner}_release(t){t.parent=null}};YS=u([E("esri.support.AnalysesCollection")],YS);let S0=class extends _0{_own(t){t.layer&&"remove"in t.layer&&t.layer!==this.owner&&t.layer.remove(t),t.layer=this.owner}_release(t){t.layer===this.owner&&(t.layer=null)}};u([sz({Type:Ki,ensureType:gr(Ki)})],S0.prototype,"itemType",void 0),S0=u([E("esri.support.GraphicsCollection")],S0);const nF=new Map([["AUS Central Standard Time","Australia/Darwin"],["AUS Eastern Standard Time","Australia/Sydney"],["Afghanistan Standard Time","Asia/Kabul"],["Alaskan Standard Time","America/Anchorage"],["Aleutian Standard Time","America/Adak"],["Altai Standard Time","Asia/Barnaul"],["Arab Standard Time","Asia/Riyadh"],["Arabian Standard Time","Asia/Dubai"],["Arabic Standard Time","Asia/Baghdad"],["Argentina Standard Time","America/Buenos_Aires"],["Astrakhan Standard Time","Europe/Astrakhan"],["Atlantic Standard Time","America/Halifax"],["Aus Central W. Standard Time","Australia/Eucla"],["Azerbaijan Standard Time","Asia/Baku"],["Azores Standard Time","Atlantic/Azores"],["Bahia Standard Time","America/Bahia"],["Bangladesh Standard Time","Asia/Dhaka"],["Belarus Standard Time","Europe/Minsk"],["Bougainville Standard Time","Pacific/Bougainville"],["Canada Central Standard Time","America/Regina"],["Cape Verde Standard Time","Atlantic/Cape_Verde"],["Caucasus Standard Time","Asia/Yerevan"],["Cen. Australia Standard Time","Australia/Adelaide"],["Central America Standard Time","America/Guatemala"],["Central Asia Standard Time","Asia/Almaty"],["Central Brazilian Standard Time","America/Cuiaba"],["Central Europe Standard Time","Europe/Budapest"],["Central European Standard Time","Europe/Warsaw"],["Central Pacific Standard Time","Pacific/Guadalcanal"],["Central Standard Time","America/Chicago"],["Central Standard Time (Mexico)","America/Mexico_City"],["Chatham Islands Standard Time","Pacific/Chatham"],["China Standard Time","Asia/Shanghai"],["Cuba Standard Time","America/Havana"],["Dateline Standard Time","Etc/GMT+12"],["E. Africa Standard Time","Africa/Nairobi"],["E. Australia Standard Time","Australia/Brisbane"],["E. Europe Standard Time","Europe/Chisinau"],["E. South America Standard Time","America/Sao_Paulo"],["Easter Island Standard Time","Pacific/Easter"],["Eastern Standard Time","America/New_York"],["Eastern Standard Time (Mexico)","America/Cancun"],["Egypt Standard Time","Africa/Cairo"],["Ekaterinburg Standard Time","Asia/Yekaterinburg"],["FLE Standard Time","Europe/Kiev"],["Fiji Standard Time","Pacific/Fiji"],["GMT Standard Time","Europe/London"],["GTB Standard Time","Europe/Bucharest"],["Georgian Standard Time","Asia/Tbilisi"],["Greenland Standard Time","America/Godthab"],["Greenwich Standard Time","Atlantic/Reykjavik"],["Haiti Standard Time","America/Port-au-Prince"],["Hawaiian Standard Time","Pacific/Honolulu"],["India Standard Time","Asia/Calcutta"],["Iran Standard Time","Asia/Tehran"],["Israel Standard Time","Asia/Jerusalem"],["Jordan Standard Time","Asia/Amman"],["Kaliningrad Standard Time","Europe/Kaliningrad"],["Korea Standard Time","Asia/Seoul"],["Libya Standard Time","Africa/Tripoli"],["Line Islands Standard Time","Pacific/Kiritimati"],["Lord Howe Standard Time","Australia/Lord_Howe"],["Magadan Standard Time","Asia/Magadan"],["Magallanes Standard Time","America/Punta_Arenas"],["Marquesas Standard Time","Pacific/Marquesas"],["Mauritius Standard Time","Indian/Mauritius"],["Middle East Standard Time","Asia/Beirut"],["Montevideo Standard Time","America/Montevideo"],["Morocco Standard Time","Africa/Casablanca"],["Mountain Standard Time","America/Denver"],["Mountain Standard Time (Mexico)","America/Mazatlan"],["Myanmar Standard Time","Asia/Rangoon"],["N. Central Asia Standard Time","Asia/Novosibirsk"],["Namibia Standard Time","Africa/Windhoek"],["Nepal Standard Time","Asia/Katmandu"],["New Zealand Standard Time","Pacific/Auckland"],["Newfoundland Standard Time","America/St_Johns"],["Norfolk Standard Time","Pacific/Norfolk"],["North Asia East Standard Time","Asia/Irkutsk"],["North Asia Standard Time","Asia/Krasnoyarsk"],["North Korea Standard Time","Asia/Pyongyang"],["Omsk Standard Time","Asia/Omsk"],["Pacific SA Standard Time","America/Santiago"],["Pacific Standard Time","America/Los_Angeles"],["Pacific Standard Time (Mexico)","America/Tijuana"],["Pakistan Standard Time","Asia/Karachi"],["Paraguay Standard Time","America/Asuncion"],["Qyzylorda Standard Time","Asia/Qyzylorda"],["Romance Standard Time","Europe/Paris"],["Russia Time Zone 10","Asia/Srednekolymsk"],["Russia Time Zone 11","Asia/Kamchatka"],["Russia Time Zone 3","Europe/Samara"],["Russian Standard Time","Europe/Moscow"],["SA Eastern Standard Time","America/Cayenne"],["SA Pacific Standard Time","America/Bogota"],["SA Western Standard Time","America/La_Paz"],["SE Asia Standard Time","Asia/Bangkok"],["Saint Pierre Standard Time","America/Miquelon"],["Sakhalin Standard Time","Asia/Sakhalin"],["Samoa Standard Time","Pacific/Apia"],["Sao Tome Standard Time","Africa/Sao_Tome"],["Saratov Standard Time","Europe/Saratov"],["Singapore Standard Time","Asia/Singapore"],["South Africa Standard Time","Africa/Johannesburg"],["South Sudan Standard Time","Africa/Juba"],["Sri Lanka Standard Time","Asia/Colombo"],["Sudan Standard Time","Africa/Khartoum"],["Syria Standard Time","Asia/Damascus"],["Taipei Standard Time","Asia/Taipei"],["Tasmania Standard Time","Australia/Hobart"],["Tocantins Standard Time","America/Araguaina"],["Tokyo Standard Time","Asia/Tokyo"],["Tomsk Standard Time","Asia/Tomsk"],["Tonga Standard Time","Pacific/Tongatapu"],["Transbaikal Standard Time","Asia/Chita"],["Turkey Standard Time","Europe/Istanbul"],["Turks And Caicos Standard Time","America/Grand_Turk"],["US Eastern Standard Time","America/Indianapolis"],["US Mountain Standard Time","America/Phoenix"],["UTC","Etc/GMT"],["UTC+01","Etc/GMT-1"],["UTC+02","Etc/GMT-2"],["UTC+03","Etc/GMT-3"],["UTC+04","Etc/GMT-4"],["UTC+05","Etc/GMT-5"],["UTC+06","Etc/GMT-6"],["UTC+07","Etc/GMT-7"],["UTC+08","Etc/GMT-8"],["UTC+09","Etc/GMT-9"],["UTC+10","Etc/GMT-10"],["UTC+11","Etc/GMT-11"],["UTC+12","Etc/GMT-12"],["UTC+13","Etc/GMT-13"],["UTC+14","Etc/GMT-14"],["UTC-01","Etc/GMT+1"],["UTC-02","Etc/GMT+2"],["UTC-03","Etc/GMT+3"],["UTC-04","Etc/GMT+4"],["UTC-05","Etc/GMT+5"],["UTC-06","Etc/GMT+6"],["UTC-07","Etc/GMT+7"],["UTC-08","Etc/GMT+8"],["UTC-09","Etc/GMT+9"],["UTC-10","Etc/GMT+10"],["UTC-11","Etc/GMT+11"],["UTC-12","Etc/GMT+12"],["Ulaanbaatar Standard Time","Asia/Ulaanbaatar"],["Venezuela Standard Time","America/Caracas"],["Vladivostok Standard Time","Asia/Vladivostok"],["Volgograd Standard Time","Europe/Volgograd"],["W. Australia Standard Time","Australia/Perth"],["W. Central Africa Standard Time","Africa/Lagos"],["W. Europe Standard Time","Europe/Berlin"],["W. Mongolia Standard Time","Asia/Hovd"],["West Asia Standard Time","Asia/Tashkent"],["West Bank Standard Time","Asia/Hebron"],["West Pacific Standard Time","Pacific/Port_Moresby"],["Yakutsk Standard Time","Asia/Yakutsk"],["Yukon Standard Time","America/Whitehorse"]]);function Yye(e,t="system"){if(!e||!nF.has(e.timeZone))return t;const r=nF.get(e.timeZone);return Xye(e.timeZone)||e.respectsDaylightSaving?r:Kye(r)}function Kye(e){const t=Qe.local().setZone(e),r=Math.min(t.set({month:1,day:1}).offset,t.set({month:5}).offset);return r===0?"Etc/UTC":`Etc/GMT${Nn.instance(-r).formatOffset(0,"narrow")}`}function Xye(e){return e.startsWith("UTC")}let Wu=class extends kr(Q){constructor(t){super(t),this.legacy=null,this.timeZone="system"}readLegacy(t,r){const{timeZone:n,respectsDaylightSaving:i}=r;return{timeZone:n,respectsDaylightSaving:i}}readTimeZone(t,r){return"timeZoneIANA"in r?r.timeZoneIANA:Yye(r)}writeTimeZone(t,r){r.timeZoneIANA=t}equals(t){return t!=null&&this.timeZone!=null&&t.timeZone!=null&&this.timeZone===t.timeZone}};u([d()],Wu.prototype,"legacy",void 0),u([we("legacy",["timeZone"])],Wu.prototype,"readLegacy",null),u([d({type:String,nonNullable:!0})],Wu.prototype,"timeZone",void 0),u([we("timeZone",["timeZone","timeZoneIANA","respectsDaylightSaving"])],Wu.prototype,"readTimeZone",null),u([pe("timeZone")],Wu.prototype,"writeTimeZone",null),Wu=u([E("esri.time.TimeReference")],Wu);const Tv=Wu;let Hu=class extends $e{constructor(t){super(t),this.view=null,this.baseLayerViews=new Le,this.referenceLayerViews=new Le,this._loadingHandle=Ee(()=>{var r,n;return(n=(r=this.view)==null?void 0:r.map)==null?void 0:n.basemap},r=>{r&&r.load().catch(()=>{})},Ir)}destroy(){this._set("view",null),this._loadingHandle&&(this._loadingHandle.remove(),this._loadingHandle=null);for(const t of this.baseLayerViews)t.destroy();this.baseLayerViews.length=0;for(const t of this.referenceLayerViews)t.destroy();this.referenceLayerViews.length=0}get suspended(){return!this.view||this.view.suspended}get updating(){var r,n;if(this.view&&this.view.suspended)return!1;const t=(n=(r=this.view)==null?void 0:r.map)==null?void 0:n.basemap;return!!t&&!!t.loaded&&(this.baseLayerViews.some(i=>i.updating)||this.referenceLayerViews.some(i=>i.updating))}};u([d({constructOnly:!0})],Hu.prototype,"view",void 0),u([d({readOnly:!0})],Hu.prototype,"baseLayerViews",void 0),u([d({readOnly:!0})],Hu.prototype,"referenceLayerViews",void 0),u([d({readOnly:!0})],Hu.prototype,"suspended",null),u([d({type:Boolean,readOnly:!0})],Hu.prototype,"updating",null),Hu=u([E("esri.views.BasemapView")],Hu);function ege(e){return"tryRecycleWith"in e}let tge=class{constructor(t,r,n){this.layer=t,this.view=r,this.layerViewImporter=n,this._controller=new AbortController,this._deferred=Bo(),this._started=!1,this.done=!1,this.promise=this._deferred.promise,As(this._controller.signal,()=>{const i=new N("cancelled:layerview-create","layerview creation cancelled",{layer:t});this._deferred.reject(i)})}tryRecycle(t){if(!this.done||!this.layerView||!ege(this.layerView))return null;const r=this.layer.type,n=this._controller.signal;for(let i=0;i<t.length;i++){const s=t[i];if(s.type!==r)continue;const o=this.layerView.tryRecycleWith(s,{signal:n});if(o){t.splice(i,1),this.layer=s;const a=this.layerView,l=a.view;return this.promise=Promise.race([o.then(()=>(qt(this._controller.signal),s.emit("layerview-destroy",{view:l,layerView:a}),l.emit("layerview-destroy",{view:l,layerView:a}),s.emit("layerview-create",{view:l,layerView:a}),l.emit("layerview-create",{view:l,layerView:a}),a)),new Promise((c,h)=>As(this._controller.signal,()=>h(ar())))]),this.promise}}return null}destroy(){this._controller.abort();const{layerView:t}=this;if(t){const{layer:r,view:n}=this;r.emit("layerview-destroy",{view:n,layerView:t}),n.emit("layerview-destroy",{layer:r,layerView:t})}this.done=!0,this.layer=null,this.layerView=null,this.view=null,this.layerViewImporter=null,this._map=null}async start(){var i,s,o;if(this._started)return;this._started=!0;const{_controller:{signal:t},layer:r,view:n}=this;this._map=n.map;try{let a,l;if(await r.load({signal:t}),"prefetchResources"in r&&await((i=r.prefetchResources)==null?void 0:i.call(r,{signal:t})),nge(r))a=await r.createLayerView(n,{signal:t});else{if(!this.layerViewImporter.hasLayerViewModule(r))throw new N("layer:view-not-supported","No layerview implementation was found");const f=await this.layerViewImporter.importLayerView(r);qt(t),a="default"in f?new f.default({layer:r,view:n}):new f({layer:r,view:n})}const c=()=>{l=or(l),a.destroyed||a.destroy(),a.layer=null,a.parent=null,a.view=null,this.done=!0};l=As(t,c),qt(t);try{await a.when()}catch(f){throw c(),f}if(!((o=(s=this._map)==null?void 0:s.allLayers)==null?void 0:o.includes(r)))return c(),void this._deferred.reject(new N("view:no-layerview-for-layer","The layer has been removed from the map",{layer:r}));this.layerView=a,r.emit("layerview-create",{view:n,layerView:a}),n.emit("layerview-create",{layer:r,layerView:a}),this.done=!0,this._deferred.resolve(a)}catch(a){r.emit("layerview-create-error",{view:n,error:a}),n.emit("layerview-create-error",{layer:r,error:a}),this.done=!0,this._deferred.reject(new N("layerview:create-error","layerview creation failed",{layer:r,error:a}))}}},vs=class extends $e{constructor(t){super(t),this._layerLayerViewInfoMap=new Map,this._recyclingInfoMap=new Map,this._watchUpdatingTracking=new im,this.supportsGround=!0,this._preloadLayerViewModules=()=>{var n;const r=(n=this.view.map)==null?void 0:n.allLayers;if(r)for(const i of r)this.layerViewImporter.hasLayerViewModule(i)&&this.layerViewImporter.importLayerView(i)},this._reschedule=()=>this.destroyed?Promise.reject():(this._workPromise==null&&(this._workPromise=Bo(),this._workPromise.promise.catch(()=>{})),this.removeHandles("reschedule"),this.addHandles(Bm(this._doWork),"reschedule"),this._workPromise.promise),this._doWork=()=>{var l,c,h;if(this.destroyed)return;const r=this.view.map;if(this._map!==r&&(this.clear(),this._map=r),this._workPromise==null)return void this.notifyChange("updating");this.removeHandles("reschedule"),this.removeHandles("collection-change");const n=new Set,i=[],s=this.view.ready,o=f=>{if(f!=null){for(const m of f)if(m){n.add(m);const y=this._layerLayerViewInfoMap.get(m);y&&s?y.start():y||this._recyclingInfoMap.has(m)||i.push(m),"layers"in m&&m.layers&&o(m.layers)}}};for(const f of this._rootCollectionNames)o(this.get(f));for(const[f,m]of this._layerLayerViewInfoMap)if(!n.has(f)){this._layerLayerViewInfoMap.delete(m.layer);const y=m.tryRecycle(i);y?(this.notifyChange("updating"),this._recyclingInfoMap.set(m.layer,m),y.then(()=>{this.notifyChange("updating"),this._recyclingInfoMap.delete(m.layer),this._layerLayerViewInfoMap.set(m.layer,m),this._reschedule()}).catch(()=>{this.notifyChange("updating"),this._recyclingInfoMap.delete(m.layer),m.destroy(),this._reschedule()})):m.destroy()}for(const[f,m]of this._recyclingInfoMap)n.has(f)||(this.notifyChange("updating"),this._recyclingInfoMap.delete(m.layer),m.destroy());for(const f of i)this._createLayerView(f);this._refreshCollections();const a=[(l=r==null?void 0:r.ground)==null?void 0:l.layers,(c=r==null?void 0:r.basemap)==null?void 0:c.baseLayers,(h=r==null?void 0:r.basemap)==null?void 0:h.referenceLayers,r==null?void 0:r.layers].filter(f=>!!f);n.forEach(f=>"layers"in f&&a.push(f.layers)),this.addHandles(a.map(f=>this._watchUpdatingTracking.addOnCollectionChange(()=>f,this._reschedule)),"collection-change"),this._workPromise.resolve(),this._workPromise=null}}initialize(){this.own([Rm(()=>{var t,r;return(r=(t=this.view)==null?void 0:t.map)==null?void 0:r.allLayers},"change",this._preloadLayerViewModules,{onListenerAdd:this._preloadLayerViewModules}),Ee(()=>{const t=this.view,r=t==null?void 0:t.map;return[r==null?void 0:r.basemap,r==null?void 0:r.ground,r==null?void 0:r.layers,t==null?void 0:t.ready]},()=>this._reschedule(),cc)]),this._preloadLayerViewModules(),this._reschedule()}destroy(){this.clear(),G$(this._recyclingInfoMap),G$(this._layerLayerViewInfoMap),this._watchUpdatingTracking.destroy(),this._map=null,this._workPromise!=null&&(this._workPromise.reject(ar()),this._workPromise=null)}get _layersToLayerViews(){const t=[["view.map.basemap.baseLayers","view.basemapView.baseLayerViews"],["view.map.layers","view.layerViews"],["view.map.basemap.referenceLayers","view.basemapView.referenceLayerViews"]];return this.supportsGround&&t.push(["view.map.ground.layers","view.groundView.layerViews"]),new Map(t)}get _rootCollectionNames(){return Array.from(this._layersToLayerViews.keys())}get updating(){return this._workPromise!=null||this._watchUpdatingTracking.updating||t2(this._layerLayerViewInfoMap,t=>!t.done)||this._recyclingInfoMap.size>0}get updatingRemaining(){let t=0;for(const r of this._layerLayerViewInfoMap.values())r.done||++t;return t}clear(){this.destroyed||(G$(this._layerLayerViewInfoMap),this._refreshCollections())}async whenLayerView(t){if(await this._reschedule(),!this._layerLayerViewInfoMap.has(t)){if(this._recyclingInfoMap.has(t))return this._recyclingInfoMap.get(t).promise;throw new N("view:no-layerview-for-layer","No layerview has been found for the layer",{layer:t})}return this._layerLayerViewInfoMap.get(t).promise}_refreshCollections(){for(const[t,r]of this._layersToLayerViews)this._populateLayerViewsOwners(this.get(t),this.get(r),this.view);this.notifyChange("updating"),this.notifyChange("updatingRemaining")}_populateLayerViewsOwners(t,r,n){if(!t||!r)return void(r&&r.removeAll());let i=0;for(const s of t){const o=this._layerLayerViewInfoMap.get(s);if(!o||!o.layerView)continue;const a=o.layerView;a.layer=s,a.parent=n,r.at(i)!==a&&r.splice(i,0,a),s.layers&&this._populateLayerViewsOwners(s.layers,a.layerViews,a),i+=1}i<r.length&&r.splice(i,r.length)}_createLayerView(t){t.load().catch(()=>{}),this.layerViewImporter.hasLayerViewModule(t)&&this.layerViewImporter.importLayerView(t);const r=new tge(t,this.view,this.layerViewImporter);r.promise.then(()=>this._refreshCollections(),n=>{n&&(Ei(n)||n.name==="cancelled:layerview-create")||Z.getLogger(this).error(`Failed to create layerview for layer title:'${t.title??"no title"}', id:'${t.id??"no id"}' of type '${t.type}'.`,{layer:t,error:n}),this._refreshCollections()}),this._layerLayerViewInfoMap.set(t,r),this.view.ready&&r.start(),this.notifyChange("updating"),this.notifyChange("updatingRemaining")}};u([d()],vs.prototype,"_workPromise",void 0),u([d({readOnly:!0})],vs.prototype,"_watchUpdatingTracking",void 0),u([d({readOnly:!0})],vs.prototype,"_layersToLayerViews",null),u([d({readOnly:!0})],vs.prototype,"_rootCollectionNames",null),u([d()],vs.prototype,"layerViewImporter",void 0),u([d()],vs.prototype,"supportsGround",void 0),u([d({readOnly:!0})],vs.prototype,"updating",null),u([d({readOnly:!0})],vs.prototype,"updatingRemaining",null),u([d({constructOnly:!0})],vs.prototype,"view",void 0),vs=u([E("esri.views.LayerViewManager")],vs);const rge=vs;function nge(e){return"createLayerView"in e&&e.createLayerView!=null}let Li=class extends $e{constructor(t){super(t),this.factor=1.5,this.offset=Kr(0,0),this.position=null,this.size=120,this.maskUrl=null,this.maskEnabled=!0,this.overlayUrl=null,this.overlayEnabled=!0,this.visible=!0}get version(){return this.commitProperty("factor"),this.commitProperty("offset"),this.commitProperty("position"),this.commitProperty("visible"),this.commitProperty("size"),this.commitProperty("maskUrl"),this.commitProperty("maskEnabled"),this.commitProperty("overlayUrl"),this.commitProperty("overlayEnabled"),(this._get("version")||0)+1}};u([d({type:Number})],Li.prototype,"factor",void 0),u([d({nonNullable:!0})],Li.prototype,"offset",void 0),u([d()],Li.prototype,"position",void 0),u([d({type:Number,range:{min:0}})],Li.prototype,"size",void 0),u([d()],Li.prototype,"maskUrl",void 0),u([d()],Li.prototype,"maskEnabled",void 0),u([d()],Li.prototype,"overlayUrl",void 0),u([d()],Li.prototype,"overlayEnabled",void 0),u([d({readOnly:!0})],Li.prototype,"version",null),u([d({type:Boolean})],Li.prototype,"visible",void 0),Li=u([E("esri.views.Magnifier")],Li);const sB=Li;let ige=class{constructor(){this._tasks=new Array,this._running=ZS(!1)}get length(){return this._tasks.length}get running(){return this._running.value}destroy(){this.cancelAll()}runTask(t){for(;!t.done&&this._process(t);)t.madeProgress()}push(t,r,n){return this._running.value=!0,new Promise((i,s)=>this._tasks.push(new iF(i,s,t,r,n)))}unshift(t,r,n){return this._running.value=!0,new Promise((i,s)=>this._tasks.unshift(new iF(i,s,t,r,n)))}_process(t){var n;if(this._tasks.length===0)return!1;const r=this._tasks.shift();try{const i=Go(r.signal);if(i&&!r.abortCallback)r.reject(ar());else{const s=i?(n=r.abortCallback)==null?void 0:n.call(r,ar()):r.callback(t);au(s)?s.then(r.resolve,r.reject):r.resolve(s)}}catch(i){r.reject(i)}return this._running.value=this._tasks.length>0,!0}cancelAll(){const t=ar();for(const r of this._tasks)if(r.abortCallback){const n=r.abortCallback(t);r.resolve(n)}else r.reject(t);this._tasks.length=0,this._running.value=!1}},iF=class{constructor(t,r,n,i=void 0,s=void 0){this.resolve=t,this.reject=r,this.callback=n,this.signal=i,this.abortCallback=s}},Mg=class extends $e{constructor(){super(...arguments),this.SCHEDULER_LOG_SLOW_TASKS=!1,this.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=!1}};u([d()],Mg.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0),u([d()],Mg.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0),Mg=u([E("esri.views.support.DebugFlags")],Mg);const sge=new Mg;var Vi;(function(e){e[e.ANIMATING=0]="ANIMATING",e[e.INTERACTING=1]="INTERACTING",e[e.IDLE=2]="IDLE"})(Vi||(Vi={}));var CC,Xe;(function(e){e[e.YIELD=1]="YIELD"})(CC||(CC={})),function(e){e.RESOURCE_CONTROLLER_IMMEDIATE="immediate",e.RESOURCE_CONTROLLER="schedule",e.SLIDE="slide",e.STREAM_DATA_LOADER="stream loader",e.ELEVATION_QUERY="elevation query",e.TERRAIN_SURFACE="terrain",e.SURFACE_GEOMETRY_UPDATES="surface geometry updates",e.LOD_RENDERER="LoD renderer",e.GRAPHICS_CORE="Graphics3D",e.I3S_CONTROLLER="I3S",e.POINT_CLOUD_LAYER="point cloud",e.FEATURE_TILE_FETCHER="feature fetcher",e.OVERLAY="overlay",e.STAGE="stage",e.GRAPHICS_DECONFLICTOR="graphics deconflictor",e.FILTER_VISIBILITY="Graphics3D filter visibility",e.SCALE_VISIBILITY="Graphics3D scale visibility",e.FRUSTUM_VISIBILITY="Graphics3D frustum visibility",e.POINT_OF_INTEREST_FREQUENT="POI frequent",e.POINT_OF_INTEREST_INFREQUENT="POI infrequent",e.LABELER="labeler",e.FEATURE_QUERY_ENGINE="feature query",e.FEATURE_TILE_TREE="feature tile tree",e.FEATURE_TILE_TREE_ACTIVE="fast feature tile tree",e.ELEVATION_ALIGNMENT="elevation alignment",e.TEXT_TEXTURE_ATLAS="text texture atlas",e.TEXTURE_UNLOAD="texture unload",e.LINE_OF_SIGHT_TOOL="line of sight tool",e.LINE_OF_SIGHT_TOOL_INTERACTIVE="interactive line of sight tool",e.ELEVATION_PROFILE="elevation profile",e.SNAPPING="snapping",e.SHADOW_ACCUMULATOR="shadow accumulator",e.CLOUDS_GENERATOR="clouds generator",e[e.NONE=0]="NONE",e[e.TEST_PRIO=1]="TEST_PRIO"}(Xe||(Xe={}));const Ta=0,sF=new Map([[Xe.RESOURCE_CONTROLLER_IMMEDIATE,Ta],[Xe.RESOURCE_CONTROLLER,4],[Xe.SLIDE,Ta],[Xe.STREAM_DATA_LOADER,Ta],[Xe.ELEVATION_QUERY,Ta],[Xe.TERRAIN_SURFACE,1],[Xe.SURFACE_GEOMETRY_UPDATES,1],[Xe.LOD_RENDERER,2],[Xe.GRAPHICS_CORE,2],[Xe.I3S_CONTROLLER,2],[Xe.POINT_CLOUD_LAYER,2],[Xe.FEATURE_TILE_FETCHER,2],[Xe.OVERLAY,4],[Xe.STAGE,4],[Xe.GRAPHICS_DECONFLICTOR,4],[Xe.FILTER_VISIBILITY,4],[Xe.SCALE_VISIBILITY,4],[Xe.FRUSTUM_VISIBILITY,4],[Xe.CLOUDS_GENERATOR,4],[Xe.POINT_OF_INTEREST_FREQUENT,6],[Xe.POINT_OF_INTEREST_INFREQUENT,30],[Xe.LABELER,8],[Xe.FEATURE_QUERY_ENGINE,8],[Xe.FEATURE_TILE_TREE,16],[Xe.FEATURE_TILE_TREE_ACTIVE,Ta],[Xe.ELEVATION_ALIGNMENT,12],[Xe.TEXT_TEXTURE_ATLAS,12],[Xe.TEXTURE_UNLOAD,12],[Xe.LINE_OF_SIGHT_TOOL,16],[Xe.LINE_OF_SIGHT_TOOL_INTERACTIVE,Ta],[Xe.SNAPPING,Ta],[Xe.SHADOW_ACCUMULATOR,30]]);function oF(e){return sF.has(e)?sF.get(e):typeof e=="number"?e:1}const aF=6.5,lF=1,oge=30,uF=1e3/30,cF=100,dF=.9;var kC,Td;(function(e){class t{get updating(){return this._updating.value}_updatingChanged(){this._updating.value=this._tasks.some(s=>s.needsUpdate)}constructor(){this._updating=ZS(!0),this._microTaskQueued=!1,this._frameNumber=0,this.performanceInfo={total:new i0("total"),tasks:new Map},this._frameTaskTimes=new Map,this._budget=new n,this._state=Vi.INTERACTING,this._tasks=new Nh,this._runQueue=new Nh,this._load=0,this._idleStateCallbacks=new Nh,this._idleUpdatesStartFired=!1,this._forceTask=!1,this._debug=!1,this._debugHandle=Ee(()=>sge.SCHEDULER_LOG_SLOW_TASKS,o=>this._debug=o,Ir);for(const o of Object.keys(Xe))this.performanceInfo.tasks.set(Xe[o],new i0(Xe[o]));const s=this;this._test={FRAME_SAFETY_BUDGET:aF,INTERACTING_BUDGET:uF,IDLE_BUDGET:cF,get availableBudget(){return s._budget.budget},usedBudget:0,getBudget:()=>s._budget,setBudget:o=>s._budget=o,updateTask:o=>this._updateTask(o),getState:o=>this._getState(o),getRuntime:o=>this._getRuntime(o),frameTaskTimes:this._frameTaskTimes,resetRuntimes:()=>this._resetRuntimes(),getRunning:()=>this._getRunning()}}destroy(){this._tasks.toArray().forEach(s=>s.remove()),this._tasks.clear(),or(this._debugHandle),this._microTaskQueued=!1,this._updatingChanged()}taskRunningChanged(s){this._updatingChanged(),s&&this._budget.remaining>0&&!this._microTaskQueued&&(this._microTaskQueued=!0,queueMicrotask(()=>{this._microTaskQueued&&(this._microTaskQueued=!1,this._budget.remaining>0&&this._schedule()&&this.frame())}))}registerTask(s,o){const a=oF(s),l=new r(this,s,o,a);return this._tasks.push(l),this._updatingChanged(),this.performanceInfo.tasks.has(s)||this.performanceInfo.tasks.set(s,new i0(s)),l}registerIdleStateCallbacks(s,o){const a={idleBegin:s,idleEnd:o};this._idleStateCallbacks.push(a),this.state===Vi.IDLE&&this._idleUpdatesStartFired&&a.idleBegin();const l=this;return{remove:()=>this._removeIdleStateCallbacks(a),set idleBegin(c){l._idleUpdatesStartFired&&(a.idleEnd(),l._state===Vi.IDLE&&c()),a.idleBegin=c},set idleEnd(c){a.idleEnd=c}}}get load(){return this._load}set state(s){this._state!==s&&(this._state=s,this.state!==Vi.IDLE&&this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=!1,this._idleStateCallbacks.forAll(o=>o.idleEnd())))}get state(){return this._state}updateBudget(s){this._test.usedBudget=0,++this._frameNumber;let o=aF,a=s.frameDuration,l=lF;switch(this.state){case Vi.IDLE:o=0,a=Math.max(cF,s.frameDuration),l=oge;break;case Vi.INTERACTING:a=Math.max(uF,s.frameDuration);case Vi.ANIMATING:}return a=a-s.elapsedFrameTime-o,this.state!==Vi.IDLE&&a<lF&&!this._forceTask?(this._forceTask=!0,!1):(a=Math.max(a,l),this._budget.reset(a,this.state),this._updateLoad(),this._schedule())}frame(){switch(this._forceTask=!1,this._microTaskQueued=!1,this.state){case Vi.IDLE:this._idleUpdatesStartFired||(this._idleUpdatesStartFired=!0,this._idleStateCallbacks.forAll(s=>s.idleBegin())),this._runIdle();break;case Vi.INTERACTING:this._runInteracting();break;default:this._runAnimating()}this._test.usedBudget=this._budget.elapsed}stopFrame(){this._budget.reset(0,this._state),this._budget.madeProgress()}_removeIdleStateCallbacks(s){this._idleUpdatesStartFired&&s.idleEnd(),this._idleStateCallbacks.removeUnordered(s)}removeTask(s){this._tasks.removeUnordered(s),this._runQueue.removeUnordered(s),this._updatingChanged()}_updateTask(s){this._tasks.forAll(o=>{o.name===s&&o.setPriority(s)})}_getState(s){if(this._runQueue.some(a=>a.name===s))return Td.SCHEDULED;let o=Td.IDLE;return this._tasks.forAll(a=>{a.name===s&&a.needsUpdate&&(a.schedulePriority<=1?o=Td.READY:o!==Td.READY&&(o=Td.WAITING))}),o}_getRuntime(s){let o=0;return this._tasks.forAll(a=>{a.name===s&&(o+=a.runtime)}),o}_resetRuntimes(){this._tasks.forAll(s=>s.runtime=0)}_getRunning(){const s=new Map;if(this._tasks.forAll(a=>{a.needsUpdate&&s.set(a.name,(s.get(a.name)||0)+1)}),s.size===0)return null;let o="";return s.forEach((a,l)=>{o+=a>1?` ${a}x ${l}`:` ${l}`}),o}_runIdle(){this._run()}_runInteracting(){this._run()}_runAnimating(){this._run()}_updateLoad(){const s=this._tasks.reduce((o,a)=>a.needsUpdate?++o:o,0);this._load=this._load*dF+s*(1-dF)}_schedule(){for(this._runQueue.filterInPlace(s=>!!s.needsUpdate||(s.schedulePriority=s.basePriority,!1)),this._tasks.forAll(s=>{s.basePriority===Ta&&s.needsUpdate&&!this._runQueue.includes(s)&&s.blockFrame!==this._frameNumber&&this._runQueue.unshift(s)});this._runQueue.length===0;){let s=!1,o=0;if(this._tasks.forAll(a=>{a.needsUpdate&&a.schedulePriority!==0&&a.basePriority!==Ta&&a.blockFrame!==this._frameNumber&&(s=!0,o=Math.max(o,a.basePriority),a.schedulePriority===1?(a.schedulePriority=0,this._runQueue.push(a)):--a.schedulePriority)}),!s)return this._updatingChanged(),!1}return this._updatingChanged(),!0}_run(){const s=this._budget.now();this._startFrameTaskTimes();do for(;this._runQueue.length>0;){const o=this._budget.now(),a=this._runQueue.pop();this._budget.resetProgress();try{a.task.runTask(this._budget)===CC.YIELD&&(a.blockFrame=this._frameNumber)}catch(c){Z.getLogger("esri.views.support.Scheduler").error(`Exception in task "${a.name}"`,c)}!this._budget.hasProgressed&&a.blockFrame!==this._frameNumber&&a.needsUpdate&&(a.name,Xe.I3S_CONTROLLER,a.blockFrame=this._frameNumber),a.schedulePriority=a.basePriority;const l=this._budget.now()-o;if(a.runtime+=l,this._frameTaskTimes.set(a.priority,this._frameTaskTimes.get(a.priority)+l),this._debug&&l>2*this._budget.budget&&console.log("Task",a.name,"used",l,"of max",this._budget.budget,"ms"),this._budget.remaining<=0)return this._updatingChanged(),void this._recordFrameTaskTimes(this._budget.now()-s)}while(this._schedule());this._updatingChanged(),this._recordFrameTaskTimes(this._budget.now()-s)}_startFrameTaskTimes(){for(const s of Object.keys(Xe))this._frameTaskTimes.set(Xe[s],0)}_recordFrameTaskTimes(s){this._frameTaskTimes.forEach((o,a)=>this.performanceInfo.tasks.get(a).record(o)),this.performanceInfo.total.record(s)}get test(){return this._test}}e.Scheduler=t;class r{get task(){return this._task.value}get updating(){return this._queue.running}constructor(s,o,a,l){this._scheduler=s,this.name=o,this._basePriority=l,this.blockFrame=0,this.runtime=0,this._queue=new ige,this._handles=new ou,this.schedulePriority=this._basePriority,this._task=ZS(a??this._queue),this._handles.add(Xl(()=>this.task.running,c=>s.taskRunningChanged(c)))}remove(){this.processQueue(oB),this._scheduler.removeTask(this),this.schedule=PC.schedule,this.reschedule=PC.reschedule,this._handles.destroy()}get basePriority(){return this._basePriority}setPriority(s){this.name=s;const o=oF(s);this._basePriority!==Ta&&this.schedulePriority===0||(this.schedulePriority=o),this._basePriority=o}get priority(){return this.name}set priority(s){this.setPriority(s)}get needsUpdate(){return this.updating||this.task.running}schedule(s,o,a){return this._queue.push(s,o,a)}reschedule(s,o,a){return this._queue.unshift(s,o,a)}processQueue(s){this._queue.runTask(s)}}class n{constructor(){this._begin=typeof performance<"u"?performance.now():0,this._budget=0,this._state=Vi.IDLE,this._done=!1,this._progressed=!1,this._enabled=!0}run(s){return!this.done&&(s()===!0&&this.madeProgress(),!0)}get done(){return this._done}get budget(){return this._budget}madeProgress(){return this._progressed=!0,this._done=this.elapsed>=this._budget&&this._enabled,this._done}get state(){return this._state}get enabled(){return this._enabled}set enabled(s){this._enabled=s}reset(s,o){this._begin=this.now(),this._budget=s,this._state=o,this.resetProgress()}get remaining(){return Math.max(this._budget-this.elapsed,0)}now(){return performance.now()}get elapsed(){return performance.now()-this._begin}resetProgress(){this._progressed=!1,this._done=!1}get hasProgressed(){return this._progressed}}e.Budget=n})(kC||(kC={})),function(e){e.SCHEDULED="s",e.READY="r",e.WAITING="w",e.IDLE="i"}(Td||(Td={}));const oB=(()=>{const e=new kC.Budget;return e.enabled=!1,e})();let age=class{remove(){}processQueue(){}schedule(t,r,n){try{if(Go(r)){const i=ar();return n?Promise.resolve(n(i)):Promise.reject(i)}return yM(t(oB))}catch(i){return Promise.reject(i)}}reschedule(t,r,n){return this.schedule(t,r,n)}};const PC=new age;let Ig=class extends $e{constructor(t,r){super({}),this._stage=t,this._textureRequests=new Map,this._frameTask=(r==null?void 0:r.registerTask(Xe.TEXTURE_UNLOAD))??PC}normalizeCtorArgs(){return{}}destroy(){var t,r,n;super.destroy(),(t=this._frameTask)==null||t.remove(),(r=this._textureRequests)==null||r.forEach(i=>this._releaseTextureRequest(i)),(n=this._textureRequests)==null||n.clear()}get updating(){return this._frameTask.updating}fromData(t,r,n){var o,a;const i=this.makeUid(t);let s=this._textureRequests.get(i);if(!s){const l=new lge(n);l.texture=r(),(o=this._stage)==null||o.add(l.texture),(a=this._stage)==null||a.loadImmediate(l.texture),this._textureRequests.set(i,l),s=l}return s.referenceCount++,{uid:i,texture:s.texture,release:()=>this._release(i)}}_release(t){const r=this._textureRequests.get(t);r?(r.referenceCount<1&&console.warn("TextureCollection: reference count is < 1 for "+t),r.referenceCount--,r.referenceCount<1&&this._frameTask.schedule(()=>this._releaseNow(t))):console.warn(`TextureCollection: texture doesn't exist: '${t}'`)}get test(){return{textureRequests:this._textureRequests}}_releaseNow(t){if(!this._textureRequests)return;const r=this._textureRequests.get(t);!r||r.referenceCount>0||(this._releaseTextureRequest(r),this._textureRequests.delete(t))}_releaseTextureRequest(t){var r;t.onRemove&&t.onRemove(),t.texture?(r=this._stage)==null||r.remove(t.texture):t.abortController&&(t.abortController.abort(),t.abortController=null)}makeUid(t,r=null){return r!=null?`${t}.${r}px`:t}};u([d()],Ig.prototype,"_frameTask",void 0),u([d()],Ig.prototype,"updating",null),Ig=u([E("esri.views.3d.support.TextureCollection")],Ig);let lge=class{constructor(t){this.onRemove=t,this.referenceCount=0}};var hF;(function(e){e[e.Left=0]="Left",e[e.Middle=1]="Middle",e[e.Right=2]="Right"})(hF||(hF={}));const aB=["click","double-click","immediate-click","immediate-double-click","hold","drag","key-down","key-up","pointer-down","pointer-move","pointer-up","pointer-drag","mouse-wheel","pointer-enter","pointer-leave","gamepad","focus","blur"],lB={};function uB(e){return!!lB[e]}function uge(e){for(const t of e)if(!uB(t))return!1;return!0}aB.forEach(e=>{lB[e]=!0});let cge=class{constructor(t){this._handlers=new Map,this._counter=0,this._handlerCounts=new Map,this.view=t,this.inputManager=null}connect(t){t&&this.disconnect(),this.inputManager=t,this._handlers.forEach(({handler:r,priority:n},i)=>{var s;return(s=this.inputManager)==null?void 0:s.installHandlers(i,[r],n)})}disconnect(){this.inputManager&&this._handlers.forEach((t,r)=>{var n;return(n=this.inputManager)==null?void 0:n.uninstallHandlers(r)}),this.inputManager=null}destroy(){this.disconnect(),this._handlers.clear(),this.view=null}on(t,r,n,i){const s=Array.isArray(t)?t:t.split(",");if(!uge(s))return s.some(uB)&&console.error("Error: registering input events and other events on the view at the same time is not supported."),null;let o,a;Array.isArray(r)?a=r:(o=r,a=[]),typeof n=="function"?o=n:i=n,i=i??Gc.DEFAULT;const l=this._createUniqueGroupName(),c=new dge(this.view,s,a,o);this._handlers.set(l,{handler:c,priority:i});for(const h of s){const f=this._handlerCounts.get(h)||0;this._handlerCounts.set(h,f+1)}return this.inputManager&&this.inputManager.installHandlers(l,[c],i),{remove:()=>this._removeHandler(l,s)}}hasHandler(t){return!!this._handlerCounts.get(t)}_removeHandler(t,r){if(this._handlers.has(t)){this._handlers.delete(t);for(const n of r){const i=this._handlerCounts.get(n);i===void 0?console.error("Trying to remove handler for event that has no handlers registered: ",n):i===1?this._handlerCounts.delete(n):this._handlerCounts.set(n,i-1)}}this.inputManager&&this.inputManager.uninstallHandlers(t)}_createUniqueGroupName(){return this._counter+=1,`viewEvents_${this._counter}`}},dge=class extends en{constructor(t,r,n,i){super(!0),this._latestDragStart=void 0,this.view=t;for(const s of r)switch(s){case"click":this.registerIncoming("click",n,o=>i(this._wrapClick(o)));break;case"double-click":this.registerIncoming("double-click",n,o=>i(this._wrapDoubleClick(o)));break;case"immediate-click":this.registerIncoming("immediate-click",n,o=>i(this._wrapImmediateClick(o)));break;case"immediate-double-click":this.registerIncoming("immediate-double-click",n,o=>i(this._wrapImmediateDoubleClick(o)));break;case"hold":this.registerIncoming("hold",n,o=>i(this._wrapHold(o)));break;case"drag":this.registerIncoming("drag",n,o=>{const a=this._wrapDrag(o);a&&i(a)});break;case"key-down":this.registerIncoming("key-down",n,o=>i(this._wrapKeyDown(o)));break;case"key-up":this.registerIncoming("key-up",n,o=>i(this._wrapKeyUp(o)));break;case"pointer-down":this.registerIncoming("pointer-down",n,o=>i(this._wrapPointer(o,"pointer-down")));break;case"pointer-move":this.registerIncoming("pointer-move",n,o=>i(this._wrapPointer(o,"pointer-move")));break;case"pointer-up":this.registerIncoming("pointer-up",n,o=>i(this._wrapPointer(o,"pointer-up")));break;case"pointer-drag":this.registerIncoming("pointer-drag",n,o=>i(this._wrapPointerDrag(o)));break;case"mouse-wheel":this.registerIncoming("mouse-wheel",n,o=>i(this._wrapMouseWheel(o)));break;case"pointer-enter":this.registerIncoming("pointer-enter",n,o=>i(this._wrapPointer(o,"pointer-enter")));break;case"pointer-leave":this.registerIncoming("pointer-leave",n,o=>i(this._wrapPointer(o,"pointer-leave")));break;case"gamepad":this.registerIncoming("gamepad",n,o=>{i(this._wrapGamepad(o))});break;case"focus":this.registerIncoming("focus",n,o=>{i(this._wrapFocus(o))});break;case"blur":this.registerIncoming("blur",n,o=>{i(this._wrapBlur(o))})}}_wrapFocus(t){return{type:"focus",timestamp:t.timestamp,native:t.data.native,cancelable:t.cancelable,stopPropagation:()=>t.stopPropagation(),async:r=>t.async(r),preventDefault:()=>t.preventDefault()}}_wrapBlur(t){return{type:"blur",timestamp:t.timestamp,native:t.data.native,cancelable:t.cancelable,stopPropagation:()=>t.stopPropagation(),async:r=>t.async(r),preventDefault:()=>t.preventDefault()}}_wrapClick(t){const{pointerType:r,button:n,buttons:i,x:s,y:o,native:a,eventId:l}=t.data,{cancelable:c,timestamp:h}=t;return{type:"click",pointerType:r,button:n,buttons:i,x:s,y:o,native:a,timestamp:h,screenPoint:Kr(s,o),mapPoint:this._getMapPoint(s,o),eventId:l,cancelable:c,stopPropagation:()=>t.stopPropagation(),async:f=>t.async(f),preventDefault:()=>t.preventDefault()}}_wrapDoubleClick(t){const{pointerType:r,button:n,buttons:i,x:s,y:o,native:a,eventId:l}=t.data,{cancelable:c,timestamp:h}=t;return{type:"double-click",pointerType:r,button:n,buttons:i,x:s,y:o,native:a,timestamp:h,mapPoint:this._getMapPoint(s,o),eventId:l,cancelable:c,stopPropagation:()=>t.stopPropagation(),async:f=>t.async(f),preventDefault:()=>t.preventDefault()}}_wrapImmediateClick(t){const{pointerType:r,button:n,buttons:i,x:s,y:o,native:a,eventId:l}=t.data,c=a.pointerId,{cancelable:h,timestamp:f}=t;return{type:"immediate-click",pointerId:c,pointerType:r,button:n,buttons:i,x:s,y:o,native:a,timestamp:f,mapPoint:this._getMapPoint(s,o),eventId:l,cancelable:h,stopPropagation:()=>t.stopPropagation(),async:m=>t.async(m),preventDefault:()=>t.preventDefault()}}_wrapImmediateDoubleClick(t){const{pointerType:r,button:n,buttons:i,x:s,y:o,native:a,eventId:l}=t.data,c=a.pointerId,{cancelable:h,timestamp:f}=t;return{type:"immediate-double-click",pointerId:c,pointerType:r,button:n,buttons:i,x:s,y:o,native:a,timestamp:f,mapPoint:this._getMapPoint(s,o),eventId:l,cancelable:h,stopPropagation:()=>t.stopPropagation(),async:m=>t.async(m),preventDefault:()=>t.preventDefault()}}_wrapHold(t){const{pointerType:r,button:n,buttons:i,x:s,y:o,native:a}=t.data,{cancelable:l,timestamp:c}=t;return{type:"hold",pointerType:r,button:n,buttons:i,x:s,y:o,native:a,timestamp:c,mapPoint:this._getMapPoint(s,o),cancelable:l,stopPropagation:()=>t.stopPropagation(),async:h=>t.async(h),preventDefault:()=>t.preventDefault()}}_getMapPoint(t,r){return this.view.toMap(Kr(t,r),{exclude:[]})}_wrapDrag(t){const r=t.data,{x:n,y:i}=r.center,{action:s,pointerType:o,button:a}=r;if(s==="start"&&(this._latestDragStart=r),!this._latestDragStart)return;const l=r.pointer.native,c=r.buttons,{cancelable:h,timestamp:f}=t,m={x:this._latestDragStart.center.x,y:this._latestDragStart.center.y};return s==="end"&&(this._latestDragStart=void 0),{type:"drag",action:s,x:n,y:i,origin:m,pointerType:o,button:a,buttons:c,radius:r.radius,angle:wU(r.angle),native:l,timestamp:f,cancelable:h,stopPropagation:()=>t.stopPropagation(),async:y=>t.async(y),preventDefault:()=>t.preventDefault()}}_wrapKeyDown(t){const{key:r,repeat:n,native:i}=t.data,{cancelable:s,timestamp:o}=t;return{type:"key-down",key:r,repeat:n,native:i,timestamp:o,cancelable:s,stopPropagation:()=>t.stopPropagation(),async:a=>t.async(a),preventDefault:()=>t.preventDefault()}}_wrapKeyUp(t){const{key:r,native:n}=t.data,{cancelable:i,timestamp:s}=t;return{type:"key-up",key:r,native:n,timestamp:s,cancelable:i,stopPropagation:()=>t.stopPropagation(),async:o=>t.async(o),preventDefault:()=>t.preventDefault()}}_wrapPointer(t,r){const{x:n,y:i,button:s,buttons:o,native:a,eventId:l}=t.data,c=a.pointerId,h=a.pointerType,{cancelable:f,timestamp:m}=t;return{type:r,x:n,y:i,pointerId:c,pointerType:h,button:s,buttons:o,native:a,timestamp:m,eventId:l,cancelable:f,stopPropagation:()=>t.stopPropagation(),async:y=>t.async(y),preventDefault:()=>t.preventDefault()}}_wrapPointerDrag(t){const{x:r,y:n,buttons:i,native:s,eventId:o}=t.data.currentEvent,{button:a}=t.data.startEvent,l=t.data.startEvent.native.pointerId,c=t.data.startEvent.native.pointerType,h=t.data.action,f={x:t.data.startEvent.x,y:t.data.startEvent.y},{cancelable:m,timestamp:y}=t;return{type:"pointer-drag",x:r,y:n,pointerId:l,pointerType:c,button:a,buttons:i,action:h,origin:f,native:s,timestamp:y,eventId:o,cancelable:m,stopPropagation:()=>t.stopPropagation(),async:g=>t.async(g),preventDefault:()=>t.preventDefault()}}_wrapMouseWheel(t){const{cancelable:r,data:n,timestamp:i}=t,{x:s,y:o,deltaY:a,native:l}=n;return{type:"mouse-wheel",x:s,y:o,deltaY:a,native:l,timestamp:i,cancelable:r,stopPropagation:()=>t.stopPropagation(),async:c=>t.async(c),preventDefault:()=>t.preventDefault()}}_wrapGamepad(t){const{action:r,state:n,device:i}=t.data,{cancelable:s,timestamp:o}=t,{buttons:a,axes:l}=n;return{type:"gamepad",device:i,timestamp:o,action:r,buttons:a,axes:l,cancelable:s,stopPropagation:()=>t.stopPropagation(),async:c=>t.async(c),preventDefault:()=>t.preventDefault()}}};var Ev,pF,fF;(function(e){e[e.USER=0]="USER",e[e.MANAGER=1]="MANAGER"})(Ev||(Ev={})),function(e){e[e.None=0]="None",e[e.Unfocused=1]="Unfocused",e[e.Focused=2]="Focused",e[e.Unselected=4]="Unselected",e[e.Selected=8]="Selected",e[e.All=15]="All"}(pF||(pF={})),function(e){e[e.None=0]="None",e[e.Custom1=16]="Custom1",e[e.Custom2=32]="Custom2",e[e.Custom3=64]="Custom3",e[e.Custom4=128]="Custom4",e[e.Custom5=256]="Custom5",e[e.Custom6=512]="Custom6",e[e.Custom7=1024]="Custom7",e[e.Custom8=2048]="Custom8",e[e.Custom9=4096]="Custom9",e[e.Custom10=8192]="Custom10",e[e.Custom11=16384]="Custom11",e[e.Custom12=32768]="Custom12",e[e.All=65520]="All"}(fF||(fF={}));function hge(e){return[e.on("before-add",t=>{const r=t.item;if(r==null||e.includes(r))return Z.getLogger("esri.views.interactive.interactiveToolUtils").warn("Tool is either already in the list of tools or tool is `null`. Not adding tool."),void t.preventDefault();r.onAdd()}),e.on("after-remove",t=>{const r=t.item;r.active&&(r.view.activeTool=null),r.destroy()})]}function OC(e){return e.visible&&e.getEditableFlag!=null&&e.getEditableFlag(Ev.USER)&&e.getEditableFlag(Ev.MANAGER)}function _a(e){return Kr(e.x,e.y)}function cB(e,t){var n;const r=(n=e instanceof HTMLElement?e:e.surface)==null?void 0:n.getBoundingClientRect();return r?Kr(t.clientX-r.left,t.clientY-r.top):Kr(0,0)}function mF(e,t){return t instanceof Event?cB(e,t):_a(t)}function yF(e){if(e instanceof Event)return!0;if(typeof e=="object"&&"type"in e)switch(e.type){case"click":case"double-click":case"pointer-down":case"pointer-drag":case"pointer-enter":case"pointer-leave":case"pointer-up":case"pointer-move":case"immediate-click":case"immediate-double-click":case"hold":case"drag":case"mouse-wheel":return!0;default:return!1}return!1}let pge=class{constructor(){this._pointerLocations=new Map,this._hoveredManipulators=new Map,this._grabbedManipulators=new Map,this._draggedManipulators=new Map,this._stopDrag=!1,this._revertToNullActiveTool=!1,this._cursor=null}get cursor(){return this._cursor}hasFocusedManipulators(){return this._grabbedManipulators.size>0||this._draggedManipulators.size>0}handleInputEvent(t,r){const n=()=>t.stopPropagation();switch(t.type){case"pointer-move":gF(t.pointerType)&&this._pointerLocations.set(t.pointerId,{x:t.x,y:t.y,pointerType:t.pointerType});break;case"drag":this._grabbedManipulators.size>0&&(this._stopDrag=!0),this._stopDrag&&(n(),t.action==="end"&&(this._stopDrag=!1));break;case"pointer-down":{if(!vF(t))break;const i=_a(t),s=this._intersect(i,t.pointerType,r.forEachTool);if(s==null)break;const o=s.manipulator,a=s.tool;o==null||a==null||!o.interactive||o.grabbable&&o.grabbableForEvent(t)||!o.grabbing||o.dragging||this._ungrabManipulatorBeforeDragging(o,t,r),o!=null&&a!=null&&o.interactive&&o.grabbable&&o.grabbableForEvent(t)&&!o.grabbing&&(this._grabbedManipulators.set(t.pointerId,{manipulator:o,tool:a,start:i,pointerType:t.pointerType}),this._grabbedManipulators.size===1&&r.activeTool==null&&(this._revertToNullActiveTool=!0,r.setActiveTool(s.tool)),o.grabbing=!0,o.events.emit("grab-changed",{action:"start",pointerType:t.pointerType,screenPoint:i}),n());break}case"pointer-up":this._draggedManipulators.has(t.pointerId)||this._handlePointerEnd(t,r);break;case"pointer-drag":{if(!vF(t))break;const i=this._grabbedManipulators.get(t.pointerId),s=Mh(i,({manipulator:h})=>h),o=Mh(i,({tool:h})=>h);if(s==null||o==null)break;const a=_a(t);a.x=Yi(a.x,0,r.view.width),a.y=Yi(a.y,0,r.view.height);const l=i.start,c=this._draggedManipulators.get(t.pointerId);switch(t.action){case"start":case"update":t.action!=="update"&&this._grabbedManipulators.size!==1||(s.dragging=!0,c?s.events.emit("drag",{action:"update",start:l,screenPoint:a}):s.events.emit("drag",{action:"start",start:l,screenPoint:a,pointerType:t.pointerType}),this._draggedManipulators.set(t.pointerId,{tool:o,manipulator:s,start:l}));break;case"end":s.dragging=!1,c&&s.events.emit("drag",{action:"end",start:l,screenPoint:a}),this._draggedManipulators.delete(t.pointerId),this._handlePointerEnd(t,r)}n();break}case"immediate-click":{const i=_a(t),s=this._intersect(i,t.pointerType,r.forEachTool);if(fge(t)||r.forEachTool(c=>{if((s==null||s.tool!==c||c.automaticManipulatorSelection)&&c.manipulators){let h=!1;c.manipulators.forEach(({manipulator:f})=>{f.selected&&(f.selected=!1,h=!0)}),h&&c.onManipulatorSelectionChanged&&c.onManipulatorSelectionChanged()}}),s==null)break;const{manipulator:o,tool:a}=s;if(!o.interactive)break;o.selectable&&a.automaticManipulatorSelection&&(o.selected=!o.selected,a.onManipulatorSelectionChanged&&a.onManipulatorSelectionChanged());const l=t.native.shiftKey;o.events.emit("immediate-click",{screenPoint:i,button:t.button,pointerType:t.pointerType,shiftKey:l,stopPropagation:n});break}case"click":{const i=_a(t),s=this._intersect(i,t.pointerType,r.forEachTool),o=s!=null?s.manipulator:null;if(o==null||!o.interactive)break;const a=t.native.shiftKey;o.events.emit(t.type,{screenPoint:i,button:t.button,pointerType:t.pointerType,shiftKey:a}),n();break}case"double-click":{const i=_a(t),s=this._intersect(i,t.pointerType,r.forEachTool),o=s!=null?s.manipulator:null;if(o==null||!o.interactive)break;const a=t.native.shiftKey;o.events.emit("double-click",{screenPoint:i,button:t.button,pointerType:t.pointerType,shiftKey:a,stopPropagation:n});break}case"immediate-double-click":{const i=_a(t),s=this._intersect(i,t.pointerType,r.forEachTool),o=s!=null?s.manipulator:null;if(o==null||!o.interactive)break;const a=t.native.shiftKey;o.events.emit("immediate-double-click",{screenPoint:i,button:t.button,pointerType:t.pointerType,shiftKey:a,stopPropagation:n});break}}this._onFocusChange(r.forEachTool)}_ungrabManipulatorBeforeDragging(t,r,n){t.grabbing=!1,t.events.emit("grab-changed",{action:"end",pointerType:r.pointerType,screenPoint:_a(r)}),this._grabbedManipulators.forEach(({manipulator:i},s)=>{i===t&&this._grabbedManipulators.delete(s)}),this._afterManipulatorUngrab(n.setActiveTool)}_handlePointerEnd(t,r){const n=Mh(this._grabbedManipulators.get(t.pointerId),({manipulator:i})=>i);n!=null&&n.grabbing&&(n.grabbing=!1,n.events.emit("grab-changed",{action:"end",pointerType:t.pointerType,screenPoint:_a(t)}),this._grabbedManipulators.delete(t.pointerId),this._afterManipulatorUngrab(r.setActiveTool))}_cursorFromMap(t){let r=null;return t2(t,({manipulator:n})=>!(n==null||!n.interactive)&&(n.grabbing&&n.grabCursor?(r=n.grabCursor,!0):!!n.cursor&&(r=n.cursor,!0))),r}_onFocusChange(t){this._updateCursor(),this._updateFocusedManipulatorTools(t)}_updateCursor(){this._grabbedManipulators.size>0?this._cursor=this._cursorFromMap(this._grabbedManipulators)||"grabbing":this._hoveredManipulators.size>0?this._cursor=this._cursorFromMap(this._hoveredManipulators)||"pointer":this._cursor=null}_updateFocusedManipulatorTools(t){const r=new Set,n=new Set;this._grabbedManipulators.forEach(({tool:i})=>{r.add(i)}),this._hoveredManipulators.forEach(({tool:i})=>{n.add(i)}),t(i=>{i.hasGrabbedManipulators=r.has(i),i.hasHoveredManipulators=n.has(i);const s=this._grabbedManipulators.values(),o=Kte(s,({tool:a})=>a===i);i.firstGrabbedManipulator=o!=null?o.manipulator:null})}clearPointers(t,{forEachTool:r,setActiveTool:n},i=!0,s){const o=(a,l)=>a===t&&(s==null||s===l);this._grabbedManipulators.forEach(({tool:a,manipulator:l,pointerType:c},h)=>{o(a,l)&&(this._grabbedManipulators.delete(h),l.grabbing=!1,l.events.emit("grab-changed",{action:"end",screenPoint:null,pointerType:c}))}),this._draggedManipulators.forEach(({tool:a,manipulator:l},c)=>{o(a,l)&&(this._draggedManipulators.delete(c),l.dragging=!1,l.events.emit("drag",{action:"cancel"}))}),i&&this._hoveredManipulators.forEach(({tool:a,manipulator:l},c)=>{o(a,l)&&(this._hoveredManipulators.delete(c),l.hovering=!1)}),this._afterManipulatorUngrab(n),this._onFocusChange(r)}_intersect(t,r,n){let i=null;return n(s=>{if(s.manipulators==null||!OC(s))return!1;const o=s.manipulators.intersect(t,r);return o!=null&&(i={tool:s,manipulator:o},!0)}),i}updateHoveredStateFromKnownPointers(t){this._pointerLocations.forEach((r,n)=>{this._updateHoveredStateForPointerAtScreenPosition(Kr(r.x,r.y),n,r.pointerType,t)})}handleHoverEvent(t,r){t.type!=="pointer-up"&&t.type!=="immediate-click"&&t.type!=="pointer-move"||!gF(t.pointerType)||this._updateHoveredStateForPointerAtScreenPosition(_a(t),t.pointerId,t.pointerType,r)}_updateHoveredStateForPointerAtScreenPosition(t,r,n,i){let s=this._intersect(t,n,i);const o=Mh(this._hoveredManipulators.get(r),({manipulator:a})=>a);s==null||s.manipulator.interactive||(s=null),s!=null&&o===s.manipulator||(o!=null&&(o.hovering=!1),s!=null?(s.manipulator.hovering=!0,this._hoveredManipulators.set(r,s)):this._hoveredManipulators.delete(r),this._onFocusChange(i))}_afterManipulatorUngrab(t){this._grabbedManipulators.size===0&&this._revertToNullActiveTool&&(t(null),this._revertToNullActiveTool=!1)}};function gF(e){return e==="mouse"}function vF(e){return e.pointerType!=="mouse"||e.button===0}function fge(e){return!!e.native.shiftKey}const wF="attached",dT="tools",mge=1e3;let lo=class extends JS{constructor(t){super(t),this._clock=Gm,this._manipulatorState=new pge,this.tools=new Le,this.cursor=null,this._interacting=!1,this._interactingTimeout=null,this._forEachTool=r=>{for(const n of this.tools.items)if(r(n))return}}initialize(){this.handles.add([this.view.on(aB,t=>{this._handleInputEvent(t)},Gc.TOOL),...hge(this.tools),this.tools.on("before-add",({item:t})=>{this._updateToolEditableFlag(t)}),this.tools.on("before-remove",({item:t})=>{this._manipulatorState.clearPointers(t,this._manipulatorStateEventArgs),this._updateCursor()}),this.tools.on("change",()=>{this._refreshToolWatchers()})])}destroy(){this.detach(),this.handles.removeAll()}get _manipulatorStateEventArgs(){return{forEachTool:this._forEachTool,activeTool:this.activeTool,setActiveTool:t=>{this.activeTool=t},view:this.view}}set activeTool(t){if(t!=null&&!this.view.ready)return void Z.getLogger(this).error("Cannot set active tool while view is not ready.");if(t===this.activeTool)return;const r=this.activeTool;this._set("activeTool",t),r!=null&&r.deactivate(),t!=null&&t.activate(),this._removeIncompleteTools(t);for(const n of this.tools){this._updateToolEditableFlag(n);const i=OC(n);this.activeTool!=null&&i||this._manipulatorState.clearPointers(n,this._manipulatorStateEventArgs,!i)}this._updateCursor()}get updating(){var t;return this.updatingHandles.updating||this.tools.some(r=>r.updating)||(((t=this.textures)==null?void 0:t.updating)??!1)}get interacting(){return this._interacting}_clearInteractingTimeout(){this._interactingTimeout=or(this._interactingTimeout)}_startInteractingTimeout(){this._clearInteractingTimeout(),this._interactingTimeout=this._clock.setTimeout(()=>this._interacting=!1,mge)}attach(){var t;this.view.type==="3d"?(this._set("textures",new Ig(this.view._stage,this.view.resourceController.scheduler)),this.handles.add([Ee(()=>{const{state:r}=this.view;return"camera"in r&&r.camera},()=>this._forEachManipulator(r=>r.onViewChange())),(t=this.view.elevationProvider)==null?void 0:t.on("elevation-change",r=>this._forEachManipulator(n=>n.onElevationChange(r))),Hl(()=>this._set("textures",Gt(this.textures)))],wF)):this.handles.add(Ee(()=>this.view.extent,()=>this._forEachManipulator(r=>r.onViewChange())))}detach(){this.activeTool=null,this.tools.removeAll(),this.handles.remove(wF),this._clearInteractingTimeout(),this._interacting=!1}_forEachManipulator(t){this._forEachTool(r=>{r.manipulators&&r.manipulators.forEach(({manipulator:n})=>t(n,r))})}_handleInputEvent(t){let r=!1;const n={...t,stopPropagation:()=>{r=!0,t.stopPropagation()}};this.activeTool!=null?this.activeTool.handleInputEvent&&this.activeTool.handleInputEvent(n):this._forEachTool(i=>{!r&&i.visible&&i.handleInputEvent(n)}),!r&&t.type==="key-down"&&t.key==="Escape"&&this.activeTool&&(t.stopPropagation(),this.activeTool=null),this._manipulatorState.handleInputEvent(n,this._manipulatorStateEventArgs),r||this.activeTool==null||this.activeTool.handleInputEventAfter(n),this._manipulatorState.handleHoverEvent(n,this._forEachTool),this._updateCursor(),t.type==="pointer-move"&&(this._manipulatorState.hasFocusedManipulators()||this.activeTool)&&(this._interacting=!0,this._startInteractingTimeout())}_refreshToolWatchers(){this.handles.remove(dT),this._forEachTool(t=>{if(t instanceof $e){const r=Ee(()=>[t.cursor,t.visible,t.editable],()=>{OC(t)||this._manipulatorState.clearPointers(t,this._manipulatorStateEventArgs),this._updateCursor()});this.handles.add(r,dT)}t.manipulators&&this.handles.add([t.manipulators.on("after-remove",r=>{this._manipulatorState.clearPointers(t,this._manipulatorStateEventArgs,!0,r.item.manipulator)}),t.manipulators.on("change",()=>{this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()})],dT)}),this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()}_updateToolEditableFlag(t){var r;(r=t.setEditableFlag)==null||r.call(t,Ev.MANAGER,this.activeTool==null||t===this.activeTool)}_updateCursor(){let t=this._manipulatorState.cursor;t==null&&this._forEachTool(r=>!(r.cursor==null||!r.visible)&&(t=r.cursor,!0)),this._get("cursor")!==t&&this._set("cursor",t)}_removeIncompleteTools(t){this.tools.filter(r=>(t==null||r!==t)&&!r.created&&r.removeIncompleteOnCancel).forEach(r=>{this.tools.remove(r)})}get test(){return{setClock:t=>this._clock=t}}};u([d({constructOnly:!0,nonNullable:!0})],lo.prototype,"view",void 0),u([d({readOnly:!0,nonNullable:!0})],lo.prototype,"textures",void 0),u([d({value:null})],lo.prototype,"activeTool",null),u([d({readOnly:!0,type:Le})],lo.prototype,"tools",void 0),u([d({readOnly:!0})],lo.prototype,"cursor",void 0),u([d({readOnly:!0})],lo.prototype,"updating",null),u([d()],lo.prototype,"_interacting",void 0),u([d({readOnly:!0})],lo.prototype,"interacting",null),lo=u([E("esri.views.ToolViewManager")],lo);let Xp=class extends $e{constructor(t){super(),this.nativeIndex=null,this._detectedDeviceType="unknown",t.mapping==="standard"?this._detectedDeviceType="standard":yge.test(t.id)?this._detectedDeviceType="spacemouse":this._detectedDeviceType="unknown",this.nativeIndex=t.index}get native(){const t=navigator.getGamepads?navigator.getGamepads():[];return this.nativeIndex!=null&&this.nativeIndex<t.length?t[this.nativeIndex]:null}get deviceType(){return this._detectedDeviceType}get axisThreshold(){return gge[this.deviceType]}};u([d({nonNullable:!0,readOnly:!0})],Xp.prototype,"nativeIndex",void 0),u([d({type:String,readOnly:!0})],Xp.prototype,"deviceType",null),u([d({type:Number,readOnly:!0})],Xp.prototype,"axisThreshold",null),Xp=u([E("esri.views.input.gamepad.GamepadInputDevice")],Xp);const yge=new RegExp("^(3dconnexion|space(mouse|navigator|pilot|explorer))","i"),gge={standard:.15,spacemouse:.025,unknown:0},t3=Xp;let Cg=class extends $e{constructor(...t){super(...t),this.devices=new Le,this.enabledFocusMode="document"}};u([d({type:Le.ofType(t3),readOnly:!0})],Cg.prototype,"devices",void 0),u([d({type:["document","view","none"]})],Cg.prototype,"enabledFocusMode",void 0),Cg=u([E("esri.views.input.gamepad.GamepadSettings")],Cg);const vge=Cg;let Q_=class extends $e{constructor(){super(...arguments),this.gamepad=new vge}};u([d({readOnly:!0})],Q_.prototype,"gamepad",void 0),Q_=u([E("esri.views.input.Input")],Q_);const wge=Q_;let Zu=class extends $e{constructor(t){super(t),this.enabled=!0,this.device=null,this.mode="pan",this.tiltDirection="forward-down",this.velocityFactor=1}};u([d({type:Boolean,nonNullable:!0})],Zu.prototype,"enabled",void 0),u([d({type:t3})],Zu.prototype,"device",void 0),u([d({type:["pan","zoom"],nonNullable:!0})],Zu.prototype,"mode",void 0),u([d({type:["forward-down","forward-up"],nonNullable:!0})],Zu.prototype,"tiltDirection",void 0),u([d({type:Number,nonNullable:!0})],Zu.prototype,"velocityFactor",void 0),Zu=u([E("esri.views.navigation.gamepad.GamepadSettings")],Zu);const dB=Zu;let Yd=class extends $e{constructor(t){super(t),this.browserTouchPanEnabled=!0,this.gamepad=new dB,this.momentumEnabled=!0,this.mouseWheelZoomEnabled=!0}};u([d({type:Boolean})],Yd.prototype,"browserTouchPanEnabled",void 0),u([d({type:dB,nonNullable:!0})],Yd.prototype,"gamepad",void 0),u([d({type:Boolean})],Yd.prototype,"momentumEnabled",void 0),u([d({type:Boolean})],Yd.prototype,"mouseWheelZoomEnabled",void 0),Yd=u([E("esri.views.navigation.Navigation")],Yd);const hB=Yd,pB={mapserver:"MapServer",imageserver:"ImageServer",featureserver:"FeatureServer",sceneserver:"SceneServer",streamserver:"StreamServer",vectortileserver:"VectorTileServer"},fB=Object.values(pB),mB=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(${fB.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),_ge=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/([^\\/\\n]+)\\/(${fB.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),bge=/(.*?)\/(?:layers\/)?(\d+)\/?$/i;function lOe(e){return!!mB.test(e)}function oy(e){if(e==null)return null;const t=jn(e),r=t.path.match(mB)||t.path.match(_ge);if(!r)return null;const[,n,i,s,o]=r,a=i.indexOf("/");return{title:yB(a!==-1?i.slice(a+1):i),serverType:pB[s.toLowerCase()],sublayer:o!=null&&o!==""?parseInt(o,10):null,url:{path:n}}}function Sge(e){const t=jn(e).path.match(bge);return t?{serviceUrl:t[1],sublayerId:Number(t[2])}:null}function yB(e){return(e=e.replaceAll(/\s*[/_]+\s*/g," "))[0].toUpperCase()+e.slice(1)}function uOe(e,t){const r=[];if(e){const n=oy(e);n!=null&&n.title&&r.push(n.title)}if(t){const n=yB(t);r.push(n)}if(r.length===2){if(r[0].toLowerCase().includes(r[1].toLowerCase()))return r[0];if(r[1].toLowerCase().includes(r[0].toLowerCase()))return r[1]}return r.join(" - ")}function gB(e){if(!e)return!1;const t=".arcgis.com/",r="//services",n="//tiles",i="//features",s=(e=e.toLowerCase()).includes(t),o=e.includes(r)||e.includes(n)||e.includes(i);return s&&o}function xge(e,t){return e&&Sz(xz(e,t))}function cOe(e){let{url:t}=e;if(!t)return{url:t};t=xz(t,e.logger);const r=jn(t),n=oy(r.path);let i;if(n!=null)n.sublayer!=null&&e.layer.layerId==null&&(i=n.sublayer),t=n.url.path;else if(e.nonStandardUrlAllowed){const s=Sge(r.path);s!=null&&(t=s.serviceUrl,i=s.sublayerId)}return{url:Sz(t),layerId:i}}function dOe(e,t,r,n,i){cp(t,n,"url",i),n.url&&e.layerId!=null&&(n.url=rp(n.url,r,e.layerId.toString()))}function hOe(e){if(!e)return!1;const t=e.toLowerCase(),r=t.includes("/services/"),n=t.includes("/mapserver/wmsserver"),i=t.includes("/imageserver/wmsserver"),s=t.includes("/wmsserver");return r&&(n||i||s)}var _F;function $ge(e){var n;const t=e.url?oy(e.url):void 0;return!(((n=e.spatialReference)==null?void 0:n.vcsWkid)==null&&t!=null&&t.serverType==="ImageServer")&&vB(e)&&e.heightModelInfo?e.heightModelInfo:Tge(e)?e3.deriveUnitFromSR(Mge,e.spatialReference):null}function vB(e){return"heightModelInfo"in e}function wB(e){if(e.type==="unknown"||!("capabilities"in e))return!1;switch(e.type){case"csv":case"feature":case"geojson":case"subtype-group":case"ogc-feature":case"oriented-imagery":case"wfs":case"knowledge-graph-sublayer":return!0;default:return!1}}function Tge(e){return wB(e)?!!(e.capabilities&&e.capabilities.data&&e.capabilities.data.supportsZ):_B(e)}function Ege(e){return e.layers!=null||_B(e)||wB(e)||vB(e)}function _B(e){switch(e.type){case"building-scene":case"elevation":case"integrated-mesh":case"point-cloud":case"scene":case"voxel":return!0;case"base-dynamic":case"base-elevation":case"base-tile":case"bing-maps":case"csv":case"dimension":case"geojson":case"feature":case"subtype-group":case"geo-rss":case"graphics":case"group":case"imagery":case"imagery-tile":case"kml":case"knowledge-graph":case"link-chart":case"knowledge-graph-sublayer":case"line-of-sight":case"map-image":case"map-notes":case"media":case"ogc-feature":case"open-street-map":case"oriented-imagery":case"route":case"stream":case"tile":case"unknown":case"unsupported":case"vector-tile":case"video":case"wcs":case"web-tile":case"wfs":case"wms":case"wmts":case null:return!1}return!1}(function(e){e[e.Ok=0]="Ok",e[e.Units=1]="Units",e[e.HeightModel=2]="HeightModel",e[e.CRS=3]="CRS",e[e.Unsupported=4]="Unsupported"})(_F||(_F={}));const Mge=new e3({heightModel:"gravity-related-height"});var KS;(function(e){e[e.Global=1]="Global",e[e.Local=2]="Local"})(KS||(KS={}));let RC,hT=null;async function Ige(e){hT||(hT=ie(()=>import("./geometryServiceUtils-b6aa2507.js"),[]).then(t=>RC=t)),await hT,qt(e)}async function bB(e,t,r,n){if(!e)return null;const i=e.spatialReference;return yd()||ru(i,t)?uu(e,t):RC?RC.projectGeometry(e,t,r,n):(await Promise.race([Ige(n),tu(n)]),bB(e,t,r,n))}let Rt=class extends $e{constructor(t){super(t),this.required={tileInfo:!1,heightModelInfo:!1,extent:!1},this.defaultSpatialReference=null,this.userSpatialReference=null,this.sourcePreloadCount=10,this.priorityCollection=null,this.requiresExtentInSpatialReference=!0,this.suspended=!1,this._projectExtentTask={task:null,input:null,output:null,spatialReference:null}}destroy(){this._projectExtentTask.task&&(this._projectExtentTask.task=Kh(this._projectExtentTask.task)),this._set("map",null)}get ready(){return!this._spatialReferenceTask.updating&&!this._tileInfoTask.updating&&!this._extentTask.updating}get heightModelInfoReady(){return!this._heightModelInfoTask.updating}get spatialReference(){return this.userSpatialReference!=null?this.userSpatialReference:this._spatialReferenceTask.spatialReference}get extent(){return this._extentTask.extent}get heightModelInfo(){return this._heightModelInfoTask.heightModelInfo}get vcsWkid(){return this._heightModelInfoTask.vcsWkid}get latestVcsWkid(){return this._heightModelInfoTask.latestVcsWkid}get viewingMode(){return this.userSpatialReference==null||this.userSpatialReference.equals(this._spatialReferenceTask.spatialReference)?this._spatialReferenceTask.viewingMode:null}get tileInfo(){return this._tileInfoTask.tileInfo}get mapCollections(){var n,i,s,o;const t=(n=this.map)==null?void 0:n.call(this),r=[];return this.priorityCollection!=null&&r.push(this.priorityCollection),r.push({parent:t==null?void 0:t.basemap,layers:(i=t==null?void 0:t.basemap)==null?void 0:i.baseLayers},{layers:t==null?void 0:t.layers},{parent:t==null?void 0:t.ground,layers:(s=t==null?void 0:t.ground)==null?void 0:s.layers},{parent:t==null?void 0:t.basemap,layers:(o=t==null?void 0:t.basemap)==null?void 0:o.referenceLayers}),r}get _allLayers(){return this._collectLayers(this.mapCollections)}get _spatialReferenceTask(){if(this.suspended)return this._get("_spatialReferenceTask")??{updating:!1};const{layers:t,updating:r}=this._allLayers;let n=null;for(const s of t){const o=this._getSupportedSpatialReferences(s);if(o.length>0){const a=this._narrowDownSpatialReferenceCandidates(n,o);a!=null&&(n=a)}if(n!=null&&n.length===1)break}if(r&&(n==null||n.length!==1))return{updating:!0};const i=this._pickSpatialReferenceCandidate(n);return{spatialReference:i!=null?i.spatialReference:null,viewingMode:i!=null?i.viewingMode:null,updating:!1}}get _tileInfoTask(){var n,i,s,o,a,l,c;if(!this.required.tileInfo)return this._get("_tileInfoTask")??{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const{layers:t,updating:r}=this._collectLayers([{parent:(i=(n=this.map)==null?void 0:n.call(this))==null?void 0:i.basemap,layers:(a=(o=(s=this.map)==null?void 0:s.call(this))==null?void 0:o.basemap)==null?void 0:a.baseLayers},{layers:(c=(l=this.map)==null?void 0:l.call(this))==null?void 0:c.layers}]);if(t&&t.length>0&&"tileInfo"in t[0]){const h=t[0].tileInfo;return{tileInfo:h&&h.spatialReference.equals(this.spatialReference)?h:null,updating:!1}}return{updating:r}}get _heightModelInfoTask(){var n,i,s;if(!this.required.heightModelInfo||this.suspended&&((n=this._get("_heightModelInfoTask"))!=null&&n.heightModelInfo))return this._get("_heightModelInfoTask")??{updating:!1};const{layers:t,updating:r}=this._allLayers;for(const o of t)if(Ege(o)){const a=$ge(o);if(a)return{heightModelInfo:a,vcsWkid:(i=o.spatialReference)==null?void 0:i.vcsWkid,latestVcsWkid:(s=o.spatialReference)==null?void 0:s.latestVcsWkid,updating:!1}}return{updating:r}}get _extentCandidatesTask(){if(this.suspended||!this.required.extent)return this._get("_extentCandidatesTask")??{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const t=this._allLayers,r=t.updating,n=[];for(const i of t.layers){const s="fullExtents"in i&&i.fullExtents||(i.fullExtent!=null?[i.fullExtent]:[]),o=this.requiresExtentInSpatialReference?null:s[0],a=s.find(l=>l.spatialReference.equals(this.spatialReference))??o;if(a)return{candidates:[{extent:a,layer:i}],updating:!1};if(this._getSupportedSpatialReferences(i).length>0)for(const l of s)n.push({extent:l,layer:i})}return{candidates:n,updating:r}}get _extentTask(){const{candidates:t,updating:r}=this._extentCandidatesTask;if(r)return{updating:r};if(t==null||t.length===0)return{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const n=this._pickExtentCandidate(t),i=this.spatialReference;return n.extent.equals(this._projectExtentTask.input)&&i.equals(this._projectExtentTask.spatialReference)?{extent:this._projectExtentTask.output,updating:this._projectExtentTask.task!=null&&!this._projectExtentTask.task.finished}:(this._projectExtentTask.task!=null&&(this._projectExtentTask.task=Kh(this._projectExtentTask.task)),this._projectExtentTask={input:n.extent.clone(),output:null,spatialReference:i.clone(),task:PO(async s=>{try{const o=await bB(n.extent,i,"portalItem"in n.layer?n.layer.portalItem:void 0,s);this._projectExtentTask={...this._projectExtentTask,task:null,output:o}}catch{if(Go(s))return;this._projectExtentTask={...this._projectExtentTask,task:null}}})},{updating:!0})}_narrowDownSpatialReferenceCandidates(t,r){if(t==null)return r;const n=[],i=(s,o)=>s!=null?o!=null?s===o&&s:s:o;for(const s of t)for(const o of r){if(!s.spatialReference.equals(o.spatialReference))continue;const a=i(s.viewingMode,o.viewingMode);if(a!==!1){n.push({spatialReference:s.spatialReference,viewingMode:a});break}}return n.length>0?n:null}_pickSpatialReferenceCandidate(t){const r=this.defaultSpatialReference;return t==null||t.length<1?r!=null?{spatialReference:r,viewingMode:null}:null:(r!=null&&t.length>1&&t.some(({spatialReference:n})=>n.equals(r))&&(t=t.filter(({spatialReference:n})=>n.equals(r))),t.length>1&&t.some(({viewingMode:n})=>n!==KS.Local)&&(t=t.filter(({viewingMode:n})=>n!==KS.Local)),t[0])}_getSupportedSpatialReferences(t){const r="supportedSpatialReferences"in t&&t.supportedSpatialReferences||(t.spatialReference?[t.spatialReference]:[]);if(r.length===0)return[];const n=[];for(const i of r){const s=this.getSpatialReferenceSupport({spatialReference:i,layer:t});if(s!=null){const o=s.constraints!=null?s.constraints:[{spatialReference:i,viewingMode:null}];for(const{spatialReference:a,viewingMode:l}of o)this.requiresExtentInSpatialReference&&this.userSpatialReference!=null&&!a.equals(this.userSpatialReference)||n.push({spatialReference:a,viewingMode:l})}}return n}_pickExtentCandidate(t){const r=this.spatialReference;return t.find(({extent:n})=>r.equals(n.spatialReference))||t[0]}_collectLayers(t){var n;if(this._loadMaybe((n=this.map)==null?void 0:n.call(this))!=="loaded")return{layers:[],updating:!0};const r=new Cge;for(const i of t)if(this._collectCollection(i,r),r.preloading===this.sourcePreloadCount)break;return{layers:r.layers,updating:r.updating}}_collectCollection(t,r){if(t.layers){switch(this._loadMaybe(t.parent)){case"loading":return r.updating=!0,void++r.preloading;case"failed":return}for(const n of t.layers){switch(this._loadMaybe(n)){case"failed":continue;case"loading":r.updating=!0,++r.preloading;break;case"loaded":r.updating||r.layers.push(n),"layers"in n&&this._collectCollection({layers:n.layers},r)}if(r.preloading===this.sourcePreloadCount)break}}}_loadMaybe(t){return t&&"loadStatus"in t&&t.loadStatus!=null?t.loadStatus==="not-loaded"?(t.load().catch(r=>{Ei(r)||console.log(r)}),"loading"):t.loadStatus:"loaded"}};u([d()],Rt.prototype,"required",void 0),u([d({constructOnly:!0})],Rt.prototype,"map",void 0),u([d({constructOnly:!0})],Rt.prototype,"getSpatialReferenceSupport",void 0),u([d()],Rt.prototype,"defaultSpatialReference",void 0),u([d()],Rt.prototype,"userSpatialReference",void 0),u([d()],Rt.prototype,"sourcePreloadCount",void 0),u([d()],Rt.prototype,"priorityCollection",void 0),u([d()],Rt.prototype,"requiresExtentInSpatialReference",void 0),u([d()],Rt.prototype,"suspended",void 0),u([d({readOnly:!0})],Rt.prototype,"ready",null),u([d({readOnly:!0})],Rt.prototype,"heightModelInfoReady",null),u([d({readOnly:!0})],Rt.prototype,"spatialReference",null),u([d({readOnly:!0})],Rt.prototype,"extent",null),u([d({readOnly:!0})],Rt.prototype,"heightModelInfo",null),u([d({readOnly:!0})],Rt.prototype,"vcsWkid",null),u([d({readOnly:!0})],Rt.prototype,"latestVcsWkid",null),u([d({readOnly:!0})],Rt.prototype,"viewingMode",null),u([d({readOnly:!0})],Rt.prototype,"tileInfo",null),u([d({readOnly:!0})],Rt.prototype,"mapCollections",null),u([d({readOnly:!0})],Rt.prototype,"_allLayers",null),u([d({readOnly:!0})],Rt.prototype,"_spatialReferenceTask",null),u([d({readOnly:!0})],Rt.prototype,"_tileInfoTask",null),u([d({readOnly:!0})],Rt.prototype,"_heightModelInfoTask",null),u([d({readOnly:!0})],Rt.prototype,"_extentCandidatesTask",null),u([d()],Rt.prototype,"_extentTask",null),u([d()],Rt.prototype,"_projectExtentTask",void 0),Rt=u([E("esri.views.support.DefaultsFromMap")],Rt);let Cge=class{constructor(){this.layers=new Array,this.preloading=-1,this.updating=!1}};var kg;let Ie=kg=class extends sy(Ua.EventedMixin(MO($e))){constructor(e){super(e),this._userSpatialReference=null,this._cursor=null,this.allLayerViews=new Mm({getCollections:()=>{var t,r,n;return[(t=this.basemapView)==null?void 0:t.baseLayerViews,(r=this.groundView)==null?void 0:r.layerViews,this.layerViews,(n=this.basemapView)==null?void 0:n.referenceLayerViews]},getChildrenFunction:Pge}),this.groundView=null,this.basemapView=null,this.fatalError=null,this.graphics=new S0,this.analyses=new YS,this.typeSpecificPreconditionsReady=!0,this.layerViews=new Le,this.magnifier=new sB,this.padding={left:0,top:0,right:0,bottom:0},this.ready=!1,this.spatialReferenceWarningDelay=1e3,this.supportsGround=!0,this.timeExtent=null,this.timeReference=new Tv,this.type=null,this.scale=null,this.updating=!1,this.initialExtentRequired=!0,this.input=new wge,this.navigation=new hB,this.layerViewManager=null,this.analysisViewManager=null,this.isHeightModelInfoRequired=!1,this.width=null,this.height=null,this.resizing=!1,this.suspended=!1,this.viewEvents=new cge(this),this.persistableViewModels=new Le,this._isValid=!1,this._readyCycleForced=!1,this._currentSpatialReference=null,this.handles.add(Ee(()=>this.preconditionsReady,t=>{var r,n;t?(this._currentSpatialReference=this.spatialReference,kg.views.add(this)):(this._currentSpatialReference=null,kg.views.remove(this)),this.notifyChange("spatialReference"),!t&&this.ready?((r=this.toolViewManager)==null||r.detach(),this.analysisViewManager!=null&&this.analysisViewManager.detach(),(n=this.layerViewManager)==null||n.clear(),this._teardown()):t&&!this.ready&&(this._startup(),this.analysisViewManager!=null&&this.analysisViewManager.attach(),this.toolViewManager.attach())},ny))}initialize(){this.addResolvingPromise(this.validate().then(()=>(this._isValid=!0,wv(()=>this.ready)))),this.basemapView=new Hu({view:this}),this.layerViewManager=new rge({view:this,layerViewImporter:{importLayerView:e=>this.importLayerView(e),hasLayerViewModule:e=>this.hasLayerViewModule(e)},supportsGround:this.supportsGround}),this.toolViewManager=new lo({view:this}),this._setupSpatialReferenceLogger(),this.handles.add([Ee(()=>this.initialExtentRequired,e=>this.defaultsFromMap.required={...this.defaultsFromMap.required,extent:e},{sync:!0,initial:!0}),Ee(()=>this.ready,e=>{this.defaultsFromMap&&(this.defaultsFromMap.suspended=e,this.defaultsFromMap.userSpatialReference=e?this.spatialReference:this._userSpatialReference)},{sync:!0}),Ee(()=>this._userSpatialReference,e=>{this.defaultsFromMap&&(this.defaultsFromMap.userSpatialReference=e)},{sync:!0,initial:!0})])}_setupSpatialReferenceLogger(){let e=null;this.handles.add([Ee(()=>{var t;return(t=this.defaultsFromMap)==null?void 0:t.ready},t=>{var n;const r=((n=this.map)==null?void 0:n.allLayers.length)>0;if(t&&!this.spatialReference&&r){if(e!=null)return;const i=Hl(()=>e=Kh(e));e=PO(async s=>{try{await xO(this.spatialReferenceWarningDelay,null,s)}catch{return}finally{e=null}Z.getLogger(this).warn("#spatialReference","no spatial reference could be derived from the currently added map layers")}),this.handles.add(i,"spatial-reference-logger-task")}else this.handles.remove("spatial-reference-logger-task")},{sync:!0})])}destroy(){var e,t;this.destroyed||(kg.views.remove(this),this.viewEvents.destroy(),this.allLayerViews.destroy(),this.navigation&&(this.navigation.destroy(),this._set("navigation",null)),this.graphics=Gt(this.graphics),this.analyses=Gt(this.analyses),this.handles.remove("defaultsFromMap"),this.defaultsFromMap.destroy(),this._set("defaultsFromMap",null),Gt(this.analysisViewManager),this.toolViewManager=Gt(this.toolViewManager),this.layerViewManager=Gt(this.layerViewManager),this.basemapView=Gt(this.basemapView),(e=this.groundView)==null||e.destroy(),(t=this.layerViews)==null||t.forEach(r=>r.destroy()),this.layerViews.length=0,this.invalidate(),this._emitter.clear(),this.handles.removeAll(),this.map=Gt(this.map))}_startup(){this._set("ready",!0)}_teardown(){this._set("ready",!1)}whenReady(){return Promise.resolve(this)}toMap(){return Z.getLogger(this).error("#toMap()","Not implemented on this instance of View"),null}get activeTool(){var e;return(e=this.toolViewManager)==null?void 0:e.activeTool}set activeTool(e){this.toolViewManager&&(this.toolViewManager.activeTool=e)}get animation(){return this._get("animation")}set animation(e){this._set("animation",e)}get center(){return null}get _defaultsFromMapSettings(){return{}}get defaultsFromMap(){return new Rt({required:{tileInfo:!1,heightModelInfo:!1,extent:!1},map:()=>this.map,getSpatialReferenceSupport:e=>this.getSpatialReferenceSupport(e),...this._defaultsFromMapSettings})}get extent(){return this._get("extent")}set extent(e){this._set("extent",e)}get heightModelInfo(){return this.getDefaultHeightModelInfo()}get interacting(){return this.navigating}get navigating(){return!1}get preconditionsReady(){var e;return!(this.fatalError||!this._isValid||this._readyCycleForced||!this.map||Ql.isLoadable(this.map)&&!this.map.loaded||this.width===0||this.height===0||!this.spatialReference||!this._validateSpatialReference(this.spatialReference)||!this._currentSpatialReference&&!((e=this.defaultsFromMap)!=null&&e.ready)||!this.typeSpecificPreconditionsReady)}get resolution(){return 0}set map(e){e!==this._get("map")&&(e!=null&&e.destroyed&&(Z.getLogger(this).warn("#map","The provided map is already destroyed",{map:e}),e=null),Ql.isLoadable(e)&&e.load().catch(()=>{}),this.constructed&&!this.destroyed&&(this.forceReadyCycle(),this._currentSpatialReference=null),this._set("map",e))}get spatialReference(){var t,r;let e=this._userSpatialReference||this._currentSpatialReference||this.getDefaultSpatialReference()||null;return e&&((r=(t=this.defaultsFromMap)==null?void 0:t.required)!=null&&r.heightModelInfo)&&(e=e.clone(),e.vcsWkid=this.defaultsFromMap.vcsWkid,e.latestVcsWkid=this.defaultsFromMap.latestVcsWkid),e}set spatialReference(e){const t=!Cr(e,this._get("spatialReference"));this._set("_userSpatialReference",e),t&&(this._set("spatialReference",e),this._spatialReferenceChanged(e))}_spatialReferenceChanged(e){}get stationary(){return!this.animation&&!this.navigating&&!this.resizing}get tools(){var e;return(e=this.toolViewManager)==null?void 0:e.tools}get initialExtent(){var e;return(e=this.defaultsFromMap)==null?void 0:e.extent}get cursor(){const e=this.toolViewManager?this.toolViewManager.cursor:null;return e??(this._cursor||"default")}set cursor(e){this._cursor=e,this.notifyChange("cursor")}get size(){return[this.width,this.height]}whenLayerView(e){var t;return((t=this.layerViewManager)==null?void 0:t.whenLayerView(e))??Promise.reject()}getDefaultSpatialReference(){var e;return(e=this.defaultsFromMap)==null?void 0:e.spatialReference}getDefaultHeightModelInfo(){var e;return(this.map&&"heightModelInfo"in this.map?this.map.heightModelInfo:void 0)??((e=this.defaultsFromMap)==null?void 0:e.heightModelInfo)??null}importLayerView(e){throw new N("importLayerView() not implemented")}hasLayerViewModule(e){return!1}async validate(){}invalidate(){this._isValid=!1}getSpatialReferenceSupport(){return{constraints:null}}_validateSpatialReference(e){return this.getSpatialReferenceSupport({spatialReference:e})!=null}when(e,t){return this.isResolved()&&!this.ready&&Z.getLogger(this).warn("#when()","Calling view.when() while the view is no longer ready but was already resolved once will resolve immediately. Use reactiveUtils.whenOnce(() => view.ready).then(...) instead."),super.when(e,t)}forceReadyCycle(){this.ready&&(Xl(()=>this.destroyed||this.preconditionsReady===!1,()=>this._readyCycleForced=!1,{once:!0}),this._readyCycleForced=!0)}addAndActivateTool(e){this.toolViewManager.tools.add(e),this.activeTool=e}tryFatalErrorRecovery(){this.fatalError=null}};Ie.views=new Le,u([d()],Ie.prototype,"_userSpatialReference",void 0),u([d()],Ie.prototype,"activeTool",null),u([d({readOnly:!0})],Ie.prototype,"allLayerViews",void 0),u([d()],Ie.prototype,"groundView",void 0),u([d()],Ie.prototype,"animation",null),u([d()],Ie.prototype,"basemapView",void 0),u([d()],Ie.prototype,"center",null),u([d({readOnly:!0})],Ie.prototype,"_defaultsFromMapSettings",null),u([d()],Ie.prototype,"defaultsFromMap",null),u([d()],Ie.prototype,"fatalError",void 0),u([d({type:at})],Ie.prototype,"extent",null),u([d(tF(S0,"graphics"))],Ie.prototype,"graphics",void 0),u([d(tF(YS,"analyses"))],Ie.prototype,"analyses",void 0),u([d({readOnly:!0,type:e3})],Ie.prototype,"heightModelInfo",null),u([d({readOnly:!0})],Ie.prototype,"interacting",null),u([d({readOnly:!0})],Ie.prototype,"navigating",null),u([d({readOnly:!0,dependsOn:["fatalError","_isValid","_readyCycleForced","map","map.loaded?","width","height","spatialReference","_currentSpatialReference","defaultsFromMap.ready","typeSpecificPreconditionsReady"]})],Ie.prototype,"preconditionsReady",null),u([d({readOnly:!0})],Ie.prototype,"typeSpecificPreconditionsReady",void 0),u([d({type:Le,readOnly:!0})],Ie.prototype,"layerViews",void 0),u([d()],Ie.prototype,"resolution",null),u([d({type:sB})],Ie.prototype,"magnifier",void 0),u([d({value:null,type:BU})],Ie.prototype,"map",null),u([d()],Ie.prototype,"padding",void 0),u([d({readOnly:!0})],Ie.prototype,"ready",void 0),u([d({type:Ce})],Ie.prototype,"spatialReference",null),u([d()],Ie.prototype,"spatialReferenceWarningDelay",void 0),u([d()],Ie.prototype,"stationary",null),u([d({readOnly:!0})],Ie.prototype,"supportsGround",void 0),u([d({type:qa})],Ie.prototype,"timeExtent",void 0),u([d({type:Tv,nonNullable:!0})],Ie.prototype,"timeReference",void 0),u([d()],Ie.prototype,"tools",null),u([d()],Ie.prototype,"toolViewManager",void 0),u([d({readOnly:!0})],Ie.prototype,"type",void 0),u([d({type:Number})],Ie.prototype,"scale",void 0),u([d({readOnly:!0})],Ie.prototype,"updating",void 0),u([d({readOnly:!0})],Ie.prototype,"initialExtentRequired",void 0),u([d({readOnly:!0})],Ie.prototype,"initialExtent",null),u([d()],Ie.prototype,"cursor",null),u([d({readOnly:!0})],Ie.prototype,"input",void 0),u([d({type:hB,nonNullable:!0})],Ie.prototype,"navigation",void 0),u([d()],Ie.prototype,"layerViewManager",void 0),u([d()],Ie.prototype,"analysisViewManager",void 0),u([d()],Ie.prototype,"width",void 0),u([d()],Ie.prototype,"height",void 0),u([d({readOnly:!0})],Ie.prototype,"resizing",void 0),u([d({value:null,readOnly:!0})],Ie.prototype,"size",null),u([d({readOnly:!0})],Ie.prototype,"suspended",void 0),u([d({readOnly:!0})],Ie.prototype,"viewEvents",void 0),u([d({readOnly:!0})],Ie.prototype,"persistableViewModels",void 0),u([d()],Ie.prototype,"_isValid",void 0),u([d()],Ie.prototype,"_readyCycleForced",void 0),u([d()],Ie.prototype,"_currentSpatialReference",void 0),Ie=kg=u([E("esri.views.View")],Ie);const kge=Ie;function Pge(e){return e.layerViews}let Ju=class extends wS{constructor(t){super(t),this.state="running",this.target=null,this._resolver=null}initialize(){this._resolver=Bo(),this.addResolvingPromise(this._resolver.promise)}get done(){return this.state==="finished"||this.state==="stopped"}stop(){var t;this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","stopped"),(t=this._resolver)==null||t.reject(new N("ViewAnimation stopped")))}finish(){var t;this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","finished"),(t=this._resolver)==null||t.resolve())}update(t,r){r||(r=au(t)?"waiting-for-target":"running"),this._set("target",t),this._set("state",r)}};u([d({readOnly:!0})],Ju.prototype,"done",null),u([d({readOnly:!0,type:String})],Ju.prototype,"state",void 0),u([d()],Ju.prototype,"target",void 0),Ju=u([E("esri.views.ViewAnimation")],Ju),function(e){e.State={RUNNING:"running",STOPPED:"stopped",FINISHED:"finished",WAITING_FOR_TARGET:"waiting-for-target"}}(Ju||(Ju={}));const AC=Ju;function wh(e,t,r,n){const i=3*e,s=3*(r-e)-i,o=1-i-s,a=3*t,l=3*(n-t)-a,c=1-a-l;function h(g){return((o*g+s)*g+i)*g}function f(g){return((c*g+l)*g+a)*g}function m(g){return(3*o*g+2*s)*g+i}function y(g,v){let w,b,S,_,x,T;for(S=g,T=0;T<8;T++){if(_=h(S)-g,Math.abs(_)<v)return S;if(x=m(S),Math.abs(x)<1e-6)break;S-=_/x}if(w=0,b=1,S=g,S<w)return w;if(S>b)return b;for(;w<b;){if(_=h(S),Math.abs(_-g)<v)return S;g>_?w=S:b=S,S=.5*(b-w)+w}return S}return function(g,v=1e-6){return f(y(g,v))}}const Oge=/^cubic-bezier\((.*)\)/,Ss={};function Rge(e){let t=Ss[e]||null;if(!t){const r=Oge.exec(e);if(r){const n=r[1].split(",").map(i=>parseFloat(i.trim()));n.length!==4||n.some(i=>isNaN(i))||(t=wh.apply(wh,n))}}return t}Ss.ease=wh(.25,.1,.25,1),Ss.linear=wh(0,0,1,1),Ss.easeIn=Ss["ease-in"]=wh(.42,0,1,1),Ss.easeOut=Ss["ease-out"]=wh(0,0,.58,1),Ss.easeInOut=Ss["ease-in-out"]=wh(.42,0,.58,1);function Age(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function Lge(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e}function Nge(e,t,r,n,i,s,o){return e[0]=t,e[1]=r,e[2]=n,e[3]=i,e[4]=s,e[5]=o,e}function r3(e,t){const r=t[0],n=t[1],i=t[2],s=t[3],o=t[4],a=t[5];let l=r*s-n*i;return l?(l=1/l,e[0]=s*l,e[1]=-n*l,e[2]=-i*l,e[3]=r*l,e[4]=(i*a-s*o)*l,e[5]=(n*o-r*a)*l,e):null}function Dge(e){return e[0]*e[3]-e[1]*e[2]}function SB(e,t,r){const n=t[0],i=t[1],s=t[2],o=t[3],a=t[4],l=t[5],c=r[0],h=r[1],f=r[2],m=r[3],y=r[4],g=r[5];return e[0]=n*c+s*h,e[1]=i*c+o*h,e[2]=n*f+s*m,e[3]=i*f+o*m,e[4]=n*y+s*g+a,e[5]=i*y+o*g+l,e}function k2(e,t,r){const n=t[0],i=t[1],s=t[2],o=t[3],a=t[4],l=t[5],c=Math.sin(r),h=Math.cos(r);return e[0]=n*h+s*c,e[1]=i*h+o*c,e[2]=n*-c+s*h,e[3]=i*-c+o*h,e[4]=a,e[5]=l,e}function n3(e,t,r){const n=t[0],i=t[1],s=t[2],o=t[3],a=t[4],l=t[5],c=r[0],h=r[1];return e[0]=n*c,e[1]=i*c,e[2]=s*h,e[3]=o*h,e[4]=a,e[5]=l,e}function Mv(e,t,r){const n=t[0],i=t[1],s=t[2],o=t[3],a=t[4],l=t[5],c=r[0],h=r[1];return e[0]=n,e[1]=i,e[2]=s,e[3]=o,e[4]=n*c+s*h+a,e[5]=i*c+o*h+l,e}function xB(e,t){const r=Math.sin(t),n=Math.cos(t);return e[0]=n,e[1]=r,e[2]=-r,e[3]=n,e[4]=0,e[5]=0,e}function $B(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e[4]=0,e[5]=0,e}function i3(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=t[0],e[5]=t[1],e}function Fge(e){return"mat2d("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+")"}function jge(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+1)}function Vge(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e}function TB(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e[4]=t[4]-r[4],e[5]=t[5]-r[5],e}function zge(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e}function Uge(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e[2]=t[2]+r[2]*n,e[3]=t[3]+r[3]*n,e[4]=t[4]+r[4]*n,e[5]=t[5]+r[5]*n,e}function Gge(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]}function Bge(e,t){const r=e[0],n=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=t[0],c=t[1],h=t[2],f=t[3],m=t[4],y=t[5],g=zs();return Math.abs(r-l)<=g*Math.max(1,Math.abs(r),Math.abs(l))&&Math.abs(n-c)<=g*Math.max(1,Math.abs(n),Math.abs(c))&&Math.abs(i-h)<=g*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(s-f)<=g*Math.max(1,Math.abs(s),Math.abs(f))&&Math.abs(o-m)<=g*Math.max(1,Math.abs(o),Math.abs(m))&&Math.abs(a-y)<=g*Math.max(1,Math.abs(a),Math.abs(y))}const qge=SB,Wge=TB;Object.freeze(Object.defineProperty({__proto__:null,add:Vge,copy:Age,determinant:Dge,equals:Bge,exactEquals:Gge,frob:jge,fromRotation:xB,fromScaling:$B,fromTranslation:i3,identity:Lge,invert:r3,mul:qge,multiply:SB,multiplyScalar:zge,multiplyScalarAndAdd:Uge,rotate:k2,scale:n3,set:Nge,str:Fge,sub:Wge,subtract:TB,translate:Mv},Symbol.toStringTag,{value:"Module"}));function Bc(){return[1,0,0,1,0,0]}function Hge(e){return[e[0],e[1],e[2],e[3],e[4],e[5]]}function Zge(e,t,r,n,i,s){return[e,t,r,n,i,s]}function Jge(e,t){return new Float64Array(e,t,6)}Object.freeze(Object.defineProperty({__proto__:null,clone:Hge,create:Bc,createView:Jge,fromValues:Zge},Symbol.toStringTag,{value:"Module"}));function Iv(e,t){return e[0]=t[0],e[1]=t[1],e}function ln(e,t,r){return e[0]=t,e[1]=r,e}function EB(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e}function Cv(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e}function MB(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e}function IB(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e}function Qge(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e}function Yge(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e}function Kge(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e}function Xge(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e}function e0e(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e}function d1(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e}function t0e(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e}function h1(e,t){const r=t[0]-e[0],n=t[1]-e[1];return Math.sqrt(r*r+n*n)}function XS(e,t){const r=t[0]-e[0],n=t[1]-e[1];return r*r+n*n}function ex(e){const t=e[0],r=e[1];return Math.sqrt(t*t+r*r)}function CB(e){const t=e[0],r=e[1];return t*t+r*r}function kB(e,t){return e[0]=-t[0],e[1]=-t[1],e}function r0e(e,t){return e[0]=1/t[0],e[1]=1/t[1],e}function LC(e,t){const r=t[0],n=t[1];let i=r*r+n*n;return i>0&&(i=1/Math.sqrt(i),e[0]=t[0]*i,e[1]=t[1]*i),e}function PB(e,t){return e[0]*t[0]+e[1]*t[1]}function OB(e,t,r){const n=t[0]*r[1]-t[1]*r[0];return e[0]=e[1]=0,e[2]=n,e}function n0e(e,t,r,n){const i=t[0],s=t[1];return e[0]=i+n*(r[0]-i),e[1]=s+n*(r[1]-s),e}function i0e(e,t){t=t||1;const r=2*c2()*Math.PI;return e[0]=Math.cos(r)*t,e[1]=Math.sin(r)*t,e}function s0e(e,t,r){const n=t[0],i=t[1];return e[0]=r[0]*n+r[2]*i,e[1]=r[1]*n+r[3]*i,e}function Ma(e,t,r){const n=t[0],i=t[1];return e[0]=r[0]*n+r[2]*i+r[4],e[1]=r[1]*n+r[3]*i+r[5],e}function o0e(e,t,r){const n=t[0],i=t[1];return e[0]=r[0]*n+r[3]*i+r[6],e[1]=r[1]*n+r[4]*i+r[7],e}function a0e(e,t,r){const n=t[0],i=t[1];return e[0]=r[0]*n+r[4]*i+r[12],e[1]=r[1]*n+r[5]*i+r[13],e}function l0e(e,t,r,n){const i=t[0]-r[0],s=t[1]-r[1],o=Math.sin(n),a=Math.cos(n);return e[0]=i*a-s*o+r[0],e[1]=i*o+s*a+r[1],e}function u0e(e,t){const r=e[0],n=e[1],i=t[0],s=t[1];let o=r*r+n*n;o>0&&(o=1/Math.sqrt(o));let a=i*i+s*s;a>0&&(a=1/Math.sqrt(a));const l=(r*i+n*s)*o*a;return l>1?0:l<-1?Math.PI:Math.acos(l)}function c0e(e){return"vec2("+e[0]+", "+e[1]+")"}function d0e(e,t){return e[0]===t[0]&&e[1]===t[1]}function h0e(e,t){const r=e[0],n=e[1],i=t[0],s=t[1],o=zs();return Math.abs(r-i)<=o*Math.max(1,Math.abs(r),Math.abs(i))&&Math.abs(n-s)<=o*Math.max(1,Math.abs(n),Math.abs(s))}function p0e(e,t,r,n,i){let s=t[0]-r[0],o=t[1]-r[1];const a=(n[0]*s+n[1]*o)*(i-1);return s=n[0]*a,o=n[1]*a,e[0]=t[0]+s,e[1]=t[1]+o,e}const f0e=ex,s3=Cv,m0e=MB,y0e=IB,g0e=h1,v0e=XS,w0e=CB;Object.freeze(Object.defineProperty({__proto__:null,add:EB,angle:u0e,ceil:Qge,copy:Iv,cross:OB,dist:g0e,distance:h1,div:y0e,divide:IB,dot:PB,equals:h0e,exactEquals:d0e,floor:Yge,inverse:r0e,len:f0e,length:ex,lerp:n0e,max:Xge,min:Kge,mul:m0e,multiply:MB,negate:kB,normalize:LC,projectAndScale:p0e,random:i0e,rotate:l0e,round:e0e,scale:d1,scaleAndAdd:t0e,set:ln,sqrDist:v0e,sqrLen:w0e,squaredDistance:XS,squaredLength:CB,str:c0e,sub:s3,subtract:Cv,transformMat2:s0e,transformMat2d:Ma,transformMat3:o0e,transformMat4:a0e},Symbol.toStringTag,{value:"Module"}));function $r(){return[0,0]}function _0e(e){return[e[0],e[1]]}function p1(e,t){return[e,t]}function b0e(e){const t=$r(),r=Math.min(2,e.length);for(let n=0;n<r;++n)t[n]=e[n];return t}function S0e(e,t){return new Float64Array(e,t,2)}function RB(){return $r()}function AB(){return p1(1,1)}function LB(){return p1(1,0)}function NB(){return p1(0,1)}const x0e=RB(),$0e=AB(),T0e=LB(),E0e=NB();Object.freeze(Object.defineProperty({__proto__:null,ONES:$0e,UNIT_X:T0e,UNIT_Y:E0e,ZEROS:x0e,clone:_0e,create:$r,createView:S0e,fromArray:b0e,fromValues:p1,ones:AB,unitX:LB,unitY:NB,zeros:RB},Symbol.toStringTag,{value:"Module"}));const DB=96,FB=39.37,M0e=180/Math.PI;function jB(e){return e.wkid?e:e.spatialReference||Ce.WGS84}function o3(e,t){return t.type?ln(e,t.x,t.y):Iv(e,t)}function VB(e){return Ga(e)}function sm(e,t){const r=Math.max(1,t[0]),n=Math.max(1,t[1]);return Math.max(e.width/r,e.height/n)*N0e(e.spatialReference)}async function Pg(e,t,r,n){var a,l;let i,s;if(!e||Array.isArray(e)&&!e.length)return null;if(Le.isCollection(e)&&(e=e.toArray()),Array.isArray(e)&&e.length&&typeof e[0]=="object"){const c=e.every(m=>"attributes"in m),h=e.some(m=>!m.geometry);let f=e;if(c&&h&&t&&t.allLayerViews){const m=new Map;for(const w of e){const b=w.layer,S=m.get(b)||[],_=w.attributes[b.objectIdField];_!=null&&S.push(_),m.set(b,S)}const y=[];m.forEach((w,b)=>{const S=t.allLayerViews.find(_=>_.layer.id===b.id);if(S&&"queryFeatures"in S){const _=b.createQuery();_.objectIds=w,_.returnGeometry=!0,y.push(S.queryFeatures(_))}});const g=await Promise.all(y),v=[];for(const w of g)if(w&&w.features&&w.features.length)for(const b of w.features)b.geometry!=null&&v.push(b.geometry);f=v}for(const m of f)n=await Pg(m,t,r,n);return n}if(Array.isArray(e)&&e.length===2&&typeof e[0]=="number"&&typeof e[1]=="number")i=new be(e);else if(e instanceof cd)i=e;else if("geometry"in e){if(e.geometry)i=e.geometry;else if(e.layer){const c=e.layer,h=t.allLayerViews.find(f=>f.layer.id===c.id);if(h&&"queryFeatures"in h){const f=c.createQuery();f.objectIds=[e.attributes[c.objectIdField]],f.returnGeometry=!0;const m=await h.queryFeatures(f);i=(l=(a=m==null?void 0:m.features)==null?void 0:a[0])==null?void 0:l.geometry}}}if(i==null||(s=i.type==="point"?new at({xmin:i.x,ymin:i.y,xmax:i.x,ymax:i.y,spatialReference:i.spatialReference}):i.extent,!s))return null;yd()||ru(s.spatialReference,r)||await tu();const o=uu(s,r);return o?n=n?n.union(o):o:null}function I0e(e){if(e&&(!Array.isArray(e)||typeof e[0]!="number")&&(typeof e=="object"||Array.isArray(e)&&typeof e[0]=="object")){if("layer"in e&&e.layer&&e.layer.minScale&&e.layer.maxScale){const t=e.layer;return{min:t.minScale,max:t.maxScale}}if(Array.isArray(e)&&e.length&&e.every(t=>"layer"in t)){let t=0,r=0;for(const n of e){const i=n.layer;i&&i.minScale&&i.maxScale&&(t=i.minScale<t?i.minScale:t,r=i.maxScale>r?i.maxScale:r)}return t&&r?{min:t,max:r}:null}}}function pT(e,t){return Cr(jB(e),t)?e:uu(e,t)}async function C0e(e,t){if(!e||!t)return new Do({targetGeometry:new be,scale:0,rotation:0});let r=t.spatialReference;const{constraints:n,padding:i,viewpoint:s,size:o}=t,a=[i?o[0]-i.left-i.right:o[0],i?o[1]-i.top-i.bottom:o[1]];let l=null;e instanceof Do?l=e:e.viewpoint?l=e.viewpoint:e.target&&e.target.declaredClass==="esri.Viewpoint"&&(l=e.target);let c=null;l&&l.targetGeometry?c=l.targetGeometry:e instanceof at?c=e:(e||e&&("center"in e||"extent"in e||"target"in e))&&(c=await Pg(e.center,t,r)||await Pg(e.extent,t,r)||await Pg(e.target,t,r)||await Pg(e,t,r)),!c&&s&&s.targetGeometry?c=s.targetGeometry:!c&&t.extent&&(c=t.extent),r||(r=jB(t.spatialReference||t.extent||c)),yd()||Cr(c.spatialReference,r)||ru(c,r)||await tu();const h=pT(c.center??c,r);let f=0;if(l&&l.targetGeometry!=null&&l.targetGeometry.type==="point")f=l.scale;else if("scale"in e&&e.scale)f=e.scale;else if("zoom"in e&&e.zoom!==-1&&n&&n.effectiveLODs)f=n.zoomToScale(e.zoom);else if(Array.isArray(c)||c.type==="point"||c.type==="extent"&&c.width===0&&c.height===0){const v=pT(t.extent,r);f=v!=null?sm(v,a):t.extent?sm(t.extent,a):s.scale}else f=sm(pT(c.extent,r),a);const m=I0e(e);m&&(m.min&&m.min>f?f=m.min:m.max&&m.max<f&&(f=m.max));let y=0;l?y=l.rotation:e.hasOwnProperty("rotation")?y=e.rotation:s&&(y=s.rotation);let g=new Do({targetGeometry:h,scale:f,rotation:y});return n&&(g=n.fit(g),n.constrainByGeometry(g),n.rotationEnabled||(g.rotation=y)),g}function Ko(e,t){const r=e.targetGeometry,n=t.targetGeometry;return r.x=n.x,r.y=n.y,r.spatialReference=n.spatialReference,e.scale=t.scale,e.rotation=t.rotation,e}function k0e(e,t,r){return r?ln(e,.5*(t[0]-r.right+r.left),.5*(t[1]-r.bottom+r.top)):d1(e,t,.5)}const P0e=function(){const e=$r();return function(t,r,n){const i=r.targetGeometry;o3(e,i);const s=.5*ay(r);return t.xmin=e[0]-s*n[0],t.ymin=e[1]-s*n[1],t.xmax=e[0]+s*n[0],t.ymax=e[1]+s*n[1],t.spatialReference=i.spatialReference,t}}();function O0e(e,t,r,n,i){var s;return NC(e,t,r.center),e.scale=sm(r,n),(s=i==null?void 0:i.constraints)==null||s.constrain(e),e}function R0e(e,t,r,n){return u3(e,t,r,n),r3(e,e)}const zB=function(){const e=$r();return function(t,r,n){return s3(t,D0e(t,r),k0e(e,r,n))}}(),A0e=function(){const e=Bc(),t=$r();return function(r,n,i,s){const o=ay(n),a=a3(n);return ln(t,o,o),$B(e,t),k2(e,e,a),Mv(e,e,zB(t,i,s)),Mv(e,e,[0,s.top-s.bottom]),ln(r,e[4],e[5])}}();function ay(e){return e.scale*L0e(e.targetGeometry)}function L0e(e){return e!=null&&Yr(e.spatialReference)?1/(VB(e.spatialReference)*FB*DB):1}function a3(e){return rR(e.rotation)||0}function N0e(e){return Yr(e)?VB(e)*FB*DB:1}function D0e(e,t){return d1(e,t,.5)}const l3=function(){const e=$r(),t=$r(),r=$r();return function(n,i,s,o,a,l){return kB(e,i),d1(t,s,.5*l),ln(r,1/o*l,-1/o*l),i3(n,t),a&&k2(n,n,a),n3(n,n,r),Mv(n,n,e),n}}(),u3=function(){const e=$r();return function(t,r,n,i){const s=ay(r),o=a3(r);return o3(e,r.targetGeometry),l3(t,e,n,s,o,i)}}(),F0e=function(){const e=$r();return function(t,r,n,i){const s=ay(r);return o3(e,r.targetGeometry),l3(t,e,n,s,0,i)}}();function j0e(e){const t=Ls(e);return t?t.valid[1]-t.valid[0]:0}function V0e(e,t){return Math.round(j0e(e)/t)}const z0e=function(){const e=$r(),t=$r(),r=[0,0,0];return function(n,i,s){Cv(e,n,i),LC(e,e),Cv(t,n,s),LC(t,t),OB(r,e,t);let o=Math.acos(PB(e,t)/(ex(e)*ex(t)))*M0e;return r[2]<0&&(o=-o),isNaN(o)&&(o=0),o}}(),U0e=function(){const e=$r();return function(t,r,n,i){const s=t.targetGeometry;return Ko(t,r),A0e(e,r,n,i),s.x+=e[0],s.y+=e[1],t}}(),NC=function(e,t,r){Ko(e,t);const n=e.targetGeometry;return n.x=r.x,n.y=r.y,n.spatialReference=r.spatialReference,e},G0e=function(){const e=$r();return function(t,r,n,i,s){s||(s="center"),s3(e,n,i),d1(e,e,.5);const o=e[0],a=e[1];switch(s){case"center":ln(e,0,0);break;case"left":ln(e,-o,0);break;case"top":ln(e,0,a);break;case"right":ln(e,o,0);break;case"bottom":ln(e,0,-a);break;case"top-left":ln(e,-o,a);break;case"bottom-left":ln(e,-o,-a);break;case"top-right":ln(e,o,a);break;case"bottom-right":ln(e,o,-a)}return P2(t,r,e),t}}();function yOe(e,t,r){return Ko(e,t),e.rotation+=r,e}function B0e(e,t,r){return Ko(e,t),e.rotation=r,e}const q0e=function(){const e=$r();return function(t,r,n,i,s){return Ko(t,r),isNaN(n)||n===0||(GB(e,i,r,s),t.scale=r.scale*n,BB(e,e,t,s),P2(t,t,ln(e,e[0]-i[0],i[1]-e[1]))),t}}();function bF(e,t,r){return Ko(e,t),e.scale=r,e}const UB=function(){const e=$r();return function(t,r,n,i,s,o){return Ko(t,r),isNaN(n)||n===0||(GB(e,s,r,o),t.scale=r.scale*n,t.rotation+=i,BB(e,e,t,o),P2(t,t,ln(e,e[0]-s[0],s[1]-e[1]))),t}}(),gOe=function(){const e=$r(),t=$r();return function(r,n,i,s,o,a,l){return zB(t,a,l),EB(e,o,t),s?UB(r,n,i,s,e,a):q0e(r,n,i,e,a)}}(),GB=function(){const e=Bc();return function(t,r,n,i){return Ma(t,r,R0e(e,n,i,1))}}(),BB=function(){const e=Bc();return function(t,r,n,i){return Ma(t,r,u3(e,n,i,1))}}(),P2=function(){const e=$r(),t=Bc();return function(r,n,i){Ko(r,n);const s=ay(n),o=r.targetGeometry;return xB(t,a3(n)),n3(t,t,p1(s,s)),Ma(e,i,t),o.x+=e[0],o.y+=e[1],r}}();let W0e=class{constructor(t,r,n,i){const s=t.targetGeometry,o=r.targetGeometry;i?typeof i=="string"&&(i=Rge(i)||Ss.ease):i=Ss.ease,this.easing=i,this.duration=n,this.sCenterX=s.x,this.sCenterY=s.y,this.sScale=t.scale,this.sRotation=t.rotation,this.tCenterX=o.x,this.tCenterY=o.y,this.tScale=r.scale,this.tRotation=r.rotation,this.dCenterX=this.tCenterX-this.sCenterX,this.dCenterY=this.tCenterY-this.sCenterY,this.dScale=this.tScale-this.sScale,this.dRotation=this.tRotation-this.sRotation,this.dRotation>180?this.dRotation-=360:this.dRotation<-180&&(this.dRotation+=360)}applyRatio(t,r){const n=this.easing(r);let i,s,o,a;r>=1?(i=this.tCenterX,s=this.tCenterY,o=this.tRotation,a=this.tScale):(i=this.sCenterX+n*this.dCenterX,s=this.sCenterY+n*this.dCenterY,o=this.sRotation+n*this.dRotation,a=this.sScale+n*this.dScale),t.targetGeometry.x=i,t.targetGeometry.y=s,t.scale=a,t.rotation=o}},pl=class extends $e{constructor(t){super(t),this.updateFunction=null,this.animation=null,this.duration=200,this.transition=null,this.easing=Ss.ease,this.view=null,this.viewpoint=new Do({targetGeometry:new be,scale:0,rotation:0}),this._updateTask=xm({postRender:this._postRender.bind(this)}),this._updateTask.pause()}destroy(){this._updateTask=or(this._updateTask)}animate(t,r,n){this.stop();const i=this.viewpoint;Ko(i,r),this.transition=new W0e(this.viewpoint,t.target,n&&n.duration||this.duration,n&&n.easing||this.easing);const s=()=>{var o,a;this.animation===t&&this._updateTask&&(t.state==="finished"&&((o=this.transition)==null||o.applyRatio(this.viewpoint,1),(a=this.view)!=null&&a.state&&(this.view.state.viewpoint=this.viewpoint.clone())),this.animation=null,this.updateFunction=null)};return t.when(s,s),this._startTime=performance.now(),this._updateTask.resume(),this.animation=t,t}animateContinous(t,r){this.stop(),this.updateFunction=r,this.viewpoint=t;const n=new AC({target:t.clone()}),i=()=>{this.animation===n&&this._updateTask&&(this.animation=null,this.updateFunction=null)};return n.when(i,i),this._startTime=performance.now(),this._updateTask.resume(),this.animation=n,n}stop(){this.animation&&(this.animation.stop(),this.animation=null,this.updateFunction=null)}_postRender(t){var n,i;const r=this.animation;if(r&&r.state!==AC.State.STOPPED){if(this.updateFunction)this.updateFunction(this.viewpoint,t.deltaTime);else{const s=this.transition,o=(performance.now()-this._startTime)/s.duration,a=o>=1;s.applyRatio(this.viewpoint,o),a&&((n=this.animation)==null||n.finish())}(i=this.view)!=null&&i.state&&(this.view.state.viewpoint=this.viewpoint.clone())}else this._updateTask.pause()}};u([d()],pl.prototype,"animation",void 0),u([d()],pl.prototype,"duration",void 0),u([d()],pl.prototype,"transition",void 0),u([d()],pl.prototype,"easing",void 0),u([d()],pl.prototype,"view",void 0),u([d()],pl.prototype,"viewpoint",void 0),pl=u([E("esri.views.2d.AnimationManager")],pl);const H0e=pl;let Z0e=class{constructor(t){this.view=t,this._stationaryHandle=null,this._frameTaskHandle=null,this._updateParameters=null,this._updateRequested=!1,this.stationary=!0,this.animationInProgress=!1,this.prepare=()=>{this._updateParameters&&(this._updateParameters.state=this.view.state,this._updateParameters.stationary=this.view.stationary,this._updateParameters.pixelRatio=window.devicePixelRatio,this._updateParameters.renderingOptions=this.view.renderingOptions)},this.update=()=>{var o,a;if(this._updateRequested=!1,(o=this.view)==null?void 0:o.destroyed)return;const{allLayerViews:r,graphicsView:n,labelManager:i,state:{id:s}}=this.view;r.forEach(this._updateLayerView,this),i!=null&&(i.lastUpdateId!==s&&(i.viewChange(),i.lastUpdateId=s),i.updateRequested&&i.processUpdate(this._updateParameters)),n!=null&&(n.lastUpdateId!==s&&(n.viewChange(),n.lastUpdateId=s),n.updateRequested&&n.processUpdate(this._updateParameters)),this.view.graphicsTileStore.setViewState(this._updateParameters.state),this.animationInProgress||this._updateRequested||((a=this._frameTaskHandle)==null||a.pause())}}destroy(){this.stop()}start(){if(this._frameTaskHandle)return;const t=this.view;this.stationary=t.stationary,this._updateParameters={state:t.state,pixelRatio:window.devicePixelRatio,stationary:this.stationary,renderingOptions:t.renderingOptions},this._stationaryHandle=Ee(()=>t.stationary,r=>{this.stationary=r,this.requestFrame()}),this._frameTaskHandle=xm(this),this.requestUpdate()}stop(){var t;this._frameTaskHandle&&(this._updateRequested=!1,(t=this._stationaryHandle)==null||t.remove(),this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=this._frameTaskHandle=null,this.stationary=!0,this.animationInProgress=!1)}requestUpdate(){this._updateRequested||(this._updateRequested=!0,this.requestFrame())}requestFrame(){this._frameTaskHandle&&this._frameTaskHandle.resume()}_updateLayerView(t){var i;if(!t.attached)return void this.requestUpdate();const r=this.view.state,n=t.lastUpdateId;n!=null&&(this.stationary||t.moving)||(t.moving=!0,t.moveStart()),n!==r.id&&t.viewChange(),this.stationary&&t.moving&&(t.moving=!1,t.moveEnd()),t.lastUpdateId=r.id,t.updateRequested&&t.processUpdate(this._updateParameters),"layerViews"in t&&((i=t.layerViews)==null||i.forEach(this._updateLayerView,this))}};function dr(){return Promise.all([ie(()=>import("./webglDeps-7925e2a7.js"),["assets/webglDeps-7925e2a7.js","assets/VertexArrayObject-5d791997.js","assets/Texture-475a6d11.js","assets/enums-b14466b3.js","assets/ProgramTemplate-1083e985.js","assets/programUtils-16bf542d.js","assets/NestedMap-1b5db22e.js"]),ie(()=>import("./mapViewDeps-7b425a72.js"),["assets/mapViewDeps-7b425a72.js","assets/ExpandedCIM-4e176af0.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-984e8446.js","assets/enums-f1a6a48a.js","assets/utils-010a06e5.js","assets/GeometryUtils-d37b0eff.js","assets/color-2b7193c1.js","assets/enums-b14466b3.js","assets/VertexElementDescriptor-2925c6af.js","assets/definitions-e4cb28dd.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-20b347c1.js","assets/floatRGBA-e7157f4d.js","assets/MagnifierPrograms-100cd9d1.js","assets/WGLContainer-bf682126.js","assets/VertexArrayObject-5d791997.js","assets/Texture-475a6d11.js","assets/ProgramTemplate-1083e985.js","assets/StyleDefinition-29c49b98.js","assets/config-1337d16e.js","assets/Container-f524f8d4.js","assets/earcut-e27332fd.js","assets/rasterizingUtils-b34e831f.js","assets/imageutils-5fd1bbcc.js","assets/Matcher-d97d175f.js","assets/visualVariablesUtils-a8c18281.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-216fb4d0.js","assets/devEnvironmentUtils-5002a058.js","assets/webStyleSymbolUtils-8f7de622.js","assets/CircularArray-ef508845.js","assets/testSVGPremultipliedAlpha-7944547e.js","assets/throttle-7bf02de9.js","assets/ComputedAttributeStorage-9e574e70.js","assets/arcadeTimeUtils-a7821097.js","assets/executionError-c92d3b85.js","assets/projectionSupport-a7571eb4.js","assets/json-48e3ea08.js","assets/BufferPool-27a5b8c8.js","assets/AttributeStoreView-a370f993.js","assets/TiledDisplayObject-520c0dd0.js","assets/clusterUtils-84d6baf1.js","assets/util-709d9770.js","assets/enums-fb086c25.js","assets/programUtils-16bf542d.js","assets/NestedMap-1b5db22e.js","assets/RenderingContext-134f1048.js","assets/OrderIndependentTransparency-309a1bc3.js","assets/basicInterfaces-4ab7cc6a.js","assets/doublePrecisionUtils-e3c3d0d8.js","assets/imageUtils-c2d0d1ae.js","assets/GraphicsView2D-320a5dcf.js","assets/normalizeUtilsSync-bd6868bb.js","assets/GraphicContainer-76680d33.js","assets/BaseGraphicContainer-f5337fbc.js","assets/FeatureContainer-918580aa.js","assets/TileContainer-dd755a60.js","assets/vec3f32-ad1dc57f.js","assets/requestImageUtils-06e908ac.js"])])}const Uy=()=>dr().then(()=>ie(()=>import("./TileLayerView2D-291573f0.js"),["assets/TileLayerView2D-291573f0.js","assets/MagnifierPrograms-100cd9d1.js","assets/WGLContainer-bf682126.js","assets/definitions-e4cb28dd.js","assets/VertexArrayObject-5d791997.js","assets/Texture-475a6d11.js","assets/enums-b14466b3.js","assets/VertexElementDescriptor-2925c6af.js","assets/color-2b7193c1.js","assets/enums-f1a6a48a.js","assets/ProgramTemplate-1083e985.js","assets/GeometryUtils-d37b0eff.js","assets/StyleDefinition-29c49b98.js","assets/config-1337d16e.js","assets/Container-f524f8d4.js","assets/earcut-e27332fd.js","assets/ExpandedCIM-4e176af0.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-984e8446.js","assets/utils-010a06e5.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-20b347c1.js","assets/floatRGBA-e7157f4d.js","assets/rasterizingUtils-b34e831f.js","assets/imageutils-5fd1bbcc.js","assets/Matcher-d97d175f.js","assets/visualVariablesUtils-a8c18281.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-216fb4d0.js","assets/devEnvironmentUtils-5002a058.js","assets/webStyleSymbolUtils-8f7de622.js","assets/CircularArray-ef508845.js","assets/testSVGPremultipliedAlpha-7944547e.js","assets/throttle-7bf02de9.js","assets/ComputedAttributeStorage-9e574e70.js","assets/arcadeTimeUtils-a7821097.js","assets/executionError-c92d3b85.js","assets/projectionSupport-a7571eb4.js","assets/json-48e3ea08.js","assets/BufferPool-27a5b8c8.js","assets/AttributeStoreView-a370f993.js","assets/TiledDisplayObject-520c0dd0.js","assets/clusterUtils-84d6baf1.js","assets/util-709d9770.js","assets/enums-fb086c25.js","assets/OrderIndependentTransparency-309a1bc3.js","assets/basicInterfaces-4ab7cc6a.js","assets/GraphicsView2D-320a5dcf.js","assets/normalizeUtilsSync-bd6868bb.js","assets/vec3f32-ad1dc57f.js","assets/imageUtils-0049f3c5.js","assets/BitmapTileContainer-4b32c582.js","assets/Bitmap-2f5f26fe.js","assets/TileContainer-dd755a60.js","assets/LayerView-c5acca64.js","assets/HighlightGraphicContainer-780aab00.js","assets/BaseGraphicContainer-f5337fbc.js","assets/FeatureContainer-918580aa.js","assets/RefreshableLayerView-186b7bdd.js","assets/drapedUtils-92dbf0a4.js","assets/popupUtils-a41889ef.js"])),Op=()=>dr().then(()=>ie(()=>import("./FeatureLayerView2D-e92e60ca.js"),["assets/FeatureLayerView2D-e92e60ca.js","assets/Container-f524f8d4.js","assets/definitions-e4cb28dd.js","assets/enums-b14466b3.js","assets/Texture-475a6d11.js","assets/FeatureEffect-38c14a64.js","assets/LayerView-c5acca64.js","assets/AttributeStoreView-a370f993.js","assets/TiledDisplayObject-520c0dd0.js","assets/color-2b7193c1.js","assets/enums-f1a6a48a.js","assets/VertexElementDescriptor-2925c6af.js","assets/WGLContainer-bf682126.js","assets/VertexArrayObject-5d791997.js","assets/ProgramTemplate-1083e985.js","assets/GeometryUtils-d37b0eff.js","assets/StyleDefinition-29c49b98.js","assets/config-1337d16e.js","assets/earcut-e27332fd.js","assets/visualVariablesUtils-a8c18281.js","assets/ExpandedCIM-4e176af0.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-984e8446.js","assets/utils-010a06e5.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-20b347c1.js","assets/floatRGBA-e7157f4d.js","assets/clusterUtils-84d6baf1.js","assets/util-709d9770.js","assets/BitmapTileContainer-4b32c582.js","assets/Bitmap-2f5f26fe.js","assets/TileContainer-dd755a60.js","assets/CircularArray-ef508845.js","assets/BufferPool-27a5b8c8.js","assets/FeatureContainer-918580aa.js","assets/popupUtils-a41889ef.js","assets/RefreshableLayerView-186b7bdd.js"])),SF={"base-dynamic":()=>dr().then(()=>ie(()=>import("./BaseDynamicLayerView2D-b6566df0.js"),["assets/BaseDynamicLayerView2D-b6566df0.js","assets/BitmapContainer-bca4bd41.js","assets/WGLContainer-bf682126.js","assets/definitions-e4cb28dd.js","assets/VertexArrayObject-5d791997.js","assets/Texture-475a6d11.js","assets/enums-b14466b3.js","assets/VertexElementDescriptor-2925c6af.js","assets/color-2b7193c1.js","assets/enums-f1a6a48a.js","assets/ProgramTemplate-1083e985.js","assets/GeometryUtils-d37b0eff.js","assets/StyleDefinition-29c49b98.js","assets/config-1337d16e.js","assets/Container-f524f8d4.js","assets/earcut-e27332fd.js","assets/LayerView-c5acca64.js","assets/ExportStrategy-c71711ed.js","assets/Bitmap-2f5f26fe.js","assets/RefreshableLayerView-186b7bdd.js"])),"base-tile":Uy,"bing-maps":Uy,csv:Op,"geo-rss":()=>dr().then(()=>ie(()=>import("./GeoRSSLayerView2D-61cbed82.js"),["assets/GeoRSSLayerView2D-61cbed82.js","assets/LayerView-c5acca64.js","assets/Container-f524f8d4.js","assets/definitions-e4cb28dd.js","assets/enums-b14466b3.js","assets/Texture-475a6d11.js","assets/GraphicContainer-76680d33.js","assets/color-2b7193c1.js","assets/enums-f1a6a48a.js","assets/VertexElementDescriptor-2925c6af.js","assets/BaseGraphicContainer-f5337fbc.js","assets/FeatureContainer-918580aa.js","assets/AttributeStoreView-a370f993.js","assets/TiledDisplayObject-520c0dd0.js","assets/WGLContainer-bf682126.js","assets/VertexArrayObject-5d791997.js","assets/ProgramTemplate-1083e985.js","assets/GeometryUtils-d37b0eff.js","assets/StyleDefinition-29c49b98.js","assets/config-1337d16e.js","assets/earcut-e27332fd.js","assets/visualVariablesUtils-a8c18281.js","assets/ExpandedCIM-4e176af0.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-984e8446.js","assets/utils-010a06e5.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-20b347c1.js","assets/floatRGBA-e7157f4d.js","assets/clusterUtils-84d6baf1.js","assets/util-709d9770.js","assets/TileContainer-dd755a60.js","assets/vec3f32-ad1dc57f.js","assets/GraphicsView2D-320a5dcf.js","assets/normalizeUtilsSync-bd6868bb.js","assets/projectionSupport-a7571eb4.js","assets/json-48e3ea08.js","assets/Matcher-d97d175f.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-216fb4d0.js","assets/devEnvironmentUtils-5002a058.js","assets/webStyleSymbolUtils-8f7de622.js","assets/ComputedAttributeStorage-9e574e70.js","assets/arcadeTimeUtils-a7821097.js","assets/executionError-c92d3b85.js"])),feature:Op,geojson:Op,graphics:()=>dr().then(()=>ie(()=>import("./GraphicsLayerView2D-986028b9.js"),["assets/GraphicsLayerView2D-986028b9.js","assets/LayerView-c5acca64.js","assets/Container-f524f8d4.js","assets/definitions-e4cb28dd.js","assets/enums-b14466b3.js","assets/Texture-475a6d11.js","assets/GraphicContainer-76680d33.js","assets/color-2b7193c1.js","assets/enums-f1a6a48a.js","assets/VertexElementDescriptor-2925c6af.js","assets/BaseGraphicContainer-f5337fbc.js","assets/FeatureContainer-918580aa.js","assets/AttributeStoreView-a370f993.js","assets/TiledDisplayObject-520c0dd0.js","assets/WGLContainer-bf682126.js","assets/VertexArrayObject-5d791997.js","assets/ProgramTemplate-1083e985.js","assets/GeometryUtils-d37b0eff.js","assets/StyleDefinition-29c49b98.js","assets/config-1337d16e.js","assets/earcut-e27332fd.js","assets/visualVariablesUtils-a8c18281.js","assets/ExpandedCIM-4e176af0.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-984e8446.js","assets/utils-010a06e5.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-20b347c1.js","assets/floatRGBA-e7157f4d.js","assets/clusterUtils-84d6baf1.js","assets/util-709d9770.js","assets/TileContainer-dd755a60.js","assets/vec3f32-ad1dc57f.js","assets/GraphicsView2D-320a5dcf.js","assets/normalizeUtilsSync-bd6868bb.js","assets/projectionSupport-a7571eb4.js","assets/json-48e3ea08.js","assets/Matcher-d97d175f.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-216fb4d0.js","assets/devEnvironmentUtils-5002a058.js","assets/webStyleSymbolUtils-8f7de622.js","assets/ComputedAttributeStorage-9e574e70.js","assets/arcadeTimeUtils-a7821097.js","assets/executionError-c92d3b85.js"])),group:()=>dr().then(()=>ie(()=>import("./GroupLayerView2D-0b5e0f22.js"),["assets/GroupLayerView2D-0b5e0f22.js","assets/GroupContainer-15d7e95a.js","assets/WGLContainer-bf682126.js","assets/definitions-e4cb28dd.js","assets/VertexArrayObject-5d791997.js","assets/Texture-475a6d11.js","assets/enums-b14466b3.js","assets/VertexElementDescriptor-2925c6af.js","assets/color-2b7193c1.js","assets/enums-f1a6a48a.js","assets/ProgramTemplate-1083e985.js","assets/GeometryUtils-d37b0eff.js","assets/StyleDefinition-29c49b98.js","assets/config-1337d16e.js","assets/Container-f524f8d4.js","assets/earcut-e27332fd.js","assets/LayerView-c5acca64.js"])),imagery:()=>dr().then(()=>ie(()=>import("./ImageryLayerView2D-47893482.js"),["assets/ImageryLayerView2D-47893482.js","assets/RasterVFDisplayObject-58bf95ad.js","assets/VertexArrayObject-5d791997.js","assets/Texture-475a6d11.js","assets/enums-b14466b3.js","assets/VertexElementDescriptor-2925c6af.js","assets/dataUtils-e13db66f.js","assets/WGLContainer-bf682126.js","assets/definitions-e4cb28dd.js","assets/color-2b7193c1.js","assets/enums-f1a6a48a.js","assets/ProgramTemplate-1083e985.js","assets/GeometryUtils-d37b0eff.js","assets/StyleDefinition-29c49b98.js","assets/config-1337d16e.js","assets/Container-f524f8d4.js","assets/earcut-e27332fd.js","assets/LayerView-c5acca64.js","assets/GraphicsView2D-320a5dcf.js","assets/ExpandedCIM-4e176af0.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-984e8446.js","assets/utils-010a06e5.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-20b347c1.js","assets/floatRGBA-e7157f4d.js","assets/normalizeUtilsSync-bd6868bb.js","assets/projectionSupport-a7571eb4.js","assets/json-48e3ea08.js","assets/AttributeStoreView-a370f993.js","assets/TiledDisplayObject-520c0dd0.js","assets/visualVariablesUtils-a8c18281.js","assets/clusterUtils-84d6baf1.js","assets/util-709d9770.js","assets/Matcher-d97d175f.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-216fb4d0.js","assets/devEnvironmentUtils-5002a058.js","assets/webStyleSymbolUtils-8f7de622.js","assets/ComputedAttributeStorage-9e574e70.js","assets/arcadeTimeUtils-a7821097.js","assets/executionError-c92d3b85.js","assets/HighlightGraphicContainer-780aab00.js","assets/BaseGraphicContainer-f5337fbc.js","assets/FeatureContainer-918580aa.js","assets/TileContainer-dd755a60.js","assets/vec3f32-ad1dc57f.js","assets/BitmapContainer-bca4bd41.js","assets/Bitmap-2f5f26fe.js","assets/ExportStrategy-c71711ed.js","assets/rasterProjectionHelper-2c7c9ae1.js","assets/popupUtils-a41889ef.js","assets/RefreshableLayerView-186b7bdd.js"])),"imagery-tile":()=>dr().then(()=>ie(()=>import("./ImageryTileLayerView2D-3dce9cd4.js"),["assets/ImageryTileLayerView2D-3dce9cd4.js","assets/multidimensionalUtils-6c42637d.js","assets/RasterVFDisplayObject-58bf95ad.js","assets/VertexArrayObject-5d791997.js","assets/Texture-475a6d11.js","assets/enums-b14466b3.js","assets/VertexElementDescriptor-2925c6af.js","assets/dataUtils-e13db66f.js","assets/WGLContainer-bf682126.js","assets/definitions-e4cb28dd.js","assets/color-2b7193c1.js","assets/enums-f1a6a48a.js","assets/ProgramTemplate-1083e985.js","assets/GeometryUtils-d37b0eff.js","assets/StyleDefinition-29c49b98.js","assets/config-1337d16e.js","assets/Container-f524f8d4.js","assets/earcut-e27332fd.js","assets/LayerView-c5acca64.js","assets/rasterUtils-60560d19.js","assets/TiledDisplayObject-520c0dd0.js","assets/TileContainer-dd755a60.js","assets/RawBlockCache-548d03a5.js","assets/rasterProjectionHelper-2c7c9ae1.js","assets/rasterRendererChecks-e55c06d8.js","assets/util-709d9770.js","assets/popupUtils-a41889ef.js","assets/RefreshableLayerView-186b7bdd.js"])),kml:()=>dr().then(()=>ie(()=>import("./KMLLayerView2D-d9dca118.js"),["assets/KMLLayerView2D-d9dca118.js","assets/kmlUtils-988f9f48.js","assets/Bitmap-2f5f26fe.js","assets/Container-f524f8d4.js","assets/definitions-e4cb28dd.js","assets/enums-b14466b3.js","assets/Texture-475a6d11.js","assets/BitmapContainer-bca4bd41.js","assets/WGLContainer-bf682126.js","assets/VertexArrayObject-5d791997.js","assets/VertexElementDescriptor-2925c6af.js","assets/color-2b7193c1.js","assets/enums-f1a6a48a.js","assets/ProgramTemplate-1083e985.js","assets/GeometryUtils-d37b0eff.js","assets/StyleDefinition-29c49b98.js","assets/config-1337d16e.js","assets/earcut-e27332fd.js","assets/LayerView-c5acca64.js","assets/GraphicContainer-76680d33.js","assets/BaseGraphicContainer-f5337fbc.js","assets/FeatureContainer-918580aa.js","assets/AttributeStoreView-a370f993.js","assets/TiledDisplayObject-520c0dd0.js","assets/visualVariablesUtils-a8c18281.js","assets/ExpandedCIM-4e176af0.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-984e8446.js","assets/utils-010a06e5.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-20b347c1.js","assets/floatRGBA-e7157f4d.js","assets/clusterUtils-84d6baf1.js","assets/util-709d9770.js","assets/TileContainer-dd755a60.js","assets/vec3f32-ad1dc57f.js","assets/GraphicsView2D-320a5dcf.js","assets/normalizeUtilsSync-bd6868bb.js","assets/projectionSupport-a7571eb4.js","assets/json-48e3ea08.js","assets/Matcher-d97d175f.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-216fb4d0.js","assets/devEnvironmentUtils-5002a058.js","assets/webStyleSymbolUtils-8f7de622.js","assets/ComputedAttributeStorage-9e574e70.js","assets/arcadeTimeUtils-a7821097.js","assets/executionError-c92d3b85.js","assets/rasterProjectionHelper-2c7c9ae1.js","assets/RenderingContext-134f1048.js","assets/programUtils-16bf542d.js","assets/NestedMap-1b5db22e.js","assets/OrderIndependentTransparency-309a1bc3.js","assets/basicInterfaces-4ab7cc6a.js","assets/testSVGPremultipliedAlpha-7944547e.js","assets/doublePrecisionUtils-e3c3d0d8.js","assets/rasterUtils-60560d19.js"])),"knowledge-graph":()=>dr().then(()=>ie(()=>import("./KnowledgeGraphLayerView2D-c77fb80d.js"),["assets/KnowledgeGraphLayerView2D-c77fb80d.js","assets/LayerView-c5acca64.js","assets/Container-f524f8d4.js","assets/definitions-e4cb28dd.js","assets/enums-b14466b3.js","assets/Texture-475a6d11.js"])),"link-chart":()=>dr().then(()=>ie(()=>import("./KnowledgeGraphLayerView2D-c77fb80d.js"),["assets/KnowledgeGraphLayerView2D-c77fb80d.js","assets/LayerView-c5acca64.js","assets/Container-f524f8d4.js","assets/definitions-e4cb28dd.js","assets/enums-b14466b3.js","assets/Texture-475a6d11.js"])),"knowledge-graph-sublayer":Op,"map-image":()=>dr().then(()=>ie(()=>import("./MapImageLayerView2D-d139594c.js"),["assets/MapImageLayerView2D-d139594c.js","assets/BitmapContainer-bca4bd41.js","assets/WGLContainer-bf682126.js","assets/definitions-e4cb28dd.js","assets/VertexArrayObject-5d791997.js","assets/Texture-475a6d11.js","assets/enums-b14466b3.js","assets/VertexElementDescriptor-2925c6af.js","assets/color-2b7193c1.js","assets/enums-f1a6a48a.js","assets/ProgramTemplate-1083e985.js","assets/GeometryUtils-d37b0eff.js","assets/StyleDefinition-29c49b98.js","assets/config-1337d16e.js","assets/Container-f524f8d4.js","assets/earcut-e27332fd.js","assets/LayerView-c5acca64.js","assets/GraphicsView2D-320a5dcf.js","assets/ExpandedCIM-4e176af0.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-984e8446.js","assets/utils-010a06e5.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-20b347c1.js","assets/floatRGBA-e7157f4d.js","assets/normalizeUtilsSync-bd6868bb.js","assets/projectionSupport-a7571eb4.js","assets/json-48e3ea08.js","assets/AttributeStoreView-a370f993.js","assets/TiledDisplayObject-520c0dd0.js","assets/visualVariablesUtils-a8c18281.js","assets/clusterUtils-84d6baf1.js","assets/util-709d9770.js","assets/Matcher-d97d175f.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-216fb4d0.js","assets/devEnvironmentUtils-5002a058.js","assets/webStyleSymbolUtils-8f7de622.js","assets/ComputedAttributeStorage-9e574e70.js","assets/arcadeTimeUtils-a7821097.js","assets/executionError-c92d3b85.js","assets/HighlightGraphicContainer-780aab00.js","assets/BaseGraphicContainer-f5337fbc.js","assets/FeatureContainer-918580aa.js","assets/TileContainer-dd755a60.js","assets/vec3f32-ad1dc57f.js","assets/ExportStrategy-c71711ed.js","assets/Bitmap-2f5f26fe.js","assets/RefreshableLayerView-186b7bdd.js","assets/drapedUtils-92dbf0a4.js","assets/popupUtils-a41889ef.js"])),"map-notes":()=>dr().then(()=>ie(()=>import("./MapNotesLayerView2D-088bc530.js"),["assets/MapNotesLayerView2D-088bc530.js","assets/Container-f524f8d4.js","assets/definitions-e4cb28dd.js","assets/enums-b14466b3.js","assets/Texture-475a6d11.js","assets/GroupContainer-15d7e95a.js","assets/WGLContainer-bf682126.js","assets/VertexArrayObject-5d791997.js","assets/VertexElementDescriptor-2925c6af.js","assets/color-2b7193c1.js","assets/enums-f1a6a48a.js","assets/ProgramTemplate-1083e985.js","assets/GeometryUtils-d37b0eff.js","assets/StyleDefinition-29c49b98.js","assets/config-1337d16e.js","assets/earcut-e27332fd.js","assets/LayerView-c5acca64.js","assets/GraphicContainer-76680d33.js","assets/BaseGraphicContainer-f5337fbc.js","assets/FeatureContainer-918580aa.js","assets/AttributeStoreView-a370f993.js","assets/TiledDisplayObject-520c0dd0.js","assets/visualVariablesUtils-a8c18281.js","assets/ExpandedCIM-4e176af0.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-984e8446.js","assets/utils-010a06e5.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-20b347c1.js","assets/floatRGBA-e7157f4d.js","assets/clusterUtils-84d6baf1.js","assets/util-709d9770.js","assets/TileContainer-dd755a60.js","assets/vec3f32-ad1dc57f.js","assets/GraphicsView2D-320a5dcf.js","assets/normalizeUtilsSync-bd6868bb.js","assets/projectionSupport-a7571eb4.js","assets/json-48e3ea08.js","assets/Matcher-d97d175f.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-216fb4d0.js","assets/devEnvironmentUtils-5002a058.js","assets/webStyleSymbolUtils-8f7de622.js","assets/ComputedAttributeStorage-9e574e70.js","assets/arcadeTimeUtils-a7821097.js","assets/executionError-c92d3b85.js"])),media:()=>dr().then(()=>ie(()=>import("./MediaLayerView2D-fdbfcf9f.js"),["assets/MediaLayerView2D-fdbfcf9f.js","assets/perspectiveUtils-c78e1799.js","assets/normalizeUtilsSync-bd6868bb.js","assets/mat3f64-221ce671.js","assets/MagnifierPrograms-100cd9d1.js","assets/WGLContainer-bf682126.js","assets/definitions-e4cb28dd.js","assets/VertexArrayObject-5d791997.js","assets/Texture-475a6d11.js","assets/enums-b14466b3.js","assets/VertexElementDescriptor-2925c6af.js","assets/color-2b7193c1.js","assets/enums-f1a6a48a.js","assets/ProgramTemplate-1083e985.js","assets/GeometryUtils-d37b0eff.js","assets/StyleDefinition-29c49b98.js","assets/config-1337d16e.js","assets/Container-f524f8d4.js","assets/earcut-e27332fd.js","assets/ExpandedCIM-4e176af0.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-984e8446.js","assets/utils-010a06e5.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-20b347c1.js","assets/floatRGBA-e7157f4d.js","assets/rasterizingUtils-b34e831f.js","assets/imageutils-5fd1bbcc.js","assets/Matcher-d97d175f.js","assets/visualVariablesUtils-a8c18281.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-216fb4d0.js","assets/devEnvironmentUtils-5002a058.js","assets/webStyleSymbolUtils-8f7de622.js","assets/CircularArray-ef508845.js","assets/testSVGPremultipliedAlpha-7944547e.js","assets/throttle-7bf02de9.js","assets/ComputedAttributeStorage-9e574e70.js","assets/arcadeTimeUtils-a7821097.js","assets/executionError-c92d3b85.js","assets/projectionSupport-a7571eb4.js","assets/json-48e3ea08.js","assets/BufferPool-27a5b8c8.js","assets/AttributeStoreView-a370f993.js","assets/TiledDisplayObject-520c0dd0.js","assets/clusterUtils-84d6baf1.js","assets/util-709d9770.js","assets/enums-fb086c25.js","assets/OrderIndependentTransparency-309a1bc3.js","assets/basicInterfaces-4ab7cc6a.js","assets/GraphicsView2D-320a5dcf.js","assets/vec3f32-ad1dc57f.js","assets/LayerView-c5acca64.js"])),"ogc-feature":()=>dr().then(()=>ie(()=>import("./OGCFeatureLayerView2D-fba20027.js"),["assets/OGCFeatureLayerView2D-fba20027.js","assets/FeatureLayerView2D-e92e60ca.js","assets/Container-f524f8d4.js","assets/definitions-e4cb28dd.js","assets/enums-b14466b3.js","assets/Texture-475a6d11.js","assets/FeatureEffect-38c14a64.js","assets/LayerView-c5acca64.js","assets/AttributeStoreView-a370f993.js","assets/TiledDisplayObject-520c0dd0.js","assets/color-2b7193c1.js","assets/enums-f1a6a48a.js","assets/VertexElementDescriptor-2925c6af.js","assets/WGLContainer-bf682126.js","assets/VertexArrayObject-5d791997.js","assets/ProgramTemplate-1083e985.js","assets/GeometryUtils-d37b0eff.js","assets/StyleDefinition-29c49b98.js","assets/config-1337d16e.js","assets/earcut-e27332fd.js","assets/visualVariablesUtils-a8c18281.js","assets/ExpandedCIM-4e176af0.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-984e8446.js","assets/utils-010a06e5.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-20b347c1.js","assets/floatRGBA-e7157f4d.js","assets/clusterUtils-84d6baf1.js","assets/util-709d9770.js","assets/BitmapTileContainer-4b32c582.js","assets/Bitmap-2f5f26fe.js","assets/TileContainer-dd755a60.js","assets/CircularArray-ef508845.js","assets/BufferPool-27a5b8c8.js","assets/FeatureContainer-918580aa.js","assets/popupUtils-a41889ef.js","assets/RefreshableLayerView-186b7bdd.js"])),"open-street-map":Uy,"oriented-imagery":Op,route:()=>dr().then(()=>ie(()=>import("./RouteLayerView2D-f02c36b6.js"),["assets/RouteLayerView2D-f02c36b6.js","assets/Stop-9888c2fb.js","assets/LayerView-c5acca64.js","assets/Container-f524f8d4.js","assets/definitions-e4cb28dd.js","assets/enums-b14466b3.js","assets/Texture-475a6d11.js","assets/GraphicContainer-76680d33.js","assets/color-2b7193c1.js","assets/enums-f1a6a48a.js","assets/VertexElementDescriptor-2925c6af.js","assets/BaseGraphicContainer-f5337fbc.js","assets/FeatureContainer-918580aa.js","assets/AttributeStoreView-a370f993.js","assets/TiledDisplayObject-520c0dd0.js","assets/WGLContainer-bf682126.js","assets/VertexArrayObject-5d791997.js","assets/ProgramTemplate-1083e985.js","assets/GeometryUtils-d37b0eff.js","assets/StyleDefinition-29c49b98.js","assets/config-1337d16e.js","assets/earcut-e27332fd.js","assets/visualVariablesUtils-a8c18281.js","assets/ExpandedCIM-4e176af0.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-984e8446.js","assets/utils-010a06e5.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-20b347c1.js","assets/floatRGBA-e7157f4d.js","assets/clusterUtils-84d6baf1.js","assets/util-709d9770.js","assets/TileContainer-dd755a60.js","assets/vec3f32-ad1dc57f.js","assets/GraphicsView2D-320a5dcf.js","assets/normalizeUtilsSync-bd6868bb.js","assets/projectionSupport-a7571eb4.js","assets/json-48e3ea08.js","assets/Matcher-d97d175f.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-216fb4d0.js","assets/devEnvironmentUtils-5002a058.js","assets/webStyleSymbolUtils-8f7de622.js","assets/ComputedAttributeStorage-9e574e70.js","assets/arcadeTimeUtils-a7821097.js","assets/executionError-c92d3b85.js"])),stream:()=>dr().then(()=>ie(()=>import("./StreamLayerView2D-a50220e5.js"),["assets/StreamLayerView2D-a50220e5.js","assets/FeatureLayerView2D-e92e60ca.js","assets/Container-f524f8d4.js","assets/definitions-e4cb28dd.js","assets/enums-b14466b3.js","assets/Texture-475a6d11.js","assets/FeatureEffect-38c14a64.js","assets/LayerView-c5acca64.js","assets/AttributeStoreView-a370f993.js","assets/TiledDisplayObject-520c0dd0.js","assets/color-2b7193c1.js","assets/enums-f1a6a48a.js","assets/VertexElementDescriptor-2925c6af.js","assets/WGLContainer-bf682126.js","assets/VertexArrayObject-5d791997.js","assets/ProgramTemplate-1083e985.js","assets/GeometryUtils-d37b0eff.js","assets/StyleDefinition-29c49b98.js","assets/config-1337d16e.js","assets/earcut-e27332fd.js","assets/visualVariablesUtils-a8c18281.js","assets/ExpandedCIM-4e176af0.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-984e8446.js","assets/utils-010a06e5.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-20b347c1.js","assets/floatRGBA-e7157f4d.js","assets/clusterUtils-84d6baf1.js","assets/util-709d9770.js","assets/BitmapTileContainer-4b32c582.js","assets/Bitmap-2f5f26fe.js","assets/TileContainer-dd755a60.js","assets/CircularArray-ef508845.js","assets/BufferPool-27a5b8c8.js","assets/FeatureContainer-918580aa.js","assets/popupUtils-a41889ef.js","assets/RefreshableLayerView-186b7bdd.js"])),"subtype-group":()=>dr().then(()=>ie(()=>import("./SubtypeGroupLayerView2D-183bbb64.js"),["assets/SubtypeGroupLayerView2D-183bbb64.js","assets/FeatureEffect-38c14a64.js","assets/FeatureLayerView2D-e92e60ca.js","assets/Container-f524f8d4.js","assets/definitions-e4cb28dd.js","assets/enums-b14466b3.js","assets/Texture-475a6d11.js","assets/LayerView-c5acca64.js","assets/AttributeStoreView-a370f993.js","assets/TiledDisplayObject-520c0dd0.js","assets/color-2b7193c1.js","assets/enums-f1a6a48a.js","assets/VertexElementDescriptor-2925c6af.js","assets/WGLContainer-bf682126.js","assets/VertexArrayObject-5d791997.js","assets/ProgramTemplate-1083e985.js","assets/GeometryUtils-d37b0eff.js","assets/StyleDefinition-29c49b98.js","assets/config-1337d16e.js","assets/earcut-e27332fd.js","assets/visualVariablesUtils-a8c18281.js","assets/ExpandedCIM-4e176af0.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-984e8446.js","assets/utils-010a06e5.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-20b347c1.js","assets/floatRGBA-e7157f4d.js","assets/clusterUtils-84d6baf1.js","assets/util-709d9770.js","assets/BitmapTileContainer-4b32c582.js","assets/Bitmap-2f5f26fe.js","assets/TileContainer-dd755a60.js","assets/CircularArray-ef508845.js","assets/BufferPool-27a5b8c8.js","assets/FeatureContainer-918580aa.js","assets/popupUtils-a41889ef.js","assets/RefreshableLayerView-186b7bdd.js"])),tile:Uy,"vector-tile":()=>dr().then(()=>ie(()=>import("./VectorTileLayerView2D-6fb6be72.js"),["assets/VectorTileLayerView2D-6fb6be72.js","assets/enums-fb086c25.js","assets/Rect-ea14f53a.js","assets/enums-b14466b3.js","assets/Texture-475a6d11.js","assets/rasterizingUtils-b34e831f.js","assets/floatRGBA-e7157f4d.js","assets/VertexArrayObject-5d791997.js","assets/config-1337d16e.js","assets/TiledDisplayObject-520c0dd0.js","assets/Container-f524f8d4.js","assets/definitions-e4cb28dd.js","assets/StyleDefinition-29c49b98.js","assets/enums-f1a6a48a.js","assets/color-2b7193c1.js","assets/VertexElementDescriptor-2925c6af.js","assets/TileContainer-dd755a60.js","assets/WGLContainer-bf682126.js","assets/ProgramTemplate-1083e985.js","assets/GeometryUtils-d37b0eff.js","assets/earcut-e27332fd.js","assets/StyleRepository-e19e019c.js","assets/colorUtils-c0f43caf.js","assets/GeometryUtils-984e8446.js","assets/LayerView-c5acca64.js"])),video:()=>dr().then(()=>ie(()=>import("./VideoLayerView2D-4064230a.js"),["assets/VideoLayerView2D-4064230a.js","assets/LayerView-c5acca64.js","assets/Container-f524f8d4.js","assets/definitions-e4cb28dd.js","assets/enums-b14466b3.js","assets/Texture-475a6d11.js"])),wcs:()=>dr().then(()=>ie(()=>import("./ImageryTileLayerView2D-3dce9cd4.js"),["assets/ImageryTileLayerView2D-3dce9cd4.js","assets/multidimensionalUtils-6c42637d.js","assets/RasterVFDisplayObject-58bf95ad.js","assets/VertexArrayObject-5d791997.js","assets/Texture-475a6d11.js","assets/enums-b14466b3.js","assets/VertexElementDescriptor-2925c6af.js","assets/dataUtils-e13db66f.js","assets/WGLContainer-bf682126.js","assets/definitions-e4cb28dd.js","assets/color-2b7193c1.js","assets/enums-f1a6a48a.js","assets/ProgramTemplate-1083e985.js","assets/GeometryUtils-d37b0eff.js","assets/StyleDefinition-29c49b98.js","assets/config-1337d16e.js","assets/Container-f524f8d4.js","assets/earcut-e27332fd.js","assets/LayerView-c5acca64.js","assets/rasterUtils-60560d19.js","assets/TiledDisplayObject-520c0dd0.js","assets/TileContainer-dd755a60.js","assets/RawBlockCache-548d03a5.js","assets/rasterProjectionHelper-2c7c9ae1.js","assets/rasterRendererChecks-e55c06d8.js","assets/util-709d9770.js","assets/popupUtils-a41889ef.js","assets/RefreshableLayerView-186b7bdd.js"])),"web-tile":Uy,wfs:Op,wms:()=>dr().then(()=>ie(()=>import("./WMSLayerView2D-0729f142.js"),["assets/WMSLayerView2D-0729f142.js","assets/BitmapContainer-bca4bd41.js","assets/WGLContainer-bf682126.js","assets/definitions-e4cb28dd.js","assets/VertexArrayObject-5d791997.js","assets/Texture-475a6d11.js","assets/enums-b14466b3.js","assets/VertexElementDescriptor-2925c6af.js","assets/color-2b7193c1.js","assets/enums-f1a6a48a.js","assets/ProgramTemplate-1083e985.js","assets/GeometryUtils-d37b0eff.js","assets/StyleDefinition-29c49b98.js","assets/config-1337d16e.js","assets/Container-f524f8d4.js","assets/earcut-e27332fd.js","assets/LayerView-c5acca64.js","assets/ExportStrategy-c71711ed.js","assets/Bitmap-2f5f26fe.js","assets/RefreshableLayerView-186b7bdd.js","assets/ExportWMSImageParameters-546d65a8.js"])),wmts:()=>dr().then(()=>ie(()=>import("./WMTSLayerView2D-912aba77.js"),["assets/WMTSLayerView2D-912aba77.js","assets/imageUtils-0049f3c5.js","assets/BitmapTileContainer-4b32c582.js","assets/Bitmap-2f5f26fe.js","assets/Container-f524f8d4.js","assets/definitions-e4cb28dd.js","assets/enums-b14466b3.js","assets/Texture-475a6d11.js","assets/TiledDisplayObject-520c0dd0.js","assets/WGLContainer-bf682126.js","assets/VertexArrayObject-5d791997.js","assets/VertexElementDescriptor-2925c6af.js","assets/color-2b7193c1.js","assets/enums-f1a6a48a.js","assets/ProgramTemplate-1083e985.js","assets/GeometryUtils-d37b0eff.js","assets/StyleDefinition-29c49b98.js","assets/config-1337d16e.js","assets/earcut-e27332fd.js","assets/TileContainer-dd755a60.js","assets/LayerView-c5acca64.js","assets/RefreshableLayerView-186b7bdd.js"])),"line-of-sight":null,"base-elevation":null,"building-scene":null,dimension:null,elevation:null,"integrated-mesh":null,"point-cloud":null,voxel:null,scene:null,unknown:null,unsupported:null};function J0e(e){const t=e.declaredClass?e.declaredClass.slice(e.declaredClass.lastIndexOf(".")+1):"Unknown",r=t.replaceAll(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();return new N(`${r}:view-not-supported`,`${t} is not supported in 2D`)}const xF={hasLayerViewModule:e=>SF[e.type]!=null,importLayerView:e=>{const t=SF[e.type];if(t==null)throw J0e(e);return t(e)}};function Q0e(e,t){const{spatialReference:r}=t,n=[t.x,t.y];let i=Number.POSITIVE_INFINITY,s=0,o=0;const a=[0,0],l=e.type==="extent"?[[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]]]:e.rings;for(const c of l)for(let h=0;h<c.length-1;h++){ble(a,n,c,h);const f=h1(n,a);f<i&&(i=f,s=a[0],o=a[1])}return{coordinate:new be({x:s,y:o,spatialReference:r}),distance:i}}var DC;let _h=DC=class extends fR($e){constructor(e){super(e),this.geometry=null,this.spatialReference=null}get normalizedGeometry(){if(this.geometry==null||!this.spatialReference)return null;if(!this.spatialReference.equals(this.geometry.spatialReference))try{return uu(this.geometry,this.spatialReference)}catch(e){return Z.getLogger(this).error("#constraints.geometry","could not project the geometry to the view's spatial reference",{geometry:this.geometry,spatialReference:this.spatialReference,error:e}),null}return this.geometry}constrain(e,t){if(this.normalizedGeometry==null)return e;const r=e.targetGeometry;if(this.normalizedGeometry.type==="extent"?a2(this.normalizedGeometry,r):zz(this.normalizedGeometry,r))return e;const{coordinate:n}=Q0e(this.normalizedGeometry,r);return n&&(e.targetGeometry=n),e}clone(){var e,t;return new DC({geometry:(e=this.geometry)==null?void 0:e.clone(),spatialReference:(t=this.spatialReference)==null?void 0:t.clone()})}};u([d({constructOnly:!0})],_h.prototype,"geometry",void 0),u([d({readOnly:!0})],_h.prototype,"normalizedGeometry",null),u([d({constructOnly:!0})],_h.prototype,"spatialReference",void 0),_h=DC=u([E("esri.views.2d.constraints.GeometryConstraint")],_h);var FC;let Og=FC=class extends fR($e){constructor(){super(...arguments),this.enabled=!0,this.rotationEnabled=!0}constrain(e,t){return this.enabled&&t&&(this.rotationEnabled||(e.rotation=t.rotation)),e}clone(){return new FC({enabled:this.enabled,rotationEnabled:this.rotationEnabled})}};u([d()],Og.prototype,"enabled",void 0),u([d()],Og.prototype,"rotationEnabled",void 0),Og=FC=u([E("esri.views.2d.constraints.RotationConstraint")],Og);const qB=Og;var jC;let di=jC=class extends fR($e){constructor(e){super(e),this._lodByScale={},this._scales=[],this.effectiveLODs=null,this.effectiveMinZoom=-1,this.effectiveMaxZoom=-1,this.effectiveMinScale=0,this.effectiveMaxScale=0,this.lods=null,this.minZoom=-1,this.maxZoom=-1,this.minScale=0,this.maxScale=0,this.snapToZoom=!0}initialize(){let e,{lods:t,minScale:r,maxScale:n,minZoom:i,maxZoom:s}=this,o=-1,a=-1,l=!1,c=!1;if(r!==0&&n!==0&&r<n&&([r,n]=[n,r]),!t||!t.length)return this._set("effectiveMinScale",r),void this._set("effectiveMaxScale",n);t=t.map(h=>h.clone()),t.sort((h,f)=>f.scale-h.scale),t.forEach((h,f)=>h.level=f);for(const h of t)!l&&r>0&&r>=h.scale&&(o=h.level,l=!0),!c&&n>0&&n>=h.scale&&(a=e?e.level:-1,c=!0),e=h;i===-1&&(i=r===0?0:o),s===-1&&(s=n===0?t.length-1:a),i=Math.max(i,0),i=Math.min(i,t.length-1),s=Math.max(s,0),s=Math.min(s,t.length-1),i>s&&([i,s]=[s,i]),r=t[i].scale,n=t[s].scale,t.splice(0,i),t.splice(s-i+1,t.length),t.forEach((h,f)=>{this._lodByScale[h.scale]=h,this._scales[f]=h.scale}),this._set("effectiveLODs",t),this._set("effectiveMinZoom",i),this._set("effectiveMaxZoom",s),this._set("effectiveMinScale",r),this._set("effectiveMaxScale",n)}constrain(e,t){if(t&&e.scale===t.scale)return e;const r=this.effectiveMinScale,n=this.effectiveMaxScale,i=e.targetGeometry,s=t&&t.targetGeometry,o=n!==0&&e.scale<n,a=r!==0&&e.scale>r;if(o||a){const l=a?r:n;if(t&&s){const c=(l-t.scale)/(e.scale-t.scale);i.x=s.x+(i.x-s.x)*c,i.y=s.y+(i.y-s.y)*c}e.scale=l}return this.snapToZoom&&this.effectiveLODs&&(e.scale=this._getClosestScale(e.scale)),e}fit(e){if(!this.effectiveLODs||!this.snapToZoom)return this.constrain(e,null);const t=this.scaleToZoom(e.scale),r=Math.abs(t-Math.floor(t));return e.scale=this.zoomToScale(r>.99?Math.round(t):Math.floor(t)),e}zoomToScale(e){if(!this.effectiveLODs)return 0;e-=this.effectiveMinZoom,e=Math.max(0,e);const t=this._scales;if(e<=0)return t[0];if(e>=t.length)return t[t.length-1];const r=Math.round(e-.5),n=Math.round(e);return t[n]+(n-e)*(t[r]-t[n])}scaleToZoom(e){if(!this.effectiveLODs)return-1;const t=this._scales;let r,n;if(e>=t[0])return this.effectiveMinZoom;if(e<=t[t.length-1])return this.effectiveMaxZoom;for(let i=0;i<t.length-1;i++){if(r=t[i],n=t[i+1],n===e)return i+this.effectiveMinZoom+1;if(r>e&&n<e)return i+this.effectiveMinZoom+1-(e-n)/(r-n)}return-1}snapToClosestScale(e){if(!this.effectiveLODs)return e;const t=this.scaleToZoom(e);return this.zoomToScale(Math.round(t))}snapToNextScale(e,t=.5){if(!this.effectiveLODs)return e*t;const r=Math.round(this.scaleToZoom(e));return this.zoomToScale(r+1)}snapToPreviousScale(e,t=2){if(!this.effectiveLODs)return e*t;const r=Math.round(this.scaleToZoom(e));return this.zoomToScale(r-1)}clone(){return new jC({lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale})}_getClosestScale(e){return this._lodByScale[e]||(e=this._scales.reduce((t,r)=>Math.abs(r-e)<=Math.abs(t-e)?r:t,this._scales[0])),this._lodByScale[e].scale}};u([d({readOnly:!0})],di.prototype,"effectiveLODs",void 0),u([d({readOnly:!0})],di.prototype,"effectiveMinZoom",void 0),u([d({readOnly:!0})],di.prototype,"effectiveMaxZoom",void 0),u([d({readOnly:!0})],di.prototype,"effectiveMinScale",void 0),u([d({readOnly:!0})],di.prototype,"effectiveMaxScale",void 0),u([d()],di.prototype,"lods",void 0),u([d()],di.prototype,"minZoom",void 0),u([d()],di.prototype,"maxZoom",void 0),u([d()],di.prototype,"minScale",void 0),u([d()],di.prototype,"maxScale",void 0),u([d()],di.prototype,"snapToZoom",void 0),di=jC=u([E("esri.views.2d.constraints.ZoomConstraint")],di);const WB=di,Y0e={base:null,key:"type",typeMap:{extent:at,polygon:Fa}};let _r=class extends $e{constructor(t){super(t),this.lods=null,this.minScale=0,this.maxScale=0,this.minZoom=-1,this.maxZoom=-1,this.rotationEnabled=!0,this.snapToZoom=!0,this.customConstraints=new Le}destroy(){this.view=null}get effectiveLODs(){return this._zoom.effectiveLODs}get effectiveMinScale(){return this._zoom.effectiveMinScale}get effectiveMaxScale(){return this._zoom.effectiveMaxScale}get effectiveMinZoom(){return this._zoom.effectiveMinZoom}get effectiveMaxZoom(){return this._zoom.effectiveMaxZoom}set geometry(t){t?this._set("geometry",t):this._set("geometry",null)}get version(){var t,r,n;return`${(t=this._zoom)==null?void 0:t.uid}/${(r=this._rotation)==null?void 0:r.uid}/${(n=this._geometry)==null?void 0:n.uid}`}get _geometry(){var r,n;const t=this._get("_geometry");return t&&this.geometry===t.geometry&&((r=this.view)==null?void 0:r.constraintsInfo.spatialReference)===t.spatialReference?t:new _h({geometry:this.geometry,spatialReference:(n=this.view)==null?void 0:n.constraintsInfo.spatialReference})}get _rotation(){return new qB({rotationEnabled:this.rotationEnabled})}get _zoom(){var l;const t=this._get("_zoom"),r=this.lods||((l=this.view)==null?void 0:l.constraintsInfo.lods),n=this.minZoom,i=this.maxZoom,s=this.minScale,o=this.maxScale,a=this.snapToZoom;return t&&t.lods===r&&t.minZoom===n&&t.maxZoom===i&&t.minScale===s&&t.maxScale===o&&t.snapToZoom===a?t:new WB({lods:r,minZoom:n,maxZoom:i,minScale:s,maxScale:o,snapToZoom:a})}canZoomInTo(t){const r=this.effectiveMaxScale;return r===0||t>=r}canZoomOutTo(t){const r=this.effectiveMinScale;return r===0||t<=r}constrain(t,r){return this._zoom.constrain(t,r),this._rotation.constrain(t,r),this._geometry.constrain(t,r),this.customConstraints.forEach(n=>n.constrain(t,r)),t}constrainByGeometry(t){return this._geometry.constrain(t)}fit(t){return this._zoom.fit(t)}zoomToScale(t){return this._zoom.zoomToScale(t)}scaleToZoom(t){return this._zoom.scaleToZoom(t)}snapScale(t){return this._zoom.snapToClosestScale(t)}snapToNextScale(t){return this._zoom.snapToNextScale(t)}snapToPreviousScale(t){return this._zoom.snapToPreviousScale(t)}};u([d({readOnly:!0})],_r.prototype,"effectiveLODs",null),u([d({readOnly:!0})],_r.prototype,"effectiveMinScale",null),u([d({readOnly:!0})],_r.prototype,"effectiveMaxScale",null),u([d({readOnly:!0})],_r.prototype,"effectiveMinZoom",null),u([d({readOnly:!0})],_r.prototype,"effectiveMaxZoom",null),u([d({types:Y0e,value:null})],_r.prototype,"geometry",null),u([d({type:[dc]})],_r.prototype,"lods",void 0),u([d()],_r.prototype,"minScale",void 0),u([d()],_r.prototype,"maxScale",void 0),u([d()],_r.prototype,"minZoom",void 0),u([d()],_r.prototype,"maxZoom",void 0),u([d()],_r.prototype,"rotationEnabled",void 0),u([d()],_r.prototype,"snapToZoom",void 0),u([d({type:Le})],_r.prototype,"customConstraints",void 0),u([d()],_r.prototype,"view",void 0),u([d({readOnly:!0})],_r.prototype,"version",null),u([d({type:_h,readOnly:!0})],_r.prototype,"_geometry",null),u([d({type:qB})],_r.prototype,"_rotation",null),u([d({readOnly:!0,type:WB})],_r.prototype,"_zoom",null),_r=u([E("esri.views.2d.MapViewConstraints")],_r);const HB=_r;let K0e=class{constructor(t,r){this.item=t,this.controller=r,this.promise=null}},ZB=class{constructor(t){this._deferreds=new Map,this._controllers=new Map,this._processingItems=new Map,this._isPaused=!1,this._schedule=null,this._task=null,this.concurrency=1,t.concurrency&&(this.concurrency=t.concurrency),this._queue=new US(t.peeker),this.process=t.process;const r=t.scheduler;t.priority&&r&&(this._task=r.registerTask(t.priority,this))}destroy(){this.clear(),this._schedule=or(this._schedule),this._task=or(this._task)}get length(){return this._processingItems.size+this._queue.length}abort(t){const r=this._controllers.get(t);r&&r.abort()}clear(){this._queue.clear();const t=[];this._controllers.forEach(r=>t.push(r)),this._controllers.clear(),t.forEach(r=>r.abort()),this._processingItems.clear(),this._cancelNext()}forEach(t){this._deferreds.forEach((r,n)=>t(n))}get(t){const r=this._deferreds.get(t);return r?r.promise:void 0}isOngoing(t){return this._processingItems.has(t)}has(t){return this._deferreds.has(t)}pause(){this._isPaused||(this._isPaused=!0,this._cancelNext())}push(t,r){const n=this.get(t);if(n)return n;const i=new AbortController;let s=null;r&&(s=As(r,()=>i.abort()));const o=()=>{const h=this._processingItems.get(t);h&&h.controller.abort(),a(),c.reject(ar())},a=()=>{l.remove(),s!=null&&s.remove(),this._deferreds.delete(t),this._controllers.delete(t),this._queue.remove(t),this._processingItems.delete(t),this._scheduleNext()},l=SO(i.signal,o),c=Bo();return this._deferreds.set(t,c),this._controllers.set(t,i),c.promise.then(a,a),this._queue.push(t),this._scheduleNext(),c.promise}last(){return this._queue.last()}peek(){return this._queue.peek()}popLast(){return this._queue.popLast()}reset(){const t=[];this._processingItems.forEach(r=>t.push(r)),this._processingItems.clear();for(const r of t)this._queue.push(r.item),r.controller.abort();this._scheduleNext()}resume(){this._isPaused&&(this._isPaused=!1,this._scheduleNext())}takeAll(){const t=[];for(;this._queue.length;)t.push(this._queue.pop());return this.clear(),t}get running(){return!this._isPaused&&this._queue.length>0&&this._processingItems.size<this.concurrency}runTask(t){for(;!t.done&&this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop()),t.madeProgress()}_scheduleNext(){this._task||this._isPaused||this._schedule||(this._schedule=Bm(()=>{this._schedule=null,this._next()}))}_next(){for(;this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())}_cancelNext(){this._schedule&&(this._schedule.remove(),this._schedule=null)}_processResult(t,r){this._canProcessFulfillment(t)&&(this._scheduleNext(),this._deferreds.get(t.item).resolve(r))}_processError(t,r){this._canProcessFulfillment(t)&&(this._scheduleNext(),this._deferreds.get(t.item).reject(r))}_canProcessFulfillment(t){return!!this._deferreds.get(t.item)&&this._processingItems.get(t.item)===t}_process(t){if(t==null)return;let r;const n=new AbortController,i=new K0e(t,n);this._processingItems.set(t,i);try{r=this.process(t,n.signal)}catch(s){this._processError(i,s)}au(r)?(i.promise=r,r.then(s=>this._processResult(i,s),s=>this._processError(i,s))):this._processResult(i,r)}get test(){return{update:t=>this.runTask(t)}}};function X0e(e,t){return e.length=0,t.forEach(r=>e.push(r)),e}const fT=new Set,Tw=[],Rp=new Map,$F=[0,0];let Eu=class extends $e{constructor(t){super(t),this._keyToItem=new Map,this.concurrency=6,this.strategy="scale-first",this.tileInfoView=null}initialize(){const{concurrency:t,process:r}=this;this._queue=new ZB({concurrency:t,process:(n,i)=>{const s=this._keyToItem.get(n);return r(s,{signal:i})},peeker:n=>n.values().next().value})}destroy(){this.clear(),this._queue=Gt(this._queue)}get length(){return this._queue?this._queue.length:0}get onGoingCount(){return this._keyToItem.size}get updating(){return this.length>0||this.onGoingCount>0}abort(t){const r=typeof t=="string"?t:t.id;this._queue.abort(r)}clear(){this._queue.clear(),this._keyToItem.clear(),this.notifyChange("updating")}has(t){return typeof t=="string"?this._keyToItem.has(t):this._keyToItem.has(t.id)}isOngoing(t){const r=typeof t=="string"?t:t.id;return this.has(r)&&this._queue.isOngoing(r)}pause(){this._queue.pause()}push(t,r){const n=t.key.id+"-"+r;if(this.has(n))return this.get(n);const i=this._queue.push(n),s=()=>{this._keyToItem.delete(n),this.notifyChange("updating")};return this._keyToItem.set(n,t),i.then(s,s),this.notifyChange("updating"),i}reset(){this._queue.reset(),this.notifyChange("updating")}resume(){this._queue.resume()}_peekByScaleFirst(t){if(!this.state)return t.values().next().value;const r=this.tileInfoView;let n=Number.NEGATIVE_INFINITY,i=Number.POSITIVE_INFINITY;t.forEach(h=>{const f=this._keyToItem.get(h),m=this.tileInfoView.getTileScale(f.key);Rp.has(m)||(Rp.set(m,[]),n=Math.max(m,n),i=Math.min(m,i)),Rp.get(m).push(f.key),fT.add(m)});let s=this.state.scale;Rp.has(s)||(X0e(Tw,fT),Tw.sort((h,f)=>h-f),s=Tw.reduce((h,f)=>Math.abs(f-s)<Math.abs(h-s)?f:h,Tw[0])),s=Math.min(s,n),s=Math.max(s,i);const o=Rp.get(s),a=r.getClosestInfoForScale(s),l=a.getColumnForX(this.state.center[0]),c=a.getRowForY(this.state.center[1]);return o.sort((h,f)=>{const m=a.denormalizeCol(h.col,h.world),y=a.denormalizeCol(f.col,f.world);return Math.sqrt((l-m)*(l-m)+(c-h.row)*(c-h.row))-Math.sqrt((l-y)*(l-y)+(c-f.row)*(c-f.row))}),fT.clear(),Rp.clear(),o[0].id}_peekByCenterFirst(t){if(!this.state)return t.values().next().value;const r=this.tileInfoView,n=this.state.center;let i,s=Number.POSITIVE_INFINITY;return t.forEach(o=>{const a=this._keyToItem.get(o);r.getTileCoords($F,a.key);const l=h1($F,n);l<s&&(s=l,i=a.key)}),i.id}};u([d({constructOnly:!0})],Eu.prototype,"concurrency",void 0),u([d({constructOnly:!0})],Eu.prototype,"process",void 0),u([d()],Eu.prototype,"state",void 0),u([d({constructOnly:!0})],Eu.prototype,"strategy",void 0),u([d({constructOnly:!0})],Eu.prototype,"tileInfoView",void 0),u([d({readOnly:!0})],Eu.prototype,"updating",null),Eu=u([E("esri.views.2d.tiling.PagedTileQueue")],Eu);let pp=class Kd{static getId(t,r,n,i){return typeof t=="object"?`${t.level}/${t.row}/${t.col}/${t.world}`:`${t}/${r}/${n}/${i}`}constructor(t,r,n,i){this.set(t,r,n,i)}get key(){return this}get id(){return this.toString()}set id(t){this.set(t)}get hash(){const t=4095&this.row,r=4095&this.col,n=63&this.level;return(3&this.world)<<30|r<<22|t<<8|n}acquire(t,r,n,i){this.set(t,r,n,i)}contains(t){const r=t.level-this.level;return r>=0&&this.row===t.row>>r&&this.col===t.col>>r&&this.world===t.world}equals(t){return this.level===t.level&&this.row===t.row&&this.col===t.col&&this.world===t.world}clone(){return new Kd(this)}release(){this.level=0,this.row=0,this.col=0,this.world=0}set(t,r,n,i){if(t==null)this.level=0,this.row=0,this.col=0,this.world=0;else if(typeof t=="object")this.level=t.level||0,this.row=t.row||0,this.col=t.col||0,this.world=t.world||0;else if(typeof t=="string"){const[s,o,a,l]=t.split("/");this.level=parseFloat(s),this.row=parseFloat(o),this.col=parseFloat(a),this.world=parseFloat(l)}else this.level=+t,this.row=+r,this.col=+n,this.world=+i||0;return this}toString(){return`${this.level}/${this.row}/${this.col}/${this.world}`}getParentKey(){return this.level<=0?null:new Kd(this.level-1,this.row>>1,this.col>>1,this.world)}getChildKeys(){const t=this.level+1,r=this.row<<1,n=this.col<<1,i=this.world;return[new Kd(t,r,n,i),new Kd(t,r,n+1,i),new Kd(t,r+1,n,i),new Kd(t,r+1,n+1,i)]}compareRowMajor(t){return this.row<t.row?-1:this.row>t.row?1:this.col<t.col?-1:this.col>t.col?1:0}};pp.pool=new ud(pp,null,null,25,50);function Mu(e,t){return[e,t]}function Ed(e,t,r){return e[0]=t,e[1]=r,e}function eve(e,t,r,n,i){return e[0]=t,e[1]=r,e[2]=n,e[3]=i,e}const eo=new pp("0/0/0/0");let tve=class JB{static create(t,r,n=null){const i=Ls(t.spatialReference),s=r.origin||Mu(t.origin.x,t.origin.y),o=Mu(t.size[0]*r.resolution,t.size[1]*r.resolution),a=Mu(-1/0,-1/0),l=Mu(1/0,1/0),c=Mu(1/0,1/0);n!=null&&(Ed(a,Math.max(0,Math.floor((n.xmin-s[0])/o[0])),Math.max(0,Math.floor((s[1]-n.ymax)/o[1]))),Ed(l,Math.max(0,Math.floor((n.xmax-s[0])/o[0])),Math.max(0,Math.floor((s[1]-n.ymin)/o[1]))),Ed(c,l[0]-a[0]+1,l[1]-a[1]+1));const{cols:h,rows:f}=r;let m,y,g,v;return!n&&h&&f&&(Ed(a,h[0],f[0]),Ed(l,h[1],f[1]),Ed(c,h[1]-h[0]+1,f[1]-f[0]+1)),t.isWrappable?(m=Mu(Math.ceil(Math.round((i.valid[1]-i.valid[0])/r.resolution)/t.size[0]),c[1]),y=Mu(Math.floor((i.origin[0]-s[0])/o[0]),a[1]),g=Mu(m[0]+y[0]-1,l[1]),v=!0):(y=a,g=l,m=c,v=!1),new JB(r.level,r.resolution,r.scale,s,a,l,c,o,y,g,m,v)}constructor(t,r,n,i,s,o,a,l,c,h,f,m){this.level=t,this.resolution=r,this.scale=n,this.origin=i,this.first=s,this.last=o,this.size=a,this.norm=l,this.worldStart=c,this.worldEnd=h,this.worldSize=f,this.wrap=m}normalizeCol(t){if(!this.wrap)return t;const r=this.worldSize[0];return t<0?r-1-Math.abs((t+1)%r):t%r}denormalizeCol(t,r){return this.wrap?this.worldSize[0]*r+t:t}getWorldForColumn(t){return this.wrap?Math.floor(t/this.worldSize[0]):0}getFirstColumnForWorld(t){return t*this.worldSize[0]+this.first[0]}getLastColumnForWorld(t){return t*this.worldSize[0]+this.first[0]+this.size[0]-1}getColumnForX(t){return(t-this.origin[0])/this.norm[0]}getXForColumn(t){return this.origin[0]+t*this.norm[0]}getRowForY(t){return(this.origin[1]-t)/this.norm[1]}getYForRow(t){return this.origin[1]-t*this.norm[1]}getTileBounds(t,r,n=!1){eo.set(r);const i=n?eo.col:this.denormalizeCol(eo.col,eo.world),s=eo.row;return eve(t,this.getXForColumn(i),this.getYForRow(s+1),this.getXForColumn(i+1),this.getYForRow(s)),t}getTileCoords(t,r,n=!1){eo.set(r);const i=n?eo.col:this.denormalizeCol(eo.col,eo.world);return Array.isArray(t)?Ed(t,this.getXForColumn(i),this.getYForRow(eo.row)):(t.x=this.getXForColumn(i),t.y=this.getYForRow(eo.row)),t}},kv=class{constructor(){this.spans=[]}acquire(t){this.lodInfo=t}release(){this.lodInfo=null,this.spans.length=0}forEach(t,r){const{spans:n,lodInfo:i}=this,{level:s}=i;if(n.length!==0)for(const{row:o,colFrom:a,colTo:l}of n)for(let c=a;c<=l;c++)t.call(r,s,o,i.normalizeCol(c),i.getWorldForColumn(c))}};kv.pool=new ud(kv);let mT=class{constructor(t,r,n){this.row=t,this.colFrom=r,this.colTo=n}};const Zt=new pp("0/0/0/0");let rve=class QB{static create(t,r){t[1]>r[1]&&([t,r]=[r,t]);const[n,i]=t,[s,o]=r,a=s-n,l=o-i,c=l!==0?a/l:0,h=(Math.ceil(i)-i)*c,f=(Math.floor(i)-i)*c;return new QB(n,Math.floor(i),Math.ceil(o),c,a<0?h:f,a<0?f:h,a<0?s:n,a<0?n:s)}constructor(t,r,n,i,s,o,a,l){this.x=t,this.ymin=r,this.ymax=n,this.invM=i,this.leftAdjust=s,this.rightAdjust=o,this.leftBound=a,this.rightBound=l}incrRow(){this.x+=this.invM}getLeftCol(){return Math.max(this.x+this.leftAdjust,this.leftBound)}getRightCol(){return Math.min(this.x+this.rightAdjust,this.rightBound)}};const Ai=[[0,0],[0,0],[0,0],[0,0]],nve=1e-6;let ive=class{constructor(t,r=null,n=t.lods[0].level,i=t.lods[t.lods.length-1].level){this.tileInfo=t,this.fullExtent=r,this.scales=[],this._infoByScale={},this._infoByLevel={};const s=t.lods.filter(a=>a.level>=n&&a.level<=i);this.minScale=s[0].scale,this.maxScale=s[s.length-1].scale;const o=this._lodInfos=s.map(a=>tve.create(t,a,r));s.forEach((a,l)=>{this._infoByLevel[a.level]=o[l],this._infoByScale[a.scale]=o[l],this.scales[l]=a.scale},this),this._wrap=t.isWrappable}get spatialReference(){return this.tileInfo.spatialReference}getLODInfoAt(t){return this._infoByLevel[typeof t=="number"?t:t.level]}getTileBounds(t,r,n=!1){Zt.set(r);const i=this._infoByLevel[Zt.level];return i?i.getTileBounds(t,Zt,n):t}getTileCoords(t,r,n=!1){Zt.set(r);const i=this._infoByLevel[Zt.level];return i?i.getTileCoords(t,Zt,n):t}getTileCoverage(t,r=192,n=!0,i="closest"){if(!n&&(t.scale>this.minScale||t.scale<this.maxScale))return null;const s=i==="closest"?this.getClosestInfoForScale(t.scale):this.getSmallestInfoForScale(t.scale),o=kv.pool.acquire(s),a=this._wrap;let l,c,h,f=1/0,m=-1/0;const y=o.spans;Ai[0][0]=Ai[0][1]=Ai[1][1]=Ai[3][0]=-r,Ai[1][0]=Ai[2][0]=t.size[0]+r,Ai[2][1]=Ai[3][1]=t.size[1]+r;for(const b of Ai)t.toMap(b,b),b[0]=s.getColumnForX(b[0]),b[1]=s.getRowForY(b[1]);const g=[];let v=3;for(let b=0;b<4;b++){if(Ai[b][1]===Ai[v][1]){v=b;continue}const S=rve.create(Ai[b],Ai[v]);f=Math.min(S.ymin,f),m=Math.max(S.ymax,m),g[S.ymin]===void 0&&(g[S.ymin]=[]),g[S.ymin].push(S),v=b}if(f==null||m==null||m-f>100)return null;let w=[];for(l=f;l<m;){g[l]!=null&&(w=w.concat(g[l])),c=1/0,h=-1/0;for(let b=w.length-1;b>=0;b--){const S=w[b];c=Math.min(c,S.getLeftCol()),h=Math.max(h,S.getRightCol())}if(c=Math.floor(c),h=Math.floor(h),l>=s.first[1]&&l<=s.last[1])if(a)if(s.size[0]<s.worldSize[0]){const b=Math.floor(h/s.worldSize[0]);for(let S=Math.floor(c/s.worldSize[0]);S<=b;S++)y.push(new mT(l,Math.max(s.getFirstColumnForWorld(S),c),Math.min(s.getLastColumnForWorld(S),h)))}else y.push(new mT(l,c,h));else c>s.last[0]||h<s.first[0]||(c=Math.max(c,s.first[0]),h=Math.min(h,s.last[0]),y.push(new mT(l,c,h)));l+=1;for(let b=w.length-1;b>=0;b--){const S=w[b];S.ymax>=l?S.incrRow():w.splice(b,1)}}return o}getTileParentId(t){Zt.set(t);const r=this._infoByLevel[Zt.level],n=this._lodInfos.indexOf(r)-1;return n<0?null:(this._getTileIdAtLOD(Zt,this._lodInfos[n],Zt),Zt.id)}getTileResolution(t){const r=this._infoByLevel[typeof t=="object"?t.level:t];return r?r.resolution:-1}getTileScale(t){const r=this._infoByLevel[t.level];return r?r.scale:-1}intersects(t,r){Zt.set(r);const n=this._infoByLevel[Zt.level],i=t.lodInfo;if(i.resolution>n.resolution){this._getTileIdAtLOD(Zt,i,Zt);const o=i.denormalizeCol(Zt.col,Zt.world);for(const a of t.spans)if(a.row===Zt.row&&a.colFrom<=o&&a.colTo>=o)return!0}if(i.resolution<n.resolution){const[o,a,l,c]=t.spans.reduce((v,w)=>(v[0]=Math.min(v[0],w.row),v[1]=Math.max(v[1],w.row),v[2]=Math.min(v[2],w.colFrom),v[3]=Math.max(v[3],w.colTo),v),[1/0,-1/0,1/0,-1/0]),h=n.denormalizeCol(Zt.col,Zt.world),f=i.getColumnForX(n.getXForColumn(h)),m=i.getRowForY(n.getYForRow(Zt.row)),y=i.getColumnForX(n.getXForColumn(h+1))-1,g=i.getRowForY(n.getYForRow(Zt.row+1))-1;return!(f>c||y<l||m>a||g<o)}const s=i.denormalizeCol(Zt.col,Zt.world);return t.spans.some(o=>o.row===Zt.row&&o.colFrom<=s&&o.colTo>=s)}normalizeBounds(t,r,n){if(t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],this._wrap){const i=Ls(this.tileInfo.spatialReference),s=-n*(i.valid[1]-i.valid[0]);t[0]+=s,t[2]+=s}return t}getSmallestInfoForScale(t){const r=this.scales;if(this._infoByScale[t])return this._infoByScale[t];if(t>r[0])return this._infoByScale[r[0]];for(let n=1;n<r.length-1;n++)if(t>r[n]+nve)return this._infoByScale[r[n-1]];return this._infoByScale[r[r.length-1]]}getClosestInfoForScale(t){const r=this.scales;return this._infoByScale[t]||(t=r.reduce((n,i)=>Math.abs(i-t)<Math.abs(n-t)?i:n,r[0])),this._infoByScale[t]}scaleToLevel(t){const r=this.scales;if(this._infoByScale[t])return this._infoByScale[t].level;for(let n=r.length-1;n>=0;n--)if(t<r[n])return n===r.length-1?this._infoByScale[r[r.length-1]].level:this._infoByScale[r[n]].level+(r[n]-t)/(r[n]-r[n+1]);return this._infoByScale[r[0]].level}scaleToZoom(t){return this.tileInfo.scaleToZoom(t)}_getTileIdAtLOD(t,r,n){const i=this._infoByLevel[n.level];return t.set(n),r.resolution<i.resolution?null:(r.resolution===i.resolution||(t.level=r.level,t.col=Math.floor(n.col*i.resolution/r.resolution+.01),t.row=Math.floor(n.row*i.resolution/r.resolution+.01)),t)}};function sve(e,t){return e.length=0,t.forEach(r=>e.push(r)),e}const yT=new Set,Ew=[],Ap=new Map,TF=[0,0];let fl=class extends $e{constructor(t){super(t),this._keyToItem=new Map,this.concurrency=6,this.strategy="scale-first",this.tileInfoView=null}initialize(){const{concurrency:t,process:r,strategy:n}=this;this._queue=new ZB({concurrency:t,process:(i,s)=>{const o=this._keyToItem.get(i);return r(o,{signal:s})},peeker:n==="scale-first"?i=>this._peekByScaleFirst(i):i=>this._peekByCenterFirst(i)})}destroy(){this.clear(),this._queue=Gt(this._queue)}get length(){return this._queue?this._queue.length:0}get onGoingCount(){return this._keyToItem.size}get updating(){return this.length>0||this.onGoingCount>0}abort(t){const r=typeof t=="string"?t:t.id;this._queue.abort(r)}clear(){this._queue.clear(),this._keyToItem.clear(),this.notifyChange("updating")}has(t){return typeof t=="string"?this._keyToItem.has(t):this._keyToItem.has(t.id)}isOngoing(t){const r=typeof t=="string"?t:t.id;return this.has(r)&&this._queue.isOngoing(r)}pause(){this._queue.pause()}push(t){const r=t.key.id;if(this._queue.has(r))return this._queue.get(r);const n=this._queue.push(r),i=()=>{this._keyToItem.delete(r),this.notifyChange("updating")};return this._keyToItem.set(r,t),n.then(i,i),this.notifyChange("updating"),n}reset(){this._queue.reset()}resume(){this._queue.resume()}_peekByScaleFirst(t){if(!this.state)return t.values().next().value;const r=this.tileInfoView;let n=Number.NEGATIVE_INFINITY,i=Number.POSITIVE_INFINITY;t.forEach(h=>{const f=this._keyToItem.get(h),m=this.tileInfoView.getTileScale(f.key);Ap.has(m)||(Ap.set(m,[]),n=Math.max(m,n),i=Math.min(m,i)),Ap.get(m).push(f.key),yT.add(m)});let s=this.state.scale;Ap.has(s)||(sve(Ew,yT),Ew.sort((h,f)=>h-f),s=Ew.reduce((h,f)=>Math.abs(f-s)<Math.abs(h-s)?f:h,Ew[0])),s=Math.min(s,n),s=Math.max(s,i);const o=Ap.get(s),a=r.getClosestInfoForScale(s),l=a.getColumnForX(this.state.center[0]),c=a.getRowForY(this.state.center[1]);return o.sort((h,f)=>{const m=a.denormalizeCol(h.col,h.world),y=a.denormalizeCol(f.col,f.world);return Math.sqrt((l-m)*(l-m)+(c-h.row)*(c-h.row))-Math.sqrt((l-y)*(l-y)+(c-f.row)*(c-f.row))}),yT.clear(),Ap.clear(),o[0].id}_peekByCenterFirst(t){if(!this.state)return t.values().next().value;const r=this.tileInfoView,n=this.state.center;let i,s=Number.POSITIVE_INFINITY;return t.forEach(o=>{const a=this._keyToItem.get(o);r.getTileCoords(TF,a.key);const l=h1(TF,n);l<s&&(s=l,i=a.key)}),i.id}};u([d({constructOnly:!0})],fl.prototype,"concurrency",void 0),u([d({constructOnly:!0})],fl.prototype,"process",void 0),u([d()],fl.prototype,"state",void 0),u([d({constructOnly:!0})],fl.prototype,"strategy",void 0),u([d({constructOnly:!0})],fl.prototype,"tileInfoView",void 0),u([d({readOnly:!0})],fl.prototype,"updating",null),fl=u([E("esri.views.2d.tiling.TileQueue")],fl);const COe=fl;let ove=class{constructor(t,r,n){this.maxSize=t,this._tileInfoView=r,this._removedFunc=n,this._tilePerId=new Map,this._tileKeysPerLevel=[]}clear(){this._tilePerId.clear(),this._tileKeysPerLevel=[]}has(t){return this._tilePerId.has(t)}get(t){return this._tilePerId.get(t)}pop(t){const r=this._tilePerId.get(t);if(!r)return;const n=r.key.level,i=this._tileKeysPerLevel[n];EF(this._tilePerId,t);for(let s=0;s<i.length;s++)if(i[s].id===t){i.splice(s,1);break}return r.visible=!0,r}add(t){t.visible=!1;const r=t.key,n=r.id;if(this._tilePerId.has(n))return;this._tilePerId.set(n,t);const i=r.level;this._tileKeysPerLevel[i]||(this._tileKeysPerLevel[i]=[]),this._tileKeysPerLevel[i].push(r)}prune(t,r,n){let i=this._tilePerId.size;if(i<=this.maxSize)return;let s=this._tileKeysPerLevel.length-1;for(;i>this.maxSize&&s>=0;)s!==t&&(i=this._pruneAroundCenterTile(i,r,n,s)),s--;i>this.maxSize&&(i=this._pruneAroundCenterTile(i,r,n,t))}_pruneAroundCenterTile(t,r,n,i){const s=this._tileKeysPerLevel[i];if(!s||s.length===0)return t;const{size:o,origin:a}=this._tileInfoView.tileInfo,l=n*o[0],c=n*o[1],h=[0,0],f=[0,0];for(s.sort((m,y)=>(h[0]=a.x+l*(m.col+.5),h[1]=a.y-c*(m.row+.5),f[0]=a.x+l*(y.col+.5),f[1]=a.y-c*(y.row+.5),XS(h,r)-XS(f,r)));s.length>0;){const m=s.pop();if(this._removeTile(m.id),--t===this.maxSize)break}return t}_removeTile(t){const r=this._tilePerId.get(t);this._removedFunc&&r&&this._removedFunc(r),EF(this._tilePerId,t)}};function EF(e,t){e.delete(t)}const Md=new pp(0,0,0,0),Ka=new Map,Id=[],gT=[];let POe=class{constructor(t){this._previousScale=Number.POSITIVE_INFINITY,this.cachePolicy="keep",this.coveragePolicy="closest",this.resampling=!0,this.tileIndex=new Map,this.tiles=[],this.buffer=192,this.acquireTile=t.acquireTile,this.releaseTile=t.releaseTile,this.tileInfoView=t.tileInfoView,t.resampling!=null&&(this.resampling=t.resampling),t.cachePolicy&&(this.cachePolicy=t.cachePolicy),t.coveragePolicy&&(this.coveragePolicy=t.coveragePolicy),t.buffer!=null&&(this.buffer=t.buffer),t.cacheSize&&(this._tileCache=new ove(t.cacheSize,this.tileInfoView,r=>{this.releaseTile(r)}))}destroy(){this.tileIndex.clear()}update(t){var b,S;const{resampling:r,tileIndex:n}=this,{scale:i,center:s,resolution:o}=t.state,{minScale:a,maxScale:l}=this.tileInfoView,c=!t.stationary&&i>this._previousScale;if(this._previousScale=i,!r&&(i>a||i<l))return this.tiles.length=0,void this.clear();const h=this.tileInfoView.getTileCoverage(t.state,this.buffer,this.resampling,this.coveragePolicy);if(!h)return this.tiles.length=0,void this.clear();const{spans:f,lodInfo:m}=h,{level:y}=m;this.tiles.length=0,n.forEach(_=>_.visible=!0);let g=0,v=0;if(f.length>0)for(const{row:_,colFrom:x,colTo:T}of f)for(let I=x;I<=T;I++){g++;const C=Md.set(y,_,m.normalizeCol(I),m.getWorldForColumn(I)).id;let O=n.get(C);if(O)O.isReady?(Ka.set(C,O),v++):c||this._addParentTile(C,Ka);else{if((b=this._tileCache)!=null&&b.has(C)){if(O=this._tileCache.pop(C),this.tileIndex.set(C,O),O.isReady){Ka.set(C,O),v++;continue}}else O=this.acquireTile(Md),this.tileIndex.set(C,O);c||this._addParentTile(C,Ka)}}const w=v===g;for(const[_,x]of n){if(Ka.has(_))continue;Md.set(_);const T=this.tileInfoView.intersects(h,Md),I=this.cachePolicy==="purge"?Md.level!==y:Md.level>y;!T||!c&&w?!I&&T||Id.push(x):x.isReady?I&&this.cachePolicy==="purge"&&this._hasReadyAncestor(Md,y)?Id.push(x):gT.push(x):I&&Id.push(x)}for(const _ of gT)_.isReady&&Ka.set(_.key.id,_);for(const _ of Id)this._tileCache?this._tileCache.add(_):this.releaseTile(_),n.delete(_.key.id);for(const _ of Ka.values())this.tiles.push(_);for(const _ of n.values())Ka.has(_.key.id)||(_.visible=!1);(S=this._tileCache)==null||S.prune(y,s,o),kv.pool.release(h),gT.length=0,Id.length=0,Ka.clear()}clear(){const{tileIndex:t}=this;for(const r of t.values())this.releaseTile(r);t.clear()}refresh(t){var r;for(const n of this.tileIndex.values())this.tiles.includes(n)?t(n):Id.push(n);for(const n of Id)this.releaseTile(n),this.tileIndex.delete(n.key.id);(r=this._tileCache)==null||r.clear()}updateCacheSize(t){this._tileCache&&(this._tileCache.maxSize=t)}_addParentTile(t,r){var s;let n=t,i=null;for(;n=this.tileInfoView.getTileParentId(n),n;)if(this.tileIndex.has(n)){if(i=this.tileIndex.get(n),i==null?void 0:i.isReady){r.has(i.key.id)||r.set(i.key.id,i);break}}else if((s=this._tileCache)!=null&&s.has(n)&&(i=this._tileCache.pop(n),this.tileIndex.set(n,i),i==null?void 0:i.isReady)){r.has(i.key.id)||r.set(i.key.id,i);break}}_hasReadyAncestor(t,r){const n=Da();this.tileInfoView.getTileBounds(n,t,!0);for(const i of this.tileIndex.values())if(i.isReady&&i.key.level>=r&&i.key.level<t.level){const s=Da();if(this.tileInfoView.getTileBounds(s,i.key,!0),Nle(s,n))return!0}return!1}};function YB(){const e=new Float32Array(6);return e[0]=1,e[3]=1,e}function ave(e){const t=new Float32Array(6);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function lve(e,t,r,n,i,s){const o=new Float32Array(6);return o[0]=e,o[1]=t,o[2]=r,o[3]=n,o[4]=i,o[5]=s,o}function uve(e,t){return new Float32Array(e,t,6)}function KB(e,t,r,n){const i=t[n],s=t[n+1];e[n]=r[0]*i+r[2]*s+r[4],e[n+1]=r[1]*i+r[3]*s+r[5]}function cve(e,t,r,n=0,i=0,s=2){const o=i||t.length/s;for(let a=n;a<o;a++)KB(e,t,r,a*s)}Object.freeze(Object.defineProperty({__proto__:null,clone:ave,create:YB,createView:uve,fromValues:lve,transform:KB,transformMany:cve},Symbol.toStringTag,{value:"Module"}));function dve(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e}function hve(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function XB(e,t,r,n,i,s,o,a,l,c){return e[0]=t,e[1]=r,e[2]=n,e[3]=i,e[4]=s,e[5]=o,e[6]=a,e[7]=l,e[8]=c,e}function eq(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function pve(e,t){if(e===t){const r=t[1],n=t[2],i=t[5];e[1]=t[3],e[2]=t[6],e[3]=r,e[5]=t[7],e[6]=n,e[7]=i}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e}function fve(e,t){const r=t[0],n=t[1],i=t[2],s=t[3],o=t[4],a=t[5],l=t[6],c=t[7],h=t[8],f=h*o-a*c,m=-h*s+a*l,y=c*s-o*l;let g=r*f+n*m+i*y;return g?(g=1/g,e[0]=f*g,e[1]=(-h*n+i*c)*g,e[2]=(a*n-i*o)*g,e[3]=m*g,e[4]=(h*r-i*l)*g,e[5]=(-a*r+i*s)*g,e[6]=y*g,e[7]=(-c*r+n*l)*g,e[8]=(o*r-n*s)*g,e):null}function mve(e,t){const r=t[0],n=t[1],i=t[2],s=t[3],o=t[4],a=t[5],l=t[6],c=t[7],h=t[8];return e[0]=o*h-a*c,e[1]=i*c-n*h,e[2]=n*a-i*o,e[3]=a*l-s*h,e[4]=r*h-i*l,e[5]=i*s-r*a,e[6]=s*c-o*l,e[7]=n*l-r*c,e[8]=r*o-n*s,e}function yve(e){const t=e[0],r=e[1],n=e[2],i=e[3],s=e[4],o=e[5],a=e[6],l=e[7],c=e[8];return t*(c*s-o*l)+r*(-c*i+o*a)+n*(l*i-s*a)}function c3(e,t,r){const n=t[0],i=t[1],s=t[2],o=t[3],a=t[4],l=t[5],c=t[6],h=t[7],f=t[8],m=r[0],y=r[1],g=r[2],v=r[3],w=r[4],b=r[5],S=r[6],_=r[7],x=r[8];return e[0]=m*n+y*o+g*c,e[1]=m*i+y*a+g*h,e[2]=m*s+y*l+g*f,e[3]=v*n+w*o+b*c,e[4]=v*i+w*a+b*h,e[5]=v*s+w*l+b*f,e[6]=S*n+_*o+x*c,e[7]=S*i+_*a+x*h,e[8]=S*s+_*l+x*f,e}function VC(e,t,r){const n=t[0],i=t[1],s=t[2],o=t[3],a=t[4],l=t[5],c=t[6],h=t[7],f=t[8],m=r[0],y=r[1];return e[0]=n,e[1]=i,e[2]=s,e[3]=o,e[4]=a,e[5]=l,e[6]=m*n+y*o+c,e[7]=m*i+y*a+h,e[8]=m*s+y*l+f,e}function tq(e,t,r){const n=t[0],i=t[1],s=t[2],o=t[3],a=t[4],l=t[5],c=t[6],h=t[7],f=t[8],m=Math.sin(r),y=Math.cos(r);return e[0]=y*n+m*o,e[1]=y*i+m*a,e[2]=y*s+m*l,e[3]=y*o-m*n,e[4]=y*a-m*i,e[5]=y*l-m*s,e[6]=c,e[7]=h,e[8]=f,e}function gve(e,t,r){const n=r[0],i=r[1],s=r[2];return e[0]=n*t[0],e[1]=n*t[1],e[2]=n*t[2],e[3]=i*t[3],e[4]=i*t[4],e[5]=i*t[5],e[6]=s*t[6],e[7]=s*t[7],e[8]=s*t[8],e}function vve(e,t,r){const n=r[0],i=r[1];return e[0]=n*t[0],e[1]=n*t[1],e[2]=n*t[2],e[3]=i*t[3],e[4]=i*t[4],e[5]=i*t[5],e}function wve(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t[0],e[7]=t[1],e[8]=1,e}function _ve(e,t){const r=Math.sin(t),n=Math.cos(t);return e[0]=n,e[1]=r,e[2]=0,e[3]=-r,e[4]=n,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function bve(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=t[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function Sve(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e}function xve(e,t){const r=t[0],n=t[1],i=t[2],s=t[3],o=r+r,a=n+n,l=i+i,c=r*o,h=n*o,f=n*a,m=i*o,y=i*a,g=i*l,v=s*o,w=s*a,b=s*l;return e[0]=1-f-g,e[3]=h-b,e[6]=m+w,e[1]=h+b,e[4]=1-c-g,e[7]=y-v,e[2]=m-w,e[5]=y+v,e[8]=1-c-f,e}function $ve(e,t){const r=t[0],n=t[1],i=t[2],s=t[4],o=t[5],a=t[6],l=t[8],c=t[9],h=t[10],f=h*o-a*c,m=-h*s+a*l,y=c*s-o*l,g=r*f+n*m+i*y;if(!g)return null;const v=1/g;return e[0]=f*v,e[1]=(-h*n+i*c)*v,e[2]=(a*n-i*o)*v,e[3]=m*v,e[4]=(h*r-i*l)*v,e[5]=(-a*r+i*s)*v,e[6]=y*v,e[7]=(-c*r+n*l)*v,e[8]=(o*r-n*s)*v,e}function Tve(e,t){const r=t[0],n=t[1],i=t[2],s=t[3],o=t[4],a=t[5],l=t[6],c=t[7],h=t[8],f=t[9],m=t[10],y=t[11],g=t[12],v=t[13],w=t[14],b=t[15],S=r*a-n*o,_=r*l-i*o,x=r*c-s*o,T=n*l-i*a,I=n*c-s*a,C=i*c-s*l,O=h*v-f*g,W=h*w-m*g,z=h*b-y*g,ne=f*w-m*v,K=f*b-y*v,xe=m*b-y*w;let le=S*xe-_*K+x*ne+T*z-I*W+C*O;return le?(le=1/le,e[0]=(a*xe-l*K+c*ne)*le,e[1]=(l*z-o*xe-c*W)*le,e[2]=(o*K-a*z+c*O)*le,e[3]=(i*K-n*xe-s*ne)*le,e[4]=(r*xe-i*z+s*W)*le,e[5]=(n*z-r*K-s*O)*le,e[6]=(v*C-w*I+b*T)*le,e[7]=(w*x-g*C-b*_)*le,e[8]=(g*I-v*x+b*S)*le,e):null}function Eve(e,t,r){return e[0]=2/t,e[1]=0,e[2]=0,e[3]=0,e[4]=-2/r,e[5]=0,e[6]=-1,e[7]=1,e[8]=1,e}function Mve(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"}function Ive(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+e[6]**2+e[7]**2+e[8]**2)}function Cve(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e[6]=t[6]+r[6],e[7]=t[7]+r[7],e[8]=t[8]+r[8],e}function rq(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e[4]=t[4]-r[4],e[5]=t[5]-r[5],e[6]=t[6]-r[6],e[7]=t[7]-r[7],e[8]=t[8]-r[8],e}function kve(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e[8]=t[8]*r,e}function Pve(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e[2]=t[2]+r[2]*n,e[3]=t[3]+r[3]*n,e[4]=t[4]+r[4]*n,e[5]=t[5]+r[5]*n,e[6]=t[6]+r[6]*n,e[7]=t[7]+r[7]*n,e[8]=t[8]+r[8]*n,e}function Ove(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]}function Rve(e,t){const r=e[0],n=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],h=e[8],f=t[0],m=t[1],y=t[2],g=t[3],v=t[4],w=t[5],b=t[6],S=t[7],_=t[8],x=zs();return Math.abs(r-f)<=x*Math.max(1,Math.abs(r),Math.abs(f))&&Math.abs(n-m)<=x*Math.max(1,Math.abs(n),Math.abs(m))&&Math.abs(i-y)<=x*Math.max(1,Math.abs(i),Math.abs(y))&&Math.abs(s-g)<=x*Math.max(1,Math.abs(s),Math.abs(g))&&Math.abs(o-v)<=x*Math.max(1,Math.abs(o),Math.abs(v))&&Math.abs(a-w)<=x*Math.max(1,Math.abs(a),Math.abs(w))&&Math.abs(l-b)<=x*Math.max(1,Math.abs(l),Math.abs(b))&&Math.abs(c-S)<=x*Math.max(1,Math.abs(c),Math.abs(S))&&Math.abs(h-_)<=x*Math.max(1,Math.abs(h),Math.abs(_))}function Ave(e){const t=zs(),r=e[0],n=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],h=e[8];return Math.abs(1-(r*r+s*s+l*l))<=t&&Math.abs(1-(n*n+o*o+c*c))<=t&&Math.abs(1-(i*i+a*a+h*h))<=t}const Lve=c3,Nve=rq;Object.freeze(Object.defineProperty({__proto__:null,add:Cve,adjoint:mve,copy:hve,determinant:yve,equals:Rve,exactEquals:Ove,frob:Ive,fromMat2d:Sve,fromMat4:dve,fromQuat:xve,fromRotation:_ve,fromScaling:bve,fromTranslation:wve,identity:eq,invert:fve,isOrthoNormal:Ave,mul:Lve,multiply:c3,multiplyScalar:kve,multiplyScalarAndAdd:Pve,normalFromMat4:Tve,normalFromMat4Legacy:$ve,projection:Eve,rotate:tq,scale:gve,scaleByVec2:vve,set:XB,str:Mve,sub:Nve,subtract:rq,translate:VC,transpose:pve},Symbol.toStringTag,{value:"Module"}));function Y_(){const e=new Float32Array(9);return e[0]=1,e[4]=1,e[8]=1,e}function Dve(e){const t=new Float32Array(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function Fve(e,t,r,n,i,s,o,a,l){const c=new Float32Array(9);return c[0]=e,c[1]=t,c[2]=r,c[3]=n,c[4]=i,c[5]=s,c[6]=o,c[7]=a,c[8]=l,c}function jve(e,t){return new Float32Array(e,t,9)}Object.freeze(Object.defineProperty({__proto__:null,clone:Dve,create:Y_,createView:jve,fromValues:Fve},Symbol.toStringTag,{value:"Module"}));function nq(){return new Float32Array(2)}function Vve(e){const t=new Float32Array(2);return t[0]=e[0],t[1]=e[1],t}function Nm(e,t){const r=new Float32Array(2);return r[0]=e,r[1]=t,r}function zve(e,t){return new Float32Array(e,t,2)}function iq(){return nq()}function sq(){return Nm(1,1)}function oq(){return Nm(1,0)}function aq(){return Nm(0,1)}const Uve=iq(),Gve=sq(),Bve=oq(),qve=aq();Object.freeze(Object.defineProperty({__proto__:null,ONES:Gve,UNIT_X:Bve,UNIT_Y:qve,ZEROS:Uve,clone:Vve,create:nq,createView:zve,fromValues:Nm,ones:sq,unitX:oq,unitY:aq,zeros:iq},Symbol.toStringTag,{value:"Module"}));function Wve(e){return e instanceof Float32Array&&e.length>=2}function Hve(e){return Array.isArray(e)&&e.length>=2}function vT(e){return Wve(e)||Hve(e)}var zC;const Xa=[0,0];let Qu=zC=class extends Q{constructor(e){super(e),this._viewpoint2D={center:$r(),rotation:0,scale:0,spatialReference:void 0},this.center=[0,0],this.extent=new at,this.id=0,this.inverseTransform=Bc(),this.resolution=0,this.rotation=0,this.scale=0,this.transform=Bc(),this.transformNoRotation=Bc(),this.displayMat3=Y_(),this.displayViewMat3=Y_(),this.viewMat3=Y_(),this.viewMat2d=YB(),this.worldScreenWidth=0,this.size=[0,0]}set pixelRatio(e){this._set("pixelRatio",e),this._update()}set size(e){this._set("size",e),this._update()}set viewpoint(e){if(e){const t=this._viewpoint2D,r=e.targetGeometry;t.center[0]=r.x,t.center[1]=r.y,t.rotation=e.rotation,t.scale=e.scale,t.spatialReference=r.spatialReference}this._update()}copy(e){const t=this.size,r=this.viewpoint;return r&&t?(this.viewpoint=Ko(r,e.viewpoint),this._set("size",Iv(t,e.size))):(this.viewpoint=e.viewpoint.clone(),this._set("size",[e.size[0],e.size[1]])),this._set("pixelRatio",e.pixelRatio),this}clone(){return new zC({size:this.size,viewpoint:this.viewpoint.clone(),pixelRatio:this.pixelRatio})}toMap(e,t,r){return vT(t)?Ma(e,t,this.inverseTransform):(Xa[0]=t,Xa[1]=r,Ma(e,Xa,this.inverseTransform))}toScreen(e,t,r){return vT(t)?Ma(e,t,this.transform):(Xa[0]=t,Xa[1]=r,Ma(e,Xa,this.transform))}toScreenNoRotation(e,t,r){return vT(t)?Ma(e,t,this.transformNoRotation):(Xa[0]=t,Xa[1]=r,Ma(e,Xa,this.transformNoRotation))}getScreenTransform(e,t){const{center:r}=this._viewpoint2D,n=this._get("pixelRatio")||1,i=this._get("size");return l3(e,r,i,t,0,n),e}_update(){const{center:e,spatialReference:t,scale:r,rotation:n}=this._viewpoint2D,i=this._get("pixelRatio")||1,s=this._get("size"),o=new Do({targetGeometry:new be(e[0],e[1],t),scale:r,rotation:n});if(this._set("viewpoint",o),!s||!t||!r)return;this.resolution=ay(o),this.rotation=n,this.scale=r,this.spatialReference=t,Iv(this.center,e);const a=s[0]!==0?2/s[0]:0,l=s[1]!==0?-2/s[1]:0;XB(this.displayMat3,a,0,0,0,l,0,-1,1,1);const c=eq(this.viewMat3),h=Nm(s[0]/2,s[1]/2),f=Nm(-s[0]/2,-s[1]/2),m=rR(n);VC(c,c,h),tq(c,c,m),VC(c,c,f),c3(this.displayViewMat3,this.displayMat3,c);const y=i3(this.viewMat2d,h);return k2(y,y,m),Mv(y,y,f),P0e(this.extent,o,s),u3(this.transform,o,s,i),r3(this.inverseTransform,this.transform),F0e(this.transformNoRotation,o,s,i),this.worldScreenWidth=V0e(this.spatialReference,this.resolution),this._set("id",this.id+1),this}};u([d({readOnly:!0})],Qu.prototype,"id",void 0),u([d({value:1,json:{write:!0}})],Qu.prototype,"pixelRatio",null),u([d({json:{write:!0}})],Qu.prototype,"size",null),u([d()],Qu.prototype,"spatialReference",void 0),u([d({type:Do,json:{write:!0}})],Qu.prototype,"viewpoint",null),Qu=zC=u([E("esri.views.2d.ViewState")],Qu);const MF=Qu;var UC,GC;let Ml=UC=class extends $e{constructor(){super(...arguments),this.left=0,this.top=0,this.right=0,this.bottom=0}clone(){return new UC({left:this.left,top:this.top,right:this.right,bottom:this.bottom})}};u([d()],Ml.prototype,"left",void 0),u([d()],Ml.prototype,"top",void 0),u([d()],Ml.prototype,"right",void 0),u([d()],Ml.prototype,"bottom",void 0),Ml=UC=u([E("esri.views.2d.PaddedViewState.Padding")],Ml);let ef=GC=class extends MF{constructor(...e){super(...e),this.paddedViewState=new MF,this._updateContent=(()=>{const t=$r();return()=>{const r=this._get("size"),n=this._get("padding");if(!r||!n)return;const i=this.paddedViewState;ln(t,n.left+n.right,n.top+n.bottom),Cv(t,r,t),Iv(i.size,t);const s=i.viewpoint;s&&(this.viewpoint=s)}})(),this.addHandles(Ee(()=>[this.size,this.padding],()=>this._updateContent(),ny)),this.padding=new Ml,this.size=[0,0]}set padding(e){this._set("padding",e||new Ml)}set viewpoint(e){if(e){const t=e.clone();this.paddedViewState.viewpoint=e,U0e(t,e,this._get("size"),this._get("padding"));const r=this._viewpoint2D,n=t.targetGeometry;r.center[0]=n.x,r.center[1]=n.y,r.rotation=t.rotation,r.scale=t.scale,r.spatialReference=n.spatialReference,this._update()}}clone(){return new GC({padding:this.padding.clone(),size:this.size.slice(),viewpoint:this.paddedViewState.viewpoint.clone(),pixelRatio:this.pixelRatio})}};u([d()],ef.prototype,"paddedViewState",void 0),u([d({type:Ml})],ef.prototype,"padding",null),u([d()],ef.prototype,"viewpoint",null),ef=GC=u([E("esri.views.2d.PaddedViewState")],ef);const Zve=ef;let Zn=class extends $e{constructor(t){super(t),this.constraints=null,this.ready=!1,this.resizeAlign="center",this.addHandles([Ee(()=>{var r;return(r=this.constraints)==null?void 0:r.version},r=>{this.constraints&&r&&this.ready&&(this.state.viewpoint=this.constraints.fit(this.state.paddedViewState.viewpoint))},ny)])}get center(){if(!this.ready)return this._get("center");const{center:t,spatialReference:r}=this.state.paddedViewState;return this.state.commitProperty("id"),new be({x:t[0],y:t[1],spatialReference:r})}set center(t){if(t==null)return;if(!this.ready)return void this._set("center",t);let r;try{r=this._project(t,this.state.spatialReference)}catch(i){return void Z.getLogger(this).error(new N("mapview:invalid-center","could not project the value in the view's spatial reference",{input:t,error:i}))}const n=this.viewpoint;NC(n,n,r),this.viewpoint=n}get extent(){return this.ready?(this.state.commitProperty("id"),this.state.paddedViewState.extent.clone()):this._get("extent")}set extent(t){if(t==null)return;if(!t.width||!t.height)return void Z.getLogger(this).error(new N("mapview:invalid-extent","invalid extent size"));if(!this.ready)return this._set("extent",t),this._set("center",void 0),this._set("viewpoint",void 0),this._set("scale",void 0),void this._set("zoom",void 0);let r;try{r=this._project(t,this.state.spatialReference)}catch(i){return void Z.getLogger(this).error(new N("mapview:invalid-extent","could not project the value in the view's spatial reference",{error:i}))}const n=this.viewpoint;O0e(n,n,r,this.state.size,{constraints:this.constraints}),this.viewpoint=n}get padding(){return this.ready?this.state.padding:this._get("padding")}set padding(t){this.ready?(this.state.padding=t,this._set("padding",this.state.padding)):this._set("padding",t)}get resolution(){return this.ready?(this.state.commitProperty("id"),this.state.resolution):0}get rotation(){return this.ready?(this.state.commitProperty("id"),this.state.rotation):this._get("rotation")}set rotation(t){if(isNaN(t))return;if(!this.ready)return void this._set("rotation",t);const r=this.viewpoint;B0e(r,r,t),this.viewpoint=r}get scale(){return this.ready?(this.state.commitProperty("id"),this.state.scale):this._get("scale")}set scale(t){if(!t||isNaN(t))return;if(!this.ready){this._set("scale",t),this._set("zoom",void 0);const n=this._get("extent");return void(n&&(this._set("extent",void 0),this._set("center",n.center)))}const r=this.viewpoint;bF(r,r,t),this.viewpoint=r}get viewpoint(){return this.ready?this.state.paddedViewState.viewpoint.clone():this._get("viewpoint")}set viewpoint(t){var s;if(t==null)return;if(!this.ready)return this._set("viewpoint",t),this._set("extent",void 0),this._set("center",void 0),this._set("zoom",void 0),void this._set("scale",void 0);let r,n;try{r=this._project(t,this.state.spatialReference),!t.scale||isNaN(t.scale)?n=new N("mapview:invalid-viewpoint",`invalid scale value of ${t.scale}`):t.targetGeometry==null&&(n=new N("mapview:invalid-viewpoint","geometry not defined"))}catch(o){n=new N("mapview:invalid-viewpoint","could not project the value in the view's spatial reference",{error:o})}if(n)return void Z.getLogger(this).error(n);this._scaleBeforeChangingSpatialReference=null;const i=new Do({targetGeometry:new be,scale:0,rotation:0});Ko(i,r),(s=this.constraints)==null||s.constrain(i,this.state.paddedViewState.viewpoint),this.state.viewpoint=i,this._set("viewpoint",i)}get zoom(){var t;return this.ready?((t=this.constraints)==null?void 0:t.scaleToZoom(this.scale))??-1:this._get("zoom")}set zoom(t){var i,s;if(!(t>=0))return;if(!this.ready){this._set("zoom",t),this._set("scale",void 0);const o=this._get("extent");return void(o&&(this._set("extent",void 0),this._set("center",o.center)))}const r=((i=this.constraints)==null?void 0:i.zoomToScale(t))??0;if(!r)return void this._set("zoom",-1);const n=this.viewpoint;bF(n,n,r),this.viewpoint=n,this._set("zoom",((s=this.constraints)==null?void 0:s.scaleToZoom(this.scale))??-1)}getUserStartupOptions(t){if(!t[0]&&!t[1])return{center:void 0,rotation:void 0,scale:void 0};const{padding:r,constraints:n}=this,i=this._get("center"),s=this._get("extent"),o=this._get("scale"),a=this._get("rotation"),l=this._get("viewpoint"),c=this._get("zoom"),h=c!=null&&n!=null&&n.zoomToScale(c)||void 0;let f,m,y;const g=l==null?void 0:l.rotation,v=l==null?void 0:l.targetGeometry;(v==null?void 0:v.type)==="extent"?f=v:(v==null?void 0:v.type)==="point"&&(m=v,y=l==null?void 0:l.scale);const w=s??f;return{center:i??m??(w==null?void 0:w.center),rotation:a??g,scale:(o??h??y??(w&&sm(w,[t[0]-r.left-r.right,t[1]-r.top-r.bottom])))||void 0}}startup(t,r,n,i){var o;const s=t.targetGeometry;try{this._project(t,n)}catch(a){Z.getLogger(this).warn(new qo("mapview:startup-projection-error","projection of initial viewpoint to the view's spatial reference, defaulting to the initial viewpoint.",{center:s.toJSON(),spatialReference:n,error:a})),t.targetGeometry=i||new be({x:0,y:0,spatialReference:n})}(o=this.constraints)==null||o.fit(t),this._set("state",new Zve({padding:this.padding,size:r,viewpoint:t})),this._set("ready",!0)}teardown(){this._set("ready",!1);const{center:[t,r],spatialReference:n,rotation:i,scale:s}=this.state.paddedViewState,o=new be({x:t,y:r,spatialReference:n});this._set("viewpoint",null),this._set("extent",null),this._set("center",o),this._set("zoom",-1),this._set("rotation",i),this._set("scale",s),this._set("state",null)}changeSpatialReference(t){var l;const r=this.state.paddedViewState.clone();if(this._scaleBeforeChangingSpatialReference==null)this._scaleBeforeChangingSpatialReference=r.scale;else{const c=r.viewpoint.clone();c.scale=this._scaleBeforeChangingSpatialReference,r.viewpoint=c}const n=r.clone(),[i,s]=r.center;let o=null;try{o=this._project(new be({x:i,y:s,spatialReference:r.spatialReference}),t)}catch(c){GR()||Z.getLogger(this).warn(new qo("mapview:spatial-reference-change","could not project the view's center to the new spatial reference",{center:o==null?void 0:o.toJSON(),spatialReference:t,error:c}))}o||(o=new be({x:0,y:0,spatialReference:t}));const a=NC(new Do({targetGeometry:new be,scale:0,rotation:0}),r.viewpoint,o);n.viewpoint=a;try{const h=[r.size[0]/2,r.size[1]/2],f=[h[0]+20,h[1]],m=r.toMap([0,0],f),{x:y,y:g}=this._project(new be({x:m[0],y:m[1],spatialReference:r.spatialReference}),t);m[0]=y,m[1]=g,n.toScreen(m,m);const v=z0e(h,m,f),w=Math.hypot(m[0]-h[0],m[1]-h[1])/20;!Number.isFinite(w)||Math.abs(w)>4?(a.rotation=0,a.targetGeometry=new be({x:0,y:0,spatialReference:t})):(a.scale*=w,a.scale>V("mapview-srswitch-adjust-rotation-scale-threshold")?a.rotation=0:a.rotation+=Number.isFinite(v)?v:0)}catch{}(l=this._get("constraints"))==null||l.constrain(a,void 0),this._get("state").viewpoint=a}resize(t,r){var o;if(!this.ready)return;const n=this.state;let i=this.state.paddedViewState.viewpoint;const s=this.state.paddedViewState.size.concat();n.size=[t,r],G0e(i,i,s,this.state.paddedViewState.size,this.resizeAlign),i=((o=this.constraints)==null?void 0:o.constrain(i,void 0))??i,this.state.viewpoint=i}toMap(t){if(!this.ready)return null;const r=[0,0],[n,i]=this.state.toMap(r,[t.x,t.y]),s=this.state.spatialReference;return new be({x:n,y:i,spatialReference:s})}toScreen(t){if(!this.ready)return null;const r=this._project(t,this.state.spatialReference),n=[r.x,r.y];return this.state.toScreen(n,n),Kr(n[0],n[1])}_project(t,r){var s;const n=t&&t.targetGeometry||t;if(!r)return t;if(!n)return null;if(r.imageCoordinateSystem||(s=n.spatialReference)!=null&&s.imageCoordinateSystem||Cr(r,n.spatialReference))return t;const i=uu(n,r);if(!i)throw new N("mapview:projection-not-possible","projecting input geometry to target spatial reference returned a null value",{geometry:n,spatialReference:r});return Jve(t)?(t.targetGeometry=i,t):i}};function Jve(e){return(e==null?void 0:e.declaredClass)==="esri.Viewpoint"}u([d({type:be})],Zn.prototype,"center",null),u([d()],Zn.prototype,"constraints",void 0),u([d({type:at})],Zn.prototype,"extent",null),u([d({value:{top:0,right:0,bottom:0,left:0},cast:e=>({top:0,right:0,bottom:0,left:0,...e})})],Zn.prototype,"padding",null),u([d()],Zn.prototype,"ready",void 0),u([d()],Zn.prototype,"resizeAlign",void 0),u([d({readOnly:!0})],Zn.prototype,"resolution",null),u([d({type:Number})],Zn.prototype,"rotation",null),u([d({type:Number})],Zn.prototype,"scale",null),u([d({readOnly:!0})],Zn.prototype,"state",void 0),u([d({type:Do})],Zn.prototype,"viewpoint",null),u([d()],Zn.prototype,"zoom",null),Zn=u([E("esri.views.2d.ViewStateManager")],Zn);function d3(e,t){switch(t){case"primary":return e.pointerType==="touch"||e.button===0;case"secondary":return e.pointerType!=="touch"&&e.button===2;case"tertiary":return e.pointerType!=="touch"&&e.button===1}}let IF=class extends en{constructor(t,r){super(!0),this._view=t,this.registerIncoming("double-click",r,n=>this._handleDoubleClick(n,r))}_handleDoubleClick(t,r){d3(t.data,"primary")&&(t.stopPropagation(),r?this._view.mapViewNavigation.zoomOut([t.data.x,t.data.y]):this._view.mapViewNavigation.zoomIn([t.data.x,t.data.y]))}},Qve=class extends en{constructor(t,r,n){super(!0),this.view=t,this.pointerType=r,this.registerIncoming("double-tap-drag",n,i=>this._handleDoubleTapDrag(i))}_handleDoubleTapDrag(t){const{data:r}=t,{pointerType:n}=r;if(n!==this.pointerType)return;t.stopPropagation();const{action:i,delta:s}=r,{view:o}=this,{mapViewNavigation:a}=o;switch(i){case"begin":{const{scale:l}=o;this._startScale=l,this._currentScale=l,this._previousDelta=s,a.begin();break}case"update":{if(this._previousDelta.y===s.y)return;this._previousDelta=s;const l=1.015**s.y,c=this._startScale*l,h=c/this._currentScale;a.setViewpointImmediate(h),this._currentScale=c;break}case"end":{const{constraints:l}=o,{effectiveLODs:c,snapToZoom:h}=l;if(!h||!c)return void a.end();const f=l.snapScale(this._currentScale),m=(s.y>0?Math.max(f,l.snapToPreviousScale(this._startScale)):Math.min(f,l.snapToNextScale(this._startScale)))/this._currentScale;a.zoom(m);break}}}},O2=class{constructor(t){this._callbacks=t,this._currentCount=0,this._callbacks.condition||(this._callbacks.condition=()=>!0)}handle(t){const r=t.data,n=r.pointers.size;switch(r.action){case"start":this._currentCount=n,this._emitStart(t);break;case"added":this._emitEnd(this._previousEvent),this._currentCount=n,this._emitStart(t);break;case"update":this._emitUpdate(t);break;case"removed":this._startEvent&&this._emitEnd(this._previousEvent),this._currentCount=n,this._emitStart(t);break;case"end":this._emitEnd(t),this._currentCount=0}this._previousEvent=t}_emitStart(t){var r,n;this._startEvent=t,(n=(r=this._callbacks).condition)!=null&&n.call(r,this._currentCount,t)&&this._callbacks.start(this._currentCount,t,this._startEvent)}_emitUpdate(t){var r,n;(n=(r=this._callbacks).condition)!=null&&n.call(r,this._currentCount,t)&&this._callbacks.update(this._currentCount,t,this._startEvent)}_emitEnd(t){var r,n;(n=(r=this._callbacks).condition)!=null&&n.call(r,this._currentCount,t)&&this._callbacks.end(this._currentCount,t,this._startEvent),this._startEvent=null}},Yve=class extends en{constructor(t,r,n){super(!0),this.view=t,this.pointerAction=r,this.registerIncoming("drag",n,i=>this._handleDrag(i)),this.registerIncoming("pointer-down",()=>this.stopMomentumNavigation())}onInstall(t){super.onInstall(t),this._dragEventSeparator=new O2({start:(r,n)=>{this.view.mapViewNavigation.pan.begin(this.view,n.data),n.stopPropagation()},update:(r,n)=>{this.view.mapViewNavigation.pan.update(this.view,n.data),n.stopPropagation()},end:(r,n)=>{this.view.mapViewNavigation.pan.end(this.view,n.data),n.stopPropagation()},condition:(r,n)=>r===1&&d3(n.data,this.pointerAction)})}_handleDrag(t){const r=this.view.mapViewNavigation;r.pinch.zoomMomentum||r.pinch.rotateMomentum?this.stopMomentumNavigation():this._dragEventSeparator.handle(t)}stopMomentumNavigation(){this.view.mapViewNavigation.pan.stopMomentumNavigation()}},Kve=class extends en{constructor(t,r,n){super(!0),this._view=t,this.pointerAction=r;const i=this._view.mapViewNavigation;this._dragEventSeparator=new O2({start:(s,o)=>{i.rotate.begin(this._view,o.data),o.stopPropagation()},update:(s,o)=>{i.rotate.update(this._view,o.data),o.stopPropagation()},end:(s,o)=>{i.rotate.end(),o.stopPropagation()},condition:(s,o)=>s===1&&d3(o.data,this.pointerAction)}),this.registerIncoming("drag",n,s=>this._dragEventSeparator.handle(s))}};function to(e){let t=e*e;return e<0&&(t*=-1),t}function Xve(e){return e.translation[0]=0,e.translation[1]=0,e.translation[2]=0,e.heading=0,e.tilt=0,e}function e1e(e,t,r){const n=r,i=e.state,s=e.device,o=t.tiltDirection==="forward-down"?1:-1,a=1;return s.deviceType==="standard"?(n.translation[0]=to(i.axes[0]),n.translation[1]=to(i.axes[1]),n.translation[2]=to(i.buttons[7])-to(i.buttons[6]),n.heading=to(i.axes[2]),n.tilt=to(i.axes[3])):s.deviceType==="spacemouse"&&(n.translation[0]=1.2*to(i.axes[0]),n.translation[1]=1.2*to(i.axes[1]),n.translation[2]=2*-to(i.axes[2]),n.heading=1.2*to(i.axes[5]),n.tilt=1.2*to(i.axes[3])),n.tilt*=o,oU(n.translation,n.translation,a),n}function t1e(e){return e.translation[0]===0&&e.translation[1]===0&&e.translation[2]===0&&e.heading===0&&e.tilt===0&&e.zoom===0}let r1e=class extends en{constructor(t){super(!0),this._view=t,this._frameTask=null,this._watchHandles=new ou,this._currentDevice=null,this._transformation={translation:[0,0,0],heading:0,tilt:0,zoom:0},this._handle=this.registerIncoming("gamepad",r=>this._handleGamePadEvent(r)),this._handle.pause()}onInstall(t){super.onInstall(t),this._watchHandles.add([Ee(()=>{var r;return(r=this._view.navigation.gamepad)==null?void 0:r.enabled},r=>{r?(this._handle.resume(),this._frameTask||(this._frameTask=xm({update:n=>this._frameUpdate(n.deltaTime)}))):(this._handle.pause(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null))},Ir)])}onUninstall(){this._watchHandles.removeAll(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null),super.onUninstall()}_handleGamePadEvent(t){const r=this._view.navigation.gamepad.device;r&&t.data.device!==r||this._currentDevice&&this._currentDevice!==t.data.device||(t.data.action==="end"?(this._currentDevice=null,Xve(this._transformation)):(this._currentDevice=t.data.device,e1e(t.data,this._view.navigation.gamepad,this._transformation)))}_frameUpdate(t){const r=this._transformation;if(t1e(r))return;const n=this._view.viewpoint.clone(),i=this._view.navigation.gamepad.velocityFactor,s=i1e*i*t;P2(n,n,[r.translation[0]*s,-r.translation[1]*s]);const o=1+r.translation[2]*s1e*t,a=this._view.constraints.rotationEnabled?-r.heading*n1e*t:0,l=this._view.size,c=[l[0]/2,l[1]];UB(n,n,o,a,c,l);const h=this._view.constraints.constrain(n,this._view.viewpoint);this._view.viewpoint=h}};const n1e=.06,i1e=.7,s1e=6e-4;let o1e=class extends en{constructor(t,r,n){super(!0),this.view=t,this.keys=r,this._pressed=!1,this._keyMap={[r.left]:"left",[r.right]:"right",[r.up]:"up",[r.down]:"down"},this.registerIncoming("key-down",n,i=>this._handleKeyDown(i)),this.registerIncoming("key-up",n,i=>this._handleKeyUp(i)),this.registerIncoming("blur",n,()=>this._handleBlur())}_handleKeyDown(t){t.data.repeat||this._handleKey(t,!0)}_handleKeyUp(t){this._handleKey(t,!1)}_handleBlur(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(t,r){const n=this._keyMap[t.data.key];if(this._pressed=n!=null,this._pressed){if(r)switch(this.view.mapViewNavigation.begin(),n){case"left":this.view.mapViewNavigation.continousPanLeft();break;case"right":this.view.mapViewNavigation.continousPanRight();break;case"up":this.view.mapViewNavigation.continousPanUp();break;case"down":this.view.mapViewNavigation.continousPanDown()}else this._pressed=!1,this.view.mapViewNavigation.stop();t.stopPropagation()}}},a1e=class extends en{constructor(t,r,n){super(!0),this.view=t,this.keys=r,this._pressed=!1,this._keyToDirection={[r.clockwiseOption1]:"clockwise",[r.clockwiseOption2]:"clockwise",[r.counterClockwiseOption1]:"counterClockwise",[r.counterClockwiseOption2]:"counterClockwise",[r.resetOption1]:"reset",[r.resetOption2]:"reset"},this.registerIncoming("key-down",n,i=>this._handleKeyDown(i)),this.registerIncoming("key-up",n,i=>this._handleKeyUp(i)),this.registerIncoming("blur",n,()=>this._handleBlur())}_handleKeyDown(t){t.data.repeat||this._handleKey(t,!0)}_handleKeyUp(t){this._handleKey(t,!1)}_handleBlur(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(t,r){const n=t.modifiers;if(n.size>0&&!n.has("Shift")||!this.view.constraints.rotationEnabled)return;const i=this._keyToDirection[t.data.key];if(this._pressed=i!=null,this._pressed){if(r)switch(this.view.mapViewNavigation.begin(),i){case"clockwise":this.view.mapViewNavigation.continousRotateClockwise();break;case"counterClockwise":this.view.mapViewNavigation.continousRotateCounterclockwise();break;case"reset":this.view.mapViewNavigation.resetRotation()}else this._pressed=!1,this.view.mapViewNavigation.stop();t.stopPropagation()}}};var Vf;(function(e){e[e.IN=0]="IN",e[e.OUT=1]="OUT"})(Vf||(Vf={}));let l1e=class extends en{constructor(t,r,n){super(!0),this.view=t,this.keys=r,this._keysToZoomAction={},this.registerIncoming("key-down",n,i=>this._handleKeyDown(i)),r.zoomIn.forEach(i=>this._keysToZoomAction[i]=Vf.IN),r.zoomOut.forEach(i=>this._keysToZoomAction[i]=Vf.OUT)}_handleKeyDown(t){this._handleKey(t)}_handleKey(t){const r=t.modifiers;if(r.size>0&&!r.has("Shift"))return;const{key:n}=t.data;if(!(n in this._keysToZoomAction))return;const i=this._keysToZoomAction[n],{mapViewNavigation:s}=this.view;let o=null;switch(i){case Vf.IN:o=s.zoomIn();break;case Vf.OUT:o=s.zoomOut();break;default:return}s.begin(),o.then(()=>s.end()),t.stopPropagation()}};const u1e=.6;let c1e=class extends en{constructor(t,r){super(!0),this._view=t,this._canZoom=!0,this.registerIncoming("mouse-wheel",r,n=>this._handleMouseWheel(n))}_handleMouseWheel(t){if(!this._view.navigation.mouseWheelZoomEnabled||(t.preventDefault(),t.stopPropagation(),!this._canZoom))return;const r=this._view.mapViewNavigation,{x:n,y:i,deltaY:s}=t.data,o=1/u1e**(1/60*s),a=r.zoom(o,[n,i]);a&&(this._canZoom=!1,a.catch(()=>{}).then(()=>{this._canZoom=!0,r.end()}))}},d1e=class extends en{constructor(t){super(!0),this.view=t,this.registerIncoming("drag",n=>this._handleDrag(n)),this.registerIncoming("pointer-down",()=>this._stopMomentumNavigation());const r=this.view.mapViewNavigation;this._dragEventSeparator=new O2({start:(n,i)=>{r.pinch.begin(this.view,i.data),i.stopPropagation()},update:(n,i)=>{r.pinch.update(this.view,i.data),i.stopPropagation()},end:(n,i)=>{r.pinch.end(this.view),i.stopPropagation()},condition:n=>n>=2})}_handleDrag(t){this._dragEventSeparator.handle(t)}_stopMomentumNavigation(){this.view.mapViewNavigation.pinch.stopMomentumNavigation()}};function CF(e){const t=e.native;return t?{buttons:t.buttons.map(r=>r.pressed?r.value||1:0),axes:t.axes.map(r=>f1e(r,e.axisThreshold))}:{buttons:[],axes:[]}}function h1e(e,t){if(e.axes.length!==t.axes.length||e.buttons.length!==t.buttons.length)return!1;for(let r=0;r<e.axes.length;r++)if(e.axes[r]!==t.axes[r])return!1;for(let r=0;r<e.buttons.length;r++)if(e.buttons[r]!==t.buttons[r])return!1;return!0}function p1e(e){for(let t=0;t<e.axes.length;t++)if(e.axes[t]!==0)return!1;for(let t=0;t<e.buttons.length;t++)if(e.buttons[t]!==0)return!1;return!0}function f1e(e,t){const r=Math.abs(e);return r<t?0:Math.sign(e)*(r-t)/(1-t)}let m1e=class{constructor(t,r){this._element=t,this._input=r,this._hasEventListeners=!1,this._onConnectGamepad=s=>{this._connectGamepad(s.gamepad)},this._onDisconnectGamepad=s=>{const o=s.gamepad,a=o.index,l=this._inputDevices[a];l&&(this._emitGamepadEvent(o,CF(l),!1),this._inputDevices.splice(a,1),this._latestUpdate.splice(a,1),this._input.gamepad.devices.remove(l),this.ensurePollingState())},this._frameTask=null,this._latestUpdate=new Array,this._inputDevices=new Array,this._callback=null;const n="getGamepads"in window.navigator,i=window.isSecureContext;this.supported=n&&i,this.supported&&(this._forEachGamepad(s=>this._connectGamepad(s)),window.addEventListener("gamepadconnected",this._onConnectGamepad),window.addEventListener("gamepaddisconnected",this._onDisconnectGamepad),this.ensurePollingState())}destroy(){this.hasEventListeners=!1,this.supported&&(window.removeEventListener("gamepadconnected",this._onConnectGamepad),window.removeEventListener("gamepaddisconnected",this._onDisconnectGamepad))}set hasEventListeners(t){this._hasEventListeners!==t&&(this._hasEventListeners=t,this.ensurePollingState())}get _eventsEnabled(){return this.supported&&this._inputDevices.length>0&&this._hasEventListeners}set onEvent(t){this._callback=t}_connectGamepad(t){const r=new t3(t);r.deviceType!=="unknown"&&(this._inputDevices[t.index]=r,this._input.gamepad.devices.add(r)),this.ensurePollingState()}ensurePollingState(){this._eventsEnabled?this._startPolling():this._stopPolling()}_startPolling(){this._frameTask==null&&(this._frameTask=xm({update:()=>this._readGamepadState()}))}_stopPolling(){this._frameTask!=null&&(this._frameTask.remove(),this._frameTask=null,this._latestUpdate=new Array)}_readGamepadState(){const t=document.hasFocus(),r=this._element.contains(document.activeElement),n=this._input.gamepad.enabledFocusMode==="document"&&!t||this._input.gamepad.enabledFocusMode==="view"&&!r;this._forEachGamepad(i=>{const s=this._inputDevices[i.index];if(!s)return;const o=this._latestUpdate[i.index],a=CF(s),l=n||p1e(a);o&&(o.timestamp===i.timestamp||!o.active&&l||h1e(o.state,a))||this._emitGamepadEvent(i,a,!l)})}_forEachGamepad(t){const r=window.navigator.getGamepads();for(let n=0;n<r.length;n++){const i=r[n];this._validate(i)&&t(i)}}_emitGamepadEvent(t,r,n){const i=this._latestUpdate[t.index],s=i&&i.active;if(!s&&!n)return;const o=!s&&n?"start":s&&n?"update":"end";this._latestUpdate[t.index]={timestamp:t.timestamp,state:r,active:n},this._callback&&this._callback({device:this._inputDevices[t.index],state:r,action:o})}_validate(t){if(!t||!t.connected)return!1;for(let r=0;r<t.axes.length;r++)if(isNaN(t.axes[r]))return!1;return!0}};const kF=V("edge"),y1e=V("chrome"),g1e=V("ff"),v1e=V("safari"),PF="esri-view-surface",Lp={touchNone:`${PF}--touch-none`,touchPan:`${PF}--touch-pan`};let lq=class uq{constructor(t,r){this._input=r,this._active={},this._callback=()=>{},this._activePointerCaptures=new Set,this._keyDownState=new Set,this._eventId=1,this._browserTouchPanningEnabled=!1,this._element=t,t.getAttribute("tabindex")||t.setAttribute("tabindex","0"),this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointer,"pointer-move":this._handlePointerPreventDefault,"pointer-up":this._handlePointerPreventDefault,"pointer-enter":this._handlePointer,"pointer-leave":this._handlePointer,"pointer-cancel":this._handlePointer,"mouse-wheel":this._handleMouseWheel,"pointer-capture-lost":this._handlePointerCaptureLost},this._updateTouchAction(),this._element.addEventListener("keydown",this._preventAltKeyDefault),this._gamepadSource=new m1e(t,this._input),this._gamepadSource.onEvent=n=>this._callback("gamepad",n)}destroy(){this._callback=()=>{},this.activeEvents=null,this._activePointerCaptures.forEach(t=>{this._releasePointerCaptureSafe(t)}),this._gamepadSource=Gt(this._gamepadSource),this._activePointerCaptures=null,this._removeTouchAction(),this._element.removeEventListener("keydown",this._preventAltKeyDefault)}get browserTouchPanningEnabled(){return this._browserTouchPanningEnabled}set browserTouchPanningEnabled(t){this._browserTouchPanningEnabled=t,this._updateTouchAction(),this._updateTouchEventHandling()}set onEventReceived(t){this._callback=t}set activeEvents(t){for(const r in this._active)if(!t||!t.has(r)){const n=this._active[r];this._element.removeEventListener(wT[r],n),delete this._active[r]}t&&t.forEach(r=>{if(!this._active[r]&&wT[r]){const n=(this._eventHandlers[r]||this._handleDefault).bind(this,r);this._element.addEventListener(wT[r],n),this._active[r]=n}}),this._gamepadSource.hasEventListeners=(t==null?void 0:t.has("gamepad"))??!1}setPointerCapture(t,r){r?this._setPointerCatpureSafe(t.pointerId):(this._releasePointerCaptureSafe(t.pointerId),this._activePointerCaptures.delete(t.pointerId))}_updateTouchAction(){this._element.classList.remove(this._browserTouchPanningEnabled?Lp.touchNone:Lp.touchPan),this._element.classList.add(this._browserTouchPanningEnabled?Lp.touchPan:Lp.touchNone)}_updateTouchEventHandling(){this._browserTouchPanningEnabled?this._element.addEventListener("touchmove",this._preventMultiTouchPanning):this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_removeTouchAction(){this._element.classList.remove(Lp.touchNone),this._element.classList.remove(Lp.touchPan),this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_setPointerCatpureSafe(t){try{this._element.setPointerCapture(t),this._activePointerCaptures.add(t)}catch{}}_releasePointerCaptureSafe(t){try{if(this._element.hasPointerCapture&&!this._element.hasPointerCapture(t))return;this._element.releasePointerCapture(t)}catch{}}_updateNormalizedPointerLikeEvent(t,r){const n=cB(this._element,t);return uq.test.disableSubpixelCoordinates&&(n.x=Math.round(n.x),n.y=Math.round(n.y)),r.x=n.x,r.y=n.y,r}_handleKey(t,r){const n=Aye(r);n&&t==="key-up"&&this._keyDownState.delete(n);const i={native:r,key:n,repeat:!!n&&this._keyDownState.has(n)};n&&t==="key-down"&&this._keyDownState.add(i.key),this._callback(t,i)}_handlePointer(t,r){const n=this._updateNormalizedPointerLikeEvent(r,{native:r,x:0,y:0,pointerType:r.pointerType,button:r.button,buttons:r.buttons,eventId:this._eventId++});this._callback(t,n)}_handlePointerPreventDefault(t,r){const n=this._updateNormalizedPointerLikeEvent(r,{native:r,x:0,y:0,pointerType:r.pointerType,button:r.button,buttons:r.buttons,eventId:this._eventId++});r.preventDefault(),this._callback(t,n)}_handleMouseWheel(t,r){let n=r.deltaY;switch(r.deltaMode){case 0:kF&&(n=n/document.documentElement.clientHeight*600);break;case 1:n*=30;break;case 2:n*=900}kF?n*=.7:y1e||v1e?n*=.6:g1e&&(n*=1.375);const i=100,s=Math.abs(n);s>i&&(n=n/s*200/(1+Math.exp(-.02*(s-i))));const o=this._updateNormalizedPointerLikeEvent(r,{native:r,x:0,y:0,deltaY:n});this._callback(t,o)}_handlePointerCaptureLost(t,r){this._activePointerCaptures.delete(r.pointerId),this._handleDefault(t,r)}_handleDefault(t,r){const n={native:r};r.preventDefault(),this._callback(t,n)}_preventAltKeyDefault(t){t.key==="Alt"&&t.preventDefault()}_preventMultiTouchPanning(t){t.touches.length>1&&t.preventDefault()}};lq.test={disableSubpixelCoordinates:!1};const wT={"key-down":"keydown","key-up":"keyup","pointer-down":"pointerdown","pointer-up":"pointerup","pointer-move":"pointermove","mouse-wheel":"wheel","pointer-capture-got":"gotpointercapture","pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu","pointer-enter":"pointerenter","pointer-leave":"pointerleave","pointer-cancel":"pointercancel",focus:"focus",blur:"blur"};let w1e=class extends en{constructor(){super(!0),this.registerIncoming("context-menu",t=>{t.data.native.preventDefault()})}};function h3(e,t){return Math.abs(t.x-e.x)+Math.abs(t.y-e.y)}function _1e(e,t){const r=t.x-e.x,n=t.y-e.y;return Math.sqrt(r*r+n*n)}function b1e(e,t){if(t?(t.radius=0,t.center.x=0,t.center.y=0):t={radius:0,center:Kr()},e.length===0)return t;if(e.length===1)return t.center.x=e[0].x,t.center.y=e[0].y,t;if(e.length===2){const[_,x]=e,[T,I]=[x.x-_.x,x.y-_.y];return t.radius=Math.sqrt(T*T+I*I)/2,t.center.x=(_.x+x.x)/2,t.center.y=(_.y+x.y)/2,t}let r=0,n=0;for(let _=0;_<e.length;_++)r+=e[_].x,n+=e[_].y;r/=e.length,n/=e.length;const i=e.map(_=>_.x-r),s=e.map(_=>_.y-n);let o=0,a=0,l=0,c=0,h=0,f=0,m=0;for(let _=0;_<i.length;_++){const x=i[_],T=s[_],I=x*x,C=T*T;o+=I,a+=C,l+=x*T,c+=I*x,h+=C*T,f+=x*C,m+=T*I}const y=.5*(c+f),g=.5*(h+m),v=o*a-l*l,w=(y*a-g*l)/v,b=(o*g-l*y)/v,S=Kr(w+r,b+n);return{radius:Math.sqrt(w*w+b*b+(o+a)/e.length),center:S}}function Gh(e){const{native:t}=e,{pointerId:r,button:n,pointerType:i}=t;return i==="mouse"?`${r}:${n}`:`${i}`}const Os={maximumDoubleClickDelay:250,maximumDoubleClickDistance:10,maximumDoubleTouchDelay:350,maximumDoubleTouchDistance:35};let S1e=class extends en{constructor(t=Os.maximumDoubleClickDelay,r=Os.maximumDoubleClickDistance,n=Os.maximumDoubleTouchDelay,i=Os.maximumDoubleTouchDistance,s=Gm){super(!1),this._maximumDoubleClickDelay=t,this._maximumDoubleClickDistance=r,this._maximumDoubleTouchDelay=n,this._maximumDoubleTouchDistance=i,this._clock=s,this._pointerState=new Map,this._click=this.registerOutgoing("click"),this._doubleClick=this.registerOutgoing("double-click"),this.registerIncoming("immediate-click",this._handleImmediateClick.bind(this)),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this))}onUninstall(){this._pointerState.forEach(t=>t.doubleClickTimer=or(t.doubleClickTimer))}get hasPendingInputs(){return t2(this._pointerState,t=>t.doubleClickTimer!=null)}_clearDoubleClickTimer(t,r){const n=this._pointerState.get(t);n&&(n.doubleClickTimer=or(n.doubleClickTimer),r&&this._click.emit(n.event.data,void 0,n.event.modifiers),this._pointerState.delete(t),this.refreshHasPendingInputs())}_doubleClickTimeoutExceeded(t){const r=this._pointerState.get(t);r.pointerDownCount===1&&this._click.emit(r.event.data,void 0,r.event.modifiers),r.doubleClickTimer=null,this._pointerState.delete(t),this.refreshHasPendingInputs()}_getPointerId(t){const{pointerId:r,pointerType:n,button:i}=t.native;return n==="mouse"?`${r}:${i}`:`${n}`}_handleImmediateClick(t){const r=t.data,{pointerType:n}=r.native,i=this._getPointerId(r);if(!this._pointerState.has(i))return void this._startClick(t);const s=this._pointerState.get(i),{data:o,modifiers:a}=s.event,l=n==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;h3(o,r)>l?(this._clearDoubleClickTimer(i,!0),this._startClick(t)):(this._clearDoubleClickTimer(i,!1),s.pointerDownCount===2&&this._doubleClick.emit(o,void 0,a))}_handlePointerDown(t){const r=Gh(t.data),n=this._pointerState.get(r);n&&(n.pointerDownCount+=1)}_startClick(t){const{data:r}=t,{native:{pointerType:n}}=r,i=Gh(r),s=n==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay,o=this._clock.setTimeout(()=>this._doubleClickTimeoutExceeded(i),s),a=1;this._pointerState.set(i,{event:t,doubleClickTimer:o,pointerDownCount:a}),this.refreshHasPendingInputs()}},x1e=class extends en{constructor(t=Os.maximumDoubleClickDelay,r=Os.maximumDoubleClickDistance,n=Os.maximumDoubleTouchDelay,i=Os.maximumDoubleTouchDistance,s=Gm){super(!1),this._maximumDoubleClickDelay=t,this._maximumDoubleClickDistance=r,this._maximumDoubleTouchDelay=n,this._maximumDoubleTouchDistance=i,this._clock=s,this._doubleTapDragReady=!1,this._doubleTapDragActive=!1,this._dragStartCenter=Kr(0,0),this._pointerState=new Map,this._doubleTapDrag=this.registerOutgoing("double-tap-drag"),this._dragEventSeparator=new O2({start:(o,a)=>this._dragStart(o,a),update:(o,a)=>this._dragUpdate(a),end:(o,a)=>this._dragEnd(a)}),this.registerIncoming("drag",o=>this._dragEventSeparator.handle(o)),this.registerIncoming("pointer-down",o=>this._handlePointerDown(o)),this.registerIncoming("pointer-up",()=>this._handlePointerUp())}onUninstall(){this._pointerState.forEach(t=>{t.doubleTapTimeout=or(t.doubleTapTimeout)})}get hasPendingInputs(){return t2(this._pointerState,t=>t.doubleTapTimeout!=null)}_clearPointerDown(t){const r=this._pointerState.get(t);r&&(r.doubleTapTimeout=or(r.doubleTapTimeout),this._pointerState.delete(t),this.refreshHasPendingInputs())}_createDoubleTapDragData(t,r,n){const{button:i,buttons:s,pointer:o,pointers:a,pointerType:l,timestamp:c}=n;return{action:t,delta:r,button:i,buttons:s,pointer:o,pointers:a,pointerType:l,timestamp:c}}_dragStart(t,r){if(!this._doubleTapDragReady||t!==1)return;this._doubleTapDragReady=!1,this._doubleTapDragActive=!0;const{data:n,modifiers:i}=r,{center:s}=n;this._dragStartCenter=s;const o=this._createDoubleTapDragData("begin",Kr(0,0),n);this._doubleTapDrag.emit(o,void 0,i),r.stopPropagation()}_dragUpdate(t){if(!this._doubleTapDragActive)return;const{data:r,modifiers:n}=t,{center:i}=r,s=Kr(i.x-this._dragStartCenter.x,i.y-this._dragStartCenter.y),o=this._createDoubleTapDragData("update",s,r);this._doubleTapDrag.emit(o,void 0,n),t.stopPropagation()}_dragEnd(t){if(!this._doubleTapDragActive)return;const{data:r,modifiers:n}=t,{center:i}=r,s=Kr(i.x-this._dragStartCenter.x,i.y-this._dragStartCenter.y),o=this._createDoubleTapDragData("end",s,r);this._doubleTapDrag.emit(o,void 0,n),this._doubleTapDragActive=!1,t.stopPropagation()}_handlePointerDown(t){const{data:r}=t,n=Gh(r),i=this._pointerState.get(n),{pointerType:s}=r.native;if(i){const o=s==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;this._clearPointerDown(n),h3(i.event.data,r)>o?this._storePointerDown(t):this._doubleTapDragReady=!0}else this._storePointerDown(t)}_handlePointerUp(){this._doubleTapDragReady=!1}_storePointerDown(t){const{data:r}=t,{pointerType:n}=r.native,i=Gh(r),s=n==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay,o=this._clock.setTimeout(()=>this._clearPointerDown(i),s);this._pointerState.set(i,{event:t,doubleTapTimeout:o}),this.refreshHasPendingInputs()}},$1e=class extends en{constructor(t){super(!1),this._navigationTouch=t,this._startStateModifiers=new Set,this._activePointerMap=new Map,this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._drag=this.registerOutgoing("drag"),this.registerIncoming("pointer-drag",this._handlePointerDrag.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-capture-lost",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-cancel",this._handlePointerUpAndPointerLost.bind(this))}_createPayload(t,r,n,i){return{action:t,pointerType:this._pointerType,button:this._mouseButton,buttons:r.buttons,timestamp:i,pointers:T1e(this._activePointerMap),pointer:r,angle:n.angle,radius:n.radius,center:n.center}}_addPointer(t){const r=t.native.pointerId,n=Mw(this._activePointerMap).angle,i={event:t,initialAngle:0,lastAngle:0};this._activePointerMap.set(r,i);const s=K_(i,cq(this._activePointerMap));i.initialAngle=s,i.lastAngle=s,this._updatePointerAngles(n)}_updatePointer(t){if(t&&t.x==null&&t.y==null)return;const r=t.native.pointerId,n=this._activePointerMap.get(r);n?n.event=t:this._addPointer(t)}_removePointer(t){const r=Mw(this._activePointerMap).angle;this._activePointerMap.delete(t),this._updatePointerAngles(r)}_updatePointerAngles(t){const r=Mw(this._activePointerMap);this._activePointerMap.forEach(n=>{n.initialAngle=K_(n,r)-t,n.lastAngle=K_(n,r)-t})}_emitEvent(t,r,n){const i=Mw(this._activePointerMap);this._drag.emit(this._createPayload(t,r,i,n),void 0,this._startStateModifiers)}_handlePointerUpAndPointerLost(t){const r=t.data.native.pointerId,n=t.timestamp;this._activePointerMap.get(r)&&(this._activePointerMap.size===1?(this._updatePointer(t.data),!this._isCurrentDragSuppressed&&this._emitEvent("end",t.data,n),this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._removePointer(r)):(this._removePointer(r),this._emitEvent("removed",t.data,t.timestamp)))}_handlePointerDrag(t){const r=t.data,n=r.currentEvent,i=t.timestamp;switch(r.action){case"start":case"update":this._isDragging?this._activePointerMap.has(n.native.pointerId)?(this._updatePointer(n),!this._isCurrentDragSuppressed&&this._emitEvent("update",n,i)):(this._addPointer(n),this._emitEvent("added",n,i),this._isCurrentDragSuppressed=this._isSuppressed):(this._updatePointer(n),this._pointerType=t.data.startEvent.pointerType,this._mouseButton=t.data.startEvent.button,this._startStateModifiers=t.modifiers,this._isDragging=!0,this._isCurrentDragSuppressed=this._isSuppressed,!this._isCurrentDragSuppressed&&this._emitEvent("start",n,i))}}get _isSuppressed(){return!!this._navigationTouch&&!this._navigationTouch.browserTouchPanEnabled&&this._pointerType==="touch"&&this._activePointerMap.size===1}};function cq(e){const t=[];return e.forEach(r=>{t.push(Kr(r.event.x,r.event.y))}),b1e(t)}function Mw(e){const t=cq(e);let r=0;return e.forEach(n=>{let i=K_(n,t),s=i-n.lastAngle;for(;s>Math.PI;)s-=2*Math.PI;for(;s<-Math.PI;)s+=2*Math.PI;i=n.lastAngle+s,n.lastAngle=i;const o=i-n.initialAngle;r+=o}),r/=e.size||1,{angle:r,radius:t.radius,center:t.center}}function T1e(e){const t=new Map;return e.forEach((r,n)=>t.set(n,r.event)),t}function K_(e,t){const r=e.event,n=r.x-t.center.x,i=r.y-t.center.y;return Math.atan2(i,n)}var OF;(function(e){e[e.Left=0]="Left",e[e.Middle=1]="Middle",e[e.Right=2]="Right",e[e.Back=3]="Back",e[e.Forward=4]="Forward",e[e.Undefined=-1]="Undefined"})(OF||(OF={}));let E1e=class extends en{constructor(t=Os.maximumDoubleClickDelay,r=Os.maximumDoubleClickDistance,n=Os.maximumDoubleTouchDelay,i=Os.maximumDoubleTouchDistance,s=Gm){super(!1),this._maximumDoubleClickDelay=t,this._maximumDoubleClickDistance=r,this._maximumDoubleTouchDelay=n,this._maximumDoubleTouchDistance=i,this._clock=s,this._pointerState=new Map,this._immediateDoubleClick=this.registerOutgoing("immediate-double-click"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUp.bind(this))}onUninstall(){this._pointerState.forEach(t=>{t.immediateDoubleClick&&t.immediateDoubleClick.timeoutHandle.remove()}),super.onUninstall()}_handlePointerDown(t){const r=t.data,n=Gh(r);if(!this._pointerState.has(n)){const i={downButton:r.native.button,immediateDoubleClick:null};this._pointerState.set(n,i),this.startCapturingPointer(r.native)}}_handlePointerUp(t){const r=t.data,n=Gh(r),i=this._pointerState.get(n);if(i&&i.downButton===r.native.button){const s=i.immediateDoubleClick;if(s){s.timeoutHandle.remove();const o=t.data.native.pointerType==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;h3(s,t.data)>o?this._startImmediateDoubleClick(t,i):(this._immediateDoubleClick.emit(t.data,void 0,s.modifiers),this._removeState(r))}else this._startImmediateDoubleClick(t,i)}}_startImmediateDoubleClick(t,r){const n=t.data.native.pointerType==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay;r.immediateDoubleClick={x:t.data.x,y:t.data.y,modifiers:t.modifiers,timeoutHandle:this._clock.setTimeout(()=>this._removeState(t.data),n)}}_removeState(t){const r=Gh(t);this._pointerState.delete(r),this.stopCapturingPointer(t.native),this.refreshHasPendingInputs()}};const Gy={maximumClickDelay:300,movementUntilMouseDrag:1.5,movementUntilPenDrag:6,movementUntilTouchDrag:6,holdDelay:500};let M1e=class extends en{constructor(t=Gy.maximumClickDelay,r=Gy.movementUntilMouseDrag,n=Gy.movementUntilPenDrag,i=Gy.movementUntilTouchDrag,s=Gy.holdDelay,o=Gm){super(!1),this._maximumClickDelay=t,this._movementUntilMouseDrag=r,this._movementUntilPenDrag=n,this._movementUntilTouchDrag=i,this._holdDelay=s,this._clock=o,this._pointerState=new Map,this._pointerDrag=this.registerOutgoing("pointer-drag"),this._immediateClick=this.registerOutgoing("immediate-click"),this._pointerHold=this.registerOutgoing("hold"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",a=>{this._handlePointerLoss(a,"pointer-up")}),this.registerIncoming("pointer-capture-lost",a=>{this._handlePointerLoss(a,"pointer-capture-lost")}),this.registerIncoming("pointer-cancel",a=>{this._handlePointerLoss(a,"pointer-cancel")}),this._moveHandle=this.registerIncoming("pointer-move",this._handlePointerMove.bind(this)),this._moveHandle.pause()}onUninstall(){this._pointerState.forEach(t=>{t.holdTimeout=or(t.holdTimeout)}),super.onUninstall()}_handlePointerDown(t){const r=t.data,n=r.native.pointerId;let i=null;this._pointerState.size===0&&(i=this._clock.setTimeout(()=>{const o=this._pointerState.get(n);if(o){if(!o.isDragging){const a=o.previousEvent;this._pointerHold.emit(a,void 0,t.modifiers),o.holdEmitted=!0}o.holdTimeout=null}},this._holdDelay));const s={startEvent:r,previousEvent:r,startTimestamp:t.timestamp,isDragging:!1,downButton:r.native.button,holdTimeout:i,modifiers:new Set};this._pointerState.set(n,s),this.startCapturingPointer(r.native),this._moveHandle.resume(),this._pointerState.size>1&&this._startDragging(t)}_createPointerDragData(t,r,n){return{action:t,startEvent:r.startEvent,previousEvent:r.previousEvent,currentEvent:n}}_handlePointerMove(t){const r=t.data,n=r.native.pointerId,i=this._pointerState.get(n);i&&(i.isDragging?this._pointerDrag.emit(this._createPointerDragData("update",i,r),void 0,i.modifiers):_1e(r,i.startEvent)>this._getDragThreshold(r.native.pointerType)&&this._startDragging(t),i.previousEvent=r)}_getDragThreshold(t){switch(t){case"touch":return this._movementUntilTouchDrag;case"pen":return this._movementUntilPenDrag;default:return this._movementUntilMouseDrag}}_startDragging(t){const r=t.data,n=r.native.pointerId;this._pointerState.forEach(i=>{i.holdTimeout!=null&&(i.holdTimeout.remove(),i.holdTimeout=null),i.isDragging||(i.modifiers=t.modifiers,i.isDragging=!0,n===i.startEvent.native.pointerId?this._pointerDrag.emit(this._createPointerDragData("start",i,r)):this._pointerDrag.emit(this._createPointerDragData("start",i,i.previousEvent),t.timestamp))})}_handlePointerLoss(t,r){const n=t.data,i=n.native.pointerId,s=this._pointerState.get(i);s&&(s.holdTimeout!=null&&(s.holdTimeout.remove(),s.holdTimeout=null),s.isDragging?this._pointerDrag.emit(this._createPointerDragData("end",s,r==="pointer-up"?n:s.previousEvent),void 0,s.modifiers):r==="pointer-up"&&s.downButton===n.native.button&&t.timestamp-s.startTimestamp<=this._maximumClickDelay&&!s.holdEmitted&&this._immediateClick.emit(n),this._pointerState.delete(i),this.stopCapturingPointer(n.native),this._pointerState.size===0&&this._moveHandle.pause())}};const Iw={counter:"Ctrl",pan:{left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},zoom:{zoomIn:["=","+"],zoomOut:["-","_"]},rotate:{clockwiseOption1:"a",clockwiseOption2:"A",counterClockwiseOption1:"d",counterClockwiseOption2:"D",resetOption1:"n",resetOption2:"N"}};let Xd=class extends $e{constructor(){super(...arguments),this._handles=new ou}initialize(){const t=()=>{var r;return(r=this.view)==null?void 0:r.ready};this._handles.add([Xl(()=>!t(),()=>this._disconnect()),Xl(t,()=>this._connect())])}destroy(){this._handles=Gt(this._handles),this._disconnect()}get latestPointerType(){var t;return(t=this._inputManager)==null?void 0:t.latestPointerType}get latestPointerLocation(){var t;return(t=this._inputManager)==null?void 0:t.latestPointerLocation}get multiTouchActive(){var t;return((t=this._inputManager)==null?void 0:t.multiTouchActive)??!1}_disconnect(){this.view.viewEvents.disconnect(),this._inputManager=Gt(this._inputManager)}_connect(){const t=this.view.surface,r=new lq(t,this.view.input),n=[new E1e,new M1e,new S1e,new $1e(this.view.navigation),new x1e],i=new gs({eventSource:r,recognizers:n});i.installHandlers("prevent-context-menu",[new w1e],Gc.INTERNAL),i.installHandlers("navigation",[new d1e(this.view),new r1e(this.view),new c1e(this.view),new IF(this.view),new IF(this.view,[Iw.counter]),new Yve(this.view,"primary"),new o1e(this.view,Iw.pan),new l1e(this.view,Iw.zoom),new a1e(this.view,Iw.rotate),new Kve(this.view,"secondary"),new Qve(this.view,"touch")],Gc.INTERNAL),this.view.viewEvents.connect(i),this._source=r,this._inputManager=i,Ee(()=>{var s,o;return(o=(s=this.view)==null?void 0:s.navigation)==null?void 0:o.browserTouchPanEnabled},s=>{this._source&&(this._source.browserTouchPanningEnabled=!s)},Ir)}get test(){return{inputManager:this._inputManager}}};u([d()],Xd.prototype,"view",void 0),u([d()],Xd.prototype,"latestPointerType",null),u([d()],Xd.prototype,"latestPointerLocation",null),u([d()],Xd.prototype,"multiTouchActive",null),Xd=u([E("esri.views.2d.input.MapViewInputManager")],Xd);const I1e=Xd;var XOe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function C1e(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var RF,AF,LF,BC={exports:{}};BC.exports,RF=BC,AF=function(){function e(i,s,o,a,l){t(i,s,o||0,a||i.length-1,l||n)}function t(i,s,o,a,l){for(;a>o;){if(a-o>600){var c=a-o+1,h=s-o+1,f=Math.log(c),m=.5*Math.exp(2*f/3),y=.5*Math.sqrt(f*m*(c-m)/c)*(h-c/2<0?-1:1);t(i,s,Math.max(o,Math.floor(s-h*m/c+y)),Math.min(a,Math.floor(s+(c-h)*m/c+y)),l)}var g=i[s],v=o,w=a;for(r(i,o,s),l(i[a],g)>0&&r(i,o,a);v<w;){for(r(i,v,w),v++,w--;l(i[v],g)<0;)v++;for(;l(i[w],g)>0;)w--}l(i[o],g)===0?r(i,o,w):r(i,++w,a),w<=s&&(o=w+1),s<=w&&(a=w-1)}}function r(i,s,o){var a=i[s];i[s]=i[o],i[o]=a}function n(i,s){return i<s?-1:i>s?1:0}return e},(LF=AF())!==void 0&&(RF.exports=LF);const k1e=C1e(BC.exports);function tx(e,t){if(!(this instanceof tx))return new tx(e,t);this._maxEntries=Math.max(4,e||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),t&&(typeof t=="function"?this.toBBox=t:this._initFormat(t)),this.clear()}function P1e(e,t,r){if(!r)return t.indexOf(e);for(var n=0;n<t.length;n++)if(r(e,t[n]))return n;return-1}function Np(e,t){Rg(e,0,e.children.length,t,e)}function Rg(e,t,r,n,i){i||(i=tf(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var s,o=t;o<r;o++)s=e.children[o],Ag(i,e.leaf?n(s):s);return i}function Ag(e,t){return e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY),e}function NF(e,t){return e.minX-t.minX}function DF(e,t){return e.minY-t.minY}function _T(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function Cw(e){return e.maxX-e.minX+(e.maxY-e.minY)}function O1e(e,t){return(Math.max(t.maxX,e.maxX)-Math.min(t.minX,e.minX))*(Math.max(t.maxY,e.maxY)-Math.min(t.minY,e.minY))}function R1e(e,t){var r=Math.max(e.minX,t.minX),n=Math.max(e.minY,t.minY),i=Math.min(e.maxX,t.maxX),s=Math.min(e.maxY,t.maxY);return Math.max(0,i-r)*Math.max(0,s-n)}function bT(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function kw(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function tf(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function FF(e,t,r,n,i){for(var s,o=[t,r];o.length;)(r=o.pop())-(t=o.pop())<=n||(s=t+Math.ceil((r-t)/n/2)*n,k1e(e,s,t,r,i),o.push(t,s,s,r))}tx.prototype={all:function(){return this._all(this.data,[])},search:function(e){var t=this.data,r=[],n=this.toBBox;if(!kw(e,t))return r;for(var i,s,o,a,l=[];t;){for(i=0,s=t.children.length;i<s;i++)o=t.children[i],kw(e,a=t.leaf?n(o):o)&&(t.leaf?r.push(o):bT(e,a)?this._all(o,r):l.push(o));t=l.pop()}return r},collides:function(e){var t=this.data,r=this.toBBox;if(!kw(e,t))return!1;for(var n,i,s,o,a=[];t;){for(n=0,i=t.children.length;n<i;n++)if(s=t.children[n],kw(e,o=t.leaf?r(s):s)){if(t.leaf||bT(e,o))return!0;a.push(s)}t=a.pop()}return!1},load:function(e){if(!e||!e.length)return this;if(e.length<this._minEntries){for(var t=0,r=e.length;t<r;t++)this.insert(e[t]);return this}var n=this._build(e.slice(),0,e.length-1,0);if(this.data.children.length)if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){var i=this.data;this.data=n,n=i}this._insert(n,this.data.height-n.height-1,!0)}else this.data=n;return this},insert:function(e){return e&&this._insert(e,this.data.height-1),this},clear:function(){return this.data=tf([]),this},remove:function(e,t){if(!e)return this;for(var r,n,i,s,o=this.data,a=this.toBBox(e),l=[],c=[];o||l.length;){if(o||(o=l.pop(),n=l[l.length-1],r=c.pop(),s=!0),o.leaf&&(i=P1e(e,o.children,t))!==-1)return o.children.splice(i,1),l.push(o),this._condense(l),this;s||o.leaf||!bT(o,a)?n?(r++,o=n.children[r],s=!1):o=null:(l.push(o),c.push(r),r=0,n=o,o=o.children[0])}return this},toBBox:function(e){return e},compareMinX:NF,compareMinY:DF,toJSON:function(){return this.data},fromJSON:function(e){return this.data=e,this},_all:function(e,t){for(var r=[];e;)e.leaf?t.push.apply(t,e.children):r.push.apply(r,e.children),e=r.pop();return t},_build:function(e,t,r,n){var i,s=r-t+1,o=this._maxEntries;if(s<=o)return Np(i=tf(e.slice(t,r+1)),this.toBBox),i;n||(n=Math.ceil(Math.log(s)/Math.log(o)),o=Math.ceil(s/Math.pow(o,n-1))),(i=tf([])).leaf=!1,i.height=n;var a,l,c,h,f=Math.ceil(s/o),m=f*Math.ceil(Math.sqrt(o));for(FF(e,t,r,m,this.compareMinX),a=t;a<=r;a+=m)for(FF(e,a,c=Math.min(a+m-1,r),f,this.compareMinY),l=a;l<=c;l+=f)h=Math.min(l+f-1,c),i.children.push(this._build(e,l,h,n-1));return Np(i,this.toBBox),i},_chooseSubtree:function(e,t,r,n){for(var i,s,o,a,l,c,h,f;n.push(t),!t.leaf&&n.length-1!==r;){for(h=f=1/0,i=0,s=t.children.length;i<s;i++)l=_T(o=t.children[i]),(c=O1e(e,o)-l)<f?(f=c,h=l<h?l:h,a=o):c===f&&l<h&&(h=l,a=o);t=a||t.children[0]}return t},_insert:function(e,t,r){var n=this.toBBox,i=r?e:n(e),s=[],o=this._chooseSubtree(i,this.data,t,s);for(o.children.push(e),Ag(o,i);t>=0&&s[t].children.length>this._maxEntries;)this._split(s,t),t--;this._adjustParentBBoxes(i,s,t)},_split:function(e,t){var r=e[t],n=r.children.length,i=this._minEntries;this._chooseSplitAxis(r,i,n);var s=this._chooseSplitIndex(r,i,n),o=tf(r.children.splice(s,r.children.length-s));o.height=r.height,o.leaf=r.leaf,Np(r,this.toBBox),Np(o,this.toBBox),t?e[t-1].children.push(o):this._splitRoot(r,o)},_splitRoot:function(e,t){this.data=tf([e,t]),this.data.height=e.height+1,this.data.leaf=!1,Np(this.data,this.toBBox)},_chooseSplitIndex:function(e,t,r){var n,i,s,o,a,l,c,h;for(l=c=1/0,n=t;n<=r-t;n++)o=R1e(i=Rg(e,0,n,this.toBBox),s=Rg(e,n,r,this.toBBox)),a=_T(i)+_T(s),o<l?(l=o,h=n,c=a<c?a:c):o===l&&a<c&&(c=a,h=n);return h},_chooseSplitAxis:function(e,t,r){var n=e.leaf?this.compareMinX:NF,i=e.leaf?this.compareMinY:DF;this._allDistMargin(e,t,r,n)<this._allDistMargin(e,t,r,i)&&e.children.sort(n)},_allDistMargin:function(e,t,r,n){e.children.sort(n);var i,s,o=this.toBBox,a=Rg(e,0,t,o),l=Rg(e,r-t,r,o),c=Cw(a)+Cw(l);for(i=t;i<r-t;i++)s=e.children[i],Ag(a,e.leaf?o(s):s),c+=Cw(a);for(i=r-t-1;i>=t;i--)s=e.children[i],Ag(l,e.leaf?o(s):s),c+=Cw(l);return c},_adjustParentBBoxes:function(e,t,r){for(var n=r;n>=0;n--)Ag(t[n],e)},_condense:function(e){for(var t,r=e.length-1;r>=0;r--)e[r].children.length===0?r>0?(t=e[r-1].children).splice(t.indexOf(e[r]),1):this.clear():Np(e[r],this.toBBox)},_initFormat:function(e){var t=["return a"," - b",";"];this.compareMinX=new Function("a","b",t.join(e[0])),this.compareMinY=new Function("a","b",t.join(e[1])),this.toBBox=new Function("a","return {minX: a"+e[0]+", minY: a"+e[1]+", maxX: a"+e[2]+", maxY: a"+e[3]+"};")}};var qC;const jF=new xt({upperLeft:"upper-left",lowerLeft:"lower-left"});let eh=qC=class extends Q{constructor(e){super(e),this.extent=null,this.mode="view",this.originPosition="upper-left",this.tolerance=1}clone(){return new qC(F({extent:this.extent,mode:this.mode,originPosition:this.originPosition,tolerance:this.tolerance}))}};u([d({type:at,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],eh.prototype,"extent",void 0),u([d({type:["view","edit"],json:{write:!0}})],eh.prototype,"mode",void 0),u([d({type:String,json:{read:jF.read,write:jF.write}})],eh.prototype,"originPosition",void 0),u([d({type:Number,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],eh.prototype,"tolerance",void 0),eh=qC=u([E("esri.rest.support.QuantizationParameters")],eh);const dq=eh;let VF=class hq{constructor(t,r){this.key=new pp(0,0,0,0),this.bounds=Da(),this.objectIds=new Set,this.key.set(r);const n=t.getLODInfoAt(this.key);this.tileInfoView=t,this.tileInfoView.getTileBounds(this.bounds,this.key,!0),this.resolution=n.resolution,this.scale=n.scale,this.level=n.level}get id(){return this.key.id}get extent(){return at.fromBounds(this.bounds,this.tileInfoView.tileInfo.spatialReference)}get transform(){return{originPosition:"upperLeft",scale:[this.resolution,this.resolution],translate:[this.bounds[0],this.bounds[3]]}}createChildTiles(){const t=this.key.getChildKeys(),r=Yn.acquire();for(let n=0;n<t.length;n++)r[n]=new hq(this.tileInfoView,t[n]);return r}getQuantizationParameters(){return dq.fromJSON({mode:"view",originPosition:"upperLeft",tolerance:this.resolution,extent:{xmin:this.bounds[0],ymin:this.bounds[1],xmax:this.bounds[2],ymax:this.bounds[3],spatialReference:this.tileInfoView.tileInfo.spatialReference}})}};const Cd={added:[],removed:[]},ST=new Set,A1e=new pp(0,0,0,0);let L1e=class extends Ua{constructor(t){super(),this._tiles=new Map,this._index=tx(9,V("esri-csp-restrictions")?r=>({minX:r.bounds[0],minY:r.bounds[1],maxX:r.bounds[2],maxY:r.bounds[3]}):[".bounds[0]",".bounds[1]",".bounds[2]",".bounds[3]"]),this.tiles=[],this.tileScheme=t}destroy(){this.clear()}clear(){this.tiles.length=0,this._tiles.clear(),this._index.clear()}has(t){return this._tiles.has(t)}get(t){return this._tiles.get(t)}boundsIntersections(t){return this._index.search({minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]})}updateTiles(t){const r={added:[],removed:[]};for(const n of t.added)if(!this.has(n)){const i=new VF(this.tileScheme,n);this._tiles.set(n,i),this._index.insert(i),r.added.push(i)}for(const n of t.removed)if(this.has(n)){const i=this.get(n);this._tiles.delete(n),this._index.remove(i),r.removed.push(i)}this.tiles.length=0,this._tiles.forEach(n=>this.tiles.push(n)),(r.added.length||r.removed.length)&&this.emit("update",r)}setViewState(t){const r=this.tileScheme.getTileCoverage(t,0);if(!r)return;const{spans:n,lodInfo:i}=r,{level:s}=i;if(n.length>0)for(const{row:o,colFrom:a,colTo:l}of n)for(let c=a;c<=l;c++){const h=A1e.set(s,o,i.normalizeCol(c),i.getWorldForColumn(c)).id;if(ST.add(h),!this.has(h)){const f=new VF(this.tileScheme,h);this._tiles.set(h,f),this._index.insert(f),this.tiles.push(f),Cd.added.push(f)}}for(let o=this.tiles.length-1;o>=0;o--){const a=this.tiles[o];ST.has(a.id)||(this._tiles.delete(a.id),this.tiles.splice(o,1),this._index.remove(a),Cd.removed.push(a))}(Cd.added.length||Cd.removed.length)&&this.emit("update",Cd),kv.pool.release(r),ST.clear(),Cd.added.length=0,Cd.removed.length=0}},th=class extends $e{constructor(){super(...arguments),this.color=new We([0,255,255]),this.haloOpacity=1,this.fillOpacity=.25}equals(t){return this.color.equals(t.color)&&(this.haloColor||this.color).equals(t.haloColor||t.color)&&this.haloOpacity===t.haloOpacity&&this.fillOpacity===t.fillOpacity}};u([d({type:We})],th.prototype,"color",void 0),u([d({type:We})],th.prototype,"haloColor",void 0),u([d()],th.prototype,"haloOpacity",void 0),u([d()],th.prototype,"fillOpacity",void 0),th=u([E("esri.views.2d.support.HighlightOptions")],th);const pq=th,N1e=e=>e.includes("Brush");let fq=class{constructor(){this._names=new Map}begin(t){this._names.has(t)||(this._names.set(t,!1),N1e(t)&&this.record("Esri.FirstDraw"),performance.mark(`Esri.${t}.Start`))}end(t){this._names.has(t)&&!this._names.get(t)&&(this._names.set(t,!0),performance.mark(`Esri.${t}.End`))}record(t){this._names.has(t)||(this._names.set(t,!0),performance.mark(`Esri.${t}`))}};function D1e(e,t,r,n,i,s,o,a){e.ignorePadding&&(n={left:0,right:0,top:0,bottom:0});let l=null;e.width!=null&&e.height!=null?l=[e.width,e.height]:e.width==null&&e.height!=null?l=[e.height,e.height]:e.width!=null&&e.height==null?l=[e.width,e.width]:e.width==null&&e.height==null&&(l=null);const c=r[0]-(n.left+n.right),h=r[1]-(n.top+n.bottom);let f,m,y=e.area||{x:0,y:0,width:c,height:h};if(l){const g=c/h,v=l[0]/l[1];if(v>g){const w=y.width/v;y={x:y.x,y:Math.round(y.y+(y.height-w)/2),width:y.width,height:Math.round(w)}}else{const w=y.height*v;y={x:Math.round(y.x+(y.width-w)/2),y:y.y,width:Math.round(w),height:y.height}}}else l=[y.width,y.height];return l[0]>y.width?(f=Math.min(l[0]/y.width,t),m=l[0]/y.width/f):(f=1,m=l[0]/y.width),{resolutionScale:f,cropArea:{x:Math.round((y.x+n.left)*f),y:Math.round((y.y+n.top)*f),width:Math.round(y.width*f),height:Math.round(y.height*f)},outputScale:m,format:i,quality:s,children:o,rotation:a}}function F1e(e,t,r){const{ctx:n,canvas:i}=mq(e,r),s=n.getImageData(0,0,e.width,e.height),o=z1e(i,t);return yq(i),{dataUrl:o,data:s}}function j1e(e,t){const{ctx:r,canvas:n}=mq(e,t),i=r.getImageData(0,0,e.width,e.height);return yq(n),i}function mq(e,t){const r=V1e();t.premultipliedAlpha&&W1e(e),r.width=e.width,r.height=e.height;const n=r.getContext("2d",{willReadFrequently:!0});return n.putImageData(e,0,0),t.flipY&&q1e(n),{ctx:n,canvas:r}}function yq(e){e.width=0,e.height=0}function V1e(){return xT==null&&(xT=document.createElement("canvas")),xT}let xT=null;function z1e(e,t){const r=H1e[t.format],n=t.quality/100;return e.toDataURL(r,n)}function U1e(e,t){const r=B1e(e),n=J1e[r];return{format:r,quality:Yi(t??n,0,100)}}function G1e(e,t){return t/Math.max(e[0],e[1])}function nRe(e,t,r,n=0,i=0,s=e.width-n,o=e.height-i,a=!1){const{data:l}=e,{width:c,height:h,data:f}=t,m=s/c,y=o/h,g=Math.ceil(m/2),v=Math.ceil(y/2),w=e.width;for(let b=0;b<h;b++)for(let S=0;S<c;S++){const _=4*(S+(a?h-b-1:b)*c);let x=0,T=0,I=0,C=0,O=0,W=0;const z=(b+.5)*y;for(let ne=Math.floor(b*y);ne<(b+1)*y;ne++){const K=Math.abs(z-(ne+.5))/v,xe=(S+.5)*m,le=K*K;for(let B=Math.floor(S*m);B<(S+1)*m;B++){const it=Math.abs(xe-(B+.5))/g,Ge=Math.sqrt(le+it*it);if(Ge>=1)continue;let H=2*Ge*Ge*Ge-3*Ge*Ge+1;const oe=4*(n+B+(i+ne)*w);W+=H*l[oe+3],T+=H,!r&&l[oe+3]<255&&(H=H*l[oe+3]/255),I+=H*l[oe],C+=H*l[oe+1],O+=H*l[oe+2],x+=H}}f[_]=I/x,f[_+1]=C/x,f[_+2]=O/x,f[_+3]=W/T}return t}function B1e(e){switch(e){case"png":case"jpg":case"jpeg":return e;default:return Z1e}}function q1e(e){e.save(),e.globalCompositeOperation="copy",e.scale(1,-1),e.translate(0,-e.canvas.height),e.drawImage(e.canvas,0,0),e.restore()}function W1e(e){const t=e.data,r=t.length;for(let n=0;n<r;n+=4){const i=t[n+3];if(i!==255&&i>0){const s=255/i;t[n]=t[n]*s,t[n+1]=t[n+1]*s,t[n+2]=t[n+2]*s}}}const H1e={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"},zF=98,Z1e="png",J1e={png:100,jpg:zF,jpeg:zF};var jr;function WC(e,t,r={}){const n=t===jr.WEBGL1?["webgl","experimental-webgl","webkit-3d","moz-webgl"]:["webgl2"];for(const i of n){const s=e.getContext(i,r);if(s)return s}return null}function iRe(e,t,r={}){const n=gq(e);for(const i of n){const s=WC(t,i,r);if(s)return s}return null}function gq(e){if(e==="3d")return[jr.WEBGL2];const t=V("esri-force-webgl");return t===jr.WEBGL1||t===jr.WEBGL2?[t]:V("mac")&&V("chrome")?[jr.WEBGL1,jr.WEBGL2]:[jr.WEBGL2,jr.WEBGL1]}(function(e){e[e.WEBGL1=1]="WEBGL1",e[e.WEBGL2=2]="WEBGL2"})(jr||(jr={}));let $T,TT;function Q1e(e){const t=gq(e);for(;t.length>1;){const r=UF(t.shift());if(r.available)return r}return UF(t.shift())}function UF(e){switch(e){case jr.WEBGL1:return Y1e();case jr.WEBGL2:return K1e()}}function Y1e(){return $T||($T=twe()),$T}function K1e(){return TT||(TT=rwe()),TT}let vq=class{constructor(){this.available=!1,this.majorPerformanceCaveat=!1,this.maxTextureSize=0,this.supportsVertexShaderSamplers=!1,this.supportsHighPrecisionFragment=!1,this.supportsElementIndexUint=!1,this.supportsStandardDerivatives=!1,this.supportsInstancedArrays=!1,this.supportsTextureFloat=!1,this.supportsTextureHalfFloat=!1,this.supportsColorBufferFloat=!1,this.supportsColorBufferFloatBlend=!1,this.supportsColorBufferHalfFloat=!1}},X1e=class extends vq{constructor(){super(...arguments),this.type=jr.WEBGL1}},ewe=class extends vq{constructor(){super(...arguments),this.type=jr.WEBGL2,this.supportsElementIndexUint=!0,this.supportsStandardDerivatives=!0,this.supportsInstancedArrays=!0,this.supportsTextureFloat=!0,this.supportsTextureHalfFloat=!0}};function wq(e,t){if(e===jr.WEBGL1&&typeof WebGLRenderingContext>"u"||e===jr.WEBGL2&&typeof WebGL2RenderingContext>"u")return null;const r=document.createElement("canvas");if(!r)return null;let n=WC(r,e,{failIfMajorPerformanceCaveat:!0});if(n==null&&(n=WC(r,e),n!=null&&(t.majorPerformanceCaveat=!0)),n==null)return n;if(e===jr.WEBGL1){const s=n.getParameter(n.VERSION),o=s==null?void 0:s.match(/^WebGL\s+([\d.]*)/);if(o){const a=parseFloat(o[1]);t.available=a>=.94}}else t.available=!0;t.maxTextureSize=n.getParameter(n.MAX_TEXTURE_SIZE),t.supportsVertexShaderSamplers=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS)>0;const i=n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT);return i&&(t.supportsHighPrecisionFragment=i.precision>0),n}function twe(){const e=new X1e,t=wq(jr.WEBGL1,e);return t==null||(e.supportsElementIndexUint=t.getExtension("OES_element_index_uint")!==null,e.supportsStandardDerivatives=t.getExtension("OES_standard_derivatives")!==null,e.supportsInstancedArrays=t.getExtension("ANGLE_instanced_arrays")!==null,e.supportsTextureFloat=t.getExtension("OES_texture_float")!==null,e.supportsTextureHalfFloat=t.getExtension("OES_texture_half_float")!==null,e.supportsColorBufferFloat=t.getExtension("WEBGL_color_buffer_float")!==null,e.supportsColorBufferFloatBlend=t.getExtension("EXT_float_blend")!==null,e.supportsColorBufferHalfFloat=t.getExtension("EXT_color_buffer_half_float")!==null),e}function rwe(){const e=new ewe,t=wq(jr.WEBGL2,e);return t==null||(e.supportsColorBufferFloat=t.getExtension("EXT_color_buffer_float")!==null,e.supportsColorBufferFloatBlend=t.getExtension("EXT_float_blend")!==null,e.supportsColorBufferHalfFloat=e.supportsColorBufferFloat||t.getExtension("EXT_color_buffer_half_float")!==null),e}function nwe(e){const t=Q1e(e);if(!t.available)return new N("webgl:required",e==="3d"?"WebGL2 is required but not supported.":"WebGL is required but not supported.",new Error().stack);if(e==="3d"&&t.majorPerformanceCaveat)return new N("webgl:major-performance-caveat-detected","Your WebGL implementation doesn't seem to support hardware accelerated rendering. Check your browser settings or if your GPU is in a blocklist.");if(!t.supportsHighPrecisionFragment)return new N("webgl:high-precision-fragment-required","WebGL support for high precision fragment shaders is required but not supported.");if(!t.supportsVertexShaderSamplers)return new N("webgl:vertex-shader-samplers-required","WebGL support for vertex shader samplers is required but not supported.");if(t.type===jr.WEBGL1){if(!t.supportsElementIndexUint)return new N("webgl:element-index-uint-required","WebGL support for uint vertex indices is required but not supported.");if(!t.supportsStandardDerivatives)return new N("webgl:standard-derivatives-required","WebGL support for standard derivatives is required but not supported.");if(!t.supportsInstancedArrays)return new N("webgl:instanced-arrays-required","WebGL support for instanced rendering is required but not supported.")}return null}function iwe(e){return e&&"nodeType"in e}function swe(e){return e&&typeof e.render=="function"}const GF={component:"esri-component"};let rh=class extends $e{constructor(){super(...arguments),this.widget=null}destroy(){var t;this.node=null,(t=this.widget)==null||t.destroy()}get id(){return this.get("widget.id")||this.get("node.id")}set node(t){const r=this._get("node");t!==r&&(t&&t.classList.add(GF.component),r&&r.classList.remove(GF.component),this._set("node",t))}castNode(t){var r;return(r=this.widget)==null||r.destroy(),t?typeof t=="string"||iwe(t)?(this._set("widget",null),QR(t)):(swe(t)&&!t.domNode&&(t.domNode=document.createElement("div")),this._set("widget",t),t.domNode):(this._set("widget",null),null)}};u([d({dependsOn:[]})],rh.prototype,"id",null),u([d()],rh.prototype,"node",null),u([Pt("node")],rh.prototype,"castNode",null),u([d({readOnly:!0})],rh.prototype,"widget",void 0),rh=u([E("esri.views.ui.Component")],rh);const X_=rh,_q="calcite-mode-";function owe(){return getComputedStyle(document.body).getPropertyValue("--esri-calcite-mode-name").replaceAll(/\s|'|"/g,"")}function awe(){return owe().startsWith("dark")}function lwe(){return`${_q}${awe()?"dark":"light"}`}function uwe(e){cwe(e),e.classList.add(lwe())}function cwe(e){Array.from(e.classList).forEach(t=>{t.startsWith(_q)&&e.classList.remove(t)})}const dwe={left:0,top:0,bottom:0,right:0},bq={bottom:30,top:15,right:15,left:15},el="esri-ui",li={ui:el,corner:`${el}-corner`,innerContainer:`${el}-inner-container`,manualContainer:`${el}-manual-container`,cornerContainer:`${el}-corner-container`,topLeft:`${el}-top-left`,topRight:`${el}-top-right`,bottomLeft:`${el}-bottom-left`,bottomRight:`${el}-bottom-right`};function hwe(e){return e&&!e._started&&typeof e.postMixInProperties=="function"&&typeof e.buildRendering=="function"&&typeof e.postCreate=="function"&&typeof e.startup=="function"}function Pw(e){return e===0?"0":`${e}px`}function ET(e){const t=typeof e=="object"&&e!==null&&Object.getPrototypeOf(e);return(t===null||t===Object.prototype)&&("component"in e||"index"in e||"position"in e)?e:null}function MT(e,{top:t,bottom:r,left:n,right:i}){e.style.top=t,e.style.bottom=r,e.style.left=n,e.style.right=i}let ba=class extends Ua.EventedAccessor{constructor(t){super(t),this._cornerNameToContainerLookup={},this._positionNameToContainerLookup={},this._components=new Array,this._componentMap=new Map,this._locale=ei(),this.view=null,this._applyViewPadding=()=>{const r=this.container;r&&MT(r,this._toPixelPosition(this._getViewPadding()))},this._applyUIPadding=()=>{const r=this._innerContainer;r&&MT(r,this._toPixelPosition(this.padding))},this._initContainers()}initialize(){this.addHandles([Ee(()=>{var t;return[(t=this.view)==null?void 0:t.padding,this.container]},this._applyViewPadding,Ir),Ee(()=>this.padding,this._applyUIPadding,Ir),Ee(()=>[this.container,this._locale],([t,r])=>{t&&t.setAttribute("lang",r)},Ir),l2(t=>{this._locale=t})])}destroy(){this.container=null;for(const t of this._components)t.destroy();this._components.length=0,this._componentMap.clear()}set container(t){const r=this._get("container");t!==r&&(t&&(t.classList.add(li.ui),uwe(t),this._attachContainers(t)),r&&(r.classList.remove(li.ui),MT(r,{top:"",bottom:"",left:"",right:""}),kG(r)),this._set("container",t))}get height(){var s;const t=((s=this.view)==null?void 0:s.height)??0;if(t===0)return t;const r=this._getViewPadding(),{top:n,bottom:i}=r;return Math.max(t-n-i,0)}get padding(){return this._get("padding")}set padding(t){this._overrideIfSome("padding",t)}castPadding(t){return typeof t=="number"?{bottom:t,top:t,right:t,left:t}:{...bq,...t}}get width(){var s;const t=((s=this.view)==null?void 0:s.width)??0;if(t===0)return t;const r=this._getViewPadding(),{left:n,right:i}=r;return Math.max(t-n-i,0)}add(t,r){let n,i,s;if(Array.isArray(t))return void t.forEach(a=>this.add(a,r));const o=ET(t);o&&({index:n,position:r,component:t,key:i}=o),r&&typeof r=="object"&&({index:n,key:i,position:r,internal:s}=r),!t||r&&!this._isValidPosition(r)||this._add(t,r,n,i,s)}remove(t,r){var i;if(!t)return;if(Array.isArray(t))return t.map(s=>this.remove(s,r));const n=this._find(t);if(n){if(this._componentMap.has(t)&&((i=this._componentMap.get(t))==null?void 0:i.key)!==r)return;const s=this._components.indexOf(n),o=n.node.parentNode;return o==null||o.removeChild(n.node),this._componentMap.delete(t),this._components.splice(s,1)[0]}}empty(t,r={removeInternal:!1}){if(Array.isArray(t)){for(const s of t)this.empty(s,r);return}const n=this._positionNameToContainerLookup[t??"manual"],i=Array.prototype.slice.call(n.children).map(s=>this._findByNode(s)).filter(s=>{var o;return s==null?!1:!(((o=this._componentMap.get(s))==null?void 0:o.internal)??!1)||r.removeInternal});for(const s of i)this.remove(s)}move(t,r){if(Array.isArray(t)&&t.forEach(o=>this.move(o,r)),!t)return;let n;const i=ET(t)||ET(r);if(i&&(n=i.index,r=i.position,t=i.component||t),r&&!this._isValidPosition(r))return;const s=this.remove(t);s&&this.add(s,{position:r,index:n})}find(t){if(!t)return null;const r=this._findById(t);return r&&(r.widget||r.node)}getComponents(t,r={includeInternal:!1}){return t?Array.isArray(t)?t.map(n=>this._getComponentsAtPosition(n,r)).flat():this._getComponentsAtPosition(t,r):this._components.filter(n=>{var i;return r.includeInternal||!((i=this._componentMap.get(n))!=null&&i.internal)}).map(({widget:n,node:i})=>n??i)}getPosition(t){for(const r in this._positionNameToContainerLookup)if(this._positionNameToContainerLookup[r].contains(t))return r;return null}_add(t,r,n,i,s){t instanceof X_||(t=new X_({node:t})),this._place({component:t,position:r,index:n}),this._components.push(t),this._componentMap.set(t,{key:i,internal:s})}_find(t){return t?t instanceof X_?this._findByComponent(t):typeof t=="string"?this._findById(t):this._findByNode(t.domNode||t):null}_getViewPadding(){var t;return((t=this.view)==null?void 0:t.padding)??dwe}_attachContainers(t){t.appendChild(this._innerContainer),t.appendChild(this._manualContainer)}_initContainers(){const t=document.createElement("div");t.classList.add(li.innerContainer,li.cornerContainer);const r=document.createElement("div");r.classList.add(li.innerContainer,li.manualContainer);const n=document.createElement("div");n.classList.add(li.topLeft,li.corner),t.appendChild(n);const i=document.createElement("div");i.classList.add(li.topRight,li.corner),t.appendChild(i);const s=document.createElement("div");s.classList.add(li.bottomLeft,li.corner),t.appendChild(s);const o=document.createElement("div");o.classList.add(li.bottomRight,li.corner),t.appendChild(o),this._innerContainer=t,this._manualContainer=r;const a=ZG();this._cornerNameToContainerLookup={"top-left":n,"top-right":i,"bottom-left":s,"bottom-right":o,"top-leading":a?i:n,"top-trailing":a?n:i,"bottom-leading":a?o:s,"bottom-trailing":a?s:o},this._positionNameToContainerLookup={manual:r,...this._cornerNameToContainerLookup}}_isValidPosition(t){return!!this._positionNameToContainerLookup[t]}_place(t){const r=t.position??"manual",{component:n,index:i}=t,s=this._positionNameToContainerLookup[r],o=i!=null&&i>-1;if(hwe(n.widget)&&n.widget.startup(),!o)return void s.appendChild(n.node);const a=Array.from(s.children);if(i===0)return void(s.firstChild?DD(n.node,s.firstChild):s.appendChild(n.node));i>=a.length?s.appendChild(n.node):DD(n.node,a[i])}_toPixelPosition(t){return{top:Pw(t.top),left:Pw(t.left),right:Pw(t.right),bottom:Pw(t.bottom)}}_findByComponent(t){return this._components.find(r=>r===t)??null}_findById(t){return this._components.find(({id:r})=>r===t)??null}_findByNode(t){return this._components.find(({node:r})=>r===t)??null}_getComponentsAtPosition(t,r){const n=this._positionNameToContainerLookup[t];return Array.prototype.slice.call(n.children).map(i=>this._findByNode(i)).filter(Ll).filter(i=>{var s;return r.includeInternal||!((s=this._componentMap.get(i))!=null&&s.internal)}).map(({widget:i,node:s})=>i??s)}};u([d()],ba.prototype,"_locale",void 0),u([d()],ba.prototype,"container",null),u([d()],ba.prototype,"height",null),u([d({value:bq})],ba.prototype,"padding",null),u([Pt("padding")],ba.prototype,"castPadding",null),u([d()],ba.prototype,"view",void 0),u([d()],ba.prototype,"width",null),ba=u([E("esri.views.ui.UI")],ba);const pwe=ba,fwe="randomUUID"in crypto;function Sq(){if(fwe)return crypto.randomUUID();const e=crypto.getRandomValues(new Uint16Array(8));e[3]=4095&e[3]|16384,e[4]=16383&e[4]|32768;const t=r=>e[r].toString(16).padStart(4,"0");return t(0)+t(1)+"-"+t(2)+"-"+t(3)+"-"+t(4)+"-"+t(5)+t(6)+t(7)}function cRe(){return`{${Sq()}}`}const mwe={handleInterceptedEvent:(e,t,r,n)=>(e.scheduleRender(),t.properties[`on${n.type}`].apply(t.properties.bind||r,[n]))},ywe={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(e,t,r)=>{e.style[t]=r}},gwe=e=>({...ywe,...e}),vwe=(e,t)=>{const r=[];for(;e&&e!==t;)r.push(e),e=e.parentNode;return r},wwe=(e,t)=>e.find(t),BF=(e,t,r=!1)=>{let n=e;return t.forEach((i,s)=>{const o=n!=null&&n.children?wwe(n.children,a=>a.domNode===i):void 0;r&&!o&&s!==t.length-1||(n=o)}),n},_we=e=>{let t;const r={...mwe,...e},n=gwe(r),i=n.performanceLogger;let s,o=!0,a=!1;const l=[],c=[],h=(m,y,g)=>{var b;let v;n.eventHandlerInterceptor=(S,_,x,T)=>function(I){let C;i("domEvent",I);const O=vwe(I.currentTarget,v.domNode),W=O.some(ne=>{var K;return customElements.get((K=ne==null?void 0:ne.tagName)==null?void 0:K.toLowerCase())});if(I.eventPhase===Event.CAPTURING_PHASE||!W)O.reverse(),C=BF(v.getLastRender(),O);else{const ne=I.composedPath(),K=ne.slice(ne.indexOf(I.currentTarget),ne.indexOf(v.domNode)).filter(xe=>xe.getRootNode()===xe.ownerDocument).reverse();C=BF(v.getLastRender(),K,!0)}let z;return C&&(z=r.handleInterceptedEvent(t,C,this,I)),i("domEventProcessed",I),z},(b=r.postProcessProjectionOptions)==null||b.call(r,n);const w=g();v=m(y,w,n),l.push(v),c.push(g),r.afterFirstVNodeRendered&&r.afterFirstVNodeRendered(v,w)};let f=()=>{if(s=void 0,o){o=!1,i("renderStart",void 0);for(let m=0;m<l.length;m++){const y=c[m]();i("rendered",void 0),l[m].update(y),i("patched",void 0)}i("renderDone",void 0),o=!0}};return r.modifyDoRenderImplementation&&(f=r.modifyDoRenderImplementation(f,l,c)),t={renderNow:f,scheduleRender:()=>{s||a||(s=requestAnimationFrame(f))},stop:()=>{s&&(cancelAnimationFrame(s),s=void 0),a=!0},resume:()=>{a=!1,o=!0,t.scheduleRender()},append:(m,y)=>{h(Rc.append,m,y)},insertBefore:(m,y)=>{h(Rc.insertBefore,m,y)},merge:(m,y)=>{h(Rc.merge,m,y)},replace:(m,y)=>{h(Rc.replace,m,y)},detach:m=>{for(let y=0;y<c.length;y++)if(c[y]===m)return c.splice(y,1),l.splice(y,1)[0];throw new Error("renderFunction was not found")}},t},rf={allRenderFn:!1,cmpDidLoad:!0,cmpDidUnload:!1,cmpDidUpdate:!0,cmpDidRender:!0,cmpWillLoad:!0,cmpWillUpdate:!0,cmpWillRender:!0,connectedCallback:!0,disconnectedCallback:!0,element:!0,event:!0,hasRenderFn:!0,lifecycle:!0,hostListener:!0,hostListenerTargetWindow:!0,hostListenerTargetDocument:!0,hostListenerTargetBody:!0,hostListenerTargetParent:!1,hostListenerTarget:!0,member:!0,method:!0,mode:!0,observeAttribute:!0,prop:!0,propMutable:!0,reflect:!0,scoped:!0,shadowDom:!0,slot:!0,cssAnnotations:!0,state:!0,style:!0,svg:!0,updatable:!0,vdomAttribute:!0,vdomXlink:!0,vdomClass:!0,vdomFunctional:!0,vdomKey:!0,vdomListener:!0,vdomRef:!0,vdomPropOrAttr:!0,vdomRender:!0,vdomStyle:!0,vdomText:!0,watchCallback:!0,taskQueue:!0,hotModuleReplacement:!1,isDebug:!1,isDev:!1,isTesting:!1,hydrateServerSide:!1,hydrateClientSide:!1,lifecycleDOMEvents:!1,lazyLoad:!1,profile:!1,slotRelocation:!0,appendChildSlotFix:!1,cloneNodeFix:!1,hydratedAttribute:!1,hydratedClass:!0,safari10:!1,scriptDataOpts:!1,scopedSlotTextContentFix:!1,shadowDomShim:!1,slotChildNodesFix:!1,invisiblePrehydration:!0,propBoolean:!0,propNumber:!0,propString:!0,cssVarShim:!1,constructableCSS:!0,cmpShouldUpdate:!0,devTools:!1,dynamicImportShim:!1,shadowDelegatesFocus:!0,initializeNextTick:!1,asyncLoading:!1,asyncQueue:!1,transformTagName:!1,attachStyles:!0};let nf,xq,R2,$q=!1,rx=!1,p3=!1,Gi=!1,qF=null,HC=!1;const bwe=e=>{const t=new URL(e,pn.$resourcesUrl$);return t.origin!==y1.location.origin?t.href:t.pathname},Swe=e=>pn.$resourcesUrl$=e,fp=(e,t="")=>()=>{},WF="http://www.w3.org/1999/xlink",HF={},xwe="http://www.w3.org/2000/svg",$we="http://www.w3.org/1999/xhtml",Twe=e=>e!=null,f3=e=>(e=typeof e,e==="object"||e==="function");function Ewe(e){var t,r,n;return(n=(r=(t=e.head)===null||t===void 0?void 0:t.querySelector('meta[name="csp-nonce"]'))===null||r===void 0?void 0:r.getAttribute("content"))!==null&&n!==void 0?n:void 0}const Tq=(e,t,...r)=>{let n=null,i=null,s=null,o=!1,a=!1;const l=[],c=f=>{for(let m=0;m<f.length;m++)n=f[m],Array.isArray(n)?c(n):n!=null&&typeof n!="boolean"&&((o=typeof e!="function"&&!f3(n))&&(n=String(n)),o&&a?l[l.length-1].$text$+=n:l.push(o?nx(null,n):n),a=o)};if(c(r),t){t.key&&(i=t.key),t.name&&(s=t.name);{const f=t.className||t.class;f&&(t.class=typeof f!="object"?f:Object.keys(f).filter(m=>f[m]).join(" "))}}if(typeof e=="function")return e(t===null?{}:t,l,Cwe);const h=nx(e,null);return h.$attrs$=t,l.length>0&&(h.$children$=l),h.$key$=i,h.$name$=s,h},nx=(e,t)=>{const r={$flags$:0,$tag$:e,$text$:t,$elm$:null,$children$:null};return r.$attrs$=null,r.$key$=null,r.$name$=null,r},Mwe={},Iwe=e=>e&&e.$tag$===Mwe,Cwe={forEach:(e,t)=>e.map(ZF).forEach(t),map:(e,t)=>e.map(ZF).map(t).map(kwe)},ZF=e=>({vattrs:e.$attrs$,vchildren:e.$children$,vkey:e.$key$,vname:e.$name$,vtag:e.$tag$,vtext:e.$text$}),kwe=e=>{if(typeof e.vtag=="function"){const r=Object.assign({},e.vattrs);return e.vkey&&(r.key=e.vkey),e.vname&&(r.name=e.vname),Tq(e.vtag,r,...e.vchildren||[])}const t=nx(e.vtag,e.vtext);return t.$attrs$=e.vattrs,t.$children$=e.vchildren,t.$key$=e.vkey,t.$name$=e.vname,t},Pwe=e=>i_e.map(t=>t(e)).find(t=>!!t),Owe=(e,t)=>e!=null&&!f3(e)?t&4?e==="false"?!1:e===""||!!e:t&2?parseFloat(e):t&1?String(e):e:e,Rwe=e=>e,dRe=(e,t,r)=>{const n=Rwe(e);return{emit:i=>Awe(n,t,{bubbles:!!(r&4),composed:!!(r&2),cancelable:!!(r&1),detail:i})}},Awe=(e,t,r)=>{const n=pn.ce(t,r);return e.dispatchEvent(n),n},JF=new WeakMap,Lwe=(e,t,r)=>{let n=sx.get(e);a_e&&r?(n=n||new CSSStyleSheet,typeof n=="string"?n=t:n.replaceSync(t)):n=t,sx.set(e,n)},Nwe=(e,t,r,n)=>{var i;let s=Eq(t,r);const o=sx.get(s);if(e=e.nodeType===11?e:jo,o)if(typeof o=="string"){e=e.head||e;let a=JF.get(e),l;if(a||JF.set(e,a=new Set),!a.has(s)){{l=jo.createElement("style"),l.innerHTML=o;const c=(i=pn.$nonce$)!==null&&i!==void 0?i:Ewe(jo);c!=null&&l.setAttribute("nonce",c),e.insertBefore(l,e.querySelector("link"))}a&&a.add(s)}}else e.adoptedStyleSheets.includes(o)||(e.adoptedStyleSheets=[...e.adoptedStyleSheets,o]);return s},Dwe=e=>{const t=e.$cmpMeta$,r=e.$hostElement$,n=t.$flags$,i=fp("attachStyles",t.$tagName$),s=Nwe(r.shadowRoot?r.shadowRoot:r.getRootNode(),t,e.$modeName$);n&10&&(r["s-sc"]=s,r.classList.add(s+"-h"),n&2&&r.classList.add(s+"-s")),i()},Eq=(e,t)=>"sc-"+(t&&e.$flags$&32?e.$tagName$+"-"+t:e.$tagName$),QF=(e,t,r,n,i,s)=>{if(r!==n){let o=e4(e,t),a=t.toLowerCase();if(t==="class"){const l=e.classList,c=YF(r),h=YF(n);l.remove(...c.filter(f=>f&&!h.includes(f))),l.add(...h.filter(f=>f&&!c.includes(f)))}else if(t==="style"){for(const l in r)(!n||n[l]==null)&&(l.includes("-")?e.style.removeProperty(l):e.style[l]="");for(const l in n)(!r||n[l]!==r[l])&&(l.includes("-")?e.style.setProperty(l,n[l]):e.style[l]=n[l])}else if(t!=="key")if(t==="ref")n&&n(e);else if(!e.__lookupSetter__(t)&&t[0]==="o"&&t[1]==="n")t[2]==="-"?t=t.slice(3):e4(y1,a)?t=a.slice(2):t=a[2]+t.slice(3),r&&pn.rel(e,t,r,!1),n&&pn.ael(e,t,n,!1);else{const l=f3(n);if((o||l&&n!==null)&&!i)try{if(e.tagName.includes("-"))e[t]=n;else{const h=n??"";t==="list"?o=!1:(r==null||e[t]!=h)&&(e[t]=h)}}catch{}let c=!1;a!==(a=a.replace(/^xlink\:?/,""))&&(t=a,c=!0),n==null||n===!1?(n!==!1||e.getAttribute(t)==="")&&(c?e.removeAttributeNS(WF,t):e.removeAttribute(t)):(!o||s&4||i)&&!l&&(n=n===!0?"":n,c?e.setAttributeNS(WF,t,n):e.setAttribute(t,n))}}},Fwe=/\s/,YF=e=>e?e.split(Fwe):[],Mq=(e,t,r,n)=>{const i=t.$elm$.nodeType===11&&t.$elm$.host?t.$elm$.host:t.$elm$,s=e&&e.$attrs$||HF,o=t.$attrs$||HF;for(n in s)n in o||QF(i,n,s[n],void 0,r,t.$flags$);for(n in o)QF(i,n,s[n],o[n],r,t.$flags$)},ix=(e,t,r,n)=>{const i=t.$children$[r];let s=0,o,a,l;if($q||(p3=!0,i.$tag$==="slot"&&(nf&&n.classList.add(nf+"-s"),i.$flags$|=i.$children$?2:1)),i.$text$!==null)o=i.$elm$=jo.createTextNode(i.$text$);else if(i.$flags$&1)o=i.$elm$=jo.createTextNode("");else{if(Gi||(Gi=i.$tag$==="svg"),o=i.$elm$=jo.createElementNS(Gi?xwe:$we,i.$flags$&2?"slot-fb":i.$tag$),Gi&&i.$tag$==="foreignObject"&&(Gi=!1),Mq(null,i,Gi),Twe(nf)&&o["s-si"]!==nf&&o.classList.add(o["s-si"]=nf),i.$children$)for(s=0;s<i.$children$.length;++s)a=ix(e,i,s,o),a&&o.appendChild(a);i.$tag$==="svg"?Gi=!1:o.tagName==="foreignObject"&&(Gi=!0)}return o["s-hn"]=R2,i.$flags$&3&&(o["s-sr"]=!0,o["s-cr"]=xq,o["s-sn"]=i.$name$||"",l=e&&e.$children$&&e.$children$[r],l&&l.$tag$===i.$tag$&&e.$elm$&&Pv(e.$elm$,!1)),o},Pv=(e,t)=>{pn.$flags$|=1;const r=e.childNodes;for(let n=r.length-1;n>=0;n--){const i=r[n];i["s-hn"]!==R2&&i["s-ol"]&&(kq(i).insertBefore(i,m3(i)),i["s-ol"].remove(),i["s-ol"]=void 0,p3=!0),t&&Pv(i,t)}pn.$flags$&=-2},Iq=(e,t,r,n,i,s)=>{let o=e["s-cr"]&&e["s-cr"].parentNode||e,a;for(o.shadowRoot&&o.tagName===R2&&(o=o.shadowRoot);i<=s;++i)n[i]&&(a=ix(null,r,i,e),a&&(n[i].$elm$=a,o.insertBefore(a,m3(t))))},Cq=(e,t,r,n,i)=>{for(;t<=r;++t)(n=e[t])&&(i=n.$elm$,Rq(n),rx=!0,i["s-ol"]?i["s-ol"].remove():Pv(i,!0),i.remove())},jwe=(e,t,r,n)=>{let i=0,s=0,o=0,a=0,l=t.length-1,c=t[0],h=t[l],f=n.length-1,m=n[0],y=n[f],g,v;for(;i<=l&&s<=f;)if(c==null)c=t[++i];else if(h==null)h=t[--l];else if(m==null)m=n[++s];else if(y==null)y=n[--f];else if(Ow(c,m))sf(c,m),c=t[++i],m=n[++s];else if(Ow(h,y))sf(h,y),h=t[--l],y=n[--f];else if(Ow(c,y))(c.$tag$==="slot"||y.$tag$==="slot")&&Pv(c.$elm$.parentNode,!1),sf(c,y),e.insertBefore(c.$elm$,h.$elm$.nextSibling),c=t[++i],y=n[--f];else if(Ow(h,m))(c.$tag$==="slot"||y.$tag$==="slot")&&Pv(h.$elm$.parentNode,!1),sf(h,m),e.insertBefore(h.$elm$,c.$elm$),h=t[--l],m=n[++s];else{for(o=-1,a=i;a<=l;++a)if(t[a]&&t[a].$key$!==null&&t[a].$key$===m.$key$){o=a;break}o>=0?(v=t[o],v.$tag$!==m.$tag$?g=ix(t&&t[s],r,o,e):(sf(v,m),t[o]=void 0,g=v.$elm$),m=n[++s]):(g=ix(t&&t[s],r,s,e),m=n[++s]),g&&kq(c.$elm$).insertBefore(g,m3(c.$elm$))}i>l?Iq(e,n[f+1]==null?null:n[f+1].$elm$,r,n,s,f):s>f&&Cq(t,i,l)},Ow=(e,t)=>e.$tag$===t.$tag$?e.$tag$==="slot"?e.$name$===t.$name$:e.$key$===t.$key$:!1,m3=e=>e&&e["s-ol"]||e,kq=e=>(e["s-ol"]?e["s-ol"]:e).parentNode,sf=(e,t)=>{const r=t.$elm$=e.$elm$,n=e.$children$,i=t.$children$,s=t.$tag$,o=t.$text$;let a;o===null?(Gi=s==="svg"?!0:s==="foreignObject"?!1:Gi,s==="slot"||Mq(e,t,Gi),n!==null&&i!==null?jwe(r,n,t,i):i!==null?(e.$text$!==null&&(r.textContent=""),Iq(r,null,t,i,0,i.length-1)):n!==null&&Cq(n,0,n.length-1),Gi&&s==="svg"&&(Gi=!1)):(a=r["s-cr"])?a.parentNode.textContent=o:e.$text$!==o&&(r.data=o)},Pq=e=>{const t=e.childNodes;let r,n,i,s,o,a;for(n=0,i=t.length;n<i;n++)if(r=t[n],r.nodeType===1){if(r["s-sr"]){for(o=r["s-sn"],r.hidden=!1,s=0;s<i;s++)if(a=t[s].nodeType,t[s]["s-hn"]!==r["s-hn"]||o!==""){if(a===1&&o===t[s].getAttribute("slot")){r.hidden=!0;break}}else if(a===1||a===3&&t[s].textContent.trim()!==""){r.hidden=!0;break}}Pq(r)}},To=[],Oq=e=>{let t,r,n,i,s,o,a=0;const l=e.childNodes,c=l.length;for(;a<c;a++){if(t=l[a],t["s-sr"]&&(r=t["s-cr"])&&r.parentNode)for(n=r.parentNode.childNodes,i=t["s-sn"],o=n.length-1;o>=0;o--)r=n[o],!r["s-cn"]&&!r["s-nr"]&&r["s-hn"]!==t["s-hn"]&&(KF(r,i)?(s=To.find(h=>h.$nodeToRelocate$===r),rx=!0,r["s-sn"]=r["s-sn"]||i,s?s.$slotRefNode$=t:To.push({$slotRefNode$:t,$nodeToRelocate$:r}),r["s-sr"]&&To.map(h=>{KF(h.$nodeToRelocate$,r["s-sn"])&&(s=To.find(f=>f.$nodeToRelocate$===r),s&&!h.$slotRefNode$&&(h.$slotRefNode$=s.$slotRefNode$))})):To.some(h=>h.$nodeToRelocate$===r)||To.push({$nodeToRelocate$:r}));t.nodeType===1&&Oq(t)}},KF=(e,t)=>e.nodeType===1?e.getAttribute("slot")===null&&t===""||e.getAttribute("slot")===t:e["s-sn"]===t?!0:t==="",Rq=e=>{e.$attrs$&&e.$attrs$.ref&&e.$attrs$.ref(null),e.$children$&&e.$children$.map(Rq)},Vwe=(e,t)=>{const r=e.$hostElement$,n=e.$cmpMeta$,i=e.$vnode$||nx(null,null),s=Iwe(t)?t:Tq(null,null,t);R2=r.tagName,n.$attrsToReflect$&&(s.$attrs$=s.$attrs$||{},n.$attrsToReflect$.map(([o,a])=>s.$attrs$[a]=r[o])),s.$tag$=null,s.$flags$|=4,e.$vnode$=s,s.$elm$=i.$elm$=r.shadowRoot||r,nf=r["s-sc"],xq=r["s-cr"],$q=(n.$flags$&1)!==0,rx=!1,sf(i,s);{if(pn.$flags$|=1,p3){Oq(s.$elm$);let o,a,l,c,h,f,m=0;for(;m<To.length;m++)o=To[m],a=o.$nodeToRelocate$,a["s-ol"]||(l=jo.createTextNode(""),l["s-nr"]=a,a.parentNode.insertBefore(a["s-ol"]=l,a));for(m=0;m<To.length;m++)if(o=To[m],a=o.$nodeToRelocate$,o.$slotRefNode$){for(c=o.$slotRefNode$.parentNode,h=o.$slotRefNode$.nextSibling,l=a["s-ol"];l=l.previousSibling;)if(f=l["s-nr"],f&&f["s-sn"]===a["s-sn"]&&c===f.parentNode&&(f=f.nextSibling,!f||!f["s-nr"])){h=f;break}(!h&&c!==a.parentNode||a.nextSibling!==h)&&a!==h&&(!a["s-hn"]&&a["s-ol"]&&(a["s-hn"]=a["s-ol"].parentNode.nodeName),c.insertBefore(a,h))}else a.nodeType===1&&(a.hidden=!0)}rx&&Pq(s.$elm$),pn.$flags$&=-2,To.length=0}},zwe=(e,t)=>{},y3=(e,t)=>(e.$flags$|=16,zwe(e,e.$ancestorComponent$),c_e(()=>Uwe(e,t))),Uwe=(e,t)=>{const r=e.$hostElement$,n=fp("scheduleUpdate",e.$cmpMeta$.$tagName$),i=r;let s;return t?s=om(i,"componentWillLoad"):s=om(i,"componentWillUpdate"),s=XF(s,()=>om(i,"componentWillRender")),n(),XF(s,()=>Gwe(e,i,t))},Gwe=async(e,t,r)=>{const n=e.$hostElement$,i=fp("update",e.$cmpMeta$.$tagName$);n["s-rc"],r&&Dwe(e);const s=fp("render",e.$cmpMeta$.$tagName$);Bwe(e,t,n),s(),i(),qwe(e)},Bwe=(e,t,r)=>{try{qF=t,t=t.render&&t.render(),e.$flags$&=-17,e.$flags$|=2,(rf.hasRenderFn||rf.reflect)&&(rf.vdomRender||rf.reflect)&&(rf.hydrateServerSide||Vwe(e,t))}catch(a){m1(a,e.$hostElement$)}return qF=null,null},qwe=e=>{const t=e.$cmpMeta$.$tagName$,r=e.$hostElement$,n=fp("postUpdate",t),i=r;e.$ancestorComponent$,om(i,"componentDidRender"),e.$flags$&64?(om(i,"componentDidUpdate"),n()):(e.$flags$|=64,om(i,"componentDidLoad"),n())},hRe=e=>{{const t=f1(e),r=t.$hostElement$.isConnected;return r&&(t.$flags$&18)===2&&y3(t,!1),r}},om=(e,t,r)=>{if(e&&e[t])try{return e[t](r)}catch(n){m1(n)}},XF=(e,t)=>e&&e.then?e.then(t):t(),Wwe=(e,t)=>f1(e).$instanceValues$.get(t),Hwe=(e,t,r,n)=>{const i=f1(e),s=e,o=i.$instanceValues$.get(t),a=i.$flags$,l=s;r=Owe(r,n.$members$[t][0]);const c=Number.isNaN(o)&&Number.isNaN(r);if(r!==o&&!c){i.$instanceValues$.set(t,r);{if(n.$watchers$&&a&128){const f=n.$watchers$[t];f&&f.map(m=>{try{l[m](r,o,t)}catch(y){m1(y,s)}})}if((a&18)===2){if(l.componentShouldUpdate&&l.componentShouldUpdate(r,o,t)===!1)return;y3(i,!1)}}}},Zwe=(e,t,r)=>{if(t.$members$){e.watchers&&(t.$watchers$=e.watchers);const n=Object.entries(t.$members$),i=e.prototype;n.map(([s,[o]])=>{(o&31||o&32)&&Object.defineProperty(i,s,{get(){return Wwe(this,s)},set(a){Hwe(this,s,a,t)},configurable:!0,enumerable:!0})});{const s=new Map;i.attributeChangedCallback=function(o,a,l){pn.jmp(()=>{const c=s.get(o);if(this.hasOwnProperty(c))l=this[c],delete this[c];else if(i.hasOwnProperty(c)&&typeof this[c]=="number"&&this[c]==l)return;this[c]=l===null&&typeof this[c]=="boolean"?!1:l})},e.observedAttributes=n.filter(([o,a])=>a[0]&15).map(([o,a])=>{const l=a[1]||o;return s.set(l,o),a[0]&512&&t.$attrsToReflect$.push([o,l]),l})}}return e},Jwe=async(e,t,r,n,i)=>{if(!(t.$flags$&32)&&(i=e.constructor,t.$flags$|=32,customElements.whenDefined(r.$tagName$).then(()=>t.$flags$|=128),i.style)){let o=i.style;typeof o!="string"&&(o=o[t.$modeName$=Pwe(e)]);const a=Eq(r,t.$modeName$);if(!sx.has(a)){const l=fp("registerStyles",r.$tagName$);Lwe(a,o,!!(r.$flags$&1)),l()}}t.$ancestorComponent$,(()=>y3(t,!0))()},Qwe=e=>{},Ywe=e=>{if(!(pn.$flags$&1)){const t=f1(e),r=t.$cmpMeta$,n=fp("connectedCallback",r.$tagName$);t.$flags$&1?(Aq(e,t,r.$listeners$),Qwe(t.$lazyInstance$)):(t.$flags$|=1,r.$flags$&12&&Kwe(e),r.$members$&&Object.entries(r.$members$).map(([i,[s]])=>{if(s&31&&e.hasOwnProperty(i)){const o=e[i];delete e[i],e[i]=o}}),Jwe(e,t,r)),n()}},Kwe=e=>{const t=e["s-cr"]=jo.createComment("");t["s-cn"]=!0,e.insertBefore(t,e.firstChild)},Xwe=e=>{if(!(pn.$flags$&1)){const t=f1(e);t.$rmListeners$&&(t.$rmListeners$.map(r=>r()),t.$rmListeners$=void 0)}},pRe=(e,t)=>{const r={$flags$:t[0],$tagName$:t[1]};r.$members$=t[2],r.$listeners$=t[3],r.$watchers$=e.$watchers$,r.$attrsToReflect$=[];const n=e.prototype.connectedCallback,i=e.prototype.disconnectedCallback;return Object.assign(e.prototype,{__registerHost(){n_e(this,r)},connectedCallback(){Ywe(this),n&&n.call(this)},disconnectedCallback(){Xwe(this),i&&i.call(this)},__attachShadow(){this.attachShadow({mode:"open",delegatesFocus:!!(r.$flags$&16)})}}),e.is=r.$tagName$,Zwe(e,r)},fRe=(e,t)=>t,Aq=(e,t,r,n)=>{r&&r.map(([i,s,o])=>{const a=t_e(e,i),l=e_e(t,o),c=r_e(i);pn.ael(a,s,l,c),(t.$rmListeners$=t.$rmListeners$||[]).push(()=>pn.rel(a,s,l,c))})},e_e=(e,t)=>r=>{try{rf.lazyLoad||e.$hostElement$[t](r)}catch(n){m1(n)}},t_e=(e,t)=>t&4?jo:t&8?y1:t&16?jo.body:e,r_e=e=>s_e?{passive:(e&1)!==0,capture:(e&2)!==0}:(e&2)!==0,Lq=new WeakMap,f1=e=>Lq.get(e),n_e=(e,t)=>{const r={$flags$:0,$hostElement$:e,$cmpMeta$:t,$instanceValues$:new Map};return Aq(e,r,t.$listeners$),Lq.set(e,r)},e4=(e,t)=>t in e,m1=(e,t)=>(0,console.error)(e,t),sx=new Map,i_e=[],y1=typeof window<"u"?window:{},jo=y1.document||{head:{}},mRe=y1.HTMLElement||class{},pn={$flags$:0,$resourcesUrl$:"",jmp:e=>e(),raf:e=>requestAnimationFrame(e),ael:(e,t,r,n)=>e.addEventListener(t,r,n),rel:(e,t,r,n)=>e.removeEventListener(t,r,n),ce:(e,t)=>new CustomEvent(e,t)},s_e=(()=>{let e=!1;try{jo.addEventListener("e",null,Object.defineProperty({},"passive",{get(){e=!0}}))}catch{}return e})(),o_e=e=>Promise.resolve(e),a_e=(()=>{try{return new CSSStyleSheet,typeof new CSSStyleSheet().replaceSync=="function"}catch{}return!1})(),t4=[],Nq=[],l_e=(e,t)=>r=>{e.push(r),HC||(HC=!0,t&&pn.$flags$&4?u_e(ZC):pn.raf(ZC))},r4=e=>{for(let t=0;t<e.length;t++)try{e[t](performance.now())}catch(r){m1(r)}e.length=0},ZC=()=>{r4(t4),r4(Nq),(HC=t4.length>0)&&pn.raf(ZC)},u_e=e=>o_e().then(e),c_e=l_e(Nq,!0);/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.4.3
 */const Dq="calcite-mode-auto",Fq="calcite-mode-dark",d_e="calcite-mode-light",yRe={autoMode:Dq,darkMode:Fq,lightMode:d_e,rtl:"calcite--rtl",calciteAnimate:"calcite-animate",calciteAnimateIn:"calcite-animate__in",calciteAnimateInUp:"calcite-animate__in-up",calciteAnimateInDown:"calcite-animate__in-down",calciteAnimateInRight:"calcite-animate__in-right",calciteAnimateInLeft:"calcite-animate__in-left",calciteAnimateInScale:"calcite-animate__in-scale"};/*!
* tabbable 6.1.2
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var jq=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],ox=jq.join(","),Vq=typeof Element>"u",mp=Vq?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,ax=!Vq&&Element.prototype.getRootNode?function(e){var t;return e==null||(t=e.getRootNode)===null||t===void 0?void 0:t.call(e)}:function(e){return e==null?void 0:e.ownerDocument},lx=function e(t,r){var n;r===void 0&&(r=!0);var i=t==null||(n=t.getAttribute)===null||n===void 0?void 0:n.call(t,"inert"),s=i===""||i==="true",o=s||r&&t&&e(t.parentNode);return o},h_e=function(t){var r,n=t==null||(r=t.getAttribute)===null||r===void 0?void 0:r.call(t,"contenteditable");return n===""||n==="true"},zq=function(t,r,n){if(lx(t))return[];var i=Array.prototype.slice.apply(t.querySelectorAll(ox));return r&&mp.call(t,ox)&&i.unshift(t),i=i.filter(n),i},Uq=function e(t,r,n){for(var i=[],s=Array.from(t);s.length;){var o=s.shift();if(!lx(o,!1))if(o.tagName==="SLOT"){var a=o.assignedElements(),l=a.length?a:o.children,c=e(l,!0,n);n.flatten?i.push.apply(i,c):i.push({scopeParent:o,candidates:c})}else{var h=mp.call(o,ox);h&&n.filter(o)&&(r||!t.includes(o))&&i.push(o);var f=o.shadowRoot||typeof n.getShadowRoot=="function"&&n.getShadowRoot(o),m=!lx(f,!1)&&(!n.shadowRootFilter||n.shadowRootFilter(o));if(f&&m){var y=e(f===!0?o.children:f.children,!0,n);n.flatten?i.push.apply(i,y):i.push({scopeParent:o,candidates:y})}else s.unshift.apply(s,o.children)}}return i},Gq=function(t,r){return t.tabIndex<0&&(r||/^(AUDIO|VIDEO|DETAILS)$/.test(t.tagName)||h_e(t))&&isNaN(parseInt(t.getAttribute("tabindex"),10))?0:t.tabIndex},p_e=function(t,r){return t.tabIndex===r.tabIndex?t.documentOrder-r.documentOrder:t.tabIndex-r.tabIndex},Bq=function(t){return t.tagName==="INPUT"},f_e=function(t){return Bq(t)&&t.type==="hidden"},m_e=function(t){var r=t.tagName==="DETAILS"&&Array.prototype.slice.apply(t.children).some(function(n){return n.tagName==="SUMMARY"});return r},y_e=function(t,r){for(var n=0;n<t.length;n++)if(t[n].checked&&t[n].form===r)return t[n]},g_e=function(t){if(!t.name)return!0;var r=t.form||ax(t),n=function(a){return r.querySelectorAll('input[type="radio"][name="'+a+'"]')},i;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")i=n(window.CSS.escape(t.name));else try{i=n(t.name)}catch(o){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",o.message),!1}var s=y_e(i,t.form);return!s||s===t},v_e=function(t){return Bq(t)&&t.type==="radio"},w_e=function(t){return v_e(t)&&!g_e(t)},__e=function(t){var r,n=t&&ax(t),i=(r=n)===null||r===void 0?void 0:r.host,s=!1;if(n&&n!==t){var o,a,l;for(s=!!((o=i)!==null&&o!==void 0&&(a=o.ownerDocument)!==null&&a!==void 0&&a.contains(i)||t!=null&&(l=t.ownerDocument)!==null&&l!==void 0&&l.contains(t));!s&&i;){var c,h,f;n=ax(i),i=(c=n)===null||c===void 0?void 0:c.host,s=!!((h=i)!==null&&h!==void 0&&(f=h.ownerDocument)!==null&&f!==void 0&&f.contains(i))}}return s},n4=function(t){var r=t.getBoundingClientRect(),n=r.width,i=r.height;return n===0&&i===0},b_e=function(t,r){var n=r.displayCheck,i=r.getShadowRoot;if(getComputedStyle(t).visibility==="hidden")return!0;var s=mp.call(t,"details>summary:first-of-type"),o=s?t.parentElement:t;if(mp.call(o,"details:not([open]) *"))return!0;if(!n||n==="full"||n==="legacy-full"){if(typeof i=="function"){for(var a=t;t;){var l=t.parentElement,c=ax(t);if(l&&!l.shadowRoot&&i(l)===!0)return n4(t);t.assignedSlot?t=t.assignedSlot:!l&&c!==t.ownerDocument?t=c.host:t=l}t=a}if(__e(t))return!t.getClientRects().length;if(n!=="legacy-full")return!0}else if(n==="non-zero-area")return n4(t);return!1},S_e=function(t){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(t.tagName))for(var r=t.parentElement;r;){if(r.tagName==="FIELDSET"&&r.disabled){for(var n=0;n<r.children.length;n++){var i=r.children.item(n);if(i.tagName==="LEGEND")return mp.call(r,"fieldset[disabled] *")?!0:!i.contains(t)}return!0}r=r.parentElement}return!1},ux=function(t,r){return!(r.disabled||lx(r)||f_e(r)||b_e(r,t)||m_e(r)||S_e(r))},JC=function(t,r){return!(w_e(r)||Gq(r)<0||!ux(t,r))},x_e=function(t){var r=parseInt(t.getAttribute("tabindex"),10);return!!(isNaN(r)||r>=0)},$_e=function e(t){var r=[],n=[];return t.forEach(function(i,s){var o=!!i.scopeParent,a=o?i.scopeParent:i,l=Gq(a,o),c=o?e(i.candidates):a;l===0?o?r.push.apply(r,c):r.push(a):n.push({documentOrder:s,tabIndex:l,item:i,isScope:o,content:c})}),n.sort(p_e).reduce(function(i,s){return s.isScope?i.push.apply(i,s.content):i.push(s.content),i},[]).concat(r)},T_e=function(t,r){r=r||{};var n;return r.getShadowRoot?n=Uq([t],r.includeContainer,{filter:JC.bind(null,r),flatten:!1,getShadowRoot:r.getShadowRoot,shadowRootFilter:x_e}):n=zq(t,r.includeContainer,JC.bind(null,r)),$_e(n)},gRe=function(t,r){r=r||{};var n;return r.getShadowRoot?n=Uq([t],r.includeContainer,{filter:ux.bind(null,r),flatten:!0,getShadowRoot:r.getShadowRoot}):n=zq(t,r.includeContainer,ux.bind(null,r)),n},vRe=function(t,r){if(r=r||{},!t)throw new Error("No node provided");return mp.call(t,ox)===!1?!1:JC(r,t)},E_e=jq.concat("iframe").join(","),wRe=function(t,r){if(r=r||{},!t)throw new Error("No node provided");return mp.call(t,E_e)===!1?!1:ux(r,t)};const M_e={getShadowRoot:!0};function _Re(e){const t="dir",r=`[${t}]`,n=I_e(e,r);return n?n.getAttribute(t):"ltr"}function g3(e){return e.getRootNode()}function bRe(e){const t=g3(e);return"host"in t?t:null}function qq(e){return e.host||null}function SRe(e,{selector:t,id:r}){function n(i){if(!i)return null;i.assignedSlot&&(i=i.assignedSlot);const s=g3(i),o=r?"getElementById"in s?s.getElementById(r):null:t?s.querySelector(t):null,a=qq(s);return o||(a?n(a):null)}return n(e)}function I_e(e,t){function r(n){return n?n.closest(t)||r(qq(g3(n))):null}return r(e)}function C_e(e,t){return Wq(e,t)}function Wq(e,t){if(!e)return;const r=t(e);if(r!==void 0)return r;const{parentNode:n}=e;return Wq(n instanceof ShadowRoot?n.host:n,t)}function xRe(e,t){return!!C_e(t,r=>r===e?!0:void 0)}function k_e(e){return typeof(e==null?void 0:e.setFocus)=="function"}async function $Re(e){if(e)return k_e(e)?e.setFocus():e.focus()}function TRe(e){e&&(T_e(e,M_e)[0]||e).focus()}const Ov=":not([slot])";function ERe(e,t,r){t&&!Array.isArray(t)&&typeof t!="string"&&(r=t,t=null);const n=t?Array.isArray(t)?t.map(i=>`[slot="${i}"]`).join(","):`[slot="${t}"]`:Ov;return r!=null&&r.all?P_e(e,n,r):O_e(e,n,r)}function Hq(e,t){return e?Array.from(e.children||[]).filter(r=>r==null?void 0:r.matches(t)):[]}function P_e(e,t,r){let n=t===Ov?Hq(e,Ov):Array.from(e.querySelectorAll(t));n=r&&r.direct===!1?n:n.filter(s=>s.parentElement===e),n=r!=null&&r.matches?n.filter(s=>s==null?void 0:s.matches(r.matches)):n;const i=r==null?void 0:r.selector;return i?n.map(s=>Array.from(s.querySelectorAll(i))).reduce((s,o)=>[...s,...o],[]).filter(s=>!!s):n}function O_e(e,t,r){let n=t===Ov?Hq(e,Ov)[0]||null:e.querySelector(t);n=r&&r.direct===!1||(n==null?void 0:n.parentElement)===e?n:null,n=r!=null&&r.matches?n!=null&&n.matches(r.matches)?n:null:n;const i=r==null?void 0:r.selector;return i?n==null?void 0:n.querySelector(i):n}function MRe(e,t,r){if(typeof t=="string"&&t!=="")return t;if(t==="")return e[r]}function IRe(e){return(!!e).toString()}function CRe(e){return!!R_e(e).length}function R_e(e){return e.target.assignedElements({flatten:!0})}function kRe(e){return!!(e.isPrimary&&e.button===0)}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.4.3
 */function i4(){const{classList:e}=document.body,t=window.matchMedia("(prefers-color-scheme: dark)").matches,r=()=>e.contains(Fq)||e.contains(Dq)&&t?"dark":"light",n=o=>document.body.dispatchEvent(new CustomEvent("calciteModeChange",{bubbles:!0,detail:{mode:o}})),i=o=>{s!==o&&n(o),s=o};let s=r();n(s),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",o=>i(o.matches?"dark":"light")),new MutationObserver(()=>i(r())).observe(document.body,{attributes:!0,attributeFilter:["class"]})}function A_e(){typeof window<"u"&&typeof location<"u"&&typeof document<"u"&&window.location===location&&window.document===document&&(document.readyState==="interactive"?i4():document.addEventListener("DOMContentLoaded",()=>i4(),{once:!0}))}const L_e=A_e;L_e();let Zq;function N_e(){try{bwe(".")}catch{Swe(Ms(ct(Zq)))}}function PRe(e){var r;const t=[];for(const n of Object.keys(e))customElements.get(`calcite-${n}`)||t.push((r=e[n])==null?void 0:r.call(e));return Promise.all(t)}Zq="components/assets";const Jq=Symbol("widget"),D_e=Symbol("widget-test-data"),F_e=[],j_e={},cx=new WeakMap;function Qq(e,t){let r=t.children;if(r&&r.length)for(let i=0;i<r.length;++i)r[i]=Qq(e,r[i]);else r=F_e;const n=t.vnodeSelector;if(v3(n)){const i=t.properties||j_e,s=i.key||n;return{vnodeSelector:"div",properties:{key:s,afterCreate:V_e,afterUpdate:z_e,afterRemoved:Yq,parentWidget:e,widgetConstructor:n,widgetProperties:{...i,key:s,children:r}},children:void 0,text:void 0,domNode:null}}return t}function V_e(e,t,r,{parentWidget:n,widgetConstructor:i,widgetProperties:s}){var a;const o=new i(s);o.container=e,cx.set(e,o),(a=o.afterCreate)==null||a.call(o,o,e),n._internalHandles.add(Hl(()=>Yq(e)))}function z_e(e,t,r,{widgetProperties:n}){var s;const i=cx.get(e);i&&(i.set(n),(s=i.afterUpdate)==null||s.call(i,i,e))}function Yq(e){var r;const t=cx.get(e);t&&((r=t.afterRemoved)==null||r.call(t,t,e),t.destroy(),cx.delete(e))}function v3(e){return typeof e=="function"&&e[Jq]}const s4=new Set;function U_e(e){s4.add(e),e.finally(()=>s4.delete(e))}var Kq;const G_e="esri.widgets.Widget";let B_e=0;const q_e={widgetIcon:"esri-icon-checkbox-unchecked"};function Xq(e,t){for(const r in t)e[r]!=null&&(typeof e[r]=="object"&&typeof t[r]=="object"?Xq(e[r],t==null?void 0:t[r]):e[r]=t[r]);return e}const W_e=_we({postProcessProjectionOptions(e){const t=e.eventHandlerInterceptor,r=/capture$/i;e.eventHandlerInterceptor=(n,i,s,o)=>{const a=t==null?void 0:t(n,i,s,o),l=r.test(n);if(!((n=n.replace(r,"")).toLowerCase()in s)||l){const c=n[2].toLowerCase()+n.slice(3),h=y=>a==null?void 0:a.call(s,y);s.addEventListener(c,h,l);const f=()=>s.removeEventListener(c,h,l),m=o.afterRemoved;o.afterRemoved=y=>{m==null||m(y),f()}}return a}},handleInterceptedEvent(e,t,r,n){const{eventPhase:i,type:s}=n,o=i===Event.CAPTURING_PHASE;let a=`on${s}${o?"capture":""}`;const l=t.properties;(l&&a in l||(a=`on${s[0].toUpperCase()}${s.slice(1)}${o?"Capture":""}`,l&&a in l))&&(qG(),e.scheduleRender(),l[a].call(l.bind||r,n))}});let IT=!1,Ar=class extends MO(Ua.EventedAccessor){constructor(t,r){super(t,r),this._attached=!1,this._internalHandles=new ou,this._projector=W_e,this._readyForTrueRender=!1,this.iconClass=q_e.widgetIcon,this.icon=null,this.key=this,this._loadLocale=PV(async()=>{if(this._messageBundleProps&&this._messageBundleProps.length){const o=await Mo(this._messageBundleProps.map(async({bundlePath:a,propertyName:l})=>{if(this.destroyed)return;let c=await u2(a);this.uiStrings&&Object.keys(this.uiStrings)&&(c=Xq(F(c),this.uiStrings)),this[l]=c}));if(this.destroyed)return;for(const a of o)a.error&&Z.getLogger(this).error("widget-intl:locale-error",this.declaredClass,a.error)}await this.loadLocale()}),N_e();const n="esri-widget-uid-"+Sq(),i=this.render.bind(this);this._trackingTarget=new e2(()=>this.scheduleRender());const s=()=>{var h;if(!this._readyForTrueRender||this.destroyed)return null;const o=i();let{properties:a}=o;a||(o.properties=a={});const{key:l}=a;l||(a.key=n),this.visible?a.styles||(a.styles={}):(a.class="",a.styles={display:"none"}),a.styles.display||(a.styles.display="");let c=0;return(h=o.children)==null||h.forEach(f=>{if(v3(f.vnodeSelector))return;let{properties:m}=f;m||(f.properties=m={}),m.key||(m.key=`${this.id}--${c++}`)}),Qq(this,o)};this.render=()=>{if(IT)return s();let o=aye(this)??null;if(o)return o;this._trackingTarget.clear(),IT=!0;try{o=Zl(this._trackingTarget,s)}catch(a){throw console.error(a),a}finally{IT=!1}return o&&lye(this,o),o},this.addResolvingPromise(this._resourcesFetch=this.beforeFirstRender().then(()=>{this._readyForTrueRender=!0,this._postInitialize()})),U_e(this._resourcesFetch)}normalizeCtorArgs(t,r){const n={...t};return r&&(n.container=r),n}postInitialize(){}beforeFirstRender(){return Promise.all([this.loadDependencies(),this._loadLocale()]).then(()=>{}).catch(YL)}async loadDependencies(){}async loadLocale(){}destroy(){this.destroyed||(Gt(this._trackingTarget),Gt(this.viewModel),this._detach(this.container),this._set("container",null),this._internalHandles.destroy(),this._emitter.clear(),this.render=()=>null,this._projector=null,lT(this))}set container(t){this._get("container")||this._set("container",t)}castContainer(t){return QR(t)}get domNode(){return this.container}set domNode(t){this.container=t}get id(){return this._get("id")||this.get("container.id")||Date.now().toString(16)+"-widget-"+B_e++}set id(t){t&&this._set("id",t)}get label(){return this.declaredClass.split(".").pop()}set label(t){this._overrideIfSome("label",t)}get renderable(){return this._resourcesFetch}get visible(){return this._get("visible")}set visible(t){this._set("visible",t)}get[(Kq=Jq,D_e)](){return{projector:this._projector}}render(){throw new Error("not implemented")}scheduleRender(){this.destroyed||(lT(this),this._projector.scheduleRender())}classes(...t){return HG.apply(this,t)}renderNow(){lT(this),this._projector.renderNow()}_postInitialize(){var r;if(this.destroyed)return;this.scheduleRender(),(r=this._delegatedEventNames)!=null&&r.length&&this._internalHandles.add(Ee(()=>this.viewModel,(n,i)=>{i&&this._internalHandles.remove("delegated-events"),n&&Yx(n)&&this._internalHandles.add(this._delegatedEventNames.map(s=>Kx(n,s,o=>{this.emit(s,o)})),"delegated-events")},Ir)),this.postInitialize();const t=async()=>{await this._loadLocale().catch(YL),this.scheduleRender()};this._internalHandles.add([l2(t),Ee(()=>this.uiStrings,t),Xl(()=>this.container,n=>{this.destroyed||this._attach(n)},{initial:!0,once:!0})])}_attach(t){t&&(this._projector.merge(t,this.render),this._attached=!0)}_detach(t){var r;this._attached&&(this._projector.detach(this.render),this._attached=!1),(r=t==null?void 0:t.parentNode)==null||r.removeChild(t)}};Ar[Kq]=!0,u([d()],Ar.prototype,"_readyForTrueRender",void 0),u([d({value:null})],Ar.prototype,"container",null),u([Pt("container")],Ar.prototype,"castContainer",null),u([d()],Ar.prototype,"iconClass",void 0),u([d()],Ar.prototype,"icon",void 0),u([d()],Ar.prototype,"id",null),u([d()],Ar.prototype,"label",null),u([d()],Ar.prototype,"renderable",null),u([d()],Ar.prototype,"uiStrings",void 0),u([d()],Ar.prototype,"viewModel",void 0),u([d({value:!0})],Ar.prototype,"visible",null),u([d()],Ar.prototype,"key",void 0),u([d()],Ar.prototype,"children",void 0),u([d()],Ar.prototype,"afterCreate",void 0),u([d()],Ar.prototype,"afterUpdate",void 0),u([d()],Ar.prototype,"afterRemoved",void 0),Ar=u([E(G_e)],Ar);const Wa=Ar;function o4(e,t){return e&&"copyright"in e&&(!t||typeof e.originOf=="function"&&e.originOf("copyright")==="user")}function H_e(e,t){return e.length!==t.length||e.some((r,n)=>r.text!==t[n].text)}function Rw(e,t,r){!r||!t||e.find(n=>n.layerView===t&&n.text===r)||e.push({text:r,layerView:t})}function Z_e(e){return e.type==="bing-maps"}const Iu=[];let of=class extends JS{constructor(t){super(t),this._clear=()=>{this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.handles.remove("suspension"),this.notifyChange("state")},this._pendingAttributions=new Set,this._fetchedAttributionData=new Map,this.items=new Le,this.view=null,this._allLayerViewsChange=r=>{this.handles.remove("suspension");const n=this.get("view.allLayerViews");n&&this.handles.add(n.map(i=>Ee(()=>{var s;return[i.suspended,(s=i.layer)==null?void 0:s.attributionVisible]},()=>this._updateAttributionItems())),"suspension"),r&&r.removed&&r.removed.forEach(i=>{this._pendingAttributions.delete(i),this._fetchedAttributionData.delete(i)}),this._updateAttributionItems()},this.handles.add([Rm(()=>{var r;return(r=this.view)==null?void 0:r.allLayerViews},"change",r=>this._allLayerViewsChange(r),{onListenerAdd:()=>this._allLayerViewsChange(),onListenerRemove:this._clear}),Xl(()=>{var r;return((r=this.view)==null?void 0:r.stationary)===!0},()=>this._updateAttributionItems())])}destroy(){this.view=null,this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.items.removeAll()}get state(){return this.get("view.ready")?this._pendingAttributions.size>0?"loading":"ready":"disabled"}_updateAttributionItems(){const t=this.view,r=t==null?void 0:t.allLayerViews;Iu.length=0,t&&r?(r.forEach(n=>{var o;if(n.suspended||!((o=n.layer)!=null&&o.attributionVisible))return;const i=n.layer;if(o4(i,"user"))return void Rw(Iu,n,i.copyright);if(i.hasAttributionData){if(this._fetchedAttributionData.has(n)){const a=this._fetchedAttributionData.get(n);return void(a?Rw(Iu,n,this._getDynamicAttribution(a,t,i)):o4(i)&&Rw(Iu,n,i.copyright))}return void this._fetchAttributionData(n)}const s=i.get("portalItem.accessInformation");Rw(Iu,n,s||i.copyright)}),H_e(this.items,Iu)&&(this.items.removeAll(),this.items.addMany(Iu)),Iu.length=0,this.notifyChange("state")):this._clear()}async _fetchAttributionData(t){if(this._pendingAttributions.has(t))return;this._pendingAttributions.add(t);const r=await kO(t.layer.fetchAttributionData());if(this._pendingAttributions.has(t)){const n=r.ok?this._createContributionIndex(r.value,Z_e(t.layer)):null;this._pendingAttributions.delete(t),this._fetchedAttributionData.set(t,n)}this._updateAttributionItems()}_createContributionIndex(t,r){const n=t.contributors,i={};if(!n)return i;for(let s=0;s<n.length;s++){const o=n[s],a=o.coverageAreas;if(!a)return;for(const l of a){const c=l.bbox,h=l.zoomMin-(r&&l.zoomMin?1:0),f=l.zoomMax-(r&&l.zoomMax?1:0),m=new at({xmin:c[1],ymin:c[0],xmax:c[3],ymax:c[2],spatialReference:Ce.WGS84}),y={extent:Uc(m),attribution:o.attribution||"",score:l.score!=null?l.score:100,id:s};for(let g=h;g<=f;g++)i[g]??(i[g]=[]),i[g].push(y)}}return i.maxKey=Math.max.apply(null,Object.keys(i)),i}_getDynamicAttribution(t,r,n){var h;const{extent:i,scale:s}=r;let o=((h=n.tileInfo)==null?void 0:h.scaleToZoom(s))??0;if(o=Math.min(t.maxKey??0,Math.round(o)),!i||o==null||o<=-1)return"";const a=t[o],l=Kv(i.center.clone().normalize(),r.spatialReference),c=new Set;return a?a.filter(f=>{const m=f.id,y=!c.has(m)&&l&&f.extent&&a2(f.extent,l);return y&&c.add(m),y}).sort((f,m)=>m.score-f.score||f.objectId-m.objectId).map(f=>f.attribution).join(", "):""}};u([d({readOnly:!0,type:Le})],of.prototype,"items",void 0),u([d({readOnly:!0})],of.prototype,"state",null),u([d()],of.prototype,"view",void 0),of=u([E("esri.widgets.Attribution.AttributionViewModel")],of);const eW=of;function vi(){return function(e,t){if(!e[t])throw new TypeError(`Cannot auto bind undefined function '${String(t)}'`);return{value:Q_e(e[t])}}}function J_e(e){const t=e==null?void 0:e.type;return e instanceof KeyboardEvent||t==="keyup"||t==="keydown"||t==="keypress"}function Q_e(e){return function(t,...r){J_e(t)?QG(t.key)&&(t.preventDefault(),t.stopPropagation(),t.target.click()):e.call(this,t,...r)}}function Vs(e){return(t,r)=>{t.hasOwnProperty("_messageBundleProps")||(t._messageBundleProps=t._messageBundleProps?t._messageBundleProps.slice():[]),t._messageBundleProps.push({bundlePath:e,propertyName:r})}}var Y_e=function(e){return{vnodeSelector:"",properties:void 0,children:void 0,text:e.toString(),domNode:null}},tW=function(e,t){for(var r=0,n=e.length;r<n;r++){var i=e[r];Array.isArray(i)?tW(i,t):i!=null&&i!==!1&&(i.hasOwnProperty("vnodeSelector")||(i=Y_e(i)),t.push(i))}},K_e=function(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];if(r.length===1&&typeof r[0]=="string")return{vnodeSelector:e,properties:t||void 0,children:void 0,text:r[0],domNode:null};var i=[];return tW(r,i),{vnodeSelector:e,properties:t||void 0,children:i,text:void 0,domNode:null}};function D(e,t,...r){return typeof e!="function"||v3(e)?K_e(e,t,...r):e(t,...r)}const Dp="esri-attribution",Cu={base:`${Dp} esri-widget`,poweredBy:`${Dp}__powered-by`,sources:`${Dp}__sources`,open:`${Dp}--open`,sourcesOpen:`${Dp}__sources--open`,link:`${Dp}__link`,widgetIcon:"esri-icon-description",interactive:"esri-interactive"};let Cn=class extends Wa{constructor(t,r){super(t,r),this._isOpen=!1,this._attributionTextOverflowed=!1,this._prevSourceNodeHeight=0,this._resizeObserver=new ResizeObserver(n=>n.forEach(({target:i})=>this._checkSourceTextOverflow(i))),this.iconClass=Cu.widgetIcon,this.icon=null,this.itemDelimiter=" | ",this.messages=null,this.viewModel=new eW}initialize(){this.addHandles(Rm(()=>{var t;return(t=this.viewModel)==null?void 0:t.items},"change",()=>this.scheduleRender()))}destroy(){var t;(t=this._resizeObserver)==null||t.disconnect()}get _isInteractive(){return this._isOpen||this._attributionTextOverflowed}get attributionText(){return this.viewModel.items.reduce((t,r)=>(t.includes(r.text)||t.push(r.text),t),[]).join(this.itemDelimiter)}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}render(){const t={[Cu.open]:this._isOpen};return D("div",{bind:this,class:this.classes(Cu.base,t),dir:"ltr",onclick:this._toggleState,onkeydown:this._toggleState},this.renderSourcesNode(),this.renderPoweredBy())}renderPoweredBy(){return D("div",{class:Cu.poweredBy},"Powered by"," ",D("a",{class:Cu.link,href:"http://www.esri.com/",target:"_blank",rel:"noreferrer"},"Esri"))}renderSourcesNode(){const t=this._isOpen,r=this._isInteractive,n=r?"0":"",{attributionText:i}=this,s={[Cu.sourcesOpen]:t,[Cu.interactive]:r};return D("div",{afterCreate:this._afterSourcesNodeCreate,bind:this,class:this.classes(Cu.sources,s),innerHTML:i,tabindex:n})}_afterSourcesNodeCreate(t){this._prevSourceNodeHeight=t.clientWidth,this._resizeObserver.observe(t)}_checkSourceTextOverflow(t){let r=!1;const{clientHeight:n,clientWidth:i,scrollWidth:s}=t,o=s>i,a=this._attributionTextOverflowed!==o;if(this._attributionTextOverflowed=o,a&&(r=!0),this._isOpen){const l=n<this._prevSourceNodeHeight;this._prevSourceNodeHeight=n,l&&(this._isOpen=!1,r=!0)}r&&this.scheduleRender()}_toggleState(){this._isInteractive&&(this._isOpen=!this._isOpen)}};u([d()],Cn.prototype,"_isOpen",void 0),u([d()],Cn.prototype,"_isInteractive",null),u([d()],Cn.prototype,"_attributionTextOverflowed",void 0),u([d()],Cn.prototype,"_prevSourceNodeHeight",void 0),u([d({readOnly:!0,dependsOn:["viewModel.items.length","itemDelimiter"]})],Cn.prototype,"attributionText",null),u([d()],Cn.prototype,"iconClass",void 0),u([d()],Cn.prototype,"icon",void 0),u([d()],Cn.prototype,"itemDelimiter",void 0),u([d()],Cn.prototype,"label",null),u([d(),Vs("esri/widgets/Attribution/t9n/Attribution")],Cn.prototype,"messages",void 0),u([d()],Cn.prototype,"view",null),u([d({type:eW})],Cn.prototype,"viewModel",void 0),u([vi()],Cn.prototype,"_toggleState",null),Cn=u([E("esri.widgets.Attribution")],Cn);const X_e=Cn,A2=e=>{let t=class extends e{constructor(...r){super(...r),this.goToOverride=null,this.view=null}callGoTo(r){const{view:n}=this;return Bx(n),this.goToOverride?this.goToOverride(n,r):n.goTo(r.target,r.options)}};return u([d()],t.prototype,"goToOverride",void 0),u([d()],t.prototype,"view",void 0),t=u([E("esri.widgets.support.GoTo")],t),t},ebe="esri.widgets.CompassViewModel";let nh=class extends A2($e){constructor(t){super(t),this._handles=new ou,this.orientation={x:0,y:0,z:0},this.view=null,this._updateForCamera=this._updateForCamera.bind(this),this._updateForRotation=this._updateForRotation.bind(this),this._updateRotationWatcher=this._updateRotationWatcher.bind(this)}initialize(){this._handles.add(Ee(()=>this.view,this._updateRotationWatcher,Ir))}destroy(){or(this._handles),this.view=null}get canShowNorth(){const t=this.get("view.spatialReference");return!(!t||!t.isWebMercator&&!t.isGeographic)}get state(){return this.get("view.ready")?this.canShowNorth?"compass":"rotation":"disabled"}reset(){var r;if(!this.get("view.ready"))return;const t={};((r=this.view)==null?void 0:r.type)==="2d"?t.rotation=0:t.heading=0,this.callGoTo({target:t})}_updateForRotation(t){t!=null&&(this.orientation={z:t})}_updateForCamera(t){if(!t)return;const r=-t.heading;this.orientation={x:0,y:0,z:r}}_updateRotationWatcher(t){this._handles.removeAll(),t&&this._handles.add(t.type==="2d"?Ee(()=>t==null?void 0:t.rotation,this._updateForRotation,Ir):Ee(()=>t==null?void 0:t.camera,this._updateForCamera,Ir))}};u([d({readOnly:!0})],nh.prototype,"canShowNorth",null),u([d()],nh.prototype,"orientation",void 0),u([d({readOnly:!0})],nh.prototype,"state",null),u([d()],nh.prototype,"view",void 0),nh=u([E(ebe)],nh);const rW=nh,ku={base:"esri-compass esri-widget--button esri-widget",text:"esri-icon-font-fallback-text",icon:"esri-compass__icon",rotationIcon:"esri-icon-dial",northIcon:"esri-icon-compass",widgetIcon:"esri-icon-locate-circled",interactive:"esri-interactive",disabled:"esri-disabled"};let uo=class extends Wa{constructor(t,r){super(t,r),this.iconClass=ku.widgetIcon,this.icon=null,this.messages=null,this.viewModel=new rW}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(t){this.viewModel.goToOverride=t}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}reset(){return this.viewModel.reset()}render(){const{orientation:t,state:r}=this.viewModel,n=r==="disabled",i=(r==="rotation"?"rotation":"compass")=="compass",s=n?-1:0,o={[ku.disabled]:n,[ku.interactive]:!n},a={[ku.northIcon]:i,[ku.rotationIcon]:!i},{messages:l}=this;return D("div",{bind:this,class:this.classes(ku.base,o),onclick:this._reset,onkeydown:this._reset,role:"button",tabIndex:s,"aria-label":l.reset,title:l.reset},D("span",{"aria-hidden":"true",class:this.classes(ku.icon,a),styles:this._toRotationTransform(t)}),D("span",{class:ku.text},l.reset))}_reset(){this.viewModel.reset()}_toRotationTransform(t){return{transform:`rotateZ(${t.z}deg)`}}};u([d()],uo.prototype,"goToOverride",null),u([d()],uo.prototype,"iconClass",void 0),u([d()],uo.prototype,"icon",void 0),u([d()],uo.prototype,"label",null),u([d(),Vs("esri/widgets/Compass/t9n/Compass")],uo.prototype,"messages",void 0),u([d()],uo.prototype,"view",null),u([d({type:rW})],uo.prototype,"viewModel",void 0),u([vi()],uo.prototype,"_reset",null),uo=u([E("esri.widgets.Compass")],uo);const tbe=uo,Fp="esri-navigation-toggle",us={base:`${Fp} esri-widget`,button:`${Fp}__button esri-widget--button`,activeButton:`${Fp}__button--active`,panButton:`${Fp}__button--pan`,rotateButton:`${Fp}__button--rotate`,isLayoutHorizontal:`${Fp}--horizontal`,rotationIcon:"esri-icon-rotate",panIcon:"esri-icon-pan",widgetIcon:"esri-icon-pan2",disabled:"esri-disabled"};let af=class extends $e{constructor(t){super(t),this.navigationMode="pan",this.view=null}initialize(){this.own(Xl(()=>{var t;return(t=this.view)==null?void 0:t.inputManager},()=>this._setNavigationMode()))}destroy(){this.view=null}get state(){var t;return this.get("view.ready")&&((t=this.view)==null?void 0:t.type)==="3d"?"ready":"disabled"}toggle(){this.state!=="disabled"&&(this.navigationMode=this.navigationMode!=="pan"?"pan":"rotate",this._setNavigationMode())}_setNavigationMode(){this.get("view.inputManager").primaryDragAction=this.navigationMode==="pan"?"pan":"rotate"}};u([d({readOnly:!0})],af.prototype,"state",null),u([d()],af.prototype,"navigationMode",void 0),u([d()],af.prototype,"view",void 0),af=u([E("esri.widgets.NavigationToggleViewModel")],af);const nW=af;let co=class extends Wa{constructor(t,r){super(t,r),this.iconClass=us.widgetIcon,this.icon=null,this.messages=null,this.viewModel=new nW}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}set layout(t){t!=="horizontal"&&(t="vertical"),this._set("layout",t)}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}toggle(){return this.viewModel.toggle()}render(){const t=this.get("viewModel.state")==="disabled",r=this.get("viewModel.navigationMode")==="pan",n={[us.disabled]:t,[us.isLayoutHorizontal]:this.layout==="horizontal"},i={[us.activeButton]:r},s={[us.activeButton]:!r},o=t?-1:0,a=this.messages.toggle;return D("div",{bind:this,class:this.classes(us.base,n),onclick:this._toggle,onkeydown:this._toggle,tabIndex:o,"aria-label":a,title:a},D("div",{class:this.classes(us.button,us.panButton,i)},D("span",{class:us.panIcon})),D("div",{class:this.classes(us.button,us.rotateButton,s)},D("span",{class:us.rotationIcon})))}_toggle(){this.toggle()}};u([d()],co.prototype,"iconClass",void 0),u([d()],co.prototype,"icon",void 0),u([d()],co.prototype,"label",null),u([d({value:"vertical"})],co.prototype,"layout",null),u([d(),Vs("esri/widgets/NavigationToggle/t9n/NavigationToggle")],co.prototype,"messages",void 0),u([d()],co.prototype,"view",null),u([d({type:nW})],co.prototype,"viewModel",void 0),u([vi()],co.prototype,"_toggle",null),co=u([E("esri.widgets.NavigationToggle")],co);const rbe=co,By={button:"esri-widget--button esri-widget",disabled:"esri-disabled",interactive:"esri-interactive",iconText:"esri-icon-font-fallback-text",icon:"esri-icon"};let ml=class extends Wa{constructor(){super(...arguments),this.enabled=!0,this.iconClass=null,this.icon=null,this.title=""}render(){const t=this.enabled?0:-1,r={[By.disabled]:!this.enabled,[By.interactive]:this.enabled};return D("div",{bind:this,class:this.classes(By.button,r),onclick:this._triggerAction,onkeydown:this._triggerAction,role:"button",tabIndex:t,title:this.title},D("span",{"aria-hidden":"true",role:"presentation",class:this.classes(By.icon,this.iconClass??"")}),D("span",{class:By.iconText},this.title))}_triggerAction(){this.action.call(this)}};u([d()],ml.prototype,"action",void 0),u([d()],ml.prototype,"enabled",void 0),u([d()],ml.prototype,"iconClass",void 0),u([d()],ml.prototype,"icon",void 0),u([d()],ml.prototype,"title",void 0),u([vi()],ml.prototype,"_triggerAction",null),ml=u([E("esri.widgets.IconButton")],ml);const a4=ml;let lf=class extends $e{get canZoomIn(){if(!this.get("view.ready"))return!1;const t=this.get("view.animation.target.scale")||this.get("view.scale"),r=this.get("view.constraints.effectiveMaxScale");return r===0||t>r}get canZoomOut(){if(!this.get("view.ready"))return!1;const t=this.get("view.animation.target.scale")||this.get("view.scale"),r=this.get("view.constraints.effectiveMinScale");return r===0||t<r}};u([d({readOnly:!0})],lf.prototype,"canZoomIn",null),u([d({readOnly:!0})],lf.prototype,"canZoomOut",null),u([d()],lf.prototype,"view",void 0),lf=u([E("esri.widgets.Zoom.ZoomConditions2D")],lf);const nbe=lf;let uf=class extends $e{get canZoomIn(){return!!this.view.ready}get canZoomOut(){return!!this.view.ready}};u([d({readOnly:!0})],uf.prototype,"canZoomIn",null),u([d({readOnly:!0})],uf.prototype,"canZoomOut",null),u([d()],uf.prototype,"view",void 0),uf=u([E("esri.widgets.Zoom.ZoomConditions3D")],uf);const ibe=uf;let Yu=class extends $e{constructor(t){super(t)}destroy(){this.view=null}get canZoomIn(){return this._zoomConditions!=null&&this._zoomConditions.canZoomIn}get canZoomOut(){var t;return this._zoomConditions!=null&&((t=this._zoomConditions)==null?void 0:t.canZoomOut)}get state(){var t;return(t=this.view)!=null&&t.ready?"ready":"disabled"}set view(t){t?t.type==="2d"?this._zoomConditions=new nbe({view:t}):t.type==="3d"&&(this._zoomConditions=new ibe({view:t})):this._zoomConditions=null,this._set("view",t)}zoomIn(){if(!this.canZoomIn)return;const t=this.view;t.type==="2d"?t.mapViewNavigation.zoomIn():mM(t.goTo({zoomFactor:2}))}zoomOut(){if(!this.canZoomOut)return;const t=this.view;t.type==="2d"?t.mapViewNavigation.zoomOut():mM(t.goTo({zoomFactor:.5}))}};u([d()],Yu.prototype,"_zoomConditions",void 0),u([d()],Yu.prototype,"canZoomIn",null),u([d()],Yu.prototype,"canZoomOut",null),u([d({readOnly:!0})],Yu.prototype,"state",null),u([d()],Yu.prototype,"view",null),Yu=u([E("esri.widgets.Zoom.ZoomViewModel")],Yu);const iW=Yu,qy={base:"esri-zoom esri-widget",horizontalLayout:"esri-zoom--horizontal",zoomInIcon:"esri-icon-plus",zoomOutIcon:"esri-icon-minus",widgetIcon:"esri-icon-zoom-in-magnifying-glass"};let Sa=class extends Wa{constructor(t,r){super(t,r),this.iconClass=qy.widgetIcon,this.icon=null,this.messages=null,this.viewModel=new iW}initialize(){this._zoomInButton=new a4({action:this.zoomIn.bind(this),iconClass:qy.zoomInIcon}),this._zoomOutButton=new a4({action:this.zoomOut.bind(this),iconClass:qy.zoomOutIcon})}destroy(){this._zoomInButton=Gt(this._zoomInButton),this._zoomOutButton=Gt(this._zoomOutButton)}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}set layout(t){t!=="horizontal"&&(t="vertical"),this._set("layout",t)}set view(t){this.viewModel.view=t}get view(){return this.viewModel.view}render(){const t=this.viewModel,r={[qy.horizontalLayout]:this.layout==="horizontal"},{canZoomIn:n,canZoomOut:i}=t;this._zoomInButton.enabled=n,this._zoomOutButton.enabled=i;const{zoomIn:s,zoomOut:o}=this.messages;return this._zoomInButton.title=s,this._zoomOutButton.title=o,D("div",{class:this.classes(qy.base,r)},this._zoomInButton.render(),this._zoomOutButton.render())}zoomIn(){return this.viewModel.zoomIn()}zoomOut(){return this.viewModel.zoomOut()}};u([d()],Sa.prototype,"iconClass",void 0),u([d()],Sa.prototype,"icon",void 0),u([d()],Sa.prototype,"label",null),u([d({value:"vertical"})],Sa.prototype,"layout",null),u([d(),Vs("esri/widgets/Zoom/t9n/Zoom")],Sa.prototype,"messages",void 0),u([d()],Sa.prototype,"view",null),u([d({type:iW})],Sa.prototype,"viewModel",void 0),Sa=u([E("esri.widgets.Zoom")],Sa);const sbe=Sa;function obe(e){return(e==null?void 0:e.view)!==void 0}let eb=class extends pwe{constructor(t){super(t),this._defaultPositionLookup={attribution:"manual",compass:"top-left","navigation-toggle":"top-left",zoom:"top-left"},this.components=[],this._updateViewAwareWidgets=r=>{this.components.forEach(n=>{const i=this._find(n),s=i==null?void 0:i.widget;obe(s)&&(s.view=r)})},this._componentsWatcher=(r,n)=>{this._removeComponents(n),this._addComponents(r),this._adjustPadding(r)}}initialize(){this.addHandles([Ee(()=>this.components,this._componentsWatcher,Ir),Ee(()=>this.view,this._updateViewAwareWidgets,Ir)])}_add(t,r,n,i,s){let o=t;if(typeof t=="string"&&this._defaultPositionLookup[t]){if(this._find(t))return;o=this._createComponent(t)}super._add(o,r,n,i,s)}_removeComponents(t){t.forEach(r=>{const n=this._find(r);n&&(this.remove(n),n.destroy())})}_adjustPadding(t){if(!t.includes("attribution")&&!this._isOverridden("padding")){const{top:r}=this.padding;this.padding=r}}_addComponents(t){this.constructed&&t.forEach(r=>this.add(this._createComponent(r),this._defaultPositionLookup[r]))}_createComponent(t){const r=this._createWidget(t);return new X_({id:t,node:r})}_createWidget(t){const{view:r}=this;switch(t){case"attribution":return new X_e({view:r});case"compass":return new tbe({view:r});case"navigation-toggle":return new rbe({view:r});case"zoom":return new sbe({view:r})}}};u([d()],eb.prototype,"components",void 0),eb=u([E("esri.views.ui.DefaultUI")],eb);const sW=eb;let tb=class extends sW{constructor(t){super(t),this.components=["attribution","zoom"]}};u([d()],tb.prototype,"components",void 0),tb=u([E("esri.views.ui.2d.DefaultUI2D")],tb);const oW=tb;var QC;let rb=QC=class extends Q{constructor(e){super(e),this.color=new We([0,0,0,1])}clone(){return new QC(F({color:this.color}))}};u([d({type:We,json:{write:!0}})],rb.prototype,"color",void 0),rb=QC=u([E("esri.webmap.background.ColorBackground")],rb);const abe=rb;let aW,lW,uW,cW,dW,hW;async function lbe(){const[,{GraphicsView2D:e,GraphicContainer:t,LabelManager:r,MapViewNavigation:n,MagnifierView2D:i,Stage:s}]=await Promise.all([ie(()=>import("./webglDeps-7925e2a7.js"),["assets/webglDeps-7925e2a7.js","assets/VertexArrayObject-5d791997.js","assets/Texture-475a6d11.js","assets/enums-b14466b3.js","assets/ProgramTemplate-1083e985.js","assets/programUtils-16bf542d.js","assets/NestedMap-1b5db22e.js"]),ie(()=>import("./mapViewDeps-7b425a72.js"),["assets/mapViewDeps-7b425a72.js","assets/ExpandedCIM-4e176af0.js","assets/BidiEngine-9a40f2f4.js","assets/GeometryUtils-984e8446.js","assets/enums-f1a6a48a.js","assets/utils-010a06e5.js","assets/GeometryUtils-d37b0eff.js","assets/color-2b7193c1.js","assets/enums-b14466b3.js","assets/VertexElementDescriptor-2925c6af.js","assets/definitions-e4cb28dd.js","assets/Rect-ea14f53a.js","assets/quantizationUtils-20b347c1.js","assets/floatRGBA-e7157f4d.js","assets/MagnifierPrograms-100cd9d1.js","assets/WGLContainer-bf682126.js","assets/VertexArrayObject-5d791997.js","assets/Texture-475a6d11.js","assets/ProgramTemplate-1083e985.js","assets/StyleDefinition-29c49b98.js","assets/config-1337d16e.js","assets/Container-f524f8d4.js","assets/earcut-e27332fd.js","assets/rasterizingUtils-b34e831f.js","assets/imageutils-5fd1bbcc.js","assets/Matcher-d97d175f.js","assets/visualVariablesUtils-a8c18281.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-216fb4d0.js","assets/devEnvironmentUtils-5002a058.js","assets/webStyleSymbolUtils-8f7de622.js","assets/CircularArray-ef508845.js","assets/testSVGPremultipliedAlpha-7944547e.js","assets/throttle-7bf02de9.js","assets/ComputedAttributeStorage-9e574e70.js","assets/arcadeTimeUtils-a7821097.js","assets/executionError-c92d3b85.js","assets/projectionSupport-a7571eb4.js","assets/json-48e3ea08.js","assets/BufferPool-27a5b8c8.js","assets/AttributeStoreView-a370f993.js","assets/TiledDisplayObject-520c0dd0.js","assets/clusterUtils-84d6baf1.js","assets/util-709d9770.js","assets/enums-fb086c25.js","assets/programUtils-16bf542d.js","assets/NestedMap-1b5db22e.js","assets/RenderingContext-134f1048.js","assets/OrderIndependentTransparency-309a1bc3.js","assets/basicInterfaces-4ab7cc6a.js","assets/doublePrecisionUtils-e3c3d0d8.js","assets/imageUtils-c2d0d1ae.js","assets/GraphicsView2D-320a5dcf.js","assets/normalizeUtilsSync-bd6868bb.js","assets/GraphicContainer-76680d33.js","assets/BaseGraphicContainer-f5337fbc.js","assets/FeatureContainer-918580aa.js","assets/TileContainer-dd755a60.js","assets/vec3f32-ad1dc57f.js","assets/requestImageUtils-06e908ac.js"])]);lW=e,uW=t,cW=r,dW=n,hW=i,aW=s}const l4=160,u4={flipY:!0,premultipliedAlpha:!0};let De=class extends fme(qye(Pye(kge))){constructor(e){super(e),this._magnifierView=null,this._stage=null,this._resolveWhenReady=[],this.rootLayerViews=new Mm({getCollections:()=>{var t,r;return[(t=this.basemapView)==null?void 0:t.baseLayerViews,this.layerViews,(r=this.basemapView)==null?void 0:r.referenceLayerViews]},getChildrenFunction:()=>null}),this.featuresTilingScheme=null,this.fullOpacity=1,this.graphicsView=null,this.stateManager=new Zn({constraints:new HB({view:this})}),this.labelManager=null,this.mapViewNavigation=null,this.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!0,labelsAnimationTime:125,labelCollisionsEnabled:!0},this.rendering=!1,this.supersampleScreenshotsEnabled=!0,this.supportsGround=!1,this._stationaryTimer=null,this._gotoTask=null,this.frameTask=new Z0e(this),this._pePromise=null,this.floors=new Le,this.highlightOptions=new pq,this.inputManager=new I1e({view:this}),this.map=null,this.spatialReferenceLocked=!1,this.timeline=new fq,this.type="2d",this.ui=new oW,this.padding={top:0,right:0,bottom:0,left:0},this.addHandles([Ee(()=>this.viewpoint,()=>{this._lastStationaryEventTimestamp=performance.now(),this._flipStationary(l4)},ny),this.on("resize",t=>this.stateManager.resize(t.width,t.height)),Ee(()=>{var t;return(t=this.animationManager)==null?void 0:t.animation},t=>{this.animation=t})]),Dpe()}destroy(){this._set("preconditionsReady",!1),this.frameTask=Gt(this.frameTask),this._gotoTask=null,this.rootLayerViews.destroy(),this.inputManager.destroy(),this._set("inputManager",null)}get graphicsTileStore(){return new L1e(this.featuresTilingScheme)}get constraintsInfo(){var r,n;const e=(r=this.defaultsFromMap)==null?void 0:r.tileInfo,t=this.spatialReference;return{lods:(n=e==null?void 0:e.spatialReference)!=null&&n.equals(t)?e.lods:null,spatialReference:t}}get state(){return this.stateManager.state}get initialExtentRequired(){var o;if(!this.stateManager)return!1;const{scale:e,constraints:t,center:r,viewpoint:n,extent:i}=this;let s=this.zoom;return!(this.map&&"initialViewProperties"in this.map&&((o=this.map.initialViewProperties)!=null&&o.viewpoint))&&!i&&(t!=null&&t.effectiveLODs||(s=-1),(!r||e===0&&s===-1)&&(!n||n.targetGeometry==null||n.targetGeometry.type!=="extent"&&!n.scale))}get resourceManager(){return this._stage.resourceManager}get textureManager(){return this._stage.painter.textureManager}get _defaultsFromMapSettings(){return{required:{tileInfo:!0,heightModelInfo:!1,extent:!1},requiresExtentInSpatialReference:this.spatialReferenceLocked}}get _projectionEngineLoaded(){return!!yd()||(this._pePromise||(this._pePromise=tu().finally(()=>{this._pePromise=null})),!1)}get typeSpecificPreconditionsReady(){const e=this._getDefaultViewpoint();if(!e)return!1;const t=this.spatialReference,r=e.targetGeometry;return!!ru(r.spatialReference,t)||this._projectionEngineLoaded}set animation(e){const t=this._get("animation");if(e===t)return;if(t&&t.stop(),!e||e.isFulfilled())return void this._set("animation",null);this._set("animation",e),this.frameTask.animationInProgress=!0;const r=()=>{var n;e===this._get("animation")&&(this._set("animation",null),(n=this.frameTask)==null||n.requestFrame()),this.frameTask.animationInProgress=!1};e.when(r,r)}get background(){return cbe(this.map)?this.map.initialViewProperties.background:null}set background(e){this._override("background",e)}get center(){var e;return((e=this.stateManager)==null?void 0:e.center)??null}set center(e){this.stateManager.center=e}get constraints(){var e;return(e=this.stateManager)==null?void 0:e.constraints}set constraints(e){e.view=this;const t=this.stateManager.constraints;this.stateManager.constraints=e,t==null||t.destroy()}get extent(){var e;return((e=this.stateManager)==null?void 0:e.extent)??null}set extent(e){this.stateManager.extent=e}get padding(){var e;return(e=this.stateManager)==null?void 0:e.padding}set padding(e){this.stateManager&&(this.stateManager.padding=e)}get resizeAlign(){return this.stateManager.resizeAlign}set resizeAlign(e){this.stateManager.resizeAlign=e}get resolution(){return this.stateManager.resolution??0}get rotation(){return this.stateManager.rotation??0}set rotation(e){this.stateManager.rotation=e}get scale(){var e;return((e=this.stateManager)==null?void 0:e.scale)??0}set scale(e){this.stateManager&&(this.stateManager.scale=e)}get stationary(){return!(this.animation||this.navigating||this.resizing||this._stationaryTimer)}get updating(){var t,r,n;const e=!this.destroyed&&(!this.layerViewManager||!this.labelManager||!this.graphicsView||this.layerViewManager.updating===!0||this.labelManager.updating===!0||this.graphicsView.updating===!0||this.allLayerViews.some(i=>!i.destroyed&&!("layerViews"in i)&&i.updating===!0));if(V("esri-2d-log-updating")){const i=this.allLayerViews.reduce((s,o)=>({...s,[o.layer.id]:!o.destroyed&&!("layerViews"in o)&&o.updating}),{});console.log(`Updating MapView: ${e}
-> Null LayerViewManager: ${!this.layerViewManager}
-> Null LabelManager: ${!this.labelManager}
-> Null GraphicsView: ${!this.graphicsView}
-> layerViewManager.updating: ${(t=this.layerViewManager)==null?void 0:t.updating}
-> labelManager.updating: ${(r=this.labelManager)==null?void 0:r.updating}
-> graphicsView.updating: ${(n=this.graphicsView)==null?void 0:n.updating}
-> allLayerViews: ${JSON.stringify(i)}
`)}return e}get viewpoint(){return this.stateManager.viewpoint??null}set viewpoint(e){this.stateManager.viewpoint=e,this.frameTask.requestFrame()}get zoom(){return this.stateManager.zoom??-1}set zoom(e){this.stateManager.zoom=e}get navigating(){return!(!this.mapViewNavigation||!this.mapViewNavigation.interacting)}goTo(e,t){if(e)return this.animation&&(this.animation=null),this._createAnimation(),wv(()=>this.ready,t).then(()=>{var i;const r={animate:!0,...t},n=C0e(e,this);return(i=this.animation)==null||i.update(n),this._gotoTask={},r.animate?this._gotoAnimated(n,r):this._gotoImmediate(n,r)});Z.getLogger(this).error("#goTo()","target cannot be null or undefined")}async hitTest(e,t){const r=yF(e)?mF(this,e):e;if(!this.ready||isNaN(r.x)||isNaN(r.y))return{screenPoint:r,results:[]};let n=new Set,i=!1,s=null,o=null;t!=null&&t.include?d4(t.include,c4(this,h=>n.add(h),h=>{s||(s=new Set),s.add(h)},h=>n.add(h),()=>i=!0)):(i=!0,n=new Set(this.allLayerViews)),t!=null&&t.exclude&&d4(t.exclude,c4(this,h=>n.delete(h),h=>{o||(o=new Set),o.add(h)}));const a=this.allLayerViews.filter(h=>!h.suspended&&n.has(h)).reverse(),l=this.toMap(r);let c=[...i?this.graphicsView.hitTest(l).map(h=>({type:"graphic",graphic:h,layer:null,mapPoint:l})):[],...await Promise.all(a.map(h=>h.hitTest(l,r)).toArray())].filter(Ll).flat().filter(Ll);return s&&(c=c.filter(h=>!("graphic"in h)||!h.graphic||(s==null?void 0:s.has(YC(h.graphic))))),o&&(c=c.filter(h=>!("graphic"in h)||!h.graphic||!(o!=null&&o.has(YC(h.graphic))))),{screenPoint:r,results:c}}async takeScreenshot(e){const t=this._createScreenshotPlan(e),r=await this._stage.takeScreenshot(t);return F1e(r,{format:t.format,quality:t.quality,rotation:0,disableDecorations:!1},u4)}async _takeScreenshot(e){const t=this._createScreenshotPlan(e),r=await this._stage.takeScreenshot(t);return j1e(r,u4)}_createScreenshotPlan(e){e=e??{};const t=this.supersampleScreenshotsEnabled?Math.min(4,G1e(this.size,Math.min(4096,this._stage.context.parameters.maxTextureSize))):1;let r;e.layers?(r=[],e.layers.forEach(s=>{const o=this.allLayerViews.find(a=>a.layer.id===s.id);o&&"container"in o&&o.container&&r.push(o.container)})):r=this._stage.children;const{format:n,quality:i}=U1e(e.format,e.quality);return D1e(e,t,this.size,this.padding,n,i,r,e.rotation)}get test(){return{takeScreenshot:e=>this._takeScreenshot(e)}}toMap(e){if(!this.ready)return null;const t=yF(e)?mF(this,e):e;return this.stateManager.toMap(t)}toScreen(e){return this.stateManager.toScreen(e)}on(e,t,r,n){return this.inputManager&&this.viewEvents.on(e,t,r,n)||super.on(e,t)}hasEventListener(e){return super.hasEventListener(e)||this.viewEvents.hasHandler(e)}whenLayerView(e){return super.whenLayerView(e)}graphicChanged(e){this.graphicsView&&this.graphicsView.graphicUpdateHandler(e)}whenReady(){return new Promise(e=>{this.ready?e(this):this._resolveWhenReady.push(e)})}forceDOMReadyCycle(){this.forceReadyCycle()}getDefaultSpatialReference(){var e,t,r;return this.map&&"initialViewProperties"in this.map&&((t=(e=this.map)==null?void 0:e.initialViewProperties)==null?void 0:t.spatialReference)||((r=this.defaultsFromMap)==null?void 0:r.spatialReference)||null}hasLayerViewModule(e){return xF.hasLayerViewModule(e)}importLayerView(e){return xF.importLayerView(e)}pixelSizeAt(){return this.ready?this.resolution:(Z.getLogger(this).error("#pixelSizeAt()","Map view cannot be used before it is ready"),null)}popupHitTest(e){return this.hitTest(e).then(t=>({...t,mapPoint:this.toMap(e)}))}requestUpdate(){this.ready&&this.frameTask.requestUpdate()}validate(){let e=nwe(this.type);return V("safari")&&V("safari")<9&&(e=new N("mapview:browser-not-supported","This browser is not supported by MapView (Safari < 9)",{type:"safari",requiredVersion:9,detectedVersion:V("safari")})),e!=null?(Z.getLogger(this).warn("#validate()",e.message),Promise.reject(e)):lbe()}_createAnimation(){return this.animation&&!this.animation.done||(this.animation=new AC),this.animation}_cancellableGoTo(e,t,r){const n=()=>e===this._gotoTask,i=r.then(()=>{n()&&(this.animation=null)}).catch(o=>{throw n()&&(t&&!t.done&&(t.stop(),this.frameTask.animationInProgress=!1),this.animation=null),o}),s=new Promise(o=>o(i));return t.when().catch(()=>{n()&&s.cancel&&s.cancel()}),s}_gotoImmediate(e,t){const r=this._gotoTask,n=this.animation,i=e.then(s=>{if(qt(t),r!==this._gotoTask)throw new N("view:goto-interrupted","Goto was interrupted");this.viewpoint=n.target=s,n.finish()});return this._cancellableGoTo(r,n,i)}_flipStationary(e){return this._stationaryTimer!==null||(this._stationaryTimer=setTimeout(()=>{this._stationaryTimer=null;const t=performance.now()-this._lastStationaryEventTimestamp;t<l4&&(this._stationaryTimer=this._flipStationary(t))},e)),this._stationaryTimer}_getDefaultViewpoint(){var v;const{constraints:e,initialExtent:t,map:r,padding:n,size:i}=this;if(!e)return null;const s=r&&"initialViewProperties"in r?r.initialViewProperties:void 0,o=this.stateManager.getUserStartupOptions(this.size),a=s==null?void 0:s.viewpoint,l=((v=a==null?void 0:a.targetGeometry)==null?void 0:v.extent)??t,c=l==null?void 0:l.center,h=(a==null?void 0:a.rotation)??0,f=(a==null?void 0:a.scale)||l&&sm(l,[i[0]-n.left-n.right,i[1]-n.top-n.bottom]),m=o.center??c,y=o.rotation??h,g=o.scale??f;return m&&g?new Do({targetGeometry:m,scale:g,rotation:y}):null}_gotoAnimated(e,t){const r=this._gotoTask,n=this.animation;if(!n)return Promise.resolve();const i=e.then(s=>{if(qt(t),r!==this._gotoTask)throw new N("view:goto-interrupted","Goto was interrupted");return n.update(s),this.animationManager.animate(n,this.viewpoint,t),n.when().then(()=>{},()=>{})});return this._cancellableGoTo(r,n,i)}_startup(){var o;this.timeline.begin("MapView Startup");const e=this._getDefaultViewpoint();this.stateManager.startup(e,this.size,this.spatialReference,(o=this.defaultsFromMap.extent)==null?void 0:o.center),this.graphics.owner=this;const t=new aW(this.surface,{canvas:this.renderCanvas,supersampleScreenshots:this.supersampleScreenshotsEnabled,contextOptions:{disabledExtensions:this.deactivatedWebGLExtensions,debugWebGLExtensions:this.debugWebGLExtensions},renderingOptions:this.renderingOptions,timeline:this.timeline});this._stage=t,this._magnifierView=new hW,this._magnifierView.magnifier=this.magnifier;const r=new cW({view:this});this._set("labelManager",r);const n=new H0e({view:this});this._set("animationManager",n);const i=new dW({view:this,animationManager:n});this._set("mapViewNavigation",i),this._setupSpatialReferenceDependentProperties(),this.handles.add([this.rootLayerViews.on("change",()=>this._updateStageChildren()),t.on("post-render",()=>this._set("rendering",t.renderRequested)),t.on("will-render",()=>this._set("rendering",t.renderRequested)),t.on("webgl-error",a=>this.fatalError=a.error),Ee(()=>this.stationary,a=>t.stationary=a,cc),Ee(()=>this.background,a=>{t.backgroundColor=a==null?void 0:a.color,this._magnifierView.backgroundColor=a==null?void 0:a.color},cc),Ee(()=>this.magnifier,a=>this._magnifierView.magnifier=a,cc),Ee(()=>this.renderingOptions,a=>t.renderingOptions=a,cc),Ee(()=>this.highlightOptions,a=>t.highlightOptions=a,cc),Ee(()=>this.state.id,()=>t.state=this.state,cc)],"map-view"),this._updateStageChildren();const s=this._resolveWhenReady;this._resolveWhenReady=[],s.forEach(a=>a(this)),this.timeline.end("MapView Startup"),this.frameTask.start(),this._set("ready",!0)}_teardown(){this._destroySpatialReferenceDependentProperties(),this.handles.remove("map-view"),this.mapViewNavigation.destroy(),this._set("mapViewNavigation",null),this.animationManager.destroy(),this._set("animationManager",null),this.layerViewManager.clear(),this.labelManager.destroy(),this._magnifierView.destroy(),this._stage.destroy(),this._stage=null,this._set("graphicsView",null),this._magnifierView=null,this._set("labelManager",null),this._set("mapViewNavigation",null),this.graphics.owner=null,this.frameTask.stop(),this._stationaryTimer&&(clearTimeout(this._stationaryTimer),this._stationaryTimer=null),this._set("ready",!1),this.stateManager.teardown(),this.animation=null}_updateStageChildren(){this._stage.removeAllChildren(),this.rootLayerViews.forEach(t=>{this._stage.addChild(t.container)});const e=this.graphicsView;this._stage.addChild(e.container),this._stage.addChild(this._magnifierView)}_setupSpatialReferenceDependentProperties(){const e=new ive(hme.create({spatialReference:this.spatialReference,size:512,numLODs:36}));this._set("featuresTilingScheme",e);const t=new lW({view:this,graphics:this.graphics,requestUpdateCallback:()=>this.requestUpdate(),container:new uW(e)});this._set("graphicsView",t)}_destroySpatialReferenceDependentProperties(){const e=this.graphicsView;this._set("graphicsView",null),e.destroy(),this._set("featuresTilingScheme",null)}_spatialReferenceChanged(e){if(this.ready){this.frameTask.stop();for(const t of this.allLayerViews)t.processDetach();this._destroySpatialReferenceDependentProperties(),this.stateManager.changeSpatialReference(e),this._stage.state=this.state,this._setupSpatialReferenceDependentProperties();for(const t of this.allLayerViews)t.processAttach();this.frameTask.requestFrame(),this.frameTask.start(),this._updateStageChildren()}}};De.type="2d",u([d({readOnly:!0})],De.prototype,"animationManager",void 0),u([d({constructOnly:!0})],De.prototype,"deactivatedWebGLExtensions",void 0),u([d({constructOnly:!0})],De.prototype,"debugWebGLExtensions",void 0),u([d({readOnly:!0})],De.prototype,"featuresTilingScheme",void 0),u([d({readOnly:!0})],De.prototype,"fullOpacity",void 0),u([d({readOnly:!0})],De.prototype,"graphicsTileStore",null),u([d()],De.prototype,"graphicsView",void 0),u([d()],De.prototype,"stateManager",void 0),u([d()],De.prototype,"constraintsInfo",null),u([d({readOnly:!0})],De.prototype,"state",null),u([d()],De.prototype,"initialExtentRequired",null),u([d()],De.prototype,"labelManager",void 0),u([d({readOnly:!0})],De.prototype,"resourceManager",null),u([d({readOnly:!0})],De.prototype,"textureManager",null),u([d({readOnly:!0})],De.prototype,"mapViewNavigation",void 0),u([d({constructOnly:!0})],De.prototype,"renderCanvas",void 0),u([d()],De.prototype,"renderingOptions",void 0),u([d({readOnly:!0})],De.prototype,"rendering",void 0),u([d({constructOnly:!0})],De.prototype,"supersampleScreenshotsEnabled",void 0),u([d({readOnly:!0})],De.prototype,"supportsGround",void 0),u([d()],De.prototype,"_stationaryTimer",void 0),u([d()],De.prototype,"_defaultsFromMapSettings",null),u([d()],De.prototype,"_pePromise",void 0),u([d({readOnly:!0})],De.prototype,"typeSpecificPreconditionsReady",null),u([d()],De.prototype,"animation",null),u([d({type:abe})],De.prototype,"background",null),u([d()],De.prototype,"center",null),u([d({type:HB})],De.prototype,"constraints",null),u([d()],De.prototype,"extent",null),u([d()],De.prototype,"floors",void 0),u([d({type:pq})],De.prototype,"highlightOptions",void 0),u([d({readOnly:!0})],De.prototype,"inputManager",void 0),u([d()],De.prototype,"map",void 0),u([d()],De.prototype,"padding",null),u([d()],De.prototype,"resizeAlign",null),u([d({readOnly:!0})],De.prototype,"resolution",null),u([d()],De.prototype,"rotation",null),u([d()],De.prototype,"scale",null),u([d({constructOnly:!0})],De.prototype,"spatialReferenceLocked",void 0),u([d()],De.prototype,"stationary",null),u([d({type:fq,readOnly:!0})],De.prototype,"timeline",void 0),u([d({readOnly:!0})],De.prototype,"type",void 0),u([d({readOnly:!0})],De.prototype,"updating",null),u([d()],De.prototype,"viewpoint",null),u([d()],De.prototype,"zoom",null),u([d({readOnly:!0})],De.prototype,"navigating",null),u([d(),Pt(e=>e instanceof sW?e:ep(oW,e))],De.prototype,"ui",void 0),De=u([E("esri.views.MapView")],De);const ube=De;function YC(e){var r,n;const t=e.getObjectId();return t?`${((r=e.layer)==null?void 0:r.uid)??((n=e.sourceLayer)==null?void 0:n.uid)??"MapView"}/${t}`:`"MapView/${e.uid}`}function c4(e,t,r,n,i){return s=>{if(s instanceof Ki){if(s.layer===e)i==null||i();else{const o=e.allLayerViews.find(a=>a.layer===s.layer);o&&(n==null||n(o))}r(YC(s))}else{const o=e.allLayerViews.find(a=>a.layer===s);o&&t(o)}}}function d4(e,t){if(e)if(rS(e))for(const r of e)if(rS(r))for(const n of r)t(n);else t(r);else t(e)}function cbe(e){return(e==null?void 0:e.declaredClass)==="esri.WebMap"}let dbe=class pW{constructor(){this._propertyOriginMap=new Map,this._originStores=new Array(pM),this._values=new Map,this.multipleOriginsSupported=!0}clone(t){const r=new pW,n=this._originStores[ae.DEFAULTS];n&&n.forEach((i,s)=>{r.set(s,F(i),ae.DEFAULTS)});for(let i=ae.SERVICE;i<pM;i++){const s=this._originStores[i];s&&s.forEach((o,a)=>{t&&t.has(a)||r.set(a,F(o),i)})}return r}get(t,r){const n=r===void 0?this._values:this._originStores[r];return n?n.get(t):void 0}keys(t){const r=t==null?this._values:this._originStores[t];return r?[...r.keys()]:[]}set(t,r,n=ae.USER){let i=this._originStores[n];if(i||(i=new Map,this._originStores[n]=i),i.set(t,r),!this._values.has(t)||this._propertyOriginMap.get(t)<=n){const s=this._values.get(t);return this._values.set(t,r),this._propertyOriginMap.set(t,n),s!==r}return!1}delete(t,r=ae.USER){const n=this._originStores[r];if(!n)return;const i=n.get(t);if(n.delete(t),this._values.has(t)&&this._propertyOriginMap.get(t)===r){this._values.delete(t);for(let s=r-1;s>=0;s--){const o=this._originStores[s];if(o&&o.has(t)){this._values.set(t,o.get(t)),this._propertyOriginMap.set(t,s);break}}}return i}has(t,r){const n=r===void 0?this._values:this._originStores[r];return!!n&&n.has(t)}revert(t,r){for(;r>0&&!this.has(t,r);)--r;const n=this._originStores[r],i=n&&n.get(t),s=this._values.get(t);return this._values.set(t,i),this._propertyOriginMap.set(t,r),s!==i}originOf(t){return this._propertyOriginMap.get(t)||ae.DEFAULTS}forEach(t){this._values.forEach(t)}};const fW=e=>{let t=class extends e{constructor(...r){super(...r);const n=Xr(this),i=n.store,s=new dbe;n.store=s,cz(n,i,s)}read(r,n){hz(this,r,n)}getAtOrigin(r,n){const i=CT(this),s=Kn(n);if(typeof r=="string")return i.get(r,s);const o={};return r.forEach(a=>{o[a]=i.get(a,s)}),o}originOf(r){return av(this.originIdOf(r))}originIdOf(r){return CT(this).originOf(r)}revert(r,n){const i=CT(this),s=Kn(n),o=Xr(this);let a;a=typeof r=="string"?r==="*"?i.keys(s):[r]:r,a.forEach(l=>{o.invalidate(l),i.revert(l,s),o.commit(l)})}};return t=u([E("esri.core.ReadOnlyMultiOriginJSONSupport")],t),t};function CT(e){return Xr(e).store}let h4=class extends fW($e){};h4=u([E("esri.core.ReadOnlyMultiOriginJSONSupport")],h4);const hbe=e=>{let t=class extends e{constructor(...r){super(...r)}clear(r,n="user"){return kT(this).delete(r,Kn(n))}write(r,n){return fz(this,r=r||{},n),r}setAtOrigin(r,n,i){Xr(this).setAtOrigin(r,n,Kn(i))}removeOrigin(r){const n=kT(this),i=Kn(r),s=n.keys(i);for(const o of s)n.originOf(o)===i&&n.set(o,n.get(o,i),ae.USER)}updateOrigin(r,n){const i=kT(this),s=Kn(n),o=this.get(r);for(let a=s+1;a<pM;++a)i.delete(r,a);i.set(r,o,s)}toJSON(r){return this.write({},r)}};return t=u([E("esri.core.WriteableMultiOriginJSONSupport")],t),t.prototype.toJSON.isDefaultToJSON=!0,t};function kT(e){return Xr(e).store}const w3=e=>{let t=class extends hbe(fW(e)){constructor(...r){super(...r)}};return t=u([E("esri.core.MultiOriginJSONSupport")],t),t};let p4=class extends w3($e){};p4=u([E("esri.core.MultiOriginJSONSupport")],p4);const mW=96;function yW(e,t){const r=t||e.extent,n=e.width,i=Ga(r&&r.spatialReference);return r&&n?r.width/n*i*Cz*mW:0}function pbe(e,t){return e/(Ga(t)*Cz*mW)}function fbe(e,t){const r=e.extent,n=e.width-(e.padding?e.padding.left+e.padding.right:0),i=pbe(t,r.spatialReference);return r.clone().expand(i*n/r.width)}function mbe(e){return"portalItem"in e}const ybe=e=>{let t=class extends e{get apiKey(){var r;return this._isOverridden("apiKey")?this._get("apiKey"):mbe(this)?(r=this.portalItem)==null?void 0:r.apiKey:null}set apiKey(r){r!=null?this._override("apiKey",r):(this._clearOverride("apiKey"),this.clear("apiKey","user"))}};return u([d({type:String})],t.prototype,"apiKey",null),t=u([E("esri.layers.mixins.APIKeyMixin")],t),t};let dx=class{constructor(t,r,n=""){this.major=t,this.minor=r,this._context=n}lessThan(t,r){return this.major<t||t===this.major&&this.minor<r}since(t,r){return!this.lessThan(t,r)}validate(t){if(this.major!==t.major){const r=this._context&&this._context+":",n=this._context&&this._context+" ";throw new N(r+"unsupported-version",`Required major ${n}version is '${this.major}', but got '\${version.major}.\${version.minor}'`,{version:t})}}clone(){return new dx(this.major,this.minor,this._context)}static parse(t,r=""){const[n,i]=t.split("."),s=/^\s*\d+\s*$/;if(!n||!n.match||!s.test(n))throw new N((r&&r+":")+"invalid-version","Expected major version to be a number, but got '${version}'",{version:t});if(!i||!i.match||!s.test(i))throw new N((r&&r+":")+"invalid-version","Expected minor version to be a number, but got '${version}'",{version:t});const o=parseInt(n,10),a=parseInt(i,10);return new dx(o,a,r)}};function gbe(e){if(!e)return e;const{start:t,end:r}=e;return new qa({start:t!=null?Uh(t,-t.getTimezoneOffset(),"minutes"):t,end:r!=null?Uh(r,-r.getTimezoneOffset(),"minutes"):r})}function vbe(e){if(!e)return e;const{start:t,end:r}=e;return new qa({start:t!=null?Uh(t,t.getTimezoneOffset(),"minutes"):t,end:r!=null?Uh(r,r.getTimezoneOffset(),"minutes"):r})}var KC;let Lg=KC=class extends Q{constructor(e){super(e)}async collectRequiredFields(e,t){return ni(e,t,this.expression)}clone(){return new KC({expression:this.expression,title:this.title})}equals(e){return this.expression===e.expression&&this.title===e.title}};u([d({type:String,json:{write:!0}})],Lg.prototype,"expression",void 0),u([d({type:String,json:{write:!0}})],Lg.prototype,"title",void 0),Lg=KC=u([E("esri.layers.support.FeatureExpressionInfo")],Lg);const f4=Lg,_3={unknown:1,inches:Wr(1,"meters","inches"),feet:Wr(1,"meters","feet"),"us-feet":Wr(1,"meters","us-feet"),yards:Wr(1,"meters","yards"),miles:Wr(1,"meters","miles"),"nautical-miles":Wr(1,"meters","nautical-miles"),millimeters:Wr(1,"meters","millimeters"),centimeters:Wr(1,"meters","centimeters"),decimeters:Wr(1,"meters","decimeters"),meters:Wr(1,"meters","meters"),kilometers:Wr(1,"meters","kilometers"),"decimal-degrees":1/rse(1,"meters",kt.radius)};function JRe(e){return 1/(_3[e]||1)}function wbe(){const e=Object.keys(_3);return e.sort(),e}const _be=wbe();var XC;const Aw=Vn()({onTheGround:"on-the-ground",relativeToGround:"relative-to-ground",relativeToScene:"relative-to-scene",absoluteHeight:"absolute-height"}),m4=new xt({foot:"feet",kilometer:"kilometers",meter:"meters",mile:"miles","us-foot":"us-feet",yard:"yards"});let yl=XC=class extends Q{constructor(e){super(e),this.offset=null}readFeatureExpressionInfo(e,t){return e??(t.featureExpression&&t.featureExpression.value===0?{expression:"0"}:void 0)}writeFeatureExpressionInfo(e,t,r,n){t[r]=e.write({},n),e.expression==="0"&&(t.featureExpression={value:0})}get mode(){const{offset:e,featureExpressionInfo:t}=this;return this._isOverridden("mode")?this._get("mode"):e!=null||t?"relative-to-ground":"on-the-ground"}set mode(e){this._override("mode",e)}set unit(e){this._set("unit",e)}write(e,t){return this.offset||this.mode||this.featureExpressionInfo||this.unit?super.write(e,t):null}clone(){return new XC({mode:this.mode,offset:this.offset,featureExpressionInfo:this.featureExpressionInfo?this.featureExpressionInfo.clone():void 0,unit:this.unit})}equals(e){return this.mode===e.mode&&this.offset===e.offset&&this.unit===e.unit&&Xte(this.featureExpressionInfo,e.featureExpressionInfo)}};u([d({type:f4,json:{write:!0}})],yl.prototype,"featureExpressionInfo",void 0),u([we("featureExpressionInfo",["featureExpressionInfo","featureExpression"])],yl.prototype,"readFeatureExpressionInfo",null),u([pe("featureExpressionInfo",{featureExpressionInfo:{type:f4},"featureExpression.value":{type:[0]}})],yl.prototype,"writeFeatureExpressionInfo",null),u([d({type:Aw.apiValues,nonNullable:!0,json:{type:Aw.jsonValues,read:Aw.read,write:{writer:Aw.write,isRequired:!0}}})],yl.prototype,"mode",null),u([d({type:Number,json:{write:!0}})],yl.prototype,"offset",void 0),u([d({type:_be,json:{type:String,read:m4.read,write:m4.write}})],yl.prototype,"unit",null),yl=XC=u([E("esri.layers.support.ElevationInfo")],yl);const bbe=yl,QRe={type:Boolean,value:!0,json:{origins:{service:{read:!1,write:!1},"web-map":{read:!1,write:!1}},name:"screenSizePerspective",write:!0}},Sbe={type:Boolean,value:!0,json:{name:"disablePopup",read:{reader:(e,t)=>!t.disablePopup},write:{enabled:!0,writer(e,t,r){t[r]=!e}}}},YRe={type:Boolean,value:!0,nonNullable:!0,json:{name:"showLabels",write:!0}},xbe={type:String,json:{origins:{"portal-item":{write:!1}},write:{isRequired:!0,ignoreOrigin:!0,writer:cp}}},KRe={type:Boolean,value:!0,nonNullable:!0,json:{origins:{service:{read:{enabled:!1}}},name:"showLegend",write:!0}},XRe={value:null,type:bbe,json:{origins:{service:{name:"elevationInfo",write:!0}},name:"layerDefinition.elevationInfo",write:!0}};function e3e(e){return{type:e,readOnly:!0,json:{origins:{service:{read:!0}},read:!1}}}const gW={write:!0,read:!0},ek={type:Number,json:{origins:{"web-document":gW,"portal-item":{write:!0}}}},t3e={...ek,json:{...ek.json,origins:{"web-document":{...gW,write:{enabled:!0,target:{opacity:{type:Number},"layerDefinition.drawingInfo.transparency":{type:Number}}}}},read:{source:["layerDefinition.drawingInfo.transparency","drawingInfo.transparency"],reader:(e,t,r)=>r&&r.origin!=="service"||!t.drawingInfo||t.drawingInfo.transparency===void 0?t.layerDefinition&&t.layerDefinition.drawingInfo&&t.layerDefinition.drawingInfo.transparency!==void 0?fv(t.layerDefinition.drawingInfo.transparency):void 0:fv(t.drawingInfo.transparency)}}},$be={type:qa,readOnly:!0,get(){var a,l;if(!((a=this.layer)!=null&&a.timeInfo))return null;const{datesInUnknownTimezone:e,timeOffset:t,useViewTime:r}=this.layer,n=(l=this.view)==null?void 0:l.timeExtent;let i=this.layer.timeExtent;e&&(i=vbe(i));let s=r?n&&i?n.intersection(i):n||i:i;if(!s||s.isEmpty||s.isAllTime)return s;t&&(s=s.offset(-t.value,t.unit)),e&&(s=gbe(s));const o=this._get("timeExtent");return s.equals(o)?o:s}},r3e={type:at,readOnly:!0,json:{origins:{service:{read:{source:["fullExtent","spatialReference"],reader:(e,t)=>{const r=at.fromJSON(e);return t.spatialReference!=null&&typeof t.spatialReference=="object"&&(r.spatialReference=Ce.fromJSON(t.spatialReference)),r}}}},read:!1}},Tbe={type:String,json:{origins:{service:{read:!1},"portal-item":{read:!1}}}},n3e={type:Number,json:{origins:{service:{write:{enabled:!1}}},read:{source:"layerDefinition.minScale"},write:{target:"layerDefinition.minScale"}}},i3e={type:Number,json:{origins:{service:{write:{enabled:!1}}},read:{source:"layerDefinition.maxScale"},write:{target:"layerDefinition.maxScale"}}},Ebe={json:{write:{ignoreOrigin:!0},origins:{"web-map":{read:!1,write:!1}}}};async function Mbe(e){const t=e.spatialReference;if(t.isWGS84)return e.clone();if(t.isWebMercator)return Tc(e);const r=Ce.WGS84;return await cG(t,r),uu(e,r)}function s3e(e,t){if(!vW(e,t)){const r=e.typeKeywords;r?r.push(t):e.typeKeywords=[t]}}function vW(e,t){var r;return!!((r=e.typeKeywords)!=null&&r.includes(t))}function y4(e){return vW(e,Ibe.HOSTED_SERVICE)}function o3e(e,t){const r=e.typeKeywords;if(r){const n=r.indexOf(t);n>-1&&r.splice(n,1)}}async function a3e(e){const t=e.clone().normalize();let r;if(t.length>1)for(const n of t)r?n.width>r.width&&(r=n):r=n;else r=t[0];return Mbe(r)}const Ibe={DEVELOPER_BASEMAP:"DeveloperBasemap",JSAPI:"ArcGIS API for JavaScript",METADATA:"Metadata",MULTI_LAYER:"Multilayer",SINGLE_LAYER:"Singlelayer",TABLE:"Table",HOSTED_SERVICE:"Hosted Service"};function g4(e){var l;const{portal:t,isOrgItem:r,itemControl:n}=e,i=(l=t.user)==null?void 0:l.privileges;let s=!i||i.includes("features:user:edit"),o=!!r&&!!(i!=null&&i.includes("features:user:fullEdit"));const a=n==="update"||n==="admin";return a?o=s=!0:o&&(s=!0),{features:{edit:s,fullEdit:o},content:{updateItem:a}}}const Cbe=e=>{let t=class extends e{constructor(){super(...arguments),this.capabilities=void 0,this.copyright=null,this.fullExtent=null,this.legendEnabled=!0,this.spatialReference=null,this.version=void 0,this._allLayersAndTablesMap=null}readCapabilities(r,n){const i=n.capabilities&&n.capabilities.split(",").map(S=>S.toLowerCase().trim());if(!i)return{operations:{supportsExportMap:!1,supportsExportTiles:!1,supportsIdentify:!1,supportsQuery:!1,supportsTileMap:!1},exportMap:null,exportTiles:null};const s=this.type,o=s!=="tile"&&!!n.supportsDynamicLayers,a=i.includes("query"),l=i.includes("map"),c=!!n.exportTilesAllowed,h=i.includes("tilemap"),f=i.includes("data"),m=s!=="tile"&&(!n.tileInfo||o),y=s!=="tile"&&(!n.tileInfo||o),g=s!=="tile",v=n.cimVersion&&dx.parse(n.cimVersion),w=(v==null?void 0:v.since(1,4))??!1,b=(v==null?void 0:v.since(2,0))??!1;return{operations:{supportsExportMap:l,supportsExportTiles:c,supportsIdentify:a,supportsQuery:f,supportsTileMap:h},exportMap:l?{supportsArcadeExpressionForLabeling:w,supportsSublayersChanges:g,supportsDynamicLayers:o,supportsSublayerVisibility:m,supportsSublayerDefinitionExpression:y,supportsCIMSymbols:b}:null,exportTiles:c?{maxExportTilesCount:+n.maxExportTilesCount}:null}}readVersion(r,n){let i=n.currentVersion;return i||(i=n.hasOwnProperty("capabilities")||n.hasOwnProperty("tables")?10:n.hasOwnProperty("supportedImageFormatTypes")?9.31:9.3),i}async fetchRelatedService(r){const n=this.portalItem;if(!n||!y4(n))return null;this._relatedFeatureServicePromise||(this._relatedFeatureServicePromise=n.fetchRelatedItems({relationshipType:"Service2Service",direction:"reverse"},r).then(s=>s.find(o=>o.type==="Feature Service")??null,()=>null));const i=await this._relatedFeatureServicePromise;return qt(r),i?{itemId:i.id,url:i.url}:null}async fetchSublayerInfo(r,n){const{source:i}=r;if(this!=null&&this.portalItem&&this.type==="tile"&&(i==null?void 0:i.type)==="map-layer"&&y4(this.portalItem)&&r.originIdOf("url")<ae.SERVICE){const a=await this.fetchRelatedService(n);a&&(r.url=rp(a.url,i.mapLayerId.toString()),r.layerItemId=a.itemId)}const{url:s}=r;let o;if(i.type==="data-layer")o=(await St(s,{responseType:"json",query:{f:"json",...this.customParameters,token:this.apiKey},...n})).data;else if(s&&r.originIdOf("url")>ae.SERVICE)try{o=(await this._fetchAllLayersAndTablesFromService(s)).get(i.mapLayerId)}catch{}else{let a=r.id;(i==null?void 0:i.type)==="map-layer"&&(a=i.mapLayerId);try{o=(await this.fetchAllLayersAndTables(n)).get(a)}catch{}}return o}async fetchAllLayersAndTables(r){var n;return this._fetchAllLayersAndTablesFromService((n=this.parsedUrl)==null?void 0:n.path,r)}async _fetchAllLayersAndTablesFromService(r,n){await this.load(n),this._allLayersAndTablesMap||(this._allLayersAndTablesMap=new Map);const i=oy(r),s=VV(this._allLayersAndTablesMap,i==null?void 0:i.url.path,()=>St(rp(i==null?void 0:i.url.path,"/layers"),{responseType:"json",query:{f:"json",...this.customParameters,token:this.apiKey}}).then(a=>{const l=new Map;for(const c of a.data.layers)l.set(c.id,c);return{result:l}},a=>({error:a}))),o=await s;if(qt(n),"result"in o)return o.result;throw o.error}};return u([d({readOnly:!0})],t.prototype,"capabilities",void 0),u([we("service","capabilities",["capabilities","exportTilesAllowed","maxExportTilesCount","supportsDynamicLayers","tileInfo"])],t.prototype,"readCapabilities",null),u([d({json:{read:{source:"copyrightText"}}})],t.prototype,"copyright",void 0),u([d({type:at})],t.prototype,"fullExtent",void 0),u([d(Tbe)],t.prototype,"id",void 0),u([d({type:Boolean,json:{origins:{service:{read:{enabled:!1}}},read:{source:"showLegend"},write:{target:"showLegend"}}})],t.prototype,"legendEnabled",void 0),u([d(Sbe)],t.prototype,"popupEnabled",void 0),u([d({type:Ce})],t.prototype,"spatialReference",void 0),u([d({readOnly:!0})],t.prototype,"version",void 0),u([we("version",["currentVersion","capabilities","tables","supportedImageFormatTypes"])],t.prototype,"readVersion",null),t=u([E("esri.layers.mixins.ArcGISMapService")],t),t},kbe=e=>{let t=class extends e{get title(){if(this._get("title")&&this.originOf("title")!=="defaults")return this._get("title");if(this.url){const r=oy(this.url);if(r!=null&&r.title)return r.title}return this._get("title")||""}set title(r){this._set("title",r)}set url(r){this._set("url",xge(r,Z.getLogger(this)))}};return u([d()],t.prototype,"title",null),u([d({type:String})],t.prototype,"url",null),t=u([E("esri.layers.mixins.ArcGISService")],t),t};function L2(){const e=new Float32Array(16);return e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function Pbe(e){const t=new Float32Array(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function Obe(e,t,r,n,i,s,o,a,l,c,h,f,m,y,g,v){const w=new Float32Array(16);return w[0]=e,w[1]=t,w[2]=r,w[3]=n,w[4]=i,w[5]=s,w[6]=o,w[7]=a,w[8]=l,w[9]=c,w[10]=h,w[11]=f,w[12]=m,w[13]=y,w[14]=g,w[15]=v,w}function Rbe(e,t){return new Float32Array(e,t,16)}const Abe=L2();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:Abe,clone:Pbe,create:L2,createView:Rbe,fromValues:Obe},Symbol.toStringTag,{value:"Module"}));const Lbe=(e,t)=>{const r=md(e,t,0,0,0,0,t,0,0,0,0,t,0,0,0,0,1);return lu(r,r)},Nbe=(e,t)=>{const r=md(e,t,0,0,.5-.5*t,0,t,0,.5-.5*t,0,0,t,.5-.5*t,0,0,0,1);return lu(r,r)},Dbe=(e,t)=>{const r=1-t,n=md(e,.2126+.7874*r,.7152-.7152*r,.0722-.0722*r,0,.2126-.2126*r,.7152+.2848*r,.0722-.0722*r,0,.2126-.2126*r,.7152-.7152*r,.0722+.9278*r,0,0,0,0,1);return lu(n,n)},Fbe=(e,t)=>{const r=Math.sin(t*Math.PI/180),n=Math.cos(t*Math.PI/180),i=md(e,.213+.787*n-.213*r,.715-.715*n-.715*r,.072-.072*n+.928*r,0,.213-.213*n+.143*r,.715+.285*n+.14*r,.072-.072*n-.283*r,0,.213-.213*n-.787*r,.715-.715*n+.715*r,.072+.928*n+.072*r,0,0,0,0,1);return lu(i,i)},jbe=(e,t)=>{const r=1-2*t,n=md(e,r,0,0,t,0,r,0,t,0,0,r,t,0,0,0,1);return lu(n,n)},Vbe=(e,t)=>{const r=md(e,.213+.787*t,.715-.715*t,.072-.072*t,0,.213-.213*t,.715+.285*t,.072-.072*t,0,.213-.213*t,.715-.715*t,.072+.928*t,0,0,0,0,1);return lu(r,r)},zbe=(e,t)=>{const r=1-t,n=md(e,.393+.607*r,.769-.769*r,.189-.189*r,0,.349-.349*r,.686+.314*r,.168-.168*r,0,.272-.272*r,.534-.534*r,.131+.869*r,0,0,0,0,1);return lu(n,n)};let wW=class _W{constructor(t,r,n){this.strength=t,this.radius=r,this.threshold=n,this.type="bloom"}interpolate(t,r,n){this.strength=wi(t.strength,r.strength,n),this.radius=wi(t.radius,r.radius,n),this.threshold=wi(t.threshold,r.threshold,n)}clone(){return new _W(this.strength,this.radius,this.threshold)}toJSON(){return{type:"bloom",radius:x0(this.radius),strength:this.strength,threshold:this.threshold}}},bW=class SW{constructor(t){this.radius=t,this.type="blur"}interpolate(t,r,n){this.radius=Math.round(wi(t.radius,r.radius,n))}clone(){return new SW(this.radius)}toJSON(){return{type:"blur",radius:x0(this.radius)}}},tk=class xW{constructor(t,r){this.type=t,this.amount=r,this.type!=="invert"&&this.type!=="grayscale"&&this.type!=="sepia"||(this.amount=Math.min(this.amount,1))}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(t,r,n){this.amount=wi(t.amount,r.amount,n),this._updateMatrix()}clone(){return new xW(this.type,this.amount)}toJSON(){return{type:this.type,amount:this.amount}}_updateMatrix(){const t=this._colorMatrix||L2();switch(this.type){case"brightness":this._colorMatrix=Lbe(t,this.amount);break;case"contrast":this._colorMatrix=Nbe(t,this.amount);break;case"grayscale":this._colorMatrix=Dbe(t,this.amount);break;case"invert":this._colorMatrix=jbe(t,this.amount);break;case"saturate":this._colorMatrix=Vbe(t,this.amount);break;case"sepia":this._colorMatrix=zbe(t,this.amount)}}},$W=class TW{constructor(t,r,n,i){this.offsetX=t,this.offsetY=r,this.blurRadius=n,this.color=i,this.type="drop-shadow"}interpolate(t,r,n){this.offsetX=wi(t.offsetX,r.offsetX,n),this.offsetY=wi(t.offsetY,r.offsetY,n),this.blurRadius=wi(t.blurRadius,r.blurRadius,n),this.color[0]=Math.round(wi(t.color[0],r.color[0],n)),this.color[1]=Math.round(wi(t.color[1],r.color[1],n)),this.color[2]=Math.round(wi(t.color[2],r.color[2],n)),this.color[3]=wi(t.color[3],r.color[3],n)}clone(){return new TW(this.offsetX,this.offsetY,this.blurRadius,[...this.color])}toJSON(){const t=[...this.color];return t[3]*=255,{type:"drop-shadow",xoffset:x0(this.offsetX),yoffset:x0(this.offsetY),blurRadius:x0(this.blurRadius),color:t}}},EW=class MW{constructor(t){this.angle=t,this.type="hue-rotate"}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(t,r,n){this.angle=wi(t.angle,r.angle,n),this._updateMatrix()}clone(){return new MW(this.angle)}toJSON(){return{type:"hue-rotate",angle:this.angle}}_updateMatrix(){const t=this._colorMatrix||L2();this._colorMatrix=Fbe(t,this.angle)}},IW=class CW{constructor(t){this.amount=t,this.type="opacity",this.amount=Math.min(this.amount,1)}interpolate(t,r,n){this.amount=wi(t.amount,r.amount,n)}clone(){return new CW(this.amount)}toJSON(){return{type:"opacity",amount:this.amount}}};function wi(e,t,r){return e+(t-e)*r}function x0(e){return Math.round(1e3*Kl(e))/1e3}function Ube(e){switch(e.type){case"grayscale":case"sepia":case"invert":return new tk(e.type,0);case"saturate":case"brightness":case"contrast":return new tk(e.type,1);case"opacity":return new IW(1);case"hue-rotate":return new EW(0);case"blur":return new bW(0);case"drop-shadow":return new $W(0,0,0,[...eR("transparent")]);case"bloom":return new wW(0,0,1)}}function Gbe(e,t){const r=e.length>t.length?e:t;return(e.length>t.length?t:e).every((n,i)=>n.type===r[i].type)}function Bbe(e,t){const r=e.length>t.length?e:t,n=e.length>t.length?t:e;for(let i=n.length;i<r.length;i++)n.push(Ube(r[i]))}function qbe(e){const t=e[0];return!!t&&"type"in t}var v4,w4,rk={exports:{}};rk.exports,w4=function(){function e(i,s){function o(){this.constructor=i}o.prototype=s.prototype,i.prototype=new o}function t(i,s,o,a){var l=Error.call(this,i);return Object.setPrototypeOf&&Object.setPrototypeOf(l,t.prototype),l.expected=s,l.found=o,l.location=a,l.name="SyntaxError",l}function r(i,s,o){return o=o||" ",i.length>s?i:(s-=i.length,i+(o+=o.repeat(s)).slice(0,s))}function n(i,s){var o,a={},l=(s=s!==void 0?s:{}).grammarSource,c={start:Gn},h=Gn,f="none",m=")",y=",",g="(",v="%",w="px",b="cm",S="mm",_="in",x="pt",T="pc",I="deg",C="rad",O="grad",W="turn",z="#",ne=".",K="e",xe=/^[ \t\n\r]/,le=/^[a-z\-]/,B=/^[0-9a-fA-F]/,it=/^[+\-]/,Ge=/^[0-9]/,H=R("none"),oe=Dt("none",!1),Ne=Dt(")",!1),je=Dt(",",!1),Nt=R("whitespace"),pt=Wt([" ","	",`
`,"\r"],!1,!1),ut=R("function"),fn=Dt("(",!1),zn=R("identifier"),Ii=Wt([["a","z"],"-"],!1,!1),Ci=R("percentage"),Ep=Dt("%",!1),Xo=R("length"),rs=Dt("px",!1),vd=Dt("cm",!1),wd=Dt("mm",!1),ea=Dt("in",!1),ns=Dt("pt",!1),Ha=Dt("pc",!1),du=R("angle"),Za=Dt("deg",!1),_d=Dt("rad",!1),oi=Dt("grad",!1),ta=Dt("turn",!1),Gs=R("number"),Bs=R("color"),Mp=Dt("#",!1),hu=Wt([["0","9"],["a","f"],["A","F"]],!1,!1),ra=Wt(["+","-"],!1,!1),Un=Wt([["0","9"]],!1,!1),pu=Dt(".",!1),fu=Dt("e",!1),Ja=function(){return[]},ki=function(k,q){return{type:"function",name:k,parameters:q||[]}},qs=function(k,q){return q.length>0?JZ(k,q,3):[k]},bd=function(k){return{type:"quantity",value:k.value,unit:k.unit}},j=function(k){return{type:"color",colorType:k.type,value:k.value}},U=function(k){return k},J=function(){return Pr()},me=function(k){return{value:k,unit:"%"}},Ue=function(k){return{value:k,unit:"px"}},ge=function(k){return{value:k,unit:"cm"}},Oe=function(k){return{value:k,unit:"mm"}},Pe=function(k){return{value:k,unit:"in"}},Se=function(k){return{value:k,unit:"pt"}},gt=function(k){return{value:k,unit:"pc"}},st=function(k){return{value:k,unit:"deg"}},tn=function(k){return{value:k,unit:"rad"}},wr=function(k){return{value:k,unit:"grad"}},Tr=function(k){return{value:k,unit:"turn"}},xn=function(k){return{value:k,unit:null}},Qa=function(){return{type:"hex",value:Pr()}},Pi=function(k){return{type:"function",value:k}},na=function(){return{type:"named",value:Pr()}},ai=function(){return parseFloat(Pr())},L=0,Mt=0,Oi=[{line:1,column:1}],tr=0,Ws=[],te=0;if("startRule"in s){if(!(s.startRule in c))throw new Error(`Can't start parsing from rule "`+s.startRule+'".');h=c[s.startRule]}function Pr(){return i.substring(Mt,L)}function Dt(k,q){return{type:"literal",text:k,ignoreCase:q}}function Wt(k,q,Y){return{type:"class",parts:k,inverted:q,ignoreCase:Y}}function _e(){return{type:"end"}}function R(k){return{type:"other",description:k}}function X(k){var q,Y=Oi[k];if(Y)return Y;for(q=k-1;!Oi[q];)q--;for(Y={line:(Y=Oi[q]).line,column:Y.column};q<k;)i.charCodeAt(q)===10?(Y.line++,Y.column=1):Y.column++,q++;return Oi[k]=Y,Y}function de(k,q,Y){var Ke=X(k),Rr=X(q),Ot={source:l,start:{offset:k,line:Ke.line,column:Ke.column},end:{offset:q,line:Rr.line,column:Rr.column}};return Y&&l&&typeof l.offset=="function"&&(Ot.start=l.offset(Ot.start),Ot.end=l.offset(Ot.end)),Ot}function he(k){L<tr||(L>tr&&(tr=L,Ws=[]),Ws.push(k))}function Or(k,q,Y){return new t(t.buildMessage(k,q),k,q,Y)}function Gn(){var k;return(k=Ht())===a&&(k=is()),k}function Ht(){var k,q;return te++,k=L,rn(),i.substr(L,4)===f?(q=f,L+=4):(q=a,te===0&&he(oe)),q!==a?(rn(),Mt=k,k=Ja()):(L=k,k=a),te--,k===a&&te===0&&he(H),k}function is(){var k,q;if(k=[],(q=Sd())!==a)for(;q!==a;)k.push(q),q=Sd();else k=a;return k}function Sd(){var k,q,Y,Ke;return k=L,rn(),(q=UZ())!==a?(rn(),(Y=x1())===a&&(Y=null),rn(),i.charCodeAt(L)===41?(Ke=m,L++):(Ke=a,te===0&&he(Ne)),Ke!==a?(rn(),Mt=k,k=ki(q,Y)):(L=k,k=a)):(L=k,k=a),k}function x1(){var k,q,Y,Ke,Rr,Ot,os,T1;if(k=L,(q=$1())!==a){for(Y=[],Ke=L,Rr=rn(),i.charCodeAt(L)===44?(Ot=y,L++):(Ot=a,te===0&&he(je)),Ot===a&&(Ot=null),os=rn(),(T1=$1())!==a?Ke=Rr=[Rr,Ot,os,T1]:(L=Ke,Ke=a);Ke!==a;)Y.push(Ke),Ke=L,Rr=rn(),i.charCodeAt(L)===44?(Ot=y,L++):(Ot=a,te===0&&he(je)),Ot===a&&(Ot=null),os=rn(),(T1=$1())!==a?Ke=Rr=[Rr,Ot,os,T1]:(L=Ke,Ke=a);Mt=k,k=qs(q,Y)}else L=k,k=a;return k}function $1(){var k,q;return k=L,(q=GZ())===a&&(q=BZ())===a&&(q=qZ())===a&&(q=WZ()),q!==a&&(Mt=k,q=bd(q)),(k=q)===a&&(k=L,(q=HZ())!==a&&(Mt=k,q=j(q)),k=q),k}function rn(){var k,q;for(te++,k=[],xe.test(i.charAt(L))?(q=i.charAt(L),L++):(q=a,te===0&&he(pt));q!==a;)k.push(q),xe.test(i.charAt(L))?(q=i.charAt(L),L++):(q=a,te===0&&he(pt));return te--,q=a,te===0&&he(Nt),k}function UZ(){var k,q,Y;return te++,k=L,(q=q3())!==a?(i.charCodeAt(L)===40?(Y=g,L++):(Y=a,te===0&&he(fn)),Y!==a?(Mt=k,k=U(q)):(L=k,k=a)):(L=k,k=a),te--,k===a&&(q=a,te===0&&he(ut)),k}function q3(){var k,q,Y;if(te++,k=L,q=[],le.test(i.charAt(L))?(Y=i.charAt(L),L++):(Y=a,te===0&&he(Ii)),Y!==a)for(;Y!==a;)q.push(Y),le.test(i.charAt(L))?(Y=i.charAt(L),L++):(Y=a,te===0&&he(Ii));else q=a;return q!==a&&(Mt=k,q=J()),te--,(k=q)===a&&(q=a,te===0&&he(zn)),k}function GZ(){var k,q,Y;return te++,k=L,rn(),(q=ss())!==a?(i.charCodeAt(L)===37?(Y=v,L++):(Y=a,te===0&&he(Ep)),Y!==a?(Mt=k,k=me(q)):(L=k,k=a)):(L=k,k=a),te--,k===a&&te===0&&he(Ci),k}function BZ(){var k,q,Y;return te++,k=L,rn(),(q=ss())!==a?(i.substr(L,2)===w?(Y=w,L+=2):(Y=a,te===0&&he(rs)),Y!==a?(Mt=k,k=Ue(q)):(L=k,k=a)):(L=k,k=a),k===a&&(k=L,rn(),(q=ss())!==a?(i.substr(L,2)===b?(Y=b,L+=2):(Y=a,te===0&&he(vd)),Y!==a?(Mt=k,k=ge(q)):(L=k,k=a)):(L=k,k=a),k===a&&(k=L,rn(),(q=ss())!==a?(i.substr(L,2)===S?(Y=S,L+=2):(Y=a,te===0&&he(wd)),Y!==a?(Mt=k,k=Oe(q)):(L=k,k=a)):(L=k,k=a),k===a&&(k=L,rn(),(q=ss())!==a?(i.substr(L,2)===_?(Y=_,L+=2):(Y=a,te===0&&he(ea)),Y!==a?(Mt=k,k=Pe(q)):(L=k,k=a)):(L=k,k=a),k===a&&(k=L,rn(),(q=ss())!==a?(i.substr(L,2)===x?(Y=x,L+=2):(Y=a,te===0&&he(ns)),Y!==a?(Mt=k,k=Se(q)):(L=k,k=a)):(L=k,k=a),k===a&&(k=L,rn(),(q=ss())!==a?(i.substr(L,2)===T?(Y=T,L+=2):(Y=a,te===0&&he(Ha)),Y!==a?(Mt=k,k=gt(q)):(L=k,k=a)):(L=k,k=a)))))),te--,k===a&&te===0&&he(Xo),k}function qZ(){var k,q,Y;return te++,k=L,(q=ss())!==a?(i.substr(L,3)===I?(Y=I,L+=3):(Y=a,te===0&&he(Za)),Y!==a?(Mt=k,k=st(q)):(L=k,k=a)):(L=k,k=a),k===a&&(k=L,(q=ss())!==a?(i.substr(L,3)===C?(Y=C,L+=3):(Y=a,te===0&&he(_d)),Y!==a?(Mt=k,k=tn(q)):(L=k,k=a)):(L=k,k=a),k===a&&(k=L,(q=ss())!==a?(i.substr(L,4)===O?(Y=O,L+=4):(Y=a,te===0&&he(oi)),Y!==a?(Mt=k,k=wr(q)):(L=k,k=a)):(L=k,k=a),k===a&&(k=L,(q=ss())!==a?(i.substr(L,4)===W?(Y=W,L+=4):(Y=a,te===0&&he(ta)),Y!==a?(Mt=k,k=Tr(q)):(L=k,k=a)):(L=k,k=a)))),te--,k===a&&(q=a,te===0&&he(du)),k}function WZ(){var k,q;return te++,k=L,rn(),(q=ss())!==a?(Mt=k,k=xn(q)):(L=k,k=a),te--,k===a&&te===0&&he(Gs),k}function HZ(){var k,q,Y,Ke;if(te++,k=L,i.charCodeAt(L)===35?(q=z,L++):(q=a,te===0&&he(Mp)),q!==a){if(Y=[],B.test(i.charAt(L))?(Ke=i.charAt(L),L++):(Ke=a,te===0&&he(hu)),Ke!==a)for(;Ke!==a;)Y.push(Ke),B.test(i.charAt(L))?(Ke=i.charAt(L),L++):(Ke=a,te===0&&he(hu));else Y=a;Y!==a?(Mt=k,k=Qa()):(L=k,k=a)}else L=k,k=a;return k===a&&(k=L,(q=Sd())!==a&&(Mt=k,q=Pi(q)),(k=q)===a&&(k=L,(q=q3())!==a&&(Mt=k,q=na()),k=q)),te--,k===a&&(q=a,te===0&&he(Bs)),k}function ss(){var k,q,Y,Ke,Rr,Ot,os;for(k=L,it.test(i.charAt(L))?(i.charAt(L),L++):te===0&&he(ra),q=L,Y=[],Ge.test(i.charAt(L))?(Ke=i.charAt(L),L++):(Ke=a,te===0&&he(Un));Ke!==a;)Y.push(Ke),Ge.test(i.charAt(L))?(Ke=i.charAt(L),L++):(Ke=a,te===0&&he(Un));if(i.charCodeAt(L)===46?(Ke=ne,L++):(Ke=a,te===0&&he(pu)),Ke!==a){if(Rr=[],Ge.test(i.charAt(L))?(Ot=i.charAt(L),L++):(Ot=a,te===0&&he(Un)),Ot!==a)for(;Ot!==a;)Rr.push(Ot),Ge.test(i.charAt(L))?(Ot=i.charAt(L),L++):(Ot=a,te===0&&he(Un));else Rr=a;Rr!==a?q=Y=[Y,Ke,Rr]:(L=q,q=a)}else L=q,q=a;if(q===a)if(q=[],Ge.test(i.charAt(L))?(Y=i.charAt(L),L++):(Y=a,te===0&&he(Un)),Y!==a)for(;Y!==a;)q.push(Y),Ge.test(i.charAt(L))?(Y=i.charAt(L),L++):(Y=a,te===0&&he(Un));else q=a;if(q!==a){if(Y=L,i.charCodeAt(L)===101?(Ke=K,L++):(Ke=a,te===0&&he(fu)),Ke!==a){if(it.test(i.charAt(L))?(Rr=i.charAt(L),L++):(Rr=a,te===0&&he(ra)),Rr===a&&(Rr=null),Ot=[],Ge.test(i.charAt(L))?(os=i.charAt(L),L++):(os=a,te===0&&he(Un)),os!==a)for(;os!==a;)Ot.push(os),Ge.test(i.charAt(L))?(os=i.charAt(L),L++):(os=a,te===0&&he(Un));else Ot=a;Ot!==a?Y=Ke=[Ke,Rr,Ot]:(L=Y,Y=a)}else L=Y,Y=a;Y===a&&(Y=null),Mt=k,k=ai()}else L=k,k=a;return k}function ZZ(k,q){return k.map(function(Y){return Y[q]})}function JZ(k,q,Y){return[k].concat(ZZ(q,Y))}if((o=h())!==a&&L===i.length)return o;throw o!==a&&L<i.length&&he(_e()),Or(Ws,tr<i.length?i.charAt(tr):null,tr<i.length?de(tr,tr+1):de(tr,tr))}return e(t,Error),t.prototype.format=function(i){var s="Error: "+this.message;if(this.location){var o,a=null;for(o=0;o<i.length;o++)if(i[o].source===this.location.source){a=i[o].text.split(/\r\n|\n|\r/g);break}var l=this.location.start,c=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(l):l,h=this.location.source+":"+c.line+":"+c.column;if(a){var f=this.location.end,m=r("",c.line.toString().length," "),y=a[l.line-1],g=(l.line===f.line?f.column:y.length+1)-l.column||1;s+=`
 --> `+h+`
`+m+` |
`+c.line+" | "+y+`
`+m+" | "+r("",l.column-1," ")+r("",g,"^")}else s+=`
 at `+h}return s},t.buildMessage=function(i,s){var o={literal:function(y){return'"'+l(y.text)+'"'},class:function(y){var g=y.parts.map(function(v){return Array.isArray(v)?c(v[0])+"-"+c(v[1]):c(v)});return"["+(y.inverted?"^":"")+g.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(y){return y.description}};function a(y){return y.charCodeAt(0).toString(16).toUpperCase()}function l(y){return y.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(g){return"\\x0"+a(g)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(g){return"\\x"+a(g)})}function c(y){return y.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(g){return"\\x0"+a(g)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(g){return"\\x"+a(g)})}function h(y){return o[y.type](y)}function f(y){var g,v,w=y.map(h);if(w.sort(),w.length>0){for(g=1,v=1;g<w.length;g++)w[g-1]!==w[g]&&(w[v]=w[g],v++);w.length=v}switch(w.length){case 1:return w[0];case 2:return w[0]+" or "+w[1];default:return w.slice(0,-1).join(", ")+", or "+w[w.length-1]}}function m(y){return y?'"'+l(y)+'"':"end of input"}return"Expected "+f(i)+" but "+m(s)+" found."},{SyntaxError:t,parse:n}},(v4=rk).exports&&(v4.exports=w4());var Wbe=rk.exports;function kW(e){if(!e||e.length===0)return null;if(typeof e=="string"){const r=_4(e);return r&&r.length!==0?r:null}const t=e.map(r=>{if(!Number.isFinite(r.scale)||r.scale<=0)throw new N("effect:invalid-scale","scale must be finite and greater than 0",{stop:r});return{scale:r.scale,effects:_4(r.value)}});t.sort((r,n)=>n.effects.length-r.effects.length);for(let r=0;r<t.length-1;r++){if(!Gbe(t[r].effects,t[r+1].effects))throw new N("effect:interpolation-impossible","Cannot interpolate by scale between 2 lists of mixed effects",{a:t[r].effects,b:t[r+1].effects});Bbe(t[r].effects,t[r+1].effects)}return t.sort((r,n)=>n.scale-r.scale),t}function _4(e){let t;if(!e)return[];try{t=Wbe.parse(e)}catch(r){throw new N("effect:invalid-syntax","Invalid effect syntax",{value:e,error:r})}return t.map(r=>Hbe(r))}function Hbe(e){try{switch(e.name){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":return Zbe(e);case"opacity":return Jbe(e);case"hue-rotate":return Qbe(e);case"blur":return Ybe(e);case"drop-shadow":return Kbe(e);case"bloom":return Xbe(e)}}catch(t){throw t.details.filter=e,t}throw new N("effect:unknown-effect",`Effect '${e.name}' is not supported`,{effect:e})}function Zbe(e){let t=1;return ly(e.parameters,1),e.parameters.length===1&&(t=xo(e.parameters[0])),new tk(e.name,t)}function Jbe(e){let t=1;return ly(e.parameters,1),e.parameters.length===1&&(t=xo(e.parameters[0])),new IW(t)}function Qbe(e){let t=0;return ly(e.parameters,1),e.parameters.length===1&&(t=sSe(e.parameters[0])),new EW(t)}function Ybe(e){let t=0;return ly(e.parameters,1),e.parameters.length===1&&(t=x3(e.parameters[0]),g1(t,e.parameters[0])),new bW(t)}function Kbe(e){const t=[];let r=null;for(const n of e.parameters)if(n.type==="color"){if(t.length&&Object.freeze(t),r)throw new N("effect:type-error","Accepts only one color",{});r=oSe(n)}else{const i=x3(n);if(Object.isFrozen(t))throw new N("effect:type-error","<length> parameters not consecutive",{lengths:t});t.push(i),t.length===3&&g1(i,n)}if(t.length<2||t.length>3)throw new N("effect:type-error",`Expected <length>{2,3}, Actual: <length>{${t.length}}`,{lengths:t});return new $W(t[0],t[1],t[2]||0,r||PW("black"))}function Xbe(e){let t=1,r=0,n=0;return ly(e.parameters,3),e.parameters[0]&&(t=xo(e.parameters[0])),e.parameters[1]&&(r=x3(e.parameters[1]),g1(r,e.parameters[1])),e.parameters[2]&&(n=xo(e.parameters[2])),new wW(t,r,n)}function ly(e,t){if(e.length>t)throw new N("effect:type-error",`Function supports up to ${t} parameters, Actual: ${e.length}`,{parameters:e})}function N2(e){if(e.type==="color")return"<color>";if(e.unit){if(e.unit in S3)return"<length>";if(e.unit in b3)return"<angle>";if(e.unit==="%")return"<percentage>"}return"<double>"}function g1(e,t){if(e<0)throw new N("effect:type-error",`Negative values are not allowed, Actual: ${e}`,{term:t})}function eSe(e){if(e.type!=="quantity"||e.unit!==null)throw new N("effect:type-error",`Expected <double>, Actual: ${N2(e)}`,{term:e})}function tSe(e){if(e.type!=="quantity"||e.unit!==null&&e.unit!=="%")throw new N("effect:type-error",`Expected <double> or <percentage>, Actual: ${N2(e)}`,{term:e})}const b3={deg:1,grad:.9,rad:180/Math.PI,turn:360};function rSe(e){if(e.type!=="quantity"||!(e.value===0&&e.unit===null||e.unit&&b3[e.unit]!=null))throw new N("effect:type-error",`Expected <angle>, Actual: ${N2(e)}`,{term:e})}const S3={px:1,cm:96/2.54,mm:96/2.54/10,in:96,pc:16,pt:96/72};function nSe(e){if(e.type!=="quantity"||!(e.value===0&&e.unit===null||e.unit&&S3[e.unit]!=null))throw new N("effect:type-error",`Expected <length>, Actual: ${N2(e)}`,{term:e})}function xo(e){tSe(e);const t=e.value;return g1(t,e),e.unit==="%"?.01*t:t}function iSe(e){return eSe(e),g1(e.value,e),e.value}function sSe(e){return rSe(e),e.value*b3[e.unit]||0}function x3(e){return nSe(e),e.value*S3[e.unit]||0}function oSe(e){switch(e.colorType){case"hex":return Aoe(e.value);case"named":return PW(e.value);case"function":return uSe(e.value)}}function PW(e){if(!Qz(e))throw new N("effect:unknown-color",`color '${e}' isn't valid`,{namedColor:e});return Roe(e)}const aSe=/^rgba?/i,lSe=/^hsla?/i;function uSe(e){if(ly(e.parameters,4),aSe.test(e.name))return[xo(e.parameters[0]),xo(e.parameters[1]),xo(e.parameters[2]),e.parameters[3]?xo(e.parameters[3]):1];if(lSe.test(e.name))return Yz(iSe(e.parameters[0]),xo(e.parameters[1]),xo(e.parameters[2]),e.parameters[3]?xo(e.parameters[3]):1);throw new N("effect:syntax-error",`Invalid color function '${e.name}'`,{colorFunction:e})}function cSe(e,t,r){var n;try{return pSe(e)}catch(i){(n=r==null?void 0:r.messages)==null||n.push(i)}return null}function dSe(e,t,r,n){try{const i=hSe(e);vp(r,i,t)}catch(i){n.messages&&n.messages.push(i)}}function hSe(e){const t=kW(e);return t?qbe(t)?t.map(r=>r.toJSON()):t.map(({scale:r,effects:n})=>({scale:r,value:n.map(i=>i.toJSON())})):null}function pSe(e){if(!e||e.length===0)return null;if(fSe(e)){const t=[];for(const r of e)t.push({scale:r.scale,value:b4(r.value)});return t}return b4(e)}function fSe(e){const t=e[0];return!!t&&"scale"in t}function b4(e){if(!e||!e.length)return"";const t=[];for(const r of e){let n=[];switch(r.type){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":case"opacity":n=[tl(r,"amount")];break;case"blur":n=[tl(r,"radius","pt")];break;case"hue-rotate":n=[tl(r,"angle","deg")];break;case"drop-shadow":n=[tl(r,"xoffset","pt"),tl(r,"yoffset","pt"),tl(r,"blurRadius","pt"),mSe(r,"color")];break;case"bloom":n=[tl(r,"strength"),tl(r,"radius","pt"),tl(r,"threshold")]}const i=`${r.type}(${n.filter(Boolean).join(" ")})`;kW(i),t.push(i)}return t.join(" ")}function tl(e,t,r){if(e[t]==null)throw new N("effect:missing-parameter",`Missing parameter '${t}' in ${e.type} effect`,{effect:e});return r?e[t]+r:""+e[t]}function mSe(e,t){if(e[t]==null)throw new N("effect:missing-parameter",`Missing parameter '${t}' in ${e.type} effect`,{effect:e});const r=e[t];return`rgba(${r[0]||0}, ${r[1]||0}, ${r[2]||0}, ${r[3]/255||0})`}const S4={read:{reader:cSe},write:{allowNull:!0,writer:dSe}},ySe=e=>{let t=class extends e{constructor(){super(...arguments),this.blendMode="normal",this.effect=null}};return u([d({type:["average","color-burn","color-dodge","color","darken","destination-atop","destination-in","destination-out","destination-over","difference","exclusion","hard-light","hue","invert","lighten","lighter","luminosity","minus","multiply","normal","overlay","plus","reflect","saturation","screen","soft-light","source-atop","source-in","source-out","vivid-light","xor"],nonNullable:!0,json:{read:!1,write:!1,origins:{"web-map":{read:!0,write:!0},"portal-item":{read:!0,write:!0}}}})],t.prototype,"blendMode",void 0),u([d({json:{read:!1,write:!1,origins:{"web-map":S4,"portal-item":S4}}})],t.prototype,"effect",void 0),t=u([E("esri.layers.mixins.BlendLayer")],t),t},gSe=e=>{let t=class extends e{constructor(){super(...arguments),this.customParameters=null}};return u([d({type:Object,json:{write:{overridePolicy:r=>({enabled:!!(r&&Object.keys(r).length>0)})}}})],t.prototype,"customParameters",void 0),t=u([E("esri.layers.mixins.CustomParametersMixin")],t),t},x4={ArcGISAnnotationLayer:!0,ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,CSV:!0,GeoRSS:!0,GeoJSON:!0,GroupLayer:!0,KML:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,SubtypeGroupLayer:!0,VectorTileLayer:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},$4={ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,WMS:!0,WebTiledLayer:!0,BingMapsAerial:!0,BingMapsRoad:!0,BingMapsHybrid:!0},T4={ArcGISFeatureLayer:!0},vSe={"web-scene/operational-layers":{ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledElevationServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BuildingSceneLayer:!0,GroupLayer:!0,IntegratedMeshLayer:!0,OGCFeatureLayer:!0,PointCloudLayer:!0,WebTiledLayer:!0,CSV:!0,GeoJSON:!0,VectorTileLayer:!0,WFS:!0,WMS:!0,KML:!0,RasterDataLayer:!0,Voxel:!0,LineOfSightLayer:!0},"web-scene/basemap":{ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,WebTiledLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,ArcGISImageServiceLayer:!0,WMS:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0},"web-scene/ground":{ArcGISTiledElevationServiceLayer:!0,RasterDataElevationLayer:!0},"web-map/operational-layers":x4,"web-map/basemap":$4,"web-map/tables":T4,"link-chart/operational-layers":{...x4,LinkChartLayer:!0},"link-chart/basemap":$4,"link-chart/tables":T4,"portal-item/operational-layers":{ArcGISFeatureLayer:!0,ArcGISSceneServiceLayer:!0,PointCloudLayer:!0,BuildingSceneLayer:!0,IntegratedMeshLayer:!0,OrientedImageryLayer:!0}},wSe=e=>{let t=class extends e{constructor(){super(...arguments),this.title=null}writeListMode(r,n,i,s){(s&&s.layerContainerType==="ground"||r&&Qne(this,i,{},s))&&(n[i]=r)}writeOperationalLayerType(r,n,i,s){!r||s&&s.layerContainerType==="tables"||(n.layerType=r)}writeTitle(r,n){n.title=r??"Layer"}read(r,n){n&&(n.layer=this),Hne(this,r,i=>super.read(r,i),n)}write(r,n){var o,a;if(n!=null&&n.origin){const l=`${n.origin}/${n.layerContainerType||"operational-layers"}`,c=vSe[l];let h=!!(c!=null&&c[this.operationalLayerType]);if(this.operationalLayerType==="ArcGISTiledElevationServiceLayer"&&l==="web-scene/operational-layers"&&(h=!1),this.operationalLayerType==="ArcGISDimensionLayer"&&l==="web-map/operational-layers"&&(h=!1),!h)return(o=n.messages)==null||o.push(new N("layer:unsupported",`Layers (${this.title}, ${this.id}) of type '${this.declaredClass}' are not supported in the context of '${l}'`,{layer:this})),null}const i=super.write(r,{...n,layer:this}),s=!!n&&!!n.messages&&!!n.messages.filter(l=>l instanceof N&&l.name==="web-document-write:property-required").length;return o2(i==null?void 0:i.url)?((a=n==null?void 0:n.messages)==null||a.push(new N("layer:invalid-url",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using a Blob URL cannot be written to web scenes and web maps`,{layer:this})),null):!this.url&&s?null:i}beforeSave(){}};return u([d({type:String,json:{write:{ignoreOrigin:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0}},"portal-item":{write:!1}}}})],t.prototype,"id",void 0),u([d(Ebe)],t.prototype,"listMode",void 0),u([pe("listMode")],t.prototype,"writeListMode",null),u([d({type:String,readOnly:!0,json:{read:!1,write:{target:"layerType",ignoreOrigin:!0},origins:{"portal-item":{write:!1}}}})],t.prototype,"operationalLayerType",void 0),u([pe("operationalLayerType")],t.prototype,"writeOperationalLayerType",null),u([d(ek)],t.prototype,"opacity",void 0),u([d({type:String,json:{write:{ignoreOrigin:!0,writerEnsuresNonNull:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}},"portal-item":{write:!1}}},value:"Layer"})],t.prototype,"title",void 0),u([pe("title"),pe(["web-scene"],"title")],t.prototype,"writeTitle",null),u([d({type:Boolean,json:{name:"visibility"}})],t.prototype,"visible",void 0),t=u([E("esri.layers.mixins.OperationalLayer")],t),t},_Se=e=>{let t=class extends e{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]},this.userHasEditingPrivileges=!0,this.userHasFullEditingPrivileges=!1,this.userHasUpdateItemPrivileges=!1}destroy(){this.portalItem=Gt(this.portalItem),this.resourceReferences.portalItem=null,this.resourceReferences.paths.length=0}set portalItem(r){r!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",r))}readPortalItem(r,n,i){if(n.itemId)return new d0({id:n.itemId,portal:i&&i.portal})}writePortalItem(r,n){r&&r.id&&(n.itemId=r.id)}async loadFromPortal(r,n){if(this.portalItem&&this.portalItem.id)try{const{load:i}=await ie(()=>import("./layersLoader-48793f5f.js"),["assets/layersLoader-48793f5f.js","assets/fetchService-363fc0b0.js","assets/jsonContext-76163bf5.js","assets/styleUtils-b6b6277d.js"]);return qt(n),await i({instance:this,supportedTypes:r.supportedTypes,validateItem:r.validateItem,supportsData:r.supportsData,layerModuleTypeMap:r.layerModuleTypeMap},n)}catch(i){throw Ei(i)||Z.getLogger(this).warn(`Failed to load layer (${this.title}, ${this.id}) portal item (${this.portalItem.id})
  ${i}`),i}}async finishLoadEditablePortalLayer(r){this._set("userHasEditingPrivileges",await this._fetchUserHasEditingPrivileges(r).catch(n=>(Ea(n),!0)))}async _setUserPrivileges(r,n){if(!ot.userPrivilegesApplied)return this.finishLoadEditablePortalLayer(n);if(this.url)try{const{features:{edit:i,fullEdit:s},content:{updateItem:o}}=await this._fetchUserPrivileges(r,n);this._set("userHasEditingPrivileges",i),this._set("userHasFullEditingPrivileges",s),this._set("userHasUpdateItemPrivileges",o)}catch(i){Ea(i)}}async _fetchUserPrivileges(r,n){let i=this.portalItem;if(!r||!i||!i.loaded||i.sourceUrl)return this._fetchFallbackUserPrivileges(n);const s=r===i.id;if(s&&i.portal.user)return g4(i);let o,a;if(s)o=i.portal.url;else try{o=await voe(this.url,n)}catch(f){Ea(f)}if(!o||!xie(o,i.portal.url))return this._fetchFallbackUserPrivileges(n);try{const f=n!=null?n.signal:null;a=await(ht==null?void 0:ht.getCredential(`${o}/sharing`,{prompt:!1,signal:f}))}catch(f){Ea(f)}const l=!0,c=!1,h=!1;if(!a)return{features:{edit:l,fullEdit:c},content:{updateItem:h}};try{if(s?await i.reload():(i=new d0({id:r,portal:{url:o}}),await i.load(n)),i.portal.user)return g4(i)}catch(f){Ea(f)}return{features:{edit:l,fullEdit:c},content:{updateItem:h}}}async _fetchFallbackUserPrivileges(r){let n=!0;try{n=await this._fetchUserHasEditingPrivileges(r)}catch(i){Ea(i)}return{features:{edit:n,fullEdit:!1},content:{updateItem:!1}}}async _fetchUserHasEditingPrivileges(r){const n=this.url?ht==null?void 0:ht.findCredential(this.url):null;if(!n)return!0;const i=Lw.credential===n?Lw.user:await this._fetchEditingUser(r);return Lw.credential=n,Lw.user=i,i==null||i.privileges==null||i.privileges.includes("features:user:edit")}async _fetchEditingUser(r){var h,f;const n=(f=(h=this.portalItem)==null?void 0:h.portal)==null?void 0:f.user;if(n)return n;const i=ht.findServerInfo(this.url??"");if(!(i!=null&&i.owningSystemUrl))return null;const s=`${i.owningSystemUrl}/sharing/rest`,o=hn.getDefault();if(o&&o.loaded&&Lo(o.restUrl)===Lo(s))return o.user;const a=`${s}/community/self`,l=r!=null?r.signal:null,c=await kO(St(a,{authMode:"no-prompt",query:{f:"json"},signal:l}));return c.ok?KO.fromJSON(c.value.data):null}read(r,n){n&&(n.layer=this),super.read(r,n)}write(r,n){const i=n&&n.portal,s=this.portalItem&&this.portalItem.id&&(this.portalItem.portal||hn.getDefault());return i&&s&&!wz(s.restUrl,i.restUrl)?(n.messages&&n.messages.push(new N("layer:cross-portal",`The layer '${this.title} (${this.id})' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save, set layer.portalItem to null or save to the same portal as the item associated with the layer`,{layer:this})),null):super.write(r,{...n,layer:this})}};return u([d({type:d0})],t.prototype,"portalItem",null),u([we("web-document","portalItem",["itemId"])],t.prototype,"readPortalItem",null),u([pe("web-document","portalItem",{itemId:{type:String}})],t.prototype,"writePortalItem",null),u([d({clonable:!1})],t.prototype,"resourceReferences",void 0),u([d({type:Boolean,readOnly:!0})],t.prototype,"userHasEditingPrivileges",void 0),u([d({type:Boolean,readOnly:!0})],t.prototype,"userHasFullEditingPrivileges",void 0),u([d({type:Boolean,readOnly:!0})],t.prototype,"userHasUpdateItemPrivileges",void 0),t=u([E("esri.layers.mixins.PortalLayer")],t),t},Lw={credential:null,user:null},Rv=new Le,$0=new WeakMap;function bSe(e){OW(e)&&Rv.push(e)}function SSe(e){OW(e)&&Rv.includes(e)&&Rv.remove(e)}function OW(e){return e!=null&&typeof e=="object"&&"refreshInterval"in e&&"refresh"in e}function RW(e,t){return Number.isFinite(e)&&Number.isFinite(t)?t<=0?e:RW(t,e%t):0}let PT=0,Nw=0;function xSe(){const e=Date.now();for(const t of Rv)t.refreshInterval&&e-($0.get(t)??0)+5>=6e4*t.refreshInterval&&($0.set(t,e),t.refresh(e))}DV(()=>{const e=Date.now();let t=0;for(const r of Rv)t=RW(Math.round(6e4*r.refreshInterval),t),r.refreshInterval?$0.get(r)||$0.set(r,e):$0.delete(r);if(t!==Nw){if(Nw=t,clearInterval(PT),Nw===0)return void(PT=0);PT=setInterval(xSe,Nw)}});const $Se=e=>{let t=class extends e{constructor(...r){super(...r),this.refreshInterval=0,this.refreshTimestamp=0,this._debounceHasDataChanged=PV(()=>this.hasDataChanged()),this.when().then(()=>{this.destroyed||bSe(this)},()=>{})}destroy(){SSe(this)}get refreshParameters(){return{_ts:this.refreshTimestamp||null}}refresh(r=Date.now()){mM(this._debounceHasDataChanged()).then(n=>{n&&this._set("refreshTimestamp",r),this.emit("refresh",{dataChanged:n})},n=>{Z.getLogger(this).error(n),this.emit("refresh",{dataChanged:!1,error:n})})}async hasDataChanged(){return!0}};return u([d({type:Number,cast:r=>r>=.1?r:r<=0?0:.1,json:{write:!0}})],t.prototype,"refreshInterval",void 0),u([d({readOnly:!0})],t.prototype,"refreshTimestamp",void 0),u([d()],t.prototype,"refreshParameters",null),t=u([E("esri.layers.mixins.RefreshableLayer")],t),t},TSe=e=>{let t=class extends e{constructor(){super(...arguments),this.minScale=0,this.maxScale=0}get effectiveScaleRange(){const r={minScale:this.minScale,maxScale:this.maxScale},n=this.parent;n&&"effectiveScaleRange"in n&&ESe(r,n.effectiveScaleRange);const i=this._get("effectiveScaleRange");return i&&i.minScale===r.minScale&&i.maxScale===r.maxScale?i:r}};return u([d({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"minScale",void 0),u([d({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"maxScale",void 0),u([d({readOnly:!0})],t.prototype,"effectiveScaleRange",null),t=u([E("esri.layers.mixins.ScaleRangeLayer")],t),t};function ESe(e,t){return e.minScale=e.minScale>0?t.minScale>0?Math.min(e.minScale,t.minScale):e.minScale:t.minScale,e.maxScale=e.maxScale>0?t.maxScale>0?Math.max(e.maxScale,t.maxScale):e.maxScale:t.maxScale,e}var nk;let Ng=nk=class extends Q{constructor(e){super(e),this.minValue=0,this.maxValue=0}clone(){return new nk({minValue:this.minValue,maxValue:this.maxValue})}};u([d({type:Number,json:{write:!0}})],Ng.prototype,"minValue",void 0),u([d({type:Number,json:{write:!0}})],Ng.prototype,"maxValue",void 0),Ng=nk=u([E("esri.renderer.support.AuthoringInfoClassBreakInfo")],Ng);var ik;let fc=ik=class extends Q{constructor(e){super(e),this.field="",this.normalizationField="",this.label="",this.classBreakInfos=[]}clone(){return new ik({field:this.field,normalizationField:this.normalizationField,label:this.label,classBreakInfos:F(this.classBreakInfos)})}};u([d({type:String,json:{write:!0}})],fc.prototype,"field",void 0),u([d({type:String,json:{write:!0}})],fc.prototype,"normalizationField",void 0),u([d({type:String,json:{write:!0}})],fc.prototype,"label",void 0),u([d({type:[Ng],json:{write:!0}})],fc.prototype,"classBreakInfos",void 0),fc=ik=u([E("esri.renderers.support.AuthoringInfoFieldInfo")],fc);var sk;const Dw=new xt({percentTotal:"percent-of-total",ratio:"ratio",percent:"percent"}),Fw=new xt({sizeInfo:"size",colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation"}),E4={key:e=>typeof e=="number"?"number":"string",typeMap:{number:Number,string:String},base:null},M4=["high-to-low","above-and-below","centered-on","extremes"],I4=[...new Set(["high-to-low","above-and-below","centered-on","extremes","90-10","above","below","high-to-low","above-and-below","90-10","above","below"])],C4=["seconds","minutes","hours","days","months","years"];let hi=sk=class extends Q{constructor(e){super(e),this.endTime=null,this.field=null,this.maxSliderValue=null,this.minSliderValue=null,this.startTime=null,this.type=null,this.units=null}castEndTime(e){return typeof e=="string"||typeof e=="number"?e:null}castStartTime(e){return typeof e=="string"||typeof e=="number"?e:null}get style(){return this.type==="color"?this._get("style"):null}set style(e){this._set("style",e)}get theme(){return this.type==="color"||this.type==="size"?this._get("theme")||"high-to-low":null}set theme(e){this._set("theme",e)}clone(){return new sk({endTime:this.endTime,field:this.field,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,startTime:this.startTime,style:this.style,theme:this.theme,type:this.type,units:this.units})}};u([d({types:E4,json:{write:!0}})],hi.prototype,"endTime",void 0),u([Pt("endTime")],hi.prototype,"castEndTime",null),u([d({type:String,json:{write:!0}})],hi.prototype,"field",void 0),u([d({type:Number,json:{write:!0}})],hi.prototype,"maxSliderValue",void 0),u([d({type:Number,json:{write:!0}})],hi.prototype,"minSliderValue",void 0),u([d({types:E4,json:{write:!0}})],hi.prototype,"startTime",void 0),u([Pt("startTime")],hi.prototype,"castStartTime",null),u([d({type:Dw.apiValues,value:null,json:{type:Dw.jsonValues,read:Dw.read,write:Dw.write}})],hi.prototype,"style",null),u([d({type:I4,value:null,json:{type:I4,origins:{"web-scene":{type:M4,write:{writer:(e,t)=>{M4.includes(e)&&(t.theme=e)}}}},write:!0}})],hi.prototype,"theme",null),u([d({type:Fw.apiValues,json:{type:Fw.jsonValues,read:Fw.read,write:Fw.write}})],hi.prototype,"type",void 0),u([d({type:C4,json:{type:C4,write:!0}})],hi.prototype,"units",void 0),hi=sk=u([E("esri.renderers.support.AuthoringInfoVisualVariable")],hi);const MSe=hi;let nb=class extends Q{constructor(t){super(t),this.type=null}};u([d({readOnly:!0,json:{read:!1,write:!0}})],nb.prototype,"type",void 0),nb=u([E("esri.rest.support.ColorRamp")],nb);const $3=nb;var ok;let ih=ok=class extends $3{constructor(e){super(e),this.algorithm=null,this.fromColor=null,this.toColor=null,this.type="algorithmic"}clone(){return new ok({fromColor:F(this.fromColor),toColor:F(this.toColor),algorithm:this.algorithm})}};u([Me({esriCIELabAlgorithm:"cie-lab",esriHSVAlgorithm:"hsv",esriLabLChAlgorithm:"lab-lch"})],ih.prototype,"algorithm",void 0),u([d({type:We,json:{type:[bt],write:!0}})],ih.prototype,"fromColor",void 0),u([d({type:We,json:{type:[bt],write:!0}})],ih.prototype,"toColor",void 0),u([d({type:["algorithmic"]})],ih.prototype,"type",void 0),ih=ok=u([E("esri.rest.support.AlgorithmicColorRamp")],ih);const T3=ih;var ak;let Dg=ak=class extends $3{constructor(e){super(e),this.colorRamps=null,this.type="multipart"}clone(){return new ak({colorRamps:F(this.colorRamps)})}};u([d({type:[T3],json:{write:!0}})],Dg.prototype,"colorRamps",void 0),u([d({type:["multipart"]})],Dg.prototype,"type",void 0),Dg=ak=u([E("esri.rest.support.MultipartColorRamp")],Dg);const AW=Dg,ISe={key:"type",base:$3,typeMap:{algorithmic:T3,multipart:AW}};function CSe(e){return e&&e.type?e.type==="algorithmic"?T3.fromJSON(e):e.type==="multipart"?AW.fromJSON(e):null:null}var lk;const kd=new xt({esriClassifyDefinedInterval:"defined-interval",esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation"}),jw=new xt({pieChart:"pie-chart",classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density",flow:"flow"}),k4=new xt({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density"}),P4=["inches","feet","yards","miles","nautical-miles","millimeters","centimeters","decimeters","meters","kilometers","decimal-degrees"],kSe=["high-to-low","above-and-below","above","below","90-10"],PSe=["flow-line","wave-front"],OSe=["caret","circle-caret","arrow","circle-arrow","plus-minus","circle-plus-minus","square","circle","triangle","happy-sad","thumb","custom"];let lr=lk=class extends Q{constructor(e){super(e),this.colorRamp=null,this.fadeRatio=null,this.isAutoGenerated=!1,this.lengthUnit=null,this.maxSliderValue=null,this.minSliderValue=null,this.visualVariables=null}get classificationMethod(){const e=this._get("classificationMethod"),t=this.type;return t&&t!=="relationship"?t==="class-breaks-size"||t==="class-breaks-color"?e||"manual":null:e}set classificationMethod(e){this._set("classificationMethod",e)}readColorRamp(e){return e?CSe(e):void 0}get fields(){return this.type&&this.type!=="predominance"?null:this._get("fields")}set fields(e){this._set("fields",e)}get field1(){return this.type&&this.type!=="relationship"?null:this._get("field1")}set field1(e){this._set("field1",e)}get field2(){return this.type&&this.type!=="relationship"?null:this._get("field2")}set field2(e){this._set("field2",e)}get flowTheme(){return this.type==="flow"?this._get("flowTheme"):null}set flowTheme(e){this._set("flowTheme",e)}get focus(){return this.type&&this.type!=="relationship"?null:this._get("focus")}set focus(e){this._set("focus",e)}get numClasses(){return this.type&&this.type!=="relationship"?null:this._get("numClasses")}set numClasses(e){this._set("numClasses",e)}get statistics(){return this.type==="univariate-color-size"&&this.univariateTheme==="above-and-below"?this._get("statistics"):null}set statistics(e){this._set("statistics",e)}get standardDeviationInterval(){const e=this.type;return e&&e!=="relationship"&&e!=="class-breaks-size"&&e!=="class-breaks-color"||this.classificationMethod&&this.classificationMethod!=="standard-deviation"?null:this._get("standardDeviationInterval")}set standardDeviationInterval(e){this._set("standardDeviationInterval",e)}get type(){return this._get("type")}set type(e){let t=e;e==="classed-size"?t="class-breaks-size":e==="classed-color"&&(t="class-breaks-color"),this._set("type",t)}get univariateSymbolStyle(){return this.type==="univariate-color-size"&&this.univariateTheme==="above-and-below"?this._get("univariateSymbolStyle"):null}set univariateSymbolStyle(e){this._set("univariateSymbolStyle",e)}get univariateTheme(){return this.type==="univariate-color-size"?this._get("univariateTheme"):null}set univariateTheme(e){this._set("univariateTheme",e)}clone(){return new lk({classificationMethod:this.classificationMethod,colorRamp:F(this.colorRamp),fadeRatio:F(this.fadeRatio),fields:this.fields&&this.fields.slice(0),field1:F(this.field1),field2:F(this.field2),isAutoGenerated:this.isAutoGenerated,focus:this.focus,numClasses:this.numClasses,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,lengthUnit:this.lengthUnit,statistics:this.statistics,standardDeviationInterval:this.standardDeviationInterval,type:this.type,visualVariables:this.visualVariables&&this.visualVariables.map(e=>e.clone()),univariateSymbolStyle:this.univariateSymbolStyle,univariateTheme:this.univariateTheme,flowTheme:this.flowTheme})}};u([d({type:kd.apiValues,value:null,json:{type:kd.jsonValues,read:kd.read,write:kd.write,origins:{"web-document":{default:"manual",type:kd.jsonValues,read:kd.read,write:kd.write}}}})],lr.prototype,"classificationMethod",null),u([d({types:ISe,json:{write:!0}})],lr.prototype,"colorRamp",void 0),u([we("colorRamp")],lr.prototype,"readColorRamp",null),u([d({json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],lr.prototype,"fadeRatio",void 0),u([d({type:[String],value:null,json:{write:!0}})],lr.prototype,"fields",null),u([d({type:fc,value:null,json:{write:!0}})],lr.prototype,"field1",null),u([d({type:fc,value:null,json:{write:!0}})],lr.prototype,"field2",null),u([d({type:PSe,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],lr.prototype,"flowTheme",null),u([d({type:["HH","HL","LH","LL"],value:null,json:{write:!0}})],lr.prototype,"focus",null),u([d({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1}}}})],lr.prototype,"isAutoGenerated",void 0),u([d({type:Number,value:null,json:{type:bt,write:!0}})],lr.prototype,"numClasses",null),u([d({type:P4,json:{type:P4,read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],lr.prototype,"lengthUnit",void 0),u([d({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],lr.prototype,"maxSliderValue",void 0),u([d({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],lr.prototype,"minSliderValue",void 0),u([d({type:Object,value:null,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],lr.prototype,"statistics",null),u([d({type:[.25,.33,.5,1],value:null,json:{type:[.25,.33,.5,1],write:!0}})],lr.prototype,"standardDeviationInterval",null),u([d({type:jw.apiValues,value:null,json:{type:jw.jsonValues,read:jw.read,write:jw.write,origins:{"web-scene":{type:k4.jsonValues,write:{writer:k4.write,overridePolicy:e=>({enabled:e!=="flow"})}}}}})],lr.prototype,"type",null),u([d({type:[MSe],json:{write:!0}})],lr.prototype,"visualVariables",void 0),u([d({type:OSe,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],lr.prototype,"univariateSymbolStyle",null),u([d({type:kSe,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],lr.prototype,"univariateTheme",null),lr=lk=u([E("esri.renderers.support.AuthoringInfo")],lr);const LW=lr,OT=new xt({simple:"simple",uniqueValue:"unique-value",classBreaks:"class-breaks",heatmap:"heatmap",dotDensity:"dot-density",dictionary:"dictionary",pieChart:"pie-chart"},{ignoreUnknown:!0});let Fg=class extends Q{constructor(t){super(t),this.authoringInfo=null,this.type=null}async getRequiredFields(t){if(!this.collectRequiredFields)return[];const r=new Set;return await this.collectRequiredFields(r,t),Array.from(r).sort()}getSymbol(t,r){}async getSymbolAsync(t,r){}getSymbols(){return[]}getAttributeHash(){return JSON.stringify(this)}getMeshHash(){return JSON.stringify(this)}};u([d({type:LW,json:{write:!0}})],Fg.prototype,"authoringInfo",void 0),u([d({type:OT.apiValues,readOnly:!0,json:{type:OT.jsonValues,read:!1,write:{writer:OT.write,ignoreOrigin:!0}}})],Fg.prototype,"type",void 0),Fg=u([E("esri.renderers.Renderer")],Fg);const cu=Fg;function RSe(e){var t,r;return((r=(t=e.match(ASe))==null?void 0:t[1])==null?void 0:r.replace(/\\'/g,"'"))??null}const ASe=/^hash\(\$feature\['((\\'|[^'])+)'\]\) \* 8\.381e-8$/;var uk;let am=uk=class extends Q{constructor(){super(...arguments),this.title=null}clone(){return new uk({title:this.title})}};u([d({type:String,json:{write:!0}})],am.prototype,"title",void 0),am=uk=u([E("esri.renderers.support.LegendOptions")],am);var ck;let ib=ck=class extends am{constructor(){super(...arguments),this.showLegend=null}clone(){return new ck({title:this.title,showLegend:this.showLegend})}};u([d({type:Boolean,json:{write:!0}})],ib.prototype,"showLegend",void 0),ib=ck=u([E("esri.renderers.visualVariables.support.VisualVariableLegendOptions")],ib);const NW=ib,RT=new xt({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"});let ho=class extends Q{constructor(t){super(t),this.index=null,this.type=null,this.field=null,this.valueExpression=null,this.valueExpressionTitle=null,this.legendOptions=null}castField(t){return t==null?t:typeof t=="function"?(Z.getLogger(this).error(".field: field must be a string value"),null):Jv(t)}get arcadeRequired(){return!!this.valueExpression}clone(){}getAttributeHash(){return`${this.type}-${this.field}-${this.valueExpression}`}};u([d()],ho.prototype,"index",void 0),u([d({type:RT.apiValues,readOnly:!0,json:{read:RT.read,write:RT.write}})],ho.prototype,"type",void 0),u([d({type:String,json:{write:!0}})],ho.prototype,"field",void 0),u([Pt("field")],ho.prototype,"castField",null),u([d({type:String,json:{write:!0}})],ho.prototype,"valueExpression",void 0),u([d({type:String,json:{write:!0}})],ho.prototype,"valueExpressionTitle",void 0),u([d({readOnly:!0})],ho.prototype,"arcadeRequired",null),u([d({type:NW,json:{write:!0}})],ho.prototype,"legendOptions",void 0),ho=u([E("esri.renderers.visualVariables.VisualVariable")],ho);const v1=ho;var dk;let sh=dk=class extends Q{constructor(e){super(e),this.color=null,this.label=null,this.value=null}writeValue(e,t,r){t[r]=e??0}clone(){return new dk({color:this.color&&this.color.clone(),label:this.label,value:this.value})}};u([d({type:We,json:{type:[bt],write:!0}})],sh.prototype,"color",void 0),u([d({type:String,json:{write:!0}})],sh.prototype,"label",void 0),u([d({type:Number,json:{write:{writerEnsuresNonNull:!0}}})],sh.prototype,"value",void 0),u([pe("value")],sh.prototype,"writeValue",null),sh=dk=u([E("esri.renderers.visualVariables.support.ColorStop")],sh);const LSe=sh;var hk;let oh=hk=class extends v1{constructor(e){super(e),this.type="color",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(e){e&&Array.isArray(e)&&(e=e.filter(t=>!!t)).sort((t,r)=>t.value-r.value),this._set("stops",e)}clone(){return new hk({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(e=>e.clone()),legendOptions:this.legendOptions&&this.legendOptions.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(e=>e.value||0)}};u([d({readOnly:!0})],oh.prototype,"cache",null),u([d({type:["color"],json:{type:["colorInfo"]}})],oh.prototype,"type",void 0),u([d({type:String,json:{write:!0}})],oh.prototype,"normalizationField",void 0),u([d({type:[LSe],json:{write:!0}})],oh.prototype,"stops",null),oh=hk=u([E("esri.renderers.visualVariables.ColorVariable")],oh);const DW=oh;var pk;let Ku=pk=class extends Q{constructor(e){super(e),this.label=null,this.opacity=null,this.value=null}readOpacity(e,t){return fv(t.transparency)}writeOpacity(e,t,r){t[r]=iR(e)}clone(){return new pk({label:this.label,opacity:this.opacity,value:this.value})}};u([d({type:String,json:{write:!0}})],Ku.prototype,"label",void 0),u([d({type:Number,json:{type:bt,write:{target:"transparency"}}})],Ku.prototype,"opacity",void 0),u([we("opacity",["transparency"])],Ku.prototype,"readOpacity",null),u([pe("opacity")],Ku.prototype,"writeOpacity",null),u([d({type:Number,json:{write:!0}})],Ku.prototype,"value",void 0),Ku=pk=u([E("esri.renderers.visualVariables.support.OpacityStop")],Ku);const NSe=Ku;var fk;let ah=fk=class extends v1{constructor(e){super(e),this.type="opacity",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(e){e&&Array.isArray(e)&&(e=e.filter(t=>!!t)).sort((t,r)=>t.value-r.value),this._set("stops",e)}clone(){return new fk({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(e=>e.clone()),legendOptions:this.legendOptions&&this.legendOptions.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(e=>e.value||0)}};u([d({readOnly:!0})],ah.prototype,"cache",null),u([d({type:["opacity"],json:{type:["transparencyInfo"]}})],ah.prototype,"type",void 0),u([d({type:String,json:{write:!0}})],ah.prototype,"normalizationField",void 0),u([d({type:[NSe],json:{write:!0}})],ah.prototype,"stops",null),ah=fk=u([E("esri.renderers.visualVariables.OpacityVariable")],ah);const FW=ah;var mk;let gl=mk=class extends v1{constructor(e){super(e),this.axis=null,this.type="rotation",this.rotationType="geographic",this.valueExpressionTitle=null}get cache(){return{hasExpression:!!this.valueExpression,compiledFunc:null}}writeValueExpressionTitleWebScene(e,t,r,n){if(n&&n.messages){const i=`visualVariables[${this.index}]`;n.messages.push(new N("property:unsupported",this.type+"VisualVariable.valueExpressionTitle is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:i+".valueExpressionTitle",context:n}))}}clone(){return new mk({axis:this.axis,rotationType:this.rotationType,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,legendOptions:this.legendOptions&&this.legendOptions.clone()})}};u([d({readOnly:!0})],gl.prototype,"cache",null),u([d({type:["heading","tilt","roll"],json:{origins:{"web-scene":{default:"heading",write:!0}}}})],gl.prototype,"axis",void 0),u([d({type:["rotation"],json:{type:["rotationInfo"]}})],gl.prototype,"type",void 0),u([d({type:["geographic","arithmetic"],json:{write:!0,origins:{"web-document":{write:!0,default:"geographic"}}}})],gl.prototype,"rotationType",void 0),u([d({type:String,json:{write:!0}})],gl.prototype,"valueExpressionTitle",void 0),u([pe("web-scene","valueExpressionTitle")],gl.prototype,"writeValueExpressionTitleWebScene",null),gl=mk=u([E("esri.renderers.visualVariables.RotationVariable")],gl);const jW=gl;var yk;let cf=yk=class extends Q{constructor(e){super(e),this.label=null,this.size=null,this.value=null}clone(){return new yk({label:this.label,size:this.size,value:this.value})}};u([d({type:String,json:{write:!0}})],cf.prototype,"label",void 0),u([d({type:Number,cast:At,json:{write:!0}})],cf.prototype,"size",void 0),u([d({type:Number,json:{write:!0}})],cf.prototype,"value",void 0),cf=yk=u([E("esri.renderers.visualVariables.support.SizeStop")],cf);const DSe=cf;var gk;let sb=gk=class extends NW{constructor(){super(...arguments),this.customValues=null}clone(){return new gk({title:this.title,showLegend:this.showLegend,customValues:this.customValues&&this.customValues.slice(0)})}};u([d({type:[Number],json:{write:!0}})],sb.prototype,"customValues",void 0),sb=gk=u([E("esri.renderers.visualVariables.support.SizeVariableLegendOptions")],sb);const FSe=sb;var Fl,Jr;function zf(e){return e&&e.declaredClass==="esri.renderers.visualVariables.SizeVariable"}function Av(e){return e!=null&&!isNaN(e)&&isFinite(e)}function VW(e){return e.valueExpression?Fl.Expression:e.field&&typeof e.field=="string"?Fl.Field:Fl.Unknown}function jSe(e,t){const r=t||VW(e),n=e.valueUnit||"unknown";return r===Fl.Unknown?Jr.Constant:e.stops?Jr.Stops:e.minSize!=null&&e.maxSize!=null&&e.minDataValue!=null&&e.maxDataValue!=null?Jr.ClampedLinear:n==="unknown"?e.minSize!=null&&e.minDataValue!=null?e.minSize&&e.minDataValue?Jr.Proportional:Jr.Additive:Jr.Identity:Jr.RealWorldSize}(function(e){e.Unknown="unknown",e.Expression="expression",e.Field="field"})(Fl||(Fl={})),function(e){e.Unknown="unknown",e.Stops="stops",e.ClampedLinear="clamped-linear",e.Proportional="proportional",e.Additive="additive",e.Constant="constant",e.Identity="identity",e.RealWorldSize="real-world-size"}(Jr||(Jr={}));const nd=Z.getLogger("esri.renderers.visualVariables.support.visualVariableUtils"),O4=new Ki,ob=Math.PI,zW=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i;function UW(e,t,r){const n="visualVariables"in e&&e.visualVariables?e.visualVariables.find(g=>g.type==="color"):e;if(!n)return;if(n.declaredClass!=="esri.renderers.visualVariables.ColorVariable")return void nd.warn("The visualVariable should be an instance of esri.renderers.visualVariables.ColorVariable");const i=typeof t=="number",s=i?null:t,o=s&&s.attributes;let a=i?t:null;const l=n.field,{ipData:c,hasExpression:h}=n.cache;let f=n.cache.compiledFunc;if(!l&&!h){const g=n.stops;return g&&g[0]&&g[0].color}if(typeof a!="number")if(h){if(r==null||r.arcade==null)return void nd.error("Use of arcade expressions requires an arcade context");const g={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},v=r.arcade.arcadeUtils,w=v.getViewInfo(g),b=v.createExecContext(s,w);if(!f){const S=v.createSyntaxTree(n.valueExpression);f=v.createFunction(S),n.cache.compiledFunc=f}a=v.executeFunction(f,b)}else o&&(a=o[l]);const m=n.normalizationField,y=o!=null&&m!=null?parseFloat(o[m]):void 0;if(a!=null&&(!m||i||!isNaN(y)&&y!==0)){isNaN(y)||i||(a/=y);const g=E3(a,c);if(g){const v=g[0],w=g[1],b=v===w?n.stops[v].color:We.blendColors(n.stops[v].color,n.stops[w].color,g[2],r!=null?r.color:void 0);return new We(b)}}}function GW(e,t,r){const n="visualVariables"in e&&e.visualVariables?e.visualVariables.find(g=>g.type==="opacity"):e;if(!n)return;if(n.declaredClass!=="esri.renderers.visualVariables.OpacityVariable")return void nd.warn("The visualVariable should be an instance of esri.renderers.visualVariables.OpacityVariable");const i=typeof t=="number",s=i?null:t,o=s&&s.attributes;let a=i?t:null;const l=n.field,{ipData:c,hasExpression:h}=n.cache;let f=n.cache.compiledFunc;if(!l&&!h){const g=n.stops;return g&&g[0]&&g[0].opacity}if(typeof a!="number")if(h){if(r==null||r.arcade==null)return void nd.error("Use of arcade expressions requires an arcade context");const g={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},v=r.arcade.arcadeUtils,w=v.getViewInfo(g),b=v.createExecContext(s,w);if(!f){const S=v.createSyntaxTree(n.valueExpression);f=v.createFunction(S),n.cache.compiledFunc=f}a=v.executeFunction(f,b)}else o&&(a=o[l]);const m=n.normalizationField,y=o!=null&&m!=null?parseFloat(o[m]):void 0;if(a!=null&&(!m||i||!isNaN(y)&&y!==0)){isNaN(y)||i||(a/=y);const g=E3(a,c);if(g){const v=g[0],w=g[1];if(v===w)return n.stops[v].opacity;{const b=n.stops[v].opacity;return b+(n.stops[w].opacity-b)*g[2]}}}}function BW(e,t,r){const n="visualVariables"in e&&e.visualVariables?e.visualVariables.find(y=>y.type==="rotation"):e;if(!n)return;if(n.declaredClass!=="esri.renderers.visualVariables.RotationVariable")return void nd.warn("The visualVariable should be an instance of esri.renderers.visualVariables.RotationVariable");const i=n.axis||"heading",s=i==="heading"&&n.rotationType==="arithmetic"?90:0,o=i==="heading"&&n.rotationType==="arithmetic"?-1:1,a=typeof t=="number"?null:t,l=a&&a.attributes,c=n.field,{hasExpression:h}=n.cache;let f=n.cache.compiledFunc,m=0;if(!c&&!h)return m;if(h){if(r==null||r.arcade==null)return void nd.error("Use of arcade expressions requires an arcade context");const y={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},g=r.arcade.arcadeUtils,v=g.getViewInfo(y),w=g.createExecContext(a,v);if(!f){const b=g.createSyntaxTree(n.valueExpression);f=g.createFunction(b),n.cache.compiledFunc=f}m=g.executeFunction(f,w)}else l&&(m=l[c]||0);return m=typeof m!="number"||isNaN(m)?null:s+o*m,m}function VSe(e,t,r){const n=typeof t=="number",i=n?null:t,s=i&&i.attributes;let o=n?t:null;const{isScaleDriven:a}=e.cache;let l=e.cache.compiledFunc;if(a){const h=r!=null?r.scale:void 0,f=r!=null?r.view:void 0;o=h==null||f==="3d"?zSe(e):h}else if(!n)switch(e.inputValueType){case Fl.Expression:{if(r==null||r.arcade==null)return void nd.error("Use of arcade expressions requires an arcade context");const h={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},f=r.arcade.arcadeUtils,m=f.getViewInfo(h),y=f.createExecContext(i,m);if(!l){const g=f.createSyntaxTree(e.valueExpression);l=f.createFunction(g),e.cache.compiledFunc=l}o=f.executeFunction(l,y);break}case Fl.Field:s&&(o=s[e.field]);break;case Fl.Unknown:o=null}if(!Av(o))return null;if(n||!e.normalizationField)return o;const c=s?parseFloat(s[e.normalizationField]):null;return Av(c)&&c!==0?o/c:null}function zSe(e){let t=null,r=null;const n=e.stops;return n?(t=n[0].value,r=n[n.length-1].value):(t=e.minDataValue||0,r=e.maxDataValue||0),(t+r)/2}function D2(e,t,r){const n="visualVariables"in e&&e.visualVariables?e.visualVariables.find(s=>s.type==="size"):e;if(!n)return;if(n.declaredClass!=="esri.renderers.visualVariables.SizeVariable")return void nd.warn("The visualVariable should be an instance of esri.renderers.visualVariables.SizeVariable");const i=WW(VSe(n,t,r),n,t,r,n.cache.ipData);return i==null||isNaN(i)?0:i}function Ti(e,t,r){return e==null?null:zf(e)?D2(e,t,r):Av(e)?e:null}function qW(e,t,r){return Av(r)&&e>r?r:Av(t)&&e<t?t:e}function USe(e,t,r,n){return e+((Ti(t.minSize,r,n)||t.minDataValue)??0)}function GSe(e,t,r){const n=e.stops;let i=n&&n.length&&n[0].size;return i==null&&(i=e.minSize),Ti(i,t,r)}function BSe(e,t,r,n){const i=(e-t.minDataValue)/(t.maxDataValue-t.minDataValue),s=Ti(t.minSize,r,n),o=Ti(t.maxSize,r,n),a=n!=null?n.shape:void 0;if(e<=t.minDataValue)return s;if(e>=t.maxDataValue)return o;if(s==null||o==null)return null;if(t.scaleBy==="area"&&a){const l=a==="circle",c=l?ob*(s/2)**2:s*s,h=c+i*((l?ob*(o/2)**2:o*o)-c);return l?2*Math.sqrt(h/ob):Math.sqrt(h)}return s+i*(o-s)}function qSe(e,t,r,n){const i=n!=null?n.shape:void 0,s=e/t.minDataValue,o=Ti(t.minSize,r,n),a=Ti(t.maxSize,r,n);let l=null;return l=i==="circle"?2*Math.sqrt(s*(o/2)**2):i==="square"||i==="diamond"||i==="image"?Math.sqrt(s*o**2):s*o,qW(l,o,a)}function WSe(e,t,r,n,i){var l,c,h;const[s,o,a]=E3(e,i);if(s===o)return Ti((l=t.stops)==null?void 0:l[s].size,r,n);{const f=Ti((c=t.stops)==null?void 0:c[s].size,r,n);return f+(Ti((h=t.stops)==null?void 0:h[o].size,r,n)-f)*a}}function HSe(e,t,r,n){const i=(n!=null&&n.resolution?n.resolution:1)*_3[t.valueUnit],s=Ti(t.minSize,r,n),o=Ti(t.maxSize,r,n),{valueRepresentation:a}=t;let l=null;return l=a==="area"?2*Math.sqrt(e/ob)/i:a==="radius"||a==="distance"?2*e/i:e/i,qW(l,s,o)}function WW(e,t,r,n,i){switch(t.transformationType){case Jr.Additive:return USe(e,t,r,n);case Jr.Constant:return GSe(t,r,n);case Jr.ClampedLinear:return BSe(e,t,r,n);case Jr.Proportional:return qSe(e,t,r,n);case Jr.Stops:return WSe(e,t,r,n,i);case Jr.RealWorldSize:return HSe(e,t,r,n);case Jr.Identity:return e;case Jr.Unknown:return null}}function ZSe(e,t,r){const{isScaleDriven:n}=e.cache;if(!(n&&r==="3d"||t))return null;const i={scale:t,view:r};let s=Ti(e.minSize,O4,i),o=Ti(e.maxSize,O4,i);if(s!=null||o!=null){if(s>o){const a=o;o=s,s=a}return{minSize:s,maxSize:o}}}function JSe(e,t,r){if(!e.visualVariables)return;const n=[],i=[],s=[],o=[],a=[];for(const l of e.visualVariables)switch(l.type){case"color":i.push(l);break;case"opacity":s.push(l);break;case"rotation":a.push(l);break;case"size":o.push(l)}return i.forEach(l=>{const c=UW(l,t,r);n.push({variable:l,value:c})}),s.forEach(l=>{const c=GW(l,t,r);n.push({variable:l,value:c})}),a.forEach(l=>{const c=BW(l,t,r);n.push({variable:l,value:c})}),o.forEach(l=>{const c=D2(l,t,r);n.push({variable:l,value:c})}),n.filter(l=>l.value!=null)}function E3(e,t){if(!t)return;let r=0,n=t.length-1;return t.some((i,s)=>e<i?(n=s,!0):(r=s,!1)),[r,n,(e-t[r])/(t[n]-t[r])]}function QSe(e,t,r){const n=["proportional","proportional","proportional"];for(const i of e){const s=i.useSymbolValue?"symbol-value":D2(i,t,r);switch(i.axis){case"width":n[0]=s;break;case"depth":n[1]=s;break;case"height":n[2]=s;break;case"width-and-depth":n[0]=s,n[1]=s;break;case"all":case void 0:case null:n[0]=s,n[1]=s,n[2]=s;break;default:i.axis}}return n}const d3e=Object.freeze(Object.defineProperty({__proto__:null,getAllSizes:QSe,getColor:UW,getOpacity:GW,getRotationAngle:BW,getSize:D2,getSizeForValue:WW,getSizeFromNumberOrVariable:Ti,getSizeRangeAtScale:ZSe,getVisualVariableValues:JSe,viewScaleRE:zW},Symbol.toStringTag,{value:"Module"}));var vk;const Vw=new xt({width:"width",depth:"depth",height:"height",widthAndDepth:"width-and-depth",all:"all"}),wk=new xt({unknown:"unknown",inch:"inches",foot:"feet",yard:"yards",mile:"miles","nautical-mile":"nautical-miles",millimeter:"millimeters",centimeter:"centimeters",decimeter:"decimeters",meter:"meters",kilometer:"kilometers","decimal-degree":"decimal-degrees"});function R4(e){if(e!=null)return typeof e=="string"||typeof e=="number"?At(e):e.type==="size"?zf(e)?e:(delete(e={...e}).type,new ft(e)):void 0}function A4(e,t,r){if(typeof e!="object")return e;const n=new ft;return n.read(e,r),n}let ft=vk=class extends v1{constructor(e){super(e),this.axis=null,this.legendOptions=null,this.normalizationField=null,this.scaleBy=null,this.target=null,this.type="size",this.useSymbolValue=null,this.valueExpression=null,this.valueRepresentation=null,this.valueUnit=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null,isScaleDriven:this.valueExpression!=null&&zW.test(this.valueExpression)}}set expression(e){Z.getLogger(this).warn("'expression' is deprecated since version 4.2. Use 'valueExpression' instead. The only supported expression is 'view.scale'."),e==="view.scale"?(this.valueExpression="$view.scale",this._set("expression",e)):this._set("expression",null)}set index(e){zf(this.maxSize)&&(this.maxSize.index=`visualVariables[${e}].maxSize`),zf(this.minSize)&&(this.minSize.index=`visualVariables[${e}].minSize`),this._set("index",e)}get inputValueType(){return VW(this)}set maxDataValue(e){e&&this.stops&&(Z.getLogger(this).warn("cannot set maxDataValue when stops is not null."),e=null),this._set("maxDataValue",e)}set maxSize(e){e&&this.stops&&(Z.getLogger(this).warn("cannot set maxSize when stops is not null."),e=null),this._set("maxSize",e)}castMaxSize(e){return R4(e)}readMaxSize(e,t,r){return A4(e,t,r)}set minDataValue(e){e&&this.stops&&(Z.getLogger(this).warn("cannot set minDataValue when stops is not null."),e=null),this._set("minDataValue",e)}set minSize(e){e&&this.stops&&(Z.getLogger(this).warn("cannot set minSize when stops is not null."),e=null),this._set("minSize",e)}castMinSize(e){return R4(e)}readMinSize(e,t,r){return A4(e,t,r)}get arcadeRequired(){return!!this.valueExpression||this.minSize!=null&&typeof this.minSize=="object"&&this.minSize.arcadeRequired||this.maxSize!=null&&typeof this.maxSize=="object"&&this.maxSize.arcadeRequired}set stops(e){this.minDataValue==null&&this.maxDataValue==null&&this.minSize==null&&this.maxSize==null?e&&Array.isArray(e)&&(e=e.filter(t=>!!t)).sort((t,r)=>t.value-r.value):e&&(Z.getLogger(this).warn("cannot set stops when one of minDataValue, maxDataValue, minSize or maxSize is not null."),e=null),this._set("stops",e)}get transformationType(){return jSe(this,this.inputValueType)}readValueExpression(e,t){return e||t.expression&&"$view.scale"}writeValueExpressionWebScene(e,t,r,n){if(e==="$view.scale"){if(n&&n.messages){const i=this.index,s=typeof i=="string"?i:`visualVariables[${i}]`;n.messages.push(new N("property:unsupported",this.type+"VisualVariable.valueExpression = '$view.scale' is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:s+".valueExpression",context:n}))}}else t[r]=e}readValueUnit(e){return e?wk.read(e):null}clone(){return new vk({axis:this.axis,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,maxDataValue:this.maxDataValue,maxSize:zf(this.maxSize)?this.maxSize.clone():this.maxSize,minDataValue:this.minDataValue,minSize:zf(this.minSize)?this.minSize.clone():this.minSize,normalizationField:this.normalizationField,stops:this.stops&&this.stops.map(e=>e.clone()),target:this.target,useSymbolValue:this.useSymbolValue,valueRepresentation:this.valueRepresentation,valueUnit:this.valueUnit,legendOptions:this.legendOptions&&this.legendOptions.clone()})}flipSizes(){if(this.transformationType===Jr.ClampedLinear){const{minSize:e,maxSize:t}=this;return this.minSize=t,this.maxSize=e,this}if(this.transformationType===Jr.Stops){const e=this.stops;if(!e)return this;const t=e.map(n=>n.size).reverse(),r=e.length;for(let n=0;n<r;n++)e[n].size=t[n];return this}return this}getAttributeHash(){return`${super.getAttributeHash()}-${this.target}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(e=>e.value||0)}};u([d({readOnly:!0})],ft.prototype,"cache",null),u([d({type:Vw.apiValues,json:{type:Vw.jsonValues,origins:{"web-map":{read:!1}},read:Vw.read,write:Vw.write}})],ft.prototype,"axis",void 0),u([d({type:String,value:null,json:{read:!1}})],ft.prototype,"expression",null),u([d()],ft.prototype,"index",null),u([d({type:String,readOnly:!0})],ft.prototype,"inputValueType",null),u([d({type:FSe,json:{write:!0}})],ft.prototype,"legendOptions",void 0),u([d({type:Number,value:null,json:{write:!0}})],ft.prototype,"maxDataValue",null),u([d({type:Number,value:null,json:{write:!0}})],ft.prototype,"maxSize",null),u([Pt("maxSize")],ft.prototype,"castMaxSize",null),u([we("maxSize")],ft.prototype,"readMaxSize",null),u([d({type:Number,value:null,json:{write:!0}})],ft.prototype,"minDataValue",null),u([d({type:Number,value:null,json:{write:!0}})],ft.prototype,"minSize",null),u([Pt("minSize")],ft.prototype,"castMinSize",null),u([we("minSize")],ft.prototype,"readMinSize",null),u([d({type:String,json:{write:!0}})],ft.prototype,"normalizationField",void 0),u([d({readOnly:!0})],ft.prototype,"arcadeRequired",null),u([d({type:String})],ft.prototype,"scaleBy",void 0),u([d({type:[DSe],value:null,json:{write:!0}})],ft.prototype,"stops",null),u([d({type:["outline"],json:{write:!0}})],ft.prototype,"target",void 0),u([d({type:String,readOnly:!0})],ft.prototype,"transformationType",null),u([d({type:["size"],json:{type:["sizeInfo"]}})],ft.prototype,"type",void 0),u([d({type:Boolean,json:{write:!0,origins:{"web-map":{read:!1}}}})],ft.prototype,"useSymbolValue",void 0),u([d({type:String,json:{write:!0}})],ft.prototype,"valueExpression",void 0),u([we("valueExpression",["valueExpression","expression"])],ft.prototype,"readValueExpression",null),u([pe("web-scene","valueExpression")],ft.prototype,"writeValueExpressionWebScene",null),u([d({type:["radius","diameter","area","width","distance"],json:{write:!0}})],ft.prototype,"valueRepresentation",void 0),u([d({type:wk.apiValues,json:{write:wk.write,origins:{"web-map":{read:!1},"web-scene":{write:!0},"portal-item":{write:!0}}}})],ft.prototype,"valueUnit",void 0),u([we("valueUnit")],ft.prototype,"readValueUnit",null),ft=vk=u([E("esri.renderers.visualVariables.SizeVariable")],ft);const HW=ft,YSe={color:DW,size:HW,opacity:FW,rotation:jW},KSe=new xt({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"}),XSe=/^\[([^\]]+)\]$/i;let ab=class extends $e{constructor(){super(...arguments),this.colorVariables=null,this.opacityVariables=null,this.rotationVariables=null,this.sizeVariables=null}set visualVariables(t){if(this._resetVariables(),(t=t&&t.filter(r=>!!r))&&t.length){for(const r of t)switch(r.type){case"color":this.colorVariables.push(r);break;case"opacity":this.opacityVariables.push(r);break;case"rotation":this.rotationVariables.push(r);break;case"size":this.sizeVariables.push(r)}this.sizeVariables.length&&this.sizeVariables.some(r=>!!r.target)&&t.sort((r,n)=>{let i=null;return i=r.target===n.target?0:r.target?1:-1,i});for(let r=0;r<t.length;r++)t[r].index=r;this._set("visualVariables",t)}else this._set("visualVariables",t)}readVariables(t,r,n){const{rotationExpression:i,rotationType:s}=r,o=i&&i.match(XSe),a=o&&o[1];if(a&&(t||(t=[]),t.push({type:"rotationInfo",rotationType:s,field:a})),t)return t.map(l=>{const c=KSe.read(l.type),h=YSe[c];h||(Z.getLogger(this).warn(`Unknown variable type: ${c}`),n&&n.messages&&n.messages.push(new qo("visual-variable:unsupported",`visualVariable of type '${c}' is not supported`,{definition:l,context:n})));const f=new h;return f.read(l,n),f})}writeVariables(t,r){const n=[];for(const i of t){const s=i.toJSON(r);s&&n.push(s)}return n}_resetVariables(){this.colorVariables=[],this.opacityVariables=[],this.rotationVariables=[],this.sizeVariables=[]}};u([d()],ab.prototype,"visualVariables",null),ab=u([E("esri.renderers.visualVariables.VisualVariableFactory")],ab);const exe=ab,txe={base:v1,key:"type",typeMap:{opacity:FW,color:DW,rotation:jW,size:HW}},uy=e=>{let t=class extends e{constructor(){super(...arguments),this._vvFactory=new exe}set visualVariables(r){this._vvFactory.visualVariables=r,this._set("visualVariables",this._vvFactory.visualVariables)}readVisualVariables(r,n,i){return this._vvFactory.readVariables(r,n,i)}writeVisualVariables(r,n,i,s){n[i]=this._vvFactory.writeVariables(r,s)}get arcadeRequiredForVisualVariables(){if(!this.visualVariables)return!1;for(const r of this.visualVariables)if(r.arcadeRequired)return!0;return!1}hasVisualVariables(r,n){return r?this.getVisualVariablesForType(r,n).length>0:this.getVisualVariablesForType("size",n).length>0||this.getVisualVariablesForType("color",n).length>0||this.getVisualVariablesForType("opacity",n).length>0||this.getVisualVariablesForType("rotation",n).length>0}getVisualVariablesForType(r,n){const i=this.visualVariables;return i?i.filter(s=>s.type===r&&(typeof n=="string"?s.target===n:n!==!1||!s.target)):[]}async collectVVRequiredFields(r,n){let i=[];this.visualVariables&&(i=i.concat(this.visualVariables));for(const s of i)s&&(s.field&&Zi(r,n,s.field),s.normalizationField&&Zi(r,n,s.normalizationField),s.valueExpression&&(rxe(s.valueExpression,r,n)||await ni(r,n,s.valueExpression)))}};return u([d({types:[txe],value:null,json:{write:!0}})],t.prototype,"visualVariables",null),u([we("visualVariables",["visualVariables","rotationType","rotationExpression"])],t.prototype,"readVisualVariables",null),u([pe("visualVariables")],t.prototype,"writeVisualVariables",null),t=u([E("esri.renderers.mixins.VisualVariablesMixin")],t),t};function rxe(e,t,r){const n=RSe(e);return n!=null&&(Zi(t,r,n),!0)}const Wy={retainId:!1,ignoreDrivers:!1,hasLabelingContext:!0};function nxe(e,t=Wy){var a,l;if(!e)return{symbol:null};const{retainId:r=Wy.retainId,ignoreDrivers:n=Wy.ignoreDrivers,hasLabelingContext:i=Wy.hasLabelingContext,retainCIM:s=Wy.retainCIM}=t;let o=null;if(uC(e)||e instanceof xp)o=e.clone();else if(e.type==="cim"){const c=(l=(a=e.data)==null?void 0:a.symbol)==null?void 0:l.type;if(c!=="CIMPointSymbol")return{error:new N("symbol-conversion:unsupported-cim-symbol",`CIM symbol of type '${c||"unknown"}' is unsupported in 3D`,{symbol:e})};o=s?e.clone():Ch.fromCIMSymbol(e)}else if(e instanceof ts)o=S2.fromSimpleLineSymbol(e);else if(e instanceof fd)o=Ch.fromSimpleMarkerSymbol(e);else if(e instanceof ry)o=Ch.fromPictureMarkerSymbol(e);else if(e instanceof pd)o=t.geometryType&&t.geometryType==="mesh"?x2.fromSimpleFillSymbol(e):u1.fromSimpleFillSymbol(e);else{if(!(e instanceof Sp))return{error:new N("symbol-conversion:unsupported-2d-symbol",`2D symbol of type '${e.type||e.declaredClass}' is unsupported in 3D`,{symbol:e})};o=i?b2.fromTextSymbol(e):Ch.fromTextSymbol(e)}return r&&o&&o.type!=="cim"&&(o.id=e.id),n&&uC(o)&&o.symbolLayers.forEach(c=>c.ignoreDrivers=!0),{symbol:o}}function hx(e,t,r,n){const i=ZW(e,{},{context:n,isLabelSymbol:!1});i!=null&&(t[r]=i)}function L4(e,t,r,n){const i=ZW(e,{},{context:n,isLabelSymbol:!0});i!=null&&(t[r]=i)}function N4(e){return e instanceof ty||e instanceof xp}function ZW(e,t,r){if(e==null)return null;const{context:n,isLabelSymbol:i}=r,s=n==null?void 0:n.origin,o=n==null?void 0:n.messages;if(s==="web-scene"&&!N4(e)){const a=nxe(e,{retainCIM:!0,hasLabelingContext:i});return a.symbol!=null?a.symbol.write(t,n):(o==null||o.push(new N("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported in scenes. Use 3D symbology instead when working with WebScene and SceneView`,{symbol:e,context:n,error:a.error})),null)}return(s==="web-map"||s==="portal-item"&&!Zz(n==null?void 0:n.layer))&&N4(e)?(o==null||o.push(new N("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported in web maps and portal items. Use 2D symbology and CIMSymbol instead when working with MapView`,{symbol:e,context:n})),null):e.write(t,n)}function p3e(e,t){return rpe(e,null,t)}const cy={types:npe,json:{write:{writer:hx},origins:{"web-scene":{types:_D,write:{writer:hx},read:{reader:Qv({types:_D})}}}}},JW={types:{base:Mi,key:"type",typeMap:{"simple-fill":nm.typeMap["simple-fill"],"picture-fill":nm.typeMap["picture-fill"],"polygon-3d":nm.typeMap["polygon-3d"]}},json:{write:{writer:hx},origins:{"web-scene":{type:u1,write:{writer:hx}}}}},lb={cast:e=>e==null||typeof e=="string"||typeof e=="number"?e:`${e}`,json:{type:String,write:{writer:(e,t)=>{t.value=e==null?void 0:e.toString()}}}};var _k;let Xu=_k=class extends Q{constructor(e){super(e),this.description=null,this.label=null,this.minValue=null,this.maxValue=0,this.symbol=null}clone(){return new _k({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,symbol:this.symbol?this.symbol.clone():null})}getMeshHash(){const e=JSON.stringify(this.symbol);return`${this.minValue}.${this.maxValue}.${e}`}};u([d({type:String,json:{write:!0}})],Xu.prototype,"description",void 0),u([d({type:String,json:{write:!0}})],Xu.prototype,"label",void 0),u([d({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],Xu.prototype,"minValue",void 0),u([d({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],Xu.prototype,"maxValue",void 0),u([d(cy)],Xu.prototype,"symbol",void 0),Xu=_k=u([E("esri.renderers.support.ClassBreakInfo")],Xu);const px=Xu;var bk;const QW="log",ub="percent-of-total",cb="field",zw=new xt({esriNormalizeByLog:QW,esriNormalizeByPercentOfTotal:ub,esriNormalizeByField:cb}),ixe=gr(px);let Lr=bk=class extends uy(cu){constructor(e){super(e),this._compiledValueExpression={valueExpression:null,compiledFunction:null},this.backgroundFillSymbol=null,this.classBreakInfos=null,this.defaultLabel=null,this.defaultSymbol=null,this.field=null,this.isMaxInclusive=!0,this.legendOptions=null,this.normalizationField=null,this.normalizationTotal=null,this.type="class-breaks",this.valueExpression=null,this.valueExpressionTitle=null,this._set("classBreakInfos",[])}readClassBreakInfos(e,t,r){if(!Array.isArray(e))return;let n=t.minValue;return e.map(i=>{const s=new px;return s.read(i,r),s.minValue==null&&(s.minValue=n),s.maxValue==null&&(s.maxValue=s.minValue),n=s.maxValue,s})}writeClassBreakInfos(e,t,r,n){const i=e.map(s=>s.write({},n));this._areClassBreaksConsecutive()&&i.forEach(s=>delete s.classMinValue),t[r]=i}castField(e){return e==null?e:typeof e=="function"?(Z.getLogger(this).error(".field: field must be a string value"),null):Jv(e)}get minValue(){return this.classBreakInfos&&this.classBreakInfos[0]&&this.classBreakInfos[0].minValue||0}get normalizationType(){let e=this._get("normalizationType");const t=!!this.normalizationField,r=this.normalizationTotal!=null;return t||r?(e=t&&cb||r&&ub||null,t&&r&&Z.getLogger(this).warn("warning: both normalizationField and normalizationTotal are set!")):e!==cb&&e!==ub||(e=null),e}set normalizationType(e){this._set("normalizationType",e)}addClassBreakInfo(e,t,r){let n=null;n=typeof e=="number"?new px({minValue:e,maxValue:t,symbol:B7(r)}):ixe(F(e)),this.classBreakInfos.push(n),this.classBreakInfos.length===1&&this.notifyChange("minValue")}removeClassBreakInfo(e,t){const r=this.classBreakInfos.length;for(let n=0;n<r;n++){const i=[this.classBreakInfos[n].minValue,this.classBreakInfos[n].maxValue];if(i[0]===e&&i[1]===t){this.classBreakInfos.splice(n,1);break}}}getBreakIndex(e,t){return!this.valueExpression||t!=null&&t.arcade!=null||Z.getLogger(this).warn(""),this.valueExpression?this._getBreakIndexForExpression(e,t):this._getBreakIndexForField(e)}async getClassBreakInfo(e,t){let r=t;!this.valueExpression||t!=null&&t.arcade!=null||(r={...r,arcade:await up()});const n=this.getBreakIndex(e,r);return n!==-1?this.classBreakInfos[n]:null}getSymbol(e,t){if(this.valueExpression&&(t==null||t.arcade==null))return void Z.getLogger(this).error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const r=this.getBreakIndex(e,t);return r>-1?this.classBreakInfos[r].symbol:this.defaultSymbol}async getSymbolAsync(e,t){let r=t;if(this.valueExpression&&(t==null||t.arcade==null)){const i=await up(),{arcadeUtils:s}=i;s.hasGeometryOperations(this.valueExpression)&&await s.enableGeometryOperations(),r={...r,arcade:i}}const n=this.getBreakIndex(e,r);return n>-1?this.classBreakInfos[n].symbol:this.defaultSymbol}getSymbols(){const e=[];return this.classBreakInfos.forEach(t=>{t.symbol&&e.push(t.symbol)}),this.defaultSymbol&&e.push(this.defaultSymbol),e}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((e,t)=>e+t.getAttributeHash(),"")}getMeshHash(){const e=JSON.stringify(this.backgroundFillSymbol),t=JSON.stringify(this.defaultSymbol),r=`${this.normalizationField}.${this.normalizationType}.${this.normalizationTotal}`;return`${e}.${t}.${this.classBreakInfos.reduce((n,i)=>n+i.getMeshHash(),"")}.${r}.${this.field}.${this.valueExpression}`}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}clone(){return new bk({field:this.field,backgroundFillSymbol:this.backgroundFillSymbol&&this.backgroundFillSymbol.clone(),defaultLabel:this.defaultLabel,defaultSymbol:this.defaultSymbol&&this.defaultSymbol.clone(),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,classBreakInfos:F(this.classBreakInfos),isMaxInclusive:this.isMaxInclusive,normalizationField:this.normalizationField,normalizationTotal:this.normalizationTotal,normalizationType:this.normalizationType,visualVariables:F(this.visualVariables),legendOptions:F(this.legendOptions),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}async collectRequiredFields(e,t){const r=[this.collectVVRequiredFields(e,t),this.collectSymbolFields(e,t)];await Promise.all(r)}async collectSymbolFields(e,t){const r=[...this.getSymbols().map(n=>n.collectRequiredFields(e,t)),ni(e,t,this.valueExpression)];Zi(e,t,this.field),Zi(e,t,this.normalizationField),await Promise.all(r)}_getBreakIndexForExpression(e,t){const{viewingMode:r,scale:n,spatialReference:i,arcade:s}=t??{},{valueExpression:o}=this;let a=this._compiledValueExpression.valueExpression===o?this._compiledValueExpression.compiledFunction:null;const l=s.arcadeUtils;if(!a){const h=l.createSyntaxTree(o);a=l.createFunction(h),this._compiledValueExpression.compiledFunction=a}this._compiledValueExpression.valueExpression=o;const c=l.executeFunction(a,l.createExecContext(e,l.getViewInfo({viewingMode:r,scale:n,spatialReference:i})));return this._getBreakIndexfromInfos(c)}_getBreakIndexForField(e){const t=this.field,r=e.attributes,n=this.normalizationType;let i=parseFloat(r[t]);if(n){const s=this.normalizationTotal,o=parseFloat(this.normalizationField?r[this.normalizationField]:void 0);if(n===QW)i=Math.log(i)*Math.LOG10E;else if(n!==ub||s==null||isNaN(s)){if(n===cb&&!isNaN(o)){if(isNaN(i)||isNaN(o))return-1;i/=o}}else i=i/s*100}return this._getBreakIndexfromInfos(i)}_getBreakIndexfromInfos(e){const t=this.isMaxInclusive;if(e!=null&&typeof e=="number"&&!isNaN(e))for(let r=0;r<this.classBreakInfos.length;r++){const n=[this.classBreakInfos[r].minValue,this.classBreakInfos[r].maxValue];if(n[0]<=e&&(t?e<=n[1]:e<n[1]))return r}return-1}_areClassBreaksConsecutive(){const e=this.classBreakInfos,t=e.length;for(let r=1;r<t;r++)if(e[r-1].maxValue!==e[r].minValue)return!1;return!0}};u([d(JW)],Lr.prototype,"backgroundFillSymbol",void 0),u([d({type:[px]})],Lr.prototype,"classBreakInfos",void 0),u([we("classBreakInfos")],Lr.prototype,"readClassBreakInfos",null),u([pe("classBreakInfos")],Lr.prototype,"writeClassBreakInfos",null),u([d({type:String,json:{write:!0}})],Lr.prototype,"defaultLabel",void 0),u([d(cy)],Lr.prototype,"defaultSymbol",void 0),u([d({type:String,json:{write:!0}})],Lr.prototype,"field",void 0),u([Pt("field")],Lr.prototype,"castField",null),u([d({type:Boolean})],Lr.prototype,"isMaxInclusive",void 0),u([d({type:am,json:{write:!0}})],Lr.prototype,"legendOptions",void 0),u([d({type:Number,readOnly:!0,value:null,json:{read:!1,write:{overridePolicy(){return this.classBreakInfos.length!==0&&this._areClassBreaksConsecutive()?{enabled:!0}:{enabled:!1}}}}})],Lr.prototype,"minValue",null),u([d({type:String,json:{write:!0}})],Lr.prototype,"normalizationField",void 0),u([d({type:Number,cast:e=>Ts(e),json:{write:!0}})],Lr.prototype,"normalizationTotal",void 0),u([d({type:zw.apiValues,value:null,json:{type:zw.jsonValues,read:zw.read,write:zw.write}})],Lr.prototype,"normalizationType",null),u([Me({classBreaks:"class-breaks"})],Lr.prototype,"type",void 0),u([d({type:String,json:{write:!0}})],Lr.prototype,"valueExpression",void 0),u([d({type:String,json:{write:!0}})],Lr.prototype,"valueExpressionTitle",void 0),Lr=bk=u([E("esri.renderers.ClassBreaksRenderer")],Lr);const YW=Lr,AT=-3;var mc;(function(e){e[e.ALL=0]="ALL",e[e.SOME=1]="SOME"})(mc||(mc={}));let f3e=class{constructor(t,r,n){this.name=t,this._storage=r,this.id=oxe+++":",this.size=0,this.maxSize=0,this._removeFunc=!1,this._hit=0,this._miss=0,this._storage.register(this),n&&(this._storage.registerRemoveFunc(this.id,n),this._removeFunc=!0)}destroy(){this._storage.clear(this),this._removeFunc&&this._storage.deregisterRemoveFunc(this.id),this._storage.deregister(this),this._storage=null}get hitRate(){return this._hit/(this._hit+this._miss)}get sizeAll(){return this._storage.size}resetHitRate(){this._hit=this._miss=0}put(t,r,n,i=0){this._storage.put(this,t,r,n,i)}get(t){const r=this._storage.get(this,t);return r===void 0?++this._miss:++this._hit,r}pop(t){const r=this._storage.pop(this,t);return r===void 0?++this._miss:++this._hit,r}updateSize(t,r,n){this._storage.updateSize(this,t,r,n)}clear(){this._storage.clear(this)}clearAll(){this._storage.clearAll()}get performanceInfo(){return this._storage.performanceInfo}resetStats(){this._storage.resetStats()}},sxe=class{get size(){return this._size}constructor(t=10485760){this._maxSize=t,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=new Nh,this._users=new Nh}destroy(){this.clearAll(),this._removeFuncs.clear(),this._users.clear(),this._db=null}register(t){this._users.push(t)}deregister(t){this._users.removeUnordered(t)}registerRemoveFunc(t,r){this._removeFuncs.push([t,r])}deregisterRemoveFunc(t){this._removeFuncs.filterInPlace(r=>r[0]!==t)}get maxSize(){return this._maxSize}set maxSize(t){this._maxSize=Math.max(t,0),this._checkSizeLimits()}put(t,r,n,i,s){r=t.id+r;const o=this._db.get(r);if(o&&(this._size-=o.size,t.size-=o.size,this._db.delete(r),o.entry!==n&&this._notifyRemove(r,o.entry,mc.ALL)),i>this._maxSize)return void this._notifyRemove(r,n,mc.ALL);if(n===void 0)return void console.warn("Refusing to cache undefined entry ");if(!i||i<0)return void console.warn("Refusing to cache entry with invalid size "+i);const a=1+Math.max(s,AT)-AT;this._db.set(r,{entry:n,size:i,lifetime:a,lives:a}),this._size+=i,t.size+=i,this._checkSizeLimits()}updateSize(t,r,n,i){r=t.id+r;const s=this._db.get(r);if(s&&s.entry===n){for(this._size-=s.size,t.size-=s.size;i>this._maxSize;){const o=this._notifyRemove(r,n,mc.SOME);if(!(o!=null&&o>0))return void this._db.delete(r);i=o}s.size=i,this._size+=i,t.size+=i,this._checkSizeLimits()}}pop(t,r){r=t.id+r;const n=this._db.get(r);if(n)return this._size-=n.size,t.size-=n.size,this._db.delete(r),++this._hit,n.entry;++this._miss}get(t,r){r=t.id+r;const n=this._db.get(r);if(n!==void 0)return this._db.delete(r),n.lives=n.lifetime,this._db.set(r,n),++this._hit,n.entry;++this._miss}get performanceInfo(){const t={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},r={},n=new Array;this._db.forEach((o,a)=>{const l=o.lifetime;n[l]=(n[l]||0)+o.size,this._users.forAll(c=>{const{id:h,name:f}=c;if(a.startsWith(h)){const m=r[f]||0;r[f]=m+o.size}})});const i={};this._users.forAll(o=>{const a=o.name;if("hitRate"in o&&typeof o.hitRate=="number"&&!isNaN(o.hitRate)&&o.hitRate>0){const l=r[a]||0;r[a]=l,i[a]=Math.round(100*o.hitRate)+"%"}else i[a]="0%"});const s=Object.keys(r);s.sort((o,a)=>r[a]-r[o]),s.forEach(o=>t[o]=Math.round(r[o]/2**20)+"MB / "+i[o]);for(let o=n.length-1;o>=0;--o){const a=n[o];a&&(t["Priority "+(o+AT-1)]=Math.round(a/this._size*100)+"%")}return t}resetStats(){this._hit=this._miss=0,this._users.forAll(t=>t.resetHitRate())}clear(t){const r=t.id;this._db.forEach((n,i)=>{i.startsWith(r)&&(this._size-=n.size,this._db.delete(i),this._notifyRemove(i,n.entry,mc.ALL))}),t.size=0}clearAll(){this._db.forEach((t,r)=>this._notifyRemove(r,t.entry,mc.ALL)),this._users.forEach(t=>t.size=0),this._size=0,this._db.clear()}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemove(t,r,n){let i;return this._removeFuncs.some(s=>{if(t.startsWith(s[0])){const o=s[1](r,n);return typeof o=="number"&&(i=o),!0}return!1}),i}_checkSizeLimits(){if(this._size>this._maxSize){for(const[t,r]of this._db)if(this._purgeItem(t,r),this._size<=.9*this.maxSize)return}this._users.forEach(t=>{if(t.maxSize>0&&t.size>t.maxSize){for(const[r,n]of this._db)if(r.startsWith(t.id)&&(this._purgeItem(r,n,t),t.size<=.9*t.maxSize))return}})}_purgeItem(t,r,n=this._users.find(i=>t.startsWith(i.id))){if(this._db.delete(t),r.lives<=1){this._size-=r.size,n&&(n.size-=r.size);const i=this._notifyRemove(t,r.entry,mc.SOME);i!=null&&i>0&&(this._size+=i,n&&(n.size+=i),r.lives=r.lifetime,r.size=i,this._db.set(t,r))}else--r.lives,this._db.set(t,r)}},oxe=0,axe=class{constructor(t,r){this._storage=new sxe,this.id="",this.name="",this.size=0,this._storage.maxSize=t,this._storage.register(this),r&&this._storage.registerRemoveFunc("",r)}destroy(){this._storage.deregister(this),this._storage.destroy()}put(t,r,n=1){this._storage.put(this,t,r,n,1)}pop(t){return this._storage.pop(this,t)}get(t){return this._storage.get(this,t)}clear(){this._storage.clearAll()}get maxSize(){return this._storage.maxSize}set maxSize(t){this._storage.maxSize=t}resetHitRate(){}};function lxe(e){return e.type==="date"||e.type==="esriFieldTypeDate"||e.type==="date-only"||e.type==="esriFieldTypeDateOnly"||e.type==="timestamp-offset"||e.type==="esriFieldTypeTimestampOffset"}function D4(e){return e.type==="oid"||e.type==="esriFieldTypeOID"}function F4(e){return e.type==="global-id"||e.type==="esriFieldTypeGlobalID"}let KW=class{constructor(t=[]){if(this.fields=[],this._fieldsMap=new Map,this._normalizedFieldsMap=new Map,this._dateFieldsSet=new Set,this._numericFieldsSet=new Set,this.dateFields=[],this.numericFields=[],this._requiredFields=null,!t)return;this.fields=t;const r=[];for(const n of t){const i=n==null?void 0:n.name,s=V4(n==null?void 0:n.name);if(i&&s){const o=j4(i);this._fieldsMap.set(i,n),this._fieldsMap.set(o,n),this._normalizedFieldsMap.set(s,n),r.push(o),lxe(n)?(this.dateFields.push(n),this._dateFieldsSet.add(n)):XU(n)&&(this._numericFieldsSet.add(n),this.numericFields.push(n)),D4(n)||F4(n)||(n.editable=n.editable==null||!!n.editable,n.nullable=n.nullable==null||!!n.nullable)}}r.sort(),this.uid=r.join(",")}destroy(){this._fieldsMap.clear()}get requiredFields(){if(!this._requiredFields){this._requiredFields=[];for(const t of this.fields)D4(t)||F4(t)||t.nullable||Sue(t)!==void 0||this._requiredFields.push(t)}return this._requiredFields}has(t){return this.get(t)!=null}get(t){if(!t)return;let r=this._fieldsMap.get(t);return r||(r=this._fieldsMap.get(j4(t))??this._normalizedFieldsMap.get(V4(t)),r&&this._fieldsMap.set(t,r),r)}isDateField(t){return this._dateFieldsSet.has(this.get(t))}isNumericField(t){return this._numericFieldsSet.has(this.get(t))}normalizeFieldName(t){const r=this.get(t);if(r)return r.name??void 0}};function j4(e){return e.trim().toLowerCase()}function V4(e){var t;return((t=sue(e))==null?void 0:t.toLowerCase())??""}const z4="esri.renderers.support.DictionaryLoader",uxe={type:"CIMSimpleLineCallout",lineSymbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",width:.5,color:[0,0,0,255]}]}};let M3=class{constructor(t,r,n){this.config=null,this.fieldMap=null,this.url=null,this._ongoingRequests=new Map,this._symbolCache=new axe(100),this._dictionaryVersion=null,this._fieldIndex=null,this._dictionaryPromise=null,this.url=t,this.config=r,this.fieldMap=n}getSymbolFields(){return this._symbolFields}async getSymbolAsync(t,r){let n;this._dictionaryPromise||(this._dictionaryPromise=this.fetchResources(r));try{n=await this._dictionaryPromise}catch(g){if(Ei(g))return this._dictionaryPromise=null,null}const i=this._dictionaryVersion&&this._dictionaryVersion.since(4,0),s={};if(this.fieldMap)for(const g of this._symbolFields){const v=this._getFieldName(this.fieldMap[g]);s[g]=v?i?t.attributes[v]:""+t.attributes[v]:""}let o=null;try{o=n==null?void 0:n(s,r)}catch{return null}if(!o||typeof o!="string")return null;const a=_O(o).toString(),l=this._symbolCache.get(a);if(l)return l.catch(()=>{this._symbolCache.pop(a)}),l;const c=o.split(";"),h=[],f=[];for(const g of c)if(g)if(g.includes("po:")){const v=g.substr(3).split("|");if(v.length===3){const w=v[0],b=v[1];let S=v[2];if(b==="DashTemplate")S=S.split(" ").map(_=>Number(_));else if(b==="Color"){const _=new We(S).toRgba();S=[_[0],_[1],_[2],255*_[3]]}else S=Number(S);f.push({primitiveName:w,propertyName:b,value:S})}}else if(g.includes("|")){for(const v of g.split("|"))if(this._itemNames.has(v)){h.push(v);break}}else this._itemNames.has(g)&&h.push(g);const m=t.geometry==null||!t.geometry.hasZ&&t.geometry.type==="point",y=this._cimPartsToCIMSymbol(h,f,m,r);return this._symbolCache.put(a,y,1),y}async fetchResources(t){if(this._dictionaryPromise)return this._dictionaryPromise;if(!this.url)return void Z.getLogger(z4).error("no valid URL!");const r=St(this.url+"/resources/styles/dictionary-info.json",{responseType:"json",query:{f:"json"},signal:t!=null?t.signal:null}),[{data:n}]=await Promise.all([r,up()]);if(!n)throw this._dictionaryPromise=null,new N("esri.renderers.DictionaryRenderer","Bad dictionary data!");const{authoringInfo:i,dictionary_version:s,expression:o,itemsNames:a}=n,l=o;let c=!1;s&&(this._dictionaryVersion=dx.parse(s),c=this._dictionaryVersion.since(4,0)),this._refSymbolUrlTemplate=this.url+"/"+n.cimRefTemplateUrl,this._itemNames=new Set(a),this._symbolFields=i.symbol;const h={};if(this.config){const y=this.config;for(const g in y)h[g]=y[g]}if(i.configuration)for(const y of i.configuration)h.hasOwnProperty(y.name)||(h[y.name]=y.value);const f=[];if(t!=null&&t.fields&&this.fieldMap)for(const y of this._symbolFields){const g=this.fieldMap[y],v=t.fields.filter(w=>w.name.toLowerCase()===(g==null?void 0:g.toLowerCase()));v.length>0&&f.push({...v[0],type:c?v[0].type:"esriFieldTypeString"})}f.length>0&&(this._fieldIndex=new KW(f));const m=rue(l,t!=null?t.spatialReference:null,f,h).then(y=>{const g={scale:0};return(v,w)=>{if(y==null)return null;const b=y.repurposeFeature({geometry:null,attributes:v});return g.scale=w!=null?w.scale??void 0:void 0,y.evaluate({$feature:b,$view:g},y.services)}}).catch(y=>(Z.getLogger(z4).error("Creating dictinoary expression failed:",y),null));return this._dictionaryPromise=m,m}async _cimPartsToCIMSymbol(t,r,n,i){const s=new Array(t.length);for(let l=0;l<t.length;l++)s[l]=this._getSymbolPart(t[l],i);const o=await Promise.all(s),a=this.fieldMap;if(a)for(const l of o)XW(l,a);return new s1({data:this._combineSymbolParts(o,r,n)})}async _getSymbolPart(t,r){if(this._ongoingRequests.has(t))return this._ongoingRequests.get(t).then(s=>s.data);const n=this._refSymbolUrlTemplate.replaceAll(/\{itemName\}/gi,t),i=St(n,{responseType:"json",query:{f:"json"},...r});this._ongoingRequests.set(t,i);try{return(await i).data}catch(s){throw this._ongoingRequests.delete(t),s}}_combineSymbolParts(t,r,n){if(!t||t.length===0)return null;const i={...t[0]};if(t.length>1){i.symbolLayers=[];for(const s of t){const o=s;i.symbolLayers.unshift(...o.symbolLayers)}}return n&&(i.callout=uxe),{type:"CIMSymbolReference",symbol:i,primitiveOverrides:r}}_getFieldName(t){if(this._fieldIndex!==null){const r=this._fieldIndex.get(t);return r?r.name:t}return t}};function XW(e,t){if(!e)return;const r=e.symbolLayers;if(!r)return;let n=r.length;for(;n--;){const i=r[n];i&&i.enable!==!1&&i.type==="CIMVectorMarker"&&cxe(i,t)}}function cxe(e,t){const r=e.markerGraphics;if(r)for(const n of r){if(!n)continue;const i=n.symbol;if(i)switch(i.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":XW(i,t);break;case"CIMTextSymbol":i.fieldMap=t}}}const _3e=Object.freeze(Object.defineProperty({__proto__:null,DictionaryLoader:M3},Symbol.toStringTag,{value:"Module"}));var Sk;let po=Sk=class extends uy(cu){constructor(e){super(e),this.config=null,this.fieldMap=null,this.scaleExpression=null,this.scaleExpressionTitle=null,this.url=null,this.type="dictionary"}get _loader(){return new M3(this.url,this.config,this.fieldMap)}writeData(e,t){e&&(t.scalingExpressionInfo={expression:e,returnType:"number"})}writeVisualVariables(e,t,r,n){n!=null&&n.origin||super.writeVisualVariables(e,t,r,n)}clone(){return new Sk({config:F(this.config),scaleExpression:this.scaleExpression,scaleExpressionTitle:this.scaleExpressionTitle,fieldMap:F(this.fieldMap),url:F(this.url),visualVariables:F(this.visualVariables)})}async getSymbolAsync(e,t){return this._loader.getSymbolAsync(e,t)}async collectRequiredFields(e,t){await this.collectVVRequiredFields(e,t),this.scaleExpression&&await ni(e,t,this.scaleExpression);for(const r in this.fieldMap){const n=this.fieldMap[r];t.has(n)&&e.add(n)}}get arcadeRequired(){return!0}getSymbol(){return null}getSymbols(){return[]}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((e,t)=>e+t.getAttributeHash(),"")}getMeshHash(){return`${this.url}-${JSON.stringify(this.fieldMap)}`}getSymbolFields(){return this._loader.getSymbolFields()}};u([d({type:M3})],po.prototype,"_loader",null),u([d({type:Object,json:{read:{source:"configuration"},write:{target:"configuration"}}})],po.prototype,"config",void 0),u([d({type:Object,json:{write:!0}})],po.prototype,"fieldMap",void 0),u([d({type:String,json:{read:{source:"scalingExpressionInfo.expression"},write:!0}})],po.prototype,"scaleExpression",void 0),u([pe("scaleExpression")],po.prototype,"writeData",null),u([d({type:String,json:{read:{source:"scalingExpressionInfo.title"},write:{target:"scalingExpressionInfo.title",overridePolicy(e){return{enabled:!!e&&!!this.scaleExpression}}}}})],po.prototype,"scaleExpressionTitle",void 0),u([d({type:String,json:{write:!0}})],po.prototype,"url",void 0),u([pe("visualVariables")],po.prototype,"writeVisualVariables",null),po=Sk=u([E("esri.renderers.DictionaryRenderer")],po);const dxe=po;var xk;let vl=xk=class extends Q{constructor(e){super(e),this.color=null,this.field=null,this.label=null,this.valueExpression=null,this.valueExpressionTitle=null}castField(e){return e==null?e:typeof e=="function"?(Z.getLogger(this).error(".field: field must be a string value"),null):Jv(e)}getAttributeHash(){return`${this.field}-${this.valueExpression}`}clone(){return new xk({color:this.color&&this.color.clone(),field:this.field,label:this.label,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};u([d({type:We,json:{type:[Number],write:!0}})],vl.prototype,"color",void 0),u([d({type:String,json:{write:!0}})],vl.prototype,"field",void 0),u([Pt("field")],vl.prototype,"castField",null),u([d({type:String,json:{write:!0}})],vl.prototype,"label",void 0),u([d({type:String,json:{write:!0}})],vl.prototype,"valueExpression",void 0),u([d({type:String,json:{write:!0}})],vl.prototype,"valueExpressionTitle",void 0),vl=xk=u([E("esri.renderers.support.AttributeColorInfo")],vl);const eH=vl;var $k;let db=$k=class extends Q{constructor(){super(...arguments),this.unit=null}clone(){return new $k({unit:this.unit})}};u([d({type:String,json:{write:!0}})],db.prototype,"unit",void 0),db=$k=u([E("esri.renderers.support.DotDensityLegendOptions")],db);const hxe=db;var Tk;let pi=Tk=class extends uy(cu){constructor(e){super(e),this.attributes=null,this.backgroundColor=new We([0,0,0,0]),this.dotBlendingEnabled=!0,this.dotShape="square",this.dotSize=1,this.legendOptions=null,this.outline=new ts,this.dotValue=null,this.referenceScale=null,this.seed=1,this.type="dot-density"}calculateDotValue(e){if(this.referenceScale==null)return this.dotValue;const t=e/this.referenceScale*this.dotValue;return t<1?1:t}getSymbol(){return new pd({outline:this.outline})}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol()]}getAttributeHash(){var e;return((e=this.attributes)==null?void 0:e.reduce((t,r)=>t+r.getAttributeHash(),""))??""}getMeshHash(){return JSON.stringify(this.outline)}clone(){return new Tk({attributes:F(this.attributes),backgroundColor:F(this.backgroundColor),dotBlendingEnabled:F(this.dotBlendingEnabled),dotShape:F(this.dotShape),dotSize:F(this.dotSize),dotValue:F(this.dotValue),legendOptions:F(this.legendOptions),outline:F(this.outline),referenceScale:F(this.referenceScale),visualVariables:F(this.visualVariables),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}getControllerHash(){var t;return`${(t=this.attributes)==null?void 0:t.map(r=>r.field||r.valueExpression||"")}-${this.outline&&JSON.stringify(this.outline.toJSON())||""}`}async collectRequiredFields(e,t){await this.collectVVRequiredFields(e,t);for(const r of this.attributes??[])r.valueExpression&&await ni(e,t,r.valueExpression),r.field&&e.add(r.field)}};u([d({type:[eH],json:{write:!0}})],pi.prototype,"attributes",void 0),u([d({type:We,json:{write:!0}})],pi.prototype,"backgroundColor",void 0),u([d({type:Boolean,json:{write:!0}})],pi.prototype,"dotBlendingEnabled",void 0),u([d({type:String,json:{write:!1}})],pi.prototype,"dotShape",void 0),u([d({type:Number,json:{write:!0}})],pi.prototype,"dotSize",void 0),u([d({type:hxe,json:{write:!0}})],pi.prototype,"legendOptions",void 0),u([d({type:ts,json:{default:null,write:!0}})],pi.prototype,"outline",void 0),u([d({type:Number,json:{write:!0}})],pi.prototype,"dotValue",void 0),u([d({type:Number,json:{write:!0}})],pi.prototype,"referenceScale",void 0),u([d({type:Number,json:{write:!0}})],pi.prototype,"seed",void 0),u([Me({dotDensity:"dot-density"})],pi.prototype,"type",void 0),pi=Tk=u([E("esri.renderers.DotDensityRenderer")],pi);const pxe=pi;var Ek;let jg=Ek=class extends Q{constructor(e){super(e),this.color=null,this.ratio=null}clone(){return new Ek({color:this.color,ratio:this.ratio})}};u([d({type:We,json:{type:[bt],default:null,write:!0}})],jg.prototype,"color",void 0),u([d({type:Number,json:{write:!0}})],jg.prototype,"ratio",void 0),jg=Ek=u([E("esri.renderers.support.HeatmapColorStop")],jg);const hb=jg;let df=class extends kr(Q){constructor(){super(...arguments),this.minLabel=null,this.maxLabel=null,this.title=null}};u([d({type:String,json:{write:!0}})],df.prototype,"minLabel",void 0),u([d({type:String,json:{write:!0}})],df.prototype,"maxLabel",void 0),u([d({type:String,json:{write:!0}})],df.prototype,"title",void 0),df=u([E("esri.renderers.support.HeatmapLegendOptions")],df);function F2(){return[0,0,0,0]}function fxe(e){return[e[0],e[1],e[2],e[3]]}function dy(e,t,r,n){return[e,t,r,n]}function mxe(e){const t=F2(),r=Math.min(4,e.length);for(let n=0;n<r;++n)t[n]=e[n];return t}function yxe(e,t){return new Float64Array(e,t,4)}function tH(){return F2()}function rH(){return dy(1,1,1,1)}function nH(){return dy(1,0,0,0)}function iH(){return dy(0,1,0,0)}function sH(){return dy(0,0,1,0)}function oH(){return dy(0,0,0,1)}const gxe=tH(),vxe=rH(),wxe=nH(),_xe=iH(),bxe=sH(),Sxe=oH();Object.freeze(Object.defineProperty({__proto__:null,ONES:vxe,UNIT_W:Sxe,UNIT_X:wxe,UNIT_Y:_xe,UNIT_Z:bxe,ZEROS:gxe,clone:fxe,create:F2,createView:yxe,fromArray:mxe,fromValues:dy,ones:rH,unitW:oH,unitX:nH,unitY:iH,unitZ:sH,zeros:tH},Symbol.toStringTag,{value:"Module"}));const I3=2.4;function xxe(e){return Kl(e*I3)}function $xe(e){return d7(e)/I3}function Txe(e,t,r,n){let{color:i,ratio:s}=t,{color:o,ratio:a}=r;a===s&&(a===1?s-=1e-6:a+=1e-6);const l=Yi((n-s)/(a-s),0,1);vU(e,i.toArray(),o.toArray(),l)}function S3e(e){const r=new Uint8ClampedArray(2048);if(e=e.filter(({ratio:a})=>a>=0&&a<=1).sort((a,l)=>a.ratio-l.ratio).map(({color:a,ratio:l})=>({color:a,ratio:Math.max(l,.001)})),e.length<1)return r;let n=e[0],i=e[0],s=1;const o=F2();for(let a=0;a<512;a++){const l=(a+.5)/512;for(;l>i.ratio&&s<e.length;)n=i,i=e[s++];Txe(o,n,i,l),r.set(o,4*a)}return r}function x3e(e,t,r,n){const{radius:i,fieldOffset:s,field:o}=t,a=Math.round(d7(i)),l=new Float64Array(r*n);let c,h=Number.NEGATIVE_INFINITY;const f=Ixe(o,s),m=new Set;for(const y of e){const g=y.getCursor();for(;g.next();){const v=g.getObjectId();if(m.has(v))continue;m.add(v);const w=g.readLegacyPointGeometry(),b=128;if(w.x<-b||w.x>=r+b||w.y<-b||w.y>n+b)continue;const S=+f(g),_=Math.max(0,Math.round(w.x)-a),x=Math.max(0,Math.round(w.y)-a),T=Math.min(n,Math.round(w.y)+a),I=Math.min(r,Math.round(w.x)+a);for(let C=x;C<T;C++)for(let O=_;O<I;O++){const W=C*r+O,z=Mxe(w.x-O,w.y-C,a);c=l[W]+=z*S,c>h&&(h=c)}}}return{matrix:l.buffer,max:h}}function $3e(e,t,r,n,i,s){e.canvas.width=e.canvas.height=t,e.clearRect(0,0,t,t);const o=e.getImageData(0,0,t,t);r&&n&&o.data.set(new Uint8ClampedArray(Exe(t,r,n,i,s))),e.putImageData(o,0,0)}function Exe(e,t,r,n,i){const s=new Uint32Array(e*e),o="buffer"in t?t:new Float64Array(t),a="buffer"in r?new Uint32Array(r.buffer):new Uint32Array(new Uint8Array(r).buffer),l=a.length/(i-n);for(let c=0;c<o.length;c++){const h=o[c],f=Math.floor((h-n)*l);s[c]=a[Yi(f,0,a.length-1)]}return s.buffer}function Mxe(e,t,r){const n=Math.sqrt(e**2+t**2)/r;return n>1?0:3/(Math.PI*r**2)*(1-n**2)**2}function T3e(e,t){return typeof e=="function"?e:e?typeof t=="string"?r=>-1*+r[e]:r=>+r[e]+t:()=>1}function Ixe(e,t){return e!=null?typeof t=="string"?r=>-1*+r.readAttribute(e):r=>+r.readAttribute(e)+t:r=>1}var Mk;const aH="esri.renderers.HeatmapRenderer",Cxe=Z.getLogger(aH);function U4(e){if(e!=null){const{maxDensity:t,minDensity:r,radius:n}=e;if(t!=null||r!=null||n!=null){const{blurRadius:i,maxPixelIntensity:s,minPixelIntensity:o,...a}=e;return a}}return e}let qr=Mk=class extends cu{constructor(e){super(e),this.authoringInfo=null,this.colorStops=[new hb({ratio:0,color:new We("rgba(255, 140, 0, 0)")}),new hb({ratio:.75,color:new We("rgba(255, 140, 0, 1)")}),new hb({ratio:.9,color:new We("rgba(255, 0,   0, 1)")})],this.field=null,this.fieldOffset=0,this.legendOptions=null,this.maxDensity=.04,this.minDensity=0,this.radius=18,this.referenceScale=0,this.type="heatmap",this.valueExpression=null,this.valueExpressionTitle=null,this._warnedProps={blurRadius:!1,maxPixelIntensity:!1,minPixelIntensity:!1}}normalizeCtorArgs(e){return U4(e)}get blurRadius(){return $xe(this.radius)}set blurRadius(e){const t=this.maxPixelIntensity,r=this.minPixelIntensity;this._set("radius",xxe(e)),this._warnAboutDeprecatedGaussianBlurProp("blurRadius","radius"),this._set("maxDensity",t*this._pixelIntensityToDensity),this._set("minDensity",r*this._pixelIntensityToDensity)}get maxPixelIntensity(){return this.maxDensity/this._pixelIntensityToDensity}set maxPixelIntensity(e){this._set("maxDensity",e*this._pixelIntensityToDensity),this._warnAboutDeprecatedGaussianBlurProp("maxPixelIntensity","maxDensity")}get minPixelIntensity(){return this.minDensity/this._pixelIntensityToDensity}set minPixelIntensity(e){this._set("minDensity",e*this._pixelIntensityToDensity),this._warnAboutDeprecatedGaussianBlurProp("minPixelIntensity","minDensity")}get _pixelIntensityToDensity(){return 24/(I3**2*this.blurRadius**4)}_warnAboutDeprecatedGaussianBlurProp(e,t){this._warnedProps[e]||Xr(this).getDefaultOrigin()==="user"&&(this._warnedProps[e]=!0,Bm(()=>{lz(Cxe,e,{replacement:`${String(t)} (suggested value: ${this._get(t)})`,version:"4.24"})}))}read(e,t){e=U4(e),super.read(e,t)}getSymbol(){return new fd}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol()]}async collectRequiredFields(e,t){const r=this.field,n=this.valueExpression;r&&typeof r=="string"&&await Zi(e,t,r),n&&typeof n=="string"&&await ni(e,t,n)}getAttributeHash(){return null}getMeshHash(){return`${JSON.stringify(this.colorStops)}.${this.blurRadius}.${this.field}`}clone(){return new Mk({authoringInfo:this.authoringInfo&&this.authoringInfo.clone(),colorStops:F(this.colorStops),field:this.field,legendOptions:F(this.legendOptions),maxDensity:this.maxDensity,minDensity:this.minDensity,radius:this.radius,referenceScale:this.referenceScale,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};u([d({type:LW,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],qr.prototype,"authoringInfo",void 0),u([d({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],qr.prototype,"blurRadius",null),u([d({type:[hb],json:{write:!0}})],qr.prototype,"colorStops",void 0),u([d({type:String,json:{write:!0}})],qr.prototype,"field",void 0),u([d({type:Number,json:{write:{overridePolicy:(e,t,r)=>({enabled:r==null})},origins:{"web-scene":{write:!1}}}})],qr.prototype,"fieldOffset",void 0),u([d({type:df,json:{write:!0}})],qr.prototype,"legendOptions",void 0),u([d({type:Number,json:{write:!0}})],qr.prototype,"maxDensity",void 0),u([d({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],qr.prototype,"maxPixelIntensity",null),u([d({type:Number,json:{write:!0}})],qr.prototype,"minDensity",void 0),u([d({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],qr.prototype,"minPixelIntensity",null),u([d({type:Number,cast:At,json:{write:!0}})],qr.prototype,"radius",void 0),u([d({type:Number,range:{min:0},json:{default:0,write:!0}})],qr.prototype,"referenceScale",void 0),u([Me({heatmap:"heatmap"})],qr.prototype,"type",void 0),u([d({type:String,json:{write:!0,origins:{"web-document":{write:!1},"portal-item":{write:!1}}}})],qr.prototype,"valueExpression",void 0),u([d({type:String})],qr.prototype,"valueExpressionTitle",void 0),u([d({readOnly:!0})],qr.prototype,"_pixelIntensityToDensity",null),qr=Mk=u([E(aH)],qr);const lH=qr;let bh=class extends kr(Q){constructor(){super(...arguments),this.color=new We([0,0,0,0]),this.label=null,this.threshold=0}};u([d({type:We,json:{write:!0}})],bh.prototype,"color",void 0),u([d({type:String,json:{write:!0}})],bh.prototype,"label",void 0),u([d({type:Number,range:{min:0,max:1},json:{write:!0}})],bh.prototype,"threshold",void 0),bh=u([E("esri.renderers.support.OthersCategory")],bh);let pb=class extends kr(Q){constructor(){super(...arguments),this.title=null}};u([d({type:String,json:{write:!0}})],pb.prototype,"title",void 0),pb=u([E("esri.renderers.support.PieChartLegendOptions")],pb);let Ni=class extends uy(kr(cu)){constructor(t){super(t),this.attributes=null,this.backgroundFillSymbol=null,this.defaultColor=new We([0,0,0,0]),this.defaultLabel=null,this.holePercentage=0,this.othersCategory=new bh,this.legendOptions=null,this.outline=null,this.size=12,this.type="pie-chart"}getSymbol(){var t;return new fd({size:this.size?this.size/2+(((t=this.outline)==null?void 0:t.width)||0):0})}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol(),this.backgroundFillSymbol].filter(Ll)}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((t,r)=>t+r.getAttributeHash(),"")}getMeshHash(){return this.getSymbols().reduce((t,r)=>t+JSON.stringify(r),"")}async collectRequiredFields(t,r){await this.collectVVRequiredFields(t,r);for(const n of this.attributes)n.valueExpression&&await ni(t,r,n.valueExpression),n.field&&t.add(n.field)}};u([d({type:[eH],json:{write:!0}})],Ni.prototype,"attributes",void 0),u([d({type:pd,json:{default:null,write:!0}})],Ni.prototype,"backgroundFillSymbol",void 0),u([d({type:We,json:{write:!0}})],Ni.prototype,"defaultColor",void 0),u([d({type:String,json:{write:!0}})],Ni.prototype,"defaultLabel",void 0),u([d({type:Number,range:{min:0,max:1},json:{write:!0}})],Ni.prototype,"holePercentage",void 0),u([d({type:bh,json:{write:!0}})],Ni.prototype,"othersCategory",void 0),u([d({type:pb,json:{write:!0}})],Ni.prototype,"legendOptions",void 0),u([d({type:ts,json:{default:null,write:!0}})],Ni.prototype,"outline",void 0),u([d({type:Number,cast:At,json:{write:!0}})],Ni.prototype,"size",void 0),u([Me({pieChart:"pie-chart"})],Ni.prototype,"type",void 0),Ni=u([E("esri.renderers.PieChartRenderer")],Ni);const kxe=Ni;var Ik;let lh=Ik=class extends uy(cu){constructor(e){super(e),this.description=null,this.label=null,this.symbol=null,this.type="simple"}async collectRequiredFields(e,t){await Promise.all([this.collectSymbolFields(e,t),this.collectVVRequiredFields(e,t)])}async collectSymbolFields(e,t){await Promise.all(this.getSymbols().map(r=>r.collectRequiredFields(e,t)))}getSymbol(e,t){return this.symbol}async getSymbolAsync(e,t){return this.symbol}getSymbols(){return this.symbol?[this.symbol]:[]}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((e,t)=>e+t.getAttributeHash(),"")}getMeshHash(){return this.getSymbols().reduce((e,t)=>e+JSON.stringify(t),"")}get arcadeRequired(){return this.arcadeRequiredForVisualVariables}clone(){return new Ik({description:this.description,label:this.label,symbol:this.symbol&&this.symbol.clone(),visualVariables:F(this.visualVariables),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}};u([d({type:String,json:{write:!0}})],lh.prototype,"description",void 0),u([d({type:String,json:{write:!0}})],lh.prototype,"label",void 0),u([d(cy)],lh.prototype,"symbol",void 0),u([Me({simple:"simple"})],lh.prototype,"type",void 0),lh=Ik=u([E("esri.renderers.SimpleRenderer")],lh);const uH=lh,Pxe=["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"];function Ck(e){return e instanceof $e}function G4(e){return e instanceof Le?Object.keys(e.items):Ck(e)?Xr(e).keys():e?Object.keys(e):[]}function Uw(e,t){return e instanceof Le?e.items[t]:e[t]}function Oxe(e,t){return!(!Array.isArray(e)||!Array.isArray(t))&&e.length!==t.length}function T0(e){return e?e.declaredClass:null}function cH(e,t){var f;const r=e.diff;if(r&&typeof r=="function")return r(e,t);const n=G4(e),i=G4(t);if(n.length===0&&i.length===0)return;if(!n.length||!i.length||Oxe(e,t))return{type:"complete",oldValue:e,newValue:t};const s=i.filter(m=>!n.includes(m)),o=n.filter(m=>!i.includes(m)),a=n.filter(m=>i.includes(m)&&Uw(e,m)!==Uw(t,m)).concat(s,o).sort(),l=T0(e);if(l&&Pxe.includes(l)&&a.length)return{type:"complete",oldValue:e,newValue:t};let c;const h=Ck(e)&&Ck(t);for(const m of a){const y=Uw(e,m),g=Uw(t,m);let v;if((h||typeof y!="function"&&typeof g!="function")&&y!==g&&(y!=null||g!=null)){if(r&&r[m]&&typeof r[m]=="function")v=(f=r[m])==null?void 0:f.call(r,y,g);else if(y instanceof Date&&g instanceof Date){if(y.getTime()===g.getTime())continue;v={type:"complete",oldValue:y,newValue:g}}else v=typeof y=="object"&&typeof g=="object"&&T0(y)===T0(g)?cH(y,g):{type:"complete",oldValue:y,newValue:g};v!=null&&(c!=null?c.diff[m]=v:c={type:"partial",diff:{[m]:v}})}}return c}function Rxe(e,t){if(e==null)return!1;const r=t.split(".");let n=e;for(const i of r){if(n.type==="complete")return!0;if(n.type!=="partial")return!1;{const s=n.diff[i];if(!s)return!1;n=s}}return!0}function C3e(e,t){for(const r of t)if(Rxe(e,r))return!0;return!1}function Axe(e,t){if(typeof e!="function"&&typeof t!="function"&&(e!=null||t!=null))return e==null||t==null||typeof e=="object"&&typeof t=="object"&&T0(e)!==T0(t)?{type:"complete",oldValue:e,newValue:t}:cH(e,t)}let hf=class extends kr(Q){constructor(t){super(t),this.value=null,this.value2=null,this.value3=null}};u([d(lb)],hf.prototype,"value",void 0),u([d(lb)],hf.prototype,"value2",void 0),u([d(lb)],hf.prototype,"value3",void 0),hf=u([E("esri.renderers.support.UniqueValue")],hf);const lm=hf;let ec=class extends kr(Q){constructor(t){super(t),this.description=null,this.label=null,this.symbol=null,this.values=null}castValues(t){if(t==null)return null;const r=typeof(t=Array.isArray(t)?t:[t])[0];return r==="string"||r==="number"?t.map(n=>new lm({value:n})):r==="object"?t[0]instanceof lm?t:t.map(n=>new lm(n)):null}};u([d({type:String,json:{write:!0}})],ec.prototype,"description",void 0),u([d({type:String,json:{write:!0}})],ec.prototype,"label",void 0),u([d(cy)],ec.prototype,"symbol",void 0),u([d({type:[lm],json:{type:[[String]],read:{reader:e=>e?e.map(t=>new lm({value:t[0],value2:t[1],value3:t[2]})):null},write:{writer:(e,t)=>{const r=[];for(const n of e){const i=[n.value,n.value2,n.value3].filter(Ll).map(s=>s.toString());r.push(i)}t.values=r}}}})],ec.prototype,"values",void 0),u([Pt("values")],ec.prototype,"castValues",null),ec=u([E("esri.renderers.support.UniqueValueClass")],ec);const dH=ec;let Vg=class extends kr(Q){constructor(t){super(t),this.heading=null,this.classes=null}};u([d({type:String,json:{write:!0}})],Vg.prototype,"heading",void 0),u([d({type:[dH],json:{write:!0}})],Vg.prototype,"classes",void 0),Vg=u([E("esri.renderers.support.UniqueValueGroup")],Vg);const kk=Vg;var Pk;let uh=Pk=class extends Q{constructor(e){super(e),this.description=null,this.label=null,this.symbol=null,this.value=null}clone(){return new Pk({value:this.value,description:this.description,label:this.label,symbol:this.symbol?this.symbol.clone():null})}getMeshHash(){const e=JSON.stringify(this.symbol&&this.symbol.toJSON());return`${this.value}.${e}`}};u([d({type:String,json:{write:!0}})],uh.prototype,"description",void 0),u([d({type:String,json:{write:!0}})],uh.prototype,"label",void 0),u([d(cy)],uh.prototype,"symbol",void 0),u([d(lb)],uh.prototype,"value",void 0),uh=Pk=u([E("esri.renderers.support.UniqueValueInfo")],uh);const E0=uh,Lxe=()=>!!V("enable-feature:force-wosr"),Nxe=()=>V.add("enable-feature:direct-3d-object-feature-layer-display",!0,!0,!0),Dxe=()=>V.add("enable-feature:direct-3d-object-feature-layer-display",!1,!0,!0),Fxe=()=>V.add("enable-i3s-patching",!0,!0,!0),jxe=()=>V.add("enable-i3s-patching",!1,!0,!0),R3e=()=>!!V("enable-feature:SceneLayer-editing"),Vxe=(e="i3s-patching")=>{switch(jxe(),Dxe(),V.add("enable-feature:SceneLayer-editing",!0,!0,!0),e){case"feature-layer-view":Nxe();break;case"i3s-patching":Fxe()}};Vxe("i3s-patching");let LT={};async function zxe(e,t){try{return{data:(await qxe(e,t)).data,baseUrl:Rie(e),styleUrl:e}}catch(r){return Ea(r),null}}function Uxe(e,t,r){const n=t.portal!=null?t.portal:hn.getDefault();let i;const s=`${n.url} - ${n.user&&n.user.username} - ${e}`;return LT[s]||(LT[s]=Gxe(e,n,r).then(o=>(i=o,o.fetchData())).then(o=>({data:o,baseUrl:i.itemUrl??"",styleName:e}))),LT[s]}function Gxe(e,t,r){return t.load(r).then(()=>{const n=new Ca({disableExtraQuery:!0,query:`owner:${B4} AND type:${q4} AND typekeywords:"${e}"`});return t.queryItems(n,r)}).then(({results:n})=>{var o;let i=null;const s=e.toLowerCase();if(n&&Array.isArray(n)){for(const a of n)if(((o=a.typeKeywords)==null?void 0:o.some(c=>c.toLowerCase()===s))&&a.type===q4&&a.owner===B4){i=a;break}}if(!i)throw new N("symbolstyleutils:style-not-found",`The style '${e}' could not be found`,{styleName:e});return i.load(r)})}function Bxe(e,t,r){return e&&e.styleUrl!=null?zxe(e.styleUrl,r):e&&e.styleName!=null?Uxe(e.styleName,t,r):Promise.reject(new N("symbolstyleutils:style-url-and-name-missing","Either styleUrl or styleName is required to resolve a style"))}function A3e(e){return e===null||e.type==="CIMSymbolReference"?e:{type:"CIMSymbolReference",symbol:e}}function L3e(e,t,r=["gltf"]){if(t==="cimRef")return e.cimRef;if(e.formatInfos&&!Lxe())for(const n of r){const i=e.formatInfos.find(s=>s.type===n);if(i)return i.href}return e.webRef}function qxe(e,t){const r={responseType:"json",query:{f:"json"},...t};return St(Lo(e),r)}const B4="esri_en",q4="Style",N3e="https://cdn.arcgis.com/sharing/rest/content/items/220936cc6ed342c9937abd8f180e7d1e/resources/styles/cim/{SymbolName}.json?f=json";var zg;const hH="esri.renderers.UniqueValueRenderer",Pu=Z.getLogger(hH),W4="uvInfos-watcher",H4="uvGroups-watcher",Wxe=",",Hxe=gr(E0);function Zxe(e){const{field1:t,field2:r,field3:n,fieldDelimiter:i,uniqueValueInfos:s,valueExpression:o}=e,a=!(!t||!r);return[{classes:(s??[]).map(l=>{var b;const{symbol:c,label:h,value:f,description:m}=l,[y,g,v]=a?((b=f==null?void 0:f.toString())==null?void 0:b.split(i||""))||[]:[f],w=[];return(t||o)&&w.push(y),r&&w.push(g),n&&w.push(v),{symbol:c,label:h,values:[w],description:m}})}]}let Kt=zg=class extends uy(cu){constructor(e){super(e),this._valueInfoMap={},this._isDefaultSymbolDerived=!1,this._isInfosSource=null,this.type="unique-value",this.backgroundFillSymbol=null,this.orderByClassesEnabled=!1,this.valueExpressionTitle=null,this.legendOptions=null,this.defaultLabel=null,this.portal=null,this.styleOrigin=null,this.diff={uniqueValueInfos(t,r){if(!t&&!r)return;if(!t||!r)return{type:"complete",oldValue:t,newValue:r};let n=!1;const i={type:"collection",added:[],removed:[],changed:[],unchanged:[]};for(let s=0;s<r.length;s++){const o=t.find(a=>a.value===r[s].value);o?Axe(o,r[s])?(i.changed.push({type:"complete",oldValue:o,newValue:r[s]}),n=!0):i.unchanged.push({oldValue:o,newValue:r[s]}):(i.added.push(r[s]),n=!0)}for(let s=0;s<t.length;s++)r.find(o=>o.value===t[s].value)||(i.removed.push(t[s]),n=!0);return n?i:void 0}},this._set("uniqueValueInfos",[]),this._set("uniqueValueGroups",[])}get _cache(){return{compiledFunc:null}}set field(e){this._set("field",e),this._updateFieldDelimiter(),this._updateUniqueValues()}castField(e){return e==null||typeof e=="function"?e:Jv(e)}writeField(e,t,r,n){typeof e=="string"?t[r]=e:n&&n.messages?n.messages.push(new N("property:unsupported","UniqueValueRenderer.field set to a function cannot be written to JSON")):Pu.error(".field: cannot write field to JSON since it's not a string value")}set field2(e){this._set("field2",e),this._updateFieldDelimiter(),this._updateUniqueValues()}set field3(e){this._set("field3",e),this._updateUniqueValues()}set valueExpression(e){this._set("valueExpression",e),this._updateUniqueValues()}set defaultSymbol(e){this._isDefaultSymbolDerived=!1,this._set("defaultSymbol",e)}set fieldDelimiter(e){this._set("fieldDelimiter",e),this._updateUniqueValues()}readPortal(e,t,r){return r.portal||hn.getDefault()}readStyleOrigin(e,t,r){if(t.styleName)return Object.freeze({styleName:t.styleName});if(t.styleUrl){const n=Xm(t.styleUrl,r);return Object.freeze({styleUrl:n})}}writeStyleOrigin(e,t,r,n){e.styleName?t.styleName=e.styleName:e.styleUrl&&(t.styleUrl=a1(e.styleUrl,n))}set uniqueValueGroups(e){this.styleOrigin?Pu.error("#uniqueValueGroups=","Cannot modify unique value groups of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueGroups",e),this._updateInfosFromGroups(),this._isInfosSource=!1,this._watchUniqueValueGroups())}set uniqueValueInfos(e){this.styleOrigin?Pu.error("#uniqueValueInfos=","Cannot modify unique value infos of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueInfos",e),this._updateValueInfoMap(),this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos())}addUniqueValueInfo(e,t){var n;if(this.styleOrigin)return void Pu.error("#addUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");let r;r=typeof e=="object"?Hxe(e):new E0({value:e,symbol:B7(t)}),(n=this.uniqueValueInfos)==null||n.push(r),this._valueInfoMap[r.value]=r,this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos()}removeUniqueValueInfo(e){if(this.styleOrigin)return void Pu.error("#removeUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");const t=this.uniqueValueInfos;if(t){for(let r=0;r<t.length;r++)if(t[r].value===e+""){delete this._valueInfoMap[e],t.splice(r,1);break}}this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos()}async getUniqueValueInfo(e,t){let r=t;return!this.valueExpression||t!=null&&t.arcade!=null||(r={...r,arcade:await up()}),this._getUniqueValueInfo(e,r)}getSymbol(e,t){if(this.valueExpression&&(t==null||t.arcade==null))return void Pu.error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const r=this._getUniqueValueInfo(e,t);return r&&r.symbol||this.defaultSymbol}async getSymbolAsync(e,t){let r=t;if(this.valueExpression&&(r==null||r.arcade==null)){const i=await up(),{arcadeUtils:s}=i;s.hasGeometryOperations(this.valueExpression)&&await s.enableGeometryOperations(),r={...r,arcade:i}}const n=this._getUniqueValueInfo(e,r);return n&&n.symbol||this.defaultSymbol}getSymbols(){const e=[];for(const t of this.uniqueValueInfos??[])t.symbol&&e.push(t.symbol);return this.defaultSymbol&&e.push(this.defaultSymbol),e}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((e,t)=>e+t.getAttributeHash(),"")}getMeshHash(){var n;const e=JSON.stringify(this.backgroundFillSymbol),t=JSON.stringify(this.defaultSymbol),r=(n=this.uniqueValueInfos)==null?void 0:n.reduce((i,s)=>i+s.getMeshHash(),"");return`${e}.${t}.${r}.${`${this.field}.${this.field2}.${this.field3}.${this.fieldDelimiter}`}.${this.valueExpression}`}clone(){const e=new zg({field:this.field,field2:this.field2,field3:this.field3,defaultLabel:this.defaultLabel,defaultSymbol:F(this.defaultSymbol),orderByClassesEnabled:this.orderByClassesEnabled,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,fieldDelimiter:this.fieldDelimiter,visualVariables:F(this.visualVariables),legendOptions:F(this.legendOptions),authoringInfo:this.authoringInfo&&this.authoringInfo.clone(),backgroundFillSymbol:F(this.backgroundFillSymbol)});this._isDefaultSymbolDerived&&(e._isDefaultSymbolDerived=!0),e._set("portal",this.portal);const t=F(this.uniqueValueInfos),r=F(this.uniqueValueGroups);return this.styleOrigin&&(e._set("styleOrigin",Object.freeze(F(this.styleOrigin))),Object.freeze(t),Object.freeze(r)),e._set("uniqueValueInfos",t),e._updateValueInfoMap(),e._set("uniqueValueGroups",r),e._isInfosSource=this._isInfosSource,e._watchUniqueValueInfosAndGroups(),e}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}async collectRequiredFields(e,t){const r=[this.collectVVRequiredFields(e,t),this.collectSymbolFields(e,t)];await Promise.all(r)}async collectSymbolFields(e,t){const r=[...this.getSymbols().map(n=>n.collectRequiredFields(e,t)),ni(e,t,this.valueExpression)];Zi(e,t,this.field),Zi(e,t,this.field2),Zi(e,t,this.field3),await Promise.all(r)}populateFromStyle(){return Bxe(this.styleOrigin,{portal:this.portal}).then(e=>{var r;const t=[];return this._valueInfoMap={},e&&e.data&&Array.isArray(e.data.items)&&e.data.items.forEach(n=>{const i=new xp({styleUrl:e.styleUrl,styleName:e.styleName,portal:this.portal,name:n.name});this.defaultSymbol||n.name!==e.data.defaultItem||(this.defaultSymbol=i,this._isDefaultSymbolDerived=!0);const s=new E0({value:n.name,symbol:i});t.push(s),this._valueInfoMap[n.name]=s}),this._set("uniqueValueInfos",Object.freeze(t)),this._updateGroupsFromInfos(!0),this._isInfosSource=null,this._watchUniqueValueInfos(),!this.defaultSymbol&&((r=this.uniqueValueInfos)!=null&&r.length)&&(this.defaultSymbol=this.uniqueValueInfos[0].symbol,this._isDefaultSymbolDerived=!0),this})}_updateFieldDelimiter(){this.field&&this.field2&&!this.fieldDelimiter&&this._set("fieldDelimiter",Wxe)}_updateUniqueValues(){this._isInfosSource!=null&&(this._isInfosSource?this._updateGroupsFromInfos():this._updateInfosFromGroups())}_updateValueInfoMap(){this._valueInfoMap={};const{uniqueValueInfos:e}=this;if(e)for(const t of e)this._valueInfoMap[t.value+""]=t}_watchUniqueValueInfosAndGroups(){this._watchUniqueValueInfos(),this._watchUniqueValueGroups()}_watchUniqueValueInfos(){this.removeHandles(W4);const{uniqueValueInfos:e}=this;if(e){const t=[];for(const r of e)t.push(Ee(()=>({symbol:r.symbol,value:r.value,label:r.label,description:r.description}),(n,i)=>{n!==i&&(this._updateGroupsFromInfos(),this._isInfosSource=!0)},{sync:!0}));this.addHandles(t,W4)}}_watchUniqueValueGroups(){this.removeHandles(H4);const{uniqueValueGroups:e}=this;if(e){const t=[];for(const r of e){t.push(Ee(()=>({classes:r.classes}),(n,i)=>{n!==i&&(this._updateInfosFromGroups(),this._isInfosSource=!1)},{sync:!0}));for(const n of r.classes??[])t.push(Ee(()=>({symbol:n.symbol,values:n.values,label:n.label,description:n.description}),(i,s)=>{i!==s&&(this._updateInfosFromGroups(),this._isInfosSource=!1)},{sync:!0}))}this.addHandles(t,H4)}}_updateInfosFromGroups(){if(!this.uniqueValueGroups)return this._set("uniqueValueInfos",null),this._updateValueInfoMap(),void this._watchUniqueValueInfos();const e=[],{field:t,field2:r,field3:n,fieldDelimiter:i,uniqueValueGroups:s,valueExpression:o}=this;if(!t&&!o)return this._set("uniqueValueInfos",e),this._updateValueInfoMap(),void this._watchUniqueValueInfos();const a=!(!t||!r);for(const l of s)for(const c of l.classes??[]){const{symbol:h,label:f,values:m,description:y}=c;for(const g of m??[]){const{value:v,value2:w,value3:b}=g,S=[v];r&&S.push(w),n&&S.push(b);const _=a?S.join(i||""):S[0];e.push(new E0({symbol:h,label:f,value:_,description:y}))}}this._set("uniqueValueInfos",e),this._updateValueInfoMap(),this._watchUniqueValueInfos()}_updateGroupsFromInfos(e=!1){if(!this.uniqueValueInfos)return this._set("uniqueValueGroups",null),void this._watchUniqueValueGroups();const{field:t,field2:r,valueExpression:n,fieldDelimiter:i,uniqueValueInfos:s}=this;if(!t&&!n||!s.length)return this._set("uniqueValueGroups",[]),void this._watchUniqueValueGroups();const o=!(!t||!r),a=s.map(c=>{var b;const{symbol:h,label:f,value:m,description:y}=c,[g,v,w]=o?((b=m==null?void 0:m.toString())==null?void 0:b.split(i||""))||[]:[m];return new dH({symbol:h,label:f,description:y,values:[new lm({value:g,value2:v,value3:w})]})}),l=[new kk({classes:a})];e&&Object.freeze(l),this._set("uniqueValueGroups",l),this._watchUniqueValueGroups()}_getUniqueValueInfo(e,t){return this.valueExpression?this._getUnqiueValueInfoForExpression(e,t):this._getUnqiueValueInfoForFields(e)}_getUnqiueValueInfoForExpression(e,t){const{viewingMode:r,scale:n,spatialReference:i,arcade:s}=t??{};let o=this._cache.compiledFunc;const a=s.arcadeUtils;if(!o){const c=a.createSyntaxTree(this.valueExpression);o=a.createFunction(c),this._cache.compiledFunc=o}const l=a.executeFunction(o,a.createExecContext(e,a.getViewInfo({viewingMode:r,scale:n,spatialReference:i})));return this._valueInfoMap[l+""]}_getUnqiueValueInfoForFields(e){const t=this.field,r=e.attributes;let n;if(typeof t!="function"&&this.field2){const i=this.field2,s=this.field3,o=[];t&&o.push(r[t]),i&&o.push(r[i]),s&&o.push(r[s]),n=o.join(this.fieldDelimiter||"")}else typeof t=="function"?n=t(e):t&&(n=r[t]);return this._valueInfoMap[n+""]}static fromPortalStyle(e,t){const r=new zg(t&&t.properties);r._set("styleOrigin",Object.freeze({styleName:e})),r._set("portal",t&&t.portal||hn.getDefault());const n=r.populateFromStyle();return n.catch(i=>{Pu.error(`#fromPortalStyle('${e}'[, ...])`,"Failed to create unique value renderer from style name",i)}),n}static fromStyleUrl(e,t){const r=new zg(t&&t.properties);r._set("styleOrigin",Object.freeze({styleUrl:e}));const n=r.populateFromStyle();return n.catch(i=>{Pu.error(`#fromStyleUrl('${e}'[, ...])`,"Failed to create unique value renderer from style URL",i)}),n}};u([d({readOnly:!0})],Kt.prototype,"_cache",null),u([Me({uniqueValue:"unique-value"})],Kt.prototype,"type",void 0),u([d(JW)],Kt.prototype,"backgroundFillSymbol",void 0),u([d({value:null,json:{type:String,read:{source:"field1"},write:{target:"field1"}}})],Kt.prototype,"field",null),u([Pt("field")],Kt.prototype,"castField",null),u([pe("field")],Kt.prototype,"writeField",null),u([d({type:String,value:null,json:{write:!0}})],Kt.prototype,"field2",null),u([d({type:String,value:null,json:{write:!0}})],Kt.prototype,"field3",null),u([d({type:Boolean,json:{name:"drawInClassOrder",default:!1,write:!0,origins:{"web-scene":{write:!1}}}})],Kt.prototype,"orderByClassesEnabled",void 0),u([d({type:String,value:null,json:{write:!0}})],Kt.prototype,"valueExpression",null),u([d({type:String,json:{write:!0}})],Kt.prototype,"valueExpressionTitle",void 0),u([d({type:am,json:{write:!0}})],Kt.prototype,"legendOptions",void 0),u([d({type:String,json:{write:!0}})],Kt.prototype,"defaultLabel",void 0),u([d(vV({...cy},{json:{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}},origins:{"web-scene":{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}}}}}}))],Kt.prototype,"defaultSymbol",null),u([d({type:String,value:null,json:{write:!0}})],Kt.prototype,"fieldDelimiter",null),u([d({type:hn,readOnly:!0})],Kt.prototype,"portal",void 0),u([we("portal",["styleName"])],Kt.prototype,"readPortal",null),u([d({readOnly:!0,json:{write:{enabled:!1,overridePolicy:()=>({enabled:!0})}}})],Kt.prototype,"styleOrigin",void 0),u([we("styleOrigin",["styleName","styleUrl"])],Kt.prototype,"readStyleOrigin",null),u([pe("styleOrigin",{styleName:{type:String},styleUrl:{type:String}})],Kt.prototype,"writeStyleOrigin",null),u([d({type:[kk],json:{read:{source:["uniqueValueGroups","uniqueValueInfos"],reader:(e,t,r)=>(t.uniqueValueGroups||Zxe(t)).map(n=>kk.fromJSON(n,r))},write:{overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],Kt.prototype,"uniqueValueGroups",null),u([d({type:[E0],json:{read:!1,write:{overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],Kt.prototype,"uniqueValueInfos",null),Kt=zg=u([E(hH)],Kt);const pH=Kt,fH={key:"type",base:cu,typeMap:{heatmap:lH,simple:uH,"unique-value":pH,"class-breaks":YW,"dot-density":pxe,dictionary:dxe,"pie-chart":kxe},errorContext:"renderer"},Jxe={key:"type",base:cu,typeMap:{simple:uH,"unique-value":pH,"class-breaks":YW,heatmap:lH},errorContext:"renderer"};function D3e(e,t){return Yxe(e,null,t)}const Qxe=Qv({types:fH});function Yxe(e,t,r){return e?e&&(e.styleName||e.styleUrl)&&e.type!=="uniqueValue"?(r&&r.messages&&r.messages.push(new qo("renderer:unsupported","Only UniqueValueRenderer can be referenced from a web style, but found '"+e.type+"'",{definition:e,context:r})),null):Qxe(e,t,r):null}async function F3e(e,t){const{WhereClause:r}=await ie(()=>import("./WhereClause-3339dfce.js").then(n=>n.W),["assets/WhereClause-3339dfce.js","assets/executionError-c92d3b85.js"]);return r.create(e,t)}function C3(e,t){return e!=null?t!=null?`(${e}) AND (${t})`:e:t}var Ok;let Ug=Ok=class extends Q{constructor(e){super(e),this.name=null,this.code=null}clone(){return new Ok({name:this.name,code:this.code})}};u([d({type:String,json:{write:!0}})],Ug.prototype,"name",void 0),u([d({type:[String,Number],json:{write:!0}})],Ug.prototype,"code",void 0),Ug=Ok=u([E("esri.layers.support.CodedValue")],Ug);const Kxe=new xt({inherited:"inherited",codedValue:"coded-value",range:"range"});let Gg=class extends Q{constructor(t){super(t),this.name=null,this.type=null}};u([d({type:String,json:{write:!0}})],Gg.prototype,"name",void 0),u([Me(Kxe)],Gg.prototype,"type",void 0),Gg=u([E("esri.layers.support.Domain")],Gg);const j2=Gg;var Rk;let Bg=Rk=class extends j2{constructor(e){super(e),this.codedValues=null,this.type="coded-value"}getName(e){let t=null;if(this.codedValues){const r=String(e);this.codedValues.some(n=>(String(n.code)===r&&(t=n.name),!!t))}return t}clone(){return new Rk({codedValues:F(this.codedValues),name:this.name})}};u([d({type:[Ug],json:{write:!0}})],Bg.prototype,"codedValues",void 0),u([Me({codedValue:"coded-value"})],Bg.prototype,"type",void 0),Bg=Rk=u([E("esri.layers.support.CodedValueDomain")],Bg);const mH=Bg;var Ak;let fb=Ak=class extends j2{constructor(e){super(e),this.type="inherited"}clone(){return new Ak}};u([Me({inherited:"inherited"})],fb.prototype,"type",void 0),fb=Ak=u([E("esri.layers.support.InheritedDomain")],fb);const yH=fb;var Lk;let pf=Lk=class extends j2{constructor(e){super(e),this.maxValue=null,this.minValue=null,this.type="range"}clone(){return new Lk({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}};u([d({type:Number,json:{type:[Number],read:{source:"range",reader:(e,t)=>t.range&&t.range[1]},write:{enabled:!1,overridePolicy(){return{enabled:this.maxValue!=null&&this.minValue==null}},target:"range",writer(e,t,r){t[r]=[this.minValue||0,e]}}}})],pf.prototype,"maxValue",void 0),u([d({type:Number,json:{type:[Number],read:{source:"range",reader:(e,t)=>t.range&&t.range[0]},write:{target:"range",writer(e,t,r){t[r]=[e,this.maxValue||0]}}}})],pf.prototype,"minValue",void 0),u([Me({range:"range"})],pf.prototype,"type",void 0),pf=Lk=u([E("esri.layers.support.RangeDomain")],pf);const gH=pf,Xxe={key:"type",base:j2,typeMap:{range:gH,"coded-value":mH,inherited:yH}};function vH(e){if(!e||!e.type)return null;switch(e.type){case"range":return gH.fromJSON(e);case"codedValue":return mH.fromJSON(e);case"inherited":return yH.fromJSON(e)}return null}const e2e=new xt({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml",esriFieldTypeBigInteger:"big-integer",esriFieldTypeDateOnly:"date-only",esriFieldTypeTimeOnly:"time-only",esriFieldTypeTimestampOffset:"timestamp-offset"});var Nk;const t2e=new xt({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});let kn=Nk=class extends Q{constructor(e){super(e),this.alias=null,this.defaultValue=void 0,this.description=null,this.domain=null,this.editable=!0,this.length=-1,this.name=null,this.nullable=!0,this.type=null,this.valueType=null,this.visible=!0}readDescription(e,{description:t}){let r=null;try{r=t?JSON.parse(t):null}catch{}return(r==null?void 0:r.value)??null}readValueType(e,{description:t}){let r=null;try{r=t?JSON.parse(t):null}catch{}return r?t2e.fromJSON(r.fieldValueType):null}clone(){return new Nk({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:this.domain&&this.domain.clone()||null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType,visible:this.visible})}};u([d({type:String,json:{write:!0}})],kn.prototype,"alias",void 0),u([d({type:[String,Number],json:{write:{allowNull:!0}}})],kn.prototype,"defaultValue",void 0),u([d()],kn.prototype,"description",void 0),u([we("description")],kn.prototype,"readDescription",null),u([d({types:Xxe,json:{read:{reader:vH},write:!0}})],kn.prototype,"domain",void 0),u([d({type:Boolean,json:{write:!0}})],kn.prototype,"editable",void 0),u([d({type:bt,json:{write:!0}})],kn.prototype,"length",void 0),u([d({type:String,json:{write:!0}})],kn.prototype,"name",void 0),u([d({type:Boolean,json:{write:!0}})],kn.prototype,"nullable",void 0),u([Me(e2e)],kn.prototype,"type",void 0),u([d()],kn.prototype,"valueType",void 0),u([we("valueType",["description"])],kn.prototype,"readValueType",null),u([d({type:Boolean,json:{read:!1}})],kn.prototype,"visible",void 0),kn=Nk=u([E("esri.layers.support.Field")],kn);const k3=kn;var Dk;let Cl=Dk=class extends Q{constructor(e){super(e),this.type="map-layer"}clone(){const{mapLayerId:e,gdbVersion:t}=this;return new Dk({mapLayerId:e,gdbVersion:t})}};u([Me({mapLayer:"map-layer"})],Cl.prototype,"type",void 0),u([d({type:bt,json:{write:!0}})],Cl.prototype,"mapLayerId",void 0),u([d({type:String,json:{write:!0}})],Cl.prototype,"gdbVersion",void 0),Cl=Dk=u([E("esri.layers.support.source.MapLayerSource")],Cl);var Fk;let wl=Fk=class extends Q{constructor(e){super(e),this.type="query-table"}clone(){const{workspaceId:e,query:t,oidFields:r,spatialReference:n,geometryType:i}=this,s={workspaceId:e,query:t,oidFields:r,spatialReference:(n==null?void 0:n.clone())??void 0,geometryType:i};return new Fk(s)}};u([Me({queryTable:"query-table"})],wl.prototype,"type",void 0),u([d({type:String,json:{write:!0}})],wl.prototype,"workspaceId",void 0),u([d({type:String,json:{write:!0}})],wl.prototype,"query",void 0),u([d({type:String,json:{write:!0}})],wl.prototype,"oidFields",void 0),u([d({type:Ce,json:{write:!0}})],wl.prototype,"spatialReference",void 0),u([Me(OS)],wl.prototype,"geometryType",void 0),wl=Fk=u([E("esri.layers.support.source.QueryTableDataSource")],wl);var jk;let ff=jk=class extends Q{constructor(e){super(e),this.type="raster"}clone(){const{workspaceId:e,dataSourceName:t}=this;return new jk({workspaceId:e,dataSourceName:t})}};u([Me({raster:"raster"})],ff.prototype,"type",void 0),u([d({type:String,json:{write:!0}})],ff.prototype,"dataSourceName",void 0),u([d({type:String,json:{write:!0}})],ff.prototype,"workspaceId",void 0),ff=jk=u([E("esri.layers.support.source.RasterDataSource")],ff);var Vk;let ch=Vk=class extends Q{constructor(e){super(e),this.type="table"}clone(){const{workspaceId:e,gdbVersion:t,dataSourceName:r}=this;return new Vk({workspaceId:e,gdbVersion:t,dataSourceName:r})}};u([Me({table:"table"})],ch.prototype,"type",void 0),u([d({type:String,json:{write:!0}})],ch.prototype,"workspaceId",void 0),u([d({type:String,json:{write:!0}})],ch.prototype,"gdbVersion",void 0),u([d({type:String,json:{write:!0}})],ch.prototype,"dataSourceName",void 0),ch=Vk=u([E("esri.layers.support.source.TableDataSource")],ch);var zk,Uk;const r2e=Vn()({esriLeftInnerJoin:"left-inner-join",esriLeftOuterJoin:"left-outer-join"});let Di=zk=class extends Q{constructor(e){super(e),this.type="join-table"}readLeftTableSource(e,t,r){return Z4()(e,t,r)}castLeftTableSource(e){return Jl(Gk(),e)}readRightTableSource(e,t,r){return Z4()(e,t,r)}castRightTableSource(e){return Jl(Gk(),e)}clone(){const{leftTableKey:e,rightTableKey:t,leftTableSource:r,rightTableSource:n,joinType:i}=this,s={leftTableKey:e,rightTableKey:t,leftTableSource:(r==null?void 0:r.clone())??void 0,rightTableSource:(n==null?void 0:n.clone())??void 0,joinType:i};return new zk(s)}};u([Me({joinTable:"join-table"})],Di.prototype,"type",void 0),u([d({type:String,json:{write:!0}})],Di.prototype,"leftTableKey",void 0),u([d({type:String,json:{write:!0}})],Di.prototype,"rightTableKey",void 0),u([d({json:{write:!0}})],Di.prototype,"leftTableSource",void 0),u([we("leftTableSource")],Di.prototype,"readLeftTableSource",null),u([Pt("leftTableSource")],Di.prototype,"castLeftTableSource",null),u([d({json:{write:!0}})],Di.prototype,"rightTableSource",void 0),u([we("rightTableSource")],Di.prototype,"readRightTableSource",null),u([Pt("rightTableSource")],Di.prototype,"castRightTableSource",null),u([Me(r2e)],Di.prototype,"joinType",void 0),Di=zk=u([E("esri.layers.support.source.JoinTableDataSource")],Di);let NT=null;function Z4(){return NT||(NT=Qv({types:Gk()})),NT}let DT=null;function Gk(){return DT||(DT={key:"type",base:null,typeMap:{"data-layer":Bi,"map-layer":Cl}}),DT}const n2e={key:"type",base:null,typeMap:{"join-table":Di,"query-table":wl,raster:ff,table:ch}};let Bi=Uk=class extends Q{constructor(e){super(e),this.type="data-layer"}clone(){const{fields:e,dataSource:t}=this;return new Uk({fields:e,dataSource:t})}};u([Me({dataLayer:"data-layer"})],Bi.prototype,"type",void 0),u([d({type:[k3],json:{write:!0}})],Bi.prototype,"fields",void 0),u([d({types:n2e,json:{write:!0}})],Bi.prototype,"dataSource",void 0),Bi=Uk=u([E("esri.layers.support.source.DataLayerSource")],Bi),Bi.from=gr(Bi);function w1(e,t){return t?{...t,query:{...e??{},...t.query}}:{query:e}}function Us(e){return typeof e=="string"?jn(e):F(e)}function _1(e,t,r){const n={};for(const i in e){if(i==="declaredClass")continue;const s=e[i];if(s!=null&&typeof s!="function")if(Array.isArray(s)){n[i]=[];for(let o=0;o<s.length;o++)n[i][o]=_1(s[o])}else if(typeof s=="object")if(s.toJSON){const o=s.toJSON(r&&r[i]);n[i]=t?o:JSON.stringify(o)}else n[i]=t?s:JSON.stringify(s);else n[i]=s}return n}const Gw={102100:{maxX:20037508342788905e-9,minX:-20037508342788905e-9,plus180Line:new Cs({paths:[[[20037508342788905e-9,-20037508342788905e-9],[20037508342788905e-9,20037508342788905e-9]]],spatialReference:Ce.WebMercator}),minus180Line:new Cs({paths:[[[-20037508342788905e-9,-20037508342788905e-9],[-20037508342788905e-9,20037508342788905e-9]]],spatialReference:Ce.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new Cs({paths:[[[180,-180],[180,180]]],spatialReference:Ce.WGS84}),minus180Line:new Cs({paths:[[[-180,-180],[-180,180]]],spatialReference:Ce.WGS84})}};function Oh(e,t){return Math.ceil((e-t)/(2*t))}function wH(e,t){const r=M0(e);for(const n of r)for(const i of n)i[0]+=t;return e}function M0(e){return Fh(e)?e.rings:e.paths}async function i2e(e,t,r,n){const i=Us(e),s=t[0].spatialReference,o={...n,query:{...i.query,f:"json",sr:JSON.stringify(s),target:JSON.stringify({geometryType:_p(t[0]),geometries:t}),cutter:JSON.stringify(r)}},a=await St(i.path+"/cut",o),{cutIndexes:l,geometries:c=[]}=a.data;return{cutIndexes:l,geometries:c.map(h=>{const f=Xc(h);return f.spatialReference=s,f})}}function s2e(e){return{geometryType:_p(e[0]),geometries:e.map(t=>t.toJSON())}}function _H(e,t,r){const n=Jle(t);return e.map(i=>{const s=n.fromJSON(i);return s.spatialReference=r,s})}async function o2e(e,t,r){const n=typeof e=="string"?jn(e):e,i=t[0].spatialReference,s=_p(t[0]),o={...r,query:{...n.query,f:"json",sr:i.wkid??JSON.stringify(i),geometries:JSON.stringify(s2e(t))}},{data:a}=await St(n.path+"/simplify",o);return _H(a.geometries,s,i)}const bH=Z.getLogger("esri.geometry.support.normalizeUtils");function a2e(e){return e.type==="polygon"}function l2e(e){return e[0].type==="polygon"}function u2e(e){return e[0].type==="polyline"}function SH(e,t){if(!(e instanceof Cs||e instanceof Fa)){const i="straightLineDensify: the input geometry is neither polyline nor polygon";throw bH.error(i),new N(i)}const r=M0(e),n=[];for(const i of r){const s=[];n.push(s),s.push([i[0][0],i[0][1]]);for(let o=0;o<i.length-1;o++){const a=i[o][0],l=i[o][1],c=i[o+1][0],h=i[o+1][1],f=Math.sqrt((c-a)*(c-a)+(h-l)*(h-l)),m=(h-l)/f,y=(c-a)/f,g=f/t;if(g>1){for(let S=1;S<=g-1;S++){const _=S*t,x=y*_+a,T=m*_+l;s.push([x,T])}const v=(f+Math.floor(g-1)*t)/2,w=y*v+a,b=m*v+l;s.push([w,b])}s.push([c,h])}}return a2e(e)?new Fa({rings:n,spatialReference:e.spatialReference}):new Cs({paths:n,spatialReference:e.spatialReference})}function J4(e,t,r){if(t){const n=SH(e,1e6);e=Tc(n,!0)}return r&&(e=wH(e,r)),e}function Q4(e,t,r){if(Array.isArray(e)){const n=e[0];if(n>t){const i=Oh(n,t);e[0]=n+i*(-2*t)}else if(n<r){const i=Oh(n,r);e[0]=n+i*(-2*r)}}else{const n=e.x;if(n>t){const i=Oh(n,t);e=e.clone().offset(i*(-2*t),0)}else if(n<r){const i=Oh(n,r);e=e.clone().offset(i*(-2*r),0)}}return e}function c2e(e,t){let r=-1;for(let n=0;n<t.cutIndexes.length;n++){const i=t.cutIndexes[n],s=t.geometries[n],o=M0(s);for(let a=0;a<o.length;a++){const l=o[a];l.some(c=>{if(c[0]<180)return!0;{let h=0;for(let m=0;m<l.length;m++){const y=l[m][0];h=y>h?y:h}h=Number(h.toFixed(9));const f=-360*Oh(h,180);for(let m=0;m<l.length;m++){const y=s.getPoint(a,m);s.setPoint(a,m,y.clone().offset(f,0))}return!0}})}if(i===r){if(l2e(e))for(const a of M0(s))e[i]=e[i].addRing(a);else if(u2e(e))for(const a of M0(s))e[i]=e[i].addPath(a)}else r=i,e[i]=s}return e}async function P3(e,t,r){if(!Array.isArray(e))return P3([e],t);t&&typeof t!="string"&&bH.warn("normalizeCentralMeridian()","The url object is deprecated, use the url string instead");const n=typeof t=="string"?t:(t==null?void 0:t.url)??ot.geometryServiceUrl;let i,s,o,a,l,c,h,f,m=0;const y=[],g=[];for(const x of e)if(x!=null)if(i||(i=x.spatialReference,s=Ls(i),o=i.isWebMercator,c=o?102100:4326,a=Gw[c].maxX,l=Gw[c].minX,h=Gw[c].plus180Line,f=Gw[c].minus180Line),s)if(x.type==="mesh")g.push(x);else if(x.type==="point")g.push(Q4(x.clone(),a,l));else if(x.type==="multipoint"){const T=x.clone();T.points=T.points.map(I=>Q4(I,a,l)),g.push(T)}else if(x.type==="extent"){const T=x.clone()._normalize(!1,!1,s);g.push(T.rings?new Fa(T):T)}else if(x.extent){const T=x.extent,I=Oh(T.xmin,l)*(2*a);let C=I===0?x.clone():wH(x.clone(),I);T.offset(I,0),T.intersects(h)&&T.xmax!==a?(m=T.xmax>m?T.xmax:m,C=J4(C,o),y.push(C),g.push("cut")):T.intersects(f)&&T.xmin!==l?(m=T.xmax*(2*a)>m?T.xmax*(2*a):m,C=J4(C,o,360),y.push(C),g.push("cut")):g.push(C)}else g.push(x.clone());else g.push(x);else g.push(x);let v=Oh(m,a),w=-90;const b=v,S=new Cs;for(;v>0;){const x=360*v-180;S.addPath([[x,w],[x,-1*w]]),w*=-1,v--}if(y.length>0&&b>0){const x=c2e(y,await i2e(n,y,S,r)),T=[],I=[];for(let W=0;W<g.length;W++){const z=g[W];if(z!=="cut")I.push(z);else{const ne=x.shift(),K=e[W];K!=null&&K.type==="polygon"&&K.rings&&K.rings.length>1&&ne.rings.length>=K.rings.length?(T.push(ne),I.push("simplify")):I.push(o?Uc(ne):ne)}}if(!T.length)return I;const C=await o2e(n,T,r),O=[];for(let W=0;W<I.length;W++){const z=I[W];z!=="simplify"?O.push(z):O.push(o?Uc(C.shift()):C.shift())}return O}const _=[];for(let x=0;x<g.length;x++){const T=g[x];if(T!=="cut")_.push(T);else{const I=y.shift();_.push(o===!0?Uc(I):I)}}return _}function V3e(e,t){const r=Ls(t);if(r){const[n,i]=r.valid,s=i-n;if(e<n)for(;e<n;)e+=s;if(e>i)for(;e>i;)e-=s}return e}function xH(e){const t={};for(const r in e){if(r==="declaredClass")continue;const n=e[r];if(n!=null&&typeof n!="function")if(Array.isArray(n)){t[r]=[];for(let i=0;i<n.length;i++)t[r][i]=xH(n[i])}else typeof n=="object"?n.toJSON&&(t[r]=JSON.stringify(n)):t[r]=n}return t}var yc;(function(e){e[e.varint=0]="varint",e[e.fixed64=1]="fixed64",e[e.delimited=2]="delimited",e[e.fixed32=5]="fixed32",e[e.unknown=99]="unknown"})(yc||(yc={}));const Y4=4294967296,d2e=new TextDecoder("utf-8"),h2e=V("safari")||V("ios")?6:V("ff")?12:32;let Bk=class mb{constructor(t,r,n=0,i=t?t.byteLength:0){this._tag=0,this._dataType=yc.unknown,this._init(t,r,n,i)}_init(t,r,n,i){this._data=t,this._dataView=r,this._pos=n,this._end=i}asUnsafe(){return this}clone(){return new mb(this._data,this._dataView,this._pos,this._end)}pos(){return this._pos}move(t){this._pos=t}nextTag(t){for(;;){if(this._pos===this._end)return!1;const r=this._decodeVarint();if(this._tag=r>>3,this._dataType=7&r,!t||t===this._tag)break;this.skip()}return!0}next(){if(this._pos===this._end)return!1;const t=this._decodeVarint();return this._tag=t>>3,this._dataType=7&t,!0}empty(){return this._pos>=this._end}tag(){return this._tag}getInt32(){return this._decodeVarint()}getInt64(){return this._decodeVarint()}getUInt32(){let t=4294967295;return t=(127&this._data[this._pos])>>>0,this._data[this._pos++]<128?t:(t=(t|(127&this._data[this._pos])<<7)>>>0,this._data[this._pos++]<128?t:(t=(t|(127&this._data[this._pos])<<14)>>>0,this._data[this._pos++]<128?t:(t=(t|(127&this._data[this._pos])<<21)>>>0,this._data[this._pos++]<128?t:(t=(t|(15&this._data[this._pos])<<28)>>>0,this._data[this._pos++]<128?t:void 0))))}getUInt64(){return this._decodeVarint()}getSInt32(){const t=this.getUInt32();if(t!==void 0)return t>>>1^-(1&t)|0}getSInt64(){return this._decodeSVarint()}getBool(){const t=this._data[this._pos]!==0;return this._skip(1),t}getEnum(){return this._decodeVarint()}getFixed64(){const t=this._dataView,r=this._pos,n=t.getUint32(r,!0)+t.getUint32(r+4,!0)*Y4;return this._skip(8),n}getSFixed64(){const t=this._dataView,r=this._pos,n=t.getUint32(r,!0)+t.getInt32(r+4,!0)*Y4;return this._skip(8),n}getDouble(){const t=this._dataView.getFloat64(this._pos,!0);return this._skip(8),t}getFixed32(){const t=this._dataView.getUint32(this._pos,!0);return this._skip(4),t}getSFixed32(){const t=this._dataView.getInt32(this._pos,!0);return this._skip(4),t}getFloat(){const t=this._dataView.getFloat32(this._pos,!0);return this._skip(4),t}getString(){const t=this._getLength(),r=this._pos,n=this._toString(this._data,r,r+t);return this._skip(t),n}getBytes(){const t=this._getLength(),r=this._pos,n=this._toBytes(this._data,r,r+t);return this._skip(t),n}getLength(){return this._getLengthUnsafe()}processMessageWithArgs(t,r,n,i){const s=this.getMessage(),o=t(s,r,n,i);return s.release(),o}processMessage(t){const r=this.getMessage(),n=t(r);return r.release(),n}getMessage(){const t=this._getLength(),r=mb.pool.acquire();return r._init(this._data,this._dataView,this._pos,this._pos+t),this._skip(t),r}release(){mb.pool.release(this)}dataType(){return this._dataType}skip(){switch(this._dataType){case yc.varint:this._decodeVarint();break;case yc.fixed64:this._skip(8);break;case yc.delimited:this._skip(this._getLength());break;case yc.fixed32:this._skip(4);break;default:throw new Error("Invalid data type!")}}skipLen(t){this._skip(t)}_skip(t){if(this._pos+t>this._end)throw new Error("Attempt to skip past the end of buffer!");this._pos+=t}_decodeVarint(){const t=this._data;let r=this._pos,n=0,i=0;if(this._end-r>=10)do{if(i=t[r++],n|=127&i,(128&i)==0||(i=t[r++],n|=(127&i)<<7,(128&i)==0)||(i=t[r++],n|=(127&i)<<14,(128&i)==0)||(i=t[r++],n|=(127&i)<<21,(128&i)==0)||(i=t[r++],n+=268435456*(127&i),(128&i)==0)||(i=t[r++],n+=34359738368*(127&i),(128&i)==0)||(i=t[r++],n+=4398046511104*(127&i),(128&i)==0)||(i=t[r++],n+=562949953421312*(127&i),(128&i)==0)||(i=t[r++],n+=72057594037927940*(127&i),(128&i)==0)||(i=t[r++],n+=9223372036854776e3*(127&i),(128&i)==0))break;throw new Error("Varint too long!")}while(0);else{let s=1;for(;r!==this._end&&(i=t[r],(128&i)!=0);)++r,n+=(127&i)*s,s*=128;if(r===this._end)throw new Error("Varint overrun!");++r,n+=i*s}return this._pos=r,n}_decodeSVarint(){const t=this._data;let r=this._pos,n=0,i=0;const s=1&t[r];if(this._end-r>=10)do{if(i=t[r++],n|=127&i,(128&i)==0||(i=t[r++],n|=(127&i)<<7,(128&i)==0)||(i=t[r++],n|=(127&i)<<14,(128&i)==0)||(i=t[r++],n|=(127&i)<<21,(128&i)==0)||(i=t[r++],n+=268435456*(127&i),(128&i)==0)||(i=t[r++],n+=34359738368*(127&i),(128&i)==0)||(i=t[r++],n+=4398046511104*(127&i),(128&i)==0)||(i=t[r++],n+=562949953421312*(127&i),(128&i)==0)||(i=t[r++],n+=72057594037927940*(127&i),(128&i)==0)||(i=t[r++],n+=9223372036854776e3*(127&i),(128&i)==0))break;throw new Error("Varint too long!")}while(0);else{let o=1;for(;r!==this._end&&(i=t[r],(128&i)!=0);)++r,n+=(127&i)*o,o*=128;if(r===this._end)throw new Error("Varint overrun!");++r,n+=i*o}return this._pos=r,s?-(n+1)/2:n/2}_getLength(){if(this._dataType!==yc.delimited)throw new Error("Not a delimited data type!");return this._decodeVarint()}_getLengthUnsafe(){return this.getUInt32()}_toString(t,r,n){if((n=Math.min(this._end,n))-r>h2e){const o=t.subarray(r,n);return d2e.decode(o)}let i="",s="";for(let o=r;o<n;++o){const a=t[o];128&a?s+="%"+a.toString(16):(i+=decodeURIComponent(s)+String.fromCharCode(a),s="")}return s.length&&(i+=decodeURIComponent(s)),i}_toBytes(t,r,n){return n=Math.min(this._end,n),new Uint8Array(t.buffer,r,n-r)}};Bk.pool=new ud(Bk,void 0,e=>{e._data=null,e._dataView=null});let Zo=class yb{constructor(t=[],r=[],n=!1){this.lengths=t??[],this.coords=r??[],this.hasIndeterminateRingOrder=n}static fromRect(t){const[r,n,i,s]=t,o=i-r,a=s-n;return new yb([5],[r,n,o,0,0,a,-o,0,0,-a])}get isPoint(){return this.lengths.length===0}get maxLength(){return Math.max(...this.lengths)}get size(){return this.lengths.reduce((t,r)=>t+r)}forEachVertex(t){let r=0;this.lengths.length||t(this.coords[0],this.coords[1]);for(let n=0;n<this.lengths.length;n++){const i=this.lengths[n];for(let s=0;s<i;s++)t(this.coords[2*(s+r)],this.coords[2*(s+r)+1]);r+=i}}clone(t){return t?(t.set(this.coords),new yb(this.lengths.slice(),t,this.hasIndeterminateRingOrder)):new yb(this.lengths.slice(),this.coords.slice(),this.hasIndeterminateRingOrder)}},id=class $H{constructor(t=null,r={},n,i){this.geometry=t,this.attributes=r,this.centroid=n,this.objectId=i,this.displayId=0,this.geohashX=0,this.geohashY=0}weakClone(){const t=new $H(this.geometry,this.attributes,this.centroid,this.objectId);return t.displayId=this.displayId,t.geohashX=this.geohashX,t.geohashY=this.geohashY,t}};function p2e(e){return!(e.geometry==null||!e.geometry.coords||!e.geometry.coords.length)}let z3e=class extends id{},TH=class EH{constructor(){this.objectIdFieldName=null,this.globalIdFieldName=null,this.geohashFieldName=null,this.geometryProperties=null,this.geometryType=null,this.spatialReference=null,this.hasZ=!1,this.hasM=!1,this.features=[],this.fields=[],this.transform=null,this.exceededTransferLimit=!1,this.uniqueIdField=null,this.queryGeometryType=null,this.queryGeometry=null}weakClone(){const t=new EH;return t.objectIdFieldName=this.objectIdFieldName,t.globalIdFieldName=this.globalIdFieldName,t.geohashFieldName=this.geohashFieldName,t.geometryProperties=this.geometryProperties,t.geometryType=this.geometryType,t.spatialReference=this.spatialReference,t.hasZ=this.hasZ,t.hasM=this.hasM,t.features=this.features,t.fields=this.fields,t.transform=this.transform,t.exceededTransferLimit=this.exceededTransferLimit,t.uniqueIdField=this.uniqueIdField,t.queryGeometry=this.queryGeometry,t.queryGeometryType=this.queryGeometryType,t}};const MH=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"];let G3e=class{constructor(t){this._options=t,this.geometryTypes=MH,this._coordinatePtr=0,this._vertexDimension=0}createFeatureResult(){return new TH}prepareFeatures(t){this._vertexDimension=2,t.hasZ&&this._vertexDimension++,t.hasM&&this._vertexDimension++}finishFeatureResult(t){if(!t||!t.features||!t.hasZ||!this._options.sourceSpatialReference||!t.spatialReference||Cr(t.spatialReference,this._options.sourceSpatialReference)||t.spatialReference.vcsWkid)return;const r=SS(this._options.sourceSpatialReference)/SS(t.spatialReference);if(r!==1)for(const n of t.features){if(!p2e(n))continue;const i=n.geometry.coords;for(let s=2;s<i.length;s+=3)i[s]*=r}}addFeature(t,r){t.features.push(r)}createFeature(){return new id}createSpatialReference(){return{wkid:0}}createGeometry(){return new Zo}addField(t,r){t.fields.push(r)}allocateCoordinates(t){t.coords.length=t.lengths.reduce((r,n)=>r+n,0)*this._vertexDimension,this._coordinatePtr=0}addCoordinate(t,r){t.coords[this._coordinatePtr++]=r}addCoordinatePoint(t,r){t.coords.push(r)}addLength(t,r){t.lengths.push(r)}addQueryGeometry(t,r){t.queryGeometry=r.queryGeometry,t.queryGeometryType=r.queryGeometryType}createPointGeometry(){return new Zo}};const K4=["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeString","esriFieldTypeDate","esriFieldTypeOID","esriFieldTypeGeometry","esriFieldTypeBlob","esriFieldTypeRaster","esriFieldTypeGUID","esriFieldTypeGlobalID","esriFieldTypeXML","esriFieldTypeBigInteger","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"],X4=["sqlTypeBigInt","sqlTypeBinary","sqlTypeBit","sqlTypeChar","sqlTypeDate","sqlTypeDecimal","sqlTypeDouble","sqlTypeFloat","sqlTypeGeometry","sqlTypeGUID","sqlTypeInteger","sqlTypeLongNVarchar","sqlTypeLongVarbinary","sqlTypeLongVarchar","sqlTypeNChar","sqlTypeNVarchar","sqlTypeOther","sqlTypeReal","sqlTypeSmallInt","sqlTypeSqlXml","sqlTypeTime","sqlTypeTimestamp","sqlTypeTimestamp2","sqlTypeTinyInt","sqlTypeVarbinary","sqlTypeVarchar"],ej=["upperLeft","lowerLeft"];function tj(e){return e>=K4.length?null:K4[e]}function f2e(e){return e>=X4.length?null:X4[e]}function rj(e){return e>=ej.length?null:ej[e]}function nj(e,t){return t>=e.geometryTypes.length?null:e.geometryTypes[t]}function m2e(e,t,r){const i=e.asUnsafe(),s=t.createPointGeometry(r);for(;i.next();)switch(i.tag()){case 3:{const o=i.getUInt32(),a=i.pos()+o;let l=0;for(;i.pos()<a;)t.addCoordinatePoint(s,i.getSInt64(),l++);break}default:i.skip()}return s}function y2e(e,t,r){const s=e.asUnsafe(),o=t.createGeometry(r),a=2+(r.hasZ?1:0)+(r.hasM?1:0);for(;s.next();)switch(s.tag()){case 2:{const l=s.getUInt32(),c=s.pos()+l;let h=0;for(;s.pos()<c;)t.addLength(o,s.getUInt32(),h++);break}case 3:{const l=s.getUInt32(),c=s.pos()+l;let h=0;for(t.allocateCoordinates(o);s.pos()<c;)t.addCoordinate(o,s.getSInt64(),h),h++,h===a&&(h=0);break}default:s.skip()}return o}function g2e(e){const i=e.asUnsafe(),s=new Zo;let o="esriGeometryPoint";for(;i.next();)switch(i.tag()){case 2:{const a=i.getUInt32(),l=i.pos()+a;for(;i.pos()<l;)s.lengths.push(i.getUInt32());break}case 3:{const a=i.getUInt32(),l=i.pos()+a;for(;i.pos()<l;)s.coords.push(i.getSInt64());break}case 1:o=MH[i.getEnum()];break;default:i.skip()}return{queryGeometry:s,queryGeometryType:o}}function v2e(e){const h=e.asUnsafe();for(;h.next();)switch(h.tag()){case 1:return h.getString();case 2:return h.getFloat();case 3:return h.getDouble();case 4:return h.getSInt32();case 5:return h.getUInt32();case 6:return h.getInt64();case 7:return h.getUInt64();case 8:return h.getSInt64();case 9:return h.getBool();default:return h.skip(),null}return null}function w2e(e){const a=e.asUnsafe(),l={type:tj(0)};for(;a.next();)switch(a.tag()){case 1:l.name=a.getString();break;case 2:l.type=tj(a.getEnum());break;case 3:l.alias=a.getString();break;case 4:l.sqlType=f2e(a.getEnum());break;case 5:a.skip();break;case 6:l.defaultValue=a.getString();break;default:a.skip()}return l}function _2e(e){const n={},i=e.asUnsafe();for(;i.next();)switch(i.tag()){case 1:n.name=i.getString();break;case 2:n.isSystemMaintained=i.getBool();break;default:i.skip()}return n}function b2e(e,t,r,n){const a=t.createFeature(r);let l=0;for(;e.next();)switch(e.tag()){case 1:{const c=n[l++].name;a.attributes[c]=e.processMessage(v2e);break}case 2:a.geometry=e.processMessageWithArgs(y2e,t,r);break;case 4:a.centroid=e.processMessageWithArgs(m2e,t,r);break;default:e.skip()}return a}function S2e(e){const s=[1,1,1,1],o=e.asUnsafe();for(;o.next();)switch(o.tag()){case 1:s[0]=o.getDouble();break;case 2:s[1]=o.getDouble();break;case 4:s[2]=o.getDouble();break;case 3:s[3]=o.getDouble();break;default:o.skip()}return s}function x2e(e){const s=[0,0,0,0],o=e.asUnsafe();for(;o.next();)switch(o.tag()){case 1:s[0]=o.getDouble();break;case 2:s[1]=o.getDouble();break;case 4:s[2]=o.getDouble();break;case 3:s[3]=o.getDouble();break;default:o.skip()}return s}function $2e(e){const i={originPosition:rj(0)},s=e.asUnsafe();for(;s.next();)switch(s.tag()){case 1:i.originPosition=rj(s.getEnum());break;case 2:i.scale=s.processMessage(S2e);break;case 3:i.translate=s.processMessage(x2e);break;default:s.skip()}return i}function T2e(e){const i={},s=e.asUnsafe();for(;s.next();)switch(s.tag()){case 1:i.shapeAreaFieldName=s.getString();break;case 2:i.shapeLengthFieldName=s.getString();break;case 3:i.units=s.getString();break;default:s.skip()}return i}function E2e(e,t){const a=t.createSpatialReference();for(;e.next();)switch(e.tag()){case 1:a.wkid=e.getUInt32();break;case 5:a.wkt=e.getString();break;case 2:a.latestWkid=e.getUInt32();break;case 3:a.vcsWkid=e.getUInt32();break;case 4:a.latestVcsWkid=e.getUInt32();break;default:e.skip()}return a}function M2e(e,t){const v=t.createFeatureResult(),w=e.asUnsafe();v.geometryType=nj(t,0);let b=!1;for(;w.next();)switch(w.tag()){case 1:v.objectIdFieldName=w.getString();break;case 3:v.globalIdFieldName=w.getString();break;case 4:v.geohashFieldName=w.getString();break;case 5:v.geometryProperties=w.processMessage(T2e);break;case 7:v.geometryType=nj(t,w.getEnum());break;case 8:v.spatialReference=w.processMessageWithArgs(E2e,t);break;case 10:v.hasZ=w.getBool();break;case 11:v.hasM=w.getBool();break;case 12:v.transform=w.processMessage($2e);break;case 9:{const S=w.getBool();v.exceededTransferLimit=S;break}case 13:t.addField(v,w.processMessage(w2e));break;case 15:b||(t.prepareFeatures(v),b=!0),t.addFeature(v,w.processMessageWithArgs(b2e,t,v,v.fields));break;case 2:v.uniqueIdField=w.processMessage(_2e);break;default:w.skip()}return t.finishFeatureResult(v),v}function I2e(e,t){const i={};let s=null;for(;e.next();)switch(e.tag()){case 4:s=e.processMessageWithArgs(g2e);break;case 1:i.featureResult=e.processMessageWithArgs(M2e,t);break;default:e.skip()}return s!=null&&i.featureResult&&t.addQueryGeometry(i,s),i}function C2e(e,t){try{const n=new Bk(new Uint8Array(e),new DataView(e)),i={};for(;n.next();)n.tag()===2?i.queryResult=n.processMessageWithArgs(I2e,t):n.skip();return i}catch(r){throw new N("query:parsing-pbf","Error while parsing FeatureSet PBF payload",{error:r})}}function k2e(e,t){const r=C2e(e,t),n=r.queryResult.featureResult,i=r.queryResult.queryGeometry,s=r.queryResult.queryGeometryType;if(n&&n.features&&n.features.length&&n.objectIdFieldName){const o=n.objectIdFieldName;for(const a of n.features)a.attributes&&(a.objectId=a.attributes[o])}return n&&(n.queryGeometry=i,n.queryGeometryType=s),n}function P2e(e,t,r){if(!r||!r.features||!r.hasZ)return;const n=BR(r.geometryType,t,e.outSpatialReference);if(n!=null)for(const i of r.features)n(i.geometry)}const ij="Layer does not support extent calculation.";function O2e(e,t){if(t&&e.type==="extent")return`${e.xmin},${e.ymin},${e.xmax},${e.ymax}`;if(t&&e.type==="point")return`${e.x},${e.y}`;const r=e.toJSON();return delete r.spatialReference,JSON.stringify(r)}function R2e(e,t){const r=e.geometry,n=e.toJSON();delete n.compactGeometryEnabled,delete n.defaultSpatialReferenceEnabled;const i=n;let s,o,a;if(r!=null&&(o=r.spatialReference,a=r.spatialReference.wkid||JSON.stringify(r.spatialReference),i.geometryType=_p(r),i.geometry=O2e(r,e.compactGeometryEnabled),i.inSR=a),n.groupByFieldsForStatistics&&(i.groupByFieldsForStatistics=n.groupByFieldsForStatistics.join(",")),n.objectIds&&(i.objectIds=n.objectIds.join(",")),n.orderByFields&&(i.orderByFields=n.orderByFields.join(",")),!n.outFields||!n.returnDistinctValues&&(t!=null&&t.returnCountOnly||t!=null&&t.returnExtentOnly||t!=null&&t.returnIdsOnly)?delete i.outFields:n.outFields.includes("*")?i.outFields="*":i.outFields=n.outFields.join(","),n.outSR?(i.outSR=n.outSR.wkid||JSON.stringify(n.outSR),s=e.outSpatialReference):r&&(n.returnGeometry||n.returnCentroid)&&(i.outSR=i.inSR,s=o),n.returnGeometry&&delete n.returnGeometry,n.outStatistics&&(i.outStatistics=JSON.stringify(n.outStatistics)),n.fullText&&(i.fullText=JSON.stringify(n.fullText)),n.pixelSize&&(i.pixelSize=JSON.stringify(n.pixelSize)),n.quantizationParameters&&(e.defaultSpatialReferenceEnabled&&o!=null&&e.quantizationParameters!=null&&e.quantizationParameters.extent!=null&&o.equals(e.quantizationParameters.extent.spatialReference)&&delete n.quantizationParameters.extent.spatialReference,i.quantizationParameters=JSON.stringify(n.quantizationParameters)),n.parameterValues&&(i.parameterValues=JSON.stringify(n.parameterValues)),n.rangeValues&&(i.rangeValues=JSON.stringify(n.rangeValues)),n.dynamicDataSource&&(i.layer=JSON.stringify({source:n.dynamicDataSource}),delete n.dynamicDataSource),n.timeExtent){const l=n.timeExtent,{start:c,end:h}=l;c==null&&h==null||(i.time=c===h?c:`${c??"null"},${h??"null"}`),delete n.timeExtent}return e.defaultSpatialReferenceEnabled&&o!=null&&s!=null&&o.equals(s)&&(i.defaultSR=i.inSR,delete i.inSR,delete i.outSR),i}async function A2e(e,t,r,n){const i=t.timeExtent!=null&&t.timeExtent.isEmpty?{data:{features:[]}}:await b1(e,t,"json",n);return P2e(t,r,i.data),i}async function L2e(e,t,r,n){if(t.timeExtent!=null&&t.timeExtent.isEmpty)return{data:r.createFeatureResult()};const i=await N2e(e,t,n),s=i;return s.data=k2e(i.data,r),s}function N2e(e,t,r){return b1(e,t,"pbf",r)}function D2e(e,t,r){return t.timeExtent!=null&&t.timeExtent.isEmpty?Promise.resolve({data:{objectIds:[]}}):b1(e,t,"json",r,{returnIdsOnly:!0})}function F2e(e,t,r){return t.timeExtent!=null&&t.timeExtent.isEmpty?Promise.resolve({data:{count:0}}):b1(e,t,"json",r,{returnIdsOnly:!0,returnCountOnly:!0})}async function j2e(e,t,r){if(t.timeExtent!=null&&t.timeExtent.isEmpty)return{data:{count:0,extent:null}};const n=await b1(e,t,"json",r,{returnExtentOnly:!0,returnCountOnly:!0}),i=n.data;if(i.hasOwnProperty("extent"))return n;if(i.features)throw new Error(ij);if(i.hasOwnProperty("count"))throw new Error(ij);return n}async function b1(e,t,r,n={},i={}){const s=typeof e=="string"?jn(e):e,o=t.geometry?[t.geometry]:[];n.responseType=r==="pbf"?"array-buffer":"json";const a=await P3(o,null,n),l=a&&a[0];l!=null&&((t=t.clone()).geometry=l);const c=xH({...s.query,f:r,...i,...R2e(t,i)});return St(rp(s.path,V2e(t,i)?"query3d":"query"),{...n,query:{...c,...n.query}})}function V2e(e,t){return e.formatOf3DObjects!=null&&!(t.returnCountOnly||t.returnExtentOnly||t.returnIdsOnly)}let dh=class extends kr(Q){constructor(t){super(t),this.onFields=null,this.operator=null,this.searchTerm=null,this.searchType=null}};u([d({type:[String],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.onFields!=null&&this.onFields.length>0}}}}})],dh.prototype,"onFields",void 0),u([d({type:String,json:{write:!0}})],dh.prototype,"operator",void 0),u([d({type:String,json:{write:!0}})],dh.prototype,"searchTerm",void 0),u([d({type:String,json:{write:!0}})],dh.prototype,"searchType",void 0),dh=u([E("esri.rest.support.FullTextSearch")],dh);const IH=dh;var qk;const sj=new xt({count:"count",sum:"sum",min:"min",max:"max",avg:"avg",stddev:"stddev",var:"var",exceedslimit:"exceedslimit",percentile_cont:"percentile-continuous",percentile_disc:"percentile-discrete",EnvelopeAggregate:"envelope-aggregate",CentroidAggregate:"centroid-aggregate",ConvexHullAggregate:"convex-hull-aggregate"});let fo=qk=class extends Q{constructor(e){super(e),this.maxPointCount=void 0,this.maxRecordCount=void 0,this.maxVertexCount=void 0,this.onStatisticField=null,this.outStatisticFieldName=null,this.statisticType=null,this.statisticParameters=null}writeStatisticParameters(e,t){this.statisticType!=="percentile-continuous"&&this.statisticType!=="percentile-discrete"||(t.statisticParameters=F(e))}clone(){return new qk({maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,statisticType:this.statisticType,statisticParameters:F(this.statisticParameters)})}};u([d({type:Number,json:{write:!0}})],fo.prototype,"maxPointCount",void 0),u([d({type:Number,json:{write:!0}})],fo.prototype,"maxRecordCount",void 0),u([d({type:Number,json:{write:!0}})],fo.prototype,"maxVertexCount",void 0),u([d({type:String,json:{write:!0}})],fo.prototype,"onStatisticField",void 0),u([d({type:String,json:{write:!0}})],fo.prototype,"outStatisticFieldName",void 0),u([d({type:String,json:{read:{source:"statisticType",reader:sj.read},write:{target:"statisticType",writer:sj.write}}})],fo.prototype,"statisticType",void 0),u([d({type:Object})],fo.prototype,"statisticParameters",void 0),u([pe("statisticParameters")],fo.prototype,"writeStatisticParameters",null),fo=qk=u([E("esri.rest.support.StatisticDefinition")],fo);const z2e=fo;var um;const U2e=new xt({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),G2e=new xt({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let ke=um=class extends Q{static from(e){return ep(um,e)}constructor(e){super(e),this.aggregateIds=null,this.cacheHint=void 0,this.compactGeometryEnabled=!1,this.datumTransformation=null,this.defaultSpatialReferenceEnabled=!1,this.distance=void 0,this.dynamicDataSource=void 0,this.formatOf3DObjects=null,this.fullText=null,this.gdbVersion=null,this.geometry=null,this.geometryPrecision=void 0,this.groupByFieldsForStatistics=null,this.having=null,this.historicMoment=null,this.maxAllowableOffset=void 0,this.maxRecordCountFactor=1,this.multipatchOption=null,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.outStatistics=null,this.parameterValues=null,this.pixelSize=null,this.quantizationParameters=null,this.rangeValues=null,this.relationParameter=null,this.resultType=null,this.returnCentroid=!1,this.returnDistinctValues=!1,this.returnExceededLimitFeatures=!0,this.returnGeometry=!1,this.returnQueryGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.sourceSpatialReference=null,this.spatialRelationship="intersects",this.start=void 0,this.sqlFormat=null,this.text=null,this.timeExtent=null,this.timeReferenceUnknownClient=!1,this.units=null,this.where=null}castDatumTransformation(e){return typeof e=="number"||typeof e=="object"?e:null}writeHistoricMoment(e,t){t.historicMoment=e&&e.getTime()}writeParameterValues(e,t){if(e){const r={};for(const n in e){const i=e[n];Array.isArray(i)?r[n]=i.map(s=>s instanceof Date?s.getTime():s):i instanceof Date?r[n]=i.getTime():r[n]=i}t.parameterValues=r}}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10,t.where="1=1"}writeWhere(e,t){t.where=e||"1=1"}clone(){return new um(F({aggregateIds:this.aggregateIds,cacheHint:this.cacheHint,compactGeometryEnabled:this.compactGeometryEnabled,datumTransformation:this.datumTransformation,defaultSpatialReferenceEnabled:this.defaultSpatialReferenceEnabled,distance:this.distance,fullText:this.fullText,formatOf3DObjects:this.formatOf3DObjects,gdbVersion:this.gdbVersion,geometry:this.geometry,geometryPrecision:this.geometryPrecision,groupByFieldsForStatistics:this.groupByFieldsForStatistics,having:this.having,historicMoment:this.historicMoment!=null?new Date(this.historicMoment.getTime()):null,maxAllowableOffset:this.maxAllowableOffset,maxRecordCountFactor:this.maxRecordCountFactor,multipatchOption:this.multipatchOption,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,outStatistics:this.outStatistics,parameterValues:this.parameterValues,pixelSize:this.pixelSize,quantizationParameters:this.quantizationParameters,rangeValues:this.rangeValues,relationParameter:this.relationParameter,resultType:this.resultType,returnDistinctValues:this.returnDistinctValues,returnGeometry:this.returnGeometry,returnCentroid:this.returnCentroid,returnExceededLimitFeatures:this.returnExceededLimitFeatures,returnQueryGeometry:this.returnQueryGeometry,returnM:this.returnM,returnZ:this.returnZ,dynamicDataSource:this.dynamicDataSource,sourceSpatialReference:this.sourceSpatialReference,spatialRelationship:this.spatialRelationship,start:this.start,sqlFormat:this.sqlFormat,text:this.text,timeExtent:this.timeExtent,timeReferenceUnknownClient:this.timeReferenceUnknownClient,units:this.units,where:this.where}))}};ke.MAX_MAX_RECORD_COUNT_FACTOR=5,u([d({json:{write:!0}})],ke.prototype,"aggregateIds",void 0),u([d({type:Boolean,json:{write:!0}})],ke.prototype,"cacheHint",void 0),u([d({type:Boolean,json:{default:!1,write:!0}})],ke.prototype,"compactGeometryEnabled",void 0),u([d({json:{write:!0}})],ke.prototype,"datumTransformation",void 0),u([Pt("datumTransformation")],ke.prototype,"castDatumTransformation",null),u([d({type:Boolean,json:{default:!1,write:!0}})],ke.prototype,"defaultSpatialReferenceEnabled",void 0),u([d({type:Number,json:{write:{overridePolicy:e=>({enabled:e>0})}}})],ke.prototype,"distance",void 0),u([d({type:Bi,json:{write:!0}})],ke.prototype,"dynamicDataSource",void 0),u([d({type:String,json:{write:!0}})],ke.prototype,"formatOf3DObjects",void 0),u([d({type:[IH],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.fullText!=null&&this.fullText.length>0}}}}})],ke.prototype,"fullText",void 0),u([d({type:String,json:{write:!0}})],ke.prototype,"gdbVersion",void 0),u([d({types:Wm,json:{read:Xc,write:!0}})],ke.prototype,"geometry",void 0),u([d({type:Number,json:{write:!0}})],ke.prototype,"geometryPrecision",void 0),u([d({type:[String],json:{write:!0}})],ke.prototype,"groupByFieldsForStatistics",void 0),u([d({type:String,json:{write:!0}})],ke.prototype,"having",void 0),u([d({type:Date})],ke.prototype,"historicMoment",void 0),u([pe("historicMoment")],ke.prototype,"writeHistoricMoment",null),u([d({type:Number,json:{write:!0}})],ke.prototype,"maxAllowableOffset",void 0),u([d({type:Number,cast:e=>e<1?1:e>um.MAX_MAX_RECORD_COUNT_FACTOR?um.MAX_MAX_RECORD_COUNT_FACTOR:e,json:{write:{overridePolicy:e=>({enabled:e>1})}}})],ke.prototype,"maxRecordCountFactor",void 0),u([d({type:["xyFootprint"],json:{write:!0}})],ke.prototype,"multipatchOption",void 0),u([d({type:Number,json:{read:{source:"resultRecordCount"}}})],ke.prototype,"num",void 0),u([d({json:{write:!0}})],ke.prototype,"objectIds",void 0),u([d({type:[String],json:{write:!0}})],ke.prototype,"orderByFields",void 0),u([d({type:[String],json:{write:!0}})],ke.prototype,"outFields",void 0),u([d({type:Ce,json:{name:"outSR",write:!0}})],ke.prototype,"outSpatialReference",void 0),u([d({type:[z2e],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.outStatistics!=null&&this.outStatistics.length>0}}}}})],ke.prototype,"outStatistics",void 0),u([d({json:{write:!0}})],ke.prototype,"parameterValues",void 0),u([pe("parameterValues")],ke.prototype,"writeParameterValues",null),u([d({type:be,json:{write:!0}})],ke.prototype,"pixelSize",void 0),u([d({type:dq,json:{write:!0}})],ke.prototype,"quantizationParameters",void 0),u([d({type:[Object],json:{write:!0}})],ke.prototype,"rangeValues",void 0),u([d({type:String,json:{read:{source:"relationParam"},write:{target:"relationParam",overridePolicy(){return{enabled:this.spatialRelationship==="relation"}}}}})],ke.prototype,"relationParameter",void 0),u([d({type:String,json:{write:!0}})],ke.prototype,"resultType",void 0),u([d({type:Boolean,json:{default:!1,write:!0}})],ke.prototype,"returnCentroid",void 0),u([d({type:Boolean,json:{default:!1,write:!0}})],ke.prototype,"returnDistinctValues",void 0),u([d({type:Boolean,json:{default:!0,write:!0}})],ke.prototype,"returnExceededLimitFeatures",void 0),u([d({type:Boolean,json:{write:!0}})],ke.prototype,"returnGeometry",void 0),u([d({type:Boolean,json:{default:!1,write:!0}})],ke.prototype,"returnQueryGeometry",void 0),u([d({type:Boolean,json:{default:!1,write:!0}})],ke.prototype,"returnM",void 0),u([d({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],ke.prototype,"returnZ",void 0),u([d({type:Ce,json:{write:!0}})],ke.prototype,"sourceSpatialReference",void 0),u([Me(U2e,{ignoreUnknown:!1,name:"spatialRel"})],ke.prototype,"spatialRelationship",void 0),u([d({type:Number,json:{read:{source:"resultOffset"}}})],ke.prototype,"start",void 0),u([pe("start"),pe("num")],ke.prototype,"writeStart",null),u([d({type:String,json:{write:!0}})],ke.prototype,"sqlFormat",void 0),u([d({type:String,json:{write:!0}})],ke.prototype,"text",void 0),u([d({type:qa,json:{write:!0}})],ke.prototype,"timeExtent",void 0),u([d({type:Boolean,json:{default:!1,write:!0}})],ke.prototype,"timeReferenceUnknownClient",void 0),u([Me(G2e,{ignoreUnknown:!1}),d({json:{write:{overridePolicy(e){return{enabled:!!e&&this.distance!=null&&this.distance>0}}}}})],ke.prototype,"units",void 0),u([d({type:String,json:{write:{overridePolicy(e){return{enabled:e!=null||this.start!=null&&this.start>0}}}}})],ke.prototype,"where",void 0),u([pe("where")],ke.prototype,"writeWhere",null),ke=um=u([E("esri.rest.support.Query")],ke);const Tp=ke;async function B2e(e,t,r){const n=Us(e);return F2e(n,Tp.from(t),{...r}).then(i=>i.data.count)}async function q2e(e,t,r){const n=Us(e);return j2e(n,Tp.from(t),{...r}).then(i=>({count:i.data.count,extent:at.fromJSON(i.data.extent)}))}async function W2e(e,t,r){const n=Us(e);return D2e(n,Tp.from(t),{...r}).then(i=>i.data.objectIds)}var Wk;const Hk=new xt({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null});let on=Wk=class extends Q{constructor(e){super(e),this.displayFieldName=null,this.exceededTransferLimit=!1,this.features=[],this.fields=null,this.geometryType=null,this.hasM=!1,this.hasZ=!1,this.queryGeometry=null,this.spatialReference=null}readFeatures(e,t){const r=Ce.fromJSON(t.spatialReference),n=[];for(let i=0;i<e.length;i++){const s=e[i],o=Ki.fromJSON(s),a=s.geometry&&s.geometry.spatialReference;o.geometry==null||a||(o.geometry.spatialReference=r);const l=s.aggregateGeometries,c=o.aggregateGeometries;if(l&&c!=null)for(const h in c){const f=c[h],m=l[h],y=m==null?void 0:m.spatialReference;f==null||y||(f.spatialReference=r)}n.push(o)}return n}writeGeometryType(e,t,r,n){if(e)return void Hk.write(e,t,r,n);const{features:i}=this;if(i){for(const s of i)if(s&&s.geometry!=null)return void Hk.write(s.geometry.type,t,r,n)}}readQueryGeometry(e,t){if(!e)return null;const r=!!e.spatialReference,n=Xc(e);return n&&!r&&t.spatialReference&&(n.spatialReference=Ce.fromJSON(t.spatialReference)),n}writeSpatialReference(e,t){if(e)return void(t.spatialReference=e.toJSON());const{features:r}=this;if(r){for(const n of r)if(n&&n.geometry!=null&&n.geometry.spatialReference)return void(t.spatialReference=n.geometry.spatialReference.toJSON())}}clone(){return new Wk(this.cloneProperties())}cloneProperties(){return F({displayFieldName:this.displayFieldName,exceededTransferLimit:this.exceededTransferLimit,features:this.features,fields:this.fields,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,queryGeometry:this.queryGeometry,spatialReference:this.spatialReference,transform:this.transform})}toJSON(e){const t=this.write();if(t.features&&Array.isArray(e)&&e.length>0)for(let r=0;r<t.features.length;r++){const n=t.features[r];if(n.geometry){const i=e&&e[r];n.geometry=i&&i.toJSON()||n.geometry}}return t}quantize(e){const{scale:[t,r],translate:[n,i]}=e,s=c=>Math.round((c-n)/t),o=c=>Math.round((i-c)/r),a=this.features,l=this._getQuantizationFunction(this.geometryType,s,o);for(let c=0,h=a.length;c<h;c++)l!=null&&l(a[c].geometry)||(a.splice(c,1),c--,h--);return this.transform=e,this}unquantize(){var m,y;const{geometryType:e,features:t,transform:r}=this;if(!r)return this;const{translate:[n,i],scale:[s,o]}=r,a=g=>g*s+n,l=g=>i-g*o;let c=null,h=null;if(this.hasZ&&((m=r==null?void 0:r.scale)==null?void 0:m[2])!=null){const{translate:[,,g],scale:[,,v]}=r;c=w=>w*v+g}if(this.hasM&&((y=r==null?void 0:r.scale)==null?void 0:y[3])!=null){const{translate:[,,,g],scale:[,,,v]}=r;h=w=>w==null?w:w*v+g}const f=this._getHydrationFunction(e,a,l,c,h);for(const{geometry:g}of t)g!=null&&f&&f(g);return this.transform=null,this}_quantizePoints(e,t,r){let n,i;const s=[];for(let o=0,a=e.length;o<a;o++){const l=e[o];if(o>0){const c=t(l[0]),h=r(l[1]);c===n&&h===i||(s.push([c-n,h-i]),n=c,i=h)}else n=t(l[0]),i=r(l[1]),s.push([n,i])}return s.length>0?s:null}_getQuantizationFunction(e,t,r){return e==="point"?n=>(n.x=t(n.x),n.y=r(n.y),n):e==="polyline"||e==="polygon"?n=>{const i=Fh(n)?n.rings:n.paths,s=[];for(let o=0,a=i.length;o<a;o++){const l=i[o],c=this._quantizePoints(l,t,r);c&&s.push(c)}return s.length>0?(Fh(n)?n.rings=s:n.paths=s,n):null}:e==="multipoint"?n=>{const i=this._quantizePoints(n.points,t,r);return i&&i.length>0?(n.points=i,n):null}:e==="extent"?n=>n:null}_getHydrationFunction(e,t,r,n,i){return e==="point"?s=>{s.x=t(s.x),s.y=r(s.y),n&&(s.z=n(s.z))}:e==="polyline"||e==="polygon"?s=>{const o=Fh(s)?s.rings:s.paths;let a,l;for(let c=0,h=o.length;c<h;c++){const f=o[c];for(let m=0,y=f.length;m<y;m++){const g=f[m];m>0?(a+=g[0],l+=g[1]):(a=g[0],l=g[1]),g[0]=t(a),g[1]=r(l)}}if(n&&i)for(let c=0,h=o.length;c<h;c++){const f=o[c];for(let m=0,y=f.length;m<y;m++){const g=f[m];g[2]=n(g[2]),g[3]=i(g[3])}}else if(n)for(let c=0,h=o.length;c<h;c++){const f=o[c];for(let m=0,y=f.length;m<y;m++){const g=f[m];g[2]=n(g[2])}}else if(i)for(let c=0,h=o.length;c<h;c++){const f=o[c];for(let m=0,y=f.length;m<y;m++){const g=f[m];g[2]=i(g[2])}}}:e==="extent"?s=>{s.xmin=t(s.xmin),s.ymin=r(s.ymin),s.xmax=t(s.xmax),s.ymax=r(s.ymax),n&&s.zmax!=null&&s.zmin!=null&&(s.zmax=n(s.zmax),s.zmin=n(s.zmin)),i&&s.mmax!=null&&s.mmin!=null&&(s.mmax=i(s.mmax),s.mmin=i(s.mmin))}:e==="multipoint"?s=>{const o=s.points;let a,l;for(let c=0,h=o.length;c<h;c++){const f=o[c];c>0?(a+=f[0],l+=f[1]):(a=f[0],l=f[1]),f[0]=t(a),f[1]=r(l)}if(n&&i)for(let c=0,h=o.length;c<h;c++){const f=o[c];f[2]=n(f[2]),f[3]=i(f[3])}else if(n)for(let c=0,h=o.length;c<h;c++){const f=o[c];f[2]=n(f[2])}else if(i)for(let c=0,h=o.length;c<h;c++){const f=o[c];f[2]=i(f[2])}}:null}};u([d({type:String,json:{write:!0}})],on.prototype,"displayFieldName",void 0),u([d({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],on.prototype,"exceededTransferLimit",void 0),u([d({type:[Ki],json:{write:!0}})],on.prototype,"features",void 0),u([we("features")],on.prototype,"readFeatures",null),u([d({type:[k3],json:{write:!0}})],on.prototype,"fields",void 0),u([d({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:Hk.read}}})],on.prototype,"geometryType",void 0),u([pe("geometryType")],on.prototype,"writeGeometryType",null),u([d({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],on.prototype,"hasM",void 0),u([d({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],on.prototype,"hasZ",void 0),u([d({types:Wm,json:{write:!0}})],on.prototype,"queryGeometry",void 0),u([we("queryGeometry")],on.prototype,"readQueryGeometry",null),u([d({type:Ce,json:{write:!0}})],on.prototype,"spatialReference",void 0),u([pe("spatialReference")],on.prototype,"writeSpatialReference",null),u([d({json:{write:!0}})],on.prototype,"transform",void 0),on=Wk=u([E("esri.rest.support.FeatureSet")],on),on.prototype.toJSON.isDefaultToJSON=!0;const CH=on;async function W3e(e,t,r){const n=await kH(e,t,r);return CH.fromJSON(n)}async function kH(e,t,r){const n=Us(e),i={...r},s=Tp.from(t),{data:o}=await A2e(n,s,s.sourceSpatialReference,i);return o}function Sn(e,t){return e?t?4:3:t?3:2}const hy=Z.getLogger("esri.layers.graphics.featureConversionUtils"),PH={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0,esriGeometryEnvelope:0},H2e=(e,t,r,n,i,s)=>{e[r]=i,e[r+1]=s},oj=(e,t,r,n,i,s)=>{e[r]=i,e[r+1]=s,e[r+2]=t[n+2]},Z2e=(e,t,r,n,i,s)=>{e[r]=i,e[r+1]=s,e[r+2]=t[n+3]},J2e=(e,t,r,n,i,s)=>{e[r]=i,e[r+1]=s,e[r+2]=t[n+2],e[r+3]=t[n+3]};function O3(e,t,r,n){if(e){if(r)return t&&n?J2e:oj;if(t&&n)return Z2e}else if(t&&n)return oj;return H2e}function FT({scale:e,translate:t},r){return Math.round((r-t[0])/e[0])}function jT({scale:e,translate:t},r){return Math.round((t[1]-r)/e[1])}function VT({scale:e,translate:t},r,n){return r*e[n]+t[n]}function H3e(e,t,r){return e?t?r?L3(e):R3(e):r?A3(e):V2(e):null}function V2(e){const t=e.coords;return{x:t[0],y:t[1]}}function OH(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e}function R3(e){const t=e.coords;return{x:t[0],y:t[1],z:t[2]}}function Q2e(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e.coords[2]=t.z,e}function A3(e){const t=e.coords;return{x:t[0],y:t[1],m:t[2]}}function Y2e(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e.coords[2]=t.m,e}function L3(e){const t=e.coords;return{x:t[0],y:t[1],z:t[2],m:t[3]}}function K2e(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e.coords[2]=t.z,e.coords[3]=t.m,e}function X2e(e,t,r,n){let i=V2;r&&n?i=L3:r?i=R3:n&&(i=A3);for(const s of t){const{geometry:o,attributes:a}=s,l=o!=null?i(o):null;e.push({attributes:a,geometry:l})}return e}function N3(e,t){return e&&t?K2e:e?Q2e:t?Y2e:OH}function RH(e,t,r,n,i){const s=N3(r,n);for(const{geometry:o,attributes:a}of t){const l=o!=null?s(new Zo,o):null;e.push(new id(l,a,null,i?a[i]:void 0))}return e}function Z3e(e,t,r=N3(t.z!=null,t.m!=null)){return r(e,t)}function e$e(e,t,r,n){for(const{geometry:i,attributes:s}of t)e.push({attributes:s,geometry:i!=null?AH(i,r,n):null});return e}function AH(e,t,r){if(e==null)return null;const n=Sn(t,r),i=[];for(let s=0;s<e.coords.length;s+=n){const o=[];for(let a=0;a<n;a++)o.push(e.coords[s+a]);i.push(o)}return t?r?{points:i,hasZ:t,hasM:r}:{points:i,hasZ:t}:r?{points:i,hasM:r}:{points:i}}function LH(e,t,r,n,i){const s=Sn(r,n);for(const{geometry:o,attributes:a}of t){const l=o!=null?NH(new Zo,o,s):null;e.push(new id(l,a,null,i?a[i]:void 0))}return e}function NH(e,t,r=Sn(t.hasZ,t.hasM)){e.lengths[0]=t.points.length;const n=e.coords;let i=0;for(const s of t.points)for(let o=0;o<r;o++)n[i++]=s[o];return e}function t$e(e,t,r,n){for(const{geometry:i,attributes:s}of t)e.push({attributes:s,geometry:i!=null?DH(i,r,n):null});return e}function DH(e,t,r){if(!e)return null;const n=Sn(t,r),{coords:i,lengths:s}=e,o=[];let a=0;for(const l of s){const c=[];for(let h=0;h<l;h++){const f=[];for(let m=0;m<n;m++)f.push(i[a++]);c.push(f)}o.push(c)}return t?r?{paths:o,hasZ:t,hasM:r}:{paths:o,hasZ:t}:r?{paths:o,hasM:r}:{paths:o}}function FH(e,t,r,n,i){const s=Sn(r,n);for(const{geometry:o,attributes:a}of t){const l=o!=null?jH(new Zo,o,s):null;e.push(new id(l,a,null,i?a[i]:void 0))}return e}function jH(e,t,r=Sn(t.hasZ,t.hasM)){const{lengths:n,coords:i}=e;let s=0;for(const o of t.paths){for(const a of o)for(let l=0;l<r;l++)i[s++]=a[l];n.push(o.length)}return e}function r$e(e,t,r,n){for(const{geometry:i,attributes:s,centroid:o}of t){const a=i!=null?VH(i,r,n):null;if(o!=null){const l=V2(o);e.push({attributes:s,centroid:l,geometry:a})}else e.push({attributes:s,geometry:a})}return e}function VH(e,t,r){if(!e)return null;const n=Sn(t,r),{coords:i,lengths:s}=e,o=[];let a=0;for(const l of s){const c=[];for(let h=0;h<l;h++){const f=[];for(let m=0;m<n;m++)f.push(i[a++]);c.push(f)}o.push(c)}return t?r?{rings:o,hasZ:t,hasM:r}:{rings:o,hasZ:t}:r?{rings:o,hasM:r}:{rings:o}}function zH(e,t,r,n,i){for(const{geometry:s,centroid:o,attributes:a}of t){const l=s!=null?UH(new Zo,s,r,n):null,c=i?a[i]:void 0;o!=null?e.push(new id(l,a,OH(new Zo,o),c)):e.push(new id(l,a,null,c))}return e}function UH(e,t,r=t.hasZ,n=t.hasM){return n$e(e,t.rings,r,n)}function n$e(e,t,r,n){const i=Sn(r,n),{lengths:s,coords:o}=e;let a=0;jl(e);for(const l of t){for(const c of l)for(let h=0;h<i;h++)o[a++]=c[h];s.push(l.length)}return e}const cm=[],I0=[];function J3e(e,t,r,n,i){cm[0]=e;const[s]=GH(I0,cm,t,r,n,i);return Jo(cm),Jo(I0),s}function GH(e,t,r,n,i,s){if(Jo(e),!r){for(const o of t){const a=s?o.attributes[s]:void 0;e.push(new id(null,o.attributes,null,a))}return e}switch(r){case"esriGeometryPoint":return RH(e,t,n,i,s);case"esriGeometryMultipoint":return LH(e,t,n,i,s);case"esriGeometryPolyline":return FH(e,t,n,i,s);case"esriGeometryPolygon":return zH(e,t,n,i,s);default:hy.error("convertToFeatureSet:unknown-geometry",new N(`Unable to parse unknown geometry type '${r}'`)),Jo(e)}return e}function Q3e(e,t,r,n,i,s){const o=e.length;switch(r){case"esriGeometryPoint":RH(e,t,n,i,s);break;case"esriGeometryMultipoint":LH(e,t,n,i,s);break;case"esriGeometryPolyline":FH(e,t,n,i,s);break;case"esriGeometryPolygon":zH(e,t,n,i,s);break;default:hy.error("convertToFeatureSet:unknown-geometry",new N(`Unable to parse unknown geometry type '${r}'`))}for(let a=0;a<t.length;a++)e[a+o].geometryType=r,e[a+o].insertAfter=t[a].insertAfter,e[a+o].groupId=t[a].groupId;return e}function Y3e(e,t,r,n){I0[0]=e,qH(cm,I0,t,r,n);const i=cm[0];return Jo(cm),Jo(I0),i}function K3e(e,t,r){if(e==null)return null;const n=new Zo;return"hasZ"in e&&t==null&&(t=e.hasZ),"hasM"in e&&r==null&&(r=e.hasM),hR(e)?N3(t??e.z!=null,r??e.m!=null)(n,e):Fh(e)?UH(n,e,t,r):pR(e)?jH(n,e,Sn(t,r)):dR(e)?NH(n,e,Sn(t,r)):void hy.error("convertFromGeometry:unknown-geometry",new N(`Unable to parse unknown geometry type '${e}'`))}function BH(e,t,r,n){const i=e&&("coords"in e?e:e.geometry);if(i==null)return null;switch(t){case"esriGeometryPoint":{let s=V2;return r&&n?s=L3:r?s=R3:n&&(s=A3),s(i)}case"esriGeometryMultipoint":return AH(i,r,n);case"esriGeometryPolyline":return DH(i,r,n);case"esriGeometryPolygon":return VH(i,r,n);default:return hy.error("convertToGeometry:unknown-geometry",new N(`Unable to parse unknown geometry type '${t}'`)),null}}function i$e(e,t){for(const r of t)e.push({attributes:r.attributes});return e}function qH(e,t,r,n,i){if(Jo(e),r==null)return i$e(e,t);switch(r){case"esriGeometryPoint":return X2e(e,t,n,i);case"esriGeometryMultipoint":return e$e(e,t,n,i);case"esriGeometryPolyline":return t$e(e,t,n,i);case"esriGeometryPolygon":return r$e(e,t,n,i);default:hy.error("convertToFeatureSet:unknown-geometry",new N(`Unable to parse unknown geometry type '${r}'`))}return e}function X3e(e){const{objectIdFieldName:t,spatialReference:r,transform:n,fields:i,hasM:s,hasZ:o,features:a,geometryType:l,exceededTransferLimit:c,uniqueIdField:h,queryGeometry:f,queryGeometryType:m}=e,y={features:qH([],a,l,o,s),fields:i,geometryType:l,objectIdFieldName:t,spatialReference:r,uniqueIdField:h,queryGeometry:BH(f,m,!1,!1)};return n&&(y.transform=n),c&&(y.exceededTransferLimit=c),s&&(y.hasM=s),o&&(y.hasZ=o),y}function eAe(e,t){const r=new TH,{hasM:n,hasZ:i,features:s,objectIdFieldName:o,spatialReference:a,geometryType:l,exceededTransferLimit:c,transform:h,fields:f}=e;return f&&(r.fields=f),r.geometryType=l??null,r.objectIdFieldName=o??t??null,r.spatialReference=a??null,r.objectIdFieldName?(s&&GH(r.features,s,l,i,n,r.objectIdFieldName),c&&(r.exceededTransferLimit=c),n&&(r.hasM=n),i&&(r.hasZ=i),h&&(r.transform=h),r):(hy.error(new N("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),r)}function tAe(e){const{transform:t,features:r,hasM:n,hasZ:i}=e;if(!t)return e;for(const s of r)s.geometry!=null&&Jk(s.geometry,s.geometry,n,i,t),s.centroid!=null&&Jk(s.centroid,s.centroid,n,i,t);return e.transform=null,e}function rAe(e,t){const{geometryType:r,features:n,hasM:i,hasZ:s}=t;if(!e)return t;for(let o=0;o<n.length;o++){const a=n[o],l=a.weakClone();l.geometry=new Zo,aj(l.geometry,a.geometry,i,s,r,e),a.centroid&&(l.centroid=new Zo,aj(l.centroid,a.centroid,i,s,"esriGeometryPoint",e)),n[o]=l}return t.transform=e,t}function aj(e,t,r,n,i,s,o=r,a=n){if(jl(e),t==null||!t.coords.length)return null;const l=PH[i],{coords:c,lengths:h}=t,f=Sn(r,n),m=Sn(r&&o,n&&a),y=O3(r,n,o,a);if(!h.length)return y(e.coords,c,0,0,FT(s,c[0]),jT(s,c[1])),jl(e,f,0),e;let g,v,w,b,S=0,_=0,x=_;for(const T of h){if(T<l)continue;let I=0;_=x,w=g=FT(s,c[S]),b=v=jT(s,c[S+1]),y(e.coords,c,_,S,w,b),I++,S+=f,_+=m;for(let C=1;C<T;C++,S+=f)w=FT(s,c[S]),b=jT(s,c[S+1]),w===g&&b===v||(y(e.coords,c,_,S,w-g,b-v),_+=m,I++,g=w,v=b);I>=l&&(e.lengths.push(I),x=_)}return Jo(e.coords,x),e.coords.length?e:null}function nAe(e,t,r,n,i,s,o=r,a=n){if(jl(e),!t||!t.coords.length)return null;const l=PH[i],{coords:c,lengths:h}=t,f=Sn(r,n),m=Sn(r&&o,n&&a),y=O3(r,n,o,a);if(!h.length)return y(e.coords,c,0,0,c[0],c[1]),jl(e,f,0),e;let g=0;const v=s*s;for(const w of h){if(w<l){g+=w*f;continue}const b=e.coords.length/m,S=g,_=g+(w-1)*f;y(e.coords,c,e.coords.length,S,c[S],c[S+1]),Zk(e.coords,c,f,v,y,S,_),y(e.coords,c,e.coords.length,_,c[_],c[_+1]);const x=e.coords.length/m-b;x>=l?e.lengths.push(x):Jo(e.coords,b*m),g+=w*f}return e.coords.length?e:null}function s$e(e,t,r,n){const i=e[t],s=e[t+1],o=e[r],a=e[r+1],l=e[n],c=e[n+1];let h=o,f=a,m=l-h,y=c-f;if(m!==0||y!==0){const g=((i-h)*m+(s-f)*y)/(m*m+y*y);g>1?(h=l,f=c):g>0&&(h+=m*g,f+=y*g)}return m=i-h,y=s-f,m*m+y*y}function Zk(e,t,r,n,i,s,o){let a,l=n,c=0;for(let h=s+r;h<o;h+=r)a=s$e(t,h,s,o),a>l&&(c=h,l=a);l>n&&(c-s>r&&Zk(e,t,r,n,i,s,c),i(e,t,e.length,c,t[c],t[c+1]),o-c>r&&Zk(e,t,r,n,i,c,o))}function iAe(e,t,r,n){if(t==null||!t.coords||!t.coords.length)return null;const i=Sn(r,n);let s=Number.POSITIVE_INFINITY,o=Number.POSITIVE_INFINITY,a=Number.NEGATIVE_INFINITY,l=Number.NEGATIVE_INFINITY;if(t&&t.coords){const c=t.coords;for(let h=0;h<c.length;h+=i){const f=c[h],m=c[h+1];s=Math.min(s,f),a=Math.max(a,f),o=Math.min(o,m),l=Math.max(l,m)}}return NI(e)?Phe(e,s,o,a,l):Rle(s,o,a,l,e),e}function Jk(e,t,r,n,i){const{coords:s,lengths:o}=t,a=Sn(r,n);if(!s.length)return e!==t&&jl(e),e;Bx(i);const{originPosition:l,scale:c,translate:h}=i,f=a$e;f.originPosition=l;const m=f.scale;m[0]=c[0]??1,m[1]=-(c[1]??1),m[2]=c[2]??1,m[3]=c[3]??1;const y=f.translate;if(y[0]=h[0]??0,y[1]=h[1]??0,y[2]=h[2]??0,y[3]=h[3]??0,!o.length){for(let v=0;v<a;++v)e.coords[v]=VT(f,s[v],v);return e!==t&&jl(e,a,0),e}let g=0;for(let v=0;v<o.length;v++){const w=o[v];e.lengths[v]=w;for(let _=0;_<a;++_)e.coords[g+_]=VT(f,s[g+_],_);let b=e.coords[g],S=e.coords[g+1];g+=a;for(let _=1;_<w;_++,g+=a){b+=s[g]*m[0],S+=s[g+1]*m[1],e.coords[g]=b,e.coords[g+1]=S;for(let x=2;x<a;++x)e.coords[g+x]=VT(f,s[g+x],x)}}return e!==t&&jl(e,s.length,o.length),e}function sAe(e,t,r,n,i,s){if(jl(e),e.lengths.push(...t.lengths),r===i&&n===s)for(let o=0;o<t.coords.length;o++)e.coords.push(t.coords[o]);else{const o=Sn(r,n),a=O3(r,n,i,s),l=t.coords;for(let c=0;c<l.length;c+=o)a(e.coords,l,e.coords.length,c,l[c],l[c+1])}return e}function o$e(e,t,r,n){let i=0,s=e[n*t],o=e[n*(t+1)];for(let a=1;a<r;a++){const l=s+e[n*(t+a)],c=o+e[n*(t+a)+1],h=(l-s)*(c+o);s=l,o=c,i+=h}return .5*i}function oAe(e,t){const{coords:r,lengths:n}=e;let i=0,s=0;for(let o=0;o<n.length;o++){const a=n[o];s+=o$e(r,i,a,t),i+=a}return Math.abs(s)}function jl(e,t=0,r=0){Jo(e.lengths,r),Jo(e.coords,t)}function Jo(e,t=0){e.length!==t&&(e.length=t)}const a$e={originPosition:"lowerLeft",scale:[1,1,1,1],translate:[0,0,0,0]};function l$e(e,t){return t}function D3(e,t,r,n){switch(r){case 0:return Lv(e,t+n,0);case 1:return e.originPosition==="lowerLeft"?Lv(e,t+n,1):d$e(e,t+n,1)}}function WH(e,t,r,n){return r===2?Lv(e,t,2):D3(e,t,r,n)}function u$e(e,t,r,n){return r===2?Lv(e,t,3):D3(e,t,r,n)}function c$e(e,t,r,n){return r===3?Lv(e,t,3):WH(e,t,r,n)}function Lv({translate:e,scale:t},r,n){return e[n]+r*t[n]}function d$e({translate:e,scale:t},r,n){return e[n]-r*t[n]}let h$e=class{constructor(t){this._options=t,this.geometryTypes=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"],this._previousCoordinate=[0,0],this._transform=null,this._applyTransform=l$e,this._lengths=[],this._currentLengthIndex=0,this._toAddInCurrentPath=0,this._vertexDimension=0,this._coordinateBuffer=null,this._coordinateBufferPtr=0,this._attributesConstructor=class{}}createFeatureResult(){return{fields:[],features:[]}}finishFeatureResult(t){if(this._options.applyTransform&&(t.transform=null),this._attributesConstructor=class{},this._coordinateBuffer=null,this._lengths.length=0,!t.hasZ)return;const r=BR(t.geometryType,this._options.sourceSpatialReference,t.spatialReference);if(r!=null)for(const n of t.features)r(n.geometry)}createSpatialReference(){return{}}addField(t,r){const n=t.fields;Bx(n),n.push(r);const i=n.map(s=>s.name);this._attributesConstructor=function(){for(const s of i)this[s]=null}}addFeature(t,r){t.features.push(r)}prepareFeatures(t){switch(this._transform=t.transform,this._options.applyTransform&&t.transform&&(this._applyTransform=this._deriveApplyTransform(t)),this._vertexDimension=2,t.hasZ&&this._vertexDimension++,t.hasM&&this._vertexDimension++,t.geometryType){case"esriGeometryPoint":this.addCoordinate=(r,n,i)=>this.addCoordinatePoint(r,n,i),this.createGeometry=r=>this.createPointGeometry(r);break;case"esriGeometryPolygon":this.addCoordinate=(r,n,i)=>this._addCoordinatePolygon(r,n,i),this.createGeometry=r=>this._createPolygonGeometry(r);break;case"esriGeometryPolyline":this.addCoordinate=(r,n,i)=>this._addCoordinatePolyline(r,n,i),this.createGeometry=r=>this._createPolylineGeometry(r);break;case"esriGeometryMultipoint":this.addCoordinate=(r,n,i)=>this._addCoordinateMultipoint(r,n,i),this.createGeometry=r=>this._createMultipointGeometry(r)}}createFeature(){return this._lengths.length=0,this._currentLengthIndex=0,this._previousCoordinate[0]=0,this._previousCoordinate[1]=0,this._coordinateBuffer=null,this._coordinateBufferPtr=0,{attributes:new this._attributesConstructor}}allocateCoordinates(){}addLength(t,r,n){this._lengths.length===0&&(this._toAddInCurrentPath=r),this._lengths.push(r)}addQueryGeometry(t,r){const{queryGeometry:n,queryGeometryType:i}=r,s=Jk(n.clone(),n,!1,!1,this._transform),o=BH(s,i,!1,!1);t.queryGeometryType=i,t.queryGeometry={...o}}createPointGeometry(t){const r={x:0,y:0,spatialReference:t.spatialReference};return t.hasZ&&(r.z=0),t.hasM&&(r.m=0),r}addCoordinatePoint(t,r,n){const i=yi(this._transform,"transform");switch(r=this._applyTransform(i,r,n,0),n){case 0:t.x=r;break;case 1:t.y=r;break;case 2:"z"in t?t.z=r:t.m=r;break;case 3:t.m=r}}_transformPathLikeValue(t,r){let n=0;r<=1&&(n=this._previousCoordinate[r],this._previousCoordinate[r]+=t);const i=yi(this._transform,"transform");return this._applyTransform(i,t,r,n)}_addCoordinatePolyline(t,r,n){this._dehydratedAddPointsCoordinate(t.paths,r,n)}_addCoordinatePolygon(t,r,n){this._dehydratedAddPointsCoordinate(t.rings,r,n)}_addCoordinateMultipoint(t,r,n){n===0&&t.points.push([]);const i=this._transformPathLikeValue(r,n);t.points[t.points.length-1].push(i)}_createPolygonGeometry(t){return{rings:[[]],spatialReference:t.spatialReference,hasZ:!!t.hasZ,hasM:!!t.hasM}}_createPolylineGeometry(t){return{paths:[[]],spatialReference:t.spatialReference,hasZ:!!t.hasZ,hasM:!!t.hasM}}_createMultipointGeometry(t){return{points:[],spatialReference:t.spatialReference,hasZ:!!t.hasZ,hasM:!!t.hasM}}_dehydratedAddPointsCoordinate(t,r,n){n===0&&this._toAddInCurrentPath--==0&&(t.push([]),this._toAddInCurrentPath=this._lengths[++this._currentLengthIndex]-1,this._previousCoordinate[0]=0,this._previousCoordinate[1]=0);const i=this._transformPathLikeValue(r,n),s=t[t.length-1];n===0&&(this._coordinateBufferPtr=0,this._coordinateBuffer=new Array(this._vertexDimension),s.push(this._coordinateBuffer)),this._coordinateBuffer[this._coordinateBufferPtr++]=i}_deriveApplyTransform(t){const{hasZ:r,hasM:n}=t;return r&&n?c$e:r?WH:n?u$e:D3}};async function p$e(e,t,r){const n=Us(e),i={...r},s=Tp.from(t),o=!s.quantizationParameters,{data:a}=await L2e(n,s,new h$e({sourceSpatialReference:s.sourceSpatialReference,applyTransform:o}),i);return a}let ws=class extends $e{constructor(t){super(t),this.dynamicDataSource=null,this.fieldsIndex=null,this.gdbVersion=null,this.infoFor3D=null,this.pbfSupported=!1,this.queryAttachmentsSupported=!1,this.sourceSpatialReference=null,this.url=null}get parsedUrl(){return jn(this.url)}async execute(t,r){const n=await this.executeJSON(t,r);return this.featureSetFromJSON(t,n,r)}async executeJSON(t,r){var l;const n=this._normalizeQuery(t),i=((l=t.outStatistics)==null?void 0:l[0])!=null,s=V("featurelayer-pbf-statistics"),o=!i||s;let a;if(this.pbfSupported&&o)try{a=await p$e(this.url,n,r)}catch(c){if(c.name!=="query:parsing-pbf")throw c;this.pbfSupported=!1}return this.pbfSupported&&o||(a=await kH(this.url,n,r)),this._normalizeFields(a.fields),a}async featureSetFromJSON(t,r,n){if(!this._queryIs3DObjectFormat(t)||this.infoFor3D==null||!r.features)return CH.fromJSON(r);const{meshFeatureSetFromJSON:i}=await yu(ie(()=>import("./meshFeatureSet-b4535993.js").then(s=>s.b),["assets/meshFeatureSet-b4535993.js","assets/georeference-149ab787.js","assets/mat3f64-221ce671.js","assets/mat4f64-1413b4a7.js","assets/spatialReferenceEllipsoidUtils-e67582fd.js","assets/MeshLocalVertexSpace-aceab1dd.js","assets/MeshGeoreferencedRelativeVertexSpace-616f4ead.js","assets/quat-625bfdbb.js","assets/quatf64-3363c48e.js","assets/vec32-aac4b6cd.js","assets/BufferView-4d060d73.js","assets/imageUtils-c2d0d1ae.js","assets/earcut-e27332fd.js","assets/Indices-7b5af16f.js","assets/deduplicate-55d1cdb1.js","assets/External-3c89f99d.js"]),n);return i(t,this.infoFor3D,r)}executeForCount(t,r){return B2e(this.url,this._normalizeQuery(t),r)}executeForExtent(t,r){return q2e(this.url,this._normalizeQuery(t),r)}executeForIds(t,r){return W2e(this.url,this._normalizeQuery(t),r)}async executeRelationshipQuery(t,r){const[{default:n},{executeRelationshipQuery:i}]=await yu(Promise.all([ie(()=>import("./RelationshipQuery-bf22fff1.js"),[]),ie(()=>import("./executeRelationshipQuery-76c0ff04.js"),["assets/executeRelationshipQuery-76c0ff04.js","assets/RelationshipQuery-bf22fff1.js"])]),r);return t=n.from(t),(this.gdbVersion||this.dynamicDataSource)&&((t=t.clone()).gdbVersion=t.gdbVersion||this.gdbVersion,t.dynamicDataSource=t.dynamicDataSource||this.dynamicDataSource),i(this.url,t,r)}async executeRelationshipQueryForCount(t,r){const[{default:n},{executeRelationshipQueryForCount:i}]=await yu(Promise.all([ie(()=>import("./RelationshipQuery-bf22fff1.js"),[]),ie(()=>import("./executeRelationshipQuery-76c0ff04.js"),["assets/executeRelationshipQuery-76c0ff04.js","assets/RelationshipQuery-bf22fff1.js"])]),r);return t=n.from(t),(this.gdbVersion||this.dynamicDataSource)&&((t=t.clone()).gdbVersion=t.gdbVersion||this.gdbVersion,t.dynamicDataSource=t.dynamicDataSource||this.dynamicDataSource),i(this.url,t,r)}async executeAttachmentQuery(t,r){const{executeAttachmentQuery:n,fetchAttachments:i,processAttachmentQueryResult:s}=await yu(ie(()=>import("./queryAttachments-e388de61.js"),["assets/queryAttachments-e388de61.js","assets/AttachmentInfo-e1bbf655.js"]),r),o=Us(this.url);return s(o,await(this.queryAttachmentsSupported?n(o,t,r):i(o,t,r)))}async executeTopFeaturesQuery(t,r){const{executeTopFeaturesQuery:n}=await yu(ie(()=>import("./executeTopFeaturesQuery-9386925b.js"),["assets/executeTopFeaturesQuery-9386925b.js","assets/queryTopFeatures-2410f94e.js","assets/TopFeaturesQuery-46f43816.js"]),r);return n(this.parsedUrl,t,this.sourceSpatialReference,r)}async executeForTopIds(t,r){const{executeForTopIds:n}=await yu(ie(()=>import("./executeForTopIds-d8dc251e.js"),["assets/executeForTopIds-d8dc251e.js","assets/queryTopFeatures-2410f94e.js","assets/TopFeaturesQuery-46f43816.js"]),r);return n(this.parsedUrl,t,r)}async executeForTopExtents(t,r){const{executeForTopExtents:n}=await yu(ie(()=>import("./executeForTopExtents-957aecc1.js"),["assets/executeForTopExtents-957aecc1.js","assets/queryTopFeatures-2410f94e.js","assets/TopFeaturesQuery-46f43816.js"]),r);return n(this.parsedUrl,t,r)}async executeForTopCount(t,r){const{executeForTopCount:n}=await yu(ie(()=>import("./executeForTopCount-f54e52b2.js"),["assets/executeForTopCount-f54e52b2.js","assets/queryTopFeatures-2410f94e.js","assets/TopFeaturesQuery-46f43816.js"]),r);return n(this.parsedUrl,t,r)}_normalizeQuery(t){let r=Tp.from(t);r.sourceSpatialReference=r.sourceSpatialReference||this.sourceSpatialReference,(this.gdbVersion||this.dynamicDataSource)&&(r=r===t?r.clone():r,r.gdbVersion=t.gdbVersion||this.gdbVersion,r.dynamicDataSource=t.dynamicDataSource?Bi.from(t.dynamicDataSource):this.dynamicDataSource);const{infoFor3D:n}=this;if(n!=null&&this._queryIs3DObjectFormat(t)){r=r===t?r.clone():r,r.formatOf3DObjects=null;const{supportedFormats:i,queryFormats:s}=n,o=GM("model/gltf-binary",i)??BM("glb",i),a=GM("model/gltf+json",i)??BM("gtlf",i);for(const l of s){if(l===o){r.formatOf3DObjects=l;break}l!==a||r.formatOf3DObjects||(r.formatOf3DObjects=l)}if(!r.formatOf3DObjects)throw new N("query:unsupported-3d-query-formats","Could not find any supported 3D object query format. Only supported formats are 3D_glb and 3D_gltf");if(r.outFields==null||!r.outFields.includes("*")){r=r===t?r.clone():r,r.outFields==null&&(r.outFields=[]);const{originX:l,originY:c,originZ:h,translationX:f,translationY:m,translationZ:y,scaleX:g,scaleY:v,scaleZ:w,rotationX:b,rotationY:S,rotationZ:_,rotationDeg:x}=n.transformFieldRoles;r.outFields.push(l,c,h,f,m,y,g,v,w,b,S,_,x)}}return r}_normalizeFields(t){if(this.fieldsIndex!=null&&t!=null)for(const r of t){const n=this.fieldsIndex.get(r.name);n&&Object.assign(r,n.toJSON())}}_queryIs3DObjectFormat(t){return this.infoFor3D!=null&&t.returnGeometry===!0&&t.multipatchOption!=="xyFootprint"&&!t.outStatistics}};u([d({type:Bi})],ws.prototype,"dynamicDataSource",void 0),u([d()],ws.prototype,"fieldsIndex",void 0),u([d()],ws.prototype,"gdbVersion",void 0),u([d()],ws.prototype,"infoFor3D",void 0),u([d({readOnly:!0})],ws.prototype,"parsedUrl",null),u([d()],ws.prototype,"pbfSupported",void 0),u([d()],ws.prototype,"queryAttachmentsSupported",void 0),u([d()],ws.prototype,"sourceSpatialReference",void 0),u([d({type:String})],ws.prototype,"url",void 0),ws=u([E("esri.tasks.QueryTask")],ws);const f$e=ws,lj=new xt({esriFeatureEditToolAutoCompletePolygon:"auto-complete-polygon",esriFeatureEditToolCircle:"circle",esriFeatureEditToolEllipse:"ellipse",esriFeatureEditToolFreehand:"freehand",esriFeatureEditToolLine:"line",esriFeatureEditToolNone:"none",esriFeatureEditToolPoint:"point",esriFeatureEditToolPolygon:"polygon",esriFeatureEditToolRectangle:"rectangle",esriFeatureEditToolArrow:"arrow",esriFeatureEditToolTriangle:"triangle",esriFeatureEditToolLeftArrow:"left-arrow",esriFeatureEditToolRightArrow:"right-arrow",esriFeatureEditToolUpArrow:"up-arrow",esriFeatureEditToolDownArrow:"down-arrow"});let tc=class extends kr(Q){constructor(t){super(t),this.name=null,this.description=null,this.drawingTool=null,this.prototype=null,this.thumbnail=null}};u([d({json:{write:!0}})],tc.prototype,"name",void 0),u([d({json:{write:!0}})],tc.prototype,"description",void 0),u([d({json:{read:lj.read,write:lj.write}})],tc.prototype,"drawingTool",void 0),u([d({json:{write:!0}})],tc.prototype,"prototype",void 0),u([d({json:{write:!0}})],tc.prototype,"thumbnail",void 0),tc=u([E("esri.layers.support.FeatureTemplate")],tc);const m$e=tc;let _l=class extends kr(Q){constructor(t){super(t),this.id=null,this.name=null,this.domains=null,this.templates=null}readDomains(t){const r={};for(const n of Object.keys(t))r[n]=vH(t[n]);return r}writeDomains(t,r){var i;const n={};for(const s of Object.keys(t))t[s]&&(n[s]=(i=t[s])==null?void 0:i.toJSON());r.domains=n}};u([d({json:{write:!0}})],_l.prototype,"id",void 0),u([d({json:{write:!0}})],_l.prototype,"name",void 0),u([d({json:{write:!0}})],_l.prototype,"domains",void 0),u([we("domains")],_l.prototype,"readDomains",null),u([pe("domains")],_l.prototype,"writeDomains",null),u([d({type:[m$e],json:{write:!0}})],_l.prototype,"templates",void 0),_l=u([E("esri.layers.support.FeatureType")],_l);const y$e=_l,F3="__begin__",j3="__end__",g$e=new RegExp(F3,"ig"),v$e=new RegExp(j3,"ig"),uj=new RegExp("^"+F3,"i"),cj=new RegExp(j3+"$","i"),fx='"',w$e=fx+" + ",_$e=" + "+fx;function b$e(e){return e.replaceAll(new RegExp("\\[","g"),"{").replaceAll(new RegExp("\\]","g"),"}")}function S$e(e){return e.replaceAll(new RegExp("\\{","g"),"[").replaceAll(new RegExp("\\}","g"),"]")}function V3(e){const t={expression:"",type:"none"};return e.labelExpressionInfo?e.labelExpressionInfo.value?(t.expression=e.labelExpressionInfo.value,t.type="conventional"):e.labelExpressionInfo.expression&&(t.expression=e.labelExpressionInfo.expression,t.type="arcade"):e.labelExpression!=null&&(t.expression=b$e(e.labelExpression),t.type="conventional"),t}function x$e(e){const t=V3(e);if(!t)return null;switch(t.type){case"conventional":return Qk(t.expression);case"arcade":return t.expression}return null}function $$e(e){const t=V3(e);if(!t)return null;switch(t.type){case"conventional":return E$e(t.expression);case"arcade":return HH(t.expression)}return null}function Qk(e){let t;return e?(t=Qx(e,r=>F3+'$feature["'+r+'"]'+j3),t=uj.test(t)?t.replace(uj,""):fx+t,t=cj.test(t)?t.replace(cj,""):t+fx,t=t.replaceAll(g$e,w$e).replaceAll(v$e,_$e)):t='""',t}const T$e=/^\s*\{([^}]+)\}\s*$/i;function E$e(e){const t=e==null?void 0:e.match(T$e);return t&&t[1].trim()||null}const M$e=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])([\w\s]+)(\2)\]));?\s*$/i,I$e=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])([\w\s]+)(\2)\]));?\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(\1|\3)(\5)\s*\));?\s*$/i,C$e=/^\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])([\w\s]+)(\1)\s*\));?\s*$/i;function HH(e){if(!e)return null;let t=M$e.exec(e)||I$e.exec(e);return t?t[1]||t[3]:(t=C$e.exec(e),t?t[2]:null)}var Yk;let rc=Yk=class extends Q{constructor(){super(...arguments),this.expression=null,this.title=null,this.value=null}readExpression(e,t){return t.value?Qk(t.value):e}writeExpression(e,t,r){this.value!=null&&(e=Qk(this.value)),e!=null&&(t[r]=e)}clone(){return new Yk({expression:this.expression,title:this.title,value:this.value})}};u([d({type:String,json:{write:{writerEnsuresNonNull:!0}}})],rc.prototype,"expression",void 0),u([we("expression",["expression","value"])],rc.prototype,"readExpression",null),u([pe("expression")],rc.prototype,"writeExpression",null),u([d({type:String,json:{write:!0,origins:{"web-scene":{write:!1}}}})],rc.prototype,"title",void 0),u([d({json:{read:!1,write:!1}})],rc.prototype,"value",void 0),rc=Yk=u([E("esri.layers.support.LabelExpressionInfo")],rc);const ZH=rc,JH=[252,146,31,255],k$e={type:"esriSMS",style:"esriSMSCircle",size:6,color:JH,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},P$e={type:"esriSLS",style:"esriSLSSolid",width:.75,color:JH},O$e={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},R$e={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},A$e={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},L$e={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},N$e={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null},dAe=fd.fromJSON(k$e),hAe=ts.fromJSON(P$e),pAe=pd.fromJSON(O$e),D$e=Sp.fromJSON(R$e),fAe=fd.fromJSON(A$e),mAe=ts.fromJSON(L$e),yAe=pd.fromJSON(N$e);var Kk;const Bw=new xt({esriServerPointLabelPlacementAboveCenter:"above-center",esriServerPointLabelPlacementAboveLeft:"above-left",esriServerPointLabelPlacementAboveRight:"above-right",esriServerPointLabelPlacementBelowCenter:"below-center",esriServerPointLabelPlacementBelowLeft:"below-left",esriServerPointLabelPlacementBelowRight:"below-right",esriServerPointLabelPlacementCenterCenter:"center-center",esriServerPointLabelPlacementCenterLeft:"center-left",esriServerPointLabelPlacementCenterRight:"center-right",esriServerLinePlacementAboveAfter:"above-after",esriServerLinePlacementAboveAlong:"above-along",esriServerLinePlacementAboveBefore:"above-before",esriServerLinePlacementAboveStart:"above-start",esriServerLinePlacementAboveEnd:"above-end",esriServerLinePlacementBelowAfter:"below-after",esriServerLinePlacementBelowAlong:"below-along",esriServerLinePlacementBelowBefore:"below-before",esriServerLinePlacementBelowStart:"below-start",esriServerLinePlacementBelowEnd:"below-end",esriServerLinePlacementCenterAfter:"center-after",esriServerLinePlacementCenterAlong:"center-along",esriServerLinePlacementCenterBefore:"center-before",esriServerLinePlacementCenterStart:"center-start",esriServerLinePlacementCenterEnd:"center-end",esriServerPolygonPlacementAlwaysHorizontal:"always-horizontal"},{ignoreUnknown:!0});function qw(e,t,r){return{enabled:!Zz(r==null?void 0:r.layer)}}function QH(e){var t;return!e||e.origin!=="service"&&((t=e.layer)==null?void 0:t.type)!=="map-image"}function F$e(e){return(e==null?void 0:e.type)==="map-image"}function YH(e){var t,r;return!!F$e(e)&&!!((r=(t=e.capabilities)==null?void 0:t.exportMap)!=null&&r.supportsArcadeExpressionForLabeling)}function j$e(e){return QH(e)||YH(e==null?void 0:e.layer)}let br=Kk=class extends Q{static evaluateWhere(e,t){const r=(n,i,s)=>{switch(i){case"=":return n==s;case"<>":return n!=s;case">":return n>s;case">=":return n>=s;case"<":return n<s;case"<=":return n<=s}return!1};try{if(e==null)return!0;const n=e.split(" ");if(n.length===3)return r(t[n[0]],n[1],n[2]);if(n.length===7){const i=r(t[n[0]],n[1],n[2]),s=n[3],o=r(t[n[4]],n[5],n[6]);switch(s){case"AND":return i&&o;case"OR":return i||o}}return!1}catch{console.log("Error.: can't parse = "+e)}}constructor(e){super(e),this.type="label",this.name=null,this.allowOverrun=!1,this.deconflictionStrategy="static",this.labelExpression=null,this.labelExpressionInfo=null,this.labelPlacement=null,this.labelPosition="curved",this.maxScale=0,this.minScale=0,this.repeatLabel=!0,this.repeatLabelDistance=null,this.symbol=D$e,this.useCodedValues=void 0,this.where=null}readLabelExpression(e,t){const r=t.labelExpressionInfo;if(!r||!r.value&&!r.expression)return e}writeLabelExpression(e,t,r){if(this.labelExpressionInfo){if(this.labelExpressionInfo.value!=null)e=S$e(this.labelExpressionInfo.value);else if(this.labelExpressionInfo.expression!=null){const n=HH(this.labelExpressionInfo.expression);n&&(e="["+n+"]")}}e!=null&&(t[r]=e)}writeLabelExpressionInfo(e,t,r,n){if(e==null&&this.labelExpression!=null&&QH(n))e=new ZH({expression:this.getLabelExpressionArcade()});else if(!e)return;const i=e.toJSON(n);i.expression&&(t[r]=i)}writeMaxScale(e,t){(e||this.minScale)&&(t.maxScale=e)}writeMinScale(e,t){(e||this.maxScale)&&(t.minScale=e)}getLabelExpression(){return V3(this)}getLabelExpressionArcade(){return x$e(this)}getLabelExpressionSingleField(){return $$e(this)}hash(){return JSON.stringify(this)}clone(){return new Kk({allowOverrun:this.allowOverrun,deconflictionStrategy:this.deconflictionStrategy,labelExpression:this.labelExpression,labelExpressionInfo:F(this.labelExpressionInfo),labelPosition:this.labelPosition,labelPlacement:this.labelPlacement,maxScale:this.maxScale,minScale:this.minScale,name:this.name,repeatLabel:this.repeatLabel,repeatLabelDistance:this.repeatLabelDistance,symbol:F(this.symbol),where:this.where,useCodedValues:this.useCodedValues})}};u([d({type:String,json:{write:!0}})],br.prototype,"name",void 0),u([d({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1},"portal-item":{default:!1,write:{overridePolicy:qw}}}}})],br.prototype,"allowOverrun",void 0),u([d({type:String,json:{write:!0,default:"static",origins:{"web-scene":{write:!1},"portal-item":{default:"static",write:{overridePolicy:qw}}}}})],br.prototype,"deconflictionStrategy",void 0),u([d({type:String,json:{write:{overridePolicy(e,t,r){return this.labelExpressionInfo&&(r==null?void 0:r.origin)==="service"&&YH(r.layer)?{enabled:!1}:{allowNull:!0}}}}})],br.prototype,"labelExpression",void 0),u([we("labelExpression")],br.prototype,"readLabelExpression",null),u([pe("labelExpression")],br.prototype,"writeLabelExpression",null),u([d({type:ZH,json:{write:{overridePolicy:(e,t,r)=>j$e(r)?{allowNull:!0}:{enabled:!1}}}})],br.prototype,"labelExpressionInfo",void 0),u([pe("labelExpressionInfo")],br.prototype,"writeLabelExpressionInfo",null),u([d({type:Bw.apiValues,json:{type:Bw.jsonValues,read:Bw.read,write:Bw.write}})],br.prototype,"labelPlacement",void 0),u([d({type:["curved","parallel"],json:{write:!0,origins:{"web-map":{write:!1},"web-scene":{write:!1},"portal-item":{write:!1}}}})],br.prototype,"labelPosition",void 0),u([d({type:Number})],br.prototype,"maxScale",void 0),u([pe("maxScale")],br.prototype,"writeMaxScale",null),u([d({type:Number})],br.prototype,"minScale",void 0),u([pe("minScale")],br.prototype,"writeMinScale",null),u([d({type:Boolean,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:{overridePolicy:qw}}}}})],br.prototype,"repeatLabel",void 0),u([d({type:Number,cast:At,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:{overridePolicy:qw}}}}})],br.prototype,"repeatLabelDistance",void 0),u([d({types:ipe,json:{origins:{"web-scene":{types:spe,write:L4,default:null}},write:L4,default:null}})],br.prototype,"symbol",void 0),u([d({type:Boolean,json:{write:!0}})],br.prototype,"useCodedValues",void 0),u([d({type:String,json:{write:!0}})],br.prototype,"where",void 0),br=Kk=u([E("esri.layers.support.LabelClass")],br);const KH=br,zT=Z.getLogger("esri.layers.support.labelingInfo"),V$e=/\[([^\[\]]+)\]/gi;function gAe(e,t,r){return e?e.map(n=>{const i=new KH;if(i.read(n,r),i.labelExpression){const s=t.fields||t.layerDefinition&&t.layerDefinition.fields||this.fields;i.labelExpression=i.labelExpression.replaceAll(V$e,(o,a)=>`[${z$e(a,s)}]`)}return i}):null}function z$e(e,t){if(!t)return e;const r=e.toLowerCase();for(let n=0;n<t.length;n++){const i=t[n].name;if(i.toLowerCase()===r)return i}return e}const U$e={esriGeometryPoint:["above-right","above-center","above-left","center-center","center-left","center-right","below-center","below-left","below-right"],esriGeometryPolygon:["always-horizontal"],esriGeometryPolyline:["center-along"],esriGeometryMultipoint:null};function G$e(e,t){const r=F(e);return r.some(n=>B$e(n,t))?[]:r}function B$e(e,t){const r=e.labelPlacement,n=U$e[t];if(!e.symbol)return zT.warn("No ILabelClass symbol specified."),!0;if(!n)return zT.error(new N("labeling:unsupported-geometry-type",`Unable to create labels for layer, geometry type '${t}' is not supported`)),!0;if(!n.includes(r)){const i=n[0];r&&zT.warn(`Found invalid label placement type ${r} for ${t}. Defaulting to ${i}`),e.labelPlacement=i}return!1}var Xk;let mf=Xk=class extends Q{constructor(e){super(e),this.floorField=null,this.viewAllMode=!1,this.viewAllLevelIds=new Le}clone(){return new Xk({floorField:this.floorField,viewAllMode:this.viewAllMode,viewAllLevelIds:this.viewAllLevelIds})}};u([d({type:String,json:{write:!0}})],mf.prototype,"floorField",void 0),u([d({json:{read:!1,write:!1}})],mf.prototype,"viewAllMode",void 0),u([d({json:{read:!1,write:!1}})],mf.prototype,"viewAllLevelIds",void 0),mf=Xk=u([E("esri.layers.support.LayerFloorInfo")],mf);const q$e=mf,W$e={name:"supportsName",size:"supportsSize",contentType:"supportsContentType",keywords:"supportsKeywords",exifInfo:"supportsExifInfo"};function Re(e,t,r){return!!XH(e,t,r)}function Ww(e,t,r){return XH(e,t,r)}function XH(e,t,r){return e&&e.hasOwnProperty(t)?e[t]:r}function H$e(e){var r;const t=(r=e==null?void 0:e.supportedSpatialAggregationStatistics)==null?void 0:r.map(n=>n.toLowerCase());return{envelope:!!(t!=null&&t.includes("envelopeaggregate")),centroid:!!(t!=null&&t.includes("centroidaggregate")),convexHull:!!(t!=null&&t.includes("convexhullaggregate"))}}function S1(e,t){var n;const r=(n=e==null?void 0:e.supportedOperationsWithCacheHint)==null?void 0:n.map(i=>i.toLowerCase());return!!(r!=null&&r.includes(t.toLowerCase()))}function Z$e(e,t){return{analytics:J$e(e),attachment:Q$e(e),data:Y$e(e),metadata:K$e(e),operations:X$e(e.capabilities,e,t),query:eTe(e,t),queryRelated:tTe(e),queryTopFeatures:rTe(e),editing:nTe(e)}}function J$e(e){return{supportsCacheHint:S1(e.advancedQueryCapabilities,"queryAnalytics")}}function Q$e(e){const t=e.attachmentProperties,r={supportsName:!1,supportsSize:!1,supportsContentType:!1,supportsKeywords:!1,supportsExifInfo:!1,supportsCacheHint:S1(e.advancedQueryCapabilities,"queryAttachments"),supportsResize:Re(e,"supportsAttachmentsResizing",!1)};return t&&Array.isArray(t)&&t.forEach(n=>{const i=W$e[n.name];i&&(r[i]=!!n.isEnabled)}),r}function Y$e(e){return{isVersioned:Re(e,"isDataVersioned",!1),supportsAttachment:Re(e,"hasAttachments",!1),supportsM:Re(e,"hasM",!1),supportsZ:Re(e,"hasZ",!1)}}function K$e(e){return{supportsAdvancedFieldProperties:Re(e,"supportsFieldDescriptionProperty",!1)}}function X$e(e,t,r){const n=e?e.toLowerCase().split(",").map(m=>m.trim()):[],i=r?oy(r):null,s=n.includes(i!=null&&i.serverType==="MapServer"?"data":"query"),o=n.includes("editing")&&!t.datesInUnknownTimezone;let a=o&&n.includes("create"),l=o&&n.includes("delete"),c=o&&n.includes("update");const h=n.includes("changetracking"),f=t.advancedQueryCapabilities;return o&&!(a||l||c)&&(a=l=c=!0),{supportsCalculate:Re(t,"supportsCalculate",!1),supportsTruncate:Re(t,"supportsTruncate",!1),supportsValidateSql:Re(t,"supportsValidateSql",!1),supportsAdd:a,supportsDelete:l,supportsEditing:o,supportsChangeTracking:h,supportsQuery:s,supportsQueryAnalytics:Re(f,"supportsQueryAnalytic",!1),supportsQueryAttachments:Re(f,"supportsQueryAttachments",!1),supportsQueryTopFeatures:Re(f,"supportsTopFeaturesQuery",!1),supportsResizeAttachments:Re(t,"supportsAttachmentsResizing",!1),supportsSync:n.includes("sync"),supportsUpdate:c,supportsExceedsLimitStatistics:Re(t,"supportsExceedsLimitStatistics",!1),supportsAsyncConvert3D:Re(t,"supportsAsyncConvert3D",!1)}}function eTe(e,t){const r=e.advancedQueryCapabilities,n=e.ownershipBasedAccessControlForFeatures,i=e.archivingInfo,s=e.currentVersion,o=t==null?void 0:t.includes("MapServer"),a=!o||s>=V("mapserver-pbf-version-support"),l=gB(t),c=new Set((e.supportedQueryFormats??"").split(",").map(h=>h.toLowerCase().trim()));return{supportsStatistics:Re(r,"supportsStatistics",e.supportsStatistics),supportsPercentileStatistics:Re(r,"supportsPercentileStatistics",!1),supportsSpatialAggregationStatistics:Re(r,"supportsSpatialAggregationStatistics",!1),supportedSpatialAggregationStatistics:H$e(r),supportsCentroid:Re(r,"supportsReturningGeometryCentroid",!1),supportsDistance:Re(r,"supportsQueryWithDistance",!1),supportsDistinct:Re(r,"supportsDistinct",e.supportsAdvancedQueries),supportsExtent:Re(r,"supportsReturningQueryExtent",!1),supportsGeometryProperties:Re(r,"supportsReturningGeometryProperties",!1),supportsHavingClause:Re(r,"supportsHavingClause",!1),supportsOrderBy:Re(r,"supportsOrderBy",e.supportsAdvancedQueries),supportsPagination:Re(r,"supportsPagination",!1),supportsQuantization:Re(e,"supportsCoordinatesQuantization",!1),supportsQuantizationEditMode:Re(e,"supportsQuantizationEditMode",!1),supportsQueryGeometry:Re(e,"supportsReturningQueryGeometry",!1),supportsResultType:Re(r,"supportsQueryWithResultType",!1),supportsMaxRecordCountFactor:Re(r,"supportsMaxRecordCountFactor",!1),supportsSqlExpression:Re(r,"supportsSqlExpression",!1),supportsStandardizedQueriesOnly:Re(e,"useStandardizedQueries",!1),supportsTopFeaturesQuery:Re(r,"supportsTopFeaturesQuery",!1),supportsQueryByOthers:Re(n,"allowOthersToQuery",!0),supportsHistoricMoment:Re(i,"supportsQueryWithHistoricMoment",!1),supportsFormatPBF:a&&c.has("pbf"),supportsDisjointSpatialRelationship:Re(r,"supportsDisjointSpatialRel",!1),supportsCacheHint:Re(r,"supportsQueryWithCacheHint",!1)||S1(r,"query"),supportsDefaultSpatialReference:Re(r,"supportsDefaultSR",!1),supportsCompactGeometry:l,supportsFullTextSearch:Re(r,"supportsFullTextSearch",!1),maxRecordCountFactor:Ww(e,"maxRecordCountFactor",void 0),maxRecordCount:Ww(e,"maxRecordCount",void 0),standardMaxRecordCount:Ww(e,"standardMaxRecordCount",void 0),tileMaxRecordCount:Ww(e,"tileMaxRecordCount",void 0)}}function tTe(e){const t=e.advancedQueryCapabilities,r=Re(t,"supportsAdvancedQueryRelated",!1);return{supportsPagination:Re(t,"supportsQueryRelatedPagination",!1),supportsCount:r,supportsOrderBy:r,supportsCacheHint:S1(t,"queryRelated")}}function rTe(e){return{supportsCacheHint:S1(e.advancedQueryCapabilities,"queryTopFilter")}}function nTe(e){const t=e.ownershipBasedAccessControlForFeatures,r=e?e.advancedEditingCapabilities:void 0;return{supportsGeometryUpdate:Re(e,"allowGeometryUpdates",!0),supportsGlobalId:Re(e,"supportsApplyEditsWithGlobalIds",!1),supportsReturnServiceEditsInSourceSpatialReference:Re(e,"supportsReturnServiceEditsInSourceSR",!1),supportsRollbackOnFailure:Re(e,"supportsRollbackOnFailureParameter",!1),supportsUpdateWithoutM:Re(e,"allowUpdateWithoutMValues",!1),supportsUploadWithItemId:Re(e,"supportsAttachmentsByUploadId",!1),supportsDeleteByAnonymous:Re(t,"allowAnonymousToDelete",!0),supportsDeleteByOthers:Re(t,"allowOthersToDelete",!0),supportsUpdateByAnonymous:Re(t,"allowAnonymousToUpdate",!0),supportsUpdateByOthers:Re(t,"allowOthersToUpdate",!0),supportsAsyncApplyEdits:Re(r,"supportsAsyncApplyEdits",!1)}}var eP;let an=eP=class extends Q{constructor(e){super(e),this.attachmentTypes=null,this.attachmentsWhere=null,this.cacheHint=void 0,this.keywords=null,this.globalIds=null,this.name=null,this.num=null,this.objectIds=null,this.returnMetadata=!1,this.size=null,this.start=null,this.where=null}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10}clone(){return new eP(F({attachmentTypes:this.attachmentTypes,attachmentsWhere:this.attachmentsWhere,cacheHint:this.cacheHint,keywords:this.keywords,where:this.where,globalIds:this.globalIds,name:this.name,num:this.num,objectIds:this.objectIds,returnMetadata:this.returnMetadata,size:this.size,start:this.start}))}};u([d({type:[String],json:{write:!0}})],an.prototype,"attachmentTypes",void 0),u([d({type:String,json:{read:{source:"attachmentsDefinitionExpression"},write:{target:"attachmentsDefinitionExpression"}}})],an.prototype,"attachmentsWhere",void 0),u([d({type:Boolean,json:{write:!0}})],an.prototype,"cacheHint",void 0),u([d({type:[String],json:{write:!0}})],an.prototype,"keywords",void 0),u([d({type:[Number],json:{write:!0}})],an.prototype,"globalIds",void 0),u([d({json:{write:!0}})],an.prototype,"name",void 0),u([d({type:Number,json:{read:{source:"resultRecordCount"}}})],an.prototype,"num",void 0),u([d({type:[Number],json:{write:!0}})],an.prototype,"objectIds",void 0),u([d({type:Boolean,json:{default:!1,write:!0}})],an.prototype,"returnMetadata",void 0),u([d({type:[Number],json:{write:!0}})],an.prototype,"size",void 0),u([d({type:Number,json:{read:{source:"resultOffset"}}})],an.prototype,"start",void 0),u([pe("start"),pe("num")],an.prototype,"writeStart",null),u([d({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],an.prototype,"where",void 0),an=eP=u([E("esri.rest.support.AttachmentQuery")],an),an.from=gr(an);const iTe=an;function sTe({displayField:e,editFieldsInfo:t,fields:r,objectIdField:n,title:i},s){if(!r)return null;const o=uTe({editFieldsInfo:t,fields:r,objectIdField:n},s);if(!o.length)return null;const a=hTe({titleBase:i,fields:r,displayField:e}),l=dTe();return new Km({title:a,content:l,fieldInfos:o})}const oTe=(e,t)=>t.visibleFieldNames?t.visibleFieldNames.has(e.name):_ue(e,t);function aTe(e,t){const r=e;return t&&(e=e.filter(n=>!t.includes(n.type))),e===r&&(e=e.slice()),e.sort(lTe),e}function lTe(e,t){return e.type==="oid"?-1:t.type==="oid"?1:dj(e)?-1:dj(t)?1:(e.alias||e.name).toLocaleLowerCase().localeCompare((t.alias||t.name).toLocaleLowerCase())}function uTe(e,t){const r=t==null?void 0:t.visibleFieldNames;return aTe(e.fields??[],(t==null?void 0:t.ignoreFieldTypes)||pTe).map(n=>new ER({fieldName:n.name,isEditable:wue(n,e),label:n.alias,format:cTe(n),visible:oTe(n,{...e,visibleFieldNames:r})}))}function cTe(e){switch(e.type){case"small-integer":case"integer":case"single":return new sg({digitSeparator:!0,places:0});case"double":return new sg({digitSeparator:!0,places:2});case"date":return new sg({dateFormat:"long-month-day-year"});default:return e.type==="string"&&Fue(e.name)?new sg({digitSeparator:!0,places:0}):null}}function dTe(){return[new gv,new yv]}function hTe(e){const t=uue(e),{titleBase:r}=e;return t?`${r}: {${t.trim()}}`:r??""}function dj(e){return(e.name&&e.name.toLowerCase())==="name"?!0:(e.alias&&e.alias.toLowerCase())==="name"}const pTe=["geometry","blob","raster","guid","xml"];var gb;function UT(e){return e!=null&&e.type==="esriSMS"}function GT(e,t,r){var i;const n=this.originIdOf(t)>=Kn(r.origin);return{ignoreOrigin:!0,allowNull:n,enabled:!!r&&((i=r.layer)==null?void 0:i.type)==="map-image"&&(r.writeSublayerStructure||n)}}function BT(e,t,r){var n;return{enabled:!!r&&((n=r.layer)==null?void 0:n.type)==="tile"&&(r.origin&&this.originIdOf(t)>=Kn(r.origin)||this._isOverridden(t))}}function cs(e,t,r){return{ignoreOrigin:!0,enabled:r&&r.writeSublayerStructure||!1}}function Hw(e,t,r){return{ignoreOrigin:!0,enabled:!!r&&(r.writeSublayerStructure||this.originIdOf(t)>=Kn(r.origin))}}let fTe=0;const hh=new Set;hh.add("layer"),hh.add("parent"),hh.add("loaded"),hh.add("loadStatus"),hh.add("loadError"),hh.add("loadWarnings");let Fe=gb=class extends sy(w3(e1(Ql))){constructor(e){super(e),this.capabilities=void 0,this.fields=null,this.fullExtent=null,this.geometryType=null,this.globalIdField=null,this.legendEnabled=!0,this.objectIdField=null,this.parent=null,this.popupEnabled=!0,this.popupTemplate=null,this.sourceJSON=null,this.title=null,this.typeIdField=null,this.types=null,this._lastParsedUrl=null}async load(e){return this.addResolvingPromise((async()=>{const{layer:t,url:r}=this;if(!t&&!r)throw new N("sublayer:missing-layer","Sublayer can't be loaded without being part of a layer",{sublayer:this});const n=t?await t.fetchSublayerInfo(this,e):(await St(r,{responseType:"json",query:{f:"json"},...e})).data;n&&(this.sourceJSON=n,this.read({layerDefinition:n},{origin:"service"}))})()),this}readCapabilities(e,t){t=t.layerDefinition||t;const{operations:{supportsQuery:r,supportsQueryAttachments:n},query:{supportsFormatPBF:i},data:{supportsAttachment:s}}=Z$e(t,this.url);return{exportMap:{supportsModification:!!t.canModifyLayer},operations:{supportsQuery:r,supportsQueryAttachments:n},data:{supportsAttachment:s},query:{supportsFormatPBF:i}}}get defaultPopupTemplate(){return this.createPopupTemplate()}set definitionExpression(e){this._setAndNotifyLayer("definitionExpression",e)}get effectiveScaleRange(){const{minScale:e,maxScale:t}=this;return{minScale:e,maxScale:t}}get fieldsIndex(){return new KW(this.fields||[])}set floorInfo(e){this._setAndNotifyLayer("floorInfo",e)}readGlobalIdFieldFromService(e,t){if((t=t.layerDefinition||t).globalIdField)return t.globalIdField;if(t.fields){for(const r of t.fields)if(r.type==="esriFieldTypeGlobalID")return r.name}}get id(){return this._get("id")??fTe++}set id(e){var t,r,n;this._get("id")!==e&&(((n=(r=(t=this.layer)==null?void 0:t.capabilities)==null?void 0:r.exportMap)==null?void 0:n.supportsDynamicLayers)!==!1?this._set("id",e):this._logLockedError("id","capability not available 'layer.capabilities.exportMap.supportsDynamicLayers'"))}set labelingInfo(e){this._setAndNotifyLayer("labelingInfo",e)}writeLabelingInfo(e,t,r,n){e&&e.length&&(t.layerDefinition={drawingInfo:{labelingInfo:e.map(i=>i.write({},n))}})}set labelsVisible(e){this._setAndNotifyLayer("labelsVisible",e)}set layer(e){this._set("layer",e),this.sublayers&&this.sublayers.forEach(t=>t.layer=e)}set listMode(e){this._set("listMode",e)}set minScale(e){this._setAndNotifyLayer("minScale",e)}readMinScale(e,t){return t.minScale||t.layerDefinition&&t.layerDefinition.minScale||0}set maxScale(e){this._setAndNotifyLayer("maxScale",e)}readMaxScale(e,t){return t.maxScale||t.layerDefinition&&t.layerDefinition.maxScale||0}readObjectIdFieldFromService(e,t){if((t=t.layerDefinition||t).objectIdField)return t.objectIdField;if(t.fields){for(const r of t.fields)if(r.type==="esriFieldTypeOID")return r.name}}set opacity(e){this._setAndNotifyLayer("opacity",e)}readOpacity(e,t){var n;const r=t.layerDefinition;return 1-.01*(((r==null?void 0:r.transparency)!=null?r.transparency:(n=r==null?void 0:r.drawingInfo)==null?void 0:n.transparency)??0)}writeOpacity(e,t,r,n){t.layerDefinition={drawingInfo:{transparency:100-100*e}}}writeParent(e,t){this.parent&&this.parent!==this.layer?t.parentLayerId=r2(this.parent.id):t.parentLayerId=-1}get queryTask(){var o;if(!this.layer)return null;const{spatialReference:e}=this.layer,t="gdbVersion"in this.layer?this.layer.gdbVersion:void 0,{capabilities:r,fieldsIndex:n}=this,i=V("featurelayer-pbf")&&(r==null?void 0:r.query.supportsFormatPBF),s=((o=r==null?void 0:r.operations)==null?void 0:o.supportsQueryAttachments)??!1;return new f$e({url:this.url,pbfSupported:i,fieldsIndex:n,gdbVersion:t,sourceSpatialReference:e,queryAttachmentsSupported:s})}set renderer(e){if(e){for(const t of e.getSymbols())if(uC(t)){Z.getLogger(this).warn("Sublayer renderer should use 2D symbols");break}}this._setAndNotifyLayer("renderer",e)}get source(){return this._get("source")||new Cl({mapLayerId:this.id})}set source(e){this._setAndNotifyLayer("source",e)}set sublayers(e){this._handleSublayersChange(e,this._get("sublayers")),this._set("sublayers",e)}castSublayers(e){return gr(Le.ofType(gb),e)}writeSublayers(e,t,r){var n;(n=this.sublayers)!=null&&n.length&&(t[r]=this.sublayers.map(i=>i.id).toArray().reverse())}readTypeIdField(e,t){let r=(t=t.layerDefinition||t).typeIdField;if(r&&t.fields){r=r.toLowerCase();const n=t.fields.find(i=>i.name.toLowerCase()===r);n&&(r=n.name)}return r}get url(){var n;const e=((n=this.layer)==null?void 0:n.parsedUrl)??this._lastParsedUrl,t=this.source;if(!e)return null;if(this._lastParsedUrl=e,(t==null?void 0:t.type)==="map-layer")return`${e.path}/${t.mapLayerId}`;const r={layer:JSON.stringify({source:this.source})};return`${e.path}/dynamicLayer?${$m(r)}`}set url(e){this._overrideIfSome("url",e)}set visible(e){this._setAndNotifyLayer("visible",e)}writeVisible(e,t,r,n){t[r]=this.getAtOrigin("defaultVisibility","service")||e}clone(){const{store:e}=Xr(this),t=new gb;return Xr(t).store=e.clone(hh),this.commitProperty("url"),t._lastParsedUrl=this._lastParsedUrl,t}createPopupTemplate(e){return sTe(this,e)}createQuery(){return new Tp({returnGeometry:!0,where:this.definitionExpression||"1=1"})}async createFeatureLayer(){var n;if(this.hasOwnProperty("sublayers"))return null;const{layer:e}=this,t=e==null?void 0:e.parsedUrl,r=new(await ie(()=>import("./FeatureLayer-852e78d2.js"),["assets/FeatureLayer-852e78d2.js","assets/FeatureLayerBase-bfa01cb0.js","assets/featureLayerUtils-ac66a8f0.js","assets/RelationshipQuery-bf22fff1.js","assets/editsZScale-4caab792.js","assets/EditBusLayer-7f8ff5e7.js","assets/FeatureEffectLayer-cdba4172.js","assets/FeatureEffect-38c14a64.js","assets/FeatureReductionLayer-d582c2c6.js","assets/clusterUtils-84d6baf1.js","assets/OrderedLayer-05f6586b.js","assets/fieldProperties-237f2853.js","assets/styleUtils-b6b6277d.js","assets/TopFeaturesQuery-46f43816.js"])).default({url:t==null?void 0:t.path});return t&&this.source&&(this.source.type==="map-layer"?r.layerId=this.source.mapLayerId:r.dynamicDataSource=this.source),(e==null?void 0:e.refreshInterval)!=null&&(r.refreshInterval=e.refreshInterval),this.definitionExpression&&(r.definitionExpression=this.definitionExpression),this.floorInfo&&(r.floorInfo=F(this.floorInfo)),this.originIdOf("labelingInfo")>ae.SERVICE&&(r.labelingInfo=F(this.labelingInfo)),this.originIdOf("labelsVisible")>ae.DEFAULTS&&(r.labelsVisible=this.labelsVisible),this.originIdOf("legendEnabled")>ae.DEFAULTS&&(r.legendEnabled=this.legendEnabled),this.originIdOf("visible")>ae.DEFAULTS&&(r.visible=this.visible),this.originIdOf("minScale")>ae.DEFAULTS&&(r.minScale=this.minScale),this.originIdOf("maxScale")>ae.DEFAULTS&&(r.maxScale=this.maxScale),this.originIdOf("opacity")>ae.DEFAULTS&&(r.opacity=this.opacity),this.originIdOf("popupTemplate")>ae.DEFAULTS&&(r.popupTemplate=F(this.popupTemplate)),this.originIdOf("renderer")>ae.SERVICE&&(r.renderer=F(this.renderer)),((n=this.source)==null?void 0:n.type)==="data-layer"&&(r.dynamicDataSource=this.source.clone()),this.originIdOf("title")>ae.DEFAULTS&&(r.title=this.title),(e==null?void 0:e.type)==="map-image"&&e.originIdOf("customParameters")>ae.DEFAULTS&&(r.customParameters=e.customParameters),(e==null?void 0:e.type)==="tile"&&e.originIdOf("customParameters")>ae.DEFAULTS&&(r.customParameters=e.customParameters),r}getField(e){return this.fieldsIndex.get(e)}getFeatureType(e){const{typeIdField:t,types:r}=this;if(!t||!e)return null;const n=e.attributes?e.attributes[t]:void 0;if(n==null)return null;let i=null;return r==null||r.some(s=>{const{id:o}=s;return o!=null&&(o.toString()===n.toString()&&(i=s),!!i)}),i}getFieldDomain(e,t){const r=t&&t.feature,n=this.getFeatureType(r);if(n){const i=n.domains&&n.domains[e];if(i&&i.type!=="inherited")return i}return this._getLayerDomain(e)}async queryAttachments(e,t){var h,f;await this.load(),e=iTe.from(e);const r=this.capabilities;if(!((h=r==null?void 0:r.data)!=null&&h.supportsAttachment))throw new N("queryAttachments:not-supported","this layer doesn't support attachments");const{attachmentTypes:n,objectIds:i,globalIds:s,num:o,size:a,start:l,where:c}=e;if(!((f=r==null?void 0:r.operations)!=null&&f.supportsQueryAttachments)&&((n==null?void 0:n.length)>0||(s==null?void 0:s.length)>0||(a==null?void 0:a.length)>0||o||l||c))throw new N("queryAttachments:option-not-supported","when 'capabilities.operations.supportsQueryAttachments' is false, only objectIds is supported",e);if(!(i!=null&&i.length||s!=null&&s.length||c))throw new N("queryAttachments:invalid-query","'objectIds', 'globalIds', or 'where' are required to perform attachment query",e);return this.queryTask.executeAttachmentQuery(e,t)}async queryFeatures(e=this.createQuery(),t){var n,i;if(await this.load(),!this.capabilities.operations.supportsQuery)throw new N("queryFeatures:not-supported","this layer doesn't support queries.");if(!this.url)throw new N("queryFeatures:not-supported","this layer has no url.");const r=await this.queryTask.execute(e,{...t,query:{...(n=this.layer)==null?void 0:n.customParameters,token:(i=this.layer)==null?void 0:i.apiKey}});if(r!=null&&r.features)for(const s of r.features)s.sourceLayer=this;return r}toExportImageJSON(e){var s;const t={id:this.id,source:((s=this.source)==null?void 0:s.toJSON())||{mapLayerId:this.id,type:"mapLayer"}},r=C3(e,this.definitionExpression);r!=null&&(t.definitionExpression=r);const n=["renderer","labelingInfo","opacity","labelsVisible"].reduce((o,a)=>(o[a]=this.originIdOf(a),o),{});if(Object.keys(n).some(o=>n[o]>ae.SERVICE)){const o=t.drawingInfo={};if(n.renderer>ae.SERVICE&&(o.renderer=this.renderer?this.renderer.toJSON():null),n.labelsVisible>ae.SERVICE&&(o.showLabels=this.labelsVisible),this.labelsVisible&&n.labelingInfo>ae.SERVICE){!this.loaded&&this.labelingInfo.some(l=>!l.labelPlacement)&&Z.getLogger(this).warnOnce(`A Sublayer (title: ${this.title}, id: ${this.id}) has an undefined 'labelPlacement' and so labels cannot be displayed. Either define a valid 'labelPlacement' or call Sublayer.load() to use a default value based on geometry type.`,{sublayer:this});let a=this.labelingInfo;this.geometryType!=null&&(a=G$e(this.labelingInfo,OS.toJSON(this.geometryType))),o.labelingInfo=a.filter(l=>l.labelPlacement).map(l=>l.toJSON({origin:"service",layer:this.layer})),o.showLabels=!0}n.opacity>ae.SERVICE&&(o.transparency=100-100*this.opacity),this._assignDefaultSymbolColors(o.renderer)}return t}_assignDefaultSymbolColors(e){this._forEachSimpleMarkerSymbols(e,t=>{t.color||t.style!=="esriSMSX"&&t.style!=="esriSMSCross"||(t.outline&&t.outline.color?t.color=t.outline.color:t.color=[0,0,0,0])})}_forEachSimpleMarkerSymbols(e,t){if(e){const r=("uniqueValueInfos"in e?e.uniqueValueInfos:"classBreakInfos"in e?e.classBreakInfos:null)??[];for(const n of r)UT(n.symbol)&&t(n.symbol);"symbol"in e&&UT(e.symbol)&&t(e.symbol),"defaultSymbol"in e&&UT(e.defaultSymbol)&&t(e.defaultSymbol)}}_setAndNotifyLayer(e,t){var a,l,c,h;const r=this.layer,n=this._get(e);let i,s;switch(e){case"definitionExpression":case"floorInfo":i="supportsSublayerDefinitionExpression";break;case"minScale":case"maxScale":case"visible":i="supportsSublayerVisibility";break;case"labelingInfo":case"labelsVisible":case"opacity":case"renderer":case"source":i="supportsDynamicLayers",s="supportsModification"}const o=Xr(this).getDefaultOrigin();if(o!=="service"){if(i&&((c=(l=(a=this.layer)==null?void 0:a.capabilities)==null?void 0:l.exportMap)==null?void 0:c[i])===!1)return void this._logLockedError(e,`capability not available 'layer.capabilities.exportMap.${i}'`);if(s&&((h=this.capabilities)==null?void 0:h.exportMap[s])===!1)return void this._logLockedError(e,`capability not available 'capabilities.exportMap.${s}'`)}e!=="source"||this.loadStatus==="not-loaded"?(this._set(e,t),o!=="service"&&n!==t&&r&&r.emit&&r.emit("sublayer-update",{propertyName:e,target:this})):this._logLockedError(e,"'source' can't be changed after calling sublayer.load()")}_handleSublayersChange(e,t){t&&(t.forEach(r=>{r.parent=null,r.layer=null}),this.handles.removeAll()),e&&(e.forEach(r=>{r.parent=this,r.layer=this.layer}),this.handles.add([e.on("after-add",({item:r})=>{r.parent=this,r.layer=this.layer}),e.on("after-remove",({item:r})=>{r.parent=null,r.layer=null}),e.on("before-changes",r=>{var i,s,o;const n=(o=(s=(i=this.layer)==null?void 0:i.capabilities)==null?void 0:s.exportMap)==null?void 0:o.supportsSublayersChanges;n==null||n||(Z.getLogger(this).error(new N("sublayer:sublayers-non-modifiable","Sublayer can't be added, moved, or removed from the layer's sublayers",{sublayer:this,layer:this.layer})),r.preventDefault())})]))}_logLockedError(e,t){const{layer:r,declaredClass:n}=this;Z.getLogger(n).error(new N("sublayer:locked",`Property '${String(e)}' can't be changed on Sublayer from the layer '${r==null?void 0:r.id}'`,{reason:t,sublayer:this,layer:r}))}_getLayerDomain(e){const t=this.fieldsIndex.get(e);return t?t.domain:null}};Fe.test={isMapImageLayerOverridePolicy:e=>e===cs||e===GT,isTileImageLayerOverridePolicy:e=>e===BT},u([d({readOnly:!0})],Fe.prototype,"capabilities",void 0),u([we("service","capabilities",["layerDefinition.canModifyLayer","layerDefinition.capabilities"])],Fe.prototype,"readCapabilities",null),u([d()],Fe.prototype,"defaultPopupTemplate",null),u([d({type:String,value:null,json:{name:"layerDefinition.definitionExpression",write:{allowNull:!0,overridePolicy:GT}}})],Fe.prototype,"definitionExpression",null),u([d({readOnly:!0})],Fe.prototype,"effectiveScaleRange",null),u([d({type:[k3],json:{origins:{service:{read:{source:"layerDefinition.fields"}}}}})],Fe.prototype,"fields",void 0),u([d({readOnly:!0})],Fe.prototype,"fieldsIndex",null),u([d({type:q$e,value:null,json:{name:"layerDefinition.floorInfo",read:{source:"layerDefinition.floorInfo"},write:{target:"layerDefinition.floorInfo",overridePolicy:GT},origins:{"web-scene":{read:!1,write:!1}}}})],Fe.prototype,"floorInfo",null),u([d({type:at,json:{read:{source:"layerDefinition.extent"}}})],Fe.prototype,"fullExtent",void 0),u([d({type:OS.apiValues,json:{origins:{service:{name:"layerDefinition.geometryType",read:{reader:OS.read}}}}})],Fe.prototype,"geometryType",void 0),u([d({type:String})],Fe.prototype,"globalIdField",void 0),u([we("service","globalIdField",["layerDefinition.globalIdField","layerDefinition.fields"])],Fe.prototype,"readGlobalIdFieldFromService",null),u([d({type:bt,json:{write:{ignoreOrigin:!0}}})],Fe.prototype,"id",null),u([d({value:null,type:[KH],json:{read:{source:"layerDefinition.drawingInfo.labelingInfo"},write:{target:"layerDefinition.drawingInfo.labelingInfo",overridePolicy:cs}}})],Fe.prototype,"labelingInfo",null),u([pe("labelingInfo")],Fe.prototype,"writeLabelingInfo",null),u([d({type:Boolean,value:!0,json:{read:{source:"layerDefinition.drawingInfo.showLabels"},write:{target:"layerDefinition.drawingInfo.showLabels",overridePolicy:cs}}})],Fe.prototype,"labelsVisible",null),u([d({value:null})],Fe.prototype,"layer",null),u([d({type:String,json:{write:{overridePolicy:BT}}})],Fe.prototype,"layerItemId",void 0),u([d({type:Boolean,value:!0,json:{origins:{service:{read:{enabled:!1}}},read:{source:"showLegend"},write:{target:"showLegend",overridePolicy:Hw}}})],Fe.prototype,"legendEnabled",void 0),u([d({type:["show","hide","hide-children"],value:"show",json:{read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],Fe.prototype,"listMode",null),u([d({type:Number,value:0,json:{write:{overridePolicy:cs}}})],Fe.prototype,"minScale",null),u([we("minScale",["minScale","layerDefinition.minScale"])],Fe.prototype,"readMinScale",null),u([d({type:Number,value:0,json:{write:{overridePolicy:cs}}})],Fe.prototype,"maxScale",null),u([we("maxScale",["maxScale","layerDefinition.maxScale"])],Fe.prototype,"readMaxScale",null),u([d({type:String})],Fe.prototype,"objectIdField",void 0),u([we("service","objectIdField",["layerDefinition.objectIdField","layerDefinition.fields"])],Fe.prototype,"readObjectIdFieldFromService",null),u([d({type:Number,value:1,json:{write:{target:"layerDefinition.drawingInfo.transparency",overridePolicy:cs}}})],Fe.prototype,"opacity",null),u([we("opacity",["layerDefinition.drawingInfo.transparency","layerDefinition.transparency"])],Fe.prototype,"readOpacity",null),u([pe("opacity")],Fe.prototype,"writeOpacity",null),u([d({json:{type:bt,write:{target:"parentLayerId",writerEnsuresNonNull:!0,overridePolicy:cs}}})],Fe.prototype,"parent",void 0),u([pe("parent")],Fe.prototype,"writeParent",null),u([d({type:Boolean,value:!0,json:{read:{source:"disablePopup",reader:(e,t)=>!t.disablePopup},write:{target:"disablePopup",overridePolicy:Hw,writer(e,t,r){t[r]=!e}}}})],Fe.prototype,"popupEnabled",void 0),u([d({type:Km,json:{read:{source:"popupInfo"},write:{target:"popupInfo",overridePolicy:Hw}}})],Fe.prototype,"popupTemplate",void 0),u([d({readOnly:!0})],Fe.prototype,"queryTask",null),u([d({types:fH,value:null,json:{name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy:cs},origins:{"web-scene":{types:Jxe,name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy:cs}}}}})],Fe.prototype,"renderer",null),u([d({types:{key:"type",base:null,typeMap:{"data-layer":Bi,"map-layer":Cl}},cast(e){if(e){if("mapLayerId"in e)return ep(Cl,e);if("dataSource"in e)return ep(Bi,e)}return e},json:{name:"layerDefinition.source",write:{overridePolicy:cs}}})],Fe.prototype,"source",null),u([d()],Fe.prototype,"sourceJSON",void 0),u([d({value:null,json:{type:[bt],write:{target:"subLayerIds",allowNull:!0,overridePolicy:cs}}})],Fe.prototype,"sublayers",null),u([Pt("sublayers")],Fe.prototype,"castSublayers",null),u([pe("sublayers")],Fe.prototype,"writeSublayers",null),u([d({type:String,json:{name:"name",write:{overridePolicy:Hw}}})],Fe.prototype,"title",void 0),u([d({type:String})],Fe.prototype,"typeIdField",void 0),u([we("typeIdField",["layerDefinition.typeIdField"])],Fe.prototype,"readTypeIdField",null),u([d({type:[y$e],json:{origins:{service:{read:{source:"layerDefinition.types"}}}}})],Fe.prototype,"types",void 0),u([d({type:String,json:{name:"layerUrl",write:{overridePolicy:BT}}})],Fe.prototype,"url",null),u([d({type:Boolean,value:!0,json:{read:{source:"defaultVisibility"},write:{target:"defaultVisibility",overridePolicy:cs}}})],Fe.prototype,"visible",null),u([pe("visible")],Fe.prototype,"writeVisible",null),Fe=gb=u([E("esri.layers.support.Sublayer")],Fe);const z2=Fe;function hj(e,t,r){return t.flatten(({sublayers:i})=>i).length!==e.length?!0:!!e.some(i=>i.originIdOf("minScale")>r||i.originIdOf("maxScale")>r||i.originIdOf("renderer")>r||i.originIdOf("labelingInfo")>r||i.originIdOf("opacity")>r||i.originIdOf("labelsVisible")>r||i.originIdOf("source")>r)||!tZ(e,t)}function eZ(e,t,r){return!!e.some(n=>{const i=n.source;return!(!i||i.type==="map-layer"&&i.mapLayerId===n.id&&(i.gdbVersion==null||i.gdbVersion===r))||n.originIdOf("renderer")>ae.SERVICE||n.originIdOf("labelingInfo")>ae.SERVICE||n.originIdOf("opacity")>ae.SERVICE||n.originIdOf("labelsVisible")>ae.SERVICE})||!tZ(e,t)}function tZ(e,t){if(!e||!e.length||t==null)return!0;const r=t.slice().reverse().flatten(({sublayers:s})=>s&&s.toArray().reverse()).map(s=>s.id).toArray();if(e.length>r.length)return!1;let n=0;const i=r.length;for(const{id:s}of e){for(;n<i&&r[n]!==s;)n++;if(n>=i)return!1}return!0}function mTe(e){return!!e&&e.some(t=>t.minScale!=null||t.layerDefinition&&t.layerDefinition.minScale!=null)}const yTe=Z.getLogger("esri.layers.TileLayer");function gTe(e,t){const r=[],n={};return e&&e.forEach(i=>{const s=new z2;if(s.read(i,t),n[s.id]=s,i.parentLayerId!=null&&i.parentLayerId!==-1){const o=n[i.parentLayerId];o.sublayers||(o.sublayers=[]),o.sublayers.unshift(s)}else r.unshift(s)}),r}const qT=Le.ofType(z2);function rZ(e,t){e&&e.forEach(r=>{t(r),r.sublayers&&r.sublayers.length&&rZ(r.sublayers,t)})}const vTe=e=>{let t=class extends e{constructor(...r){super(...r),this.allSublayers=new Mm({getCollections:()=>[this.sublayers],getChildrenFunction:n=>n.sublayers}),this.sublayersSourceJSON={[ae.SERVICE]:{},[ae.PORTAL_ITEM]:{},[ae.WEB_SCENE]:{},[ae.WEB_MAP]:{}},this.addHandles(Ee(()=>this.sublayers,(n,i)=>this._handleSublayersChange(n,i),ny))}destroy(){this.allSublayers.destroy()}readSublayers(r,n){if(!n||!r)return;const{sublayersSourceJSON:i}=this,s=Kn(n.origin);if(s<ae.SERVICE||(i[s]={context:n,visibleLayers:r.visibleLayers||i[s].visibleLayers,layers:r.layers||i[s].layers},s>ae.SERVICE))return;this._set("serviceSublayers",this.createSublayersForOrigin("service").sublayers);const{sublayers:o,origin:a}=this.createSublayersForOrigin("web-document"),l=Xr(this);l.setDefaultOrigin(a),this._set("sublayers",new qT(o)),l.setDefaultOrigin("user")}findSublayerById(r){return this.allSublayers.find(n=>n.id===r)}createServiceSublayers(){return this.createSublayersForOrigin("service").sublayers}createSublayersForOrigin(r){const n=Kn(r==="web-document"?"web-map":r);let i=ae.SERVICE,s=this.sublayersSourceJSON[ae.SERVICE].layers,o=this.sublayersSourceJSON[ae.SERVICE].context,a=null;const l=[ae.PORTAL_ITEM,ae.WEB_SCENE,ae.WEB_MAP].filter(g=>g<=n);for(const g of l){const v=this.sublayersSourceJSON[g];mTe(v.layers)&&(i=g,s=v.layers,o=v.context,v.visibleLayers&&(a={visibleLayers:v.visibleLayers,context:v.context}))}const c=[ae.PORTAL_ITEM,ae.WEB_SCENE,ae.WEB_MAP].filter(g=>g>i&&g<=n);let h=null;for(const g of c){const{layers:v,visibleLayers:w,context:b}=this.sublayersSourceJSON[g];v&&(h={layers:v,context:b}),w&&(a={visibleLayers:w,context:b})}const f=gTe(s,o),m=new Map,y=new Set;if(h)for(const g of h.layers)m.set(g.id,g);if(a!=null&&a.visibleLayers)for(const g of a.visibleLayers)y.add(g);return rZ(f,g=>{h&&g.read(m.get(g.id),h.context),a&&g.read({defaultVisibility:y.has(g.id)},a.context)}),{origin:av(i),sublayers:new qT({items:f})}}read(r,n){super.read(r,n),this.readSublayers(r,n)}_handleSublayersChange(r,n){n&&(n.forEach(i=>{i.parent=null,i.layer=null}),this.removeHandles("sublayers-owner")),r&&(r.forEach(i=>{i.parent=this,i.layer=this}),this.addHandles([r.on("after-add",({item:i})=>{i.parent=this,i.layer=this}),r.on("after-remove",({item:i})=>{i.parent=null,i.layer=null})],"sublayers-owner"),this.type==="tile"&&this.addHandles(r.on("before-changes",i=>{yTe.error(new N("tilelayer:sublayers-non-modifiable","ISublayer can't be added, moved, or removed from the layer's sublayers",{layer:this})),i.preventDefault()}),"sublayers-owner"))}};return u([d({readOnly:!0})],t.prototype,"allSublayers",void 0),u([d({readOnly:!0,type:Le.ofType(z2)})],t.prototype,"serviceSublayers",void 0),u([d({value:null,type:qT,json:{read:!1,write:{allowNull:!0,ignoreOrigin:!0}}})],t.prototype,"sublayers",void 0),u([d({readOnly:!0})],t.prototype,"sublayersSourceJSON",void 0),t=u([E("esri.layers.mixins.SublayersOwner")],t),t},nZ=Vn()({esriTimeUnitsMilliseconds:"milliseconds",esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",esriTimeUnitsDecades:"decades",esriTimeUnitsCenturies:"centuries",esriTimeUnitsUnknown:void 0});let qg=class extends kr(Q){constructor(t){super(t),this.unit="milliseconds",this.value=0}toMilliseconds(){return Zye(this.value,this.unit,"milliseconds")}};u([Me(nZ,{nonNullable:!0})],qg.prototype,"unit",void 0),u([d({type:Number,json:{write:!0},nonNullable:!0})],qg.prototype,"value",void 0),qg=u([E("esri.TimeInterval")],qg);const mx=qg;function pj(e,t){return mx.fromJSON({value:e,unit:t})}let Pn=class extends kr(Q){constructor(t){super(t),this.cumulative=!1,this.endField=null,this.fullTimeExtent=null,this.hasLiveData=!1,this.interval=null,this.startField=null,this.timeReference=null,this.trackIdField=null,this.useTime=!0}readFullTimeExtent(t,r){if(!r.timeExtent||!Array.isArray(r.timeExtent)||r.timeExtent.length!==2)return null;const n=new Date(r.timeExtent[0]),i=new Date(r.timeExtent[1]);return new qa({start:n,end:i})}writeFullTimeExtent(t,r){t&&t.start!=null&&t.end!=null?r.timeExtent=[t.start.getTime(),t.end.getTime()]:r.timeExtent=null}readInterval(t,r){return r.timeInterval&&r.timeIntervalUnits?pj(r.timeInterval,r.timeIntervalUnits):r.defaultTimeInterval&&r.defaultTimeIntervalUnits?pj(r.defaultTimeInterval,r.defaultTimeIntervalUnits):null}writeInterval(t,r){r.timeInterval=(t==null?void 0:t.toJSON().value)??null,r.timeIntervalUnits=(t==null?void 0:t.toJSON().unit)??null}};u([d({type:Boolean,json:{name:"exportOptions.timeDataCumulative",write:!0}})],Pn.prototype,"cumulative",void 0),u([d({type:String,json:{name:"endTimeField",write:{enabled:!0,allowNull:!0}}})],Pn.prototype,"endField",void 0),u([d({type:qa,json:{write:{enabled:!0,allowNull:!0}}})],Pn.prototype,"fullTimeExtent",void 0),u([we("fullTimeExtent",["timeExtent"])],Pn.prototype,"readFullTimeExtent",null),u([pe("fullTimeExtent")],Pn.prototype,"writeFullTimeExtent",null),u([d({type:Boolean,json:{write:!0}})],Pn.prototype,"hasLiveData",void 0),u([d({type:mx,json:{write:{enabled:!0,allowNull:!0}}})],Pn.prototype,"interval",void 0),u([we("interval",["timeInterval","timeIntervalUnits","defaultTimeInterval","defaultTimeIntervalUnits"])],Pn.prototype,"readInterval",null),u([pe("interval")],Pn.prototype,"writeInterval",null),u([d({type:String,json:{name:"startTimeField",write:{enabled:!0,allowNull:!0}}})],Pn.prototype,"startField",void 0),u([d({type:Tv,json:{write:{enabled:!0,allowNull:!0}}})],Pn.prototype,"timeReference",void 0),u([d({type:String,json:{write:{enabled:!0,allowNull:!0}}})],Pn.prototype,"trackIdField",void 0),u([d({type:Boolean,json:{name:"exportOptions.useTime",write:!0}})],Pn.prototype,"useTime",void 0),Pn=u([E("esri.layers.support.TimeInfo")],Pn);const wTe=Pn,_Te=e=>{let t=class extends e{constructor(){super(...arguments),this.timeExtent=null,this.timeOffset=null,this.useViewTime=!0}readOffset(r,n){const i=n.timeInfo.exportOptions;if(!i)return null;const s=i.timeOffset,o=nZ.fromJSON(i.timeOffsetUnits);return s&&o?new mx({value:s,unit:o}):null}set timeInfo(r){lue(r,this.fieldsIndex),this._set("timeInfo",r)}};return u([d({type:qa,json:{write:!1}})],t.prototype,"timeExtent",void 0),u([d({type:mx})],t.prototype,"timeOffset",void 0),u([we("service","timeOffset",["timeInfo.exportOptions"])],t.prototype,"readOffset",null),u([d({value:null,type:wTe,json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],t.prototype,"timeInfo",null),u([d({type:Boolean,json:{read:{source:"timeAnimation"},write:{target:"timeAnimation"},origins:{"web-scene":{read:!1,write:!1}}}})],t.prototype,"useViewTime",void 0),t=u([E("esri.layers.mixins.TemporalLayer")],t),t};function _Ae(e){var r;const t=e.layer;return"floorInfo"in t&&((r=t.floorInfo)!=null&&r.floorField)&&"floors"in e.view?iZ(e.view.floors,t.floorInfo.floorField):null}function yx(e,t){var r;return"floorInfo"in t&&((r=t.floorInfo)!=null&&r.floorField)?iZ(e,t.floorInfo.floorField):null}function iZ(e,t){if(!(e!=null&&e.length))return null;const r=e.filter(n=>n!=="").map(n=>`'${n}'`);return r.push("''"),`${t} IN (${r.join(",")}) OR ${t} IS NULL`}const bTe={visible:"visibleSublayers",definitionExpression:"layerDefs",labelingInfo:"hasDynamicLayers",labelsVisible:"hasDynamicLayers",opacity:"hasDynamicLayers",minScale:"visibleSublayers",maxScale:"visibleSublayers",renderer:"hasDynamicLayers",source:"hasDynamicLayers"};let Fi=class extends sy($e){constructor(t){super(t),this.floors=null,this.scale=0}destroy(){this.layer=null}get dynamicLayers(){if(!this.hasDynamicLayers)return null;const t=this.visibleSublayers.map(r=>{const n=yx(this.floors,r);return r.toExportImageJSON(n)});return t.length?JSON.stringify(t):null}get hasDynamicLayers(){return this.layer&&eZ(this.visibleSublayers,this.layer.serviceSublayers,this.layer.gdbVersion)}set layer(t){this._get("layer")!==t&&(this._set("layer",t),this.handles.remove("layer"),t&&this.handles.add([t.allSublayers.on("change",()=>this.notifyChange("visibleSublayers")),t.on("sublayer-update",r=>this.notifyChange(bTe[r.propertyName]))],"layer"))}get layers(){const t=this.visibleSublayers;return t?t.length?"show:"+t.map(r=>r.id).join(","):"show:-1":null}get layerDefs(){var n;const t=!!((n=this.floors)!=null&&n.length),r=this.visibleSublayers.filter(i=>i.definitionExpression!=null||t&&i.floorInfo!=null);return r.length?JSON.stringify(r.reduce((i,s)=>{const o=yx(this.floors,s),a=C3(o,s.definitionExpression);return a!=null&&(i[s.id]=a),i},{})):null}get version(){this.commitProperty("layers"),this.commitProperty("layerDefs"),this.commitProperty("dynamicLayers"),this.commitProperty("timeExtent");const t=this.layer;return t&&(t.commitProperty("dpi"),t.commitProperty("imageFormat"),t.commitProperty("imageTransparency"),t.commitProperty("gdbVersion")),(this._get("version")||0)+1}get visibleSublayers(){const t=[];if(!this.layer)return t;const r=this.layer.sublayers,n=s=>{const o=this.scale,a=o===0,l=s.minScale===0||o<=s.minScale,c=s.maxScale===0||o>=s.maxScale;s.visible&&(a||l&&c)&&(s.sublayers?s.sublayers.forEach(n):t.unshift(s))};r&&r.forEach(n);const i=this._get("visibleSublayers");return!i||i.length!==t.length||i.some((s,o)=>t[o]!==s)?t:i}toJSON(){const t=this.layer;let r={dpi:t.dpi,format:t.imageFormat,transparent:t.imageTransparency,gdbVersion:t.gdbVersion||null};return this.hasDynamicLayers&&this.dynamicLayers?r.dynamicLayers=this.dynamicLayers:r={...r,layers:this.layers,layerDefs:this.layerDefs},r}};u([d({readOnly:!0})],Fi.prototype,"dynamicLayers",null),u([d()],Fi.prototype,"floors",void 0),u([d({readOnly:!0})],Fi.prototype,"hasDynamicLayers",null),u([d()],Fi.prototype,"layer",null),u([d({readOnly:!0})],Fi.prototype,"layers",null),u([d({readOnly:!0})],Fi.prototype,"layerDefs",null),u([d({type:Number})],Fi.prototype,"scale",void 0),u([d($be)],Fi.prototype,"timeExtent",void 0),u([d({readOnly:!0})],Fi.prototype,"version",null),u([d({readOnly:!0})],Fi.prototype,"visibleSublayers",null),Fi=u([E("esri.layers.mixins.ExportImageParameters")],Fi);async function STe(e,t,r){let n;try{n=await createImageBitmap(e)}catch(i){throw new N("request:server",`Unable to load ${t}`,{url:t,error:i})}return qt(r),n}async function SAe(e,t,r,n,i){let s;try{s=await createImageBitmap(e)}catch(o){throw new N("request:server",`Unable to load tile ${t}/${r}/${n}`,{error:o,level:t,row:r,col:n})}return qt(i),s}const mo=[];function xTe(e,t){if(gB(e.url??""))return!0;const{wkid:r}=t;for(const n of mo){if((e.version??0)>=n[0])return!0;if(typeof n[1]=="function"&&(n[1]=n[1]()),n[1].has(r))return!1}return!0}mo.push([10.91,()=>{const e=new Set([9709,9716,9741,9761,9766]);for(let t=9712;t<=9713;t++)e.add(t);for(let t=9748;t<=9749;t++)e.add(t);for(let t=20904;t<=20932;t++)e.add(t);for(let t=21004;t<=21032;t++)e.add(t);for(let t=21207;t<=21264;t++)e.add(t);for(let t=21307;t<=21364;t++)e.add(t);for(let t=102759;t<=102760;t++)e.add(t);for(let t=102901;t<=102955;t++)e.add(t);return e}]),mo.push([10.9,()=>{const e=new Set([9300,9354,9364,9367,9373,9377,9387,9456,9473,9498,9678,9680,29874,103599,103872,104028]);for(let t=9356;t<=9360;t++)e.add(t);for(let t=9404;t<=9407;t++)e.add(t);for(let t=9476;t<=9482;t++)e.add(t);for(let t=9487;t<=9494;t++)e.add(t);for(let t=9697;t<=9699;t++)e.add(t);return e}]),mo.push([10.81,()=>{const e=new Set([9265,9333,103598,103699]);for(let t=9248;t<=9254;t++)e.add(t);for(let t=9271;t<=9273;t++)e.add(t);for(let t=9284;t<=9285;t++)e.add(t);for(let t=21453;t<=21463;t++)e.add(t);return e}]),mo.push([10.8,()=>{const e=new Set([8088,8395,8428,8433,8531,8687,8692,8694,8699,8900,9003,9006,9009,9012,9017,9191]);for(let t=8035;t<=8036;t++)e.add(t);for(let t=8455;t<=8456;t++)e.add(t);for(let t=8518;t<=8529;t++)e.add(t);for(let t=8533;t<=8536;t++)e.add(t);for(let t=8538;t<=8540;t++)e.add(t);for(let t=8677;t<=8679;t++)e.add(t);for(let t=8902;t<=8903;t++)e.add(t);for(let t=8907;t<=8910;t++)e.add(t);for(let t=8949;t<=8951;t++)e.add(t);for(let t=8972;t<=8987;t++)e.add(t);for(let t=9039;t<=9040;t++)e.add(t);for(let t=9068;t<=9069;t++)e.add(t);for(let t=9140;t<=9141;t++)e.add(t);for(let t=9148;t<=9150;t++)e.add(t);for(let t=9153;t<=9159;t++)e.add(t);for(let t=9205;t<=9218;t++)e.add(t);for(let t=9221;t<=9222;t++)e.add(t);for(let t=54098;t<=54101;t++)e.add(t);return e}]),mo.push([10.71,()=>{const e=new Set([6316]);for(let t=8351;t<=8353;t++)e.add(t);for(let t=9294;t<=9297;t++)e.add(t);for(let t=22619;t<=22621;t++)e.add(t);for(let t=103586;t<=103594;t++)e.add(t);return e}]),mo.push([10.7,()=>{const e=new Set([8387,8391,8427,8545,8682,8685,8818,31370,104022,104024,104975]);for(let t=8065;t<=8068;t++)e.add(t);for(let t=8082;t<=8083;t++)e.add(t);for(let t=8379;t<=8385;t++)e.add(t);for(let t=8836;t<=8840;t++)e.add(t);for(let t=8857;t<=8860;t++)e.add(t);for(let t=53035;t<=53037;t++)e.add(t);for(let t=54090;t<=54091;t++)e.add(t);for(let t=102498;t<=102499;t++)e.add(t);return e}]),mo.push([10.61,()=>new Set([102497])]),mo.push([10.6,()=>{const e=new Set([7803,7805,7887,8086,8232,8237,8240,8246,8249,8252,8255,9019,9391]);for(let t=7755;t<=7787;t++)e.add(t);for(let t=7791;t<=7795;t++)e.add(t);for(let t=7799;t<=7801;t++)e.add(t);for(let t=7825;t<=7831;t++)e.add(t);for(let t=7877;t<=7878;t++)e.add(t);for(let t=7882;t<=7883;t++)e.add(t);for(let t=7991;t<=7992;t++)e.add(t);for(let t=8042;t<=8043;t++)e.add(t);for(let t=8058;t<=8059;t++)e.add(t);for(let t=8311;t<=8348;t++)e.add(t);for(let t=9060;t<=9067;t++)e.add(t);for(let t=102562;t<=102568;t++)e.add(t);for(let t=102799;t<=102900;t++)e.add(t);return e}]),mo.push([10.51,()=>{const e=new Set([7683,7881,7886,7899,8888,9e3]);for(let t=8013;t<=8032;t++)e.add(t);for(let t=9053;t<=9057;t++)e.add(t);for(let t=104017;t<=104018;t++)e.add(t);for(let t=104971;t<=104974;t++)e.add(t);return e}]),mo.push([10.5,()=>{const e=new Set([6962,7035,7037,7039,7041,7084,7086,7133,7798,102399]);for(let t=4087;t<=4088;t++)e.add(t);for(let t=5896;t<=5899;t++)e.add(t);for(let t=7005;t<=7007;t++)e.add(t);for(let t=7057;t<=7070;t++)e.add(t);for(let t=7073;t<=7082;t++)e.add(t);for(let t=7109;t<=7128;t++)e.add(t);for(let t=7844;t<=7859;t++)e.add(t);return e}]);let ur=class extends ySe(_Te(TSe(vTe(Cbe(kbe(wSe(_Se(w3($Se(ybe(gSe(sy(GU))))))))))))){constructor(...t){super(...t),this.dateFieldsTimeReference=null,this.datesInUnknownTimezone=!1,this.dpi=96,this.gdbVersion=null,this.imageFormat="png24",this.imageMaxHeight=2048,this.imageMaxWidth=2048,this.imageTransparency=!0,this.isReference=null,this.labelsVisible=!1,this.operationalLayerType="ArcGISMapServiceLayer",this.preferredTimeReference=null,this.sourceJSON=null,this.sublayers=null,this.type="map-image",this.url=null}normalizeCtorArgs(t,r){return typeof t=="string"?{url:t,...r}:t}load(t){const r=t!=null?t.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Map Service"]},t).catch(Ea).then(()=>this._fetchService(r))),Promise.resolve(this)}readImageFormat(t,r){const n=r.supportedImageFormatTypes;return n&&n.includes("PNG32")?"png32":"png24"}writeSublayers(t,r,n,i){var h;if(!this.loaded||!t)return;const s=t.slice().reverse().flatten(({sublayers:f})=>f&&f.toArray().reverse()).toArray();let o=!1;if(this.capabilities&&this.capabilities.operations.supportsExportMap&&((h=this.capabilities.exportMap)!=null&&h.supportsDynamicLayers)){const f=Kn(i.origin);if(f===ae.PORTAL_ITEM){const m=this.createSublayersForOrigin("service").sublayers;o=hj(s,m,ae.SERVICE)}else if(f>ae.PORTAL_ITEM){const m=this.createSublayersForOrigin("portal-item");o=hj(s,m.sublayers,Kn(m.origin))}}const a=[],l={writeSublayerStructure:o,...i};let c=o;s.forEach(f=>{const m=f.write({},l);a.push(m),c=c||f.originOf("visible")==="user"}),a.some(f=>Object.keys(f).length>1)&&(r.layers=a),c&&(r.visibleLayers=s.filter(f=>f.visible).map(f=>f.id))}createExportImageParameters(t,r,n,i){const s=i&&i.pixelRatio||1;t&&this.version>=10&&(t=t.clone().shiftCentralMeridian());const o=new Fi({layer:this,floors:i==null?void 0:i.floors,scale:yW({extent:t,width:r})*s}),a=o.toJSON();o.destroy();const l=!i||!i.rotation||this.version<10.3?{}:{rotation:-i.rotation},c=t&&t.spatialReference,h=c.wkid||JSON.stringify(c.toJSON());a.dpi*=s;const f={};if(i!=null&&i.timeExtent){const{start:m,end:y}=i.timeExtent.toJSON();f.time=m&&y&&m===y?""+m:`${m??"null"},${y??"null"}`}else this.timeInfo&&!this.timeInfo.hasLiveData&&(f.time="null,null");return{bbox:t&&t.xmin+","+t.ymin+","+t.xmax+","+t.ymax,bboxSR:h,imageSR:h,size:r+","+n,...a,...l,...f}}async fetchImage(t,r,n,i){const{data:s}=await this._fetchImage("image",t,r,n,i);return s}async fetchImageBitmap(t,r,n,i){const{data:s,url:o}=await this._fetchImage("blob",t,r,n,i);return STe(s,o,i==null?void 0:i.signal)}async fetchRecomputedExtents(t={}){const r={...t,query:{returnUpdates:!0,f:"json",...this.customParameters,token:this.apiKey}},{data:n}=await St(this.url,r),{extent:i,fullExtent:s,timeExtent:o}=n,a=i||s;return{fullExtent:a&&at.fromJSON(a),timeExtent:o&&qa.fromJSON({start:o[0],end:o[1]})}}loadAll(){return OO(this,t=>{t(this.allSublayers)})}serviceSupportsSpatialReference(t){return xTe(this,t)}async _fetchImage(t,r,n,i,s){var l,c,h;const o={responseType:t,signal:(s==null?void 0:s.signal)??null,query:{...this.parsedUrl.query,...this.createExportImageParameters(r,n,i,s),f:"image",...this.refreshParameters,...this.customParameters,token:this.apiKey}},a=this.parsedUrl.path+"/export";if(((l=o.query)==null?void 0:l.dynamicLayers)!=null&&!((h=(c=this.capabilities)==null?void 0:c.exportMap)!=null&&h.supportsDynamicLayers))throw new N("mapimagelayer:dynamiclayer-not-supported",`service ${this.url} doesn't support dynamic layers, which is required to be able to change the sublayer's order, rendering, labeling or source.`,{query:o.query});try{const{data:f}=await St(a,o);return{data:f,url:a}}catch(f){throw Ei(f)?f:new N("mapimagelayer:image-fetch-error",`Unable to load image: ${a}`,{error:f})}}async _fetchService(t){if(this.sourceJSON)return void this.read(this.sourceJSON,{origin:"service",url:this.parsedUrl});const{data:r,ssl:n}=await St(this.parsedUrl.path,{query:{f:"json",...this.parsedUrl.query,...this.customParameters,token:this.apiKey},signal:t});n&&(this.url=this.url.replace(/^http:/i,"https:")),this.sourceJSON=r,this.read(r,{origin:"service",url:this.parsedUrl})}};u([d({type:Tv})],ur.prototype,"dateFieldsTimeReference",void 0),u([d({type:Boolean})],ur.prototype,"datesInUnknownTimezone",void 0),u([d()],ur.prototype,"dpi",void 0),u([d()],ur.prototype,"gdbVersion",void 0),u([d()],ur.prototype,"imageFormat",void 0),u([we("imageFormat",["supportedImageFormatTypes"])],ur.prototype,"readImageFormat",null),u([d({json:{origins:{service:{read:{source:"maxImageHeight"}}}}})],ur.prototype,"imageMaxHeight",void 0),u([d({json:{origins:{service:{read:{source:"maxImageWidth"}}}}})],ur.prototype,"imageMaxWidth",void 0),u([d()],ur.prototype,"imageTransparency",void 0),u([d({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],ur.prototype,"isReference",void 0),u([d({json:{read:!1,write:!1}})],ur.prototype,"labelsVisible",void 0),u([d({type:["ArcGISMapServiceLayer"]})],ur.prototype,"operationalLayerType",void 0),u([d({json:{read:!1,write:!1}})],ur.prototype,"popupEnabled",void 0),u([d({type:Tv})],ur.prototype,"preferredTimeReference",void 0),u([d()],ur.prototype,"sourceJSON",void 0),u([d({json:{write:{ignoreOrigin:!0}}})],ur.prototype,"sublayers",void 0),u([pe("sublayers",{layers:{type:[z2]},visibleLayers:{type:[bt]}})],ur.prototype,"writeSublayers",null),u([d({type:["show","hide","hide-children"]})],ur.prototype,"listMode",void 0),u([d({json:{read:!1},readOnly:!0,value:"map-image"})],ur.prototype,"type",void 0),u([d(xbe)],ur.prototype,"url",void 0),ur=u([E("esri.layers.MapImageLayer")],ur);const sZ=ur,$Ae=Object.freeze(Object.defineProperty({__proto__:null,default:sZ},Symbol.toStringTag,{value:"Module"}));const $Te={type:"simple-fill",color:[227,139,79,.5],outline:{color:[255,255,255],width:1}};function TTe({mapView:e,setSelectedExtent:t}){const r=G.useRef(null),n=G.useRef(null);G.useRef(null);const i=G.useRef(null);let s=null,o=null;function a(h){c(),h.target.classList.add("toolActive")}function l(h){var f;e.graphics.removeAll(),(f=r.current)==null||f.classList.remove("toolActive"),o&&(o.remove(),o=void 0),t(void 0),i.current=void 0}function c(){var h=null;o=e.on("drag",function(f){var y;if(f.stopPropagation(),f.action==="start")e.graphics.removeAll(),h=e.toMap(f);else if(f.action==="update"){e.graphics.removeAll();var m=e.toMap(f);s=new Ki({geometry:new at({xmin:Math.min(m.x,h.x),xmax:Math.max(m.x,h.x),ymin:Math.min(m.y,h.y),ymax:Math.max(m.y,h.y),spatialReference:{wkid:102100}}),symbol:$Te}),e.graphics.add(s)}else if(f.action==="end"){const g=Tc(s.geometry,!1),v=[g.xmin,g.ymin,g.xmax,g.ymax].map(w=>parseFloat(w.toFixed(4)));t(v),i.current=v,o.remove(),o=void 0,(y=r.current)==null||y.classList.remove("toolActive")}})}return M.jsxs("div",{id:"extentToolbar",className:"extentToolbar",title:"mange the area of interest",children:[M.jsx("span",{id:"drawExtentTool",ref:r,onClick:a,className:"esri-widget esri-widget--button esri-interactive esri-icon-sketch-rectangle",title:"Draw the area of interest"}),M.jsx("span",{id:"clearExtentTool",ref:n,onClick:l,className:"esri-widget esri-widget--button esri-interactive esri-icon-trash",title:"Clear the area of interest"})]})}const fj=e=>e.spatialReference.wkid||JSON.stringify(e.spatialReference);function ETe(e,t){const{dpi:r,gdbVersion:n,geometry:i,geometryPrecision:s,height:o,layerOption:a,mapExtent:l,maxAllowableOffset:c,returnFieldName:h,returnGeometry:f,returnUnformattedValues:m,returnZ:y,spatialReference:g,timeExtent:v,tolerance:w,width:b}=e.toJSON(),{dynamicLayers:S,layerDefs:_,layerIds:x}=MTe(e),T=t&&t.geometry!=null?t.geometry:null,I={geometryPrecision:s,maxAllowableOffset:c,returnFieldName:h,returnGeometry:f,returnUnformattedValues:m,returnZ:y,tolerance:w},C=T&&T.toJSON()||i;if(I.imageDisplay=`${b},${o},${r}`,n&&(I.gdbVersion=n),C&&(delete C.spatialReference,I.geometry=JSON.stringify(C),I.geometryType=_p(C)),g?I.sr=g.wkid||JSON.stringify(g):C&&C.spatialReference?I.sr=fj(C):l&&l.spatialReference&&(I.sr=fj(l)),I.time=v?[v.start,v.end].join(","):null,l){const{xmin:O,ymin:W,xmax:z,ymax:ne}=l;I.mapExtent=`${O},${W},${z},${ne}`}return _&&(I.layerDefs=_),S&&!_&&(I.dynamicLayers=S),I.layers=a==="popup"?"visible":a,x&&!S&&(I.layers+=`:${x.join(",")}`),I}function MTe(e){var g,v;const{mapExtent:t,floors:r,width:n,sublayers:i,layerIds:s,layerOption:o,gdbVersion:a}=e,l=(v=(g=i==null?void 0:i.find(w=>w.layer!=null))==null?void 0:g.layer)==null?void 0:v.serviceSublayers,c=o==="popup",h={},f=yW({extent:t,width:n,spatialReference:t==null?void 0:t.spatialReference}),m=[],y=w=>{const b=f===0,S=w.minScale===0||f<=w.minScale,_=w.maxScale===0||f>=w.maxScale;if(w.visible&&(b||S&&_))if(w.sublayers)w.sublayers.forEach(y);else{if((s==null?void 0:s.includes(w.id))===!1||c&&(!w.popupTemplate||!w.popupEnabled))return;m.unshift(w)}};if(i==null||i.forEach(y),i&&!m.length)h.layerIds=[];else{const w=eZ(m,l,a),b=m.map(S=>{const _=yx(r,S);return S.toExportImageJSON(_)});if(w)h.dynamicLayers=JSON.stringify(b);else{if(i){let _=m.map(({id:x})=>x);s&&(_=_.filter(x=>s.includes(x))),h.layerIds=_}else s!=null&&s.length&&(h.layerIds=s);const S=ITe(r,m);if(S!=null&&S.length){const _={};for(const x of S)x.definitionExpression&&(_[x.id]=x.definitionExpression);Object.keys(_).length&&(h.layerDefs=JSON.stringify(_))}}}return h}function ITe(e,t){const r=!!(e!=null&&e.length),n=t.filter(i=>i.definitionExpression!=null||r&&i.floorInfo!=null);return n.length?n.map(i=>{const s=yx(e,i),o=C3(s,i.definitionExpression);return{id:i.id,definitionExpression:o??void 0}}):null}var tP;let cr=tP=class extends Q{static from(e){return ep(tP,e)}constructor(e){super(e),this.dpi=96,this.floors=null,this.gdbVersion=null,this.geometry=null,this.geometryPrecision=null,this.height=400,this.layerIds=null,this.layerOption="top",this.mapExtent=null,this.maxAllowableOffset=null,this.returnFieldName=!0,this.returnGeometry=!1,this.returnM=!1,this.returnUnformattedValues=!0,this.returnZ=!1,this.spatialReference=null,this.sublayers=null,this.timeExtent=null,this.tolerance=null,this.width=400}};u([d({type:Number,json:{write:!0}})],cr.prototype,"dpi",void 0),u([d()],cr.prototype,"floors",void 0),u([d({type:String,json:{write:!0}})],cr.prototype,"gdbVersion",void 0),u([d({types:Wm,json:{read:Xc,write:!0}})],cr.prototype,"geometry",void 0),u([d({type:Number,json:{write:!0}})],cr.prototype,"geometryPrecision",void 0),u([d({type:Number,json:{write:!0}})],cr.prototype,"height",void 0),u([d({type:[Number],json:{write:!0}})],cr.prototype,"layerIds",void 0),u([d({type:["top","visible","all","popup"],json:{write:!0}})],cr.prototype,"layerOption",void 0),u([d({type:at,json:{write:!0}})],cr.prototype,"mapExtent",void 0),u([d({type:Number,json:{write:!0}})],cr.prototype,"maxAllowableOffset",void 0),u([d({type:Boolean,json:{write:!0}})],cr.prototype,"returnFieldName",void 0),u([d({type:Boolean,json:{write:!0}})],cr.prototype,"returnGeometry",void 0),u([d({type:Boolean,json:{write:!0}})],cr.prototype,"returnM",void 0),u([d({type:Boolean,json:{write:!0}})],cr.prototype,"returnUnformattedValues",void 0),u([d({type:Boolean,json:{write:!0}})],cr.prototype,"returnZ",void 0),u([d({type:Ce,json:{write:!0}})],cr.prototype,"spatialReference",void 0),u([d()],cr.prototype,"sublayers",void 0),u([d({type:qa,json:{write:!0}})],cr.prototype,"timeExtent",void 0),u([d({type:Number,json:{write:!0}})],cr.prototype,"tolerance",void 0),u([d({type:Number,json:{write:!0}})],cr.prototype,"width",void 0),cr=tP=u([E("esri.rest.support.IdentifyParameters")],cr);const oZ=cr;let bl=class extends Q{constructor(t){super(t),this.displayFieldName=null,this.feature=null,this.layerId=null,this.layerName=null}readFeature(t,r){return Ki.fromJSON({attributes:{...r.attributes},geometry:{...r.geometry}})}writeFeature(t,r){if(!t)return;const{attributes:n,geometry:i}=t;n&&(r.attributes={...n}),i!=null&&(r.geometry=i.toJSON(),r.geometryType=Hle.toJSON(i.type))}};u([d({type:String,json:{write:!0}})],bl.prototype,"displayFieldName",void 0),u([d({type:Ki})],bl.prototype,"feature",void 0),u([we("feature",["attributes","geometry"])],bl.prototype,"readFeature",null),u([pe("feature")],bl.prototype,"writeFeature",null),u([d({type:Number,json:{write:!0}})],bl.prototype,"layerId",void 0),u([d({type:String,json:{write:!0}})],bl.prototype,"layerName",void 0),bl=u([E("esri.rest.support.IdentifyResult")],bl);const CTe=bl;async function kTe(e,t,r){const n=(t=OTe(t)).geometry?[t.geometry]:[],i=Us(e);return i.path+="/identify",P3(n).then(s=>{const o=ETe(t,{geometry:s&&s[0]}),a=_1({...i.query,f:"json",...o}),l=w1(a,r);return St(i.path,l).then(PTe).then(c=>RTe(c,t.sublayers))})}function PTe(e){const t=e.data;return t.results=t.results||[],t.exceededTransferLimit=!!t.exceededTransferLimit,t.results=t.results.map(r=>CTe.fromJSON(r)),t}function OTe(e){return e=oZ.from(e)}function RTe(e,t){if(!(t!=null&&t.length))return e;const r=new Map;function n(i){r.set(i.id,i),i.sublayers&&i.sublayers.forEach(n)}t.forEach(n);for(const i of e.results)i.feature.sourceLayer=r.get(i.layerId);return e}const Jt="esri-search",Te={base:`${Jt} esri-widget`,loader:"esri-widget__loader",loaderText:"esri-widget__loader-text",loaderAnimation:"esri-widget__loader-animation",esriInput:"esri-input",hasMultipleSources:`${Jt}--multiple-sources`,isLoading:`${Jt}--loading`,isSearching:`${Jt}--searching`,showSuggestions:`${Jt}--show-suggestions`,showSources:`${Jt}--sources`,showWarning:`${Jt}--warning`,container:`${Jt}__container`,input:`${Jt}__input`,inputContainer:`${Jt}__input-container`,form:`${Jt}__form`,submitButton:`${Jt}__submit-button`,sourcesButton:`${Jt}__sources-button`,clearButton:`${Jt}__clear-button`,sourceName:`${Jt}__source-name`,suggestionsMenu:`${Jt}__suggestions-menu`,suggestionList:`${Jt}__suggestions-list`,suggestionListCurrentLocation:`${Jt}__suggestions-list--current-location`,sourcesMenu:`${Jt}__sources-menu`,source:`${Jt}__source`,warningMenu:`${Jt}__warning-menu`,warningMenuBody:`${Jt}__warning-body`,warningMenuHeader:`${Jt}__warning-header`,warningMenuText:`${Jt}__warning-text`,noValueText:`${Jt}__no-value-text`,esriWidgetDisabled:"esri-widget--disabled",button:"esri-widget--button",fallbackText:"esri-icon-font-fallback-text",header:"esri-widget__heading",locate:"esri-icon-locate-circled",menu:"esri-menu",menuList:"esri-menu__list",menuItem:"esri-menu__list-item",menuItemActive:"esri-menu__list-item--active",menuItemFocus:"esri-menu__list-item--focus",menuHeader:"esri-menu__header",loadingIcon:"esri-icon-loading-indicator esri-rotating",searchIcon:"esri-icon-search",dropdownIcon:"esri-icon-down-arrow esri-search__sources-button--down",dropupIcon:"esri-icon-up-arrow esri-search__sources-button--up",clearIcon:"esri-icon-close",noticeIcon:"esri-icon-notice-triangle",widgetIcon:"esri-icon-search",disabled:"esri-disabled"},Pd="esri-search-result-renderer",rl={base:`${Pd} esri-widget`,anchor:"esri-widget__anchor",showMoreResults:`${Pd}__more-results--show-more-results`,moreResults:`${Pd}__more-results`,moreResultsList:`${Pd}__more-results-list`,moreResultsHeader:`${Pd}__more-results-header`,moreResultsItem:`${Pd}__more-results-item`,moreResultsListHeader:`${Pd}__more-results-list-header`};function ATe(e){return e&&typeof e.highlight=="function"}let Er=class extends e1(Q){constructor(t){super(t),this.autoNavigate=null,this.filter=null,this.getResults=null,this.getSuggestions=null,this.maxResults=null,this.maxSuggestions=null,this.minSuggestCharacters=null,this.outFields=null,this.placeholder="",this.popupEnabled=null,this.popupTemplate=null,this.prefix="",this.resultGraphicEnabled=null,this.resultSymbol=null,this.suggestionsEnabled=null,this.suffix="",this.withinViewEnabled=!1,this.zoomScale=null}};u([d()],Er.prototype,"autoNavigate",void 0),u([d()],Er.prototype,"filter",void 0),u([d()],Er.prototype,"getResults",void 0),u([d()],Er.prototype,"getSuggestions",void 0),u([d()],Er.prototype,"maxResults",void 0),u([d()],Er.prototype,"maxSuggestions",void 0),u([d()],Er.prototype,"minSuggestCharacters",void 0),u([d()],Er.prototype,"outFields",void 0),u([d()],Er.prototype,"placeholder",void 0),u([d()],Er.prototype,"popupEnabled",void 0),u([d()],Er.prototype,"popupTemplate",void 0),u([d()],Er.prototype,"prefix",void 0),u([d()],Er.prototype,"resultGraphicEnabled",void 0),u([d()],Er.prototype,"resultSymbol",void 0),u([d()],Er.prototype,"suggestionsEnabled",void 0),u([d()],Er.prototype,"suffix",void 0),u([d()],Er.prototype,"withinViewEnabled",void 0),u([d()],Er.prototype,"zoomScale",void 0),Er=u([E("esri.widgets.Search.SearchSource")],Er);const z3=Er,mj=Z.getLogger("esri.widgets.Search.support.geometryUtils");function LTe(e,t){var n,i;if(!t)return mj.error("missing-parameter: view is missing."),Promise.reject(new N("searchgeometryutils:missing-parameter","view is missing."));if(!e)return mj.error("missing-parameter: point is missing."),Promise.reject(new N("searchgeometryutils:missing-parameter","point is missing."));if(e.hasZ||t.type==="2d")return Promise.resolve(e);const r=(n=t==null?void 0:t.map)==null?void 0:n.ground;return r&&r.layers.length?r.queryElevation(e,{cache:(i=t.basemapTerrain)==null?void 0:i.elevationQueryCache}).then(s=>s.geometry):Promise.resolve(e)}function yj(e){if(e==null)return null;switch(e.type){case"point":return e;case"extent":return e.center;case"polygon":return e.centroid;case"multipoint":return e.getPoint(0);case"polyline":return e.getPoint(0,0)}return null}function U3(e,t,r){return e==null?null:e.type==="extent"?e:e.type==="multipoint"||e.type==="polygon"||e.type==="polyline"?e.extent:e.type==="point"?aZ(e,t,r):void 0}function rP(e,t,r){return e==null||t==null?null:aZ(e.center,t,r)}function aZ(e,t,r){const n=e.hasZ?e.z:void 0;return t!=null&&t.map?(r!=null?fbe(t,r):t.extent).clone().centerAt(e).set({zmax:n,zmin:n}):new at({xmin:e.x-.25,ymin:e.y-.25,xmax:e.x+.25,ymax:e.y+.25,spatialReference:e.spatialReference,zmin:n,zmax:n})}const NTe=/https?:\/\/services.*\.arcgis\.com/i,DTe=/(?:\{([^}]+)\})/g,dm=Z.getLogger("esri.widgets.Search.support.layerSearchUtils");function FTe(e,t){const{exactMatch:r=!1,location:n,maxResults:i,spatialReference:s,source:o,sourceIndex:a,suggestResult:l,view:c}=e,{layer:h,filter:f,zoomScale:m}=o,y=c==null?void 0:c.scale,g=lZ(o,c),v=t&&t.signal;return cZ(h).then(()=>{const w=h.popupTemplate;return w?w.getRequiredFields(h.fieldsIndex):null}).then(w=>{var ne,K,xe,le;const{objectIdField:b,returnZ:S}=h,_=yZ(o);if(!G3(h,_))throw dm.error("invalid-field: displayField is invalid."),new N("getResults():invalid-field","displayField is invalid.");const x=w&&w.length?w:[_],T=o.outFields||x,I=uZ(T);if(T.includes(b)||I||T.push(b),(ne=h.floorInfo)!=null&&ne.floorField&&T.push(h.floorInfo.floorField),!(I||gx(h,T)))throw dm.error("invalid-field: outField is invalid."),new N("getResults():invalid-field","outField is invalid.");const C=h.createQuery(),{orderByFields:O}=o;if(O&&(C.orderByFields=O),s){C.outSpatialReference=s;const B=1/Ga(s);B&&(C.maxAllowableOffset=B)}const W=h.geometryType==="mesh"||h.geometryType==="multipatch",z=((xe=(K=h.capabilities)==null?void 0:K.data)==null?void 0:xe.supportsZ)&&!W;if(C.returnZ=z&&S!==!1,C.returnGeometry=!0,C.multipatchOption=W?"xyFootprint":null,T&&(C.outFields=T),n)C.geometry=n;else if(l.key)C.objectIds=[l.key];else{const B=o.searchFields||[_];if(!gx(h,B))throw dm.error("invalid-field: search field is invalid."),new N("getResults():invalid-field","search field is invalid.");if(mZ(h)&&(C.num=i),g&&(C.geometry=g),!((le=l.text)==null?void 0:le.trim()))return[];const Ge=l.text,{prefix:H="",suffix:oe=""}=o,Ne=gZ(`${H}${Ge}${oe}`);fZ(h)&&hZ(h,B)&&!r&&Ge&&(C.fullText=pZ({text:Ge,searchFields:B}));const je=vZ({searchTerm:Ne,layer:h,searchFields:B,filter:f,exactMatch:r,query:C,type:"search"});if(C.where=je,!dZ(C))return[]}return h.queryFeatures(C,{signal:v}).then(B=>QTe(B,c,o,a,_,y,m))})}function jTe(e,t){const{source:r,spatialReference:n,view:i,suggestTerm:s,maxSuggestions:o,sourceIndex:a,exactMatch:l}=e,{layer:c,filter:h}=r,f=t&&t.signal,m=lZ(r,i);return cZ(c).then(()=>{if(!mZ(c))return[];const y=yZ(r),g=r.searchFields||[y],v=[];r.suggestionTemplate?r.suggestionTemplate.replaceAll(DTe,(z,ne)=>(v.push(ne),z)):v.push(y);const w=uZ(v);v.includes(c.objectIdField)||w||v.push(c.objectIdField);const b=G3(c,y),S=w||gx(c,v),_=gx(c,g);if(!b)throw dm.error("invalid-field: displayField is invalid."),new N("getSuggestions():invalid-field","displayField is invalid.");if(!S)throw dm.error("invalid-field: outField is invalid."),new N("getSuggestions():invalid-field","outField is invalid.");if(!_)throw dm.error("invalid-field: search field is invalid."),new N("getSuggestions():invalid-field","search field is invalid.");const x=c.createQuery(),{orderByFields:T}=r;if(T&&(x.orderByFields=T),x.outSpatialReference=n,x.returnGeometry=!1,x.num=o,x.outFields=v,m&&(x.geometry=m),!s.trim())return[];const{prefix:I="",suffix:C=""}=r,O=gZ(`${I}${s}${C}`);fZ(c)&&hZ(c,g)&&!l&&s&&(x.fullText=pZ({text:s,searchFields:g}));const W=vZ({searchTerm:O,layer:c,searchFields:g,filter:h,exactMatch:l,query:x,type:"suggest"});return x.where=W,dZ(x)?c.queryFeatures(x,{signal:f}).then(z=>ZTe(z,r,a,y)):[]})}function lZ(e,t){const{filter:r,withinViewEnabled:n}=e,i=t==null?void 0:t.extent;return(r==null?void 0:r.geometry)??(n&&i?i:void 0)}function uZ(e){return e&&e.includes("*")}async function cZ(e){e&&await e.load()}function dZ(e){return!(!e.fullText&&!e.where)}function hZ(e,t){const r=e==null?void 0:e.indexes;return!r||!(t!=null&&t.length)?!1:r.filter(n=>n.indexType==="FullText").some(n=>{var s;const i=((s=n.fields)==null?void 0:s.split(",").map(o=>o.trim().toLowerCase()))||[];return t.every(o=>i.includes(o.toLowerCase()))})}function pZ({text:e,searchFields:t}){return e.trim().split(" ").filter(r=>!!r.trim()).map(r=>new IH({onFields:t,searchTerm:r,searchType:"prefix"}))}function fZ(e){var t,r;return((r=(t=e==null?void 0:e.capabilities)==null?void 0:t.query)==null?void 0:r.supportsFullTextSearch)??!1}function mZ(e){var t,r;return((r=(t=e==null?void 0:e.capabilities)==null?void 0:t.query)==null?void 0:r.supportsPagination)??!1}function VTe(e){var t,r,n;return((n=(r=(t=e==null?void 0:e.fieldsIndex)==null?void 0:t.fields)==null?void 0:r.find(i=>i.type==="string"))==null?void 0:n.name)??""}function yZ(e){return e.displayField||e.layer.displayField||VTe(e.layer)}function gx(e,t){return!(!e||!(t!=null&&t.length))&&t.every(r=>G3(e,r))}function G3(e,t){return!!e.getField(t)}function zTe(e){for(let t=0;t<e.length;t++)if(e.charCodeAt(t)>255)return!0;return!1}function UTe(e,t,r){let n=null;const{codedValues:i}=e;return i&&i.some(s=>{const o=s.name,a=r?o:o.toLowerCase();return(r?t:t.toLowerCase())===a&&(n=s.code.toString(),!0)}),n}function gZ(e){return e.replaceAll("'","''")}function Hy(e,t){const r=t==null?void 0:t.where;return r?`(${e}) AND (${r})`:e}function GTe({currentTerm:e,field:t,filter:r,exactMatch:n,url:i,type:s}){const o=t==null?void 0:t.type,a=t==null?void 0:t.name;if(o==="string"||o==="date"||o==="global-id"){const l=NTe.test(i??""),c=l&&zTe(e)?"N":"";return Hy(n&&s==="search"?`${a} = ${c}'${e}'`:l?`${a} LIKE ${c}${`'${e}%'`}`:`${`LOWER(${a})`} LIKE ${c}${`'${e.toLowerCase()}%'`}`,r)}if(o==="oid"||o==="small-integer"||o==="integer"||o==="single"||o==="double"){const l=Number(e);return isNaN(l)?null:Hy(`${a} = ${l}`,r)}return Hy(`${a} = ${e}`,r)}function BTe(e,t){return e?` OR (${t})`:`(${t})`}function vZ({searchTerm:e,layer:t,searchFields:r,filter:n,exactMatch:i,query:s,type:o}){const{definitionExpression:a,url:l}=t;let c="";return!s.fullText&&e&&r&&r.forEach(h=>{const f=t.getField(h),m=typeof t.getFieldDomain=="function"&&t.getFieldDomain(h),y=(m&&m.type==="coded-value"?UTe(m,e,i):null)||e||null;if(y!==null){const g=GTe({currentTerm:y,field:f,filter:n,exactMatch:i,url:l,type:o});g&&(c+=BTe(c,g))}}),a&&c?`(${a}) AND (${c})`:a||c}function qTe(e,t){let r=null;const{codedValues:n}=e;return n&&n.length&&n.some(i=>i.code===t&&(r=i.name,!0)),r}function WTe(e,t){return e[Object.keys(e).find(r=>r.toLowerCase()===t.toLowerCase())]}function wZ(e,t,r){const n=e.sourceLayer,{attributes:i}=e,s=typeof n.getFieldDomain=="function"&&n.getFieldDomain(r);if(t)return J7(t,i);if(r&&i){const o=n.getField(r),a=WTe(i,r);return a==null?"":s&&s.type==="coded-value"?qTe(s,a)??"":(o==null?void 0:o.type)==="date"?ed(new Date(a)):typeof a=="number"?a.toString():typeof a!="string"?"":a.trim()}return""}function HTe(e,t,r,n){const i=e.sourceLayer,{attributes:s}=e,{objectIdField:o}=i,a=o?s[o]:null;return{text:wZ(e,t.suggestionTemplate,n),key:a,sourceIndex:r}}function ZTe(e,t,r,n){return e.features.map(i=>HTe(i,t,r,n))}function JTe(e,t,r,n,i,s,o){const a=e.clone(),l=e.sourceLayer,c=l==null?void 0:l.objectIdField,h=c?e.attributes[c]:null,f=wZ(e,r.searchTemplate,i),m=U3(a.geometry,t,s),y=typeof o=="number"?rP(F(m),t,o):m,g=e.clone();return y!=null&&(g.geometry=Fa.fromExtent(y)),{extent:y,target:g,feature:a,key:h,name:f,sourceIndex:n}}function QTe(e,t,r,n,i,s,o){return e.features.map(a=>JTe(a,t,r,n,i,s,o))}var nP;let yo=nP=class extends z3{constructor(e){super(e),this.displayField=null,this.exactMatch=null,this.orderByFields=null,this.searchFields=null,this.searchTemplate=null,this.suggestionTemplate=null,this.getResults=(t,r)=>FTe({source:this,...t},r),this.getSuggestions=(t,r)=>jTe({source:this,...t},r)}set layer(e){this._set("layer",e),e&&e.load().catch(()=>{})}get name(){return this._getLayerTitle()??""}set name(e){this._overrideIfSome("name",e)}clone(){return new nP({autoNavigate:this.autoNavigate,filter:this.filter,maxResults:this.maxResults,maxSuggestions:this.maxSuggestions,minSuggestCharacters:this.minSuggestCharacters,outFields:this.outFields?F(this.outFields):null,placeholder:this.placeholder,popupEnabled:this.popupEnabled,prefix:this.prefix,resultGraphicEnabled:this.resultGraphicEnabled,resultSymbol:this.resultSymbol?this.resultSymbol.clone():null,suggestionsEnabled:this.suggestionsEnabled,suffix:this.suffix,withinViewEnabled:this.withinViewEnabled,displayField:this.displayField,exactMatch:this.exactMatch,layer:this.layer,searchFields:this.searchFields?F(this.searchFields):null,suggestionTemplate:this.suggestionTemplate,zoomScale:this.zoomScale})}_getFirstStringField(){var e,t;return((t=(e=this.layer.fieldsIndex)==null?void 0:e.fields.find(r=>r.type==="string"))==null?void 0:t.name)??""}_getDisplayField(){return this.displayField||this.layer.displayField||this._getFirstStringField()}_getSearchFieldsString(){const{layer:e,searchFields:t}=this;return e.loaded?`: ${(t||[this._getDisplayField()]).map(r=>{const n=e.getField(r);return n&&n.alias||r}).join(", ")}`:""}_getLayerTitle(){const{layer:e}=this;if(!e)return;const{title:t}=e;return t?`${t}${this._getSearchFieldsString()}`:void 0}};u([d({json:{read:{source:"field.name"},write:{target:"field.name"}}})],yo.prototype,"displayField",void 0),u([d({json:{read:{source:"field.exactMatch"},write:{target:"field.exactMatch"}}})],yo.prototype,"exactMatch",void 0),u([d({value:null})],yo.prototype,"layer",null),u([d()],yo.prototype,"name",null),u([d({type:[String],json:{write:!0}})],yo.prototype,"orderByFields",void 0),u([d()],yo.prototype,"searchFields",void 0),u([d()],yo.prototype,"searchTemplate",void 0),u([d()],yo.prototype,"suggestionTemplate",void 0),yo=nP=u([E("esri.widgets.Search.LayerSearchSource")],yo);const yf=yo;function YTe(e){return!!e&&typeof e.x=="number"&&typeof e.y=="number"}function KTe(e){return e&&typeof e.xmin=="number"&&typeof e.ymin=="number"&&typeof e.xmax=="number"&&typeof e.ymax=="number"}let nc=class extends Q{constructor(t){super(t),this.address=null,this.attributes=null,this.extent=null,this.location=null,this.score=null}};u([d({type:String,json:{write:!0}})],nc.prototype,"address",void 0),u([d({type:Object,json:{write:!0}})],nc.prototype,"attributes",void 0),u([d({type:at,json:{write:!0}})],nc.prototype,"extent",void 0),u([d({type:be,json:{write:!0}})],nc.prototype,"location",void 0),u([d({type:Number,json:{write:!0}})],nc.prototype,"score",void 0),nc=u([E("esri.rest.support.AddressCandidate")],nc);const _Z=nc,B3={type:String,json:{read:{source:"token"},write:{target:"token"}}};let gn=class extends Q{constructor(t){super(t),this.address=null,this.apiKey=null,this.categories=null,this.countryCode=null,this.forStorage=null,this.location=null,this.locationType=null,this.magicKey=null,this.maxLocations=null,this.outFields=null,this.outSpatialReference=null,this.searchExtent=null}};u([d({type:Object,json:{write:!0}})],gn.prototype,"address",void 0),u([d(B3)],gn.prototype,"apiKey",void 0),u([d({type:[String],json:{read:{source:"category",reader:e=>e?e.split(","):null},write:{target:"category",writer:(e,t)=>{t.category=e?e.join(","):null}}}})],gn.prototype,"categories",void 0),u([d({type:String,json:{write:!0}})],gn.prototype,"countryCode",void 0),u([d({type:Boolean,json:{write:!0}})],gn.prototype,"forStorage",void 0),u([d({type:be,json:{write:{writer:(e,t)=>{t.location=e?e.clone().normalize():null}}}})],gn.prototype,"location",void 0),u([d({type:String,json:{write:!0}})],gn.prototype,"locationType",void 0),u([d({type:String,json:{write:!0}})],gn.prototype,"magicKey",void 0),u([d({type:Number,json:{write:!0}})],gn.prototype,"maxLocations",void 0),u([d({type:[String],json:{write:{writer:(e,t)=>{t.outFields=e?e.join(","):null}}}})],gn.prototype,"outFields",void 0),u([d({type:Ce,json:{read:{source:"outSR"},write:{target:"outSR"}}})],gn.prototype,"outSpatialReference",void 0),u([d({type:at,json:{write:{writer:(e,t)=>{const r=e?e.shiftCentralMeridian():null;t.searchExtent=r}}}})],gn.prototype,"searchExtent",void 0),gn=u([E("esri.rest.support.AddressToLocationsParameters")],gn),gn.from=gr(gn);const bZ=gn;async function XTe(e,t,r){t=bZ.from(t);const n=Us(e),{address:i,...s}=t.toJSON(),o={...i,...s,f:"json"},a=_1({...n.query,...o}),l=w1(a,r),c=`${n.path}/findAddressCandidates`;return St(c,l).then(eEe)}function eEe({data:e}){if(!e)return[];const{candidates:t,spatialReference:r}=e;return t?t.map(n=>{if(!n)return;const{extent:i,location:s}=n,o=!i||KTe(i);return YTe(s)&&o?(i&&(i.spatialReference=r),s&&(s.spatialReference=r),_Z.fromJSON(n)):void 0}):[]}let Sl=class extends Q{constructor(t){super(t),this.apiKey=null,this.location=null,this.locationType=null,this.outSpatialReference=null}};u([d(B3)],Sl.prototype,"apiKey",void 0),u([d({type:be,json:{write:{writer:(e,t)=>{const r=e?e.clone().normalize():null,n=r!==void 0;t.location=n?r:null}}}})],Sl.prototype,"location",void 0),u([d({type:String,json:{write:!0}})],Sl.prototype,"locationType",void 0),u([d({type:Ce,json:{read:{source:"outSR"},write:{target:"outSR"}}})],Sl.prototype,"outSpatialReference",void 0),Sl=u([E("esri.rest.support.LocationToAddressParameters")],Sl),Sl.from=gr(Sl);const SZ=Sl;async function tEe(e,t,r){t=SZ.from(t);const n=Us(e),i={...t.toJSON(),f:"json"},s=_1({...n.query,...i}),o=w1(s,r),a=`${n.path}/reverseGeocode`;return St(a,o).then(rEe)}function rEe({data:e}){if(!e)return;const{address:t,location:r}=e,n=t&&t.Match_addr||"";return _Z.fromJSON({address:n,attributes:t||{},location:r,score:100})}let gf=class extends Q{constructor(t){super(t),this.isCollection=null,this.magicKey=null,this.text=null}};u([d({type:Boolean,json:{write:!0}})],gf.prototype,"isCollection",void 0),u([d({type:String,json:{write:!0}})],gf.prototype,"magicKey",void 0),u([d({type:String,json:{write:!0}})],gf.prototype,"text",void 0),gf=u([E("esri.rest.support.SuggestionCandidate")],gf);const nEe=gf;let ji=class extends Q{constructor(t){super(t),this.apiKey=null,this.categories=null,this.countryCode=null,this.location=null,this.maxSuggestions=null,this.outSpatialReference=null,this.searchExtent=null,this.text=null}};u([d(B3)],ji.prototype,"apiKey",void 0),u([d({type:[String],json:{read:{source:"category",reader:e=>e?e.split(","):null},write:{target:"category",writer:(e,t)=>{t.category=e?e.join(","):null}}}})],ji.prototype,"categories",void 0),u([d({type:String,json:{write:!0}})],ji.prototype,"countryCode",void 0),u([d({type:be,json:{write:{writer:(e,t)=>{t.location=e?e.clone().normalize():null}}}})],ji.prototype,"location",void 0),u([d({type:Number,json:{write:!0}})],ji.prototype,"maxSuggestions",void 0),u([d({type:Ce,json:{read:{source:"outSR"},write:{target:"outSR"}}})],ji.prototype,"outSpatialReference",void 0),u([d({type:at,json:{write:{writer:(e,t)=>{const r=e?e.shiftCentralMeridian():null;t.searchExtent=JSON.stringify(r)}}}})],ji.prototype,"searchExtent",void 0),u([d({type:String,json:{write:!0}})],ji.prototype,"text",void 0),ji=u([E("esri.rest.support.SuggestLocationsParameters")],ji),ji.from=gr(ji);const xZ=ji;async function iEe(e,t,r){const n=Us(e),i={...(t=xZ.from(t)).toJSON(),f:"json"},s=_1({...n.query,...i}),o=w1(s,r),a=`${n.path}/suggest`;return St(a,o).then(sEe)}function sEe(e){const{data:t}=e;if(!t)return[];const{suggestions:r}=t;return r?r.map(n=>new nEe(n)):[]}const oEe="Single Line Input",aEe=3e5;function lEe(e,t){return e.location?pEe(e,t):fEe(e,t)}function $Z(e,t){var n;if(t.localSearchDisabled)return null;const r=e==null?void 0:e.scale;return typeof r=="number"&&r<=aEe?(n=e==null?void 0:e.extent)==null?void 0:n.center:null}async function uEe(e,t){const{source:r,spatialReference:n,view:i,suggestTerm:s,maxSuggestions:o,sourceIndex:a}=e,l=new xZ,{apiKey:c,url:h}=r,f=TZ(r,i),m=t&&t.signal;if(!h)return null;c&&(l.apiKey=c),r.categories&&(l.categories=r.categories),n&&(l.outSpatialReference=n);const y=$Z(i,r);if(y&&(l.location=y),!s.trim())return null;const{prefix:g="",suffix:v=""}=r,w=`${g}${s}${v}`;return l.text=w,f&&(l.searchExtent=f),l.maxSuggestions=o,r.countryCode&&(l.countryCode=r.countryCode),iEe(h,l,{signal:m}).then(b=>yEe(b,a))}function cEe(e){return!!e&&/(?:geocode\-api\.arcgis\.com\/arcgis\/rest\/services\/world\/geocodeserver).*/i.test(e)}function dEe(e){return!!e&&/(?:\/servers\/[\da-z\.-]+\/rest\/services\/world\/geocodeserver).*/i.test(e)}function gj(e){return!!e&&/(?:arcgis\.com\/arcgis\/rest\/services\/world\/geocodeserver).*/i.test(e)}const hEe="https://geocode-api.arcgis.com/arcgis/rest/services/World/GeocodeServer";async function pEe(e,t){const{source:r,spatialReference:n,location:i,sourceIndex:s,view:o}=e,{apiKey:a,url:l,zoomScale:c,defaultZoomScale:h}=r;if(l==null)return[];const f=o==null?void 0:o.scale,m=t==null?void 0:t.signal,y=new SZ;y.location=i,a&&(y.apiKey=a),n&&(y.outSpatialReference=n);try{return EZ([await tEe(l,y,{signal:m})],{sourceIndex:s,scale:f,view:o,zoomScale:c,defaultZoomScale:h})}catch{return[]}}function TZ(e,t){const{filter:r,withinViewEnabled:n}=e,i=t&&t.scale,s=t&&t.extent,o=r&&r.geometry;return U3(o,t,i)||(n&&s?s:void 0)}async function fEe(e,t){var C;const{source:r,suggestResult:n,spatialReference:i,view:s,maxResults:o,sourceIndex:a}=e,l=r&&r.zoomScale,c=r&&r.defaultZoomScale;if(!((C=n.text)==null?void 0:C.trim()))return null;const f=!n.key&&r.prefix?r.prefix:"",m=!n.key&&r.suffix?r.suffix:"",y=`${f}${n.text}${m}`,g=new bZ,{apiKey:v,url:w}=r,b=s&&s.scale,S=TZ(r,s),_=t&&t.signal;if(v&&(g.apiKey=v),!w)return null;r.categories&&(g.categories=r.categories),r.locationType&&(g.locationType=r.locationType),i&&(g.outSpatialReference=i);const x=$Z(s,r);x&&(g.location=x),g.maxLocations=o,S&&(g.searchExtent=S),r.countryCode&&(g.countryCode=r.countryCode);const{key:T}=n,I=`${T}`;return T&&(g.magicKey=I),g.address={},g.address[r.singleLineFieldName||oEe]=y,r.outFields&&(g.outFields=r.outFields),XTe(w,g,{signal:_}).then(O=>EZ(O,{key:I,scale:b,sourceIndex:a,view:s,zoomScale:l,defaultZoomScale:c}))}function mEe(e,t){return{text:e.text,key:e.magicKey,sourceIndex:t}}function yEe(e,t){return e.map(r=>mEe(r,t))}function gEe(e,t){const{key:r,scale:n,sourceIndex:i,view:s,zoomScale:o,defaultZoomScale:a}=t,{attributes:l,extent:c,location:h,address:f}=e,m=new Ki({geometry:h,attributes:l}),y=c||h,g=U3(y,s,n),v=typeof o=="number"?rP(g,s,o):typeof a=="number"&&(y==null?void 0:y.type)==="point"?rP(g,s,a):g,w=h?`${h.x},${h.y}`:"",b=f||w,S=m.clone();return v!=null&&(S.geometry=Fa.fromExtent(v)),{extent:v,feature:m,target:S,key:r,name:b,sourceIndex:i}}function EZ(e,t){return e.filter(Boolean).map(r=>gEe(r,t))}var iP;const vEe="esri.widgets.Search.LocatorSearchSource";let On=iP=class extends z3{constructor(e){super(e),this.apiKey=null,this.categories=null,this.countryCode=null,this.defaultZoomScale=null,this.localSearchDisabled=!1,this.locationType=null,this.name="",this.placeholder="",this.searchTemplate="",this.singleLineFieldName=null,this.suggestionsEnabled=null,this.url=null,this.zoomScale=null,this.getResults=(t,r)=>lEe({source:this,...t},r),this.getSuggestions=(t,r)=>uEe({source:this,...t},r)}clone(){return new iP({apiKey:this.apiKey,autoNavigate:this.autoNavigate,filter:this.filter,maxResults:this.maxResults,maxSuggestions:this.maxSuggestions,minSuggestCharacters:this.minSuggestCharacters,outFields:this.outFields?F(this.outFields):null,placeholder:this.placeholder,popupEnabled:this.popupEnabled,prefix:this.prefix,resultGraphicEnabled:this.resultGraphicEnabled,resultSymbol:this.resultSymbol?this.resultSymbol.clone():null,suggestionsEnabled:this.suggestionsEnabled,suffix:this.suffix,withinViewEnabled:this.withinViewEnabled,categories:this.categories?F(this.categories):null,countryCode:this.countryCode,locationType:this.locationType,searchTemplate:this.searchTemplate,singleLineFieldName:this.singleLineFieldName,zoomScale:this.zoomScale})}};u([d()],On.prototype,"apiKey",void 0),u([d()],On.prototype,"categories",void 0),u([d()],On.prototype,"countryCode",void 0),u([d({json:{write:!0}})],On.prototype,"defaultZoomScale",void 0),u([d()],On.prototype,"localSearchDisabled",void 0),u([d()],On.prototype,"locationType",void 0),u([d({json:{write:!0}})],On.prototype,"name",void 0),u([d({json:{write:!0}})],On.prototype,"placeholder",void 0),u([d()],On.prototype,"searchTemplate",void 0),u([d({json:{write:!0}})],On.prototype,"singleLineFieldName",void 0),u([d({json:{read:{source:"suggest"},write:{target:"suggest"}}})],On.prototype,"suggestionsEnabled",void 0),u([d({json:{write:!0}})],On.prototype,"url",void 0),u([d({json:{write:!0}})],On.prototype,"zoomScale",void 0),On=iP=u([E(vEe)],On);const MZ=On;let ph=class extends Q{constructor(t){super(t),this.geometries=[],this.outSpatialReference=null,this.transformation=null,this.transformForward=null}toJSON(){const t=this.geometries.map(i=>i.toJSON()),r=this.geometries[0],n={};return n.outSR=this.outSpatialReference.wkid||JSON.stringify(this.outSpatialReference.toJSON()),n.inSR=r.spatialReference.wkid||JSON.stringify(r.spatialReference.toJSON()),n.geometries=JSON.stringify({geometryType:_p(r),geometries:t}),this.transformation&&(n.transformation=this.transformation.wkid||JSON.stringify(this.transformation)),this.transformForward!=null&&(n.transformForward=this.transformForward),n}};u([d()],ph.prototype,"geometries",void 0),u([d({json:{read:{source:"outSR"}}})],ph.prototype,"outSpatialReference",void 0),u([d()],ph.prototype,"transformation",void 0),u([d()],ph.prototype,"transformForward",void 0),ph=u([E("esri.rest.support.ProjectParameters")],ph);const IZ=ph,wEe=gr(IZ);async function _Ee(e,t,r){t=wEe(t);const n=Us(e),i={...n.query,f:"json",...t.toJSON()},s=t.outSpatialReference,o=_p(t.geometries[0]),a=w1(i,r);return St(n.path+"/project",a).then(({data:{geometries:l}})=>_H(l,o,s))}const CZ=Z.getLogger("esri.widgets.support.geolocationUtils"),bEe={maximumAge:0,timeout:15e3,enableHighAccuracy:!0};function SEe(){const e=V("esri-geolocation");return e||CZ.warn("geolocation-unsupported","Geolocation unsupported."),e}function xEe(){const e=window.isSecureContext;return e||CZ.warn("insecure-context","Geolocation requires a secure origin."),e}function vj(){return SEe()&&xEe()}function $Ee(e){return e||(e=bEe),new Promise((r,n)=>{setTimeout(()=>n(new N("geolocation:timeout","getting the current geolocation position timed out")),15e3),navigator.geolocation.getCurrentPosition(r,n,e??void 0)})}function TEe(e,t){const{position:r,view:n}=e,i=EEe(r),s=i==null?void 0:i.coords;if(!s)throw new N("geometry-service:no-coords","Geolocation has no coordinates");return IEe(MEe(s),n,t)}function EEe(e){const t=e&&e.coords||{},r={accuracy:t.accuracy,altitude:t.altitude,altitudeAccuracy:t.altitudeAccuracy,heading:t.heading,latitude:t.latitude,longitude:t.longitude,speed:t.speed};return e&&{coords:r,timestamp:e.timestamp}}function MEe({longitude:e,latitude:t,altitude:r}){return new be({longitude:e,latitude:t,z:r||void 0,spatialReference:{wkid:4326}})}function IEe(e,t,r){if(!t)return Promise.resolve(e);const n=t.spatialReference;return n.isWGS84?Promise.resolve(e):n.isWebMercator?Promise.resolve(Uc(e)):CEe(r).then(i=>{if(!i)throw new N("geometry-service:missing-url","Geometry service URL is missing");const s=new IZ({geometries:[e],outSpatialReference:n});return _Ee(i,s,r).then(o=>o[0])})}function CEe(e){if(ot.geometryServiceUrl)return Promise.resolve(ot.geometryServiceUrl);const t=hn.getDefault();return t.load(e).catch(()=>{}).then(()=>t.get("helperServices.geometry.url"))}function En(e,t){return e.hasOwnProperty(t)&&e[t]!=null&&e[t]!==""}const kEe=()=>u2("esri/widgets/Search/t9n/Search"),kZ="esri.widgets.Search.SearchViewModel",nl=Z.getLogger(kZ),wj="highlight",vb=Le.ofType({key:e=>e.layer?"layer":"locator",base:z3,typeMap:{layer:yf,locator:MZ}}),_j=Ce.WGS84,PEe="esri/images/search/search-symbol-32.png",OEe=/<(?:.|\s)*?>/g,vf=-1;let Ze=class extends A2(Ua.EventedMixin($e)){constructor(e){super(e),this._gotoController=null,this._searching=null,this._updatingPromise=null,this._createdFeatureLayers=[],this.autoNavigate=!0,this.autoSelect=!0,this.defaultPopupTemplate=null,this.defaultSources=new vb,this.defaultSymbols={point:new ry({url:ct(PEe),size:24,width:24,height:24}),polyline:new ts({color:[130,130,130,1],width:2}),polygon:new pd({color:[235,235,235,.4],outline:{color:[130,130,130,1],width:2}})},this.includeDefaultSources=!0,this.maxInputLength=128,this.maxResults=6,this.maxSuggestions=6,this.messages=null,this.minSuggestCharacters=3,this.popupEnabled=!0,this.popupTemplate=null,this.portal=hn.getDefault(),this.resultCount=null,this.resultGraphicEnabled=!0,this.resultGraphic=null,this.results=null,this.selectedSuggestion=null,this.searchAllEnabled=!0,this.selectedResult=null,this.sources=new vb,this.suggestionDelay=350,this.suggestionCount=null,this.suggestions=null,this.suggestionsEnabled=!0,this.view=null}initialize(){const e=async()=>{const t=await kEe();this.messages=t,this.defaultPopupTemplate=new Km({title:t.searchResult,content:"{Match_addr}"})};e(),this.addHandles([Ee(()=>[this.includeDefaultSources,this.view,this.portal],()=>this._update(),Ir),l2(e)])}destroy(){this.removeAllHandles(),this._destroyFeatureLayers(),this._abortGoTo(),this.clearGraphics()}get activeSource(){return this.allSources.at(this.activeSourceIndex)??null}get activeSourceIndex(){return this.allSources.length===1||!this.searchAllEnabled?0:vf}set activeSourceIndex(e){this._overrideIfSome("activeSourceIndex",e)}get allPlaceholder(){var e;return(e=this.messages)==null?void 0:e.allPlaceholder}set allPlaceholder(e){this._overrideIfSome("allPlaceholder",e)}get allSources(){const{sources:e,defaultSources:t,includeDefaultSources:r}=this,n=typeof r=="function"?r.call(null,{sources:e,defaultSources:t}):r?t.concat(e):e,i=this._get("allSources")||new vb;return i.removeAll(),i.addMany(n.filter(Boolean)),i}get locationEnabled(){return this._get("locationEnabled")||vj()}set locationEnabled(e){if(e===void 0)return void this._clearOverride("locationEnabled");const t=vj();if(e&&!t){const r=new N("locationEnabled:geolocation-unsupported","Geolocation API is unsupported.",{geolocation:navigator.geolocation});nl.error(r)}this._override("locationEnabled",!!e&&t)}get placeholder(){const{allSources:e,activeSourceIndex:t,allPlaceholder:r}=this;if(t===vf)return r??"";const n=e.at(t);return(n==null?void 0:n.placeholder)??""}set searchTerm(e){this._set("searchTerm",e||""),this.clearGraphics(),this.selectedSuggestion&&this.selectedSuggestion.text!==e&&this._set("selectedSuggestion",null),e===""&&this._clear()}get searchTerm(){return this._get("searchTerm")||""}get state(){return this._searching?"searching":this.updating?"loading":this.allSources.length===0?"disabled":"ready"}get updating(){return this._updatingPromise!=null}clear(){this.searchTerm=""}clearGraphics(){this._removeHighlight(),this._closePopup();const{view:e,resultGraphic:t}=this;e&&t&&e.graphics.remove(t),this._set("resultGraphic",null)}search(e,t){this.emit("search-start"),this.clearGraphics();const r=this._createSuggestionForSearch(e),n=(async()=>{var i;try{await this.when();const s=await this._getResultsFromSources(r,t);if((i=t==null?void 0:t.signal)!=null&&i.aborted)return null;const o={activeSourceIndex:this.activeSourceIndex,searchTerm:r.text??"",numResults:0,numErrors:0,errors:[],results:[]};this._formatResponse(o,s,r);const a=this._getFirstResult(o.results),l=r.location&&a?a.name:r.text,c=l==null?void 0:l.replace(OEe,"");return this._set("searchTerm",c),(r.key&&typeof r.sourceIndex=="number"||r.location)&&this._set("selectedSuggestion",r),this._set("results",o.results),this._set("resultCount",o.results.reduce((h,f)=>{var m;return h+(((m=f.results)==null?void 0:m.length)??0)},0)),this.emit("search-complete",o),await this._selectFirstResult(a),o}finally{this._clearSearching()}})();return this._searching=n,n}async searchNearby(e){if(!this.locationEnabled){const r=new N("searchNearby:geolocation-unsupported","Geolocation API is unsupported.",{geolocation:navigator.geolocation});throw nl.error(r),r}const t=(async()=>{try{const r=await $Ee(),n=await TEe({position:r,view:this.view},e);return await this.search(n,e)}finally{this._clearSearching()}})();return this._searching=t,t}async select(e){if(this.clearGraphics(),!e){const O=new N("select:missing-parameter","Cannot select without a searchResult.",{searchResult:e});throw nl.error(O),O}const{view:t}=this,r=En(e,"sourceIndex")?e.sourceIndex:this._getSourceIndexOfResult(e),n=r!=null?this.allSources.at(r):null;if(!n){const O=new N("select:missing-source","Cannot select without a source.",{source:n});throw nl.error(O),O}const i=n instanceof yf?this._getLayerSourcePopupTemplate(n):n.popupTemplate,s=n.resultSymbol||this._getDefaultSymbol(e),o=En(n,"resultGraphicEnabled")?n.resultGraphicEnabled:this.resultGraphicEnabled,a=En(n,"autoNavigate")?n.autoNavigate:this.autoNavigate,l=(En(n,"popupEnabled")?n.popupEnabled:this.popupEnabled)?i||this.popupTemplate||this.defaultPopupTemplate:null,{feature:c}=e;if(!c){const O=new N("select:missing-feature","Cannot select without a feature.",{feature:c});throw nl.error(O),O}const{attributes:h,geometry:f,layer:m,sourceLayer:y}=c,g=yj(f),v={layerViewQuery:this._getLayerView(c),elevationQuery:t&&g!=null?LTe(g,t).catch(()=>g):Promise.resolve(g)},w=await Mo(v),b=w.layerViewQuery.value,S=w.elevationQuery.value;s instanceof Sp&&(s.text=e.name);const _=t&&a?e.target||e.extent:null;await(_!=null?this._goToSearchResult(_):Promise.resolve());const T=b?c:new Ki({geometry:f,symbol:s,attributes:h,layer:m,sourceLayer:y,popupTemplate:l}),I=t==null?void 0:t.popup,C=I&&T.getEffectivePopupTemplate(I.defaultPopupTemplateEnabled);return C&&await t.openPopup({features:[T],location:S}),b&&ATe(b)&&!C&&this._highlightFeature({graphic:T,layerView:b}),!b&&o&&t&&t.graphics.push(T),this._setResultFloor(e),this._set("selectedResult",e),this._set("resultGraphic",T),this.emit("select-result",{result:e,source:n,sourceIndex:r}),e}async suggest(e,t,r){const n=e||this.searchTerm;this.emit("suggest-start",{searchTerm:n}),await this._suggestTimer(t,r);const i=await this._suggestImmediate(n,r);return this._set("suggestions",i==null?void 0:i.results),this._set("suggestionCount",(i==null?void 0:i.results.reduce((s,o)=>{var a;return s+(((a=o.results)==null?void 0:a.length)??0)},0))??null),this.emit("suggest-complete",i),i}async when(){await wv(()=>!this.updating)}async _update(){const{portal:e,view:t}=this;if(this.includeDefaultSources){const r=this._updatingPromise=Mo([e==null?void 0:e.load(),t==null?void 0:t.when()]);if(this.destroyed||(await r,r!==this._updatingPromise))return}await wv(()=>this.messages),this.destroyed||this._updateDefaultSources(),this._updatingPromise=null}_clearSearching(){this._searching=null}_convertHelperServices(){var t,r;const e=(r=(t=this.portal)==null?void 0:t.helperServices)==null?void 0:r.geocode;return e?e.map(n=>{var a;if(n.placefinding===!1)return;const i=ot.apiKey&&gj(n.url)?{url:hEe}:null,s=MZ.fromJSON({...n,...i}),o=s.url;if(gj(o)||dEe(o)||cEe(o)){const l=s.outFields??["Addr_type","Match_addr","StAddr","City"],c=(s.placeholder||((a=this.messages)==null?void 0:a.placeholder))??"",h=typeof s.defaultZoomScale=="number"?s.defaultZoomScale:2500;s.singleLineFieldName="SingleLine",s.outFields=l,s.placeholder=c,s.defaultZoomScale=h}return s.singleLineFieldName?s:void 0}).filter(Ll):[]}_destroyFeatureLayers(){this._createdFeatureLayers.forEach(e=>e==null?void 0:e.destroy()),this._createdFeatureLayers=[]}_getLayerSources(e,t){var n;const r=(n=this.view)==null?void 0:n.map;return e.map(i=>{const s=r.findLayerById(i.id);if(!s)return;const o=this._getLayerJSON(i),a=yf.fromJSON(o);return a.placeholder=t,this._getLayer(s,o).then(l=>{a.layer=l}),a}).filter(Ll).toArray()}_getTableSources(e,t){var n;const r=(n=this.view)==null?void 0:n.map;return e.map(i=>{if(!i.id)return;const s=r.findTableById(i.id);if(!s)return;const o=this._getLayerJSON(i),a=yf.fromJSON(o);return a.placeholder=t,this._getLayer(s,o).then(l=>{a.layer=l}),a}).filter(Ll).toArray()}_convertApplicationProperties(){var o,a,l;const e=(o=this.view)==null?void 0:o.map,t=(l=(a=e==null?void 0:e.applicationProperties)==null?void 0:a.viewing)==null?void 0:l.search;if(!t)return[];const{enabled:r,hintText:n,layers:i,tables:s}=t;return r?[...this._getLayerSources(i,n),...this._getTableSources(s,n)]:[]}async _getSubLayer(e,t){var i;if(await e.load(),!e.allSublayers)throw new Error;const r=e.allSublayers.find(s=>s.id===t.subLayer);if(!r)throw new Error;const n=await((i=r.createFeatureLayer)==null?void 0:i.call(r));if(!n)throw new Error;return this._createdFeatureLayers.push(n),n}async _getBuildingSubLayer(e,t){await e.load();const r=e.allSublayers.find(n=>n.id===t.subLayer);if((r==null?void 0:r.type)!=="building-component")throw new Error;if(await r.load(),r.associatedLayer==null)throw new Error;return await r.associatedLayer.load(),r}async _getLayer(e,t){if(e.type==="feature"||e.type==="scene"||e.type==="csv"||e.type==="geojson"||e.type==="ogc-feature")return e;if(e.type==="map-image")try{return await this._getSubLayer(e,t)}catch{const n=new N("search:create-featurelayer","Could not create a FeatureLayer from the MapImageLayer",{layer:e});return nl.error(n),null}return e.type==="building-scene"?this._getBuildingSubLayer(e,t):null}_getLayerJSON(e){return typeof e.toJSON=="function"?e.toJSON():e}_updateDefaultSources(){const{defaultSources:e,includeDefaultSources:t}=this;this._destroyFeatureLayers(),e.removeAll(),t&&e.addMany([...this._convertApplicationProperties(),...this._convertHelperServices()])}_abortGoTo(){this._gotoController&&this._gotoController.abort(),this._gotoController=null}_clear(){this._abortGoTo(),this._set("resultCount",null),this._set("results",null),this._set("suggestions",null),this._set("suggestionCount",null),this._set("selectedResult",null),this._set("selectedSuggestion",null),this.emit("search-clear")}_closePopup(){var i;const e=(i=this.view)==null?void 0:i.popup,{resultGraphic:t}=this;if(!e||!t)return;const r="selectedFeature"in e,n=r?e.selectedFeature:null;r&&n&&n===t&&e.close()}_suggestTimer(e,t){const r=e??this.suggestionDelay;return xO(r,null,t&&t.signal)}_createLocationForSearch(e){return e instanceof Ki?yj(e.geometry):e instanceof be?e:Array.isArray(e)&&e.length===2?new be({longitude:e[0],latitude:e[1]}):null}_createSuggestionForSearch(e){if(e&&En(e,"key")&&En(e,"text")&&En(e,"sourceIndex"))return e;const t=this._createLocationForSearch(e),r=typeof e=="string"?e:this.searchTerm,{selectedSuggestion:n,selectedResult:i}=this,s=!e&&n&&i,o=s&&n.key===i.key&&n.sourceIndex===i.sourceIndex,a=s&&n.location;return o||a?n:{location:t,text:t?"":r,sourceIndex:null,key:null}}_getFirstResult(e){let t=null;return e&&e.some(r=>{const{results:n}=r,i=n==null?void 0:n[0],s=!!i;return s&&(t=i),s}),t}async _selectFirstResult(e){return this.autoSelect&&e?this.select(e):null}async _suggestImmediate(e,t){var i;await this.when();const r=await this._getSuggestionsFromSources(e,t);if((i=t==null?void 0:t.signal)!=null&&i.aborted)return null;const n={activeSourceIndex:this.activeSourceIndex,searchTerm:e??"",numResults:0,numErrors:0,errors:[],results:[]};return this._formatResponse(n,r),n}_formatSourceResponse(e,t,r){const n=(t==null?void 0:t.value)||[],i=t==null?void 0:t.error,s=this.allSources.at(r);if(i){const o={sourceIndex:r,source:s,error:i};e.errors.push(o),nl.error(i),e.numErrors++}else{const o={sourceIndex:r,source:s,results:n};e.results.push(o),e.numResults+=n.length}}_formatResponse(e,t,r){if(t)if(e.activeSourceIndex===vf){const n=r&&En(r,"sourceIndex")&&r.sourceIndex!==-1?r.sourceIndex:void 0;t.forEach((i,s)=>{const o=n!==void 0?n:s;this._formatSourceResponse(e,i,o)})}else this._formatSourceResponse(e,t[0],e.activeSourceIndex)}async _getResultsFromSources(e,t){const{allSources:r}=this,n=!e.location&&En(e,"sourceIndex")?e.sourceIndex:this.activeSourceIndex,i=[];if(!r.length){const s=new N("search:no-sources-defined","At least one source is required.",{allSources:r});throw nl.error(s),s}return n===vf?r.forEach((s,o)=>{i.push(this._getResultsFromSource(e,o,t))}):i.push(this._getResultsFromSource(e,n,t)),Mo(i)}async _getSuggestionsFromSources(e,t){const{allSources:r,activeSourceIndex:n}=this,i=[];if(!r.length){const s=new N("suggest:no-sources-defined","At least one source is required.",{allSources:r});throw nl.error(s),s}return n===vf?r.forEach((s,o)=>{i.push(this._getSuggestionsFromSource(e,o,t))}):i.push(this._getSuggestionsFromSource(e,n,t)),Mo(i)}async _getResultsFromSource(e,t,r){var c,h;const n=t!=null?this.allSources.at(t):null;if(!n)return null;const{location:i=null}=e,s=((c=this.view)==null?void 0:c.spatialReference)||_j,o=En(n,"maxResults")?n.maxResults:this.maxResults,a=!!(n instanceof yf&&En(n,"exactMatch"))&&n.exactMatch,{view:l}=this;return(h=n.getResults)==null?void 0:h.call(n,{view:l,sourceIndex:t,location:i,suggestResult:e,spatialReference:s,exactMatch:a,maxResults:o},r)}async _getSuggestionsFromSource(e,t,r){var a,l;const n=this.allSources.at(t);if(!n)return null;e??(e="");const i=En(n,"suggestionsEnabled")?n.suggestionsEnabled:this.suggestionsEnabled,s=e==null?void 0:e.length,o=En(n,"minSuggestCharacters")?n.minSuggestCharacters:this.minSuggestCharacters;if(i&&e.trim()&&s>=o){const c=((a=this.view)==null?void 0:a.spatialReference)||_j,h=En(n,"maxSuggestions")?n.maxSuggestions:this.maxSuggestions,{view:f}=this,m=!!(n instanceof yf&&En(n,"exactMatch"))&&n.exactMatch;return(l=n.getSuggestions)==null?void 0:l.call(n,{view:f,sourceIndex:t,suggestTerm:e,spatialReference:c,maxSuggestions:h,exactMatch:m},r)}return null}_getLayerSourcePopupTemplate(e){const{layer:t}=e;if(t)return En(e,"popupTemplate")?e.popupTemplate:t.popupTemplate}_getSourceIndexOfResult(e){const t=this.results;if(!t)return null;let r=null;return t.some(n=>n.results.some(i=>i===e&&(r=n.sourceIndex,!0))),r}async _goToSearchResult(e){this._abortGoTo();const t=new AbortController;this._gotoController=t;const r={target:{target:e},options:{signal:t.signal}};e||(r.options.animate=!1),await this.callGoTo(r),this._gotoController=null}_getDefaultSymbol(e){var n;const{defaultSymbols:t}=this,r=(n=e.feature)==null?void 0:n.geometry;if(r==null)return null;switch(r.type){case"point":case"multipoint":return t.point;case"polyline":return t.polyline;case"extent":case"polygon":return t.polygon;default:return null}}_removeHighlight(){this.removeHandles(wj)}async _getLayerView(e){var n,i;const{view:t}=this;if(!e||!t||((n=e.layer)==null?void 0:n.type)==="building-component"||((i=e.layer)==null?void 0:i.type)==="subtype-sublayer")return null;const{layer:r}=e;return r?(await t.when(),t.whenLayerView(r)):null}_highlightFeature(e){const{graphic:t,layerView:r}=e,{attributes:n,layer:i}=t,{objectIdField:s}=i,o=(s&&(n==null?void 0:n[s]))??null,a=r.highlight(o??t);this.addHandles(a,wj)}_setResultFloor(e){var i,s,o;const{view:t}=this,r=(i=e.feature)==null?void 0:i.attributes,n=(s=e.feature)==null?void 0:s.sourceLayer;if(n&&"floorInfo"in n&&((o=n==null?void 0:n.floorInfo)!=null&&o.floorField)&&r){const a=r[n.floorInfo.floorField];t==null||t.emit("select-result-floor",a)}}};Ze.ALL_INDEX=vf,u([d()],Ze.prototype,"_searching",void 0),u([d()],Ze.prototype,"_updatingPromise",void 0),u([d({readOnly:!0,value:null})],Ze.prototype,"activeSource",null),u([d()],Ze.prototype,"activeSourceIndex",null),u([d()],Ze.prototype,"allPlaceholder",null),u([d({readOnly:!0})],Ze.prototype,"allSources",null),u([d()],Ze.prototype,"autoNavigate",void 0),u([d()],Ze.prototype,"autoSelect",void 0),u([d()],Ze.prototype,"defaultPopupTemplate",void 0),u([d({readOnly:!0})],Ze.prototype,"defaultSources",void 0),u([d()],Ze.prototype,"defaultSymbols",void 0),u([d()],Ze.prototype,"includeDefaultSources",void 0),u([d()],Ze.prototype,"locationEnabled",null),u([d()],Ze.prototype,"maxInputLength",void 0),u([d()],Ze.prototype,"maxResults",void 0),u([d()],Ze.prototype,"maxSuggestions",void 0),u([d()],Ze.prototype,"messages",void 0),u([d()],Ze.prototype,"minSuggestCharacters",void 0),u([d({readOnly:!0})],Ze.prototype,"placeholder",null),u([d()],Ze.prototype,"popupEnabled",void 0),u([d({type:Km})],Ze.prototype,"popupTemplate",void 0),u([d({type:hn})],Ze.prototype,"portal",void 0),u([d()],Ze.prototype,"resultCount",void 0),u([d()],Ze.prototype,"resultGraphicEnabled",void 0),u([d({readOnly:!0})],Ze.prototype,"resultGraphic",void 0),u([d({readOnly:!0})],Ze.prototype,"results",void 0),u([d({readOnly:!0})],Ze.prototype,"selectedSuggestion",void 0),u([d()],Ze.prototype,"searchAllEnabled",void 0),u([d({readOnly:!0})],Ze.prototype,"selectedResult",void 0),u([d()],Ze.prototype,"searchTerm",null),u([d({type:vb})],Ze.prototype,"sources",void 0),u([d({readOnly:!0})],Ze.prototype,"state",null),u([d()],Ze.prototype,"suggestionDelay",void 0),u([d()],Ze.prototype,"suggestionCount",void 0),u([d({readOnly:!0})],Ze.prototype,"suggestions",void 0),u([d()],Ze.prototype,"suggestionsEnabled",void 0),u([d({readOnly:!0})],Ze.prototype,"updating",null),u([d()],Ze.prototype,"view",void 0),u([d()],Ze.prototype,"clear",null),Ze=u([E(kZ)],Ze);const Uf=Ze;let ic=class extends Wa{constructor(t,r){super(t,r),this.messages=null,this.showMoreResultsOpen=!1,this.viewModel=null}destroy(){this.viewModel=null}render(){const t={[rl.showMoreResults]:this.showMoreResultsOpen};return D("div",{class:rl.base},D("div",{key:"esri-search-renderer__container",class:this.classes(rl.moreResults,t)},this.renderSearchResultName(),this.renderMoreResults()))}renderMoreResults(){return D("div",{key:"esri-search-renderer__more-results"},this.renderMoreResultsButton(),this.renderMoreResultsLists())}renderSearchResultName(){var n;const t=(n=this.viewModel)==null?void 0:n.selectedResult,r=t&&t.name||"";return D("div",{key:"esri-search-renderer__result-name",class:rl.moreResultsItem},r)}renderMoreResultsLists(){const{viewModel:t}=this;if(!t)return[];const r=t.results;if((t.resultCount??0)<2)return null;const n=r==null?void 0:r.map(i=>this.renderMoreResultsList(i));return D("div",{key:"esri-search-renderer__more-results-container",class:rl.moreResultsList},n)}renderMoreResultsButton(){const{messages:t,viewModel:r}=this;return r?(r.resultCount??0)<2?null:D("div",{key:"esri-search-renderer__more-results-button",class:rl.moreResultsItem},D("a",{class:rl.anchor,href:"#",bind:this,onclick:this._showMoreResultsClick,onkeydown:this._showMoreResultsClick},this.showMoreResultsOpen?t.hideMoreResults:t.showMoreResults)):null}renderMoreResultsHeader(t,r){return D("div",{key:`esri-search-result-renderer__header-${r}`,class:rl.moreResultsListHeader},t)}renderMoreResultsList(t){var f,m,y;const{results:r}=t,n=(r==null?void 0:r.length)??0,i=n>0,s=(f=this.viewModel)==null?void 0:f.selectedResult,o=n===1&&r[0]===s,a=this._getSourceName(t.source,t.sourceIndex),l=(((y=(m=this.viewModel)==null?void 0:m.results)==null?void 0:y.length)??0)>1&&!o?this.renderMoreResultsHeader(a,t.sourceIndex):null,c=i&&r.map((g,v)=>this.renderMoreResultsListItem(g,v)),h=i&&!o?D("ul",{key:`esri-search-result-renderer__list-${t.sourceIndex}`},c):null;return i?D("div",{key:`esri-search-result-renderer__results-${t.sourceIndex}`},l,h):null}renderMoreResultsListItem(t,r){return t!==this.get("viewModel.selectedResult")?D("li",{key:`esri-search-result-renderer__list-item-${r}`},D("a",{class:rl.anchor,href:"#",tabindex:"0",bind:this,"data-result":t,onclick:this._selectResultClick,onkeydown:this._selectResultClick},t.name)):null}_showMoreResultsClick(t){t.preventDefault(),this.showMoreResultsOpen=!this.showMoreResultsOpen;const r=this.get("viewModel.view.popup");r&&r.reposition()}_selectResultClick(t){var n;t.preventDefault();const r=t.currentTarget["data-result"];(n=this.viewModel)==null||n.select(r)}_getSourceName(t,r){return r===Uf.ALL_INDEX?this.messages.all:t.name}};u([d(),Vs("esri/widgets/Search/t9n/Search")],ic.prototype,"messages",void 0),u([d()],ic.prototype,"showMoreResultsOpen",void 0),u([d()],ic.prototype,"viewModel",void 0),u([vi()],ic.prototype,"_showMoreResultsClick",null),u([vi()],ic.prototype,"_selectResultClick",null),ic=u([E("esri.widgets.Search.SearchResultRenderer")],ic);const REe=ic;function PZ(e){return t=>{t.hasOwnProperty("_delegatedEventNames")||(t._delegatedEventNames=t._delegatedEventNames?t._delegatedEventNames.slice():[]);const r=t._delegatedEventNames,n=Array.isArray(e)?e:AEe(e);r.push(...n)}}function AEe(e){return e.split(",").map(t=>t.trim())}const LEe=/<[a-z/][\s\S]*>/i,NEe=(e,t)=>{const r=wO(t).split(/\s/),n=new RegExp(`(${r.join("|")})`,"gi");return e.replace(n,i=>`<strong>${i}</strong>`)};let Je=class extends Wa{constructor(t,r){super(t,r),this._activeMenuItemIndex=-1,this._inputNode=null,this._menuItemCount=0,this._sourceMenuButtonNode=null,this._sourceListNode=null,this._suggestionListNode=null,this._searchResultRenderer=new REe,this._suggestController=null,this._searchController=null,this._locateFailed=!1,this._container=null,this.activeMenu="none",this.disabled=!1,this.iconClass=Te.widgetIcon,this.icon=null,this.messages=null,this.messagesCommon=null,this.viewModel=new Uf,this._clearActiveMenu=()=>{this.activeMenu="none"},this._removeActiveMenu=n=>{var s;const i=n.relatedTarget;i&&((s=this._container)!=null&&s.contains(i))||this._clearActiveMenu()},this.addHandles([Ee(()=>this.searchTerm,n=>{(n&&this.activeMenu==="warning"||!n&&!this.get("viewModel.selectedSuggestion.location"))&&this._clearActiveMenu()}),Rm(()=>{var n;return(n=this.viewModel)==null?void 0:n.allSources},"change",()=>this._watchSourceChanges()),Ee(()=>this.activeMenu,()=>this._resetActiveMenuItemIndex(),Ir),Ee(()=>{var n;return(n=this.viewModel)==null?void 0:n.defaultPopupTemplate},n=>{n&&(n.content=this._renderSearchResultsContent.bind(this))},Ir)])}destroy(){this.removeAllHandles(),this._cancelSuggest(),this._cancelSearch(),this._searchResultRenderer=Gt(this._searchResultRenderer)}get displayedSearchTerm(){return`${this.viewModel.searchTerm}`.trim()}get inputId(){return this._buildId("input")}get suggestionsMenuId(){return this._buildId("suggest-menu")}get sourceMenuId(){return this._buildId("source-menu")}get sourceMenuButtonId(){return this._buildId("source-menu-button")}get activeSource(){var t;return(t=this.viewModel)==null?void 0:t.activeSource}get activeSourceIndex(){return this.viewModel.activeSourceIndex}set activeSourceIndex(t){this.viewModel.activeSourceIndex=t}get allPlaceholder(){return this.viewModel.allPlaceholder}set allPlaceholder(t){this.viewModel.allPlaceholder=t}get allSources(){return this.viewModel.allSources}get autoNavigate(){return this.viewModel.autoNavigate}set autoNavigate(t){this.viewModel.autoNavigate=t}get autoSelect(){return this.viewModel.autoSelect}set autoSelect(t){this.viewModel.autoSelect=t}get defaultSources(){return this.viewModel.defaultSources}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(t){this.viewModel.goToOverride=t}get includeDefaultSources(){return this.viewModel.includeDefaultSources}set includeDefaultSources(t){this.viewModel.includeDefaultSources=t}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}get locationEnabled(){return this.viewModel.locationEnabled}set locationEnabled(t){this.viewModel.locationEnabled=t}get maxResults(){return this.viewModel.maxResults}set maxResults(t){this.viewModel.maxResults=t}get maxSuggestions(){return this.viewModel.maxSuggestions}set maxSuggestions(t){this.viewModel.maxSuggestions=t}get minSuggestCharacters(){return this.viewModel.minSuggestCharacters}set minSuggestCharacters(t){this.viewModel.minSuggestCharacters=t}get popupEnabled(){return this.viewModel.popupEnabled}set popupEnabled(t){this.viewModel.popupEnabled=t}get popupTemplate(){return this.viewModel.popupTemplate}set popupTemplate(t){this.viewModel.popupTemplate=t}get portal(){var t;return(t=this.viewModel)==null?void 0:t.portal}set portal(t){this.viewModel&&(this.viewModel.portal=t)}get resultGraphic(){return this.viewModel.resultGraphic}set resultGraphic(t){this.viewModel.resultGraphic=t}get resultGraphicEnabled(){return this.viewModel.resultGraphicEnabled}set resultGraphicEnabled(t){this.viewModel.resultGraphicEnabled=t}get results(){return this.viewModel.results}get searchAllEnabled(){return this.viewModel.searchAllEnabled}set searchAllEnabled(t){this.viewModel.searchAllEnabled=t}get searchTerm(){return this.viewModel.searchTerm}set searchTerm(t){this.viewModel.searchTerm=t}get selectedResult(){return this.viewModel.selectedResult}get sources(){return this.viewModel.sources}set sources(t){this.viewModel.sources=t}get suggestions(){return this.viewModel.suggestions}get suggestionsEnabled(){return this.viewModel.suggestionsEnabled}set suggestionsEnabled(t){this.viewModel.suggestionsEnabled=t}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}clear(){this.viewModel.clear()}focus(){var t;(t=this._inputNode)==null||t.focus(),this.emit("search-focus")}blur(){var t;(t=this._inputNode)==null||t.blur(),this.emit("search-blur")}async search(t){this._clearActiveMenu(),this._cancelSuggest(),this._cancelSearch();const r=new AbortController,{signal:n}=r;this._searchController=r;try{const i=await this.viewModel.search(t,{signal:n});return this._searchController!==r?void 0:(this.activeMenu=i!=null&&i.numResults?"none":"warning",this._searchController=null,i)}catch{return this._searchController!==r?void 0:(this._clearActiveMenu(),void(this._searchController=null))}}async suggest(t){this._cancelSuggest();const r=new AbortController,{signal:n}=r;this._suggestController=r;try{const i=await this.viewModel.suggest(t,null,{signal:n});return this._suggestController!==r?void 0:(this._suggestController=null,i!=null&&i.numResults&&this._openSuggestionMenu(),this._scrollToTopSuggestion(),i)}catch{return this._suggestController!==r||(this._suggestController=null),null}}render(){const{state:t}=this.viewModel,r={[Te.disabled]:t==="disabled",[Te.esriWidgetDisabled]:this.disabled};return D("div",{class:this.classes(Te.base,r)},t==="loading"?this.renderLoader():this.renderContainer())}renderSubmitButton(){const{messages:t,disabled:r}=this;return D("button",{"aria-label":t.searchButtonTitle,bind:this,disabled:r,class:this.classes(Te.submitButton,Te.button),key:"esri-search__submit-button",onclick:this._handleSearchButtonClick,title:t.searchButtonTitle,type:"button"},D("span",{"aria-hidden":"true",class:Te.searchIcon}))}renderWarningMenu(){return D("div",{key:"esri-search__error-menu",class:this.classes(Te.menu,Te.warningMenu)},D("div",{class:Te.warningMenuBody},this.renderWarning()))}renderSourceMenuButton(){const{messages:t,activeMenu:r,sourceMenuId:n,sourceMenuButtonId:i,disabled:s}=this,{activeSourceIndex:o,allSources:a}=this.viewModel;return a.length>1?D("button",{id:i,key:"esri-search__source-menu-button",bind:this,disabled:s,"aria-label":t.searchIn,title:t.searchIn,"aria-haspopup":"true","aria-expanded":(r==="source").toString(),"aria-controls":n,class:this.classes(Te.sourcesButton,Te.button),onclick:this._handleSourcesMenuToggleClick,onfocus:this._handleSourcesMenuToggleFocus,afterCreate:Tg,"data-node-ref":"_sourceMenuButtonNode",type:"button"},D("span",{"aria-hidden":"true",class:Te.dropdownIcon}),D("span",{"aria-hidden":"true",class:Te.dropupIcon}),D("span",{class:Te.sourceName},this._getSourceName(o))):null}renderSourcesList(){const{allSources:t,searchAllEnabled:r}=this.viewModel,{_activeMenuItemIndex:n,activeMenu:i,sourceMenuId:s,sourceMenuButtonId:o}=this,a=i==="source"&&n>-1?this._buildId("source-item",n):null;return t.length>1?D("ul",{"aria-activedescendant":a,"aria-labelledby":o,id:s,role:"menu",bind:this,afterCreate:Tg,onkeydown:this._handleSourceMenuKeydown,onkeyup:this._handleSourceMenuKeyup,"data-node-ref":"_sourceListNode",class:Te.menuList,tabIndex:-1},r?this.renderSource(Uf.ALL_INDEX):null,t.map((l,c)=>this.renderSource(c)).toArray()):null}renderSourcesMenu(){const{allSources:t}=this.viewModel;return t.length>1?D("div",{key:"esri-search__source-menu",class:this.classes(Te.menu,Te.sourcesMenu)},this.renderSourcesList()):null}renderLoader(){const{messages:t,messagesCommon:r,disabled:n}=this;return D("div",{class:Te.loader,key:"base-loader",tabIndex:n?-1:void 0},D("span",{"aria-hidden":"true",class:Te.loaderAnimation}),D("span",{class:Te.fallbackText},t.searchButtonTitle),D("span",{class:Te.loaderText},r.loading))}renderContainer(){const{allSources:t,state:r}=this.viewModel,{activeMenu:n}=this,i={[Te.hasMultipleSources]:t.length>1,[Te.isLoading]:r==="loading",[Te.isSearching]:r==="searching",[Te.showWarning]:n==="warning",[Te.showSources]:n==="source",[Te.showSuggestions]:n==="suggestion"};return D("div",{tabIndex:-1,afterCreate:s=>{this._container=s,s.addEventListener("focusout",this._removeActiveMenu)},afterRemoved:s=>{s.removeEventListener("focusout",this._removeActiveMenu)},class:this.classes(i,Te.container),key:"base-container"},this.renderSourceMenuButton(),this.renderSourcesMenu(),this.renderInputContainer(),this.renderSubmitButton(),this.renderWarningMenu())}renderClearButton(){return this.searchTerm?D("button",{bind:this,disabled:this.disabled,class:this.classes(Te.clearButton,Te.button),key:"esri-search__clear-button",onclick:this._handleClearButtonClick,onfocus:this._clearActiveMenu,title:this.messages.clearButtonTitle,type:"button"},D("span",{"aria-hidden":"true",class:Te.clearIcon})):null}renderLocationGroup(){const{messages:t,locationEnabled:r,displayedSearchTerm:n}=this,i=r&&!n,s=this.activeMenu==="suggestion"&&this._activeMenuItemIndex===0;return i?D("ul",{role:"group",key:"esri-search__suggestion-list-current-location",class:this.classes(Te.menuList,Te.suggestionList,Te.suggestionListCurrentLocation)},D("li",{bind:this,"data-current-location-item":!0,onclick:this._handleUseCurrentLocationClick,id:this._buildId("suggestion-item",0),"aria-selected":(this.activeMenu==="suggestion"&&this._activeMenuItemIndex===0).toString(),role:"option",class:this.classes(Te.menuItem,s?Te.menuItemFocus:null)},D("span",{"aria-hidden":"true",class:Te.locate})," ",t.useCurrentLocation)):null}renderInput(){const{activeMenu:t,locationEnabled:r,displayedSearchTerm:n,messages:i,suggestionsMenuId:s,inputId:o,_activeMenuItemIndex:a,disabled:l}=this,{maxInputLength:c,placeholder:h,searchTerm:f,suggestionCount:m}=this.viewModel,y=!(!(r&&!n)&&!m),g=t==="suggestion"&&a>-1?this._buildId("suggestion-item",a):null;return D("input",{"aria-activedescendant":g,"aria-autocomplete":"list","aria-expanded":(y&&t==="suggestion").toString(),"aria-controls":y?s:null,"aria-haspopup":"listbox","aria-label":i.searchButtonTitle,bind:this,disabled:l,placeholder:h,maxlength:c,autocomplete:"off",type:"text",class:this.classes(Te.esriInput,Te.input),value:f,id:o,role:"combobox",onkeyup:this._handleInputKeyup,onclick:this._openSuggestionMenu,oninput:this._handleInputPaste,onpaste:this._handleInputPaste,afterCreate:Tg,"data-node-ref":"_inputNode",onfocus:this.focus,onblur:this.blur,title:f?"":h})}renderForm(){return D("form",{key:"esri-search__form",bind:this,disabled:this.disabled,class:Te.form,onsubmit:this._formSubmit,role:"search"},this.renderInput())}renderSuggestList(t){const{sourceIndex:r}=t,{results:n}=t;return(n==null?void 0:n.length)?D("ul",{role:"group",key:`esri-search__suggestion-list-${r}`,class:this.classes(Te.menuList,Te.suggestionList)},n==null?void 0:n.map(s=>this.renderSuggestion(s,this._menuItemCount++))):null}renderSuggestionsGroup(){const{suggestions:t}=this.viewModel;return t?t.map(r=>[this.renderSuggestionHeader(r),this.renderSuggestList(r)]):[]}renderSuggestionsMenu(){const{displayedSearchTerm:t,locationEnabled:r,suggestionsMenuId:n,inputId:i}=this,{suggestionCount:s}=this.viewModel,o=r&&!t||s;return this._menuItemCount=0,o?D("div",{id:n,key:"esri-search__suggestions-menu",class:this.classes(Te.menu,Te.suggestionsMenu),role:"listbox","aria-labelledby":i,bind:this,afterCreate:Tg,"data-node-ref":"_suggestionListNode"},this.renderLocationGroup(),this.renderSuggestionsGroup()):null}renderInputContainer(){return D("div",{key:"esri-search__input-container",class:Te.inputContainer},this.renderForm(),this.renderSuggestionsMenu(),this.renderClearButton())}renderSuggestionHeader(t){var a;const{allSources:r,activeSourceIndex:n}=this.viewModel,{sourceIndex:i}=t,s=(a=t.results)==null?void 0:a.length,o=r.length>1&&n===Uf.ALL_INDEX;return s&&o?D("div",{key:`esri-search__suggestion-header-${i}`,class:Te.menuHeader},this._getSourceName(i)):null}renderSuggestion(t,r){const{_activeMenuItemIndex:n,viewModel:{searchTerm:i}}=this;if(!i)return;const s=this.activeMenu==="suggestion"&&n===r;return D("li",{bind:this,id:this._buildId("suggestion-item",r),"aria-selected":(this.activeMenu==="suggestion"&&this._activeMenuItemIndex===r).toString(),onclick:this._handleSuggestionClick,key:`esri-search__suggestion_${r}`,"data-suggestion":t,role:"option",innerHTML:this._getSuggestResultHTML(t.text,i),class:this.classes(Te.menuItem,s?Te.menuItemFocus:null)})}renderSource(t){const{activeSourceIndex:r,searchAllEnabled:n}=this.viewModel,i={[Te.menuItemActive]:t===r,[Te.menuItemFocus]:this.activeMenu==="source"&&t===(n?this._activeMenuItemIndex-1:this._activeMenuItemIndex)},s=n?t+1:t;return D("li",{bind:this,key:`esri-search__source-${t}`,id:this._buildId("source-item",s),"aria-checked":(t===r).toString(),onclick:this._handleSourceClick,"data-source-index":t,role:"menuitemradio",class:this.classes(Te.source,Te.menuItem,i)},this._getSourceName(t))}renderNoResultsWarning(t){const{messages:r}=this,n=t?J7(r.noResultsFoundForValue,{value:`"${t}"`}):r.noResultsFound;return D("div",{key:"esri-search__no_results"},D("div",{class:Te.warningMenuHeader},r.noResults),D("div",{class:Te.warningMenuText},n))}renderEmptySearchWarning(){const{messages:t}=this;return D("div",{key:"esri-search__empty-search"},D("span",{"aria-hidden":"true",class:Te.noticeIcon}),D("span",{class:Te.noValueText},t.emptyValue))}renderLocateWarning(){const{messages:t}=this;return D("div",{key:"esri-search__locate-error"},D("span",{"aria-hidden":"true",class:Te.noticeIcon}),D("span",{class:Te.noValueText},t.locateError))}renderWarning(){var i;const{displayedSearchTerm:t,_locateFailed:r}=this,{viewModel:n}=this;return r?this.renderLocateWarning():(i=n.selectedSuggestion)!=null&&i.location||t?this.renderNoResultsWarning(t):this.renderEmptySearchWarning()}_resetActiveMenuItemIndex(){this._activeMenuItemIndex=-1}_buildId(t,r){return`${this.id}-${t}${r===void 0?"":`-${r}`}`}_watchSourceChanges(){const{viewModel:{allSources:t}}=this,r="sources";this.removeHandles(r),t.forEach(n=>this.addHandles(Ee(()=>n.name,()=>this.scheduleRender()),r))}_handleSourcesMenuToggleFocus(){this.activeMenu!=="source"&&this._clearActiveMenu()}_handleSourcesMenuToggleClick(){var r;const t=this.activeMenu==="source";this.activeMenu=t?"none":"source",this.renderNow(),this.activeMenu==="source"&&((r=this._sourceListNode)==null||r.focus())}_handleClearButtonClick(){this.viewModel.clear(),this._focus()}_handleSearchButtonClick(){this.search()}_handleSuggestionClick(t){const r=bj(t.currentTarget);r&&(this._focus(),this.search(r))}_handleUseCurrentLocationClick(){this._useCurrentLocation()}_useCurrentLocation(){this._focus("none"),this._cancelSuggest(),this._cancelSearch();const t=new AbortController,{signal:r}=t;this._searchController=t,(async()=>{try{const n=await this.viewModel.searchNearby({signal:r});this.activeMenu=n!=null&&n.numResults?"none":"warning"}catch{this._locateFailed=!0,this.activeMenu="warning"}finally{this._searchController=null}})()}_handleSourceClick(t){this._setSourceFromMenuItem(t.currentTarget)}_setSourceFromMenuItem(t){var n;if(!t)return;const r=DEe(t);r!=null&&(this.viewModel.activeSourceIndex=r,this._clearActiveMenu(),(n=this._sourceMenuButtonNode)==null||n.focus())}_cancelSuggest(){this._suggestController=Kh(this._suggestController)}_cancelSearch(){this._searchController=Kh(this._searchController),this._locateFailed=!1}_handleInputKeyup(t){var s;const r=s0(t);if(t.ctrlKey||t.metaKey||r==="Copy"||r==="ArrowLeft"||r==="ArrowRight"||r==="Shift")return;if(r==="Tab"||r==="Escape"||t.shiftKey&&r==="Tab")return this._cancelSuggest(),void(r==="Escape"&&this._clearActiveMenu());const n=r==="Home"||r==="End"||r==="ArrowUp"||r==="ArrowDown";if(r==="Enter"&&this._activeMenuItemIndex<0)return void this._cancelSuggest();const i=(s=this._suggestionListNode)==null?void 0:s.getElementsByTagName("li");if(i!=null&&i.length){if(this.activeMenu!=="suggestion"&&this._openSuggestionMenu(),n)return t.preventDefault(),this._cancelSuggest(),void this._handleItemNavigation(r,i,this._suggestionListNode);const o=i[this._activeMenuItemIndex];if(r==="Enter"&&o){const a=bj(o);return void(a?(this._focus(),this.search(a)):FEe(o)&&this._useCurrentLocation())}}this.viewModel.searchTerm&&this.suggest()}_handleItemNavigation(t,r,n){const i=this._activeMenuItemIndex;t==="Home"&&(this._activeMenuItemIndex=0),t==="End"&&(this._activeMenuItemIndex=r.length-1),t==="ArrowUp"&&(this._activeMenuItemIndex=this._activeMenuItemIndex<=0?r.length-1:this._activeMenuItemIndex-1),t==="ArrowDown"&&(this._activeMenuItemIndex=this._activeMenuItemIndex===r.length-1?0:this._activeMenuItemIndex+1),i!==this._activeMenuItemIndex&&n&&yye(r[this._activeMenuItemIndex],n)}_scrollToTopSuggestion(){this._suggestionListNode&&(this._suggestionListNode.scrollTop=0)}_openSuggestionMenu(){this.activeMenu="suggestion"}_handleInputPaste(t){const r=t.target;this.viewModel.searchTerm!==r.value&&(this.viewModel.searchTerm=r.value),this.viewModel.searchTerm&&this.suggest()}_handleSourceMenuKeydown(t){var n;const r=s0(t);if(QG(r)){t.preventDefault();const i=(n=this._sourceListNode)==null?void 0:n.getElementsByTagName("li"),s=i==null?void 0:i[this._activeMenuItemIndex];this._setSourceFromMenuItem(s)}else r!=="ArrowUp"&&r!=="ArrowDown"&&r!=="End"&&r!=="Home"||t.preventDefault()}_handleSourceMenuKeyup(t){var s,o,a;const r=s0(t),n=r==="ArrowUp"||r==="ArrowDown"||r==="End"||r==="Home";if(n&&t.preventDefault(),r==="Escape")return this._clearActiveMenu(),void((s=this._sourceMenuButtonNode)==null?void 0:s.focus());const i=(o=this._sourceListNode)==null?void 0:o.getElementsByTagName("li");return i&&i.length!==0&&n?(this.activeMenu!=="source"&&(this.activeMenu="source"),void this._handleItemNavigation(r,i,(a=this._sourceListNode)==null?void 0:a.parentElement)):void 0}_focus(t){this.focus(),t&&(this.activeMenu=t)}_formSubmit(t){t.preventDefault(),this._activeMenuItemIndex===-1&&this.search()}_getSourceName(t){const{messages:r}=this,n=this.viewModel,{allSources:i}=n,s=i.at(t);return t===Uf.ALL_INDEX?r.all:s&&s.name||r.untitledSource}_getSuggestResultHTML(t,r){return t?LEe.test(t)?t:NEe(t,r):this.messages.untitledResult}_renderSearchResultsContent(){return this._searchResultRenderer.showMoreResultsOpen=!1,this._searchResultRenderer.viewModel=this.viewModel,this._searchResultRenderer}};function bj(e){return e==null?void 0:e["data-suggestion"]}function DEe(e){return e==null?void 0:e["data-source-index"]}function FEe(e){return!!(e!=null&&e["data-current-location-item"])}u([d()],Je.prototype,"_activeMenuItemIndex",void 0),u([d()],Je.prototype,"displayedSearchTerm",null),u([d({readOnly:!0})],Je.prototype,"inputId",null),u([d({readOnly:!0})],Je.prototype,"suggestionsMenuId",null),u([d({readOnly:!0})],Je.prototype,"sourceMenuId",null),u([d({readOnly:!0})],Je.prototype,"sourceMenuButtonId",null),u([d()],Je.prototype,"activeMenu",void 0),u([d({readOnly:!0})],Je.prototype,"activeSource",null),u([d()],Je.prototype,"activeSourceIndex",null),u([d()],Je.prototype,"allPlaceholder",null),u([d({readOnly:!0})],Je.prototype,"allSources",null),u([d()],Je.prototype,"autoNavigate",null),u([d()],Je.prototype,"autoSelect",null),u([d({readOnly:!0})],Je.prototype,"defaultSources",null),u([d()],Je.prototype,"disabled",void 0),u([d()],Je.prototype,"goToOverride",null),u([d()],Je.prototype,"iconClass",void 0),u([d()],Je.prototype,"icon",void 0),u([d()],Je.prototype,"includeDefaultSources",null),u([d()],Je.prototype,"label",null),u([d()],Je.prototype,"locationEnabled",null),u([d()],Je.prototype,"maxResults",null),u([d()],Je.prototype,"maxSuggestions",null),u([d(),Vs("esri/widgets/Search/t9n/Search")],Je.prototype,"messages",void 0),u([d(),Vs("esri/t9n/common")],Je.prototype,"messagesCommon",void 0),u([d()],Je.prototype,"minSuggestCharacters",null),u([d()],Je.prototype,"popupEnabled",null),u([d()],Je.prototype,"popupTemplate",null),u([d()],Je.prototype,"portal",null),u([d()],Je.prototype,"resultGraphic",null),u([d()],Je.prototype,"resultGraphicEnabled",null),u([d({readOnly:!0})],Je.prototype,"results",null),u([d()],Je.prototype,"searchAllEnabled",null),u([d()],Je.prototype,"searchTerm",null),u([d({readOnly:!0})],Je.prototype,"selectedResult",null),u([d()],Je.prototype,"sources",null),u([d({readOnly:!0})],Je.prototype,"suggestions",null),u([d()],Je.prototype,"suggestionsEnabled",null),u([d()],Je.prototype,"view",null),u([PZ(["search-complete","search-clear","search-start","select-result","suggest-start","suggest-complete"]),d({type:Uf})],Je.prototype,"viewModel",void 0),Je=u([E("esri.widgets.Search")],Je);const jEe=Je;let xl=class extends A2(Ua.EventedAccessor){constructor(t){super(t),this._initialViewpoint=null,this._goingHomeController=null,this.go=this.go.bind(this)}destroy(){this._cancelGo(),this.view=null}get state(){return this.get("view.ready")?this._goingHomeController?"going-home":"ready":"disabled"}set view(t){this._initialViewpoint=null,this._set("view",t),t&&t.when().then(()=>{this.view===t&&(this._initialViewpoint=t.viewpoint.clone(),this.notifyChange("viewpoint"))})}get viewpoint(){return this._get("viewpoint")||this._initialViewpoint}set viewpoint(t){this._set("viewpoint",t)}async go(){var r;if(!this.get("view.ready"))throw new N("home:disabled-state","Cannot go when disabled.");this._cancelGo(),this.emit("go");const t=new AbortController;this._goingHomeController=t;try{await((r=this.view)==null?void 0:r.when()),await this.callGoTo({target:this.viewpoint,options:{signal:t.signal}})}catch{}this._goingHomeController=null}cancelGo(){this._cancelGo()}_cancelGo(){const{_goingHomeController:t}=this;t&&t.abort(),this._goingHomeController=null}};u([d()],xl.prototype,"_goingHomeController",void 0),u([d({readOnly:!0})],xl.prototype,"state",null),u([d()],xl.prototype,"view",null),u([d({type:Do})],xl.prototype,"viewpoint",null),u([d()],xl.prototype,"go",null),u([d()],xl.prototype,"cancelGo",null),xl=u([E("esri.widgets.Home.HomeViewModel")],xl);const OZ=xl,jp={base:"esri-home esri-widget--button esri-widget",esriIcon:"esri-icon",loadingIcon:"esri-icon-loading-indicator",rotatingIcon:"esri-rotating",widgetIcon:"esri-icon-home",disabled:"esri-disabled"};let fi=class extends Wa{constructor(t,r){super(t,r),this.iconClass=jp.widgetIcon,this.icon=null,this.messages=null,this.messagesCommon=null,this.uiStrings=void 0,this.viewModel=new OZ}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(t){this.viewModel.goToOverride=t}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}get viewpoint(){return this.viewModel.viewpoint}set viewpoint(t){this.viewModel.viewpoint=t}cancelGo(){this.viewModel.cancelGo()}go(){return this.viewModel.go()}render(){var s;const t=(s=this.viewModel)==null?void 0:s.state,{messagesCommon:r,messages:n}=this,i={[jp.disabled]:t==="disabled"};return D("div",{bind:this,class:this.classes(jp.base,i),role:"button",tabIndex:0,onclick:this._go,onkeydown:this._go,"aria-label":n.widgetLabel,title:t==="going-home"?r.cancel:n.title},this.renderIcon())}renderIcon(){var n;const t=(n=this.viewModel)==null?void 0:n.state,r={[jp.esriIcon]:!0,[jp.loadingIcon]:t==="going-home",[jp.rotatingIcon]:t==="going-home"};return this.iconClass!=null&&(r[this.iconClass]=t!=="going-home"),D("span",{"aria-hidden":"true",class:this.classes(r)})}_go(){const{viewModel:t}=this;t.state==="going-home"?t.cancelGo():t.go()}};u([d()],fi.prototype,"goToOverride",null),u([d()],fi.prototype,"iconClass",void 0),u([d()],fi.prototype,"icon",void 0),u([d()],fi.prototype,"label",null),u([d(),Vs("esri/widgets/Home/t9n/Home")],fi.prototype,"messages",void 0),u([d(),Vs("esri/t9n/common")],fi.prototype,"messagesCommon",void 0),u([d()],fi.prototype,"uiStrings",void 0),u([d()],fi.prototype,"view",null),u([d({type:OZ}),PZ("go")],fi.prototype,"viewModel",void 0),u([d()],fi.prototype,"viewpoint",null),u([vi()],fi.prototype,"_go",null),fi=u([E("esri.widgets.Home")],fi);const VEe=fi;function zEe(e){var i,s;const t="metric";if(e==null)return t;const r=e.map,n=(r&&"portalItem"in r?(i=r.portalItem)==null?void 0:i.portal:null)??hn.getDefault();switch(((s=n.user)==null?void 0:s.units)??n.units){case t:return t;case"english":return"imperial"}return ase(e.spatialReference)??t}const UEe={readOnly:!0,get(){return zEe(this.view)}},qn="esri-scale-bar",jt={base:`${qn} esri-widget`,labelContainer:`${qn}__label-container`,rulerLabelContainer:`${qn}__label-container--ruler`,lineLabelContainer:`${qn}__label-container--line`,topLabelContainer:`${qn}__label-container--top`,bottomLabelContainer:`${qn}__label-container--bottom`,label:`${qn}__label`,line:`${qn}__line`,topLine:`${qn}__line--top`,bottomLine:`${qn}__line--bottom`,ruler:`${qn}__ruler`,rulerBlock:`${qn}__ruler-block`,barContainer:`${qn}__bar-container`,rulerBarContainer:`${qn}__bar-container--ruler`,lineBarContainer:`${qn}__bar-container--line`,disabled:"esri-disabled"};function RZ(e){if(!e)return null;if(UO(e)&&e.wkid){const t=Ife[e.wkid];if(t)return t}if(e.wkt){const t=GEe(e.wkt);if(t)return t}return null}function GEe(e){const t=Efe.exec(e);if(!t||t.length!==2)return null;const r=t[1].split(",");if(!r||r.length<3)return null;const n=parseFloat(r[1]),i=parseFloat(r[2]);return isNaN(n)||isNaN(i)?null:{a:n,f:i===0?0:1/i}}function BEe(e){const t=RZ(e??Ce.WGS84);if(qEe(t))return t;const r=t.a*(1-t.f);return Object.assign(t,{b:r,eSq:1-(r/t.a)**2,radius:(2*t.a+r)/3,densificationRatio:1e4/((2*t.a+r)/3)})}function qEe(e){return e!=null&&"b"in e&&"eSq"in e&&"radius"in e}function AZ(e){return RZ(e)!==null}function WEe(e,t="meters"){if(!e)throw new N("geodesic-lengths:invalid-geometries","the input geometries type is not supported");if(e.some(n=>!AZ(n.spatialReference)))throw new N("geodesic-lengths:invalid-spatial-reference","the input geometries spatial reference is not supported");const r=[];for(let n=0;n<e.length;n++){const i=e[n],{spatialReference:s}=i,o=i.type==="polyline"?i.paths:i.rings;let a=0;for(let l=0;l<o.length;l++){const c=o[l];let h=0;for(let f=1;f<c.length;f++){const m=c[f-1][0],y=c[f][0],g=c[f-1][1],v=c[f][1];if(g!==v||m!==y){const w=new HEe;ZEe(w,[m,g],[y,v],s),h+=w.distance}}a+=h}a=Wr(a,"meters",t),r.push(a)}return r}class HEe{constructor(t=0,r=void 0,n=void 0){this.distance=t,this.azimuth=r,this.reverseAzimuth=n}}function ZEe(e,t,r,n){const i=t[0]*$d,s=t[1]*$d,o=r[0]*$d,a=r[1]*$d,{a:l,b:c,f:h,radius:f}=BEe(n),m=o-i,y=Math.atan((1-h)*Math.tan(s)),g=Math.atan((1-h)*Math.tan(a)),v=Math.sin(y),w=Math.cos(y),b=Math.sin(g),S=Math.cos(g);let _,x,T,I,C,O,W,z,ne,K,xe=1e3,le=m;do{if(W=Math.sin(le),z=Math.cos(le),T=Math.sqrt(S*W*(S*W)+(w*b-v*S*z)*(w*b-v*S*z)),T===0)return e.distance=0,e.azimuth=void 0,e.reverseAzimuth=void 0,e;C=v*b+w*S*z,O=Math.atan2(T,C),ne=w*S*W/T,x=1-ne*ne,I=C-2*v*b/x,isNaN(I)&&(I=0),K=h/16*x*(4+h*(4-3*x)),_=le,le=m+(1-K)*h*ne*(O+K*T*(I+K*C*(2*I*I-1)))}while(Math.abs(le-_)>1e-12&&--xe>0);if(xe===0){const Ne=f,je=Math.acos(Math.sin(s)*Math.sin(a)+Math.cos(s)*Math.cos(a)*Math.cos(o-i))*Ne,Nt=o-i,pt=Math.sin(Nt)*Math.cos(a),ut=Math.cos(s)*Math.sin(a)-Math.sin(s)*Math.cos(a)*Math.cos(Nt),fn=Math.atan2(pt,ut);return e.azimuth=fn/$d,e.distance=je,e.reverseAzimuth=void 0,e}const B=x*(l*l-c*c)/(c*c),it=B/1024*(256+B*(B*(74-47*B)-128)),Ge=c*(1+B/16384*(4096+B*(B*(320-175*B)-768)))*(O-it*T*(I+it/4*(C*(2*I*I-1)-it/6*I*(4*T*T-3)*(4*I*I-3)))),H=Math.atan2(S*Math.sin(le),w*b-v*S*Math.cos(le)),oe=Math.atan2(w*Math.sin(le),w*b*Math.cos(le)-v*S);return e.azimuth=H/$d,e.distance=Ge,e.reverseAzimuth=oe/$d,e}function JEe(e){return e>.5?{min:.5,max:1}:e>.2?{min:.2,max:.5}:{min:.1,max:.2}}function QEe(e,t){switch(t){case"metric":return e>1e3?{distance:Wr(e,"meters","kilometers"),unit:"kilometer"}:e>1?{distance:e,unit:"meter"}:e>.01?{distance:Wr(e,"meters","centimeters"),unit:"centimeter"}:{distance:Wr(e,"meters","millimeters"),unit:"millimeter"};case"imperial":case"non-metric":return e>1609.344?{distance:Wr(e,"meters","miles"),unit:"mile"}:e>.3048?{distance:Wr(e,"meters","feet"),unit:"foot"}:{distance:Wr(e,"meters","inches"),unit:"inch"}}}function YEe(e){const{isWebMercator:t,wkt:r}=e;return t||((r==null?void 0:r.includes("WGS_1984_Web_Mercator"))??!1)}function KEe(e){const{wkid:t,wkt:r}=e;if(t!=null&&$[t]!=null)return $.values[$[t]];if(r!=null){const n=r.lastIndexOf(",")+1,i=r.lastIndexOf("]]");return parseFloat(r.substring(n,i))}return 1}function Sj({state:{paddedViewState:e},spatialReference:t,width:r}){return t.isWrappable&&e.worldScreenWidth<r}function xj(e,t){const{x:r,y:n}=e?Tc(t,!0):t;return[r,n]}let wf=class extends $e{constructor(t){super(t),this.scaleComputedFrom=Kr(),this.view=null}get state(){var t,r;return(t=this.view)!=null&&t.ready&&((r=this.view)==null?void 0:r.type)==="2d"?"ready":"disabled"}getScaleBarProperties(t,r){if(this.state==="disabled"||isNaN(t)||!r||!this.view)return null;const n=this._getDistanceInMeters();return n==null?null:this._getScaleBarProps(t,n,r)}_getDistanceInMeters(){const{state:t,spatialReference:r}=this.view;if(!Yr(r))return null;const{isGeographic:n}=r,i=YEe(r);if(!n&&!i)return t.extent.width*KEe(r);const[s,o]=this._getScaleMeasuringPoints(),a=i||n&&!AZ(r)?Ce.WGS84:r,l=new Cs({paths:[[xj(i,s),xj(i,o)]],spatialReference:a}),c=SH(l,10);let h;try{[h]=WEe([c],"meters")}catch{return null}return h}_getScaleMeasuringPoints(){const t=this.view,{width:r,height:n,position:i,spatialReference:s}=t;if(Sj(t)){const c=Ls(s),{valid:h}=c;return[new be(h[0],0,s),new be(h[1],0,s)]}let o=this.scaleComputedFrom.y-i[1];o>n?o=n:o<0&&(o=0);const a=Kr(0,o),l=Kr(r,o);return[t.toMap(a),t.toMap(l)]}_getScaleBarProps(t,r,n){const i=this.view,s=t*r/(Sj(i)?i.state.paddedViewState.worldScreenWidth:i.width);if(s<.001)return null;const o=QEe(s,n),{distance:a,unit:l}=o;let c=a,h=0;for(;c>=1;)c/=10,h++;const{min:f,max:m}=JEe(c),y=m/c>=c/f?f:m;return{length:t*(y/c),value:10**h*y,unit:l}}};u([d()],wf.prototype,"scaleComputedFrom",void 0),u([d({readOnly:!0})],wf.prototype,"state",null),u([d()],wf.prototype,"view",void 0),wf=u([E("esri.widgets.Scalebar.ScaleBarViewModel")],wf);const XEe=wf;function $j(e,t){return Om(e,{style:"unit",unit:t,unitDisplay:"short"})}const LZ="esri.widgets.ScaleBar",eMe=Z.getLogger(LZ);let xa=class extends Wa{constructor(t,r){super(t,r),this.messages=null,this.style="line",this.viewModel=new XEe}initialize(){this.addHandles(Ee(()=>{const{view:t}=this;return[t==null?void 0:t.stationary,t==null?void 0:t.center,t==null?void 0:t.scale,t==null?void 0:t.zoom]},([t])=>{t&&this.scheduleRender()}))}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}get unit(){return this._defaultUnit}set unit(t){t==="non-metric"&&lz(eMe,"unit",{replacement:"Please use 'imperial' instead of 'non-metric'.",see:"https://developers.arcgis.com/javascript/latest/api-reference/esri-widgets-ScaleBar.html#unit",version:"4.27",warnOnce:!0}),this._overrideIfSome("unit",t)}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}render(){const t=this.viewModel.state==="disabled",r={[jt.disabled]:t};let n,i;if(!t){const{unit:s,style:o}=this,a=s==="metric"||s==="dual",l=100,c=s==="dual"?"line":o;if(s==="imperial"||s==="non-metric"||s==="dual"){const h=this.viewModel.getScaleBarProperties(l,"imperial");h&&(i=c==="ruler"?this._renderRuler(h):this._renderLine(h,"bottom"))}if(a){const h=this.viewModel.getScaleBarProperties(l,"metric");h&&(n=c==="ruler"?this._renderRuler(h):this._renderLine(h,"top"))}}return D("div",{afterCreate:this._handleRootCreateOrUpdate,afterUpdate:this._handleRootCreateOrUpdate,bind:this,class:this.classes(jt.base,r)},n,i)}_renderRuler(t){const{length:r,unit:n,value:i}=t,s=Math.round(r),o=$j(i,n);return D("div",{class:this.classes(jt.barContainer,jt.rulerBarContainer),key:jt.rulerBarContainer},D("div",{class:jt.ruler,styles:{width:`${s}px`}},D("div",{class:jt.rulerBlock}),D("div",{class:jt.rulerBlock}),D("div",{class:jt.rulerBlock}),D("div",{class:jt.rulerBlock})),D("div",{class:this.classes(jt.labelContainer,jt.rulerLabelContainer)},D("div",{class:jt.label},"0"),D("div",{class:jt.label},o)))}_renderLine(t,r){const{length:n,unit:i,value:s}=t,o=Math.round(n),a=$j(s,i),l={[jt.topLabelContainer]:r==="top",[jt.bottomLabelContainer]:r==="bottom"},c=D("div",{class:this.classes(jt.labelContainer,jt.lineLabelContainer,l),key:jt.labelContainer},D("div",{class:jt.label},a)),h={[jt.topLine]:r==="top",[jt.bottomLine]:r==="bottom"},f=D("div",{class:this.classes(jt.line,h),key:jt.line,styles:{width:`${o}px`}});return D("div",{class:this.classes(jt.barContainer,jt.lineBarContainer),key:jt.lineBarContainer},[f,c])}_handleRootCreateOrUpdate(t){if(!this.viewModel)return;const{scaleComputedFrom:r}=this.viewModel,n=t.getBoundingClientRect(),i=n.left+window.pageXOffset,s=n.top+window.pageYOffset,o=Kr(i,s);(o.x!==r.x||o.y!==r.y)&&(this.viewModel.scaleComputedFrom=o)}};u([d(UEe)],xa.prototype,"_defaultUnit",void 0),u([d()],xa.prototype,"label",null),u([d(),Vs("esri/widgets/ScaleBar/t9n/ScaleBar")],xa.prototype,"messages",void 0),u([d({type:["ruler","line"]})],xa.prototype,"style",void 0),u([d({type:["metric","imperial","dual","non-metric"]})],xa.prototype,"unit",null),u([d()],xa.prototype,"view",null),u([d()],xa.prototype,"viewModel",void 0),xa=u([E(LZ)],xa);const tMe=xa;let _f=class extends $e{constructor(t){super(t),this.format=null,this.position={coordinate:null,location:null}}get displayCoordinate(){var t,r;return(r=this.format)==null?void 0:r.getDisplayCoordinate((t=this.position)==null?void 0:t.coordinate)}};u([d({readOnly:!0})],_f.prototype,"displayCoordinate",null),u([d()],_f.prototype,"format",void 0),u([d()],_f.prototype,"position",void 0),_f=u([E("esri.widgets.CoordinateConversion.support.Conversion")],_f);const Gf=_f;function rMe(e,t){const r=NZ(t);return[e[0].toFixed(r),e[1].toFixed(r)]}function NZ(e){return e>=500?6:e<500&&e>=50?7:e<50&&e>=5?8:9}function nMe(e,t){const r=e.includes(",")?",":" ",[n,i,s]=e.split(r).map(a=>{const l=a.trim();return l?Number(l):null});if(!vx(n)||!vx(i))return null;const o=new be({x:n,y:i,spatialReference:t||Ce.WGS84});return s&&(o.z=s,o.hasZ=!0),o}function vx(e){return typeof e=="number"&&isFinite(e)}function sP(e){return!!e&&vx(e.x)&&vx(e.y)}function Tj(e,t){if(e.spatialReference.isGeographic&&t){const[r,n]=rMe([e.x,e.y],t);return`${r}, ${n}`}return`${e.x.toFixed(3)}, ${e.y.toFixed(3)}`}const iMe=["dd","dms","ddm","mgrs","usng","utm"];function sMe(e){return iMe.includes(e)}const WT={ar:[".",","],bg:[",",""],bs:[",","."],ca:[",","."],cs:[",",""],da:[",","."],de:[",","."],"de-ch":[".",""],el:[",","."],en:[".",","],"en-au":[".",","],es:[",","."],"es-mx":[".",","],et:[",",""],fi:[",",""],fr:[",",""],"fr-ch":[",",""],he:[".",","],hi:[".",",","#,##,##0.###"],hr:[",","."],hu:[",",""],id:[",","."],it:[",","."],"it-ch":[".",""],ja:[".",","],ko:[".",","],lt:[",",""],lv:[",",""],mk:[",","."],nb:[",",""],nl:[",","."],pl:[",",""],pt:[",","."],"pt-pt":[",",""],ro:[",","."],ru:[",",""],sk:[",",""],sl:[",","."],sr:[",","."],sv:[",",""],th:[".",","],tr:[",","."],uk:[",",""],vi:[",","."],zh:[".",","]};function U2(e=ei()){let t=(e=e.toLowerCase())in WT;if(!t){const s=e.split("-");s.length>1&&s[0]in WT&&(e=s[0],t=!0),t||(e="en")}const[r,n,i="#,##0.###"]=WT[e];return{decimal:r,group:n,pattern:i}}function oMe(e,t){const r=U2((t={...t}).locale);t.customs=r;const n=t.pattern||r.pattern;return isNaN(e)||Math.abs(e)===1/0?null:aMe(e,n,t)}const DZ=/[#0,]*[#0](?:\.0*#*)?/;function aMe(e,t,r){const n=(r=r||{}).customs.group,i=r.customs.decimal,s=t.split(";"),o=s[0];if((t=s[e<0?1:0]||"-"+o).includes("%"))e*=100;else if(t.includes(""))e*=1e3;else{if(t.includes(""))throw new Error("currency notation not supported");if(t.includes("E"))throw new Error("exponential notation not supported")}const a=DZ,l=o.match(a);if(!l)throw new Error("unable to find a number expression in pattern: "+t);return r.fractional===!1&&(r.places=0),t.replace(a,lMe(e,l[0],{decimal:i,group:n,places:r.places,round:r.round}))}function lMe(e,t,r){(r=r||{}).places===!0&&(r.places=0),r.places===1/0&&(r.places=6);const n=t.split("."),i=typeof r.places=="string"&&r.places.indexOf(",");let s=r.places;i?s=r.places.substring(i+1):+s>=0||(s=(n[1]||[]).length),r.round<0||(e=Number(e.toFixed(Number(s))));const o=String(Math.abs(e)).split("."),a=o[1]||"";if(n[1]||r.places){i&&(r.places=r.places.substring(0,i));const g=r.places!==void 0?r.places:n[1]&&n[1].lastIndexOf("0")+1;+g>a.length&&(o[1]=a.padEnd(Number(g),"0")),+s<a.length&&(o[1]=a.substr(0,Number(s)))}else o[1]&&o.pop();const l=n[0].replace(",","");let c=l.indexOf("0");c!==-1&&(c=l.length-c,c>o[0].length&&(o[0]=o[0].padStart(c,"0")),l.includes("#")||(o[0]=o[0].substr(o[0].length-c)));let h,f,m=n[0].lastIndexOf(",");if(m!==-1){h=n[0].length-m-1;const g=n[0].substr(0,m);m=g.lastIndexOf(","),m!==-1&&(f=g.length-m-1)}const y=[];for(let g=o[0];g;){const v=g.length-h;y.push(v>0?g.substr(v):g),g=v>0?g.slice(0,v):"",f&&(h=f,f=void 0)}return o[0]=y.reverse().join(r.group||","),o.join(r.decimal||".")}function uMe(e){const t=U2((e=e||{}).locale),r=e.pattern||t.pattern,n=t.group,i=t.decimal;let s=1;if(r.includes("%"))s/=100;else if(r.includes(""))s/=1e3;else if(r.includes(""))throw new Error("currency notation not supported");const o=r.split(";");return o.length===1&&o.push("-"+o[0]),{regexp:Nv(o,l=>(l="(?:"+wO(l,".")+")").replace(DZ,c=>{const h={signed:!1,separator:e.strict?n:[n,""],fractional:e.fractional,decimal:i,exponent:!1},f=c.split(".");let m=e.places;f.length===1&&s!==1&&(f[1]="###"),f.length===1||m===0?h.fractional=!1:(m===void 0&&(m=e.pattern?f[1].lastIndexOf("0")+1:1/0),m&&e.fractional==null&&(h.fractional=!0),!e.places&&+m<f[1].length&&(m+=","+f[1].length),h.places=m);const y=f[0].split(",");return y.length>1&&(h.groupSize=y.pop().length,y.length>1&&(h.groupSize2=y.pop().length)),"("+dMe(h)+")"}),!0).replaceAll(/[\xa0 ]/g,"[\\s\\xa0]"),group:n,decimal:i,factor:s}}function cMe(e,t){const r=uMe(t),n=new RegExp("^"+r.regexp+"$").exec(e);if(!n)return NaN;let i=n[1];if(!n[1]){if(!n[2])return NaN;i=n[2],r.factor*=-1}return i=i.replaceAll(new RegExp("["+r.group+"\\s\\xa0]","g"),"").replace(r.decimal,"."),Number(i)*r.factor}function dMe(e){"places"in(e=e||{})||(e.places=1/0),typeof e.decimal!="string"&&(e.decimal="."),"fractional"in e&&!/^0/.test(String(e.places))||(e.fractional=[!0,!1]),"exponent"in e||(e.exponent=[!0,!1]),"eSigned"in e||(e.eSigned=[!0,!1]);const t=Ej(e),r=Nv(e.fractional,i=>{let s="";return i&&e.places!==0&&(s="\\"+e.decimal,e.places===1/0?s="(?:"+s+"\\d+)?":s+="\\d{"+e.places+"}"),s},!0);let n=t+r;return r&&(n="(?:(?:"+n+")|(?:"+r+"))"),n+Nv(e.exponent,i=>i?"([eE]"+Ej({signed:e.eSigned})+")":"")}function Ej(e){return"signed"in(e=e||{})||(e.signed=[!0,!1]),"separator"in e?"groupSize"in e||(e.groupSize=3):e.separator="",Nv(e.signed,t=>t?"[-+]":"",!0)+Nv(e.separator,t=>{if(!t)return"(?:\\d+)";(t=wO(t))===" "?t="\\s":t===""&&(t="\\s\\xa0");const r=e.groupSize,n=e.groupSize2;if(n){const i="(?:0|[1-9]\\d{0,"+(n-1)+"}(?:["+t+"]\\d{"+n+"})*["+t+"]\\d{"+r+"})";return r-n>0?"(?:"+i+"|(?:0|[1-9]\\d{0,"+(r-1)+"}))":i}return"(?:0|[1-9]\\d{0,"+(r-1)+"}(?:["+t+"]\\d{"+r+"})*)"},!0)}const Nv=(e,t,r)=>{if(!(e instanceof Array))return t(e);const n=[];for(let i=0;i<e.length;i++)n.push(t(e[i]));return hMe(n.join("|"),!!r)},hMe=(e,t)=>"("+(t?"?:":"")+e+")";function pMe(e,t){const r=[];e=(e=(e=e.replaceAll(/[\u00B0\u00BA]/g,"^")).replaceAll("","'")).replaceAll("",'"');const n=gd(t);return Vh.dmsToGeog(n,1,[e],r)?new be(r[0][0],r[0][1],t||Ce.WGS84):null}function fMe(e,t,r){const n=[],i=FZ(r);if(i===-1)return console.warn(`invalid conversionMode: ${r}`),null;const s=gd(t);return gi.mgrsToGeogExtended(s,1,[e],i,n)?new be(n[0][0],n[0][1],t||Ce.WGS84):null}function mMe(e,t){const r=[];!t&&/\(.+27/.test(e)&&(t=Ce.GCS_NAD_1927);const n=gd(t);return xv.usngToGeog(n,1,[e],r)?new be(r[0][0],r[0][1],t||Ce.WGS84):null}function yMe(e,t,r){const n=[],i=jZ(r);if(i===-1)return console.warn(`invalid conversionMode: ${r}`),null;const s=gd(t);return eu.utmToGeog(s,1,[e],i,n)?new be(n[0][0],n[0][1],t||Ce.WGS84):null}function gMe(e,t,r=0){const n=[[e.x,e.y]],i=[],s=gd(e.spatialReference);let o=0;switch(t){case"dd":o=Vh.geogToDd(s,1,n,r,i);break;case"ddm":o=Vh.geogToDdm(s,1,n,r,i);break;case"dms":o=Vh.geogToDms(s,1,n,r,i);break;default:return console.warn(`invalid format: ${t}`),null}return o?i[0]:null}function vMe(e,t,r=0,n=!1){const i=[[e.x,e.y]],s=[],o=gd(e.spatialReference);let a=FZ(t);return a===-1?(console.warn(`invalid conversionMode: ${t}`),null):(n&&(a|=gi.PE_MGRS_ADD_SPACES),gi.geogToMgrsExtended(o,1,i,r,!1,a,s)?s[0]:null)}function wMe(e,t=0,r=!1){const n=[[e.x,e.y]],i=[],s=gd(e.spatialReference);return xv.geogToUsng(s,1,n,t,!1,r,i)?i[0]:null}function _Me(e,t,r=!1){const n=[[e.x,e.y]],i=[],s=gd(e.spatialReference);let o=jZ(t);return o===-1?(console.warn(`invalid conversionMode: ${t}`),null):(r&&(o|=eu.PE_UTM_OPTS_ADD_SPACES),eu.geogToUtm(s,1,n,o,i)?i[0]:null)}function gd(e){let t=null;if(e||(e=Ce.WGS84),e.wkid){if(t=Sv.geogcs(e.wkid),!t)throw new N("coordinate-formatter:invalid-spatial-reference","wkid is not valid")}else{if(!e.wkt)throw new N("coordinate-formatter:invalid-spatial-reference","wkid and wkt are missing");if(t=Sv.fromString(Ut.PE_TYPE_GEOGCS,e.wkt),!t)throw new N("coordinate-formatter:invalid-spatial-reference","wkt is not valid")}return t}function FZ(e){let t=-1;switch(e){case"automatic":t=gi.PE_MGRS_STYLE_AUTO;break;case"new-180-in-zone-01":t=gi.PE_MGRS_STYLE_NEW|gi.PE_MGRS_180_ZONE_1_PLUS;break;case"new-180-in-zone-60":t=gi.PE_MGRS_STYLE_NEW;break;case"old-180-in-zone-01":t=gi.PE_MGRS_STYLE_OLD|gi.PE_MGRS_180_ZONE_1_PLUS;break;case"old-180-in-zone-60":t=gi.PE_MGRS_STYLE_OLD}return t}function jZ(e){let t=-1;switch(e){case"latitude-band-indicators":t=eu.PE_UTM_OPTS_NONE;break;case"north-south-indicators":t=eu.PE_UTM_OPTS_NS}return t}let mi=class extends $e{constructor(e){super(e),this.conversionInfo=null,this.coordinateSegments=null,this.defaultPattern=null,this.name=null,this.viewModel=null}get currentPattern(){return this._get("currentPattern")||this._get("defaultPattern")}set currentPattern(e){this._set("currentPattern",e)}get label(){return this.name??""}set label(e){this._overrideIfSome("label",e)}get hasDisplayProperties(){return!(!this.defaultPattern||!this.coordinateSegments)}get spatialReference(){var e;return this.name==="basemap"?this._viewSpatialReference:((e=this.conversionInfo)==null?void 0:e.spatialReference)??Ce.WGS84}set spatialReference(e){this._overrideIfSome("spatialReference",e)}get _viewSpatialReference(){return this.get("viewModel.view.spatialReference")||Ce.WGS84}get _additionalCharactersPattern(){const e=this.get("coordinateSegments");if(!e)return null;const t=e.map(n=>n.alias),r=this.currentPattern.replaceAll(new RegExp(`["nsew${t.join()}]`,"gi"),"").replaceAll(" ","");return new RegExp(`[${r}]`,"g")}get test(){return{additionalCharactersPattern:this._additionalCharactersPattern}}async convert(e){if(!sP(e))throw new N("format:invalid-point","Could not convert invalid point.",{point:e});const t=this.get("conversionInfo.convert");if(t)return Promise.resolve().then(()=>t(e));const r=await this._project(e,this.spatialReference);return{location:r,coordinate:await this._getCoordinate(r)}}getConversionStrategy(){const e=this._viewSpatialReference;return this.get("conversionInfo.convert")||this.get("viewModel.formatterAvailable")||this.name==="xy"&&(e.isWebMercator||e.isWGS84)||this.name==="basemap"?"client":"server"}getDisplayCoordinate(e){if(!e)return null;if(!this.coordinateSegments||!this.currentPattern)return e;let t=this.currentPattern;const r=this._getSegmentMatches(e,!1);for(let n=this.coordinateSegments.length-1;n>=0;n--){const i=this.coordinateSegments[n];t=t.replace(i.alias,r[n])}return t}parseUserInput(e){const{defaultPattern:t,_additionalCharactersPattern:r,coordinateSegments:n}=this;if(!t||!r)return"";let i=t.replace(r,"");e=e.replace(r,"");const s=this._getSegmentMatches(e,!0);if(n)for(let o=n.length-1;o>=0;o--){const a=n[o];i=i.replace(a.alias,s[o])}return i}_getSegmentMatches(e,t){const r=new Array,{coordinateSegments:n}=this;if(!n)return r;for(let i=0;i<n.length;i++){const s=n[i],o=e.match(s.searchPattern);if(!o){r.push("");continue}let a=o[0];if(e=e.replace(a,"").trim(),s.substitution){const l=t?s.substitution.input(a):s.substitution.output(a);l&&(a=`${l}`)}r.push(a)}return r}async reverseConvert(e){var i;const t=this.parseUserInput(e),r=this.get("conversionInfo.reverseConvert");let n;if(r)n=r(t);else if(this.name==="xy"||this.name==="basemap")n=nMe(t,this.spatialReference);else if((i=this.viewModel)!=null&&i.formatterAvailable)switch(this.name){case"dd":case"ddm":case"dms":n=pMe(t,this.spatialReference);break;case"mgrs":{const s="automatic";n=fMe(t,this.spatialReference,s);break}case"utm":{const s="latitude-band-indicators";n=yMe(t,this.spatialReference,s);break}case"usng":n=mMe(t,this.spatialReference);break;default:n=null}if(!n)throw new N("format:invalid-input","Could not parse input into point.",{userInput:e});return this._project(n,this._viewSpatialReference)}async _getCoordinate(e){const t=this.get("viewModel.view.scale");if(!sP(e))throw new N("format:invalid-point","Could not transform invalid point into coordinate.",{point:e});if(this.get("viewModel.formatterAvailable")||this.name==="basemap"||this.name==="xy")switch(this.name){case"dd":case"ddm":case"dms":{const r=NZ(t);return gMe(e,this.name,r)}case"mgrs":return vMe(e,"automatic",5,!1);case"usng":return wMe(e,5,!1);case"utm":return _Me(e,"latitude-band-indicators",!0);default:return Tj(e,t)}return Tj(e,t)}async _project(e,t){var r,n;if(Cr(e.spatialReference,t)||!t)return e;if((r=this.viewModel)!=null&&r.formatterAvailable&&yd())return uu(e,t);if(!((n=this.viewModel)!=null&&n.formatterAvailable)){const i=Kv(e,t);if(i!=null)return i}return null}};u([d()],mi.prototype,"conversionInfo",void 0),u([d()],mi.prototype,"coordinateSegments",void 0),u([d()],mi.prototype,"currentPattern",null),u([d()],mi.prototype,"label",null),u([d()],mi.prototype,"defaultPattern",void 0),u([d({readOnly:!0})],mi.prototype,"hasDisplayProperties",null),u([d()],mi.prototype,"name",void 0),u([d({type:Ce})],mi.prototype,"spatialReference",null),u([d()],mi.prototype,"viewModel",void 0),u([d({readOnly:!0})],mi.prototype,"_viewSpatialReference",null),u([d({readOnly:!0})],mi.prototype,"_additionalCharactersPattern",null),mi=u([E("esri.widgets.CoordinateConversion.support.Format")],mi);const Ou=mi,fh=U2().decimal,Vp={N:"north",S:"south",E:"east",W:"west"},nr="",Zw=new RegExp(`-?\\d+[\\.|\\${fh}]?\\d*`),bMe=/^[\\0]+(?=\d)/;function Mj(e,t){const r=ei()==="ar",n=e.abbreviatedDirections.north,i=e.abbreviatedDirections.south,s=e.abbreviatedDirections.east,o=e.abbreviatedDirections.west,a=U2().decimal,l={[n]:"N",[i]:"S",[s]:"E",[o]:"W"},c=new RegExp(`-?\\d+[\\.|\\${a}]?\\d*`),h=new RegExp(`N|S|${n}|${i}`,"i"),f=new RegExp(`E|W|${s}|${o}`,"i"),m={ddm:`Y${nr} A'${e.abbreviatedDirections.north}, X${nr} B'${e.abbreviatedDirections.east}`,dms:`Y${nr} A' B"${e.abbreviatedDirections.north}, X${nr} C' D"${e.abbreviatedDirections.east}`,dd:`Y${nr}${e.abbreviatedDirections.north}, X${nr}${e.abbreviatedDirections.east}`,xy:`X${nr}, Y${nr}`,basemap:"X, Y"},y={ddm:`${e.abbreviatedDirections.north}${nr}Y 'A ,${e.abbreviatedDirections.east}${nr}X 'B`,dms:`${e.abbreviatedDirections.north}${nr}Y 'A "B ,${e.abbreviatedDirections.east}${nr}X 'C "D`,dd:`${e.abbreviatedDirections.north}${nr}Y ,${e.abbreviatedDirections.east}${nr}X`,xy:`X${nr} ,Y${nr}`,basemap:"X ,Y"},g=b=>b!=null&&Object.keys(m).includes(b),v=new RegExp(`\\d{1,2}[\\.|\\${a}]?\\d*`,"i"),w=new RegExp(`\\d{1,3}[\\.|\\${a}]?\\d*`,"i");t.forEach(b=>{const{name:S}=b;if(S==="dd"?b.coordinateSegments=[{alias:"Y",description:"degrees latitude",searchPattern:v,substitution:{input:_=>Ct(_),output:_=>It(_)}},{alias:e.abbreviatedDirections.north,description:"north/south indicator",searchPattern:h,substitution:{input:_=>l[_],output:_=>e.abbreviatedDirections[Vp[_]]}},{alias:"X",description:"degrees longitude",searchPattern:w,substitution:{input:_=>Ct(_),output:_=>It(_)}},{alias:e.abbreviatedDirections.east,description:"east/west indicator",searchPattern:f,substitution:{input:_=>l[_],output:_=>e.abbreviatedDirections[Vp[_]]}}]:S==="ddm"?b.coordinateSegments=[{alias:"Y",description:"degrees latitude",searchPattern:v,substitution:{input:_=>Ct(_),output:_=>It(_)}},{alias:"A",description:"minutes latitude",searchPattern:v,substitution:{input:_=>Ct(_),output:_=>It(_)}},{alias:e.abbreviatedDirections.north,description:"north/south indicator",searchPattern:h,substitution:{input:_=>l[_],output:_=>e.abbreviatedDirections[Vp[_]]}},{alias:"X",description:"degrees longitude",searchPattern:w,substitution:{input:_=>Ct(_),output:_=>It(_)}},{alias:"B",description:"minutes longitude",searchPattern:v,substitution:{input:_=>Ct(_),output:_=>It(_)}},{alias:e.abbreviatedDirections.east,description:"east/west indicator",searchPattern:f,substitution:{input:_=>l[_],output:_=>e.abbreviatedDirections[Vp[_]]}}]:S==="dms"?b.coordinateSegments=[{alias:"Y",description:"degrees latitude",searchPattern:v,substitution:{input:_=>Ct(_),output:_=>It(_)}},{alias:"A",description:"minutes latitude",searchPattern:v,substitution:{input:_=>Ct(_),output:_=>It(_)}},{alias:"B",description:"seconds latitude",searchPattern:v,substitution:{input:_=>Ct(_),output:_=>It(_)}},{alias:e.abbreviatedDirections.north,description:"north/south indicator",searchPattern:h,substitution:{input:_=>l[_],output:_=>e.abbreviatedDirections[Vp[_]]}},{alias:"X",description:"degrees longitude",searchPattern:w,substitution:{input:_=>Ct(_),output:_=>It(_)}},{alias:"C",description:"minutes longitude",searchPattern:v,substitution:{input:_=>Ct(_),output:_=>It(_)}},{alias:"D",description:"seconds longitude",searchPattern:v,substitution:{input:_=>Ct(_),output:_=>It(_)}},{alias:e.abbreviatedDirections.east,description:"east/west indicator",searchPattern:f,substitution:{input:_=>l[_],output:_=>e.abbreviatedDirections[Vp[_]]}}]:(b.name==="xy"||b.name==="basemap")&&(b.coordinateSegments=[{alias:"X",description:"easting",searchPattern:c,substitution:{input:_=>Ct(_),output:_=>It(_)}},{alias:"Y",description:"northing",searchPattern:c,substitution:{input:_=>Ct(_),output:_=>It(_)}}]),g(S)){const _=r?y[S]:m[S];b.defaultPattern=_,b.currentPattern=_}})}function SMe(){const e=new RegExp("N|S","i"),t=new RegExp("E|W","i");return[new Ou({name:"basemap",coordinateSegments:[{alias:"X",description:"easting",searchPattern:Zw,substitution:{input:r=>Ct(r),output:r=>It(r)}},{alias:"Y",description:"northing",searchPattern:Zw,substitution:{input:r=>Ct(r),output:r=>It(r)}}],defaultPattern:"X, Y",viewModel:null}),new Ou({name:"dd",coordinateSegments:[{alias:"Y",description:"degrees latitude",searchPattern:new RegExp(`\\d{1,2}[\\.|\\${fh}]?\\d*(?=\\D*?[N|S])`,"i"),substitution:{input:r=>Ct(r),output:r=>It(r)}},{alias:"N",description:"north/south indicator",searchPattern:e},{alias:"X",description:"degrees longitude",searchPattern:new RegExp(`\\d{1,3}[\\.|\\${fh}]?\\d*(?=\\D*?[E|W|])`,"i"),substitution:{input:r=>Ct(r),output:r=>It(r)}},{alias:"E",description:"east/west indicator",searchPattern:t}],defaultPattern:`Y${nr}N, X${nr}E`,viewModel:null}),new Ou({name:"ddm",coordinateSegments:[{alias:"Y",description:"degrees latitude",searchPattern:new RegExp("\\d{1,2}(?=.*?\\s+.*?[N|S])","i"),substitution:{input:r=>Ct(r),output:r=>It(r)}},{alias:"A",description:"minutes latitude",searchPattern:new RegExp(`\\d{1,2}[\\.\\${fh}]?\\d*(?=.*?[N|S])`,"i"),substitution:{input:r=>Ct(r),output:r=>It(r)}},{alias:"N",description:"north/south indicator",searchPattern:e},{alias:"X",description:"degrees longitude",searchPattern:new RegExp("\\d{1,3}(?=\\D*?\\s+.*?[E|W])","i"),substitution:{input:r=>Ct(r),output:r=>It(r)}},{alias:"B",description:"minutes longitude",searchPattern:new RegExp(`\\d{1,2}[\\.|\\|${fh}]?\\d*(?=.*?[E|W])`,"i"),substitution:{input:r=>Ct(r),output:r=>It(r)}},{alias:"E",description:"east/west indicator",searchPattern:t}],defaultPattern:`Y${nr} A'N, X${nr} B'E`,viewModel:null}),new Ou({name:"dms",coordinateSegments:[{alias:"Y",description:"degrees latitude",searchPattern:new RegExp("\\d{1,2}(?=.*?\\s+.*?[N|S])","i"),substitution:{input:r=>Ct(r),output:r=>It(r)}},{alias:"A",description:"minutes latitude",searchPattern:new RegExp("\\d{1,2}(?=.*?[N|S])","i"),substitution:{input:r=>Ct(r),output:r=>It(r)}},{alias:"B",description:"seconds latitude",searchPattern:new RegExp(`\\d{1,2}[\\.|\\${fh}]?\\d*(?=.*?[N|S])`,"i"),substitution:{input:r=>Ct(r),output:r=>It(r)}},{alias:"N",description:"north/south indicator",searchPattern:e},{alias:"X",description:"degrees longitude",searchPattern:new RegExp("\\d{1,3}(?=.*?\\s+.*?[E|W])","i"),substitution:{input:r=>Ct(r),output:r=>It(r)}},{alias:"C",description:"minutes longitude",searchPattern:new RegExp("\\d{1,2}(?=.*?[E|W])","i"),substitution:{input:r=>Ct(r),output:r=>It(r)}},{alias:"D",description:"seconds longitude",searchPattern:new RegExp(`\\d{1,2}[\\.|\\${fh}]?\\d*(?=.*?[E|W])`,"i"),substitution:{input:r=>Ct(r),output:r=>It(r)}},{alias:"E",description:"east/west indicator",searchPattern:t}],defaultPattern:`Y${nr} A' B"N, X${nr} C' D"E`,viewModel:null}),new Ou({name:"xy",coordinateSegments:[{alias:"X",description:"longitude",searchPattern:Zw,substitution:{input:r=>Ct(r),output:r=>It(r)}},{alias:"Y",description:"latitude",searchPattern:Zw,substitution:{input:r=>Ct(r),output:r=>It(r)}}],defaultPattern:`X${nr}, Y${nr}`,viewModel:null}),new Ou({name:"mgrs",coordinateSegments:[{alias:"Z",description:"grid zone",searchPattern:/\d{1,2}\w|[abyz]/i},{alias:"S",description:"grid square",searchPattern:/\w{2}/},{alias:"X",description:"easting",searchPattern:/^\d{5}(?=.?\d{5}$)|^\d{4}(?=.?\d{4}$)|^\d{3}(?=.?\d{3}$)|^\d{2}(?=.?\d{2}$)|^\d(?=.?\d$)/},{alias:"Y",description:"northing",searchPattern:/^\d{1,5}/}],defaultPattern:"Z S X Y",viewModel:null}),new Ou({name:"usng",coordinateSegments:[{alias:"Z",description:"grid zone",searchPattern:/\d{1,2}\w|[abyz]/i},{alias:"S",description:"grid square",searchPattern:/\w{2}/},{alias:"X",description:"easting",searchPattern:/^\d{5}(?=.?\d{5}$)|^\d{4}(?=.?\d{4}$)|^\d{3}(?=.?\d{3}$)|^\d{2}(?=.?\d{2}$)|^\d(?=.?\d$)/},{alias:"Y",description:"northing",searchPattern:/^\d{1,5}/}],defaultPattern:"Z S X Y",viewModel:null}),new Ou({name:"utm",coordinateSegments:[{alias:"Z",description:"zone number",searchPattern:/\d{1,2}|[abyz]/i},{alias:"B",description:"latitude band",searchPattern:/^\D/},{alias:"X",description:"easting",searchPattern:/\d{1,7}(?=\s*\d{7}$)/},{alias:"Y",description:"northing",searchPattern:/\d{1,7}/}],defaultPattern:"ZB X Y",viewModel:null})]}function It(e){const t=e.match(bMe),r=t?t[0]:"",n=e.includes(".")?e.split(".")[1].length:0;return r+oMe(Number(e),{pattern:"###0.###",places:n,round:-1})}function Ct(e){return cMe(e)}const Jw={default:"default",crosshair:"crosshair"},xMe=new be([0,0,500]),$Me="xy",TMe=["mgrs","utm","usng","dd","dms","ddm"],Ij="esri__coordinateConversionWidgetState",la={conversions:"conversions",formats:"formats",view:"view",viewChange:"view-change"},EMe="esri/images/search/search-symbol-32.png";let vn=class extends A2(Ua.EventedAccessor){constructor(t){super(t),this._conversionPromise=null,this._locationGraphic=null,this._pointerCount=0,this.conversions=new Le,this.formats=new Le,this.formatterAvailable=!1,this.messages=null,this.filteredFormats=new Le,this.locationSymbol=new ry({url:ct(EMe),width:24,height:24}),this.storageEnabled=!0,this.storageType="session",this.view=null,this._saveWidgetState=this._saveWidgetState.bind(this),this._handleFormatChange=this._handleFormatChange.bind(this),this._handleConversionChange=this._handleConversionChange.bind(this),this._handleViewChange=this._handleViewChange.bind(this),this._onClick=this._onClick.bind(this),this._onPointerMove=this._onPointerMove.bind(this),this._onPointerDown=this._onPointerDown.bind(this),this._onPointerUp=this._onPointerUp.bind(this)}initialize(){const t=async()=>this.messages=await u2("esri/widgets/CoordinateConversion/t9n/CoordinateConversion");this.formats.addMany(SMe()),t().then(()=>{if(!this.destroyed&&(Mj(this.messages,this.formats),this.storageEnabled&&this._loadWidgetState(),this.formats.forEach(r=>{r.viewModel=this,this.addHandles(Ee(()=>r.currentPattern,this._saveWidgetState),r.name??"unnamed-format")}),this.addHandles(this.conversions.on("change",this._handleConversionChange),la.conversions),this.addHandles(this.formats.on("change",this._handleFormatChange),la.formats),this.addHandles(l2(()=>{t().then(()=>{Mj(this.messages,this.formats)})})),tu().then(()=>{this.formatterAvailable=!0}).catch(r=>{Z.getLogger(this).error(new N("coordinate-conversion:projection-load-failed","Failed to load the projection module.",{error:r})),this.formatterAvailable=!1,this._filterFormatsAndConversions()}).then(()=>this.addHandles(Ee(()=>this.view,this._handleViewChange,Ir),la.viewChange)),this.conversions.length===0)){const r=this.formats.find(n=>n.name===$Me)||this.formats.at(0);this.conversions.add(new Gf({format:r}))}})}destroy(){this.removeHandles(),this._cleanUpView(this.view),this.view=null}castConversions(t){return this._castToConversions(t)}set currentLocation(t){this._set("currentLocation",t),this._updateConversions()}get currentLocation(){return this._get("currentLocation")||null}set mode(t){switch(t){case"capture":this.currentLocation=null,this._startCaptureMode(),this._set("mode",t);break;case"live":this._startLiveMode(),this._set("mode",t)}}get mode(){return this._get("mode")||"live"}get state(){const{messages:t,view:r}=this,n=r==null?void 0:r.ready;return t?n?"ready":r?"loading":"disabled":"disabled"}get storage(){const{storageType:t}=this;return t==="session"?sessionStorage:localStorage}get waitingForConversions(){return this._conversionPromise!=null}setLocation(t){var n,i;if(this._locationGraphic&&((n=this.view)==null||n.graphics.remove(this._locationGraphic)),!t)return;const r=t.clone();r.hasZ&&(r.z=void 0),this._locationGraphic=new Ki({geometry:r,symbol:this.locationSymbol}),(i=this.view)==null||i.graphics.add(this._locationGraphic)}async convert(t,r){if(!sP(r))throw new N("coordinate-conversion:invalid-point","Invalid point cannot be converted.",{point:r});return Promise.resolve().then(()=>t.convert(r))}async goToLocation(t){var s,o,a;const{view:r}=this;if(!r)throw new N("coordinate-conversion:go-to-failed","no view");const n=r.type==="3d"?r.clippingArea:null,i=(o=(s=r.map)==null?void 0:s.basemap)==null?void 0:o.baseLayers;if(n||(i==null?void 0:i.length)>0){const l=n??((a=i.at(0))==null?void 0:a.fullExtent);if(l!=null&&!l.contains(t))throw new N("coordinate-conversion:go-to-failed","Point outside basemap extent.",{point:t})}return this.callGoTo({target:t})}pause(){this.currentLocation=null,this.removeHandles(la.view),this.view&&(this.view.cursor=Jw.default,this._locationGraphic&&this.view.graphics.remove(this._locationGraphic))}async previewConversion(t,r=this.currentLocation||xMe){return(await Cj(t,r)).displayCoordinate}resume(){this.mode==="capture"?this._startCaptureMode():this._startLiveMode()}reverseConvert(t,r){return r.reverseConvert(t)}async updateConversions(t,r){if((r==null?void 0:r.type)!=="point")throw this._clearConversions(this.conversions),new N("coordinate-conversion:invalid-input-point","Point is invalid, conversions cannot be updated.",{point:r});return this._convertMany(t,r)}_castToConversions(t){const r=new Le;return t.forEach(n=>{let i=null;if(n instanceof Gf)i=n;else if(typeof n=="string"){const s=this.formats.find(o=>o.name===n);s&&(i=new Gf({format:s}))}i&&r.add(i)}),r}_cleanUpView(t){t&&(this._locationGraphic&&t.graphics.remove(this._locationGraphic),this.removeHandles(la.view),t.cursor=Jw.default)}_clearConversions(t){t.forEach(r=>{r.position={location:null,coordinate:null}})}async _convertMany(t,r){return Promise.all(t.map(n=>Cj(n,r)))}_handleConversionChange(t){for(const r of t.added){const{format:n}=r;n&&(n.viewModel=this,this.currentLocation&&(this._set("waitingForConversions",!0),this.convert(n,this.currentLocation).then(i=>{r.position=i,this._set("waitingForConversions",!1)})))}this._saveWidgetState()}_handleFormatChange(t){t.added.forEach(r=>{this.addHandles(Ee(()=>r.currentPattern,this._saveWidgetState),r.name??"unnamed-format"),r.viewModel=this}),t.removed.forEach(r=>{r.viewModel=null;const n=this.conversions.filter(i=>i.format===r);this.conversions.removeMany(n),r.name&&this.removeHandles(r.name)})}_loadWidgetState(){try{const t=JSON.parse(this.storage.getItem(Ij));t&&this._setWidgetState(t)}catch(t){Z.getLogger(this).error(new N("coordinate-conversion:invalid-session-storage-json","Could not read from storage.",{error:t}))}}_startCaptureMode(){this.removeHandles(la.view),this.view&&(this.view.cursor=Jw.crosshair,this.currentLocation&&this.setLocation(this.currentLocation),this.addHandles(this.view.on("click",this._onClick),la.view))}_startLiveMode(){this._pointerCount=0,this.removeHandles(la.view),this.view&&(this.view.cursor=Jw.default,this._locationGraphic&&this.view.graphics.remove(this._locationGraphic),this.addHandles([this.view.on("pointer-down",this._onPointerDown),this.view.on("pointer-up",this._onPointerUp),this.view.on("pointer-move",this._onPointerMove)],la.view))}_handleViewChange(t,r){r&&r!==t&&this._cleanUpView(r),t&&(this.mode==="capture"?this._startCaptureMode():this._startLiveMode(),r&&this._filterFormatsAndConversions())}_onClick(t){var r;if(t.button===0){const n=(r=this.view)==null?void 0:r.toMap(t),i=n==null?void 0:n.normalize();this.setLocation(i),this.currentLocation=i}}_onPointerDown(t){var n;const{pointerType:r}=t;if(this._pointerCount++,(r==="touch"||r==="pen")&&this._pointerCount===1){const i=(n=this.view)==null?void 0:n.toMap(t);this.currentLocation=i==null?void 0:i.normalize()}}_onPointerMove(t){var n;const{pointerType:r}=t;if(r==="mouse"||this._pointerCount===1){const i=(n=this.view)==null?void 0:n.toMap(t);this.currentLocation=i==null?void 0:i.normalize()}}_onPointerUp(){this._pointerCount--}_setWidgetState(t){try{t.formats.forEach(r=>{const n=this.formats.find(i=>i.name===r.name);n&&t.locale===ei()&&r.currentPattern&&(n.currentPattern=r.currentPattern),n&&r.index>=0&&this.conversions.add(new Gf({format:n}))})}catch(r){Z.getLogger(this).warn(new N("coordinate-conversion:session-storage-read-error","Could not get widget state from stored JSON.",{error:r}))}}_saveWidgetState(){if(!this.storageEnabled)return;const t=this._toJSON();try{this.storage.setItem(Ij,JSON.stringify({formats:t,locale:ei()}))}catch(r){Z.getLogger(this).error(new N("coordinate-conversion:local-storage-write-error","Could not write to localStorage.",{error:r}))}}async _updateConversions(){try{await this.updateConversions(this.conversions.toArray(),this.currentLocation)}catch{}}_toJSON(){return this.formats.filter(t=>{const r=t.name;return r==="xy"||r==="basemap"||sMe(r)}).map(t=>({name:t.name,currentPattern:t.currentPattern,defaultPattern:t.defaultPattern,index:this.conversions.findIndex(r=>r.format===t)})).sort((t,r)=>t.index-r.index).toArray()}_filterFormatsAndConversions(){const{formatterAvailable:t,conversions:r,formats:n}=this;t||this.addHandles(Xl(()=>{var i;return(i=this.view)==null?void 0:i.spatialReference},i=>{const s=i.isWebMercator||i.isWGS84,o=n.filter(c=>{const{name:h}=c;return!!MMe(h)||h==="xy"&&!s}),a=this.filteredFormats.filter(c=>c.name==="xy"&&s&&!this.formats.includes(c)),l=r.filter(c=>o.includes(c.format));n.removeMany(o),r.removeMany(l),this.filteredFormats.addMany(o.filter(c=>!this.filteredFormats.includes(c))),n.addMany(a)},{once:!0,initial:!0}),la.view)}};async function Cj(e,t){var r;try{e.position=await((r=e.format)==null?void 0:r.convert(t))}catch{e.position=null}return e}function MMe(e){return TMe.includes(e)}u([d()],vn.prototype,"conversions",void 0),u([Pt("conversions")],vn.prototype,"castConversions",null),u([d({type:be})],vn.prototype,"currentLocation",null),u([d()],vn.prototype,"formats",void 0),u([d()],vn.prototype,"messages",void 0),u([d()],vn.prototype,"mode",null),u([d()],vn.prototype,"filteredFormats",void 0),u([d({readOnly:!0})],vn.prototype,"state",null),u([d()],vn.prototype,"locationSymbol",void 0),u([d({readOnly:!0,dependsOn:["storageType"]})],vn.prototype,"storage",null),u([d()],vn.prototype,"storageEnabled",void 0),u([d()],vn.prototype,"storageType",void 0),u([d({readOnly:!0})],vn.prototype,"waitingForConversions",null),u([d()],vn.prototype,"view",void 0),vn=u([E("esri.widgets.CoordinateConversion.CoordinateConversionViewModel")],vn);const VZ=vn,IMe={heading:"esri-widget__heading"};function kj({level:e,class:t,...r},n){const i=CMe(e);return D(`h${i}`,{...r,class:HG(IMe.heading,t),role:"heading","aria-level":String(i)},n)}function CMe(e){return Yi(Math.ceil(e),1,6)}const ue={base:"esri-coordinate-conversion esri-widget",captureMode:"esri-coordinate-conversion--capture-mode",noBasemap:"esri-coordinate-conversion--no-basemap",popup:"esri-coordinate-conversion__popup",clipboardPopup:"esri-coordinate-conversion__clipboard-popup",conversionList:"esri-coordinate-conversion__conversion-list",conversionRow:"esri-coordinate-conversion__row",coordDisplay:"esri-coordinate-conversion__display",expanded:"esri-coordinate-conversion__conversions-view--expanded",expandDown:"esri-coordinate-conversion__conversions-view--expand-down",expandUp:"esri-coordinate-conversion__conversions-view--expand-up",conversionsView:"esri-coordinate-conversion__conversions-view",primarySelect:"esri-coordinate-conversion__select-primary",rowSelect:"esri-coordinate-conversion__select-row",toolDisplay:"esri-coordinate-conversion__tools",modeToggle:"esri-coordinate-conversion__mode-toggle",rowButton:"esri-coordinate-conversion__row-button",backButton:"esri-coordinate-conversion__back-button",convertButton:"esri-coordinate-conversion__button",convertButtonSpan:"esri-coordinate-conversion__convert-button-span",coordinateInput:"esri-coordinate-conversion__input-coordinate",inputForm:"esri-coordinate-conversion__input-form",inputFormGroup:"esri-coordinate-conversion__input-group",rejectInput:"esri-coordinate-conversion__input-coordinate--rejected",sectionHeading:"esri-coordinate-conversion__heading",patternInput:"esri-coordinate-conversion__pattern-input",settings:"esri-coordinate__settings",settingsFormGroup:"esri-coordinate-conversion__settings-group",settingsFormGroupHorizontal:"esri-coordinate-conversion__settings-group-horizontal",previewCoordinate:"esri-coordinate-conversion__preview-coordinate",disabled:"esri-disabled",input:"esri-input",button:"esri-button",header:"esri-widget__heading",widgetButton:"esri-widget--button",leftArrow:"esri-icon-left-arrow",rightArrow:"esri-icon-right-arrow",captureButton:"esri-icon-map-pin",collapseButton:"esri-icon-up",copyButton:"esri-icon-duplicate",editButton:"esri-icon-edit",esriSelect:"esri-select",expandButton:"esri-icon-down",goToButton:"esri-icon-locate",refresh:"esri-icon-refresh",removeConversion:"esri-icon-close",settingsButton:"esri-icon-settings2"},Pj={settingsButton:!0,inputButton:!0,captureButton:!0,expandButton:!0},kMe=750,PMe=2500;let Ft=class extends Wa{constructor(e,t){super(e,t),this._popupMessage=null,this._popupTimeoutId=void 0,this._clipboardPopupTimeoutId=void 0,this._coordinateInput=null,this._badInput=!1,this._goToEnabled=!1,this._conversionFormat=null,this._settingsFormat=null,this._previewConversion=null,this._expanded=!1,this._clipboardPopupVisible=!1,this._popupVisible=!1,this._settingsVisible=!1,this._inputVisible=!1,this.headingLevel=4,this.messages=null,this.messagesCommon=null,this.orientation="auto",this.viewModel=new VZ,this.visibleElements={...Pj}}get conversions(){return this.viewModel.conversions}set conversions(e){this.viewModel.conversions=e}get currentLocation(){return this.viewModel.currentLocation}set currentLocation(e){this.viewModel.currentLocation=e}get formats(){return this.viewModel.formats}set formats(e){this.viewModel.formats=e}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(e){this.viewModel.goToOverride=e}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get mode(){return this.viewModel.mode}set mode(e){this.viewModel.mode=e}set multipleConversions(e){e===!1&&(this._expanded=!1,this.conversions.splice(1,this.conversions.length-1)),this._set("multipleConversions",e)}get multipleConversions(){const e=this._get("multipleConversions");return typeof e!="boolean"||e}get locationSymbol(){return this.viewModel.locationSymbol}set locationSymbol(e){this.viewModel.locationSymbol=e}get storageEnabled(){return this.viewModel.storageEnabled}set storageEnabled(e){this.viewModel.storageEnabled=e}get storageType(){return this.viewModel.storageType}set storageType(e){this.viewModel.storageType=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}castVisibleElements(e){return{...Pj,...e}}reverseConvert(e,t){return this.viewModel.reverseConvert(e,t)}render(){var a;const e=this.get("viewModel.state"),t=e==="disabled"?D("div",{key:"esri-coordinate__no-basemap"},(a=this.messages)==null?void 0:a.noBasemap):null,r=!t&&this._inputVisible?this._renderInputForm():null,n=!t&&this._settingsVisible?this._renderSettings():null,i=t||r||n?null:this._renderConversionsView(),s=this._popupVisible?this._renderPopup():null,o={[ue.captureMode]:this.mode==="capture",[ue.disabled]:e==="loading",[ue.noBasemap]:e==="disabled"};return D("div",{class:this.classes(ue.base,o)},s,t,i,n,r)}_addConversion(e){const t=e.target,r=Qw(t.options[t.options.selectedIndex]),n=Oj(t);if(r==null||n==null)return;const i=new Gf({format:r});t.options.selectedIndex=0,n>=0?(this.conversions.removeAt(n),this.conversions.add(i,n)):this.conversions.add(i)}_findSettingsFormat(){return this._settingsFormat||this.conversions.reduceRight((e,t)=>{const r=t.format;return r!=null&&r.hasDisplayProperties?r:e},null)||this.formats.find(e=>e.hasDisplayProperties)}_hidePopup(){this._popupTimeoutId&&(clearTimeout(this._popupTimeoutId),this._popupTimeoutId=void 0),this._popupVisible=!1,this._popupMessage=null,this.scheduleRender()}_hideClipboardPopup(){this._clipboardPopupTimeoutId&&(clearTimeout(this._clipboardPopupTimeoutId),this._clipboardPopupTimeoutId=void 0),this._clipboardPopupVisible=!1,this.scheduleRender()}_onConvertComplete(){this._inputVisible=!1,this._coordinateInput.value=""}_onCopy(e){var r,n;const t=(r=OMe(e.currentTarget))==null?void 0:r.displayCoordinate;t!=null&&((n=e.clipboardData)==null||n.setData("text/plain",t),this._showClipboardPopup(),e.preventDefault())}_processUserInput(e){const t=s0(e),r=this.viewModel;if(t!=="Enter"&&t)this._badInput&&(this._badInput=!1);else{const n=Qw(this._coordinateInput);if(!n)return;const i=this._coordinateInput.value;this._reverseConvert(i,n).then(s=>{this.mode==="capture"?r.resume():this.mode="capture",this.currentLocation=s,r.setLocation(s),this._onConvertComplete()}).catch(s=>{var o;Z.getLogger(this).error(s),this._showPopup((o=this.messages)==null?void 0:o.invalidCoordinate),this._badInput=!0})}}async _reverseConvert(e,t){const r=this.viewModel,n=await t.reverseConvert(e);return this._goToEnabled&&n&&r.goToLocation(n).catch(i=>{var s;Z.getLogger(this).warn(i),this._showPopup((s=this.messages)==null?void 0:s.locationOffBasemap)}),n}_setInputFormat(e){const t=e.target,r=Qw(t[t.options.selectedIndex]);r!=null&&(this._conversionFormat=r)}_setPreviewConversion(){var r,n;const e=this._findSettingsFormat(),t=this.viewModel;if(e){const i=this.conversions.find(s=>s.format===e);this._previewConversion=new Gf({format:e,position:{location:this.currentLocation,coordinate:(r=i==null?void 0:i.position)==null?void 0:r.coordinate}}),(n=this._previewConversion.position)!=null&&n.coordinate||t.previewConversion(this._previewConversion)}}_setSettingsFormat(e){const t=e.target,r=Qw(t[t.options.selectedIndex]);r!=null&&(this._settingsFormat=r,this._setPreviewConversion())}_showClipboardPopup(){this._clipboardPopupVisible?clearTimeout(this._clipboardPopupTimeoutId):this._clipboardPopupVisible=!0,this.scheduleRender(),this._popupTimeoutId=setTimeout(()=>{this._popupTimeoutId=void 0,this._hideClipboardPopup()},kMe)}_showPopup(e,t=PMe){this._popupMessage=e,this._popupVisible?clearTimeout(this._popupTimeoutId):this._popupVisible=!0,this.scheduleRender(),this._popupTimeoutId=setTimeout(()=>{this._popupTimeoutId=void 0,this._hidePopup()},t)}_toggleGoTo(){this._goToEnabled=!this._goToEnabled}_updateCurrentPattern(e){e.stopPropagation();const t=e.target,r=this._findSettingsFormat();r&&(r.currentPattern=t.value)}_renderConversion(e,t){const{messages:r}=this;if(!r)return D("li",null);const{format:n}=e,i=(n==null?void 0:n.label)??"",s=`${this.id}__list-item-${t}`,o=`${i} ${r.conversionOutputSuffix}`,a=t===0,l=a||this._expanded,c=a?this._renderFirstConversion(e):this._renderTools(t,e,s),h=a&&!e.displayCoordinate?r.noLocation:e.displayCoordinate,f=D("div",{"aria-label":h,class:ue.coordDisplay,"data-conversion":e,role:"listitem",tabindex:"0",title:h??""},h),m=this._renderOptions(this.formats.filter(y=>y!==n));return l?D("li",{"aria-label":o,class:ue.conversionRow,id:s,key:e,role:"group",title:o,tabindex:"0"},D("select",{"aria-controls":s,"aria-label":r.selectFormat,class:this.classes(ue.esriSelect,ue.rowSelect),bind:this,"data-index":t,onchange:this._addConversion,title:r.selectFormat},D("option",{"aria-label":i,selected:!0,title:i},i.toUpperCase()),m),f,c):null}_renderCopyButton(e){const t=this._clipboardPopupVisible&&this._renderClipboardPopup(),{messagesCommon:r}=this;return r?D("li",{"aria-label":r.copy,bind:this,class:this.classes(ue.widgetButton,ue.rowButton),"data-conversion":e,onclick:this._copyCoordinateOutput,onkeydown:this._copyCoordinateOutput,oncopy:this._onCopy,role:"button",tabindex:"0",title:r.copy},t,D("span",{"aria-hidden":"true",class:ue.copyButton})):D("li",null)}_renderFirstConversion(e){const t=this.id,r={[ue.expandButton]:!this._expanded,[ue.collapseButton]:this._expanded},{messages:n,messagesCommon:i,multipleConversions:s,visibleElements:o}=this;if(!i||!n)return D("ul",null);const a=this.mode==="live"?n.captureMode:n.liveMode,l=this._expanded?i.collapse:i.expand,c=e.displayCoordinate&&this.mode==="capture"?this._renderCopyButton(e):null,h=s&&o.expandButton&&D("li",{"aria-controls":`${t}__${ue.conversionList}`,"aria-label":l,bind:this,class:ue.widgetButton,key:"esri-coordinate-conversion__expand-button",onclick:this._toggleExpand,onkeydown:this._toggleExpand,role:"button",tabindex:"0",title:l},D("span",{"aria-hidden":"true",class:this.classes(r)})),f=!s&&o.captureButton&&D("li",{"aria-label":a,bind:this,class:this.classes(ue.widgetButton,ue.modeToggle),key:"esri-coordinate-conversion__mode-toggle",onclick:this._toggleMode,onkeydown:this._toggleMode,role:"button",tabindex:"0",title:a},D("span",{"aria-hidden":"true",class:ue.captureButton}));return D("ul",{class:ue.toolDisplay},c,h,f)}_renderInputForm(){const e=this._conversionFormat||this.conversions.at(0).format,t=this.formats.findIndex(h=>h.name===(e==null?void 0:e.name)),r=this.id,n=`${r}__${ue.coordinateInput}`,i=`${r}__${ue.coordinateInput}__header`,s=this._renderOptions(this.formats,!0,t),o={[ue.rejectInput]:this._badInput},{messages:a,messagesCommon:l,headingLevel:c}=this;return l&&a?D("div",{"aria-labelledby":i,class:ue.inputForm,key:"esri-coordinate-conversion__input-form",role:"search"},D("div",{class:ue.sectionHeading},D("div",{"aria-label":l.back,bind:this,class:this.classes(ue.widgetButton,ue.backButton),onclick:this._toggleInputVisibility,onkeydown:this._toggleInputVisibility,role:"button",tabindex:"0",title:l.back},this._renderBackIcon()),D(kj,{level:c,class:ue.header,id:i},a.inputCoordTitle)),D("div",{class:ue.inputFormGroup},D("select",{"aria-controls":n,"aria-label":a.selectFormat,bind:this,class:this.classes(ue.esriSelect,ue.rowSelect),onchange:this._setInputFormat,title:a.selectFormat},s),D("input",{afterCreate:Tg,"aria-labelledby":i,"aria-required":"true",bind:this,class:this.classes(ue.coordinateInput,ue.input,o),"data-format":e,"data-node-ref":"_coordinateInput",id:n,onkeydown:this._processUserInput,placeholder:a.inputCoordTitle,role:"textbox",spellcheck:!1,title:a.inputCoordTitle,type:"text"})),D("div",{class:ue.inputFormGroup},D("label",{"aria-label":a.goTo},D("input",{bind:this,checked:this._goToEnabled,onclick:this._toggleGoTo,title:a.goTo,type:"checkbox"}),a.goTo),D("button",{"aria-label":a.convert,bind:this,class:this.classes(ue.convertButton,ue.button),onclick:this._processUserInput,title:a.convert,type:"button"},D("span",{class:ue.convertButtonSpan},a.convert)))):D("div",null)}_renderConversionsView(){const{messages:e}=this;if(!e)return D("div",null);const t=`${this.id}__${ue.conversionList}`,r=this._renderPrimaryTools(),n=this._renderOptions(this.formats),i=this.conversions.map((a,l)=>this._renderConversion(a,l)).toArray(),s=this._expanded?D("div",{class:ue.conversionRow},D("select",{"aria-controls":t,"aria-label":e.addConversion,bind:this,class:this.classes(ue.esriSelect,ue.primarySelect),"data-index":-1,onchange:this._addConversion,title:e.addConversion},D("option",{disabled:!0,selected:!0,value:""},e.addConversion),n),r):null,o={[ue.expanded]:this._expanded,[ue.expandUp]:this.orientation==="expand-up",[ue.expandDown]:this.orientation==="expand-down"};return D("div",{class:this.classes(ue.conversionsView,o),key:"esri-coordinate-conversion__main-view"},D("ul",{"aria-expanded":this._expanded?"true":"false",class:ue.conversionList,id:t},i),s)}_renderOptions(e,t,r){var s;const n=this.conversions.at(0),i=(s=n.format)==null?void 0:s.name;return e.map((o,a)=>{const l=!(t||!n)&&(i===o.name||this.conversions.map(c=>{var h;return(h=c.format)==null?void 0:h.name}).includes(o.name));return D("option",{"aria-label":o.label,"data-format":o,disabled:l,key:o.name??"unnamed-format",selected:a===r,value:o.label},o.label.toUpperCase())}).toArray()}_renderPopup(){return D("div",{class:ue.popup,role:"alert"},this._popupMessage)}_renderClipboardPopup(){const{messages:e}=this;return e?D("div",{class:this.classes(ue.popup,ue.clipboardPopup),role:"alert"},e.copySuccessMessage):D("div",null)}_renderPrimaryTools(){const{messages:e,visibleElements:t}=this;if(!e)return D("ul",null);const r=this.mode==="live"?e.captureMode:e.liveMode,n=t.inputButton&&D("li",{bind:this,class:ue.widgetButton,onclick:this._toggleInputVisibility,onkeydown:this._toggleInputVisibility,role:"button",tabindex:"0",title:e.inputCoordTitle},D("span",{"aria-hidden":"true",class:ue.editButton})),i=t.captureButton&&D("li",{bind:this,class:this.classes(ue.widgetButton,ue.modeToggle),onclick:this._toggleMode,onkeydown:this._toggleMode,role:"button",tabindex:"0",title:r},D("span",{"aria-hidden":"true",class:ue.captureButton})),s=t.settingsButton&&D("li",{bind:this,class:ue.widgetButton,onclick:this._toggleSettingsVisibility,onkeydown:this._toggleSettingsVisibility,role:"button",tabindex:"0",title:e.settingsTitle},D("span",{"aria-hidden":"true",class:ue.settingsButton}));return D("ul",{class:ue.toolDisplay},n,i,s)}_renderSettings(){var m;const e=this.id,t=`${e}__${ue.patternInput}`,r=`${e}__${ue.patternInput}__header`,n=`${e}__${ue.previewCoordinate}`,i=this.formats.filter(y=>y.hasDisplayProperties),s=this._findSettingsFormat(),o=s?i.indexOf(s):-1,a=this._renderOptions(i,!0,o),l=s==null?void 0:s.get("currentPattern"),{messages:c,messagesCommon:h,headingLevel:f}=this;return h&&c?D("div",{"aria-labelledby":r,class:ue.settings,key:"esri-coordinate-conversion__settings"},D("div",{class:ue.sectionHeading},D("div",{bind:this,class:this.classes(ue.widgetButton,ue.backButton),onclick:this._toggleSettingsVisibility,onkeydown:this._toggleSettingsVisibility,role:"button",tabindex:"0",title:h.back},this._renderBackIcon()),D(kj,{level:f,class:ue.header,id:r},c.settingsTitle)),D("div",{class:ue.settingsFormGroup},D("label",{for:t},c.changeCoordinateDisplay),D("select",{"aria-label":c.selectFormat,class:ue.esriSelect,bind:this,onchange:this._setSettingsFormat,title:c.selectFormat},a),D("div",{class:ue.settingsFormGroupHorizontal},D("input",{"aria-controls":n,bind:this,class:this.classes(ue.patternInput,ue.input),id:t,oninput:this._updateCurrentPattern,spellcheck:!1,title:c.changeCoordinateDisplay,type:"text",value:l}),D("div",{"aria-controls":t,bind:this,class:ue.widgetButton,onclick:this._setDefaultPattern,onkeydown:this._setDefaultPattern,role:"button",tabindex:"0",title:c.defaultPattern},D("span",{"aria-hidden":"true",class:ue.refresh})))),D("div",{class:ue.settingsFormGroup},D("label",null,h.preview,D("div",{class:ue.previewCoordinate,id:n,tabindex:"0"},(m=this._previewConversion)==null?void 0:m.displayCoordinate)))):D("div",null)}_renderBackIcon(){return D("span",{"aria-hidden":"true",class:ZG(this.container)?ue.rightArrow:ue.leftArrow})}_renderTools(e,t,r){const n=t.displayCoordinate&&this.mode==="capture"?this._renderCopyButton(t):null,{messages:i}=this;return i?D("ul",{class:ue.toolDisplay,role:"listitem"},n,D("li",{"aria-controls":r,"aria-label":i.removeConversion,bind:this,class:this.classes(ue.widgetButton,ue.rowButton),"data-index":e,key:`${r}__${ue.widgetButton}`,onclick:this._removeConversion,onkeydown:this._removeConversion,tabindex:"0",role:"button",title:i.removeConversion},D("span",{"aria-hidden":"true",class:ue.removeConversion}))):D("ul",null)}_copyCoordinateOutput(e){const t=e.target;if(!("createTextRange"in document.body)){const r=window.getSelection(),n=document.createRange();n.selectNodeContents(t),r==null||r.removeAllRanges(),r==null||r.addRange(n)}document.execCommand("copy")}_removeConversion(e){const t=Oj(e.currentTarget);t!=null&&this.conversions.removeAt(t)}_setDefaultPattern(e){e.stopPropagation();const t=this._findSettingsFormat();t&&(t.currentPattern=t.get("defaultPattern"))}_toggleExpand(){this._expanded=!this._expanded}_toggleInputVisibility(){this._inputVisible=!this._inputVisible,this._popupVisible&&this._hidePopup(),this._inputVisible?this.viewModel.pause():this.viewModel.resume()}_toggleMode(){this.mode=this.mode==="live"?"capture":"live"}_toggleSettingsVisibility(){this._settingsVisible=!this._settingsVisible,this._popupVisible&&this._hidePopup(),this._settingsVisible?(this._setPreviewConversion(),this.viewModel.pause()):this.viewModel.resume()}};function Oj(e){return e["data-index"]}function Qw(e){return e["data-format"]}function OMe(e){return e["data-conversion"]}u([d()],Ft.prototype,"conversions",null),u([d()],Ft.prototype,"currentLocation",null),u([d()],Ft.prototype,"formats",null),u([d()],Ft.prototype,"goToOverride",null),u([d()],Ft.prototype,"headingLevel",void 0),u([d()],Ft.prototype,"label",null),u([d(),Vs("esri/widgets/CoordinateConversion/t9n/CoordinateConversion")],Ft.prototype,"messages",void 0),u([d(),Vs("esri/t9n/common")],Ft.prototype,"messagesCommon",void 0),u([d()],Ft.prototype,"mode",null),u([d()],Ft.prototype,"orientation",void 0),u([d()],Ft.prototype,"multipleConversions",null),u([d()],Ft.prototype,"locationSymbol",null),u([d()],Ft.prototype,"storageEnabled",null),u([d()],Ft.prototype,"storageType",null),u([d()],Ft.prototype,"view",null),u([d({type:VZ})],Ft.prototype,"viewModel",void 0),u([d()],Ft.prototype,"visibleElements",void 0),u([Pt("visibleElements")],Ft.prototype,"castVisibleElements",null),u([vi()],Ft.prototype,"_copyCoordinateOutput",null),u([vi()],Ft.prototype,"_removeConversion",null),u([vi()],Ft.prototype,"_setDefaultPattern",null),u([vi()],Ft.prototype,"_toggleExpand",null),u([vi()],Ft.prototype,"_toggleInputVisibility",null),u([vi()],Ft.prototype,"_toggleMode",null),u([vi()],Ft.prototype,"_toggleSettingsVisibility",null),Ft=u([E("esri.widgets.CoordinateConversion")],Ft);const RMe=Ft;const HT="https://gis.ngdc.noaa.gov/arcgis/rest/services/web_mercator/sample_index_dynamic/MapServer",AMe="https://ci-cmg.github.io/imlgs/samples";function LMe(e){const t=[];return e.has("igsn")&&e.get("igsn")?t.push(`IGSN = '${e.get("igsn")}'`):e.has("sampleid")&&e.get("sampleid")?t.push(`SAMPLE = '${e.get("sampleid")}'`):(e.has("repository")&&e.get("repository")&&t.push(`FACILITY_CODE = '${e.get("repository")}'`),e.has("platform")&&e.get("platform")&&t.push(`PLATFORM = '${e.get("platform")}'`),e.has("lake")&&e.get("lake")&&t.push(`LAKE = '${e.get("lake")}'`),e.has("device")&&e.get("device")&&t.push(`DEVICE = '${e.get("device")}'`),e.has("cruise")&&e.get("cruise")&&t.push(`CRUISE = '${e.get("cruise")}'`),e.has("start_date_begins_with")&&e.get("start_date_begins_with")&&t.push(`BEGIN_DATE like '${e.get("start_date_begins_with")}%'`),e.get("min_depth")&&e.get("min_depth")&&t.push(`WATER_DEPTH >= ${e.get("min_depth")}`),e.get("max_depth")&&e.get("max_depth")&&t.push(`WATER_DEPTH <= ${e.get("max_depth")}`),e.get("province")&&e.get("province")&&t.push(`PROVINCE = '${e.get("province")}'`),e.get("weathering")&&e.get("weathering")&&t.push(`WEATHERING='weathering - ${e.get("weathering")}'`),e.get("metamorphism")&&e.get("metamorphism")&&t.push(`Metamorphism='metamorphism - ${e.get("metamorphism")}'`),e.get("mineralogy")&&e.get("mineralogy")&&t.push(`MINERALOGY = '${e.get("mineralogy")}'`),e.get("texture")&&e.get("texture")&&t.push(`TEXTURE like '%${e.get("texture")}%'`),e.get("lithology")&&e.get("lithology")&&t.push(`LITHOLOGY like '%${e.get("lithology")}%'`)),t.length?t.join(" and "):""}const Rj=new be({longitude:-98.5833,latitude:39.8333}),Aj=4;function NMe({zoomToSelected:e}){console.log("rendering MapPanel...");const t="MapPanel",[r,n]=m8(),i=LMe(r);console.log("inside MapPanel with ",r.toString()),console.log("Map is getting layer def of ",i);const s=G.useRef(null),o=G.useRef(),a=G.useRef(),l=G.useRef(null),[c,h]=G.useState(),f=new oZ;f.tolerance=3,f.layerIds=[0],f.layerOption="top",G.useEffect(()=>{const v=new BU({basemap:"oceans"});if(s.current){if(!a.current){const w=new ube({map:v,container:s.current,zoom:Aj,center:Rj});a.current=w;const b=new jEe({view:w}),S=new VEe({view:w}),_=new RMe({view:w}),x=new tMe({view:w});x.style="ruler",w.when(function(){l.current&&w.ui.add(l.current,"top-left"),w.ui.add(b,{position:"top-right"}),w.ui.add(S,{position:"top-left"}),w.ui.add(_,{position:"bottom-left"}),w.ui.add(x,{position:"bottom-right"}),h(w),e&&i&&y(i),w.on("click",m)})}if(!o.current){const w=new sZ({url:HT,sublayers:[{id:0,visible:!0,definitionExpression:i}]});o.current=w,v.add(w)}}else console.log("mapDiv not yet available");return()=>{}},[]),G.useEffect(()=>{if(!a.current||!o.current){console.warn("MapView and/or MapImageLayer are not yet ready");return}const v=o.current.findSublayerById(0);v?v.definitionExpression=i:console.error("sublayer not found"),e&&(i?y(i):a.current&&(a.current.center=Rj,a.current.zoom=Aj))},[i,e]);function m(v){if(s.current&&(s.current.style.cursor="wait"),!a.current){console.warn("MapView not ready");return}f.width=a.current.width,f.height=a.current.height,f.geometry=v.mapPoint,f.mapExtent=a.current.extent,o.current&&(f.sublayers=o.current.sublayers.toArray(),f.sublayers[0].definitionExpression=i),kTe(HT,f).then(function(b){return b.results.map(function(_){const x=_.feature;x.attributes.LAT=parseFloat(x.attributes.LAT.toFixed(5)),x.attributes.LON=parseFloat(x.attributes.LON.toFixed(5)),x.attributes.WATER_DEPTH=x.attributes.WATER_DEPTH?x.attributes.WATER_DEPTH.toLocaleString():"N/A";const T=new Km({title:"Sample ID {SAMPLE}",content:`<b>Repository:</b> {FACILITY_CODE}
        <br><b>Location:</b> {LON}, {LAT}
        <br><b>Year:</b> {YEAR}
        <br><b>Water Depth:</b> {WATER_DEPTH}m
        <br><b>Device:</b> {DEVICE}
        <br><a href="${AMe}/{IMLGS}">more detail</a>`});return x.popupTemplate=T,x})}).then(w);function w(b){b.length>0&&a.current&&a.current.popup.open({features:b,location:v.mapPoint}),s.current&&(s.current.style.cursor="auto")}}function y(v){if(!a.current)return;const w=HT+"/0/query",b=new URLSearchParams;b.append("where",v),b.append("returnExtentOnly","true"),b.append("f","json");const S=new Request(w,{method:"POST",body:b});try{fetch(S).then(_=>_.json()).then(_=>{var x;if(isNaN(_.extent.xmin)||isNaN(_.extent.xmax)||isNaN(_.extent.ymin)||isNaN(_.extent.ymax)){console.warn("Cannot zoom to empty extent");return}if(_.extent.xmin==_.extent.xmax||_.extent.ymin==_.extent.ymax){const T=new be({x:_.extent.xmin,y:_.extent.ymin,spatialReference:_.extent.spatialReference});(x=a.current)==null||x.goTo({center:T,zoom:8})}else a.current&&(a.current.extent=_.extent)})}catch(_){console.error("failed to zoomTo "),console.error(_)}}function g(v){if(!v)return;const w=new URLSearchParams(r);w.set("bbox",v.join(",")),n(w)}return M.jsx("div",{className:t,ref:s,children:M.jsx("div",{ref:l,children:c?M.jsx(TTe,{mapView:c,setSelectedExtent:g}):""})})}function DMe(){console.log("rendering Samples...");const[e,t]=G.useState(!0),r="Samples";return M.jsxs("div",{className:`${r}--wrapper`,children:[M.jsx("div",{className:`${r}--sidebar`,children:M.jsx(Wte,{zoomToSelected:e,zoomToggleHandler:n=>t(n)})}),M.jsx("main",{className:`${r}--main`,children:M.jsx(NMe,{zoomToSelected:e})})]})}const Lj="https://ccog.colorado.edu/geosamples-api/api";async function FMe(e){console.log("inside getSampleById");let t=await fetch(`${Lj}/samples/detail/${e}`);if(t.status!==200)throw new Error(t.status.toString());const r=await t.json();if(t=await fetch(`${Lj}/repositories/detail/${r.facility.id}`),t.status!==200)throw new Error(t.status.toString());const n=await t.json();return n.other_link&&(r.facility.doi=n.other_link),r}const zZ=e=>({queryKey:["samples","detail",e],queryFn:async()=>FMe(e)}),jMe=e=>async t=>{console.log("inside loader function...");const{id:r}=t.params;if(!r)throw new Error("IMLGS Id argument required");const n=zZ(r);return await e.ensureQueryData(n)},VMe="https://ccog.colorado.edu/geosamples-api/api";function sn(e,t,r){return M.jsxs("tr",{children:[M.jsx("td",{className:"SampleDetail--rowLabel",children:t}),M.jsx("td",{children:r})]},e)}function Nj(e){const t=e.split("");return`${t.slice(0,4).join("")}-${t.slice(4,6).join("")}-${t.slice(6,8).join("")}`}function rr(e,t){return M.jsxs(M.Fragment,{children:[M.jsxs("span",{className:"SampleDetail--rowLabel",children:[e,":"]})," ",t]})}function zMe(e){console.log("inside formatInterval with ",e);const t=[];let r=e.interval?`Interval ${e.interval}`:"";return e.depth_top!=null&&e.depth_bot!=null&&(r+=`: ${e.depth_top} to ${e.depth_bot} cm in core`),t.push(M.jsx("span",{className:"SampleDetail--intervalTitle",children:r})),e.lith1!==void 0&&t.push(rr("Primary Lithologic Composition",e.lith1)),e.text1!==void 0&&t.push(rr("Primary Texture",e.text1)),e.lith2!==void 0&&t.push(rr("Secondary Lithologic Composition",e.lith2)),e.text2!==void 0&&t.push(rr("Primary Lithologic Composition",e.text2)),e.comp1!==void 0&&t.push(rr("Other Component 1",e.comp1)),e.comp2!==void 0&&t.push(rr("Other Component 2",e.comp2)),e.comp3!==void 0&&t.push(rr("Other Component 3",e.comp3)),e.comp4!==void 0&&t.push(rr("Other Component 4",e.comp4)),e.comp5!==void 0&&t.push(rr("Other Component 5",e.comp5)),e.comp6!==void 0&&t.push(rr("Other Component 6",e.comp6)),e.rock_lith!==void 0&&t.push(rr("Rock Lithology",e.rock_lith)),e.rock_min!==void 0&&t.push(rr("Rock Mineralogy",e.rock_min)),e.weath_meta!==void 0&&t.push(rr("Rock Weathering and Metamorphism",e.weath_meta)),e.remark!==void 0&&t.push(rr("Rock Glass Remarks and MN/Fe Oxide Coating",e.remark)),e.ages!==void 0&&e.ages.length&&t.push(rr("Geologic Ages",e.ages.join(", "))),e.absolute_age_top!==void 0&&t.push(rr("Absolute Age Top",e.absolute_age_top)),e.absolute_age_bot!==void 0&&t.push(rr("Absolute Age Bottom",e.absolute_age_bot)),e.munsell_code!==void 0&&t.push(rr("Color (Munsell Code)",e.munsell_code)),e.description!==void 0&&t.push(rr("Description",e.description)),e.int_comments!==void 0&&t.push(rr("Comments",e.int_comments)),e.exhaust_code!==void 0&&t.push(rr("Exhausted - No Longer Available",e.exhaust_code)),e.igsn!==void 0&&t.push(rr("IGSN",e.igsn)),e.photo_link!==void 0&&t.push(rr("Photo Link",e.photo_link)),e.weight!==void 0&&t.push(rr("Bulk Weight (kg)",e.weight.toString())),M.jsxs("table",{className:"SampleDetail--intervalsTable",children:[M.jsx("thead",{}),M.jsx("tbody",{children:t.map((n,i)=>M.jsx("tr",{children:M.jsx("td",{children:n})},i))})]},e.interval)}function UMe(e){const t=Object.assign({},e),r=[];return r.push(M.jsxs("tr",{children:[M.jsx("td",{className:"SampleDetail--rowLabel",children:"Repository"}),M.jsx("td",{children:M.jsx(Oo,{to:`/repositories/${t.facility.id}`,children:t.facility.facility})})]},"facility")),r.push(sn("platform","Ship/Platform",t.platform)),r.push(M.jsxs("tr",{children:[M.jsx("td",{className:"SampleDetail--rowLabel",children:"Cruise ID"}),M.jsx("td",{children:M.jsx(Oo,{to:`/cruises/${t.cruise.id}`,children:t.cruise.cruise})})]},"cruise")),t.leg!==void 0&&r.push(sn("leg","Leg",t.leg)),t.sample!==void 0&&r.push(sn("sample","Sample ID",t.sample)),t.device!==void 0&&r.push(sn("device","Sampling Device",t.device)),r.push(sn("location","Latitude/Longitude",`${t.lat}, ${t.lon}`)),t.end_lat!==void 0&&t.end_lon!==void 0&&r.push(sn("end_location","Ending Latitude/Longitude",`${t.end_lat}, ${t.end_lon}`)),t.water_depth!==void 0&&r.push(sn("water_depth","Water Depth (m)",t.water_depth.toLocaleString())),t.end_water_depth!==void 0&&r.push(sn("end_water_depth","Ending Water Depth (m)",t.end_water_depth.toLocaleString())),t.begin_date!==void 0&&r.push(sn("begin_date","Date Sample Collected",Nj(t.begin_date))),t.end_date!==void 0&&r.push(sn("end_date","Date Sample Collection Ended",Nj(t.end_date))),t.pi!==void 0&&r.push(sn("pi","Principal Investigator",t.pi)),t.storage_meth!==void 0&&r.push(sn("storage_meth","Storage Method",t.storage_meth)),t.province!==void 0&&r.push(sn("province","Physiographic Province",t.province)),t.lake!==void 0&&r.push(sn("lake","Lake",t.lake)),t.cored_length!==void 0&&r.push(sn("cored_length","Core Length (cm)",t.cored_length.toString())),t.cored_diam!==void 0&&r.push(sn("cored_diam","Core Diameter(cm)",t.cored_diam.toString())),t.sample_comments!==void 0&&r.push(sn("sample_comments","Sample Comments",t.sample_comments)),t.igsn!==void 0&&r.push(sn("igsn","IGSN",t.igsn)),t.facility.doi&&r.push(M.jsxs("tr",{children:[M.jsx("td",{className:"SampleDetail--rowLabel",children:"Repository Archive Overview"}),M.jsx("td",{children:M.jsx("a",{target:"_blank",href:t.facility.doi,children:t.facility.doi})})]},"other_link")),r}function GMe(e){return M.jsx("div",{children:M.jsx("ul",{children:e.map((t,r)=>M.jsx("li",{children:M.jsxs("a",{href:t.link,children:[t.link_level," ",t.type," at ",t.source]})},r))})})}function BMe(e,t){return M.jsx("div",{children:M.jsx("ul",{children:e.map((r,n)=>M.jsx("li",{children:M.jsxs("a",{href:r.link,children:[t," ",r.type," at ",r.source]})},n))})})}function qMe(){const e="SampleDetail",t=Bv(),{id:r}=iO();if(!r)throw new Error("IMLGS Id must be provided");const{data:n}=ov({...zZ(r),initialData:t});console.log(n);function i(){const s=`${VMe}/intervals/csv?imlgs=${r}`;window.open(s)}return M.jsxs("main",{className:e,style:{padding:"1rem 0"},children:[M.jsxs("h2",{children:["Data and Information for Sample ",n.sample]}),M.jsxs("div",{id:"sampleDetails",children:[M.jsxs("table",{className:`${e}--table`,children:[M.jsx("caption",{}),M.jsx("thead",{}),M.jsx("tbody",{children:UMe(n)})]}),M.jsx("br",{}),n.links?GMe(n.links):"",n.cruise.links?BMe(n.cruise.links,n.cruise.cruise):"",n.intervals.length?M.jsx("button",{className:`${e}--exportButton`,style:{marginLeft:"25px",marginTop:"25px",marginBottom:"25px"},onClick:i,children:"Export Interval Data"}):""]}),M.jsx("div",{id:"intervals",children:n.intervals.length?n.intervals.map(s=>zMe(s)):""}),M.jsxs("span",{children:["see the ",M.jsx("a",{href:"https://www.ngdc.noaa.gov/mgg/curator/curatorcoding.html",children:"IMLGS controlled vocabulary"})," for more information"]})]})}const WMe="https://ccog.colorado.edu/geosamples-api/api",HMe=250,ZMe=qe.object({imlgs:qe.string(),facility_code:qe.string(),platform:qe.string(),cruise:qe.string(),sample:qe.string(),device:qe.string(),begin_date:qe.string(),lat:qe.number(),lon:qe.number(),water_depth:qe.number(),storage_meth:qe.string(),igsn:qe.string().optional(),leg:qe.string().optional(),cored_length:qe.number().optional(),facility:qe.optional(uO)});qe.object({items:qe.array(ZMe),page:qe.number(),total_pages:qe.number(),total_items:qe.number(),items_per_page:qe.number()});async function JMe(e){const t=new URLSearchParams(e);t.set("items_per_page",HMe.toString()),console.log("inside getSampleResults. filters = ",t.toString());const r=await fetch(`${WMe}/samples/summary?${t.toString()}`);if(!r.ok)throw new Error(r.statusText);const n=await r.json();return n.items.forEach(async i=>{i.facility=await E8(i.facility_code)}),n}const QMe=e=>({queryKey:["samples","summary",e.toString()],queryFn:async()=>JMe(e)}),YMe=e=>async t=>{const r=new URL(t.request.url),n=zm(r.searchParams),i=QMe(n);return await e.ensureQueryData(i)};const KMe="https://ccog.colorado.edu/geosamples-api/api";function XMe(){console.log("re-rendering SamplesTable...");const e="SamplesTable",[t,r]=m8();G.useState(1);const n=Bv(),i=n.page,s=n.items,o=n.total_items,a=n.total_pages;function l(){const m=zm(t),y=`${KMe}/samples/csv?${m.toString()}`;window.open(y)}function c(){if(i===1)return;const m=new URLSearchParams(t);m.set("page",(i-1).toString()),r(m)}function h(){if(i===a)return;const m=new URLSearchParams(t);m.set("page",(i+1).toString()),r(m)}function f(m){const y="asc",g=new URLSearchParams(t);m.target.selectedIndex===0?g.delete("order"):g.set("order",`${m.target.value}:${y}`),r(g)}return M.jsxs("div",{children:[M.jsx("nav",{children:M.jsxs("div",{style:{paddingTop:"5px",paddingBottom:"5px"},children:[M.jsx("button",{type:"button",className:`${e}--button`,style:{marginLeft:"15px",marginRight:"50px"},onClick:l,title:"export table contents to CSV file",children:"Export Data"}),M.jsx("button",{type:"button",className:`${e}--button`,style:{marginRight:"5px"},onClick:c,disabled:i===1,title:"go to the previous page of data",children:"<"}),M.jsx("button",{type:"button",className:`${e}--button`,style:{},onClick:h,disabled:i===a,title:"go to the next page of data",children:">"}),M.jsxs("span",{style:{marginLeft:"15px"},children:["page ",i," of ",a," (",o," total records)"]}),M.jsxs("select",{style:{marginLeft:"100px"},onChange:f,children:[M.jsx("option",{children:"-- Sort By --"}),M.jsx("option",{value:"facility_code",children:"Repository"}),M.jsx("option",{value:"platform",children:"Ship/Platform"}),M.jsx("option",{value:"cruise",children:"Cruise"}),M.jsx("option",{value:"imlgs",children:"IMLGS"}),M.jsx("option",{value:"device",children:"Device"}),M.jsx("option",{value:"water_depth",children:"Water Depth (m)"}),M.jsx("option",{value:"start_date",children:"Collection Date"}),M.jsx("option",{value:"igsn",children:"IGSN"})]})]})}),M.jsxs("div",{className:e,style:{padding:"1rem 0"},children:[s&&s.length===0?M.jsx("h4",{children:"no data"}):"",s.length?M.jsxs("table",{className:`${e}--datatable`,children:[M.jsx("thead",{children:M.jsxs("tr",{children:[M.jsxs("th",{children:["Repository",M.jsx("br",{}),"Link"]}),M.jsxs("th",{children:["Ship/",M.jsx("br",{}),"Platform"]}),M.jsx("th",{children:"Cruise"}),M.jsxs("th",{children:["Sample/Hole",M.jsx("br",{}),"Data Link"]}),M.jsx("th",{children:"Device"}),M.jsxs("th",{children:["Core Length",M.jsx("br",{}),"(cm)"]}),M.jsx("th",{children:"Latitude"}),M.jsx("th",{children:"Longitude"}),M.jsxs("th",{children:["Water Depth",M.jsx("br",{}),"(m)"]}),M.jsxs("th",{children:["Collection",M.jsx("br",{}),"Date"]}),M.jsx("th",{children:"IGSN"}),M.jsx("th",{children:"IMLGS"})]})}),M.jsx("tbody",{children:n.items.map(m=>M.jsxs("tr",{children:[M.jsx("td",{children:m.facility?M.jsx(Oo,{to:{pathname:`/repositories/${m.facility.id}`},children:m.facility.facility_code}):m.facility_code}),M.jsx("td",{children:m.platform}),M.jsx("td",{children:m.cruise}),M.jsx("td",{children:M.jsx(Oo,{to:{pathname:`/samples/${m.imlgs}`},children:m.sample})}),M.jsx("td",{children:m.device}),M.jsx("td",{children:m.cored_length}),M.jsx("td",{children:m.lat}),M.jsx("td",{children:m.lon}),M.jsx("td",{children:m.water_depth}),M.jsx("td",{children:m.begin_date}),M.jsx("td",{children:m.igsn}),M.jsx("td",{children:M.jsx(Oo,{to:{pathname:`/samples/${m.imlgs}`},children:m.imlgs})})]},m.imlgs))})]}):""]})]})}const eIe=function(){return null};const Wg=new Jee({defaultOptions:{queries:{staleTime:1/0}}}),tIe=WK([{path:"/",element:M.jsx(oX,{}),errorElement:M.jsx(vL,{}),children:[{path:"samples",element:M.jsx(DMe,{})},{path:"samples/table",element:M.jsx(XMe,{}),loader:YMe(Wg)},{path:"samples/:id",element:M.jsx(qMe,{}),loader:jMe(Wg)},{path:"repositories",element:M.jsx(lX,{}),loader:hee,children:[{index:!0,element:M.jsx(uX,{})},{path:":repositoryId",element:M.jsx(yte,{}),loader:dee(Wg)}]},{path:"cruises",element:M.jsx(Tte,{}),children:[{index:!0,element:M.jsx(Ete,{})},{path:":cruiseId",element:M.jsx(Pte,{}),loader:Cte(Wg)}]},{path:"",element:M.jsx(PK,{to:"/samples"})},{path:"*",element:M.jsx(aX,{}),errorElement:M.jsx(vL,{})}]}]);ZT.createRoot(document.getElementById("root")).render(M.jsx(cP.StrictMode,{children:M.jsxs(ute,{client:Wg,children:[M.jsx(CK,{router:tIe}),M.jsx(eIe,{position:"bottom-right"})]})}));export{Oh as $,yi as A,xt as B,NCe as C,XB as D,c3 as E,N as F,oy as G,Sge as H,uCe as I,OCe as J,Da as K,jn as L,Ls as M,ip as N,Gw as O,hR as P,dR as Q,Ll as R,Cr as S,zU as T,Fh as U,Le as V,pR as W,uke as X,wH as Y,$le as Z,ie as _,u as a,PR as a$,St as a0,wp as a1,dv as a2,Bxe as a3,hn as a4,Xm as a5,Rie as a6,qxe as a7,A3e as a8,p3e as a9,Bo as aA,Qv as aB,iTe as aC,Tp as aD,F3e as aE,npe as aF,pH as aG,ht as aH,voe as aI,k3 as aJ,KW as aK,WU as aL,SS as aM,Tke as aN,yd as aO,tu as aP,uu as aQ,Ga as aR,ru as aS,Sv as aT,Ut as aU,pC as aV,mC as aW,BS as aX,lG as aY,N$ as aZ,ot as a_,uC as aa,g0 as ab,KI as ac,N3e as ad,L3e as ae,Yi as af,C1e as ag,d0 as ah,vW as ai,kO as aj,qt as ak,qo as al,GU as am,lOe as an,be as ao,Fa as ap,Cs as aq,p2 as ar,at as as,pe as at,gr as au,Q as av,F as aw,Bi as ax,Ce as ay,Ua as az,d as b,PO as b$,gD as b0,dke as b1,Zke as b2,tPe as b3,sy as b4,$e as b5,we as b6,hme as b7,KL as b8,rp as b9,_Ie as bA,ACe as bB,Hie as bC,Mz as bD,Iz as bE,Zie as bF,BO as bG,WO as bH,sCe as bI,SCe as bJ,xH as bK,Us as bL,P2e as bM,P3 as bN,_p as bO,k$e as bP,P$e as bQ,O$e as bR,ake as bS,Nh as bT,uIe as bU,dM as bV,k1e as bW,rV as bX,Bie as bY,e2e as bZ,Sue as b_,dCe as ba,kr as bb,Yo as bc,Xv as bd,Me as be,Wx as bf,BM as bg,GM as bh,zs as bi,Mae as bj,Iae as bk,Cae as bl,Lae as bm,Vae as bn,vU as bo,yU as bp,gU as bq,jae as br,qae as bs,Wae as bt,cU as bu,iae as bv,Tae as bw,CS as bx,c2 as by,sre as bz,E as c,SAe as c$,K3e as c0,BH as c1,GH as c2,Y3e as c3,J3e as c4,sue as c5,XU as c6,id as c7,Zo as c8,kke as c9,hv as cA,Tbe as cB,KRe as cC,xbe as cD,Mi as cE,ts as cF,ry as cG,fd as cH,pd as cI,WV as cJ,Jx as cK,AR as cL,a1 as cM,vv as cN,Kn as cO,Hi as cP,Ghe as cQ,o2 as cR,Bhe as cS,Sq as cT,iPe as cU,dc as cV,vTe as cW,Cbe as cX,kbe as cY,ybe as cZ,gSe as c_,Pke as ca,Mke as cb,Cke as cc,Yr as cd,jCe as ce,X3e as cf,Kv as cg,TH as ch,qS as ci,Loe as cj,IS as ck,nR as cl,uU as cm,oU as cn,nU as co,IZ as cp,_Ee as cq,Yv as cr,e1 as cs,ySe as ct,$Se as cu,wSe as cv,_Se as cw,TSe as cx,w3 as cy,Ea as cz,Ei as d,Q1e as d$,$m as d0,OO as d1,gB as d2,Ms as d3,Pt as d4,z2 as d5,Bm as d6,pRe as d7,mRe as d8,hRe as d9,_Pe as dA,au as dB,Axe as dC,Mh as dD,x3e as dE,JS as dF,V3 as dG,gke as dH,ed as dI,hw as dJ,Om as dK,HH as dL,XOe as dM,ny as dN,Kh as dO,LO as dP,$be as dQ,Fi as dR,Y_ as dS,sIe as dT,V3e as dU,eq as dV,VC as dW,Nm as dX,gve as dY,tq as dZ,qx as d_,Tq as da,IRe as db,Mwe as dc,_Re as dd,bwe as de,rIe as df,dRe as dg,CRe as dh,axe as di,Qke as dj,rPe as dk,Soe as dl,_oe as dm,PV as dn,XO as dp,s3e as dq,pIe as dr,Mo as ds,a3e as dt,o3e as du,Ibe as dv,RCe as dw,cd as dx,Xc as dy,dse as dz,pp as e,QRe as e$,d7 as e0,_3 as e1,US as e2,eke as e3,SO as e4,vve as e5,YL as e6,Nf as e7,l0 as e8,cG as e9,uMe as eA,ePe as eB,iAe as eC,vIe as eD,Ho as eE,dae as eF,iIe as eG,Iie as eH,Tm as eI,VO as eJ,Kte as eK,OS as eL,dme as eM,Ql as eN,cp as eO,_Te as eP,wke as eQ,lue as eR,sTe as eS,XRe as eT,YRe as eU,KH as eV,gAe as eW,ek as eX,Sbe as eY,fH as eZ,Jxe as e_,w_ as ea,vC as eb,ct as ec,Yl as ed,Qe as ee,t1 as ef,Nn as eg,Yye as eh,bt as ei,Wm as ej,qa as ek,vp as el,cSe as em,dSe as en,qIe as eo,XCe as ep,Afe as eq,h2 as er,cae as es,pve as et,ln as eu,mve as ev,Gie as ew,up as ex,T3e as ey,Mxe as ez,Ir as f,UCe as f$,m$e as f0,y$e as f1,Xle as f2,Kle as f3,yle as f4,ON as f5,Xr as f6,cc as f7,wv as f8,$Ie as f9,VV as fA,kTe as fB,pbe as fC,oZ as fD,mv as fE,yx as fF,$r as fG,Xl as fH,Kx as fI,LCe as fJ,Kr as fK,j0e as fL,Uz as fM,Hse as fN,We as fO,cPe as fP,eCe as fQ,joe as fR,Ns as fS,wIe as fT,mIe as fU,As as fV,VIe as fW,Go as fX,ar as fY,BR as fZ,Jk as f_,bbe as fa,tF as fb,Sp as fc,rke as fd,lke as fe,jN as ff,Hle as fg,em as fh,Na as fi,Lo as fj,Qx as fk,Yxe as fl,i3e as fm,n3e as fn,t3e as fo,eG as fp,f$e as fq,xO as fr,gCe as fs,hCe as ft,cRe as fu,qCe as fv,W3e as fw,Rxe as fx,BCe as fy,Hl as fz,CH as g,HW as g$,o0 as g0,k2e as g1,Bfe as g2,ou as g3,vH as g4,C3 as g5,ae as g6,cu as g7,YW as g8,pAe as g9,e3 as gA,vke as gB,tx as gC,Phe as gD,cOe as gE,dOe as gF,R3e as gG,_ke as gH,q$e as gI,fv as gJ,xRe as gK,I_e as gL,SRe as gM,kRe as gN,bRe as gO,Tve as gP,zCe as gQ,dy as gR,wU as gS,kW as gT,Gbe as gU,Bbe as gV,ere as gW,oV as gX,aV as gY,fIe as gZ,ore as g_,hAe as ga,dAe as gb,uOe as gc,yu as gd,xTe as ge,wTe as gf,p4 as gg,yW as gh,STe as gi,hOe as gj,Qne as gk,MRe as gl,ERe as gm,ike as gn,Bx as go,Nle as gp,At as gq,MO as gr,sz as gs,Z$e as gt,yB as gu,nm as gv,iR as gw,Ebe as gx,ire as gy,oIe as gz,ive as h,jU as h$,zf as h0,LW as h1,DSe as h2,wO as h3,Voe as h4,zoe as h5,Uoe as h6,ele as h7,Noe as h8,ife as h9,UH as hA,a2 as hB,TCe as hC,A2e as hD,ud as hE,lU as hF,sae as hG,tae as hH,aU as hI,Kl as hJ,UN as hK,lpe as hL,Ts as hM,aG as hN,$ as hO,yCe as hP,Zv as hQ,hIe as hR,pq as hS,eAe as hT,p2e as hU,oAe as hV,im as hW,aIe as hX,lIe as hY,dPe as hZ,C$ as h_,K7 as ha,uae as hb,vfe as hc,tme as hd,dve as he,$Ce as hf,mCe as hg,Ave as hh,Foe as hi,wfe as hj,gae as hk,X7 as hl,Gpe as hm,Wr as hn,nAe as ho,aj as hp,sAe as hq,hke as hr,ZO as hs,UO as ht,H3e as hu,DH as hv,VH as hw,AH as hx,Bse as hy,Yse as hz,S0 as i,fR as i$,Tle as i0,QCe as i1,sxe as i2,f3e as i3,or as i4,khe as i5,oB as i6,Rle as i7,yIe as i8,FCe as i9,yRe as iA,the as iB,Vs as iC,Wa as iD,D as iE,J7 as iF,Tg as iG,lV as iH,oCe as iI,uie as iJ,s2 as iK,bCe as iL,JRe as iM,_O as iN,tCe as iO,oke as iP,j2e as iQ,L2e as iR,G3e as iS,tAe as iT,F2e as iU,nke as iV,fve as iW,l0e as iX,n0e as iY,p1 as iZ,rR as i_,wae as ia,yO as ib,gO as ic,Xte as id,OR as ie,Jke as ig,Hke as ih,lS as ii,S0e as ij,Doe as ik,yxe as il,d2 as im,F2 as io,Jpe as ip,VCe as iq,$Re as ir,M_e as is,wRe as it,T_e as iu,gRe as iv,vRe as iw,TRe as ix,fRe as iy,R_e as iz,Gt as j,QSe as j$,aCe as j0,sV as j1,Sz as j2,iCe as j3,dN as j4,T7 as j5,YB as j6,Nge as j7,SB as j8,G$e as j9,iV as jA,Yn as jB,Bk as jC,TU as jD,Zfe as jE,FO as jF,NIe as jG,$3e as jH,S3e as jI,ZB as jJ,wS as jK,mM as jL,Jr as jM,kv as jN,_Ae as jO,Eke as jP,bke as jQ,xke as jR,Ske as jS,$ke as jT,Zi as jU,Oke as jV,Dve as jW,uy as jX,ISe as jY,CSe as jZ,jW as j_,Vn as ja,am as jb,LSe as jc,lCe as jd,p$e as je,kH as jf,z2e as jg,B2e as jh,W2e as ji,wve as jj,wh as jk,e3e as jl,sie as jm,h7 as jn,r3e as jo,xge as jp,ep as jq,SIe as jr,xIe as js,bIe as jt,Tie as ju,Qpe as jv,Upe as jw,Bpe as jx,dx as jy,Nre as jz,Km as k,UB as k$,BW as k0,px as k1,lz as k2,AW as k3,E0 as k4,_1 as k5,w1 as k6,w2e as k7,$2e as k8,N2e as k9,u7 as kA,Jl as kB,Tv as kC,vCe as kD,wCe as kE,_Ce as kF,mne as kG,cie as kH,fq as kI,xm as kJ,nRe as kK,cCe as kL,xB as kM,Lge as kN,Mv as kO,k2 as kP,Ma as kQ,nq as kR,A$e as kS,L$e as kT,N$e as kU,Gc as kV,Do as kW,P2 as kX,zke as kY,zB as kZ,EB as k_,rAe as ka,vpe as kb,C3e as kc,FT as kd,jT as ke,Z3e as kf,kt as kg,z3e as kh,L1e as ki,B3 as kj,cIe as kk,Q3e as kl,ske as km,jH as kn,KCe as ko,Ale as kp,Lle as kq,ZCe as kr,mAe as ks,yAe as kt,fAe as ku,Woe as kv,DCe as kw,sU as kx,iU as ky,Xxe as kz,Ee as l,Gve as l$,k0e as l0,yOe as l1,z0e as l2,Iv as l3,gOe as l4,td as l5,n$e as l6,oMe as l7,ei as l8,cMe as l9,PRe as lA,$Pe as lB,ZG as lC,kj as lD,ER as lE,hb as lF,dIe as lG,Yde as lH,awe as lI,s0 as lJ,jS as lK,zS as lL,gv as lM,Vue as lN,TIe as lO,Ike as lP,ihe as lQ,she as lR,HD as lS,IR as lT,A2 as lU,Uc as lV,ATe as lW,TPe as lX,PZ as lY,vi as lZ,Uve as l_,LM as la,wz as lb,AN as lc,WCe as ld,wle as le,cke as lf,JCe as lg,lR as lh,MU as li,ble as lj,Fle as lk,Ile as ll,HCe as lm,YCe as ln,nPe as lo,cve as lp,_2 as lq,tke as lr,mR as ls,Hde as lt,Wde as lu,qde as lv,Fue as lw,sg as lx,PCe as ly,Qde as lz,Ki as m,Fve as m0,xae as m1,fse as m2,Yke as m3,Kke as m4,bfe as m5,_fe as m6,KS as m7,Xke as m8,Pse as m9,bPe as ma,d3e as mb,_3e as mc,$Ae as md,jr as n,iRe as o,uH as p,x0e as q,POe as r,Z as s,D3e as t,tp as u,az as v,Rm as w,Mm as x,COe as y,V as z};
